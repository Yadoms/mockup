{"version":3,"sources":["../node_modules/masis/dist/masis.js","js/lib/masis.delete.js","js/lib/masis.move.js","js/lib/masis.resize.js","ts/YadomsThemes.ts","../node_modules/process/browser.js","../node_modules/base64-js/index.js","../node_modules/ieee754/index.js","../node_modules/isarray/index.js","../node_modules/buffer/index.js","../node_modules/js-md5/src/md5.js","ts/YadomsHelper.ts","../src/ContentRect.ts","../src/ResizeObservation.ts","../src/ResizeObserverEntry.ts","../src/ResizeObserver.ts","core/constants.js","core/registry.js","core/utils/global.js","core/msg.js","core/utils/colour.js","core/utils/coordinate.js","core/utils/rect.js","core/utils/string.js","core/utils/size.js","core/utils/style.js","core/utils/useragent.js","core/utils.js","core/events.js","core/events_abstract.js","core/utils/object.js","core/ui_events.js","core/utils/svg.js","core/utils/dom.js","core/block_drag_surface.js","core/utils/idgenerator.js","core/components/component.js","core/css.js","core/utils/math.js","core/dropdowndiv.js","core/grid.js","core/theme.js","core/theme/classic.js","core/utils/keycodes.js","core/keyboard_nav/key_map.js","core/utils/metrics.js","core/utils/toolbox.js","core/utils/xml.js","core/block_events.js","core/workspace_events.js","core/variable_events.js","core/xml.js","core/options.js","core/touch.js","core/scrollbar.js","core/tooltip.js","core/workspace_drag_surface_svg.js","core/keyboard_nav/ast_node.js","core/blocks.js","core/utils/deprecation.js","core/connection.js","core/extensions.js","core/field_registry.js","core/block_animations.js","core/insertion_marker_manager.js","core/block_dragger.js","core/connection_checker.js","core/variable_map.js","core/workspace.js","core/bubble.js","core/ws_comment_events.js","core/bubble_dragger.js","core/workspace_dragger.js","core/flyout_dragger.js","core/keyboard_nav/action.js","core/keyboard_nav/navigation.js","core/gesture.js","core/field.js","core/field_label.js","core/input.js","core/block.js","core/renderers/common/i_path_object.js","core/utils/aria.js","core/menu.js","core/menuitem.js","core/contextmenu.js","core/contextmenu_items.js","core/contextmenu_registry.js","core/rendered_connection.js","core/keyboard_nav/marker.js","core/keyboard_nav/cursor.js","core/keyboard_nav/basic_cursor.js","core/keyboard_nav/tab_navigate_cursor.js","core/block_svg.js","core/renderers/common/block_rendering.js","core/connection_db.js","core/marker_manager.js","core/theme_manager.js","core/touch_gesture.js","core/workspace_audio.js","core/workspace_svg.js","core/inject.js","core/names.js","core/procedures.js","core/variable_model.js","core/variables.js","core/widgetdiv.js","core/blockly.js","core/icon.js","core/warning.js","core/comment.js","core/keyboard_nav/flyout_cursor.js","core/flyout_base.js","core/flyout_horizontal.js","core/flyout_vertical.js","core/flyout_button.js","core/generator.js","core/toolbox/toolbox_item.js","core/toolbox/category.js","core/toolbox/separator.js","core/toolbox/collapsible_category.js","core/toolbox/toolbox.js","core/trashcan.js","core/variables_dynamic.js","core/zoom_controls.js","core/mutator.js","core/field_textinput.js","core/field_angle.js","core/field_checkbox.js","core/field_colour.js","core/field_dropdown.js","core/field_label_serializable.js","core/field_image.js","core/field_multilineinput.js","core/field_number.js","core/field_variable.js","core/utils/svg_paths.js","core/renderers/common/constants.js","core/renderers/common/marker_svg.js","core/renderers/measurables/types.js","core/renderers/measurables/base.js","core/renderers/measurables/connections.js","core/renderers/measurables/inputs.js","core/renderers/measurables/row_elements.js","core/renderers/measurables/rows.js","core/renderers/common/info.js","core/renderers/common/drawer.js","core/renderers/common/path_object.js","core/renderers/common/renderer.js","core/renderers/geras/constants.js","core/renderers/geras/highlighter.js","core/renderers/geras/measurables/inputs.js","core/renderers/geras/info.js","core/renderers/geras/drawer.js","core/renderers/geras/highlight_constants.js","core/renderers/geras/path_object.js","core/renderers/geras/renderer.js","core/renderers/thrasos/info.js","core/renderers/thrasos/renderer.js","core/renderers/zelos/constants.js","core/renderers/zelos/measurables/rows.js","core/renderers/zelos/measurables/row_elements.js","core/renderers/zelos/measurables/inputs.js","core/renderers/zelos/info.js","core/renderers/zelos/drawer.js","core/renderers/zelos/path_object.js","core/renderers/zelos/marker_svg.js","core/renderers/zelos/renderer.js","core/theme/dark.js","core/theme/deuteranopia.js","core/theme/highcontrast.js","core/theme/tritanopia.js","core/requires.js","../node_modules/blockly/blockly.js","../node_modules/blockly/core-browser.js","../node_modules/blockly/msg/en.js","blocks/variables_dynamic.js","blocks/colour.js","blocks/lists.js","blocks/logic.js","blocks/loops.js","blocks/math.js","blocks/procedures.js","blocks/text.js","blocks/variables.js","../node_modules/blockly/blocks.js","generators/javascript/variables_dynamic.js","generators/javascript.js","generators/javascript/colour.js","generators/javascript/lists.js","generators/javascript/logic.js","generators/javascript/loops.js","generators/javascript/math.js","generators/javascript/procedures.js","generators/javascript/text.js","generators/javascript/variables.js","../node_modules/blockly/javascript.js","../node_modules/blockly/browser.js","../node_modules/blockly/index.js","ts/Yadoms.ts","ts/YadomsConsole.ts","ts/main.ts"],"names":["MasisDelete","Masis","options","self","$children","forEach","$el","$div","document","createElement","classList","add","class","addEventListener","ev","removeChild","appendChild","confirm","preventDefault","stopImmediatePropagation","message","event","CustomEvent","detail","element","currentTarget","parentNode","dispatchEvent","$element","populate","_MasisDelete","MasisMove","attr","ghost","moveGhost","redefineSort","createGhost","removeGhost","i","setAttribute","joliNumber","positions","et","style","top","replace","el","left","getAttribute","newPos","$robot","querySelector","exclude","$ghost","remove","innerHTML","onDrag","newX","pageX","newY","pageY","_x","_y","positionsY","Object","keys","reverse","localeCompare","positionsX","j","parseInt","oldpos","createFake","contains","generatePositionsMap","n","width","z","length","Array","join","num","pad","_MasisMove","MasisResize","resize","deleteResize","createResize","target","onResize","active","offsetX","offsetY","previousX","previousY","callbackEnd","breakpoints","height","Math","abs","callbackMove","_MasisResize","cachedSetTimeout","cachedClearTimeout","process","module","exports","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","e","call","runClearTimeout","marker","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","Item","array","noop","nextTick","args","arguments","push","prototype","apply","title","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","CONNECTING_SNAP_RADIUS","Blockly","SNAP_RADIUS","CURRENT_CONNECTION_PREFERENCE","BUMP_DELAY","BUMP_RANDOMNESS","COLLAPSE_CHARS","LONGPRESS","SOUND_LIMIT","DRAG_STACK","HSV_SATURATION","HSV_VALUE","SPRITE","url","INPUT_VALUE","OUTPUT_VALUE","NEXT_STATEMENT","PREVIOUS_STATEMENT","DUMMY_INPUT","ALIGN_LEFT","ALIGN_CENTRE","ALIGN_RIGHT","DRAG_NONE","DRAG_STICKY","DRAG_BEGIN","DRAG_FREE","OPPOSITE_TYPE","TOOLBOX_AT_TOP","TOOLBOX_AT_BOTTOM","TOOLBOX_AT_LEFT","TOOLBOX_AT_RIGHT","DELETE_AREA_NONE","DELETE_AREA_TRASH","DELETE_AREA_TOOLBOX","VARIABLE_CATEGORY_NAME","VARIABLE_DYNAMIC_CATEGORY_NAME","PROCEDURE_CATEGORY_NAME","RENAME_VARIABLE_ID","DELETE_VARIABLE_ID","registry","typeMap_","DEFAULT","Type","Blockly.registry.Type","name_","toString","Blockly.registry.Type.prototype.toString","CONNECTION_CHECKER","EVENT","FIELD","RENDERER","TOOLBOX","THEME","TOOLBOX_ITEM","FLYOUTS_VERTICAL_TOOLBOX","FLYOUTS_HORIZONTAL_TOOLBOX","register","Blockly.registry.register","type","registryItem","opt_quiet","String","trim","toLowerCase","typeRegistry","validate_","Blockly.registry.validate_","fromJson","unregister","Blockly.registry.unregister","console","warn","getItem_","Blockly.registry.getItem_","hasItem","Blockly.registry.hasItem","getClass","Blockly.registry.getClass","getObject","Blockly.registry.getObject","getClassFromOptions","Blockly.registry.getClassFromOptions","plugin","plugins","utils","global","window","Msg","colour","parse","Blockly.utils.colour.parse","str","hex","names","substring","test","rgb","match","r","Number","g","b","rgbToHex","Blockly.utils.colour.rgbToHex","substr","hexToRgb","Blockly.utils.colour.hexToRgb","hsvToHex","Blockly.utils.colour.hsvToHex","h","s","v","red","green","blue","sextant","floor","remainder","val1","val2","val3","blend","Blockly.utils.colour.blend","colour1","colour2","factor","hex1","hex2","rgb1","rgb2","round","Coordinate","Blockly.utils.Coordinate","x","y","equals","Blockly.utils.Coordinate.equals","a","distance","Blockly.utils.Coordinate.distance","dx","dy","sqrt","magnitude","Blockly.utils.Coordinate.magnitude","difference","Blockly.utils.Coordinate.difference","sum","Blockly.utils.Coordinate.sum","scale","Blockly.utils.Coordinate.prototype.scale","translate","Blockly.utils.Coordinate.prototype.translate","tx","ty","Rect","Blockly.utils.Rect","bottom","right","Blockly.utils.Rect.prototype.contains","string","startsWith","Blockly.utils.string.startsWith","prefix","lastIndexOf","shortestStringLength","Blockly.utils.string.shortestStringLength","reduce","commonWordPrefix","Blockly.utils.string.commonWordPrefix","opt_shortest","wordPrefix","max","letter","commonWordSuffix","Blockly.utils.string.commonWordSuffix","charAt","wrap","Blockly.utils.string.wrap","text","limit","lines","split","wrapLine_","Blockly.utils.string.wrapLine_","words","score","Infinity","lineCount","lastScore","lastText","wordBreaks","steps","insertedBreaks","wrapMutate_","wrapScore_","wrapToText_","Blockly.utils.string.wrapScore_","lineLengths","linePunctuation","maxLength","pow","indexOf","Blockly.utils.string.wrapMutate_","bestBreaks","bestScore","mutatedWordBreaks","mutatedScore","Blockly.utils.string.wrapToText_","undefined","Size","Blockly.utils.Size","Blockly.utils.Size.equals","getSize","Blockly.utils.style.getSize","getStyle_","getSizeWithDisplay_","originalDisplay","display","originalVisibility","visibility","originalPosition","position","offsetWidth","offsetHeight","Blockly.utils.style.getSizeWithDisplay_","Blockly.utils.style.getStyle_","getComputedStyle","getCascadedStyle","Blockly.utils.style.getComputedStyle","property","defaultView","styles","getPropertyValue","Blockly.utils.style.getCascadedStyle","currentStyle","getPageOffset","Blockly.utils.style.getPageOffset","pos","box","getBoundingClientRect","documentElement","scrollCoord","pageXOffset","scrollLeft","pageYOffset","scrollTop","getViewportPageOffset","Blockly.utils.style.getViewportPageOffset","body","setElementShown","Blockly.utils.style.setElementShown","isShown","isRightToLeft","Blockly.utils.style.isRightToLeft","getBorderBox","Blockly.utils.style.getBorderBox","parseFloat","scrollIntoContainerView","Blockly.utils.style.scrollIntoContainerView","container","opt_center","offset","getContainerOffsetToScrollInto","Blockly.utils.style.getContainerOffsetToScrollInto","elementPos","containerPos","containerBorder","relX","relY","elementSize","spaceX","clientWidth","spaceY","clientHeight","min","raw","has","rawUpper","toUpperCase","userAgent","IE","EDGE","JAVA_FX","CHROME","WEBKIT","GECKO","ANDROID","IPAD","IPOD","IPHONE","MAC","TABLET","MOBILE","navigator","noEvent","Blockly.utils.noEvent","stopPropagation","isTargetInput","Blockly.utils.isTargetInput","isContentEditable","dataset","isTextInput","getRelativeXY","Blockly.utils.getRelativeXY","xy","transform","XY_REGEX_","styleComponents","XY_STYLE_REGEX_","getInjectionDivXY_","Blockly.utils.getInjectionDivXY_","isRightButton","Blockly.utils.isRightButton","ctrlKey","button","mouseToSvg","Blockly.utils.mouseToSvg","svg","matrix","svgPoint","createSVGPoint","clientX","clientY","getScreenCTM","inverse","matrixTransform","getScrollDeltaPixels","Blockly.utils.getScrollDeltaPixels","deltaMode","deltaX","deltaY","LINE_MODE_MULTIPLIER","PAGE_MODE_MULTIPLIER","tokenizeInterpolation","Blockly.utils.tokenizeInterpolation","tokenizeInterpolation_","replaceMessageReferences","Blockly.utils.replaceMessageReferences","interpolatedResult","checkMessageReferences","Blockly.utils.checkMessageReferences","validSoFar","msgTable","m","slice","Blockly.utils.tokenizeInterpolation_","parseInterpolationTokens","tokens","chars","state","buffer","number","c","splice","rawKey","keyUpper","bklyKey","rawValue","mergedTokens","genUid","Blockly.utils.genUid","soupLength","soup_","id","random","is3dSupported","Blockly.utils.is3dSupported","cached_","has3d","transforms","t","insertBefore","computedStyle","runAfterPageLoad","Blockly.utils.runAfterPageLoad","fn","readyState","readyStateCheckInterval","setInterval","clearInterval","getViewportBBox","Blockly.utils.getViewportBBox","scrollOffset","arrayRemove","Blockly.utils.arrayRemove","arr","obj","getDocumentScroll","Blockly.utils.getDocumentScroll","win","getBlockTypeCounts","Blockly.utils.getBlockTypeCounts","block","opt_stripFollowing","typeCountsMap","create","descendants","getDescendants","nextBlock","getNextBlock","index","checkBlock","screenToWsCoordinates","Blockly.utils.screenToWsCoordinates","ws","screenCoordinates","screenX","screenY","boundingRect","getInjectionDiv","clientOffsetPixels","mainOffsetPixels","getOriginOffsetInPixels","finalOffsetPixels","parseBlockColour","Blockly.utils.parseBlockColour","dereferenced","hue","isNaN","errorMsg","Events","group_","recordUndo","disabled_","CREATE","BLOCK_CREATE","DELETE","BLOCK_DELETE","CHANGE","BLOCK_CHANGE","MOVE","BLOCK_MOVE","VAR_CREATE","VAR_DELETE","VAR_RENAME","UI","COMMENT_CREATE","COMMENT_DELETE","COMMENT_CHANGE","COMMENT_MOVE","FINISHED_LOADING","BUMP_EVENTS","FIRE_QUEUE_","fire","Blockly.Events.fire","isEnabled","fireNow_","Blockly.Events.fireNow_","filter","workspaceId","workspace","Workspace","getById","fireChangeListener","Blockly.Events.filter","queueIn","forward","mergedQueue","hash","isNull","key","blockId","lastEntry","lastEvent","newParentId","newInputName","newCoordinate","newValue","unshift","clearPendingUndo","Blockly.Events.clearPendingUndo","disable","Blockly.Events.disable","enable","Blockly.Events.enable","Blockly.Events.isEnabled","getGroup","Blockly.Events.getGroup","setGroup","Blockly.Events.setGroup","getDescendantIds","Blockly.Events.getDescendantIds","ids","descendant","Blockly.Events.fromJson","json","eventClass","disableOrphans","Blockly.Events.disableOrphans","getBlockById","parent","getParent","children","child","setEnabled","outputConnection","previousConnection","isDragging","Abstract","Blockly.Events.Abstract","isBlank","group","toJson","Blockly.Events.Abstract.prototype.toJson","Blockly.Events.Abstract.prototype.fromJson","Blockly.Events.Abstract.prototype.isNull","Blockly.Events.Abstract.prototype.run","_forward","getEventWorkspace_","Blockly.Events.Abstract.prototype.getEventWorkspace_","object","inherits","Blockly.utils.object.inherits","childCtor","parentCtor","superClass_","constructor","mixin","Blockly.utils.object.mixin","source","deepMerge","Blockly.utils.object.deepMerge","values","Blockly.utils.object.values","map","Ui","Blockly.Events.Ui","opt_block","opt_element","opt_oldValue","opt_newValue","oldValue","Blockly.Events.Ui.prototype.toJson","Blockly.Events.Ui.prototype.fromJson","Svg","Blockly.utils.Svg","tagName","tagName_","Blockly.utils.Svg.prototype.toString","ANIMATE","CIRCLE","CLIPPATH","DEFS","FECOMPOSITE","FECOMPONENTTRANSFER","FEFLOOD","FEFUNCA","FEGAUSSIANBLUR","FEPOINTLIGHT","FESPECULARLIGHTING","FILTER","FOREIGNOBJECT","G","IMAGE","LINE","PATH","PATTERN","POLYGON","RECT","SVG","TEXT","TSPAN","dom","SVG_NS","HTML_NS","XLINK_NS","NodeType","ELEMENT_NODE","TEXT_NODE","COMMENT_NODE","DOCUMENT_POSITION_CONTAINED_BY","cacheWidths_","cacheReference_","canvasContext_","createSvgElement","Blockly.utils.dom.createSvgElement","attrs","opt_parent","createElementNS","runtimeStyle","addClass","Blockly.utils.dom.addClass","className","classes","removeClasses","Blockly.utils.dom.removeClasses","classNames","removeClass","Blockly.utils.dom.removeClass","removeAttribute","hasClass","Blockly.utils.dom.hasClass","removeNode","Blockly.utils.dom.removeNode","node","insertAfter","Blockly.utils.dom.insertAfter","newNode","refNode","siblingNode","nextSibling","containsNode","Blockly.utils.dom.containsNode","compareDocumentPosition","setCssTransform","Blockly.utils.dom.setCssTransform","startTextWidthCache","Blockly.utils.dom.startTextWidthCache","stopTextWidthCache","Blockly.utils.dom.stopTextWidthCache","getTextWidth","Blockly.utils.dom.getTextWidth","textElement","textContent","baseVal","getBBox","getComputedTextLength","getFastTextWidth","Blockly.utils.dom.getFastTextWidth","fontSize","fontWeight","fontFamily","getFastTextWidthWithSizeString","Blockly.utils.dom.getFastTextWidthWithSizeString","computeCanvas","getContext","font","measureText","measureFontMetrics","Blockly.utils.dom.measureFontMetrics","span","div","result","alignItems","baseline","offsetTop","BlockDragSurfaceSvg","Blockly.BlockDragSurfaceSvg","container_","createDom","SVG_","dragGroup_","scale_","surfaceXY_","Blockly.BlockDragSurfaceSvg.prototype.createDom","setBlocksAndShow","Blockly.BlockDragSurfaceSvg.prototype.setBlocksAndShow","blocks","childNodes","translateAndScaleGroup","Blockly.BlockDragSurfaceSvg.prototype.translateAndScaleGroup","fixedX","toFixed","fixedY","translateSurfaceInternal_","Blockly.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_","translateSurface","Blockly.BlockDragSurfaceSvg.prototype.translateSurface","getSurfaceTranslation","Blockly.BlockDragSurfaceSvg.prototype.getSurfaceTranslation","Blockly.BlockDragSurfaceSvg.prototype.getGroup","getCurrentBlock","Blockly.BlockDragSurfaceSvg.prototype.getCurrentBlock","firstChild","clearAndHide","Blockly.BlockDragSurfaceSvg.prototype.clearAndHide","opt_newSurface","IdGenerator","nextId_","getNextUniqueId","Blockly.utils.IdGenerator.getNextUniqueId","Component","Blockly.Component","rightToLeft_","defaultRightToLeft","id_","inDocument_","parent_","element_","children_","childIndex_","disposed_","ALREADY_RENDERED","PARENT_UNABLE_TO_BE_SET","CHILD_INDEX_OUT_OF_BOUNDS","ABSTRACT_METHOD","getId","Blockly.Component.prototype.getId","getElement","Blockly.Component.prototype.getElement","setElementInternal","Blockly.Component.prototype.setElementInternal","setParent","Blockly.Component.prototype.setParent","getChild","Blockly.Component.prototype.getParent","isInDocument","Blockly.Component.prototype.isInDocument","Blockly.Component.prototype.createDom","render","Blockly.Component.prototype.render","opt_parentElement","render_","Blockly.Component.prototype.render_","opt_beforeNode","enterDocument","Blockly.Component.prototype.enterDocument","forEachChild","exitDocument","Blockly.Component.prototype.exitDocument","dispose","Blockly.Component.prototype.dispose","disposeInternal","Blockly.Component.prototype.disposeInternal","addChild","Blockly.Component.prototype.addChild","opt_render","addChildAt","getChildCount","Blockly.Component.prototype.addChildAt","insertBeforeElement","contentElement","getContentElement","sibling","getChildAt","nodeType","Blockly.Component.prototype.getContentElement","hasChildren","Blockly.Component.prototype.hasChildren","Blockly.Component.prototype.getChildCount","Blockly.Component.prototype.getChild","Blockly.Component.prototype.getChildAt","Blockly.Component.prototype.forEachChild","f","opt_obj","Css","injected_","Blockly.Css.register","cssArray","CONTENT","inject","Blockly.Css.inject","hasCss","pathToMedia","mediaPath","cssNode","cssTextNode","createTextNode","head","math","toRadians","Blockly.utils.math.toRadians","angleDegrees","PI","toDegrees","Blockly.utils.math.toDegrees","angleRadians","clamp","Blockly.utils.math.clamp","lowerBound","upperBound","temp","DropDownDiv","Blockly.DropDownDiv","boundsElement_","owner_","positionToField_","ARROW_SIZE","BORDER_SIZE","ARROW_HORIZONTAL_PADDING","PADDING_Y","ANIMATION_TIME","animateOutTimer_","onHide_","rendererClassName_","themeClassName_","Blockly.DropDownDiv.createDom","DIV_","parentContainer","content","content_","arrow","arrow_","opacity","transition","setBoundsElement","Blockly.DropDownDiv.setBoundsElement","boundsElement","getContentDiv","Blockly.DropDownDiv.getContentDiv","clearContent","Blockly.DropDownDiv.clearContent","setColour","Blockly.DropDownDiv.setColour","backgroundColour","borderColour","backgroundColor","borderColor","showPositionedByBlock","Blockly.DropDownDiv.showPositionedByBlock","field","opt_onHide","opt_secondaryYOffset","showPositionedByRect_","getScaledBboxOfBlock_","showPositionedByField","Blockly.DropDownDiv.showPositionedByField","getScaledBboxOfField_","Blockly.DropDownDiv.getScaledBboxOfBlock_","blockSvg","getSvgRoot","bBox","scaledHeight","scaledWidth","Blockly.DropDownDiv.getScaledBboxOfField_","getScaledBBox","Blockly.DropDownDiv.showPositionedByRect_","primaryX","primaryY","secondaryY","sourceBlock","getSourceBlock","parentWorkspace","getParentSvg","show","RTL","Blockly.DropDownDiv.show","owner","rtl","secondaryX","direction","mainWorkspace","getMainWorkspace","getRenderer","getClassName","getTheme","positionInternal_","getBoundsInfo_","Blockly.DropDownDiv.getBoundsInfo_","boundPosition","boundSize","getPositionMetrics_","Blockly.DropDownDiv.getPositionMetrics_","boundsInfo","divSize","getPositionBelowMetrics_","getPositionAboveMetrics_","clientTop","getPositionTopOfPageMetrics_","Blockly.DropDownDiv.getPositionBelowMetrics_","initialX","xCoords","getPositionX","divX","initialY","finalX","finalY","arrowX","arrowY","arrowAtTop","arrowVisible","Blockly.DropDownDiv.getPositionAboveMetrics_","Blockly.DropDownDiv.getPositionTopOfPageMetrics_","sourceX","Blockly.DropDownDiv.getPositionX","boundsLeft","boundsRight","divWidth","horizPadding","isVisible","Blockly.DropDownDiv.isVisible","hideIfOwner","Blockly.DropDownDiv.hideIfOwner","opt_withoutAnimation","hideWithoutAnimation","hide","Blockly.DropDownDiv.hide","Blockly.DropDownDiv.hideWithoutAnimation","markFocused","Blockly.DropDownDiv.positionInternal_","metrics","repositionForWindowResize","Blockly.DropDownDiv.repositionForWindowResize","Grid","Blockly.Grid","pattern","gridPattern_","spacing_","length_","line2_","line1_","snapToGrid_","Blockly.Grid.prototype.dispose","shouldSnap","Blockly.Grid.prototype.shouldSnap","getSpacing","Blockly.Grid.prototype.getSpacing","getPatternId","Blockly.Grid.prototype.getPatternId","update","Blockly.Grid.prototype.update","safeSpacing","start","half","end","setLineAttributes_","Blockly.Grid.prototype.setLineAttributes_","line","x1","x2","y1","y2","moveTo","Blockly.Grid.prototype.moveTo","Blockly.Grid.createDom","rnd","gridOptions","defs","gridPattern","Theme","Blockly.Theme","opt_blockStyles","opt_categoryStyles","opt_componentStyles","blockStyles","categoryStyles","componentStyles","fontStyle","startHats","Blockly.Theme.prototype.getClassName","setBlockStyle","Blockly.Theme.prototype.setBlockStyle","blockStyleName","blockStyle","setCategoryStyle","Blockly.Theme.prototype.setCategoryStyle","categoryStyleName","categoryStyle","getComponentStyle","Blockly.Theme.prototype.getComponentStyle","componentName","setComponentStyle","Blockly.Theme.prototype.setComponentStyle","styleValue","setFontStyle","Blockly.Theme.prototype.setFontStyle","setStartHats","Blockly.Theme.prototype.setStartHats","defineTheme","Blockly.Theme.defineTheme","themeObj","theme","base","Themes","Classic","defaultBlockStyles","KeyCodes","WIN_KEY_FF_LINUX","MAC_ENTER","BACKSPACE","TAB","NUM_CENTER","ENTER","SHIFT","CTRL","ALT","PAUSE","CAPS_LOCK","ESC","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","PLUS_SIGN","PRINT_SCREEN","INSERT","ZERO","ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","FF_SEMICOLON","FF_EQUALS","FF_DASH","FF_HASH","QUESTION_MARK","AT_SIGN","A","B","C","D","E","F","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","META","WIN_KEY_RIGHT","CONTEXT_MENU","NUM_ZERO","NUM_ONE","NUM_TWO","NUM_THREE","NUM_FOUR","NUM_FIVE","NUM_SIX","NUM_SEVEN","NUM_EIGHT","NUM_NINE","NUM_MULTIPLY","NUM_PLUS","NUM_MINUS","NUM_PERIOD","NUM_DIVISION","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NUMLOCK","SCROLL_LOCK","FIRST_MEDIA_KEY","LAST_MEDIA_KEY","SEMICOLON","DASH","EQUALS","COMMA","PERIOD","SLASH","APOSTROPHE","TILDE","SINGLE_QUOTE","OPEN_SQUARE_BRACKET","BACKSLASH","CLOSE_SQUARE_BRACKET","WIN_KEY","MAC_FF_META","MAC_WK_CMD_LEFT","MAC_WK_CMD_RIGHT","WIN_IME","VK_NONAME","PHANTOM","user","keyMap","map_","modifierKeys","CONTROL","setActionForKey","Blockly.user.keyMap.setActionForKey","keyCode","action","oldKey","getKeyByAction","setKeyMap","Blockly.user.keyMap.setKeyMap","getKeyMap","Blockly.user.keyMap.getKeyMap","getActionByKeyCode","Blockly.user.keyMap.getActionByKeyCode","Blockly.user.keyMap.getKeyByAction","serializeKeyEvent","Blockly.user.keyMap.serializeKeyEvent","keyName","modifiers","getModifierState","checkModifiers_","Blockly.user.keyMap.checkModifiers_","validModifiers","modifier","createSerializedKey","Blockly.user.keyMap.createSerializedKey","validModifier","createDefaultKeyMap","Blockly.user.keyMap.createDefaultKeyMap","controlK","shiftW","shiftA","shiftS","shiftD","navigation","ACTION_PREVIOUS","ACTION_OUT","ACTION_NEXT","ACTION_IN","ACTION_INSERT","ACTION_MARK","ACTION_DISCONNECT","ACTION_TOOLBOX","ACTION_EXIT","ACTION_TOGGLE_KEYBOARD_NAV","ACTION_MOVE_WS_CURSOR_UP","ACTION_MOVE_WS_CURSOR_LEFT","ACTION_MOVE_WS_CURSOR_DOWN","ACTION_MOVE_WS_CURSOR_RIGHT","Metrics","Blockly.utils.Metrics","toolbox","CATEGORY_TOOLBOX_KIND","FLYOUT_TOOLBOX_KIND","Position","TOP","BOTTOM","convertToolboxDefToJson","Blockly.utils.toolbox.convertToolboxDefToJson","toolboxDef","parseToolboxTree","convertToToolboxJson_","validateToolbox_","toolboxJson","Blockly.utils.toolbox.validateToolbox_","toolboxKind","toolboxContents","convertFlyoutDefToJsonArray","Blockly.utils.toolbox.convertFlyoutDefToJsonArray","flyoutDef","isArray","xmlToJsonArray_","hasCategories","Blockly.utils.toolbox.hasCategories","item","isCategoryCollapsible","Blockly.utils.toolbox.isCategoryCollapsible","categoryInfo","Blockly.utils.toolbox.convertToToolboxJson_","addAttributes_","Blockly.utils.toolbox.xmlToJsonArray_","Blockly.utils.toolbox.addAttributes_","attributes","nodeName","value","Blockly.utils.toolbox.parseToolboxTree","outerHTML","Xml","textToDom","xml","NAME_SPACE","Blockly.utils.xml.document","Blockly.utils.xml.createElement","Blockly.utils.xml.createTextNode","textToDomDocument","Blockly.utils.xml.textToDomDocument","DOMParser","parseFromString","domToText","Blockly.utils.xml.domToText","XMLSerializer","serializeToString","BlockBase","Blockly.Events.BlockBase","Blockly.Events.BlockBase.prototype.toJson","Blockly.Events.BlockBase.prototype.fromJson","Change","Blockly.Events.Change","opt_name","BlockChange","Blockly.Events.Change.prototype.toJson","Blockly.Events.Change.prototype.fromJson","Blockly.Events.Change.prototype.isNull","Blockly.Events.Change.prototype.run","mutator","setVisible","getField","setValue","setCommentText","setCollapsed","setInputsInline","oldMutation","mutationToDom","oldMutationDom","domToMutation","Create","Blockly.Events.Create","isShadow","rendered","blockToDomWithXY","blockToDom","BlockCreate","Blockly.Events.Create.prototype.toJson","Blockly.Events.Create.prototype.fromJson","Blockly.Events.Create.prototype.run","domToWorkspace","Delete","Blockly.Events.Delete","oldXml","BlockDelete","Blockly.Events.Delete.prototype.toJson","Blockly.Events.Delete.prototype.fromJson","Blockly.Events.Delete.prototype.run","Move","Blockly.Events.Move","location","currentLocation_","oldParentId","parentId","oldInputName","inputName","oldCoordinate","coordinate","BlockMove","Blockly.Events.Move.prototype.toJson","Blockly.Events.Move.prototype.fromJson","recordNew","Blockly.Events.Move.prototype.recordNew","Blockly.Events.Move.prototype.currentLocation_","input","getInputWithBlock","getRelativeToSurfaceXY","Blockly.Events.Move.prototype.isNull","Blockly.Events.Move.prototype.run","parentBlock","unplug","moveBy","blockConnection","getInput","parentConnection","connection","nextConnection","connect","FinishedLoading","Blockly.Events.FinishedLoading","opt_workspace","Blockly.Events.FinishedLoading.prototype.toJson","Blockly.Events.FinishedLoading.prototype.fromJson","VarBase","Blockly.Events.VarBase","opt_variable","varId","Blockly.Events.VarBase.prototype.toJson","Blockly.Events.VarBase.prototype.fromJson","VarCreate","Blockly.Events.VarCreate","varType","varName","Blockly.Events.VarCreate.prototype.toJson","Blockly.Events.VarCreate.prototype.fromJson","Blockly.Events.VarCreate.prototype.run","createVariable","deleteVariableById","VarDelete","Blockly.Events.VarDelete","Blockly.Events.VarDelete.prototype.toJson","Blockly.Events.VarDelete.prototype.fromJson","Blockly.Events.VarDelete.prototype.run","VarRename","Blockly.Events.VarRename","newName","oldName","Blockly.Events.VarRename.prototype.toJson","Blockly.Events.VarRename.prototype.fromJson","Blockly.Events.VarRename.prototype.run","renameVariableById","workspaceToDom","Blockly.Xml.workspaceToDom","opt_noId","variablesElement","variablesToDom","Variables","allUsedVarModels","hasChildNodes","comments","comment","getTopComments","toXmlWithXY","getTopBlocks","Blockly.Xml.variablesToDom","variableList","variable","variables","Blockly.Xml.blockToDomWithXY","isInsertionMarker","getChildren","DocumentFragment","getWidth","fieldToDom_","Blockly.Xml.fieldToDom_","isSerializable","toXml","allFieldsToDom_","Blockly.Xml.allFieldsToDom_","inputList","fieldRow","fieldDom","Blockly.Xml.blockToDom","mutation","hasAttributes","commentText","getCommentText","size","commentModel","pinned","commentElement","data","dataElement","empty","childBlock","targetBlock","shadow","getShadowDom","cloneShadow_","elem","inputsInline","inputsInlineDefault","isCollapsed","isDeletable","isMovable","isEditable","Blockly.Xml.cloneShadow_","textNode","cloneNode","Blockly.Xml.domToText","domToPrettyText","Blockly.Xml.domToPrettyText","indent","Blockly.Xml.textToDom","doc","getElementsByTagName","clearWorkspaceAndLoadFromXml","Blockly.Xml.clearWorkspaceAndLoadFromXml","blockIds","setResizesEnabled","clear","Blockly.Xml.domToWorkspace","swap","newBlockIds","existingGroup","variablesFirst","xmlChild","xmlChildElement","domToBlock","blockX","hasAttribute","blockY","WorkspaceCommentSvg","fromXml","WorkspaceComment","domToVariables","appendDomToWorkspace","Blockly.Xml.appendDomToWorkspace","bbox","hasOwnProperty","getBlocksBoundingBox","farY","topX","newLeftX","newRightX","blockXY","ySeparation","Blockly.Xml.domToBlock","xmlBlock","variablesBeforeCreation","getAllVariables","topBlock","domToBlockHeadless_","setConnectionTracking","initSvg","disposed","updateDisabled","resizeContents","initModel","newVariables","getAddedVariables","Blockly.Xml.domToVariables","xmlVariables","Blockly.Xml.domToBlockHeadless_","prototypeName","newBlock","blockChild","childShadowElement","childBlockElement","grandchild","callInitSvg","Comment","getCommentIcon","isInFlyout","domToField_","TypeError","setShadowDom","isConnected","inline","disabled","deletable","setDeletable","movable","setMovable","editable","setEditable","collapsed","getVarModels","setShadow","Blockly.Xml.domToField_","fieldName","deleteNext","Blockly.Xml.deleteNext","Options","Blockly.Options","readOnly","toolboxJsonDef","hasTrashcan","hasCollapse","hasComments","hasDisable","hasSounds","maxTrashcanContents","horizontalLayout","toolboxAtStart","oneBasedIndex","renderer","collapse","maxBlocks","maxInstances","moveOptions","parseMoveOptions_","hasScrollbars","scrollbars","languageTree","parseGridOptions_","zoomOptions","parseZoomOptions_","toolboxPosition","parseThemeOptions_","rendererOverrides","BlocklyOptions","Blockly.BlocklyOptions","Blockly.Options.parseMoveOptions_","move","wheel","drag","Blockly.Options.parseZoomOptions_","zoom","controls","startScale","maxScale","minScale","scaleSpeed","pinch","Blockly.Options.parseGridOptions_","grid","spacing","snap","Blockly.Options.parseThemeOptions_","Blockly.Options.parseToolboxTree","deprecation","Touch","TOUCH_ENABLED","touchIdentifier_","TOUCH_MAP","longPid_","longStart","Blockly.longStart","gesture","longStop_","changedTouches","handleRightClick","Blockly.longStop_","clearTouchIdentifier","Blockly.Touch.clearTouchIdentifier","shouldHandleEvent","Blockly.Touch.shouldHandleEvent","isMouseOrTouchEvent","checkTouchIdentifier","getTouchIdentifierFromEvent","Blockly.Touch.getTouchIdentifierFromEvent","pointerId","identifier","Blockly.Touch.checkTouchIdentifier","setClientFromTouch","Blockly.Touch.setClientFromTouch","touchPoint","Blockly.Touch.isMouseOrTouchEvent","isTouchEvent","Blockly.Touch.isTouchEvent","splitEventByTouches","Blockly.Touch.splitEventByTouches","events","newEvent","ScrollbarPair","Blockly.ScrollbarPair","workspace_","hScroll","Scrollbar","vScroll","corner_","scrollbarThickness","getBubbleCanvas","oldHostMetrics_","Blockly.ScrollbarPair.prototype.dispose","Blockly.ScrollbarPair.prototype.resize","hostMetrics","getMetrics","resizeH","resizeV","viewWidth","viewHeight","absoluteTop","absoluteLeft","contentWidth","viewLeft","contentLeft","contentHeight","viewTop","contentTop","maybeFireViewportChangeEvent","set","Blockly.ScrollbarPair.prototype.set","xyRatio","hHandlePosition","ratio","vHandlePosition","vBarLength","scrollViewSize_","getRatio_","setMetrics","setHandlePosition","Blockly.ScrollbarPair.prototype.getRatio_","handlePosition","viewSize","Blockly.Scrollbar","horizontal","opt_pair","opt_class","pair_","horizontal_","createDom_","svgBackground_","outerSvg_","svgHandle_","lengthAttribute_","positionAttribute_","onMouseDownBarWrapper_","bindEventWithChecks_","scrollbar","onMouseDownBar_","onMouseDownHandleWrapper_","onMouseDownHandle_","origin_","startDragMouse_","handleLength_","handlePosition_","isVisible_","containerVisible_","metricsAreEquivalent_","Blockly.Scrollbar.metricsAreEquivalent_","first","second","Blockly.Scrollbar.prototype.dispose","cleanUp_","unbindEvent_","svgGroup_","getThemeManager","unsubscribe","setHandleLength_","Blockly.Scrollbar.prototype.setHandleLength_","newLength","Blockly.Scrollbar.prototype.setHandlePosition","newPosition","setScrollViewSize_","Blockly.Scrollbar.prototype.setScrollViewSize_","newSize","setContainerVisible","Blockly.ScrollbarPair.prototype.setContainerVisible","visible","setPosition","Blockly.Scrollbar.prototype.setPosition","Blockly.Scrollbar.prototype.resize","opt_metrics","resizeHorizontal_","resizeVertical_","onScroll_","Blockly.Scrollbar.prototype.resizeHorizontal_","resizeViewHorizontal","Blockly.Scrollbar.prototype.resizeViewHorizontal","xCoordinate","resizeContentHorizontal","Blockly.Scrollbar.prototype.resizeContentHorizontal","constrainHandle_","Blockly.Scrollbar.prototype.resizeVertical_","resizeViewVertical","Blockly.Scrollbar.prototype.resizeViewVertical","resizeContentVertical","Blockly.Scrollbar.prototype.resizeContentVertical","Blockly.Scrollbar.prototype.createDom_","radius","subscribe","Blockly.Scrollbar.prototype.isVisible","Blockly.Scrollbar.prototype.setContainerVisible","visibilityChanged","updateDisplay_","Blockly.Scrollbar.prototype.setVisible","Blockly.Scrollbar.prototype.updateDisplay_","Blockly.Scrollbar.prototype.onMouseDownBar_","mouseXY","getInverseScreenCTM","mouseLocation","handleXY","handleStart","pageLength","Blockly.Scrollbar.prototype.onMouseDownHandle_","startDragHandle","setupDragSurface","onMouseUpWrapper_","onMouseUpHandle_","onMouseMoveWrapper_","onMouseMoveHandle_","Blockly.Scrollbar.prototype.onMouseMoveHandle_","Blockly.Scrollbar.prototype.onMouseUpHandle_","resetDragSurface","Blockly.Scrollbar.prototype.cleanUp_","hideChaff","Blockly.Scrollbar.prototype.constrainHandle_","Blockly.Scrollbar.prototype.onScroll_","Blockly.Scrollbar.prototype.set","setOrigin","Blockly.Scrollbar.prototype.setOrigin","Tooltip","blocked_","LIMIT","mouseOutPid_","showPid_","lastX_","lastY_","poisonedElement_","OFFSET_X","OFFSET_Y","RADIUS_OK","HOVER_MS","MARGINS","DIV","getTooltipOfObject","Blockly.Tooltip.getTooltipOfObject","getTargetObject_","tooltip","Blockly.Tooltip.getTargetObject_","Blockly.Tooltip.createDom","bindMouseEvents","Blockly.Tooltip.bindMouseEvents","mouseOverWrapper_","bindEvent_","onMouseOver_","mouseOutWrapper_","onMouseOut_","onMouseMove_","unbindMouseEvents","Blockly.Tooltip.unbindMouseEvents","removeEventListener","Blockly.Tooltip.onMouseOver_","Blockly.Tooltip.onMouseOut_","_e","Blockly.Tooltip.onMouseMove_","show_","Blockly.Tooltip.dispose","Blockly.Tooltip.hide","Blockly.Tooltip.block","unblock","Blockly.Tooltip.unblock","Blockly.Tooltip.show_","tip","windowWidth","windowHeight","anchorX","anchorY","scrollY","scrollX","WorkspaceDragSurfaceSvg","Blockly.WorkspaceDragSurfaceSvg","Blockly.WorkspaceDragSurfaceSvg.prototype.createDom","Blockly.WorkspaceDragSurfaceSvg.prototype.translateSurface","Blockly.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation","Blockly.WorkspaceDragSurfaceSvg.prototype.clearAndHide","newSurface","blockCanvas","bubbleCanvas","previousSibling_","setContentsAndShow","Blockly.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow","previousSibling","ASTNode","Blockly.ASTNode","opt_params","type_","isConnection_","isConnectionType_","location_","wsCoordinate_","processParams_","types","BLOCK","INPUT","OUTPUT","NEXT","PREVIOUS","STACK","WORKSPACE","NAVIGATE_ALL_FIELDS","DEFAULT_OFFSET_Y","Blockly.ASTNode.isConnectionType_","createFieldNode","Blockly.ASTNode.createFieldNode","createConnectionNode","Blockly.ASTNode.createConnectionNode","getParentInput","createInputNode","Blockly.ASTNode.createInputNode","createBlockNode","Blockly.ASTNode.createBlockNode","createStackNode","Blockly.ASTNode.createStackNode","createWorkspaceNode","Blockly.ASTNode.createWorkspaceNode","wsCoordinate","params","createTopNode","Blockly.ASTNode.createTopNode","topConnection","astNode","Blockly.ASTNode.prototype.processParams_","getLocation","Blockly.ASTNode.prototype.getLocation","getType","Blockly.ASTNode.prototype.getType","getWsCoordinate","Blockly.ASTNode.prototype.getWsCoordinate","isConnection","Blockly.ASTNode.prototype.isConnection","findNextForInput_","Blockly.ASTNode.prototype.findNextForInput_","parentInput","isClickable","findNextForField_","Blockly.ASTNode.prototype.findNextForField_","curIdx","fieldIdx","newInput","findPrevForInput_","Blockly.ASTNode.prototype.findPrevForInput_","findPrevForField_","Blockly.ASTNode.prototype.findPrevForField_","navigateBetweenStacks_","Blockly.ASTNode.prototype.navigateBetweenStacks_","curLocation","Block","curRoot","getRootBlock","topBlocks","resultIndex","findTopASTNodeForBlock_","Blockly.ASTNode.prototype.findTopASTNodeForBlock_","getOutAstNodeForBlock_","Blockly.ASTNode.prototype.getOutAstNodeForBlock_","getTopStackBlock","targetConnection","findFirstFieldOrInput_","Blockly.ASTNode.prototype.findFirstFieldOrInput_","inputs","Blockly.ASTNode.prototype.getSourceBlock","next","Blockly.ASTNode.prototype.next","in","Blockly.ASTNode.prototype.in","prev","Blockly.ASTNode.prototype.prev","out","Blockly.ASTNode.prototype.out","blockPos","Blocks","Blockly.utils.deprecation.warn","functionName","deprecationDate","deletionDate","opt_use","msg","Connection","Blockly.Connection","sourceBlock_","CAN_CONNECT","REASON_SELF_CONNECTION","REASON_WRONG_TYPE","REASON_TARGET_NULL","REASON_CHECKS_FAILED","REASON_DIFFERENT_WORKSPACES","REASON_SHADOW_PARENT","REASON_DRAG_CHECKS_FAILED","check_","shadowDom_","connect_","Blockly.Connection.prototype.connect_","childConnection","disconnect","orphanBlock","shadowDom","lastConnectionInRow","connectionChecker","canConnect","onFailedConnect","connectReciprocally_","Blockly.Connection.prototype.dispose","Blockly.Connection.prototype.getSourceBlock","isSuperior","Blockly.Connection.prototype.isSuperior","Blockly.Connection.prototype.isConnected","canConnectWithReason","Blockly.Connection.prototype.canConnectWithReason","getConnectionChecker","checkConnection","Blockly.Connection.prototype.checkConnection","checker","reason","getErrorMessage","Blockly.Connection.prototype.getConnectionChecker","isConnectionAllowed","Blockly.Connection.prototype.isConnectionAllowed","candidate","Blockly.Connection.prototype.onFailedConnect","_otherConnection","Blockly.Connection.prototype.connect","otherConnection","eventGroup","Blockly.Connection.connectReciprocally_","singleConnection_","Blockly.Connection.singleConnection_","output","thisConnection","typeChecker","Blockly.Connection.lastConnectionInRow","startBlock","Blockly.Connection.prototype.disconnect","disconnectInternal_","respawnShadow_","Blockly.Connection.prototype.disconnectInternal_","Blockly.Connection.prototype.respawnShadow_","blockShadow","Blockly.Connection.prototype.targetBlock","checkType","Blockly.Connection.prototype.checkType","checkType_","Blockly.Connection.prototype.checkType_","onCheckChanged_","Blockly.Connection.prototype.onCheckChanged_","setCheck","Blockly.Connection.prototype.setCheck","check","getCheck","Blockly.Connection.prototype.getCheck","Blockly.Connection.prototype.setShadowDom","Blockly.Connection.prototype.getShadowDom","neighbours","Blockly.Connection.prototype.neighbours","_maxLimit","Blockly.Connection.prototype.getParentInput","idx","Blockly.Connection.prototype.toString","toDevString","Extensions","ALL_","Blockly.Extensions.register","initFn","registerMixin","Blockly.Extensions.registerMixin","mixinObj","registerMutator","Blockly.Extensions.registerMutator","opt_helperFn","opt_blockList","errorPrefix","checkHasFunction_","hasMutatorDialog","checkMutatorDialog_","Mutator","setMutator","Blockly.Extensions.unregister","Blockly.Extensions.apply","isMutator","extensionFn","checkNoMutatorProperties_","mutatorProperties","getMutatorProperties_","checkBlockHasMutatorProperties_","mutatorPropertiesMatch_","Blockly.Extensions.checkHasFunction_","func","propertyName","Blockly.Extensions.checkNoMutatorProperties_","mutationName","Blockly.Extensions.checkMutatorDialog_","hasCompose","compose","hasDecompose","decompose","Blockly.Extensions.checkBlockHasMutatorProperties_","Blockly.Extensions.getMutatorProperties_","Blockly.Extensions.mutatorPropertiesMatch_","oldProperties","newProperties","buildTooltipForDropdown","Blockly.Extensions.buildTooltipForDropdown","dropdownName","lookupTable","blockTypesChecked","checkDropdownOptionsInTable_","setTooltip","getFieldValue","warning","bind","Blockly.Extensions.checkDropdownOptionsInTable_","dropdown","isOptionListDynamic","getOptions","optionKey","buildTooltipWithFieldText","Blockly.Extensions.buildTooltipWithFieldText","msgTemplate","getText","extensionParentTooltip_","Blockly.Extensions.extensionParentTooltip_","tooltipWhenNotConnected_","getInputsInline","fieldRegistry","Blockly.fieldRegistry.register","fieldClass","Blockly.fieldRegistry.unregister","Blockly.fieldRegistry.fromJson","fieldObject","blockAnimations","disconnectPid_","disconnectGroup_","disposeUiEffect","Blockly.blockAnimations.disposeUiEffect","svgGroup","getAudioManager","play","getSvgXY","clone","translateX_","translateY_","bBox_","disposeUiStep_","Date","Blockly.blockAnimations.disposeUiStep_","workspaceScale","percent","connectionUiEffect","Blockly.blockAnimations.connectionUiEffect","ripple","connectionUiStep_","Blockly.blockAnimations.connectionUiStep_","disconnectUiEffect","Blockly.blockAnimations.disconnectUiEffect","getHeightWidth","atan","DISPLACEMENT","disconnectUiStep_","Blockly.blockAnimations.disconnectUiStep_","DURATION","skew_","sin","WIGGLES","translate_","disconnectUiStop","Blockly.blockAnimations.disconnectUiStop","InsertionMarkerManager","Blockly.InsertionMarkerManager","topBlock_","selected","lastMarker_","lastOnStack_","firstMarker_","createMarkerBlock_","localConnection_","closestConnection_","wouldDeleteBlock_","fadedBlock_","highlightedBlock_","markerConnection_","availableConnections_","initAvailableConnections_","PREVIEW_TYPE","INSERTION_MARKER","INPUT_OUTLINE","REPLACEMENT_FADE","Blockly.InsertionMarkerManager.prototype.dispose","updateAvailableConnections","Blockly.InsertionMarkerManager.prototype.updateAvailableConnections","wouldDeleteBlock","Blockly.InsertionMarkerManager.prototype.wouldDeleteBlock","wouldConnectBlock","Blockly.InsertionMarkerManager.prototype.wouldConnectBlock","applyConnections","Blockly.InsertionMarkerManager.prototype.applyConnections","hidePreview_","inferiorConnection","rootBlock","bringToFront","Blockly.InsertionMarkerManager.prototype.update","dxy","deleteArea","getCandidate_","shouldDelete_","shouldUpdatePreviews_","maybeHidePreview_","maybeShowPreview_","Blockly.InsertionMarkerManager.prototype.createMarkerBlock_","imType","setInsertionMarker","sourceInput","COLLAPSED_INPUT_NAME","resultInput","getValue","Blockly.InsertionMarkerManager.prototype.initAvailableConnections_","available","getConnections_","lastOnStack","lastConnectionInStack","Blockly.InsertionMarkerManager.prototype.shouldUpdatePreviews_","candidateLocal","local","candidateClosest","closest","xDiff","yDiff","curDistance","error","Blockly.InsertionMarkerManager.prototype.getCandidate_","getStartRadius_","myConnection","neighbour","Blockly.InsertionMarkerManager.prototype.getStartRadius_","Blockly.InsertionMarkerManager.prototype.shouldDelete_","wouldConnect","Blockly.InsertionMarkerManager.prototype.maybeShowPreview_","log","showPreview_","Blockly.InsertionMarkerManager.prototype.showPreview_","getConnectionPreviewMethod","showInsertionInputOutline_","showInsertionMarker_","showReplacementFade_","shouldHighlightConnection","highlight","Blockly.InsertionMarkerManager.prototype.maybeHidePreview_","closestChanged","localChanged","Blockly.InsertionMarkerManager.prototype.hidePreview_","unhighlight","hideReplacementFade_","hideInsertionInputOutline_","hideInsertionMarker_","Blockly.InsertionMarkerManager.prototype.showInsertionMarker_","imBlock","imConn","getMatchingConnection","positionNearConnection","Blockly.InsertionMarkerManager.prototype.hideInsertionMarker_","markerNext","markerPrev","markerOutput","isFirstInOutputStack","innerConnection","previousBlockNextConnection","Blockly.InsertionMarkerManager.prototype.showInsertionInputOutline_","highlightShapeForInput","Blockly.InsertionMarkerManager.prototype.hideInsertionInputOutline_","Blockly.InsertionMarkerManager.prototype.showReplacementFade_","fadeForReplacement","Blockly.InsertionMarkerManager.prototype.hideReplacementFade_","getInsertionMarkers","Blockly.InsertionMarkerManager.prototype.getInsertionMarkers","BlockDragger","Blockly.BlockDragger","draggingBlock_","draggedConnectionManager_","deleteArea_","startXY_","dragIconData_","initIconData_","Blockly.BlockDragger.prototype.dispose","Blockly.BlockDragger.initIconData_","dragIconData","icons","getIcons","getIconLocation","icon","startBlockDrag","Blockly.BlockDragger.prototype.startBlockDrag","currentDragDeltaXY","healStack","fireDragStartEvent_","delta","pixelsToWorkspaceUnits_","newLoc","setDragging","moveToDragSurface","getToolbox","addStyle","Blockly.BlockDragger.prototype.fireDragStartEvent_","dragBlock","Blockly.BlockDragger.prototype.dragBlock","moveDuringDrag","dragIcons_","isDeleteArea","updateCursorDuringBlockDrag_","endBlockDrag","Blockly.BlockDragger.prototype.endBlockDrag","fireDragEndEvent_","moveOffDragSurface","deleted","maybeDeleteBlock_","moveConnections","fireMoveEvent_","scheduleSnapAndBump","removeStyle","Blockly.BlockDragger.prototype.fireDragEndEvent_","Blockly.BlockDragger.prototype.fireMoveEvent_","Blockly.BlockDragger.prototype.maybeDeleteBlock_","trashcan","closeLid","draggingConnections","Blockly.BlockDragger.prototype.updateCursorDuringBlockDrag_","setDeleteStyle","setLidOpen","Blockly.BlockDragger.prototype.pixelsToWorkspaceUnits_","pixelCoord","Blockly.BlockDragger.prototype.dragIcons_","setIconLocation","Blockly.BlockDragger.prototype.getInsertionMarkers","ConnectionChecker","Blockly.ConnectionChecker","Blockly.ConnectionChecker.prototype.canConnect","opt_distance","Blockly.ConnectionChecker.prototype.canConnectWithReason","safety","doSafetyChecks","doTypeChecks","doDragChecks","Blockly.ConnectionChecker.prototype.getErrorMessage","errorCode","Blockly.ConnectionChecker.prototype.doSafetyChecks","blockA","blockB","Blockly.ConnectionChecker.prototype.doTypeChecks","checkArrayOne","checkArrayTwo","Blockly.ConnectionChecker.prototype.doDragChecks","distanceFrom","canConnectToPrevious_","Blockly.ConnectionChecker.prototype.canConnectToPrevious_","getPreviousBlock","VariableMap","Blockly.VariableMap","variableMap_","Blockly.VariableMap.prototype.clear","renameVariable","Blockly.VariableMap.prototype.renameVariable","conflictVar","getVariable","getAllBlocks","renameVariableWithConflict_","renameVariableAndUses_","Blockly.VariableMap.prototype.renameVariableById","getVariableById","Blockly.VariableMap.prototype.renameVariableAndUses_","updateVarName","Blockly.VariableMap.prototype.renameVariableWithConflict_","renameVarById","variableIndex","getVariablesOfType","Blockly.VariableMap.prototype.createVariable","opt_type","opt_id","VariableModel","deleteVariable","Blockly.VariableMap.prototype.deleteVariable","tempVar","Blockly.VariableMap.prototype.deleteVariableById","variableName","uses","getVariableUsesById","procedureName","deleteText","alert","confirmText","ok","deleteVariableInternal","Blockly.VariableMap.prototype.deleteVariableInternal","Blockly.VariableMap.prototype.getVariable","list","Names","Blockly.VariableMap.prototype.getVariableById","Blockly.VariableMap.prototype.getVariablesOfType","variable_list","getVariableTypes","Blockly.VariableMap.prototype.getVariableTypes","variableMap","getPotentialVariableMap","hasEmpty","Blockly.VariableMap.prototype.getAllVariables","all_variables","getAllVariableNames","Blockly.VariableMap.prototype.getAllVariableNames","allNames","Blockly.VariableMap.prototype.getVariableUsesById","blockVariables","Blockly.Workspace","opt_options","WorkspaceDB_","topBlocks_","topComments_","commentDB_","listeners_","undoStack_","redoStack_","blockDB_","typedBlocksDB_","potentialVariableMap_","isClearing","MAX_UNDO","connectionDBList","Blockly.Workspace.prototype.dispose","SCAN_ANGLE","sortObjects_","Blockly.Workspace.prototype.sortObjects_","aXY","bXY","addTopBlock","Blockly.Workspace.prototype.addTopBlock","removeTopBlock","Blockly.Workspace.prototype.removeTopBlock","Blockly.Workspace.prototype.getTopBlocks","ordered","sort","addTypedBlock","Blockly.Workspace.prototype.addTypedBlock","removeTypedBlock","Blockly.Workspace.prototype.removeTypedBlock","getBlocksByType","Blockly.Workspace.prototype.getBlocksByType","addTopComment","Blockly.Workspace.prototype.addTopComment","removeTopComment","Blockly.Workspace.prototype.removeTopComment","Blockly.Workspace.prototype.getTopComments","Blockly.Workspace.prototype.getAllBlocks","filtered","Blockly.Workspace.prototype.clear","Blockly.Workspace.prototype.renameVariableById","Blockly.Workspace.prototype.createVariable","Blockly.Workspace.prototype.getVariableUsesById","Blockly.Workspace.prototype.deleteVariableById","Blockly.Workspace.prototype.getVariable","Blockly.Workspace.prototype.getVariableById","Blockly.Workspace.prototype.getVariablesOfType","Blockly.Workspace.prototype.getVariableTypes","Blockly.Workspace.prototype.getAllVariables","Blockly.Workspace.prototype.getAllVariableNames","Blockly.Workspace.prototype.getWidth","Blockly.Workspace.prototype.newBlock","remainingCapacity","Blockly.Workspace.prototype.remainingCapacity","remainingCapacityOfType","Blockly.Workspace.prototype.remainingCapacityOfType","isCapacityAvailable","Blockly.Workspace.prototype.isCapacityAvailable","hasBlockLimits","copyableBlocksCount","Blockly.Workspace.prototype.hasBlockLimits","getUndoStack","Blockly.Workspace.prototype.getUndoStack","getRedoStack","Blockly.Workspace.prototype.getRedoStack","undo","Blockly.Workspace.prototype.undo","redo","inputStack","outputStack","inputEvent","pop","clearUndo","Blockly.Workspace.prototype.clearUndo","addChangeListener","Blockly.Workspace.prototype.addChangeListener","removeChangeListener","Blockly.Workspace.prototype.removeChangeListener","Blockly.Workspace.prototype.fireChangeListener","shift","Blockly.Workspace.prototype.getBlockById","setBlockById","Blockly.Workspace.prototype.setBlockById","removeBlockById","Blockly.Workspace.prototype.removeBlockById","getCommentById","Blockly.Workspace.prototype.getCommentById","allInputsFilled","Blockly.Workspace.prototype.allInputsFilled","opt_shadowBlocksAreFilled","Blockly.Workspace.prototype.getPotentialVariableMap","createPotentialVariableMap","Blockly.Workspace.prototype.createPotentialVariableMap","getVariableMap","Blockly.Workspace.prototype.getVariableMap","setVariableMap","Blockly.Workspace.prototype.setVariableMap","Blockly.Workspace.getById","getAll","Blockly.Workspace.getAll","workspaces","Bubble","Blockly.Bubble","shape","anchorXY","bubbleWidth","bubbleHeight","shape_","onMouseDownResizeWrapper_","onMouseDownBubbleWrapper_","moveCallback_","resizeCallback_","angle","ARROW_ANGLE","arrow_radians_","canvas","setAnchorLocation","BORDER_WIDTH","setBubbleSize","positionBubble_","renderArrow_","rendered_","ARROW_THICKNESS","ARROW_BEND","ANCHOR_RADIUS","unbindDragEvents_","Blockly.Bubble.unbindDragEvents_","bubbleMouseUp_","Blockly.Bubble.bubbleMouseUp_","anchorXY_","relativeLeft_","relativeTop_","width_","height_","autoLayout_","Blockly.Bubble.prototype.createDom_","hasResize","bubbleGroup_","getConstants","embossFilterId","bubbleEmboss","bubbleArrow_","bubbleBack_","resizeGroup_","resizeSize","bubbleMouseDown_","resizeMouseDown_","Blockly.Bubble.prototype.getSvgRoot","setSvgId","Blockly.Bubble.prototype.setSvgId","Blockly.Bubble.prototype.bubbleMouseDown_","getGesture","handleBubbleStart","showContextMenu","Blockly.Bubble.prototype.showContextMenu","Blockly.Bubble.prototype.isDeletable","Blockly.Bubble.prototype.setDeleteStyle","_enable","Blockly.Bubble.prototype.resizeMouseDown_","promote","startDrag","resizeMouseMove_","Blockly.Bubble.prototype.resizeMouseMove_","newXY","moveDrag","registerResizeEvent","Blockly.Bubble.prototype.registerResizeEvent","callback","registerMoveEvent","Blockly.Bubble.prototype.registerMoveEvent","Blockly.Bubble.prototype.promote","lastChild","Blockly.Bubble.prototype.setAnchorLocation","layoutBubble_","Blockly.Bubble.prototype.layoutBubble_","optimalLeft","getOptimalRelativeLeft_","optimalTop","getOptimalRelativeTop_","topPosition","MIN_BLOCK_HEIGHT","startPosition","endPosition","bottomPosition","closerPosition","fartherPosition","topPositionOverlap","getOverlap_","startPositionOverlap","closerPositionOverlap","fartherPositionOverlap","mostOverlap","Blockly.Bubble.prototype.getOverlap_","relativeMin","Blockly.Bubble.prototype.getOptimalRelativeLeft_","relativeLeft","bubbleRight","bubbleLeft","workspaceRight","workspaceLeft","Blockly.Bubble.prototype.getOptimalRelativeTop_","relativeTop","bubbleTop","bubbleBottom","workspaceTop","workspaceBottom","Blockly.Bubble.prototype.positionBubble_","Blockly.Bubble.prototype.moveTo","Blockly.Bubble.prototype.setDragging","adding","getBubbleSize","Blockly.Bubble.prototype.getBubbleSize","Blockly.Bubble.prototype.setBubbleSize","doubleBorderWidth","Blockly.Bubble.prototype.renderArrow_","relBubbleX","relBubbleY","relAnchorX","relAnchorY","hypotenuse","rise","acos","rightAngle","rightRise","rightRun","cos","bubbleSize","thickness","backoffRatio","baseX1","baseY1","baseX2","baseY2","swirlAngle","swirlRise","swirlRun","Blockly.Bubble.prototype.setColour","hexColour","Blockly.Bubble.prototype.dispose","Blockly.Bubble.prototype.moveDuringDrag","dragSurface","Blockly.Bubble.prototype.getRelativeToSurfaceXY","setAutoLayout","Blockly.Bubble.prototype.setAutoLayout","CommentBase","Blockly.Events.CommentBase","opt_comment","commentId","Blockly.Events.CommentBase.prototype.toJson","Blockly.Events.CommentBase.prototype.fromJson","CommentChange","Blockly.Events.CommentChange","opt_oldContents","opt_newContents","oldContents_","newContents_","Blockly.Events.CommentChange.prototype.toJson","Blockly.Events.CommentChange.prototype.fromJson","Blockly.Events.CommentChange.prototype.isNull","Blockly.Events.CommentChange.prototype.run","setContent","CommentCreate","Blockly.Events.CommentCreate","Blockly.Events.CommentCreate.prototype.toJson","Blockly.Events.CommentCreate.prototype.fromJson","Blockly.Events.CommentCreate.prototype.run","CommentCreateDeleteHelper","Blockly.Events.CommentCreateDeleteHelper","CommentDelete","Blockly.Events.CommentDelete","Blockly.Events.CommentDelete.prototype.toJson","Blockly.Events.CommentDelete.prototype.fromJson","Blockly.Events.CommentDelete.prototype.run","CommentMove","Blockly.Events.CommentMove","comment_","oldCoordinate_","getXY","newCoordinate_","Blockly.Events.CommentMove.prototype.recordNew","setOldCoordinate","Blockly.Events.CommentMove.prototype.setOldCoordinate","Blockly.Events.CommentMove.prototype.toJson","Blockly.Events.CommentMove.prototype.fromJson","Blockly.Events.CommentMove.prototype.isNull","Blockly.Events.CommentMove.prototype.run","current","BubbleDragger","Blockly.BubbleDragger","bubble","draggingBubble_","wouldDeleteBubble_","dragSurface_","getBlockDragSurface","Blockly.BubbleDragger.prototype.dispose","startBubbleDrag","Blockly.BubbleDragger.prototype.startBubbleDrag","moveToDragSurface_","dragBubble","Blockly.BubbleDragger.prototype.dragBubble","updateCursorDuringBubbleDrag_","maybeDeleteBubble_","Blockly.BubbleDragger.prototype.maybeDeleteBubble_","Blockly.BubbleDragger.prototype.updateCursorDuringBubbleDrag_","endBubbleDrag","Blockly.BubbleDragger.prototype.endBubbleDrag","Blockly.BubbleDragger.prototype.fireMoveEvent_","isComment","Blockly.BubbleDragger.prototype.pixelsToWorkspaceUnits_","Blockly.BubbleDragger.prototype.moveToDragSurface_","WorkspaceDragger","Blockly.WorkspaceDragger","startScrollXY_","Blockly.WorkspaceDragger.prototype.dispose","Blockly.WorkspaceDragger.prototype.startDrag","unselect","endDrag","Blockly.WorkspaceDragger.prototype.endDrag","Blockly.WorkspaceDragger.prototype.drag","scroll","FlyoutDragger","Blockly.FlyoutDragger","flyout","getWorkspace","scrollbar_","horizontalLayout_","Blockly.FlyoutDragger.prototype.drag","Action","Blockly.Action","desc","loggingCallback","STATE_FLYOUT","STATE_WS","STATE_TOOLBOX","WS_MOVE_DISTANCE","currentState_","actionNames","IN","OUT","MARK","DISCONNECT","EXIT","TOGGLE_KEYBOARD_NAV","MOVE_WS_CURSOR_UP","MOVE_WS_CURSOR_DOWN","MOVE_WS_CURSOR_LEFT","MOVE_WS_CURSOR_RIGHT","MARKER_NAME","getMarker","Blockly.navigation.getMarker","getNavigationWorkspace","Blockly.navigation.getNavigationWorkspace","focusToolbox_","Blockly.navigation.focusToolbox_","resetFlyout_","getCurNode","markAtCursor_","getSelectedItem","selectItemByPosition","focusFlyout_","Blockly.navigation.focusFlyout_","getFlyout","getFlyoutCursor_","setCurNode","focusWorkspace_","Blockly.navigation.focusWorkspace_","cursor","getCursor","reset","wsCoord","wsNode","Blockly.navigation.getFlyoutCursor_","insertFromFlyout","Blockly.navigation.insertFromFlyout","curBlock","createBlock","modify_","warn_","removeMark_","Blockly.navigation.resetFlyout_","shouldHide","modifyWarn_","Blockly.navigation.modifyWarn_","markerNode","cursorNode","markerType","cursorType","moveBlockToWorkspace_","Blockly.navigation.moveBlockToWorkspace_","Blockly.navigation.modify_","cursorLoc","markerLoc","insertBlock","disconnectChild_","Blockly.navigation.disconnectChild_","movingConnection","destConnection","movingBlock","destBlock","getInferiorConnection_","moveAndConnect_","Blockly.navigation.moveAndConnect_","Blockly.navigation.getInferiorConnection_","getSuperiorConnection_","Blockly.navigation.getSuperiorConnection_","Blockly.navigation.connect_","movingInferior","destSuperior","movingSuperior","destInferior","Blockly.navigation.insertBlock","inputConnection","disconnectBlocks_","Blockly.navigation.disconnectBlocks_","curNode","curConnection","superiorConnection","log_","bumpAwayFrom","connectionNode","Blockly.navigation.markAtCursor_","Blockly.navigation.removeMark_","setState","Blockly.navigation.setState","newState","moveCursorOnBlockDelete","Blockly.navigation.moveCursorOnBlockDelete","deletedBlock","moveCursorOnBlockMutation","Blockly.navigation.moveCursorOnBlockMutation","mutatedBlock","enableKeyboardAccessibility","Blockly.navigation.enableKeyboardAccessibility","keyboardAccessibilityMode","disableKeyboardAccessibility","Blockly.navigation.disableKeyboardAccessibility","Blockly.navigation.log_","Blockly.navigation.warn_","error_","Blockly.navigation.error_","onKeyPress","Blockly.navigation.onKeyPress","onBlocklyAction","Blockly.navigation.onBlocklyAction","actionHandled","READONLY_ACTION_LIST","handleActions_","Blockly.navigation.handleActions_","toolboxOnAction_","workspaceOnAction_","flyoutOnAction_","Blockly.navigation.flyoutOnAction_","Blockly.navigation.toolboxOnAction_","moveWSCursor_","Blockly.navigation.moveWSCursor_","xDirection","yDirection","Blockly.navigation.workspaceOnAction_","handleEnterForWS_","Blockly.navigation.handleEnterForWS_","showEditor","Gesture","Blockly.Gesture","creatorWorkspace","mouseDownXY_","currentDragDeltaXY_","startWorkspace_","targetBlock_","startBlock_","startField_","startBubble_","creatorWorkspace_","isDraggingBubble_","isDraggingBlock_","isDraggingWorkspace_","hasExceededDragRadius_","mostRecentEvent_","flyout_","workspaceDragger_","blockDragger_","bubbleDragger_","onUpWrapper_","onMoveWrapper_","isEnding_","hasStarted_","calledUpdateIsDragging_","healStack_","Blockly.Gesture.prototype.dispose","clearGesture","updateFromEvent_","Blockly.Gesture.prototype.updateFromEvent_","currentXY","changed","updateDragDelta_","updateIsDragging_","Blockly.Gesture.prototype.updateDragDelta_","FLYOUT_DRAG_RADIUS","DRAG_RADIUS","updateIsDraggingFromFlyout_","Blockly.Gesture.prototype.updateIsDraggingFromFlyout_","isBlockCreatable_","isScrollable","isDragTowardWorkspace","targetWorkspace","updateScreenCalculationsIfScrolled","select","updateIsDraggingBubble_","Blockly.Gesture.prototype.updateIsDraggingBubble_","startDraggingBubble_","updateIsDraggingBlock_","Blockly.Gesture.prototype.updateIsDraggingBlock_","startDraggingBlock_","updateIsDraggingWorkspace_","Blockly.Gesture.prototype.updateIsDraggingWorkspace_","isDraggable","Blockly.Gesture.prototype.updateIsDragging_","Blockly.Gesture.prototype.startDraggingBlock_","Blockly.Gesture.prototype.startDraggingBubble_","doStart","Blockly.Gesture.prototype.doStart","cancel","shiftKey","pointerType","altKey","metaKey","Blockly.Gesture.prototype.bindMouseEvents","handleMove","handleUp","Blockly.Gesture.prototype.handleMove","Blockly.Gesture.prototype.handleUp","isBubbleClick_","doBubbleClick_","isFieldClick_","doFieldClick_","isBlockClick_","doBlockClick_","isWorkspaceClick_","doWorkspaceClick_","Blockly.Gesture.prototype.cancel","Blockly.Gesture.prototype.handleRightClick","bringBlockToFront_","handleWsStart","Blockly.Gesture.prototype.handleWsStart","setStartWorkspace_","fireWorkspaceClick_","Blockly.Gesture.prototype.fireWorkspaceClick_","clickEvent","handleFlyoutStart","Blockly.Gesture.prototype.handleFlyoutStart","setStartFlyout_","handleBlockStart","Blockly.Gesture.prototype.handleBlockStart","setStartBlock","Blockly.Gesture.prototype.handleBubbleStart","setStartBubble","Blockly.Gesture.prototype.doBubbleClick_","setFocus","Blockly.Gesture.prototype.doFieldClick_","Blockly.Gesture.prototype.doBlockClick_","autoClose","Blockly.Gesture.prototype.doWorkspaceClick_","screenCoord","Blockly.Gesture.prototype.bringBlockToFront_","setStartField","Blockly.Gesture.prototype.setStartField","Blockly.Gesture.prototype.setStartBubble","Blockly.Gesture.prototype.setStartBlock","setTargetBlock_","Blockly.Gesture.prototype.setTargetBlock_","Blockly.Gesture.prototype.setStartWorkspace_","Blockly.Gesture.prototype.setStartFlyout_","Blockly.Gesture.prototype.isBubbleClick_","Blockly.Gesture.prototype.isBlockClick_","Blockly.Gesture.prototype.isFieldClick_","Blockly.Gesture.prototype.isWorkspaceClick_","Blockly.Gesture.prototype.isDragging","hasStarted","Blockly.Gesture.prototype.hasStarted","Blockly.Gesture.prototype.getInsertionMarkers","inProgress","Blockly.Gesture.inProgress","currentGesture_","Field","Blockly.Field","opt_validator","opt_config","value_","DEFAULT_VALUE","tooltip_","validator_","size_","constants_","mouseDownWrapper_","textContent_","textElement_","borderRect_","fieldGroup_","markerSvg_","cursorSvg_","configure_","setValidator","maxDisplayLength","isDirty_","visible_","clickTarget_","NBSP","EDITABLE","SERIALIZABLE","Blockly.Field.prototype.configure_","config","setSourceBlock","Blockly.Field.prototype.setSourceBlock","Blockly.Field.prototype.getConstants","Blockly.Field.prototype.getSourceBlock","init","Blockly.Field.prototype.init","initView","updateEditable","bindEvents_","Blockly.Field.prototype.initView","createBorderRect_","createTextElement_","Blockly.Field.prototype.initModel","Blockly.Field.prototype.createBorderRect_","FIELD_BORDER_RECT_RADIUS","Blockly.Field.prototype.createTextElement_","FIELD_TEXT_BASELINE_CENTER","Blockly.Field.prototype.bindEvents_","getClickTarget_","onMouseDown_","Blockly.Field.prototype.fromXml","fieldElement","Blockly.Field.prototype.toXml","Blockly.Field.prototype.dispose","WidgetDiv","Blockly.Field.prototype.updateEditable","CURSOR","Blockly.Field.prototype.isClickable","showEditor_","isCurrentlyEditable","Blockly.Field.prototype.isCurrentlyEditable","Blockly.Field.prototype.isSerializable","Blockly.Field.prototype.isVisible","Blockly.Field.prototype.setVisible","root","Blockly.Field.prototype.setValidator","handler","getValidator","Blockly.Field.prototype.getValidator","classValidator","Blockly.Field.prototype.classValidator","callValidator","Blockly.Field.prototype.callValidator","classResult","userValidator","userResult","Blockly.Field.prototype.getSvgRoot","applyColour","Blockly.Field.prototype.applyColour","Blockly.Field.prototype.render_","nodeValue","getDisplayText_","updateSize_","Blockly.Field.prototype.showEditor","opt_e","updateWidth","Blockly.Field.prototype.updateWidth","Blockly.Field.prototype.updateSize_","opt_margin","constants","totalWidth","xOffset","FIELD_BORDER_RECT_X_PADDING","totalHeight","FIELD_TEXT_HEIGHT","FIELD_TEXT_FONTSIZE","FIELD_TEXT_FONTWEIGHT","FIELD_TEXT_FONTFAMILY","FIELD_BORDER_RECT_HEIGHT","positionTextElement_","positionBorderRect_","Blockly.Field.prototype.positionTextElement_","halfHeight","FIELD_TEXT_BASELINE","Blockly.Field.prototype.positionBorderRect_","Blockly.Field.prototype.getSize","Blockly.Field.prototype.getScaledBBox","getAbsoluteXY_","Blockly.Field.prototype.getDisplayText_","Blockly.Field.prototype.getText","getText_","setText","Blockly.Field.prototype.setText","_newText","markDirty","Blockly.Field.prototype.markDirty","forceRerender","Blockly.Field.prototype.forceRerender","bumpNeighbours","updateMarkers_","Blockly.Field.prototype.setValue","validatedValue","doClassValidation_","processValidation_","localValidator","doValueUpdate_","Blockly.Field.prototype.processValidation_","doValueInvalid_","Blockly.Field.prototype.getValue","Blockly.Field.prototype.doClassValidation_","Blockly.Field.prototype.doValueUpdate_","Blockly.Field.prototype.doValueInvalid_","_invalidValue","Blockly.Field.prototype.onMouseDown_","Blockly.Field.prototype.setTooltip","newTip","clickTarget","getTooltip","Blockly.Field.prototype.getTooltip","Blockly.Field.prototype.getClickTarget_","Blockly.Field.prototype.getAbsoluteXY_","referencesVariables","Blockly.Field.prototype.referencesVariables","Blockly.Field.prototype.getParentInput","fieldRows","getFlipRtl","Blockly.Field.prototype.getFlipRtl","isTabNavigable","Blockly.Field.prototype.isTabNavigable","Blockly.Field.prototype.onBlocklyAction","_action","setCursorSvg","Blockly.Field.prototype.setCursorSvg","cursorSvg","setMarkerSvg","Blockly.Field.prototype.setMarkerSvg","markerSvg","Blockly.Field.prototype.updateMarkers_","draw","FieldLabel","Blockly.FieldLabel","opt_value","class_","Blockly.FieldLabel.fromJson","Blockly.FieldLabel.prototype.configure_","Blockly.FieldLabel.prototype.initView","Blockly.FieldLabel.prototype.doClassValidation_","setClass","Blockly.FieldLabel.prototype.setClass","cssClass","Input","Blockly.Input","align","Blockly.Input.prototype.getSourceBlock","appendField","Blockly.Input.prototype.appendField","insertFieldAt","Blockly.Input.prototype.insertFieldAt","fieldDropdown","prefixField","suffixField","removeField","Blockly.Input.prototype.removeField","Blockly.Input.prototype.isVisible","Blockly.Input.prototype.setVisible","renderList","startTrackingAll","stopTrackingAll","Blockly.Input.prototype.markDirty","Blockly.Input.prototype.setCheck","setAlign","Blockly.Input.prototype.setAlign","Blockly.Input.prototype.setShadowDom","Blockly.Input.prototype.getShadowDom","Blockly.Input.prototype.init","Blockly.Input.prototype.dispose","Blockly.Block","Generator","contextMenu","parentBlock_","childBlocks_","editable_","movable_","deletable_","collapsed_","isShadow_","outputShape_","xy_","isFlyout","isInMutator","isInsertionMarker_","hat","statementInputCount","initialUndoFlag","onchange","setOnChange","COLLAPSED_FIELD_NAME","hue_","colour_","styleName_","Blockly.Block.prototype.dispose","onchangeWrapper_","connections","Blockly.Block.prototype.initModel","Blockly.Block.prototype.unplug","opt_healStack","unplugFromRow_","unplugFromStack_","Blockly.Block.prototype.unplugFromRow_","getOnlyValueConnection_","Blockly.Block.prototype.getOnlyValueConnection_","Blockly.Block.prototype.unplugFromStack_","previousTarget","nextTarget","Blockly.Block.prototype.getConnections_","_all","myConnections","Blockly.Block.prototype.lastConnectionInStack","Blockly.Block.prototype.bumpNeighbours","Blockly.Block.prototype.getParent","Blockly.Block.prototype.getInputWithBlock","getSurroundParent","Blockly.Block.prototype.getSurroundParent","prevBlock","Blockly.Block.prototype.getNextBlock","Blockly.Block.prototype.getPreviousBlock","getFirstStatementConnection","Blockly.Block.prototype.getFirstStatementConnection","Blockly.Block.prototype.getRootBlock","Blockly.Block.prototype.getTopStackBlock","previous","Blockly.Block.prototype.getChildren","Blockly.Block.prototype.setParent","newParent","Blockly.Block.prototype.getDescendants","childBlocks","Blockly.Block.prototype.isDeletable","Blockly.Block.prototype.setDeletable","Blockly.Block.prototype.isMovable","Blockly.Block.prototype.setMovable","isDuplicatable","Blockly.Block.prototype.isDuplicatable","Blockly.Block.prototype.isShadow","Blockly.Block.prototype.setShadow","Blockly.Block.prototype.isInsertionMarker","Blockly.Block.prototype.setInsertionMarker","insertionMarker","Blockly.Block.prototype.isEditable","Blockly.Block.prototype.setEditable","isDisposed","Blockly.Block.prototype.isDisposed","Blockly.Block.prototype.getMatchingConnection","otherBlock","conn","otherConnections","setHelpUrl","Blockly.Block.prototype.setHelpUrl","helpUrl","Blockly.Block.prototype.setTooltip","Blockly.Block.prototype.getTooltip","getColour","Blockly.Block.prototype.getColour","getStyleName","Blockly.Block.prototype.getStyleName","getHue","Blockly.Block.prototype.getHue","Blockly.Block.prototype.setColour","parsed","setStyle","Blockly.Block.prototype.setStyle","Blockly.Block.prototype.setOnChange","onchangeFn","Blockly.Block.prototype.getField","getVars","Blockly.Block.prototype.getVars","vars","Blockly.Block.prototype.getVarModels","model","Blockly.Block.prototype.updateVarName","refreshVariableName","Blockly.Block.prototype.renameVarById","oldId","newId","Blockly.Block.prototype.getFieldValue","setFieldValue","Blockly.Block.prototype.setFieldValue","setPreviousStatement","Blockly.Block.prototype.setPreviousStatement","newBoolean","opt_check","makeConnection_","setNextStatement","Blockly.Block.prototype.setNextStatement","setOutput","Blockly.Block.prototype.setOutput","Blockly.Block.prototype.setInputsInline","Blockly.Block.prototype.getInputsInline","setOutputShape","Blockly.Block.prototype.setOutputShape","outputShape","getOutputShape","Blockly.Block.prototype.getOutputShape","setDisabled","Blockly.Block.prototype.setDisabled","Blockly.Block.prototype.isEnabled","Blockly.Block.prototype.setEnabled","enabled","getInheritedDisabled","Blockly.Block.prototype.getInheritedDisabled","ancestor","Blockly.Block.prototype.isCollapsed","Blockly.Block.prototype.setCollapsed","Blockly.Block.prototype.toString","opt_maxLength","opt_emptyToken","shouldAddParentheses","checks","checkRoot","rootNode","emptyFieldPlaceholder","prevNavigateFields","l","appendValueInput","Blockly.Block.prototype.appendValueInput","appendInput_","appendStatementInput","Blockly.Block.prototype.appendStatementInput","appendDummyInput","Blockly.Block.prototype.appendDummyInput","jsonInit","Blockly.Block.prototype.jsonInit","warningPrefix","jsonInitStyle_","jsonInitColour_","interpolate_","localizedText","localizedValue","extensionNames","Blockly.Block.prototype.jsonInitColour_","Blockly.Block.prototype.jsonInitStyle_","styleError","Blockly.Block.prototype.mixin","opt_disableCheck","overwrites","JSON","stringify","Blockly.Block.prototype.interpolate_","lastDummyAlign","indexDup","indexCount","elements","token","dummyInput","alignmentLookup","fieldStack","altRepeat","alignment","Blockly.Block.prototype.appendInput_","moveInputBefore","Blockly.Block.prototype.moveInputBefore","refName","inputIndex","refIndex","moveNumberedInputBefore","Blockly.Block.prototype.moveNumberedInputBefore","removeInput","Blockly.Block.prototype.removeInput","Blockly.Block.prototype.getInput","getInputTargetBlock","Blockly.Block.prototype.getInputTargetBlock","Blockly.Block.prototype.getCommentText","Blockly.Block.prototype.setCommentText","setWarningText","Blockly.Block.prototype.setWarningText","_text","_opt_id","Blockly.Block.prototype.setMutator","_mutator","Blockly.Block.prototype.getRelativeToSurfaceXY","Blockly.Block.prototype.moveBy","Blockly.Block.prototype.makeConnection_","Blockly.Block.prototype.allInputsFilled","Blockly.Block.prototype.toDevString","blockRendering","IPathObject","Blockly.blockRendering.IPathObject","_root","_constants","aria","ARIA_PREFIX_","ROLE_ATTRIBUTE_","Role","GRID","GRIDCELL","GROUP","LISTBOX","MENU","MENUITEM","MENUITEMCHECKBOX","OPTION","PRESENTATION","ROW","TREE","TREEITEM","State","ACTIVEDESCENDANT","COLCOUNT","DISABLED","EXPANDED","INVALID","LABEL","LABELLEDBY","LEVEL","ORIENTATION","POSINSET","ROWCOUNT","SELECTED","SETSIZE","VALUEMAX","VALUEMIN","setRole","Blockly.utils.aria.setRole","roleName","Blockly.utils.aria.setState","stateName","Menu","Blockly.Menu","menuItems_","roleName_","onKeyDownHandler_","mouseLeaveHandler_","mouseEnterHandler_","clickHandler_","mouseOverHandler_","highlightedItem_","openingCoords","Blockly.Menu.prototype.addChild","menuItem","Blockly.Menu.prototype.render","tabIndex","handleMouseOver_","handleClick_","handleMouseEnter_","handleMouseLeave_","handleKeyEvent_","Blockly.Menu.prototype.getElement","focus","Blockly.Menu.prototype.focus","preventScroll","blur_","Blockly.Menu.prototype.blur_","blur","Blockly.Menu.prototype.setRole","Blockly.Menu.prototype.dispose","getMenuItem_","Blockly.Menu.prototype.getMenuItem_","menuElem","parentElement","setHighlighted","Blockly.Menu.prototype.setHighlighted","currentHighlighted","highlightNext","Blockly.Menu.prototype.highlightNext","highlightHelper_","highlightPrevious","Blockly.Menu.prototype.highlightPrevious","highlightFirst_","Blockly.Menu.prototype.highlightFirst_","highlightLast_","Blockly.Menu.prototype.highlightLast_","Blockly.Menu.prototype.highlightHelper_","startIndex","Blockly.Menu.prototype.handleMouseOver_","Blockly.Menu.prototype.handleClick_","oldCoords","newCoords","performAction","Blockly.Menu.prototype.handleMouseEnter_","Blockly.Menu.prototype.handleMouseLeave_","Blockly.Menu.prototype.handleKeyEvent_","highlighted","Blockly.Menu.prototype.getSize","menuDom","menuSize","scrollHeight","MenuItem","Blockly.MenuItem","enabled_","highlight_","checked_","checkable_","actionHandler_","Blockly.MenuItem.prototype.createDom","checkbox","contentDom","Blockly.MenuItem.prototype.dispose","Blockly.MenuItem.prototype.getElement","Blockly.MenuItem.prototype.getId","Blockly.MenuItem.prototype.getValue","setRightToLeft","Blockly.MenuItem.prototype.setRightToLeft","Blockly.MenuItem.prototype.setRole","setCheckable","Blockly.MenuItem.prototype.setCheckable","checkable","setChecked","Blockly.MenuItem.prototype.setChecked","checked","Blockly.MenuItem.prototype.setHighlighted","nameDep","Blockly.MenuItem.prototype.isEnabled","Blockly.MenuItem.prototype.setEnabled","Blockly.MenuItem.prototype.performAction","onAction","Blockly.MenuItem.prototype.onAction","ContextMenu","currentBlock","menu_","Blockly.ContextMenu.show","menu","populate_","position_","Blockly.ContextMenu.populate_","option","actionHandler","_menuItem","scope","Blockly.ContextMenu.position_","viewportBBox","anchorBBox","createWidget_","positionWithAnchor","Blockly.ContextMenu.createWidget_","Blockly.ContextMenu.hide","Blockly.ContextMenu.dispose","callbackFactory","Blockly.ContextMenu.callbackFactory","commentDeleteOption","Blockly.ContextMenu.commentDeleteOption","deleteOption","commentDuplicateOption","Blockly.ContextMenu.commentDuplicateOption","duplicateOption","duplicate","workspaceCommentOption","Blockly.ContextMenu.workspaceCommentOption","wsCommentOption","wsCommentOption.callback","DEFAULT_SIZE","finalOffset","ContextMenuItems","registerUndo","Blockly.ContextMenuItems.registerUndo","ContextMenuRegistry","undoOption","displayText","preconditionFn","scopeType","ScopeType","weight","registerRedo","Blockly.ContextMenuItems.registerRedo","redoOption","registerCleanup","Blockly.ContextMenuItems.registerCleanup","cleanOption","cleanUp","toggleOption_","Blockly.ContextMenuItems.toggleOption_","shouldCollapse","ms","DELAY","registerCollapse","Blockly.ContextMenuItems.registerCollapse","collapseOption","registerExpand","Blockly.ContextMenuItems.registerExpand","expandOption","addDeletableBlocks_","Blockly.ContextMenuItems.addDeletableBlocks_","deleteList","getDeletableBlocks_","Blockly.ContextMenuItems.getDeletableBlocks_","deleteNext_","Blockly.ContextMenuItems.deleteNext_","registerDeleteAll","Blockly.ContextMenuItems.registerDeleteAll","deletableBlocksLength","cancelCurrentGesture","deletableBlocks","registerWorkspaceOptions_","Blockly.ContextMenuItems.registerWorkspaceOptions_","registerDuplicate","Blockly.ContextMenuItems.registerDuplicate","registerComment","Blockly.ContextMenuItems.registerComment","commentOption","registerInline","Blockly.ContextMenuItems.registerInline","inlineOption","registerCollapseExpandBlock","Blockly.ContextMenuItems.registerCollapseExpandBlock","collapseExpandOption","registerDisable","Blockly.ContextMenuItems.registerDisable","disableOption","registerDelete","Blockly.ContextMenuItems.registerDelete","descendantCount","registerHelp","Blockly.ContextMenuItems.registerHelp","helpOption","showHelp","registerBlockOptions_","Blockly.ContextMenuItems.registerBlockOptions_","registerDefaultOptions","Blockly.ContextMenuItems.registerDefaultOptions","Blockly.ContextMenuRegistry","registry_","Blockly.ContextMenuRegistry.prototype.register","Blockly.ContextMenuRegistry.prototype.unregister","getItem","Blockly.ContextMenuRegistry.prototype.getItem","getContextMenuOptions","Blockly.ContextMenuRegistry.prototype.getContextMenuOptions","menuOptions","precondition","menuOption","RenderedConnection","Blockly.RenderedConnection","db_","dbOpposite_","offsetInBlock_","trackedState_","TrackedState","WILL_TRACK","UNTRACKED","TRACKED","Blockly.RenderedConnection.prototype.dispose","removeConnection","Blockly.RenderedConnection.prototype.getSourceBlock","Blockly.RenderedConnection.prototype.targetBlock","Blockly.RenderedConnection.prototype.distanceFrom","Blockly.RenderedConnection.prototype.bumpAwayFrom","staticConnection","addSelect","removeSelect","Blockly.RenderedConnection.prototype.moveTo","addConnection","Blockly.RenderedConnection.prototype.moveBy","moveToOffset","Blockly.RenderedConnection.prototype.moveToOffset","blockTL","setOffsetInBlock","Blockly.RenderedConnection.prototype.setOffsetInBlock","getOffsetInBlock","Blockly.RenderedConnection.prototype.getOffsetInBlock","tighten","Blockly.RenderedConnection.prototype.tighten","svgRoot","Blockly.RenderedConnection.prototype.closest","maxLimit","searchForClosest","Blockly.RenderedConnection.prototype.highlight","renderConstants","shapeFor","yLen","TAB_OFFSET_FROM_TOP","svgPaths","lineOnAxis","pathDown","xLen","NOTCH_OFFSET_LEFT","CORNER_RADIUS","pathLeft","highlightedPath_","Blockly.RenderedConnection.prototype.unhighlight","setTracking","Blockly.RenderedConnection.prototype.setTracking","doTracking","Blockly.RenderedConnection.prototype.stopTrackingAll","Blockly.RenderedConnection.prototype.startTrackingAll","Blockly.RenderedConnection.prototype.isConnectionAllowed","maxRadius","Blockly.RenderedConnection.prototype.onFailedConnect","Blockly.RenderedConnection.prototype.disconnectInternal_","Blockly.RenderedConnection.prototype.respawnShadow_","Blockly.RenderedConnection.prototype.neighbours","getNeighbours","Blockly.RenderedConnection.prototype.connect_","parentRendered","childRendered","Blockly.RenderedConnection.prototype.onCheckChanged_","Marker","Blockly.Marker","drawer_","curNode_","setDrawer","Blockly.Marker.prototype.setDrawer","drawer","getDrawer","Blockly.Marker.prototype.getDrawer","Blockly.Marker.prototype.getCurNode","Blockly.Marker.prototype.setCurNode","oldNode","Blockly.Marker.prototype.draw","Blockly.Marker.prototype.hide","Blockly.Marker.prototype.dispose","Cursor","Blockly.Cursor","Blockly.Cursor.prototype.next","Blockly.Cursor.prototype.in","Blockly.Cursor.prototype.prev","Blockly.Cursor.prototype.out","Blockly.Cursor.prototype.onBlocklyAction","BasicCursor","Blockly.BasicCursor","Blockly.BasicCursor.prototype.next","getNextNode_","validNode_","Blockly.BasicCursor.prototype.in","Blockly.BasicCursor.prototype.prev","getPreviousNode_","Blockly.BasicCursor.prototype.out","Blockly.BasicCursor.prototype.getNextNode_","isValid","siblingOrParent","findSiblingOrParent_","Blockly.BasicCursor.prototype.getPreviousNode_","getRightMostChild_","Blockly.BasicCursor.prototype.validNode_","Blockly.BasicCursor.prototype.findSiblingOrParent_","nextNode","Blockly.BasicCursor.prototype.getRightMostChild_","TabNavigateCursor","Blockly.TabNavigateCursor","Blockly.TabNavigateCursor.prototype.validNode_","BlockSvg","Blockly.BlockSvg","getBlockStyle","pathObject","makePathObject","renderIsInProgress_","useDragSurface_","svgPath","warningTextDb_","INLINE","COLLAPSED_WARNING_ID","Blockly.BlockSvg.prototype.initSvg","createIcon","updateMovable","eventsInit_","getCanvas","getColourSecondary","Blockly.BlockSvg.prototype.getColourSecondary","colourSecondary","getColourTertiary","Blockly.BlockSvg.prototype.getColourTertiary","colourTertiary","getColourShadow","Blockly.BlockSvg.prototype.getColourShadow","getColourBorder","Blockly.BlockSvg.prototype.getColourBorder","colourBorder","colourLight","colourDark","Blockly.BlockSvg.prototype.select","Blockly.BlockSvg.prototype.unselect","commentIcon_","Blockly.BlockSvg.prototype.getIcons","Blockly.BlockSvg.prototype.setParent","oldParent","oldXY","Blockly.BlockSvg.prototype.getRelativeToSurfaceXY","dragSurfaceGroup","surfaceTranslation","Blockly.BlockSvg.prototype.moveBy","eventsEnabled","Blockly.BlockSvg.prototype.translate","Blockly.BlockSvg.prototype.moveToDragSurface","clearTransformAttributes_","Blockly.BlockSvg.prototype.moveTo","curXY","Blockly.BlockSvg.prototype.moveOffDragSurface","Blockly.BlockSvg.prototype.moveDuringDrag","Blockly.BlockSvg.prototype.clearTransformAttributes_","snapToGrid","Blockly.BlockSvg.prototype.snapToGrid","getGrid","getBoundingRectangle","Blockly.BlockSvg.prototype.getBoundingRectangle","blockBounds","Blockly.BlockSvg.prototype.markDirty","Blockly.BlockSvg.prototype.setCollapsed","updateCollapsed_","Blockly.BlockSvg.prototype.updateCollapsed_","collapsedInputName","collapsedFieldName","tab","Blockly.BlockSvg.prototype.tab","tabCursor","currentNode","Blockly.BlockSvg.prototype.onMouseDown_","Blockly.BlockSvg.prototype.showHelp","open","generateContextMenu","Blockly.BlockSvg.prototype.generateContextMenu","customContextMenu","Blockly.BlockSvg.prototype.showContextMenu","Blockly.BlockSvg.prototype.moveConnections","computeIconLocation","Blockly.BlockSvg.prototype.setDragging","Blockly.BlockSvg.prototype.setMovable","Blockly.BlockSvg.prototype.setEditable","Blockly.BlockSvg.prototype.setShadow","Blockly.BlockSvg.prototype.setInsertionMarker","INSERTION_MARKER_COLOUR","updateInsertionMarker","Blockly.BlockSvg.prototype.getSvgRoot","Blockly.BlockSvg.prototype.dispose","animate","blockWorkspace","toCopyData","Blockly.BlockSvg.prototype.toCopyData","typeCounts","Blockly.BlockSvg.prototype.applyColour","Blockly.BlockSvg.prototype.updateDisabled","Blockly.BlockSvg.prototype.getCommentIcon","Blockly.BlockSvg.prototype.setCommentText","shouldHaveComment","updateText","Blockly.BlockSvg.prototype.setWarningText","Warning","thisBlock","changedState","collapsedParent","oldText","newText","Blockly.BlockSvg.prototype.setMutator","setBlock","Blockly.BlockSvg.prototype.setDisabled","Blockly.BlockSvg.prototype.setEnabled","Blockly.BlockSvg.prototype.setHighlighted","updateHighlighted","Blockly.BlockSvg.prototype.addSelect","updateSelected","Blockly.BlockSvg.prototype.removeSelect","Blockly.BlockSvg.prototype.setDeleteStyle","updateDraggingDelete","Blockly.BlockSvg.prototype.getColour","colourPrimary","Blockly.BlockSvg.prototype.setColour","styleObj","getBlockStyleForColour","Blockly.BlockSvg.prototype.setStyle","Blockly.BlockSvg.prototype.bringToFront","Blockly.BlockSvg.prototype.setPreviousStatement","Blockly.BlockSvg.prototype.setNextStatement","Blockly.BlockSvg.prototype.setOutput","Blockly.BlockSvg.prototype.setInputsInline","Blockly.BlockSvg.prototype.removeInput","removed","Blockly.BlockSvg.prototype.moveNumberedInputBefore","Blockly.BlockSvg.prototype.appendInput_","Blockly.BlockSvg.prototype.setConnectionTracking","track","Blockly.BlockSvg.prototype.getConnections_","all","Blockly.BlockSvg.prototype.lastConnectionInStack","Blockly.BlockSvg.prototype.getMatchingConnection","Blockly.BlockSvg.prototype.makeConnection_","Blockly.BlockSvg.prototype.bumpNeighbours","Blockly.BlockSvg.prototype.scheduleSnapAndBump","Blockly.BlockSvg.prototype.positionNearConnection","sourceConnection","Blockly.BlockSvg.prototype.getParent","Blockly.BlockSvg.prototype.getRootBlock","Blockly.BlockSvg.prototype.render","opt_bubble","updateConnectionLocations_","Blockly.BlockSvg.prototype.updateMarkers_","Blockly.BlockSvg.prototype.updateConnectionLocations_","Blockly.BlockSvg.prototype.setCursorSvg","Blockly.BlockSvg.prototype.setMarkerSvg","Blockly.BlockSvg.prototype.getHeightWidth","nextHeightWidth","tabHeight","NOTCH_HEIGHT","Blockly.BlockSvg.prototype.fadeForReplacement","updateReplacementFade","Blockly.BlockSvg.prototype.highlightShapeForInput","updateShapeForInputHighlight","useDebugger","Blockly.blockRendering.register","rendererClass","Blockly.blockRendering.unregister","startDebugger","Blockly.blockRendering.startDebugger","stopDebugger","Blockly.blockRendering.stopDebugger","Blockly.blockRendering.init","opt_rendererOverrides","ConnectionDB","Blockly.ConnectionDB","connections_","connectionChecker_","Blockly.ConnectionDB.prototype.addConnection","yPos","calculateIndexForYPos_","findIndexOfConnection_","Blockly.ConnectionDB.prototype.findIndexOfConnection_","bestGuess","pointerMin","pointerMax","Blockly.ConnectionDB.prototype.calculateIndexForYPos_","pointerMid","Blockly.ConnectionDB.prototype.removeConnection","Blockly.ConnectionDB.prototype.getNeighbours","checkConnection_","yIndex","currentX","db","currentY","isInYRange_","Blockly.ConnectionDB.prototype.isInYRange_","baseY","Blockly.ConnectionDB.prototype.searchForClosest","baseX","closestIndex","bestConnection","bestRadius","Blockly.ConnectionDB.init","dbList","MarkerManager","Blockly.MarkerManager","cursor_","markers_","registerMarker","Blockly.MarkerManager.prototype.registerMarker","unregisterMarker","makeMarkerDrawer","Blockly.MarkerManager.prototype.unregisterMarker","Blockly.MarkerManager.prototype.getCursor","Blockly.MarkerManager.prototype.getMarker","setCursor","Blockly.MarkerManager.prototype.setCursor","Blockly.MarkerManager.prototype.setCursorSvg","getBlockCanvas","Blockly.MarkerManager.prototype.setMarkerSvg","updateMarkers","Blockly.MarkerManager.prototype.updateMarkers","Blockly.MarkerManager.prototype.dispose","markerId","markerIds","ThemeManager","Blockly.ThemeManager","theme_","subscribedWorkspaces_","componentDB_","Blockly.ThemeManager.prototype.getTheme","setTheme","Blockly.ThemeManager.prototype.setTheme","prevTheme","injectionDiv","refreshTheme","component","subscribeWorkspace","Blockly.ThemeManager.prototype.subscribeWorkspace","unsubscribeWorkspace","Blockly.ThemeManager.prototype.unsubscribeWorkspace","Blockly.ThemeManager.prototype.subscribe","Blockly.ThemeManager.prototype.unsubscribe","componentNames","Blockly.ThemeManager.prototype.dispose","TouchGesture","Blockly.TouchGesture","isMultiTouch_","cachedPoints_","startDistance_","previousScale_","isPinchZoomEnabled_","onStartWrapper_","ZOOM_IN_MULTIPLIER","ZOOM_OUT_MULTIPLIER","Blockly.TouchGesture.prototype.doStart","handleTouchStart","Blockly.TouchGesture.prototype.bindMouseEvents","Blockly.TouchGesture.prototype.handleStart","isMultiTouch","Blockly.TouchGesture.prototype.handleMove","handleTouchMove","Blockly.TouchGesture.prototype.handleUp","handleTouchEnd","Blockly.TouchGesture.prototype.isMultiTouch","Blockly.TouchGesture.prototype.dispose","Blockly.TouchGesture.prototype.handleTouchStart","getTouchPoint","pointers","Blockly.TouchGesture.prototype.handleTouchMove","handlePinch_","Blockly.TouchGesture.prototype.handlePinch_","gestureScale","Blockly.TouchGesture.prototype.handleTouchEnd","Blockly.TouchGesture.prototype.getTouchPoint","WorkspaceAudio","Blockly.WorkspaceAudio","parentWorkspace_","SOUNDS_","lastSound_","Blockly.WorkspaceAudio.prototype.dispose","load","Blockly.WorkspaceAudio.prototype.load","filenames","audioTest","sound","filename","ext","canPlayType","preload","Blockly.WorkspaceAudio.prototype.preload","volume","playPromise","then","pause","catch","Blockly.WorkspaceAudio.prototype.play","opt_volume","now","mySound","WorkspaceSvg","Blockly.WorkspaceSvg","opt_blockDragSurface","opt_wsDragSurface","getTopLevelWorkspaceMetrics_","setTopLevelWorkspaceMetrics_","blockDragSurface_","workspaceDragSurface_","useWorkspaceDragSurface_","highlightedBlocks_","audioManager_","grid_","markerManager_","toolboxCategoryCallbacks_","flyoutButtonCallbacks_","flyoutCategory","registerToolboxCategoryCallback","VariablesDynamic","Procedures","mutatorOpenListener","themeManager_","renderer_","cachedParentSvg_","topBoundedElements_","resizeHandlerWrapper_","resizesEnabled_","startScrollX","startScrollY","dragDeltaXY_","toolbox_","isDragSurfaceActive_","injectionDiv_","lastRecordedPageScroll_","inverseScreenCTM_","inverseScreenCTMDirty_","getMarkerManager","Blockly.WorkspaceSvg.prototype.getMarkerManager","Blockly.WorkspaceSvg.prototype.setCursorSvg","Blockly.WorkspaceSvg.prototype.setMarkerSvg","Blockly.WorkspaceSvg.prototype.getMarker","Blockly.WorkspaceSvg.prototype.getCursor","Blockly.WorkspaceSvg.prototype.getRenderer","Blockly.WorkspaceSvg.prototype.getThemeManager","Blockly.WorkspaceSvg.prototype.getTheme","Blockly.WorkspaceSvg.prototype.setTheme","Blockly.WorkspaceSvg.prototype.refreshTheme","refreshDom","updateBlockStyles_","refreshToolboxSelection","Blockly.WorkspaceSvg.prototype.updateBlockStyles_","updateBlockStyle","Blockly.WorkspaceSvg.prototype.getInverseScreenCTM","ctm","updateInverseScreenCTM","Blockly.WorkspaceSvg.prototype.updateInverseScreenCTM","Blockly.WorkspaceSvg.prototype.isVisible","Blockly.WorkspaceSvg.prototype.getSvgXY","Blockly.WorkspaceSvg.prototype.getOriginOffsetInPixels","Blockly.WorkspaceSvg.prototype.getInjectionDiv","Blockly.WorkspaceSvg.prototype.getBlockCanvas","svgBlockCanvas_","setResizeHandlerWrapper","Blockly.WorkspaceSvg.prototype.setResizeHandlerWrapper","Blockly.WorkspaceSvg.prototype.createDom","opt_backgroundClass","fill","svgBubbleCanvas_","onMouseWheel_","Toolbox","recordDeleteAreas","Blockly.WorkspaceSvg.prototype.dispose","zoomControls_","parentSvg","Blockly.WorkspaceSvg.prototype.newBlock","addTrashcan","Blockly.WorkspaceSvg.prototype.addTrashcan","Trashcan","svgTrashcan","addZoomControls","Blockly.WorkspaceSvg.prototype.addZoomControls","ZoomControls","svgZoomControls","addFlyout","Blockly.WorkspaceSvg.prototype.addFlyout","workspaceOptions","HorizontalFlyout","VerticalFlyout","Blockly.WorkspaceSvg.prototype.getFlyout","opt_own","Blockly.WorkspaceSvg.prototype.getToolbox","updateScreenCalculations_","Blockly.WorkspaceSvg.prototype.updateScreenCalculations_","Blockly.WorkspaceSvg.prototype.resizeContents","Blockly.WorkspaceSvg.prototype.resize","Blockly.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled","currScroll","Blockly.WorkspaceSvg.prototype.getCanvas","Blockly.WorkspaceSvg.prototype.getBubbleCanvas","Blockly.WorkspaceSvg.prototype.getParentSvg","Blockly.WorkspaceSvg.prototype.maybeFireViewportChangeEvent","Blockly.WorkspaceSvg.prototype.translate","translation","Blockly.WorkspaceSvg.prototype.resetDragSurface","trans","Blockly.WorkspaceSvg.prototype.setupDragSurface","previousElement","coord","Blockly.WorkspaceSvg.prototype.getBlockDragSurface","Blockly.WorkspaceSvg.prototype.getWidth","Blockly.WorkspaceSvg.prototype.setVisible","Blockly.WorkspaceSvg.prototype.render","imList","highlightBlock","Blockly.WorkspaceSvg.prototype.highlightBlock","opt_state","paste","Blockly.WorkspaceSvg.prototype.paste","pasteWorkspaceComment_","pasteBlock_","Blockly.WorkspaceSvg.prototype.pasteBlock_","markedNode","markedLocation","collide","allBlocks","otherXY","Blockly.WorkspaceSvg.prototype.pasteWorkspaceComment_","xmlComment","commentX","commentY","Blockly.WorkspaceSvg.prototype.refreshToolboxSelection","refreshSelection","Blockly.WorkspaceSvg.prototype.renameVariableById","Blockly.WorkspaceSvg.prototype.deleteVariableById","Blockly.WorkspaceSvg.prototype.createVariable","newVar","Blockly.WorkspaceSvg.prototype.recordDeleteAreas","deleteAreaTrash_","getClientRect","deleteAreaToolbox_","Blockly.WorkspaceSvg.prototype.isDeleteArea","Blockly.WorkspaceSvg.prototype.onMouseDown_","Blockly.WorkspaceSvg.prototype.startDrag","point","Blockly.WorkspaceSvg.prototype.moveDrag","Blockly.WorkspaceSvg.prototype.isDragging","Blockly.WorkspaceSvg.prototype.isDraggable","isContentBounded","Blockly.WorkspaceSvg.prototype.isContentBounded","Blockly.WorkspaceSvg.prototype.isMovable","Blockly.WorkspaceSvg.prototype.onMouseWheel_","canWheelZoom","canWheelMove","scrollDelta","PIXELS_PER_ZOOM_STEP","Blockly.WorkspaceSvg.prototype.getBlocksBoundingBox","topElements","getTopBoundedElements","boundary","blockBoundary","Blockly.WorkspaceSvg.prototype.cleanUp","cursorY","Blockly.WorkspaceSvg.prototype.showContextMenu","configureContextMenu","updateToolbox","Blockly.WorkspaceSvg.prototype.updateToolbox","parsedToolboxDef","Blockly.WorkspaceSvg.prototype.markFocused","setBrowserFocus","Blockly.WorkspaceSvg.prototype.setBrowserFocus","activeElement","setActive","Blockly.WorkspaceSvg.prototype.zoom","amount","scaleChange","newScale","getCTM","center","setScale","zoomCenter","Blockly.WorkspaceSvg.prototype.zoomCenter","svgWidth","svgHeight","zoomToFit","Blockly.WorkspaceSvg.prototype.zoomToFit","workspaceWidth","workspaceHeight","blocksBox","blocksWidth","blocksHeight","getHeight","ratioX","ratioY","scrollCenter","beginCanvasTransition","Blockly.WorkspaceSvg.prototype.beginCanvasTransition","endCanvasTransition","Blockly.WorkspaceSvg.prototype.endCanvasTransition","Blockly.WorkspaceSvg.prototype.scrollCenter","centerOnBlock","Blockly.WorkspaceSvg.prototype.centerOnBlock","heightWidth","pixelX","multiplier","pixelY","Blockly.WorkspaceSvg.prototype.setScale","reflow","getScale","Blockly.WorkspaceSvg.prototype.getScale","Blockly.WorkspaceSvg.prototype.scroll","maxOffsetOfViewFromOriginX","maxOffsetOfViewFromOriginY","getDimensionsPx_","Blockly.WorkspaceSvg.getDimensionsPx_","getContentDimensions_","Blockly.WorkspaceSvg.getContentDimensions_","svgSize","getContentDimensionsBounded_","getContentDimensionsExact_","Blockly.WorkspaceSvg.getContentDimensionsExact_","blockBox","Blockly.WorkspaceSvg.getContentDimensionsBounded_","halfWidth","dimensions","Blockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_","toolboxDimensions","flyoutDimensions","contentDimensions","toolboxWidth","toolboxHeight","flyoutWidth","flyoutHeight","Blockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_","Blockly.WorkspaceSvg.prototype.getBlockById","Blockly.WorkspaceSvg.prototype.getTopBlocks","Blockly.WorkspaceSvg.prototype.addTopBlock","addTopBoundedElement","Blockly.WorkspaceSvg.prototype.removeTopBlock","removeTopBoundedElement","Blockly.WorkspaceSvg.prototype.addTopComment","Blockly.WorkspaceSvg.prototype.removeTopComment","Blockly.WorkspaceSvg.prototype.addTopBoundedElement","Blockly.WorkspaceSvg.prototype.removeTopBoundedElement","Blockly.WorkspaceSvg.prototype.getTopBoundedElements","Blockly.WorkspaceSvg.prototype.setResizesEnabled","reenabled","Blockly.WorkspaceSvg.prototype.clear","registerButtonCallback","Blockly.WorkspaceSvg.prototype.registerButtonCallback","getButtonCallback","Blockly.WorkspaceSvg.prototype.getButtonCallback","removeButtonCallback","Blockly.WorkspaceSvg.prototype.removeButtonCallback","Blockly.WorkspaceSvg.prototype.registerToolboxCategoryCallback","getToolboxCategoryCallback","Blockly.WorkspaceSvg.prototype.getToolboxCategoryCallback","removeToolboxCategoryCallback","Blockly.WorkspaceSvg.prototype.removeToolboxCategoryCallback","Blockly.WorkspaceSvg.prototype.getGesture","isStart","Blockly.WorkspaceSvg.prototype.clearGesture","Blockly.WorkspaceSvg.prototype.cancelCurrentGesture","Blockly.WorkspaceSvg.prototype.getAudioManager","Blockly.WorkspaceSvg.prototype.getGrid","Blockly.inject","checkBlockColourConstants","getElementById","subContainer","blockDragSurface","workspaceDragSurface","createMainWorkspace_","init_","svgResize","Blockly.createDom_","Blockly.createMainWorkspace_","wsOptions","bumpObjects","workspaceMetrics","defaultMetrics","viewRight","viewBottom","blocksBoundingBox","contentRight","contentBottom","oldGroup","objectMetrics","topClamp","bottomClamp","leftClamp","rightClamp","Blockly.init_","workspaceResizeHandler","bindDocumentEvents_","scrollToStart","verticalSpacing","loadSounds_","Blockly.inject.bindDocumentEvents_","documentEventsBound_","onKeyDown","Blockly.inject.loadSounds_","audioMgr","soundBinds","unbindSounds","Blockly.Names","reservedWords","opt_variablePrefix","variablePrefix_","reservedDict_","splitWords","DEVELOPER_VARIABLE_TYPE","Blockly.Names.prototype.reset","dbReverse_","Blockly.Names.prototype.setVariableMap","getNameForUserVariable_","Blockly.Names.prototype.getNameForUserVariable_","getName","Blockly.Names.prototype.getName","normalized","safeName","getDistinctName","Blockly.Names.prototype.getDistinctName","safeName_","Blockly.Names.prototype.safeName_","encodeURI","Blockly.Names.equals","name1","name2","NAME_TYPE","DEFAULT_ARG","allProcedures","Blockly.Procedures.allProcedures","proceduresNoReturn","getProcedureDef","proceduresReturn","procTupleComparator_","Blockly.Procedures.procTupleComparator_","ta","tb","findLegalName","Blockly.Procedures.findLegalName","isLegalName_","Blockly.Procedures.isLegalName_","opt_exclude","isNameUsed","Blockly.Procedures.isNameUsed","procName","rename","Blockly.Procedures.rename","legalName","renameProcedure","Blockly.Procedures.flyoutCategory","populateProcedures","procedureList","templateName","arg","xmlList","nameField","tuple","updateMutatorFlyout_","Blockly.Procedures.updateMutatorFlyout_","usedNames","argBlock","argValue","generateUniqueNameFromOptions","fieldContent","Blockly.Procedures.mutatorOpenListener","mutatorChangeListener_","Blockly.Procedures.mutatorChangeListener_","getCallers","Blockly.Procedures.getCallers","callers","getProcedureCall","mutateCallers","Blockly.Procedures.mutateCallers","defBlock","caller","oldRecordUndo","xmlElement","newMutationDom","newMutation","getDefinition","Blockly.Procedures.getDefinition","Blockly.VariableModel","Blockly.VariableModel.prototype.getId","compareByName","Blockly.VariableModel.compareByName","var1","var2","Blockly.Variables.allUsedVarModels","variableHash","ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_","allDeveloperVariables","Blockly.Variables.allDeveloperVariables","getDeveloperVariables","getDeveloperVars","devVars","Blockly.Variables.flyoutCategory","createVariableButtonHandler","getTargetWorkspace","blockList","flyoutCategoryBlocks","Blockly.Variables.flyoutCategoryBlocks","variableModelList","mostRecentVariable","generateVariableFieldDom","VAR_LETTER_OPTIONS","generateUniqueName","Blockly.Variables.generateUniqueName","Blockly.Variables.generateUniqueNameFromOptions","startChar","letters","suffix","letterIndex","inUse","potName","Blockly.Variables.createVariableButtonHandler","opt_callback","promptAndCheckWithAlert","defaultName","promptName","existing","nameUsedWithAnyType","Blockly.Variables.renameVariable","promptText","nameUsedWithOtherType_","Blockly.Variables.promptName","defaultText","prompt","Blockly.Variables.nameUsedWithOtherType_","allVariables","Blockly.Variables.nameUsedWithAnyType","Blockly.Variables.generateVariableFieldDom","variableModel","getOrCreateVariablePackage","Blockly.Variables.getOrCreateVariablePackage","createVariable_","Blockly.Variables.getVariable","potentialVariableMap","Blockly.Variables.createVariable_","Blockly.Variables.getAddedVariables","originalVariables","allCurrentVariables","addedVariables","dispose_","Blockly.WidgetDiv.createDom","Blockly.WidgetDiv.show","newOwner","Blockly.WidgetDiv.hide","Blockly.WidgetDiv.isVisible","Blockly.WidgetDiv.hideIfOwner","oldOwner","Blockly.WidgetDiv.positionInternal_","Blockly.WidgetDiv.positionWithAnchor","widgetSize","calculateY_","calculateX_","Blockly.WidgetDiv.calculateX_","Blockly.WidgetDiv.calculateY_","VERSION","clipboardXml_","clipboardSource_","clipboardTypeCounts_","cache3dSupported_","Blockly.svgSize","cachedWidth_","cachedHeight_","resizeSvgContents","Blockly.resizeSvgContents","Blockly.svgResize","Blockly.onKeyDown","deleteBlock","copy_","Blockly.copy_","toCopy","Blockly.duplicate","toDuplicate","clipboardXml","clipboardSource","onContextMenu_","Blockly.onContextMenu_","Blockly.hideChaff","opt_allowToolbox","closeFlyout","clearSelection","Blockly.getMainWorkspace","Blockly.alert","Blockly.confirm","Blockly.prompt","defaultValue","jsonInitFactory_","Blockly.jsonInitFactory_","jsonDef","defineBlocksWithJsonArray","Blockly.defineBlocksWithJsonArray","jsonArray","typename","Blockly.bindEventWithChecks_","thisObject","opt_noCaptureIdentifier","opt_noPreventDefault","handled","wrapFunc","captureIdentifier","bindData","touchWrapFunc","Blockly.bindEvent_","Blockly.unbindEvent_","bindDatum","isNumber","Blockly.isNumber","hueToHex","Blockly.hueToHex","Blockly.checkBlockColourConstants","checkBlockColourConstant_","Blockly.checkBlockColourConstant_","msgName","blocklyNamePath","expectedValue","namePath","setParentContainer","Blockly.setParentContainer","Icon","Blockly.Icon","block_","iconGroup_","collapseHidden","SIZE","bubble_","iconXY_","Blockly.Icon.prototype.createIcon","drawIcon_","iconClick_","Blockly.Icon.prototype.dispose","Blockly.Icon.prototype.updateEditable","Blockly.Icon.prototype.isVisible","Blockly.Icon.prototype.iconClick_","Blockly.Icon.prototype.applyColour","Blockly.Icon.prototype.setIconLocation","Blockly.Icon.prototype.computeIconLocation","iconXY","Blockly.Icon.prototype.getIconLocation","getCorrectedSize","Blockly.Icon.prototype.getCorrectedSize","Blockly.Warning","text_","Blockly.Warning.prototype.drawIcon_","textToDom_","Blockly.Warning.textToDom_","paragraph","tspanElement","Blockly.Warning.prototype.setVisible","createBubble","disposeBubble","Blockly.Warning.prototype.createBubble","paragraphElement_","maxWidth","Blockly.Warning.prototype.disposeBubble","body_","Blockly.Warning.prototype.setText","Blockly.Warning.prototype.getText","allWarnings","Blockly.Warning.prototype.dispose","Blockly.Comment","model_","cachedText_","onInputWrapper_","onChangeWrapper_","onWheelWrapper_","Blockly.Comment.prototype.drawIcon_","createEditor_","Blockly.Comment.prototype.createEditor_","foreignObject_","textarea","textarea_","resizeTextarea_","startEdit_","Blockly.Comment.prototype.updateEditable","disposeBubble_","createBubble_","onBubbleResize_","Blockly.Comment.prototype.onBubbleResize_","Blockly.Comment.prototype.resizeTextarea_","widthMinusBorder","heightMinusBorder","Blockly.Comment.prototype.setVisible","Blockly.Comment.prototype.createBubble_","createNonEditableBubble_","createEditableBubble_","Blockly.Comment.prototype.createEditableBubble_","Blockly.Comment.prototype.createNonEditableBubble_","Blockly.Comment.prototype.disposeBubble_","Blockly.Comment.prototype.startEdit_","Blockly.Comment.prototype.getBubbleSize","Blockly.Comment.prototype.setBubbleSize","Blockly.Comment.prototype.getText","Blockly.Comment.prototype.setText","Blockly.Comment.prototype.updateText","Blockly.Comment.prototype.dispose","FlyoutCursor","Blockly.FlyoutCursor","Blockly.FlyoutCursor.prototype.onBlocklyAction","Blockly.FlyoutCursor.prototype.next","Blockly.FlyoutCursor.prototype.in","Blockly.FlyoutCursor.prototype.prev","Blockly.FlyoutCursor.prototype.out","Flyout","Blockly.Flyout","getMetrics_","setMetrics_","toolboxPosition_","eventWrappers_","mats_","buttons_","permanentlyDisabled_","tabWidth_","TAB_WIDTH","MARGIN","GAP_X","GAP_Y","SCROLLBAR_PADDING","dragAngleRange_","Blockly.Flyout.prototype.createDom","Blockly.Flyout.prototype.init","wheel_","filterWrapper_","filterForCapacity_","Blockly.Flyout.prototype.dispose","Blockly.Flyout.prototype.getWidth","Blockly.Flyout.prototype.getHeight","Blockly.Flyout.prototype.getWorkspace","Blockly.Flyout.prototype.isVisible","Blockly.Flyout.prototype.setVisible","Blockly.Flyout.prototype.setContainerVisible","Blockly.Flyout.prototype.updateDisplay_","positionAt_","Blockly.Flyout.prototype.positionAt_","Blockly.Flyout.prototype.hide","listen","reflowWrapper_","Blockly.Flyout.prototype.show","clearOldBlocks_","getDynamicCategoryContents_","parsedContent","flyoutInfo","createFlyoutInfo_","layout_","contents","gaps","deselectAll","Blockly.Flyout.prototype.createFlyoutInfo_","contentInfo","defaultGap","categoryName","parsedDynamicContent","blockInfo","blockXml","getBlockXml_","createBlock_","gap","addSeparatorGap_","label","createButton_","Blockly.Flyout.prototype.getDynamicCategoryContents_","fnToApply","Blockly.Flyout.prototype.createButton_","btnInfo","isLabel","FlyoutButton","Blockly.Flyout.prototype.createBlock_","Blockly.Flyout.prototype.getBlockXml_","blockElement","Blockly.Flyout.prototype.addSeparatorGap_","sepInfo","newGap","Blockly.Flyout.prototype.clearOldBlocks_","oldBlocks","rect","addBlockListeners_","Blockly.Flyout.prototype.addBlockListeners_","blockMouseDown_","Blockly.Flyout.prototype.blockMouseDown_","Blockly.Flyout.prototype.onMouseDown_","Blockly.Flyout.prototype.isBlockCreatable_","Blockly.Flyout.prototype.createBlock","originalBlock","placeNewBlock_","initFlyoutButton_","Blockly.Flyout.prototype.initFlyoutButton_","buttonSvg","createRect_","Blockly.Flyout.prototype.createRect_","blockHW","flyoutRect_","moveRectToBlock_","Blockly.Flyout.prototype.moveRectToBlock_","Blockly.Flyout.prototype.filterForCapacity_","Blockly.Flyout.prototype.reflow","reflowInternal_","Blockly.Flyout.prototype.isScrollable","Blockly.Flyout.prototype.placeNewBlock_","oldBlock","flyoutOffsetPixels","oldBlockPos","oldBlockOffsetPixels","Blockly.Flyout.prototype.onBlocklyAction","Blockly.HorizontalFlyout","Blockly.HorizontalFlyout.prototype.getMetrics_","optionBox","Blockly.HorizontalFlyout.prototype.setMetrics_","Blockly.HorizontalFlyout.prototype.position","targetWorkspaceMetrics","setBackgroundPath_","Blockly.HorizontalFlyout.prototype.setBackgroundPath_","atTop","path","Blockly.HorizontalFlyout.prototype.scrollToStart","Blockly.HorizontalFlyout.prototype.wheel_","Blockly.HorizontalFlyout.prototype.layout_","margin","cursorX","moveX","Blockly.HorizontalFlyout.prototype.isDragTowardWorkspace","dragDirection","atan2","range","Blockly.HorizontalFlyout.prototype.getClientRect","flyoutRect","BIG_NUM","Blockly.HorizontalFlyout.prototype.reflowInternal_","Blockly.VerticalFlyout","registryName","Blockly.VerticalFlyout.prototype.getMetrics_","Blockly.VerticalFlyout.prototype.setMetrics_","Blockly.VerticalFlyout.prototype.position","Blockly.VerticalFlyout.prototype.setBackgroundPath_","atRight","Blockly.VerticalFlyout.prototype.scrollToStart","Blockly.VerticalFlyout.prototype.wheel_","Blockly.VerticalFlyout.prototype.layout_","Blockly.VerticalFlyout.prototype.isDragTowardWorkspace","Blockly.VerticalFlyout.prototype.getClientRect","Blockly.VerticalFlyout.prototype.reflowInternal_","oldX","getPosition","Blockly.FlyoutButton","targetWorkspace_","isLabel_","callbackKey_","cssClass_","info","MARGIN_X","MARGIN_Y","Blockly.FlyoutButton.prototype.createDom","svgText","svgText_","fontMetrics","updateTransform_","onMouseUp_","Blockly.FlyoutButton.prototype.show","Blockly.FlyoutButton.prototype.updateTransform_","Blockly.FlyoutButton.prototype.moveTo","Blockly.FlyoutButton.prototype.isLabel","Blockly.FlyoutButton.prototype.getPosition","getButtonText","Blockly.FlyoutButton.prototype.getButtonText","Blockly.FlyoutButton.prototype.getTargetWorkspace","Blockly.FlyoutButton.prototype.dispose","Blockly.FlyoutButton.prototype.onMouseUp_","Blockly.Generator","FUNCTION_NAME_PLACEHOLDER_REGEXP_","RegExp","FUNCTION_NAME_PLACEHOLDER_","INFINITE_LOOP_TRAP","STATEMENT_PREFIX","STATEMENT_SUFFIX","INDENT","COMMENT_WRAP","ORDER_OVERRIDES","workspaceToCode","Blockly.Generator.prototype.workspaceToCode","code","blockToCode","scrubNakedValue","suppressPrefixSuffix","injectId","finish","prefixLines","Blockly.Generator.prototype.prefixLines","allNestedComments","Blockly.Generator.prototype.allNestedComments","Blockly.Generator.prototype.blockToCode","opt_thisOnly","scrub_","SyntaxError","valueToCode","Blockly.Generator.prototype.valueToCode","outerOrder","innerOrder","parensNeeded","outerOrderClass","innerOrderClass","statementToCode","Blockly.Generator.prototype.statementToCode","addLoopTrap","Blockly.Generator.prototype.addLoopTrap","branch","Blockly.Generator.prototype.injectId","RESERVED_WORDS_","addReservedWords","Blockly.Generator.prototype.addReservedWords","provideFunction_","Blockly.Generator.prototype.provideFunction_","desiredName","definitions_","oldCodeText","variableDB_","functionNames_","codeText","Blockly.Generator.prototype.init","_workspace","Blockly.Generator.prototype.scrub_","_block","_opt_thisOnly","Blockly.Generator.prototype.finish","Blockly.Generator.prototype.scrubNakedValue","ToolboxItem","Blockly.ToolboxItem","toolboxItemDef","level_","getLevel","toolboxItemDef_","parentToolbox_","Blockly.ToolboxItem.prototype.init","getDiv","Blockly.ToolboxItem.prototype.getDiv","Blockly.ToolboxItem.prototype.getId","Blockly.ToolboxItem.prototype.getParent","Blockly.ToolboxItem.prototype.getLevel","isSelectable","Blockly.ToolboxItem.prototype.isSelectable","isCollapsible","Blockly.ToolboxItem.prototype.isCollapsible","Blockly.ToolboxItem.prototype.dispose","ToolboxCategory","Blockly.ToolboxCategory","categoryDef","getColour_","iconDom_","rowContents_","rowDiv_","htmlDiv_","cssConfig_","makeDefaultCssConfig_","isDisabled_","isHidden_","flyoutItems_","parseContents_","registrationName","nestedPadding","borderWidth","defaultBackgroundColour","Blockly.ToolboxCategory.prototype.makeDefaultCssConfig_","Blockly.ToolboxCategory.prototype.parseContents_","itemDef","Blockly.ToolboxCategory.prototype.init","Blockly.ToolboxCategory.prototype.createDom_","createContainer_","createRowContainer_","pointerEvents","createRowContentsContainer_","createIconDom_","labelDom","createLabelDom_","addColourBorder_","Blockly.ToolboxCategory.prototype.createContainer_","Blockly.ToolboxCategory.prototype.createRowContainer_","rowDiv","paddingRight","paddingLeft","Blockly.ToolboxCategory.prototype.createRowContentsContainer_","contentsContainer","Blockly.ToolboxCategory.prototype.createIconDom_","toolboxIcon","isHorizontal","Blockly.ToolboxCategory.prototype.createLabelDom_","toolboxLabel","Blockly.ToolboxCategory.prototype.refreshTheme","Blockly.ToolboxCategory.prototype.addColourBorder_","border","borderRight","borderLeft","Blockly.ToolboxCategory.prototype.getColour_","styleName","getColourfromStyle_","parseColour_","Blockly.ToolboxCategory.prototype.getColourfromStyle_","Blockly.ToolboxCategory.prototype.parseColour_","colourValue","openIcon_","Blockly.ToolboxCategory.prototype.openIcon_","iconDiv","closeIcon_","Blockly.ToolboxCategory.prototype.closeIcon_","setVisible_","Blockly.ToolboxCategory.prototype.setVisible_","Blockly.ToolboxCategory.prototype.hide","Blockly.ToolboxCategory.prototype.show","Blockly.ToolboxCategory.prototype.isVisible","allAncestorsExpanded_","Blockly.ToolboxCategory.prototype.allAncestorsExpanded_","category","isExpanded","Blockly.ToolboxCategory.prototype.isSelectable","onClick","Blockly.ToolboxCategory.prototype.onClick","setSelected","Blockly.ToolboxCategory.prototype.setSelected","isSelected","defaultColour","Blockly.ToolboxCategory.prototype.setDisabled","isDisabled","Blockly.ToolboxCategory.prototype.getName","Blockly.ToolboxCategory.prototype.getParent","Blockly.ToolboxCategory.prototype.getDiv","getContents","Blockly.ToolboxCategory.prototype.getContents","updateFlyoutContents","Blockly.ToolboxCategory.prototype.updateFlyoutContents","Blockly.ToolboxCategory.prototype.dispose","ToolboxSeparator","Blockly.ToolboxSeparator","separatorDef","Blockly.ToolboxSeparator.prototype.init","Blockly.ToolboxSeparator.prototype.createDom_","Blockly.ToolboxSeparator.prototype.getDiv","Blockly.ToolboxSeparator.prototype.dispose","CollapsibleToolboxCategory","Blockly.CollapsibleToolboxCategory","subcategoriesDiv_","expanded_","toolboxItems_","Blockly.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_","cssConfig","Blockly.CollapsibleToolboxCategory.prototype.parseContents_","prevIsFlyoutItem","createToolboxItem_","Blockly.CollapsibleToolboxCategory.prototype.createToolboxItem_","toolboxItem","Blockly.CollapsibleToolboxCategory.prototype.init","setExpanded","Blockly.CollapsibleToolboxCategory.prototype.createDom_","subCategories","getChildToolboxItems","createSubCategoriesDom_","Blockly.CollapsibleToolboxCategory.prototype.createIconDom_","Blockly.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_","subcategories","newCategory","newCategoryDiv","Blockly.CollapsibleToolboxCategory.prototype.setExpanded","handleToolboxItemResize","Blockly.CollapsibleToolboxCategory.prototype.setVisible_","Blockly.CollapsibleToolboxCategory.prototype.isExpanded","Blockly.CollapsibleToolboxCategory.prototype.isCollapsible","Blockly.CollapsibleToolboxCategory.prototype.onClick","toggleExpanded","Blockly.CollapsibleToolboxCategory.prototype.toggleExpanded","Blockly.CollapsibleToolboxCategory.prototype.getDiv","Blockly.CollapsibleToolboxCategory.prototype.getChildToolboxItems","Blockly.Toolbox","toolboxDef_","contentsDiv_","HtmlDiv","contents_","contentMap_","previouslySelectedItem_","selectedItem_","boundEvents_","Blockly.Toolbox.prototype.init","createFlyout_","themeManager","Blockly.Toolbox.prototype.createDom_","createContentsContainer_","attachEvents_","Blockly.Toolbox.prototype.createContainer_","toolboxContainer","Blockly.Toolbox.prototype.createContentsContainer_","flexDirection","Blockly.Toolbox.prototype.attachEvents_","onClick_","keyDownEvent","onKeyDown_","Blockly.Toolbox.prototype.onClick_","itemId","srcElement","getToolboxItemById","setSelectedItem","Blockly.Toolbox.prototype.onKeyDown_","selectNext_","selectPrevious_","selectParent_","selectChild_","Blockly.Toolbox.prototype.createFlyout_","FlyoutClass","Blockly.Toolbox.prototype.render","renderContents_","Blockly.Toolbox.prototype.renderContents_","fragment","createDocumentFragment","Blockly.Toolbox.prototype.createToolboxItem_","ToolboxItemClass","addToolboxItem_","toolboxItemDom","Blockly.Toolbox.prototype.addToolboxItem_","getToolboxItems","Blockly.Toolbox.prototype.getToolboxItems","Blockly.Toolbox.prototype.addStyle","Blockly.Toolbox.prototype.removeStyle","Blockly.Toolbox.prototype.getClientRect","toolboxRect","Blockly.Toolbox.prototype.getToolboxItemById","Blockly.Toolbox.prototype.getWidth","Blockly.Toolbox.prototype.getHeight","Blockly.Toolbox.prototype.getFlyout","Blockly.Toolbox.prototype.getWorkspace","Blockly.Toolbox.prototype.getSelectedItem","getPreviouslySelectedItem","Blockly.Toolbox.prototype.getPreviouslySelectedItem","Blockly.Toolbox.prototype.isHorizontal","Blockly.Toolbox.prototype.position","toolboxDiv","Blockly.Toolbox.prototype.handleToolboxItemResize","Blockly.Toolbox.prototype.clearSelection","Blockly.Toolbox.prototype.refreshTheme","Blockly.Toolbox.prototype.refreshSelection","Blockly.Toolbox.prototype.setVisible","Blockly.Toolbox.prototype.setSelectedItem","newItem","oldItem","shouldDeselectItem_","deselectItem_","shouldSelectItem_","selectItem_","updateFlyout_","fireSelectEvent_","Blockly.Toolbox.prototype.shouldDeselectItem_","Blockly.Toolbox.prototype.shouldSelectItem_","Blockly.Toolbox.prototype.deselectItem_","Blockly.Toolbox.prototype.selectItem_","Blockly.Toolbox.prototype.selectItemByPosition","Blockly.Toolbox.prototype.updateFlyout_","Blockly.Toolbox.prototype.fireSelectEvent_","oldElement","newElement","Blockly.Toolbox.prototype.onBlocklyAction","Blockly.Toolbox.prototype.selectParent_","Blockly.Toolbox.prototype.selectChild_","collapsibleItem","Blockly.Toolbox.prototype.selectNext_","nextItemIdx","nextItem","Blockly.Toolbox.prototype.selectPrevious_","prevItemIdx","prevItem","Blockly.Toolbox.prototype.dispose","Blockly.Trashcan","flyoutWorkspaceOptions","onDelete_","WIDTH_","BODY_HEIGHT_","LID_HEIGHT_","MARGIN_BOTTOM_","MARGIN_SIDE_","MARGIN_HOTSPOT_","SPRITE_LEFT_","SPRITE_TOP_","HAS_BLOCKS_LID_ANGLE_","ANIMATION_LENGTH_","ANIMATION_FRAMES_","OPACITY_MIN_","OPACITY_MAX_","MAX_LID_ANGLE_","isLidOpen","minOpenness_","svgLid_","lidTask_","lidOpen_","left_","top_","Blockly.Trashcan.prototype.createDom","clip","setAttributeNS","click","mouseOver_","mouseOut_","animateLid_","Blockly.Trashcan.prototype.init","verticalSpacing_","Blockly.Trashcan.prototype.dispose","hasContents_","Blockly.Trashcan.prototype.hasContents_","contentsIsOpen","Blockly.Trashcan.prototype.contentsIsOpen","openFlyout","Blockly.Trashcan.prototype.openFlyout","fireUiEvent_","Blockly.Trashcan.prototype.closeFlyout","emptyContents","Blockly.Trashcan.prototype.emptyContents","setMinOpenness_","Blockly.Trashcan.prototype.position","Blockly.Trashcan.prototype.getClientRect","trashRect","Blockly.Trashcan.prototype.setLidOpen","Blockly.Trashcan.prototype.animateLid_","frames","setLidAngle_","minOpacity","Blockly.Trashcan.prototype.setLidAngle_","lidAngle","openAtRight","Blockly.Trashcan.prototype.setMinOpenness_","newMin","Blockly.Trashcan.prototype.closeLid","Blockly.Trashcan.prototype.click","Blockly.Trashcan.prototype.fireUiEvent_","trashcanOpen","uiEvent","Blockly.Trashcan.prototype.mouseOver_","Blockly.Trashcan.prototype.mouseOut_","Blockly.Trashcan.prototype.onDelete_","cleanedXML","cleanBlockXML_","Blockly.Trashcan.prototype.cleanBlockXML_","onCreateVariableButtonClick_String","Blockly.VariablesDynamic.onCreateVariableButtonClick_String","onCreateVariableButtonClick_Number","Blockly.VariablesDynamic.onCreateVariableButtonClick_Number","onCreateVariableButtonClick_Colour","Blockly.VariablesDynamic.onCreateVariableButtonClick_Colour","Blockly.VariablesDynamic.flyoutCategory","Blockly.VariablesDynamic.flyoutCategoryBlocks","firstVariable","Blockly.ZoomControls","zoomResetGroup_","zoomOutGroup_","zoomInGroup_","onZoomOutWrapper_","onZoomInWrapper_","onZoomResetWrapper_","HEIGHT_","Blockly.ZoomControls.prototype.createDom","createZoomOutSvg_","createZoomInSvg_","createZoomResetSvg_","Blockly.ZoomControls.prototype.init","Blockly.ZoomControls.prototype.dispose","Blockly.ZoomControls.prototype.position","Blockly.ZoomControls.prototype.createZoomOutSvg_","zoomoutSvg","zoom_","Blockly.ZoomControls.prototype.createZoomInSvg_","zoominSvg","Blockly.ZoomControls.prototype.zoom_","oldZoom","fireZoomEvent_","Blockly.ZoomControls.prototype.createZoomResetSvg_","zoomresetSvg","resetZoom_","Blockly.ZoomControls.prototype.resetZoom_","Blockly.ZoomControls.prototype.fireZoomEvent_","Blockly.Mutator","quarkNames","quarkNames_","workspaceWidth_","workspaceHeight_","Blockly.Mutator.prototype.setBlock","Blockly.Mutator.prototype.getWorkspace","Blockly.Mutator.prototype.drawIcon_","Blockly.Mutator.prototype.iconClick_","Blockly.Mutator.prototype.createEditor_","svgDialog_","quarkName","quarkXml","hasFlyout","getFlyoutMetrics_","flyoutSvg","background","Blockly.Mutator.prototype.updateEditable","resizeBubble_","Blockly.Mutator.prototype.resizeBubble_","workspaceSize","flyoutMetrics","onBubbleMove_","Blockly.Mutator.prototype.onBubbleMove_","Blockly.Mutator.prototype.setVisible","tree","rootBlock_","saveConnections","thisMutator","mutatorBlock","sourceListener_","this.sourceListener_","workspaceChanged_","Blockly.Mutator.prototype.workspaceChanged_","savedRendered","Blockly.Mutator.prototype.getFlyoutMetrics_","unsupported","Blockly.Mutator.prototype.dispose","Blockly.Mutator.prototype.updateBlockStyle","workspaceBlocks","flyoutBlocks","reconnect","Blockly.Mutator.reconnect","connectionChild","connectionParent","currentParent","findParentWs","Blockly.Mutator.findParentWs","outerWs","FieldTextInput","Blockly.FieldTextInput","spellcheck_","onKeyInputWrapper_","onKeyDownWrapper_","htmlInput_","fullBlockClickTarget_","Blockly.FieldTextInput.fromJson","BORDERRADIUS","Blockly.FieldTextInput.prototype.configure_","Blockly.FieldTextInput.prototype.initView","FULL_BLOCK_FIELDS","nFields","nConnections","Blockly.FieldTextInput.prototype.doClassValidation_","Blockly.FieldTextInput.prototype.doValueInvalid_","isBeingEdited_","isTextValid_","untypedDefaultValue_","Blockly.FieldTextInput.prototype.doValueUpdate_","Blockly.FieldTextInput.prototype.applyColour","FIELD_BORDER_RECT_COLOUR","Blockly.FieldTextInput.prototype.render_","resizeEditor_","htmlInput","setSpellcheck","Blockly.FieldTextInput.prototype.setSpellcheck","Blockly.FieldTextInput.prototype.showEditor_","_opt_e","opt_quietInput","quietInput","showPromptEditor_","showInlineEditor_","Blockly.FieldTextInput.prototype.showPromptEditor_","fieldText","Blockly.FieldTextInput.prototype.showInlineEditor_","widgetDispose_","widgetCreate_","Blockly.FieldTextInput.prototype.widgetCreate_","borderRadius","strokeColour","FIELD_TEXTINPUT_BOX_SHADOW","boxShadow","getEditorText_","oldValue_","bindInputEvents_","Blockly.FieldTextInput.prototype.widgetDispose_","onFinishEditing_","unbindInputEvents_","Blockly.FieldTextInput.prototype.bindInputEvents_","onHtmlInputKeyDown_","onHtmlInputChange_","Blockly.FieldTextInput.prototype.unbindInputEvents_","Blockly.FieldTextInput.prototype.onHtmlInputKeyDown_","Blockly.FieldTextInput.prototype.onHtmlInputChange_","getValueFromEditorText_","setEditorValue_","Blockly.FieldTextInput.prototype.setEditorValue_","Blockly.FieldTextInput.prototype.resizeEditor_","numberValidator","Blockly.FieldTextInput.numberValidator","nonnegativeIntegerValidator","Blockly.FieldTextInput.nonnegativeIntegerValidator","Blockly.FieldTextInput.prototype.isTabNavigable","Blockly.FieldTextInput.prototype.getText_","Blockly.FieldTextInput.prototype.getEditorText_","Blockly.FieldTextInput.prototype.getValueFromEditorText_","FieldAngle","Blockly.FieldAngle","clockwise_","CLOCKWISE","offset_","OFFSET","wrap_","WRAP","round_","ROUND","moveSurfaceWrapper_","clickSurfaceWrapper_","clickWrapper_","line_","gauge_","Blockly.FieldAngle.fromJson","HALF","RADIUS","Blockly.FieldAngle.prototype.configure_","clockwise","Blockly.FieldAngle.prototype.initView","symbol_","Blockly.FieldAngle.prototype.render_","updateGraph_","Blockly.FieldAngle.prototype.showEditor_","editor","dropdownCreate_","dropdownDispose_","Blockly.FieldAngle.prototype.dropdownCreate_","circle","hide_","Blockly.FieldAngle.prototype.dropdownDispose_","Blockly.FieldAngle.prototype.hide_","Blockly.FieldAngle.prototype.onMouseMove_","ownerSVGElement","displayMouseOrKeyboardValue_","Blockly.FieldAngle.prototype.displayMouseOrKeyboardValue_","wrapValue_","Blockly.FieldAngle.prototype.updateGraph_","clockwiseFlag","angle1","largeFlag","Blockly.FieldAngle.prototype.onHtmlInputKeyDown_","Blockly.FieldAngle.prototype.doClassValidation_","isFinite","Blockly.FieldAngle.prototype.wrapValue_","FieldCheckbox","Blockly.FieldCheckbox","checkChar_","Blockly.FieldCheckbox.fromJson","CHECK_CHAR","Blockly.FieldCheckbox.prototype.configure_","Blockly.FieldCheckbox.prototype.initView","Blockly.FieldCheckbox.prototype.render_","FIELD_CHECKBOX_X_OFFSET","Blockly.FieldCheckbox.prototype.getDisplayText_","setCheckCharacter","Blockly.FieldCheckbox.prototype.setCheckCharacter","character","Blockly.FieldCheckbox.prototype.showEditor_","Blockly.FieldCheckbox.prototype.doClassValidation_","Blockly.FieldCheckbox.prototype.doValueUpdate_","convertValueToBool_","Blockly.FieldCheckbox.prototype.getValue","getValueBoolean","Blockly.FieldCheckbox.prototype.getValueBoolean","Blockly.FieldCheckbox.prototype.getText","Blockly.FieldCheckbox.prototype.convertValueToBool_","FieldColour","Blockly.FieldColour","onMouseLeaveWrapper_","onMouseEnterWrapper_","onClickWrapper_","highlightedIndex_","picker_","Blockly.FieldColour.fromJson","colours_","titles_","columns_","Blockly.FieldColour.prototype.configure_","Blockly.FieldColour.prototype.initView","FIELD_COLOUR_DEFAULT_WIDTH","FIELD_COLOUR_DEFAULT_HEIGHT","FIELD_COLOUR_FULL_BLOCK","Blockly.FieldColour.prototype.applyColour","Blockly.FieldColour.prototype.doClassValidation_","Blockly.FieldColour.prototype.doValueUpdate_","Blockly.FieldColour.prototype.getText","COLOURS","TITLES","COLUMNS","setColours","Blockly.FieldColour.prototype.setColours","colours","opt_titles","setColumns","Blockly.FieldColour.prototype.setColumns","columns","Blockly.FieldColour.prototype.showEditor_","Blockly.FieldColour.prototype.onClick_","cell","Blockly.FieldColour.prototype.onKeyDown_","moveHighlightBy_","getHighlighted_","Blockly.FieldColour.prototype.onBlocklyAction","Blockly.FieldColour.prototype.moveHighlightBy_","setHighlightedCell_","Blockly.FieldColour.prototype.onMouseMove_","onMouseEnter_","Blockly.FieldColour.prototype.onMouseEnter_","onMouseLeave_","Blockly.FieldColour.prototype.onMouseLeave_","Blockly.FieldColour.prototype.getHighlighted_","row","Blockly.FieldColour.prototype.setHighlightedCell_","Blockly.FieldColour.prototype.dropdownCreate_","titles","selectedColour","table","Blockly.FieldColour.prototype.dropdownDispose_","FieldDropdown","Blockly.FieldDropdown","menuGenerator","validateOptions_","menuGenerator_","generatedOptions_","trimOptions_","selectedOption_","svgArrow_","imageElement_","selectedMenuItem_","Blockly.FieldDropdown.fromJson","CHECKMARK_OVERHANG","MAX_MENU_HEIGHT_VH","IMAGE_Y_OFFSET","IMAGE_Y_PADDING","ARROW_CHAR","Blockly.FieldDropdown.prototype.initView","shouldAddBorderRect_","FIELD_DROPDOWN_SVG_ARROW","createSVGArrow_","createTextArrow_","Blockly.FieldDropdown.prototype.shouldAddBorderRect_","FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW","Blockly.FieldDropdown.prototype.createTextArrow_","Blockly.FieldDropdown.prototype.createSVGArrow_","FIELD_DROPDOWN_SVG_ARROW_SIZE","FIELD_DROPDOWN_SVG_ARROW_DATAURI","Blockly.FieldDropdown.prototype.showEditor_","menuElement","FIELD_DROPDOWN_COLOURED_DIV","primaryColour","Blockly.FieldDropdown.prototype.dropdownCreate_","image","Image","src","alt","handleMenuActionEvent_","Blockly.FieldDropdown.prototype.dropdownDispose_","Blockly.FieldDropdown.prototype.handleMenuActionEvent_","onItemSelected_","Blockly.FieldDropdown.prototype.onItemSelected_","Blockly.FieldDropdown.prototype.trimOptions_","hasImages","strings","shortest","prefixLength","suffixLength","applyTrim_","Blockly.FieldDropdown.applyTrim_","newOptions","Blockly.FieldDropdown.prototype.isOptionListDynamic","Blockly.FieldDropdown.prototype.getOptions","opt_useCache","Blockly.FieldDropdown.prototype.doClassValidation_","isValueValid","Blockly.FieldDropdown.prototype.doValueUpdate_","Blockly.FieldDropdown.prototype.applyColour","Blockly.FieldDropdown.prototype.render_","renderSelectedImage_","renderSelectedText_","Blockly.FieldDropdown.prototype.renderSelectedImage_","imageJson","imageHeight","imageWidth","hasBorder","FIELD_DROPDOWN_BORDER_RECT_HEIGHT","xPadding","arrowWidth","positionSVGArrow_","Blockly.FieldDropdown.prototype.renderSelectedText_","textWidth","Blockly.FieldDropdown.prototype.positionSVGArrow_","textPadding","FIELD_DROPDOWN_SVG_ARROW_PADDING","svgArrowSize","Blockly.FieldDropdown.prototype.getText_","Blockly.FieldDropdown.validateOptions_","foundError","Blockly.FieldDropdown.prototype.onBlocklyAction","FieldLabelSerializable","Blockly.FieldLabelSerializable","Blockly.FieldLabelSerializable.fromJson","FieldImage","Blockly.FieldImage","opt_alt","opt_onClick","opt_flipRtl","flipRtl_","altText_","Y_PADDING","imageHeight_","Blockly.FieldImage.fromJson","Blockly.FieldImage.prototype.configure_","Blockly.FieldImage.prototype.initView","Blockly.FieldImage.prototype.updateSize_","Blockly.FieldImage.prototype.doClassValidation_","Blockly.FieldImage.prototype.doValueUpdate_","Blockly.FieldImage.prototype.getFlipRtl","setAlt","Blockly.FieldImage.prototype.setAlt","Blockly.FieldImage.prototype.showEditor_","setOnClickHandler","Blockly.FieldImage.prototype.setOnClickHandler","Blockly.FieldImage.prototype.getText_","FieldMultilineInput","Blockly.FieldMultilineInput","textGroup_","Blockly.FieldMultilineInput.fromJson","Blockly.FieldMultilineInput.prototype.toXml","Blockly.FieldMultilineInput.prototype.fromXml","Blockly.FieldMultilineInput.prototype.initView","Blockly.FieldMultilineInput.prototype.getDisplayText_","Blockly.FieldMultilineInput.prototype.render_","currentChild","lineHeight","FIELD_BORDER_RECT_Y_PADDING","Blockly.FieldMultilineInput.prototype.updateSize_","nodes","Blockly.FieldMultilineInput.prototype.widgetCreate_","paddingX","paddingY","padding","Blockly.FieldMultilineInput.prototype.onHtmlInputKeyDown_","FieldNumber","Blockly.FieldNumber","opt_min","opt_max","opt_precision","min_","max_","precision_","decimalPlaces_","setConstraints","Blockly.FieldNumber.fromJson","Blockly.FieldNumber.prototype.configure_","setMinInternal_","setMaxInternal_","setPrecisionInternal_","Blockly.FieldNumber.prototype.setConstraints","precision","setMin","Blockly.FieldNumber.prototype.setMin","Blockly.FieldNumber.prototype.setMinInternal_","getMin","Blockly.FieldNumber.prototype.getMin","setMax","Blockly.FieldNumber.prototype.setMax","Blockly.FieldNumber.prototype.setMaxInternal_","getMax","Blockly.FieldNumber.prototype.getMax","setPrecision","Blockly.FieldNumber.prototype.setPrecision","Blockly.FieldNumber.prototype.setPrecisionInternal_","precisionString","toLocaleString","maximumFractionDigits","decimalIndex","getPrecision","Blockly.FieldNumber.prototype.getPrecision","Blockly.FieldNumber.prototype.doClassValidation_","Blockly.FieldNumber.prototype.widgetCreate_","FieldVariable","Blockly.FieldVariable","opt_variableTypes","opt_defaultType","dropdownCreate","defaultVariableName","setTypes_","Blockly.FieldVariable.fromJson","Blockly.FieldVariable.prototype.configure_","Blockly.FieldVariable.prototype.initModel","variable_","defaultType_","Blockly.FieldVariable.prototype.shouldAddBorderRect_","Blockly.FieldVariable.prototype.fromXml","variableType","Blockly.FieldVariable.prototype.toXml","Blockly.FieldVariable.prototype.setSourceBlock","Blockly.FieldVariable.prototype.getValue","Blockly.FieldVariable.prototype.getText","Blockly.FieldVariable.prototype.getVariable","Blockly.FieldVariable.prototype.getValidator","Blockly.FieldVariable.prototype.doClassValidation_","typeIsAllowed_","Blockly.FieldVariable.prototype.doValueUpdate_","Blockly.FieldVariable.prototype.typeIsAllowed_","typeList","getVariableTypes_","Blockly.FieldVariable.prototype.getVariableTypes_","variableTypes","Blockly.FieldVariable.prototype.setTypes_","defaultType","isInArray","Blockly.FieldVariable.prototype.refreshVariableName","Blockly.FieldVariable.dropdownCreate","Blockly.FieldVariable.prototype.onItemSelected_","Blockly.FieldVariable.prototype.referencesVariables","Blockly.utils.svgPaths.point","curve","Blockly.utils.svgPaths.curve","command","points","Blockly.utils.svgPaths.moveTo","Blockly.utils.svgPaths.moveBy","lineTo","Blockly.utils.svgPaths.lineTo","Blockly.utils.svgPaths.line","Blockly.utils.svgPaths.lineOnAxis","val","arc","Blockly.utils.svgPaths.arc","flags","ConstantProvider","Blockly.blockRendering.ConstantProvider","NO_PADDING","SMALL_PADDING","MEDIUM_PADDING","MEDIUM_LARGE_PADDING","LARGE_PADDING","TALL_INPUT_FIELD_OFFSET_Y","TAB_HEIGHT","TAB_VERTICAL_OVERLAP","NOTCH_WIDTH","MIN_BLOCK_WIDTH","EMPTY_BLOCK_SPACER_HEIGHT","DUMMY_INPUT_SHADOW_MIN_HEIGHT","DUMMY_INPUT_MIN_HEIGHT","STATEMENT_INPUT_NOTCH_OFFSET","STATEMENT_BOTTOM_SPACER","STATEMENT_INPUT_PADDING_LEFT","BETWEEN_STATEMENT_PADDING_Y","TOP_ROW_MIN_HEIGHT","TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT","BOTTOM_ROW_MIN_HEIGHT","BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT","ADD_START_HATS","START_HAT_HEIGHT","START_HAT_WIDTH","SPACER_DEFAULT_HEIGHT","EMPTY_INLINE_INPUT_PADDING","EMPTY_INLINE_INPUT_HEIGHT","EXTERNAL_VALUE_INPUT_PADDING","EMPTY_STATEMENT_INPUT_HEIGHT","START_POINT","JAGGED_TEETH_HEIGHT","JAGGED_TEETH_WIDTH","randomIdentifier","embossFilter_","disabledPatternId","disabledPattern_","debugFilterId","cssNode_","debugFilter_","CURSOR_COLOUR","MARKER_COLOUR","CURSOR_WS_WIDTH","WS_CURSOR_HEIGHT","CURSOR_STACK_PADDING","CURSOR_BLOCK_PADDING","CURSOR_STROKE_WIDTH","INSERTION_MARKER_OPACITY","SHAPES","PUZZLE","NOTCH","Blockly.blockRendering.ConstantProvider.prototype.init","JAGGED_TEETH","makeJaggedTeeth","makeNotch","START_HAT","makeStartHat","PUZZLE_TAB","makePuzzleTab","INSIDE_CORNERS","makeInsideCorners","OUTSIDE_CORNERS","makeOutsideCorners","Blockly.blockRendering.ConstantProvider.prototype.setTheme","validatedBlockStyle_","setDynamicProperties_","Blockly.blockRendering.ConstantProvider.prototype.setDynamicProperties_","setFontConstants_","setComponentConstants_","Blockly.blockRendering.ConstantProvider.prototype.setFontConstants_","Blockly.blockRendering.ConstantProvider.prototype.setComponentConstants_","Blockly.blockRendering.ConstantProvider.prototype.getBlockStyleForColour","createBlockStyle_","Blockly.blockRendering.ConstantProvider.prototype.getBlockStyle","Blockly.blockRendering.ConstantProvider.prototype.createBlockStyle_","Blockly.blockRendering.ConstantProvider.prototype.validatedBlockStyle_","valid","parsedColour","generateSecondaryColour_","generateTertiaryColour_","Blockly.blockRendering.ConstantProvider.prototype.generateSecondaryColour_","Blockly.blockRendering.ConstantProvider.prototype.generateTertiaryColour_","Blockly.blockRendering.ConstantProvider.prototype.dispose","Blockly.blockRendering.ConstantProvider.prototype.makeJaggedTeeth","Blockly.blockRendering.ConstantProvider.prototype.makeStartHat","Blockly.blockRendering.ConstantProvider.prototype.makePuzzleTab","makeMainPath","up","back","control1Y","overlap","control2Y","endPoint1","endPoint2","pathUp","Blockly.blockRendering.ConstantProvider.prototype.makeNotch","outerWidth","innerWidth","pathRight","Blockly.blockRendering.ConstantProvider.prototype.makeInsideCorners","pathTop","pathBottom","Blockly.blockRendering.ConstantProvider.prototype.makeOutsideCorners","topLeft","topRight","bottomLeft","bottomRight","rightHeight","Blockly.blockRendering.ConstantProvider.prototype.shapeFor","Blockly.blockRendering.ConstantProvider.prototype.createDom","selector","injectCSS_","embossFilter","feSpecularLighting","disabledPattern","Debug","debugFilter","debugComponentTransfer","Blockly.blockRendering.ConstantProvider.prototype.injectCSS_","getCSS_","cssNodeId","Blockly.blockRendering.ConstantProvider.prototype.getCSS_","MarkerSvg","Blockly.blockRendering.MarkerSvg","marker_","currentMarkerSvg","isCursor","CURSOR_CLASS","MARKER_CLASS","HEIGHT_MULTIPLIER","Blockly.blockRendering.MarkerSvg.prototype.getSvgRoot","Blockly.blockRendering.MarkerSvg.prototype.getMarker","Blockly.blockRendering.MarkerSvg.prototype.isCursor","Blockly.blockRendering.MarkerSvg.prototype.createDom","createDomInternal_","setParent_","Blockly.blockRendering.MarkerSvg.prototype.setParent_","Blockly.blockRendering.MarkerSvg.prototype.draw","applyColour_","showAtLocation_","fireMarkerEvent_","beginElement","Blockly.blockRendering.MarkerSvg.prototype.showAtLocation_","curNodeAsConnection","showWithBlock_","showWithOutput_","showWithInput_","showWithNext_","showWithPrevious_","showWithField_","showWithCoordinates_","showWithStack_","showWithBlockPrevOutput_","Blockly.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_","markerHeight","markerOffset","connectionShape","positionPrevious_","positionOutput_","positionBlock_","showCurrent_","Blockly.blockRendering.MarkerSvg.prototype.showWithBlock_","Blockly.blockRendering.MarkerSvg.prototype.showWithPrevious_","Blockly.blockRendering.MarkerSvg.prototype.showWithOutput_","Blockly.blockRendering.MarkerSvg.prototype.showWithCoordinates_","positionLine_","Blockly.blockRendering.MarkerSvg.prototype.showWithField_","positionRect_","Blockly.blockRendering.MarkerSvg.prototype.showWithInput_","positionInput_","Blockly.blockRendering.MarkerSvg.prototype.showWithNext_","Blockly.blockRendering.MarkerSvg.prototype.showWithStack_","yPadding","Blockly.blockRendering.MarkerSvg.prototype.showCurrent_","Blockly.blockRendering.MarkerSvg.prototype.positionBlock_","markerPath","markerBlock_","Blockly.blockRendering.MarkerSvg.prototype.positionInput_","markerInput_","Blockly.blockRendering.MarkerSvg.prototype.positionLine_","markerSvgLine_","Blockly.blockRendering.MarkerSvg.prototype.positionOutput_","Blockly.blockRendering.MarkerSvg.prototype.positionPrevious_","Blockly.blockRendering.MarkerSvg.prototype.positionRect_","markerSvgRect_","Blockly.blockRendering.MarkerSvg.prototype.flipRtl_","Blockly.blockRendering.MarkerSvg.prototype.hide","Blockly.blockRendering.MarkerSvg.prototype.fireMarkerEvent_","eventType","getBlinkProperties_","Blockly.blockRendering.MarkerSvg.prototype.getBlinkProperties_","Blockly.blockRendering.MarkerSvg.prototype.createDomInternal_","blinkProperties","Blockly.blockRendering.MarkerSvg.prototype.applyColour_","_curNode","Blockly.blockRendering.MarkerSvg.prototype.dispose","Types","NONE","HAT","ICON","SPACER","BETWEEN_ROW_SPACER","IN_ROW_SPACER","EXTERNAL_VALUE_INPUT","INLINE_INPUT","STATEMENT_INPUT","CONNECTION","PREVIOUS_CONNECTION","NEXT_CONNECTION","OUTPUT_CONNECTION","CORNER","LEFT_SQUARE_CORNER","LEFT_ROUND_CORNER","RIGHT_SQUARE_CORNER","RIGHT_ROUND_CORNER","JAGGED_EDGE","TOP_ROW","BOTTOM_ROW","INPUT_ROW","LEFT_CORNER","RIGHT_CORNER","nextTypeValue_","Blockly.blockRendering.Types.getType","isField","Blockly.blockRendering.Types.isField","isHat","Blockly.blockRendering.Types.isHat","isIcon","Blockly.blockRendering.Types.isIcon","isSpacer","Blockly.blockRendering.Types.isSpacer","isInRowSpacer","Blockly.blockRendering.Types.isInRowSpacer","isInput","Blockly.blockRendering.Types.isInput","isExternalInput","Blockly.blockRendering.Types.isExternalInput","isInlineInput","Blockly.blockRendering.Types.isInlineInput","isStatementInput","Blockly.blockRendering.Types.isStatementInput","isPreviousConnection","Blockly.blockRendering.Types.isPreviousConnection","isNextConnection","Blockly.blockRendering.Types.isNextConnection","isPreviousOrNextConnection","Blockly.blockRendering.Types.isPreviousOrNextConnection","isLeftRoundedCorner","Blockly.blockRendering.Types.isLeftRoundedCorner","isRightRoundedCorner","Blockly.blockRendering.Types.isRightRoundedCorner","isLeftSquareCorner","Blockly.blockRendering.Types.isLeftSquareCorner","isRightSquareCorner","Blockly.blockRendering.Types.isRightSquareCorner","isCorner","Blockly.blockRendering.Types.isCorner","isJaggedEdge","Blockly.blockRendering.Types.isJaggedEdge","isRow","Blockly.blockRendering.Types.isRow","isBetweenRowSpacer","Blockly.blockRendering.Types.isBetweenRowSpacer","isTopRow","Blockly.blockRendering.Types.isTopRow","isBottomRow","Blockly.blockRendering.Types.isBottomRow","isTopOrBottomRow","Blockly.blockRendering.Types.isTopOrBottomRow","isInputRow","Blockly.blockRendering.Types.isInputRow","Measurable","Blockly.blockRendering.Measurable","centerline","xPos","notchOffset","Blockly.blockRendering.Connection","connectionModel","isDynamicShape","OutputConnection","Blockly.blockRendering.OutputConnection","startX","connectionOffsetY","connectionOffsetX","PreviousConnection","Blockly.blockRendering.PreviousConnection","NextConnection","Blockly.blockRendering.NextConnection","InputConnection","Blockly.blockRendering.InputConnection","connectedBlock","connectedBlockWidth","connectedBlockHeight","InlineInput","Blockly.blockRendering.InlineInput","connectionHeight","connectionWidth","StatementInput","Blockly.blockRendering.StatementInput","ExternalValueInput","Blockly.blockRendering.ExternalValueInput","Blockly.blockRendering.Icon","JaggedEdge","Blockly.blockRendering.JaggedEdge","Blockly.blockRendering.Field","flipRtl","Hat","Blockly.blockRendering.Hat","ascenderHeight","SquareCorner","Blockly.blockRendering.SquareCorner","opt_position","RoundCorner","Blockly.blockRendering.RoundCorner","InRowSpacer","Blockly.blockRendering.InRowSpacer","Row","Blockly.blockRendering.Row","widthWithConnectedBlocks","minWidth","minHeight","hasJaggedEdge","hasDummyInput","hasInlineInput","hasStatement","hasExternalInput","measure","Blockly.blockRendering.Row.prototype.measure","getLastInput","Blockly.blockRendering.Row.prototype.getLastInput","startsWithElemSpacer","Blockly.blockRendering.Row.prototype.startsWithElemSpacer","endsWithElemSpacer","Blockly.blockRendering.Row.prototype.endsWithElemSpacer","getFirstSpacer","Blockly.blockRendering.Row.prototype.getFirstSpacer","getLastSpacer","Blockly.blockRendering.Row.prototype.getLastSpacer","TopRow","Blockly.blockRendering.TopRow","capline","hasPreviousConnection","hasLeftSquareCorner","Blockly.blockRendering.TopRow.prototype.hasLeftSquareCorner","hasHat","hasRightSquareCorner","Blockly.blockRendering.TopRow.prototype.hasRightSquareCorner","Blockly.blockRendering.TopRow.prototype.measure","Blockly.blockRendering.TopRow.prototype.startsWithElemSpacer","Blockly.blockRendering.TopRow.prototype.endsWithElemSpacer","BottomRow","Blockly.blockRendering.BottomRow","hasNextConnection","descenderHeight","Blockly.blockRendering.BottomRow.prototype.hasLeftSquareCorner","Blockly.blockRendering.BottomRow.prototype.hasRightSquareCorner","Blockly.blockRendering.BottomRow.prototype.measure","Blockly.blockRendering.BottomRow.prototype.startsWithElemSpacer","Blockly.blockRendering.BottomRow.prototype.endsWithElemSpacer","SpacerRow","Blockly.blockRendering.SpacerRow","followsStatement","Blockly.blockRendering.SpacerRow.prototype.measure","InputRow","Blockly.blockRendering.InputRow","connectedBlockWidths","Blockly.blockRendering.InputRow.prototype.measure","Blockly.blockRendering.InputRow.prototype.endsWithElemSpacer","RenderInfo","Blockly.blockRendering.RenderInfo","isInline","statementEdge","widthWithChildren","rows","inputRows","hiddenIcons","topRow","bottomRow","startY","Blockly.blockRendering.RenderInfo.prototype.getRenderer","Blockly.blockRendering.RenderInfo.prototype.measure","createRows_","addElemSpacing_","addRowSpacing_","computeBounds_","alignRowElements_","finalize_","Blockly.blockRendering.RenderInfo.prototype.createRows_","populateTopRow_","activeRow","iconInfo","lastInput","shouldStartNewRow_","addInput_","populateBottomRow_","Blockly.blockRendering.RenderInfo.prototype.populateTopRow_","hasPrevious","leftSquareCorner","rightSquareCorner","Blockly.blockRendering.RenderInfo.prototype.populateBottomRow_","Blockly.blockRendering.RenderInfo.prototype.addInput_","Blockly.blockRendering.RenderInfo.prototype.shouldStartNewRow_","Blockly.blockRendering.RenderInfo.prototype.addElemSpacing_","oldElems","getInRowSpacing_","Blockly.blockRendering.RenderInfo.prototype.getInRowSpacing_","Blockly.blockRendering.RenderInfo.prototype.computeBounds_","widestStatementRowFields","blockWidth","widestRowWithConnectedBlocks","statementInput","Blockly.blockRendering.RenderInfo.prototype.alignRowElements_","alignStatementRow_","currentWidth","missingSpace","getDesiredRowWidth_","addAlignmentPadding_","Blockly.blockRendering.RenderInfo.prototype.getDesiredRowWidth_","_row","Blockly.blockRendering.RenderInfo.prototype.addAlignmentPadding_","firstSpacer","lastSpacer","Blockly.blockRendering.RenderInfo.prototype.alignStatementRow_","desiredWidth","Blockly.blockRendering.RenderInfo.prototype.addRowSpacing_","oldRows","makeSpacerRow_","Blockly.blockRendering.RenderInfo.prototype.makeSpacerRow_","getSpacerRowHeight_","getSpacerRowWidth_","spacer","precedesStatement","Blockly.blockRendering.RenderInfo.prototype.getSpacerRowWidth_","_prev","_next","Blockly.blockRendering.RenderInfo.prototype.getSpacerRowHeight_","getElemCenterline_","Blockly.blockRendering.RenderInfo.prototype.getElemCenterline_","recordElemPositions_","Blockly.blockRendering.RenderInfo.prototype.recordElemPositions_","xCursor","Blockly.blockRendering.RenderInfo.prototype.finalize_","yCursor","Drawer","Blockly.blockRendering.Drawer","info_","topLeft_","inlinePath_","outlinePath_","Blockly.blockRendering.Drawer.prototype.draw","hideHiddenIcons_","drawOutline_","drawInternals_","setPath","flipRTL","renderingDebugger","drawDebug","recordSizeOnBlock_","Blockly.blockRendering.Drawer.prototype.recordSizeOnBlock_","Blockly.blockRendering.Drawer.prototype.hideHiddenIcons_","Blockly.blockRendering.Drawer.prototype.drawOutline_","drawTop_","drawJaggedEdge_","drawStatementInput_","drawValueInput_","drawRightSideRow_","drawBottom_","drawLeft_","Blockly.blockRendering.Drawer.prototype.drawTop_","positionPreviousConnection_","Blockly.blockRendering.Drawer.prototype.drawJaggedEdge_","Blockly.blockRendering.Drawer.prototype.drawValueInput_","positionExternalValueConnection_","Blockly.blockRendering.Drawer.prototype.drawStatementInput_","innerTopLeftCorner","innerHeight","positionStatementInputConnection_","Blockly.blockRendering.Drawer.prototype.drawRightSideRow_","Blockly.blockRendering.Drawer.prototype.drawBottom_","elems","positionNextConnection_","rightCornerYOffset","outlinePath","Blockly.blockRendering.Drawer.prototype.drawLeft_","positionOutputConnection_","tabBottom","Blockly.blockRendering.Drawer.prototype.drawInternals_","drawInlineInput_","layoutField_","Blockly.blockRendering.Drawer.prototype.layoutField_","fieldInfo","Blockly.blockRendering.Drawer.prototype.drawInlineInput_","connectionTop","connectionBottom","positionInlineInputConnection_","Blockly.blockRendering.Drawer.prototype.positionInlineInputConnection_","connX","Blockly.blockRendering.Drawer.prototype.positionStatementInputConnection_","Blockly.blockRendering.Drawer.prototype.positionExternalValueConnection_","Blockly.blockRendering.Drawer.prototype.positionPreviousConnection_","Blockly.blockRendering.Drawer.prototype.positionNextConnection_","connInfo","Blockly.blockRendering.Drawer.prototype.positionOutputConnection_","PathObject","Blockly.blockRendering.PathObject","Blockly.blockRendering.PathObject.prototype.setPath","pathString","Blockly.blockRendering.PathObject.prototype.flipRTL","Blockly.blockRendering.PathObject.prototype.setCursorSvg","Blockly.blockRendering.PathObject.prototype.setMarkerSvg","Blockly.blockRendering.PathObject.prototype.applyColour","updateShadow_","updateDisabled_","Blockly.blockRendering.PathObject.prototype.setStyle","setClass_","Blockly.blockRendering.PathObject.prototype.setClass_","Blockly.blockRendering.PathObject.prototype.updateHighlighted","Blockly.blockRendering.PathObject.prototype.updateShadow_","Blockly.blockRendering.PathObject.prototype.updateDisabled_","Blockly.blockRendering.PathObject.prototype.updateSelected","Blockly.blockRendering.PathObject.prototype.updateDraggingDelete","Blockly.blockRendering.PathObject.prototype.updateInsertionMarker","Blockly.blockRendering.PathObject.prototype.updateMovable","Blockly.blockRendering.PathObject.prototype.updateReplacementFade","Blockly.blockRendering.PathObject.prototype.updateShapeForInputHighlight","_conn","Renderer","Blockly.blockRendering.Renderer","overrides","Blockly.blockRendering.Renderer.prototype.getClassName","Blockly.blockRendering.Renderer.prototype.init","makeConstants_","Blockly.blockRendering.Renderer.prototype.createDom","Blockly.blockRendering.Renderer.prototype.refreshDom","previousConstants","Blockly.blockRendering.Renderer.prototype.dispose","Blockly.blockRendering.Renderer.prototype.makeConstants_","makeRenderInfo_","Blockly.blockRendering.Renderer.prototype.makeRenderInfo_","makeDrawer_","Blockly.blockRendering.Renderer.prototype.makeDrawer_","makeDebugger_","Blockly.blockRendering.Renderer.prototype.makeDebugger_","Blockly.blockRendering.Renderer.prototype.makeMarkerDrawer","Blockly.blockRendering.Renderer.prototype.makePathObject","Blockly.blockRendering.Renderer.prototype.getConstants","Blockly.blockRendering.Renderer.prototype.shouldHighlightConnection","orphanCanConnectAtEnd","Blockly.blockRendering.Renderer.prototype.orphanCanConnectAtEnd","localType","lastConnection","orphanConnection","Blockly.blockRendering.Renderer.prototype.getConnectionPreviewMethod","Blockly.blockRendering.Renderer.prototype.render","geras","Blockly.geras.ConstantProvider","DARK_PATH_OFFSET","MAX_BOTTOM_WIDTH","Blockly.geras.ConstantProvider.prototype.getCSS_","Highlighter","Blockly.geras.Highlighter","inlineSteps_","steps_","RTL_","highlightConstants_","getHighlightConstants","highlightOffset_","outsideCornerPaths_","OUTSIDE_CORNER","insideCornerPaths_","INSIDE_CORNER","puzzleTabPaths_","notchPaths_","startPaths_","jaggedTeethPaths_","getPath","Blockly.geras.Highlighter.prototype.getPath","drawTopCorner","Blockly.geras.Highlighter.prototype.drawTopCorner","Blockly.geras.Highlighter.prototype.drawJaggedEdge_","drawValueInput","Blockly.geras.Highlighter.prototype.drawValueInput","belowTabHeight","drawStatementInput","Blockly.geras.Highlighter.prototype.drawStatementInput","drawRightSideRow","Blockly.geras.Highlighter.prototype.drawRightSideRow","rightEdge","drawBottomRow","Blockly.geras.Highlighter.prototype.drawBottomRow","cornerElem","drawLeft","Blockly.geras.Highlighter.prototype.drawLeft","drawInlineInput","Blockly.geras.Highlighter.prototype.drawInlineInput","connectionRight","bottomHighlightWidth","aboveTabHeight","Blockly.geras.InlineInput","Blockly.geras.StatementInput","Blockly.geras.RenderInfo","Blockly.geras.RenderInfo.prototype.getRenderer","Blockly.geras.RenderInfo.prototype.populateBottomRow_","Blockly.geras.RenderInfo.prototype.addInput_","Blockly.geras.RenderInfo.prototype.addElemSpacing_","hasExternalInputs","Blockly.geras.RenderInfo.prototype.getInRowSpacing_","Blockly.geras.RenderInfo.prototype.getSpacerRowHeight_","Blockly.geras.RenderInfo.prototype.getElemCenterline_","Blockly.geras.RenderInfo.prototype.alignRowElements_","nextRightEdge","prevInput","prevRightEdge","Blockly.geras.RenderInfo.prototype.getDesiredRowWidth_","Blockly.geras.RenderInfo.prototype.finalize_","heightWithoutHat","diff","Blockly.geras.Drawer","highlighter_","Blockly.geras.Drawer.prototype.draw","setHighlightPath","Blockly.geras.Drawer.prototype.drawTop_","Blockly.geras.Drawer.prototype.drawJaggedEdge_","Blockly.geras.Drawer.prototype.drawValueInput_","Blockly.geras.Drawer.prototype.drawStatementInput_","Blockly.geras.Drawer.prototype.drawRightSideRow_","Blockly.geras.Drawer.prototype.drawBottom_","Blockly.geras.Drawer.prototype.drawLeft_","Blockly.geras.Drawer.prototype.drawInlineInput_","Blockly.geras.Drawer.prototype.positionInlineInputConnection_","Blockly.geras.Drawer.prototype.positionStatementInputConnection_","Blockly.geras.Drawer.prototype.positionExternalValueConnection_","Blockly.geras.Drawer.prototype.positionNextConnection_","HighlightConstantProvider","Blockly.geras.HighlightConstantProvider","constantProvider","Blockly.geras.HighlightConstantProvider.prototype.init","makeInsideCorner","makeOutsideCorner","Blockly.geras.HighlightConstantProvider.prototype.makeInsideCorner","distance45outside","SQRT1_2","pathTopRtl","pathBottomRtl","pathBottomLtr","Blockly.geras.HighlightConstantProvider.prototype.makeOutsideCorner","distance45inside","topLeftCornerHighlightRtl","topLeftCornerHighlightLtr","bottomLeftStartY","bottomLeftPath","Blockly.geras.HighlightConstantProvider.prototype.makePuzzleTab","highlightRtlUp","highlightRtlDown","verticalOverlap","highlightLtrUp","highlightLtrDown","Blockly.geras.HighlightConstantProvider.prototype.makeNotch","Blockly.geras.HighlightConstantProvider.prototype.makeJaggedTeeth","Blockly.geras.HighlightConstantProvider.prototype.makeStartHat","hatHeight","pathRtl","pathLtr","Blockly.geras.PathObject","svgPathDark","svgPathLight","Blockly.geras.PathObject.prototype.setPath","mainPath","Blockly.geras.PathObject.prototype.setHighlightPath","highlightPath","Blockly.geras.PathObject.prototype.flipRTL","Blockly.geras.PathObject.prototype.applyColour","Blockly.geras.PathObject.prototype.setStyle","Blockly.geras.PathObject.prototype.updateHighlighted","Blockly.geras.PathObject.prototype.updateShadow_","Blockly.geras.PathObject.prototype.updateDisabled_","Blockly.geras.Renderer","Blockly.geras.Renderer.prototype.init","makeHighlightConstants_","Blockly.geras.Renderer.prototype.refreshDom","Blockly.geras.Renderer.prototype.makeConstants_","Blockly.geras.Renderer.prototype.makeRenderInfo_","Blockly.geras.Renderer.prototype.makeDrawer_","Blockly.geras.Renderer.prototype.makePathObject","Blockly.geras.Renderer.prototype.makeHighlightConstants_","Blockly.geras.Renderer.prototype.getHighlightConstants","thrasos","Blockly.thrasos.RenderInfo","Blockly.thrasos.RenderInfo.prototype.getRenderer","Blockly.thrasos.RenderInfo.prototype.addElemSpacing_","Blockly.thrasos.RenderInfo.prototype.getInRowSpacing_","Blockly.thrasos.RenderInfo.prototype.getSpacerRowHeight_","Blockly.thrasos.RenderInfo.prototype.getElemCenterline_","Blockly.thrasos.RenderInfo.prototype.finalize_","Blockly.thrasos.Renderer","Blockly.thrasos.Renderer.prototype.makeRenderInfo_","zelos","Blockly.zelos.ConstantProvider","GRID_UNIT","STATEMENT_INPUT_SPACER_MIN_WIDTH","CURSOR_RADIUS","HEXAGONAL","SQUARE","SHAPE_IN_SHAPE_PADDING","MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH","SELECTED_GLOW_COLOUR","SELECTED_GLOW_SIZE","REPLACEMENT_GLOW_COLOUR","REPLACEMENT_GLOW_SIZE","selectedGlowFilterId","selectedGlowFilter_","replacementGlowFilterId","replacementGlowFilter_","Blockly.zelos.ConstantProvider.prototype.setFontConstants_","Blockly.zelos.ConstantProvider.prototype.init","makeHexagonal","ROUNDED","makeRounded","SQUARED","makeSquared","rightWidth","Blockly.zelos.ConstantProvider.prototype.setDynamicProperties_","selectedGlowSize","replacementGlowSize","Blockly.zelos.ConstantProvider.prototype.dispose","Blockly.zelos.ConstantProvider.prototype.makeStartHat","Blockly.zelos.ConstantProvider.prototype.makeHexagonal","isDynamic","pathRightDown","pathRightUp","Blockly.zelos.ConstantProvider.prototype.makeRounded","blockHeight","remainingHeight","maxHeight","Blockly.zelos.ConstantProvider.prototype.makeSquared","_height","Blockly.zelos.ConstantProvider.prototype.shapeFor","Blockly.zelos.ConstantProvider.prototype.makeNotch","curveWidth","quarterHeight","Blockly.zelos.ConstantProvider.prototype.makeInsideCorners","innerTopRightCorner","pathTopRight","pathBottomRight","Blockly.zelos.ConstantProvider.prototype.generateSecondaryColour_","Blockly.zelos.ConstantProvider.prototype.generateTertiaryColour_","Blockly.zelos.ConstantProvider.prototype.createDom","selectedGlowFilter","selectedComponentTransfer","replacementGlowFilter","replacementComponentTransfer","Blockly.zelos.ConstantProvider.prototype.getCSS_","Blockly.zelos.TopRow","Blockly.zelos.TopRow.prototype.endsWithElemSpacer","Blockly.zelos.TopRow.prototype.hasLeftSquareCorner","Blockly.zelos.TopRow.prototype.hasRightSquareCorner","Blockly.zelos.BottomRow","Blockly.zelos.BottomRow.prototype.endsWithElemSpacer","Blockly.zelos.BottomRow.prototype.hasLeftSquareCorner","Blockly.zelos.BottomRow.prototype.hasRightSquareCorner","RightConnectionShape","Blockly.zelos.RightConnectionShape","Blockly.zelos.StatementInput","connectedBottomNextConnection","Blockly.zelos.RenderInfo","isMultiRow","hasStatementInput","rightSide","Blockly.zelos.RenderInfo.prototype.getRenderer","Blockly.zelos.RenderInfo.prototype.measure","adjustXPosition_","Blockly.zelos.RenderInfo.prototype.shouldStartNewRow_","Blockly.zelos.RenderInfo.prototype.getDesiredRowWidth_","Blockly.zelos.RenderInfo.prototype.getInRowSpacing_","Blockly.zelos.RenderInfo.prototype.getSpacerRowHeight_","Blockly.zelos.RenderInfo.prototype.getSpacerRowWidth_","Blockly.zelos.RenderInfo.prototype.getElemCenterline_","Blockly.zelos.RenderInfo.prototype.addInput_","rightAlignedDummyInput","Blockly.zelos.RenderInfo.prototype.addAlignmentPadding_","alignmentDivider","Blockly.zelos.RenderInfo.prototype.adjustXPosition_","notchTotalWidth","minXPos","prevSpacer","nextSpacer","hasPrevNotch","hasNextNotch","prevInRowSpacer","finalizeOutputConnection_","Blockly.zelos.RenderInfo.prototype.finalizeOutputConnection_","rightConnectionWidth","finalizeHorizontalAlignment_","Blockly.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_","totalNegativeSpacing","lastElem","leftNegPadding","getNegativeSpacing_","rightNegPadding","minBlockWidth","Blockly.zelos.RenderInfo.prototype.getNegativeSpacing_","outerShape","innerShape","outputShapeType","finalizeVerticalAlignment_","Blockly.zelos.RenderInfo.prototype.finalizeVerticalAlignment_","firstRow","hasSingleTextOrImageField","hasNonShadowConnectedBlocks","MIN_VERTICAL_TIGHTNESTING_HEIGHT","Blockly.zelos.RenderInfo.prototype.finalize_","Blockly.zelos.Drawer","Blockly.zelos.Drawer.prototype.draw","beginDrawing","endDrawing","Blockly.zelos.Drawer.prototype.drawOutline_","drawFlatTop_","drawRightDynamicConnection_","drawFlatBottom_","drawLeftDynamicConnection_","Blockly.zelos.Drawer.prototype.drawLeft_","Blockly.zelos.Drawer.prototype.drawRightSideRow_","cornerHeight","Blockly.zelos.Drawer.prototype.drawRightDynamicConnection_","Blockly.zelos.Drawer.prototype.drawLeftDynamicConnection_","Blockly.zelos.Drawer.prototype.drawFlatTop_","Blockly.zelos.Drawer.prototype.drawFlatBottom_","Blockly.zelos.Drawer.prototype.drawInlineInput_","setOutlinePath","Blockly.zelos.Drawer.prototype.drawStatementInput_","innerBottomLeftCorner","Blockly.zelos.PathObject","svgPathSelected_","outlines_","remainingOutlines_","Blockly.zelos.PathObject.prototype.setPath","Blockly.zelos.PathObject.prototype.applyColour","Blockly.zelos.PathObject.prototype.flipRTL","Blockly.zelos.PathObject.prototype.updateSelected","Blockly.zelos.PathObject.prototype.updateReplacementFade","Blockly.zelos.PathObject.prototype.updateShapeForInputHighlight","getOutlinePath_","Blockly.zelos.PathObject.prototype.beginDrawing","Blockly.zelos.PathObject.prototype.endDrawing","removeOutlinePath_","Blockly.zelos.PathObject.prototype.setOutlinePath","outline","Blockly.zelos.PathObject.prototype.getOutlinePath_","Blockly.zelos.PathObject.prototype.removeOutlinePath_","Blockly.zelos.MarkerSvg","showWithInputOutput_","Blockly.zelos.MarkerSvg.prototype.showWithInputOutput_","offsetInBlock","positionCircle_","Blockly.zelos.MarkerSvg.prototype.showWithOutput_","Blockly.zelos.MarkerSvg.prototype.showWithInput_","Blockly.zelos.MarkerSvg.prototype.showWithBlock_","Blockly.zelos.MarkerSvg.prototype.positionCircle_","markerCircle_","Blockly.zelos.MarkerSvg.prototype.hide","Blockly.zelos.MarkerSvg.prototype.createDomInternal_","Blockly.zelos.MarkerSvg.prototype.applyColour_","Blockly.zelos.Renderer","Blockly.zelos.Renderer.prototype.makeConstants_","Blockly.zelos.Renderer.prototype.makeRenderInfo_","Blockly.zelos.Renderer.prototype.makeDrawer_","Blockly.zelos.Renderer.prototype.makeMarkerDrawer","Blockly.zelos.Renderer.prototype.makePathObject","Blockly.zelos.Renderer.prototype.shouldHighlightConnection","Blockly.zelos.Renderer.prototype.getConnectionPreviewMethod","Dark","Deuteranopia","HighContrast","Tritanopia","Constants","Colour","HUE","Lists","itemCount_","updateShape_","containerBlock","itemBlock","valueConnection_","OPERATORS","MODE","WHERE_OPTIONS","modeMenu","isStatement","updateStatement_","updateAt_","mode","where","isAt","newStatement","newAt","isAt1","isAt2","newMode","updateType_","inputBlock","Logic","TOOLTIPS_BY_OP","CONTROLS_IF_MUTATOR_MIXIN","elseifCount_","elseCount_","rebuildShape_","elseifBlock","elseBlock","clauseBlock","valueConnections","statementConnections","elseStatementConnection","statementConnection_","reconnectChildBlocks_","inputIf","inputDo","CONTROLS_IF_TOOLTIP_EXTENSION","Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION","LOGIC_COMPARE_ONCHANGE_MIXIN","prevBlocks_","prevA","prevB","LOGIC_COMPARE_EXTENSION","Blockly.Constants.Logic.LOGIC_COMPARE_EXTENSION","LOGIC_TERNARY_ONCHANGE_MIXIN","prevParentConnection_","Loops","WHILE_UNTIL_TOOLTIPS","BREAK_CONTINUE_TOOLTIPS","CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN","xmlField","CONTROL_FLOW_IN_LOOP_CHECK_MIXIN","LOOP_TYPES","getSurroundLoop","IS_DIVISIBLEBY_MUTATOR_MIXIN","divisorInput","inputExists","IS_DIVISIBLE_MUTATOR_EXTENSION","Blockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION","LIST_MODES_MUTATOR_MIXIN","newOp","LIST_MODES_MUTATOR_EXTENSION","Blockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION","arguments_","argumentVarModels_","setStatements_","hasStatements","hasStatements_","updateParams_","paramString","opt_paramIds","parameter","argModel","paramIds_","childNode","containerBlockNode","statementNode","argBlockNode","fieldNode","argumentName","paramBlock","stackConnection","stackBlock","oldVariable","change","displayRenamedVar_","xmlMutation","xmlArg","callType_","argOption","argVar","argXmlField","argXmlBlock","oldShowEditorFn_","newShowEditorFn","createdVariables_","deleteIntermediateVars_","caselessName","otherVar","quarkConnections_","quarkIds_","previousEnabledState_","setProcedureParameters_","paramNames","paramIds","mutatorOpen","quarkId","def","defType_","option.callback","hasReturnValue_","legal","FUNCTION_TYPES","Text","TYPES","QUOTE_IMAGE_MIXIN","newQuote_","QUOTE_IMAGE_LEFT_DATAURI","QUOTE_IMAGE_RIGHT_DATAURI","QUOTE_IMAGE_WIDTH","QUOTE_IMAGE_HEIGHT","quoteField_","isLeft","TEXT_QUOTES_EXTENSION","Blockly.Constants.Text.TEXT_QUOTES_EXTENSION","TEXT_JOIN_MUTATOR_MIXIN","TEXT_JOIN_EXTENSION","Blockly.Constants.Text.TEXT_JOIN_EXTENSION","TEXT_INDEXOF_TOOLTIP_EXTENSION","Blockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION","TEXT_CHARAT_MUTATOR_MIXIN","isAt_","TEXT_CHARAT_EXTENSION","Blockly.Constants.Text.TEXT_CHARAT_EXTENSION","CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN","renameOption","RENAME_VARIABLE","RENAME_OPTION_CALLBACK_FACTORY","DELETE_VARIABLE","DELETE_OPTION_CALLBACK_FACTORY","opposite_type","contextMenuMsg","Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY","Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY","Blockly.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY","Blockly.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY","JavaScript","getOwnPropertyNames","ORDER_ATOMIC","ORDER_NEW","ORDER_MEMBER","ORDER_FUNCTION_CALL","ORDER_INCREMENT","ORDER_DECREMENT","ORDER_BITWISE_NOT","ORDER_UNARY_PLUS","ORDER_UNARY_NEGATION","ORDER_LOGICAL_NOT","ORDER_TYPEOF","ORDER_VOID","ORDER_DELETE","ORDER_AWAIT","ORDER_EXPONENTIATION","ORDER_MULTIPLICATION","ORDER_DIVISION","ORDER_MODULUS","ORDER_SUBTRACTION","ORDER_ADDITION","ORDER_BITWISE_SHIFT","ORDER_RELATIONAL","ORDER_IN","ORDER_INSTANCEOF","ORDER_EQUALITY","ORDER_BITWISE_AND","ORDER_BITWISE_XOR","ORDER_BITWISE_OR","ORDER_LOGICAL_AND","ORDER_LOGICAL_OR","ORDER_CONDITIONAL","ORDER_ASSIGNMENT","ORDER_YIELD","ORDER_COMMA","ORDER_NONE","Blockly.JavaScript.init","defvars","devVarList","Blockly.JavaScript.finish","definitions","Blockly.JavaScript.scrubNakedValue","quote_","Blockly.JavaScript.quote_","multiline_quote_","Blockly.JavaScript.multiline_quote_","Blockly.JavaScript.scrub_","commentCode","nextCode","getAdjusted","Blockly.JavaScript.getAdjusted","atId","opt_delta","opt_negate","opt_order","order","defaultAtIndex","at","c1","c2","repeatCount","operator","cacheList","listVar","xVar","lists","getIndex_","Blockly.JavaScript.lists.getIndex_","listName","opt_at","where1","where2","at1","at2","wherePascalCase","delimiter","conditionCode","branchCode","argument1","argument0","defaultArgument","value_else","repeats","loopVar","endVar","until","variable0","increment","step","startVar","incVar","indexVar","xfix","loop","CONSTANTS","number_to_check","dropdown_property","divisor","argument2","funcName","xfix1","loopTrap","returnValue","xfix2","forceString_","Blockly.JavaScript.text.forceString_","strRegExp","element0","element1","Blockly.JavaScript.text.getIndex_","stringName","sub","from","to"],"mappings":"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AASC,SAASC,EAAQC,GAEpC,IAAIvuB,EAAQ+tB,IAAIC,UAAhB,CAGAhuB,EAAQ+tB,IAAIC,WAAY,EACpB9iB,IAAAA,EAAOlL,EAAQ+tB,IAAII,QAAQlzB,KAAK,MACpC,EAAQ8yB,IAAII,QAAQpzB,OAAS,EAC7B,IAIIyzB,EAAYD,EAAYz1B,QAAQ,SAAU,IAC9CoS,EAAOA,EAAKpS,QAAQ,cAAe01B,IAG/BC,EAAUh4B,SAASC,cAAc,UAC7BigB,GAAK,uBACT+X,EAAcj4B,SAASk4B,eAAezjB,GAC1CujB,EAAQx3B,YAAYy3B,GACpBj4B,SAASm4B,KAAKzX,aAAasX,EAASh4B,SAASm4B,KAAKrF,eAMpD,EAAQwE,IAAII,QAAU,CAEpB,gBACE,0BACA,iBACA,oBACA,sBACA,kBACF,IAEA,sBACE,iBACA,sBACA,kBACF,IAEA,kBACE,gBACA,sBACA,oBACA,sBACF,IAEA,0BACE,qBACA,yBACA,6BACF,IAEA,0BACE,iBACA,sBACA,UACA,WACF,IAIA,iDACE,qBACF,IAEA,6BACE,iBACA,sBACA,UACA,WACA,YACA,aACA,gCACA,eACF,IAEA,kDACA,oDACE,6BACF,IAEA,uBACE,6BACA,0BACA,gDACA,eACA,iBACA,wBACA,eACA,gBACA,sBACA,mBACF,IAEA,wBACE,sBACA,WACA,UACA,iBACA,iBACA,qBACA,yBACA,0BACA,sBACA,gBACA,0CACF,IAEA,uCACE,0CACF,IAEA,4BACE,qBACA,kBACA,sBACA,sBACF,IAEA,0BACE,sBACA,WACA,UACA,eACA,gBACA,eACA,6BACA,yBACF,IAEA,2BACE,yBACA,eACA,cACA,eACA,sBACA,iBACA,qBACA,8BACA,mBACF,IAEA,qBACE,yBACA,0BACA,+BACA,yBACF,IAEA,wBACE,4BACA,2BACA,mCACA,yBACF,IAEA,qBACE,qBACA,cACF,IAEA,qBACE,qBACA,cACF,IAEA,uBACE,mBACA,mBACF,IAEA,sCACE,cACA,gBACA,qBACF,IAEA,sBACE,cACA,yBACA,mBACF,IAEA,uCACE,iBACF,IAEA,sBAEE,gDACA,gBACA,wBACF,IAEA,qBAEE,kDACA,oBACA,4BACF,IAGA,6BAEE,kDACA,oBACA,4BACF,IAIA,+CAEE,kDACA,oBACA,4BACF,IAEA,2CACE,kDACF,IAEA,iCACA,uCACE,oBACA,sBACF,IAEA,sCACE,iBACF,IAEA,kCACE,oBACA,sBACF,IAEA,sCACA,sCACE,iBACF,IAEA,wCACA,6CACA,6CACE,oBACA,gBACF,IAEA,0BACE,0BACF,IAEA,iCACE,wBACF,IAEA,mBACE,sBACA,eACF,IAEA,sBACE,mBACF,IAMA,oBACA,kCACE,qBACA,yBACA,6BACA,mBACF,IAEA,mBACE,iBACF,IAEA,8CACE,kBACF,IAEA,sBACE,mBACF,IAEA,iCACA,8BACE,eACF,IAEA,sBACE,cACA,gBACA,qBACF,IAEA,uBACE,cACF,IAEA,wBACE,aACA,cACF,IAEA,sBACE,gBACA,sBACA,gBACA,aACA,iBACA,cACA,eACA,sBACA,kBACA,0BACF,IAKA,iCACE,iBACF,IAEA,2BACE,mBACA,mBACF,IAEA,8BACE,cACA,gBACA,mBACF,IAEA,6BACE,cACA,oBACF,IAEA,mCACE,eACF,IAEA,4BACE,eACF,IAEA,+BACA,8BACE,sBACA,iBACF,IAEA,gCACE,cACF,IAEA,4BACE,cACF,IAEA,6DACA,kCACE,cACF,IAIA,2CACE,cACF,IAEA,4EACA,iDACE,cACF,IAEA,yBACE,oBACF,IAEA,2BACE,qBACA,8BACA,wBACF,IAEA,0BACE,sBACA,YACA,aACF,IAEA,4BACE,wBACF,IAEA,wBACE,sBACA,oBACF,IAEA,yBACE,sBACA,yBACF,IAEA,0CAEE,sBACF,IAGA,6CAEE,qBACA,uBACF,IAEA,mCACE,oBACA,iCACA,0CACA,uCACA,aACA,iBACA,kBACA,sBACA,oBACA,sBACA,oBACA,kBACF,IAEA,kDACE,0CACF,IAEA,qCACE,6DACA,iBACA,kBACF,IAGA,qBACE,gBACA,eACA,mBACA,oBACA,aAEA,kBACA,qBACA,uBACF,IAGA,6BACE,eACA,mBACF,IA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","file":"main.6d6d2b10.js","sourceRoot":"../src","sourcesContent":["/*!\n * masis.js v2.1.1\n * 2015-2020 Sylvain Gougouzian\n * Licensed under MIT\n * github.com/gouz/masis\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.masis = factory());\n}(this, (function () { 'use strict';\n\n  class Masis {\r\n    constructor(selector) {\r\n      let $elements, returns;\r\n      $elements = document.querySelectorAll(selector);\r\n      returns = [];\r\n      let self = this;\r\n      $elements.forEach(($el) => {\r\n        return returns.push(self._init($el));\r\n      });\r\n      if (returns.length == 0) {\r\n        return null;\r\n      }\r\n      if (returns.length === 1) {\r\n        return returns[0];\r\n      }\r\n      return returns;\r\n    }\r\n    _init($element) {\r\n      this.$element = $element;\r\n      return this.populate();\r\n    }\r\n\r\n    populate() {\r\n      this.$children = [];\r\n      let children = this.$element.children;\r\n      Array.from(children).forEach(($el) => {\r\n        if ($el.nodeType !== 8) this.$children.push($el);\r\n      });\r\n      this.$actives = this.$children;\r\n      return this.view();\r\n    }\r\n\r\n    view(nb = 0, start = 0) {\r\n      nb = parseInt(nb);\r\n      this.$children.forEach(($el) => {\r\n        $el.style.display = 'none';\r\n      });\r\n      this.$actives.forEach(($el, i) => {\r\n        if (!nb || (nb && start <= i && i < nb + start)) {\r\n          $el.style.display = '';\r\n        }\r\n      });\r\n      return this;\r\n    }\r\n  }\r\n\r\n  const _Masis = Masis;\n\n  function MasisFilter(Masis, selector = '*') {\r\n    if ('*' == selector) Masis.$actives = Masis.$children;\r\n    else {\r\n      let match = function ($el, selector) {\r\n        return (\r\n          $el.matches ||\r\n          $el.matchesSelector ||\r\n          $el.msMatchesSelector ||\r\n          $el.mozMatchesSelector ||\r\n          $el.webkitMatchesSelector ||\r\n          $el.oMatchesSelector\r\n        ).call($el, selector);\r\n      };\r\n      let matches = [];\r\n      Masis.$actives.forEach(($el) => {\r\n        if (match($el, selector)) matches.push($el);\r\n      });\r\n      Masis.$actives = matches;\r\n      return Masis.view();\r\n    }\r\n  }\n\n  function MasisLazy(\r\n    Masis,\r\n    threshold = 0,\r\n    attr = 'data-src',\r\n    callback = null\r\n  ) {\r\n    let wHeight = window.innerHeight || document.documentElement.clientHeight;\r\n    let lazyload = () => {\r\n      Masis.$element\r\n        .querySelectorAll('img[' + attr + ']')\r\n        .array.forEach(($img) => {\r\n          let rect = $img.getBoundingClientRect();\r\n          let top = rect.top;\r\n          if (-threshold <= top - threshold && top <= wheight) {\r\n            $img.setAttribute('src', $img.getAttribute(attr));\r\n            $img.removeAttribute(attr);\r\n            $img.style.opacity = 1;\r\n            return $img.addEventListener(\r\n              'load',\r\n              function () {\r\n                if (callback != null) {\r\n                  return callback($img);\r\n                }\r\n              },\r\n              false\r\n            );\r\n          }\r\n        });\r\n    };\r\n    let lazytime = null;\r\n    window.addEventListener(\r\n      'scroll',\r\n      function () {\r\n        clearTimeout(lazytime);\r\n        lazytime = setTimeout(function () {\r\n          lazyload();\r\n        }, 10);\r\n      },\r\n      false\r\n    );\r\n    lazyload();\r\n    return this;\r\n  }\n\n  function MasisPosition(Masis, opts = {}) {\r\n    if (opts.pad == null) opts.pad = 1;\r\n    let width = parseInt(Masis.$element.offsetWidth);\r\n    Masis.$element.style.position = 'relative';\r\n    let hs = [];\r\n    for (let i = 0; i < width; i++) hs[i] = 0;\r\n    let max = function (x, w, hs) {\r\n      let i = 0,\r\n        j = hs[x];\r\n      while ((i += opts.pad) < w) {\r\n        if (j < hs[x + i]) {\r\n          j = hs[x + i];\r\n        }\r\n      }\r\n      return j;\r\n    };\r\n    Masis.$actives.forEach(($el) => {\r\n      $el.style.position = 'absolute';\r\n      const style = getComputedStyle($el);\r\n      const rect = $el.getBoundingClientRect();\r\n      let $iw, $ih;\r\n      $iw =\r\n        parseInt(rect.width) +\r\n        parseInt(style.marginLeft) +\r\n        parseInt(style.marginRight);\r\n      $ih =\r\n        parseInt(rect.height) +\r\n        parseInt(style.marginTop) +\r\n        parseInt(style.marginBottom);\r\n      let x = 0,\r\n        j = 0,\r\n        h = Infinity,\r\n        _h = h;\r\n      while (j <= width) {\r\n        let k = j - opts.pad;\r\n        let _w = j + $iw;\r\n        while (k++ <= _w) {\r\n          let _k = k + $iw;\r\n          if (_k <= width) {\r\n            _h = $ih + max(k, $iw, hs);\r\n            if (h > _h) {\r\n              h = _h;\r\n              x = k;\r\n            }\r\n          }\r\n        }\r\n        j += $iw;\r\n      }\r\n      $el.style.left = x + 'px';\r\n      $el.style.top = h - $ih + 'px';\r\n      j = $iw;\r\n      while (j--) {\r\n        hs[j + x] = h;\r\n      }\r\n    });\r\n    Masis.$element.style.height = Math.max.apply(Math, hs) + 'px';\r\n    return Masis;\r\n  }\n\n  function MasisSort(Masis, type = 'text', way = 'ASC') {\r\n    way = way.toUpperCase();\r\n    let children = Array.from(Masis.$children);\r\n    children.sort(($a, $b) => {\r\n      const t = type.slice(1, -1);\r\n      let va = type !== 'text' ? $a.getAttribute(t) : $a.innerHTML;\r\n      let vb = type !== 'text' ? $b.getAttribute(t) : $b.innerHTML;\r\n      const r = way === 'ASC' ? 1 : -1;\r\n      if (va == null) va = '';\r\n      if (vb == null) vb = '';\r\n      return r * va.localeCompare(vb);\r\n    });\r\n    for (let i = 0; i < children.length; i++)\r\n      Masis.$element.appendChild(children[i]);\r\n    return Masis.populate();\r\n  }\n\n  var index = {\r\n    Masis: _Masis,\r\n    MasisFilter: MasisFilter,\r\n    MasisLazy: MasisLazy,\r\n    MasisPosition: MasisPosition,\r\n    MasisSort: MasisSort,\r\n  };\n\n  return index;\n\n})));\n","import { MasisPosition } from 'masis';\n\nclass MasisDelete {\n  Masis = null;\n  options = {};\n\n  constructor(Masis, options) {\n    this.Masis = Masis;\n    this.options = options;\n  }\n\n  init() {\n    let self = this;\n    this.Masis.$children.forEach(($el) => {\n      let $div = document.createElement('div');\n      $div.classList.add(self.options.class);\n      $div.addEventListener(\n        'mousedown',\n        (ev) => {\n          self.removeChild(ev);\n        },\n        false\n      );\n      $el.appendChild($div);\n    });\n  }\n\n  removeChild(ev) {\n    ev.preventDefault();\n    ev.stopImmediatePropagation();\n    if (confirm(this.options.message)) {\n      let event = new CustomEvent('masis.delete', {\n        detail: {\n          element: ev.currentTarget.parentNode,\n        },\n      });\n      document.dispatchEvent(event);\n      this.Masis.$element.removeChild(ev.currentTarget.parentNode);\n      MasisPosition(this.Masis.populate());\n    }\n  }\n}\n\nconst _MasisDelete = MasisDelete;\nexport { _MasisDelete as MasisDelete };\n","import { MasisPosition, MasisSort } from 'masis';\n\nclass MasisMove {\n  Masis = null;\n  options = {};\n  $ghost;\n  positions;\n  oldpos = '';\n  onDrag = false;\n\n  constructor(Masis, options = {}) {\n    this.Masis = Masis;\n    if (options.attr == null) options.attr = 'data-sort';\n    if (options.ghost == null) options.ghost = 'ghost';\n    this.options = options;\n\n    let self = this;\n\n    document.addEventListener(\n      'mousemove',\n      (ev) => {\n        self.moveGhost(ev);\n      },\n      false\n    );\n    this.redefineSort();\n  }\n\n  init() {\n    let self = this;\n    this.Masis.$children.forEach(($el) => {\n      $el.addEventListener(\n        'mousedown',\n        (ev) => {\n          self.createGhost(ev);\n        },\n        false\n      );\n      $el.addEventListener(\n        'mouseup',\n        (ev) => {\n          self.removeGhost(ev);\n        },\n        false\n      );\n    });\n  }\n\n  static pad(n, width, z) {\n    z = z || '0';\n    n = n + '';\n    return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n  }\n\n  static joliNumber(num) {\n    return `_${MasisMove.pad(num, 6, '0')}`;\n  }\n\n  redefineSort() {\n    let self = this;\n    this.Masis.$children.forEach(($el, i) => {\n      $el.setAttribute(this.options.attr, MasisMove.joliNumber(i + 1));\n    });\n  }\n\n  generatePositionsMap() {\n    this.positions = {};\n    let self = this;\n    this.Masis.$children.forEach(($el) => {\n      let et = MasisMove.joliNumber($el.style.top.replace('px', ''));\n      let el = MasisMove.joliNumber($el.style.left.replace('px', ''));\n      if (typeof self.positions[et] == 'undefined') self.positions[et] = {};\n      self.positions[et][el] = $el.getAttribute(self.options.attr);\n    });\n  }\n\n  createFake(newPos) {\n    let $robot = this.Masis.$element.querySelector('#' + this.options.exclude);\n    if ($robot != null) this.Masis.$element.removeChild($robot);\n    $robot = document.createElement('div');\n    $robot.setAttribute('id', this.options.exclude);\n    $robot.classList = this.$ghost.classList;\n    $robot.classList.remove(this.options.ghost);\n    $robot.innerHTML = this.$ghost.innerHTML;\n    $robot.setAttribute(this.options.attr, newPos);\n    this.Masis.$element.appendChild($robot);\n  }\n\n  moveGhost(ev) {\n    if (!this.onDrag) return;\n    ev.preventDefault();\n    let newX = ev.pageX;\n    let newY = ev.pageY;\n    newX -= 90;\n    newY -= 50;\n    this.$ghost.style.left = newX + 'px';\n    this.$ghost.style.top = newY + 'px';\n    let _x = MasisMove.joliNumber(newX);\n    let _y = MasisMove.joliNumber(newY);\n    if (this.positions != null) {\n      let positionsY = Object.keys(this.positions).reverse();\n      let newPos = MasisMove.joliNumber(0);\n      for (let i in positionsY)\n        if (positionsY[i].localeCompare(_y) == -1) {\n          let positionsX = Object.keys(this.positions[positionsY[i]]).reverse();\n          for (let j in positionsX)\n            if (positionsX[j].localeCompare(_x) == -1) {\n              newPos =\n                MasisMove.joliNumber(\n                  parseInt(\n                    this.positions[positionsY[i]][positionsX[j]].replace(\n                      '_',\n                      ''\n                    )\n                  )\n                ) + '_';\n              break;\n            }\n          break;\n        }\n      if (newPos != this.oldpos) {\n        this.createFake(newPos);\n        MasisPosition(MasisSort(this.Masis.populate(), '[data-sort]'));\n        this.oldpos = newPos;\n      }\n    }\n  }\n\n  createGhost(ev) {\n    if (ev.currentTarget.classList.contains(this.options.exclude)) return;\n    if (!ev.currentTarget.classList.contains(this.options.class)) return;\n    this.onDrag = true;\n    this.$ghost = event.currentTarget;\n    this.Masis.$element.parentNode.appendChild(this.$ghost);\n    this.$ghost.classList.add(this.options.ghost);\n    this.createFake(this.$ghost.getAttribute(this.options.attr));\n    MasisPosition(MasisSort(this.Masis.populate(), '[data-sort]'));\n    this.generatePositionsMap();\n  }\n\n  removeGhost(ev) {\n    if (this.$ghost != null) {\n      this.$ghost.classList.remove(this.options.ghost);\n      this.moveGhost(ev);\n      let $robot = this.Masis.$element.querySelector(\n        '#' + this.options.exclude\n      );\n      this.$ghost.setAttribute(\n        this.options.attr,\n        $robot.getAttribute(this.options.attr)\n      );\n      this.Masis.$element.removeChild($robot);\n      this.Masis.$element.appendChild(this.$ghost);\n      MasisPosition(MasisSort(this.Masis.populate(), '[data-sort]'));\n      this.redefineSort();\n      this.oldpos = '';\n      this.onDrag = false;\n      let event = new CustomEvent('masis.moved', {\n        detail: {},\n      });\n      document.dispatchEvent(event);\n    }\n  }\n}\n\nconst _MasisMove = MasisMove;\nexport { _MasisMove as MasisMove };\n","class MasisResize {\n  Masis = null;\n  options = {};\n\n  onResize = false;\n  $element;\n  offsetX;\n  offsetY;\n  previousX;\n  previousY;\n\n  constructor(Masis, options) {\n    this.Masis = Masis;\n    this.options = options;\n    let self = this;\n    document.addEventListener(\n      'mousemove',\n      (ev) => {\n        this.resize(ev);\n      },\n      false\n    );\n    document.addEventListener(\n      'mouseup',\n      (ev) => {\n        this.deleteResize(ev);\n      },\n      false\n    );\n  }\n\n  init() {\n    let self = this;\n    this.Masis.$children.forEach(($el) => {\n      let $div = document.createElement('div');\n      $div.classList.add(self.options.class);\n      $div.addEventListener(\n        'mousedown',\n        (ev) => {\n          self.createResize(ev);\n        },\n        false\n      );\n      $el.appendChild($div);\n    });\n  }\n\n  createResize(ev) {\n    ev.preventDefault();\n    ev.stopImmediatePropagation();\n    if (!ev.target.classList.contains(this.options.class)) return;\n    this.onResize = true;\n    this.$element = ev.currentTarget.parentNode;\n    this.$element.classList.add(this.options.active);\n    this.offsetX = 0;\n    this.offsetY = 0;\n    this.previousX = ev.pageX;\n    this.previousY = ev.pageY;\n  }\n\n  deleteResize() {\n    this.onResize = false;\n    if (this.$element) {\n      this.$element.classList.remove(this.options.active);\n      let self = this;\n      let event = new CustomEvent('masis.resize', {\n        detail: {\n          element: self.$element,\n        },\n      });\n      document.dispatchEvent(event);\n      this.options.callbackEnd(this.$element);\n    }\n    this.$element = null;\n  }\n\n  resize(ev) {\n    if (!this.onResize) return;\n    ev.preventDefault();\n    if (this.$element != null) {\n      let width = this.options.breakpoints.width.length - 1;\n      let height = this.options.breakpoints.height.length - 1;\n      this.offsetX += ev.pageX - this.previousX;\n      this.offsetY += ev.pageY - this.previousY;\n      this.previousX = ev.pageX;\n      this.previousY = ev.pageY;\n      for (let i in this.options.breakpoints.width)\n        if (this.options.breakpoints.width[i] > Math.abs(this.offsetX)) {\n          width = parseInt(i);\n          break;\n        }\n      for (let i in this.options.breakpoints.height)\n        if (this.options.breakpoints.height[i] > Math.abs(this.offsetY)) {\n          height = parseInt(i);\n          break;\n        }\n      if (this.offsetX < 0) width *= -1;\n      if (this.offsetY < 0) height *= -1;\n      this.options.callbackMove(this.$element, width, height);\n    }\n  }\n}\n\nconst _MasisResize = MasisResize;\nexport { _MasisResize as MasisResize };\n","export const themes = [\"light\", \"dark\"];\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","/**\n * [js-md5]{@link https://github.com/emn178/js-md5}\n *\n * @namespace md5\n * @version 0.7.3\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_MD5_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_MD5_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_MD5_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_MD5_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [128, 32768, 8388608, -2147483648];\n  var SHIFT = [0, 8, 16, 24];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'buffer', 'arrayBuffer', 'base64'];\n  var BASE64_ENCODE_CHAR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n  var blocks = [], buffer8;\n  if (ARRAY_BUFFER) {\n    var buffer = new ArrayBuffer(68);\n    buffer8 = new Uint8Array(buffer);\n    blocks = new Uint32Array(buffer);\n  }\n\n  if (root.JS_MD5_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  /**\n   * @method hex\n   * @memberof md5\n   * @description Output hash as hex string\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {String} Hex string\n   * @example\n   * md5.hex('The quick brown fox jumps over the lazy dog');\n   * // equal to\n   * md5('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method digest\n   * @memberof md5\n   * @description Output hash as bytes array\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Array} Bytes array\n   * @example\n   * md5.digest('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method array\n   * @memberof md5\n   * @description Output hash as bytes array\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Array} Bytes array\n   * @example\n   * md5.array('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method arrayBuffer\n   * @memberof md5\n   * @description Output hash as ArrayBuffer\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @example\n   * md5.arrayBuffer('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method buffer\n   * @deprecated This maybe confuse with Buffer in node.js. Please use arrayBuffer instead.\n   * @memberof md5\n   * @description Output hash as ArrayBuffer\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @example\n   * md5.buffer('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method base64\n   * @memberof md5\n   * @description Output hash as base64 string\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {String} base64 string\n   * @example\n   * md5.base64('The quick brown fox jumps over the lazy dog');\n   */\n  var createOutputMethod = function (outputType) {\n    return function (message) {\n      return new Md5(true).update(message)[outputType]();\n    };\n  };\n\n  /**\n   * @method create\n   * @memberof md5\n   * @description Create Md5 object\n   * @returns {Md5} Md5 object.\n   * @example\n   * var hash = md5.create();\n   */\n  /**\n   * @method update\n   * @memberof md5\n   * @description Create and update Md5 object\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Md5} Md5 object.\n   * @example\n   * var hash = md5.update('The quick brown fox jumps over the lazy dog');\n   * // equal to\n   * var hash = md5.create();\n   * hash.update('The quick brown fox jumps over the lazy dog');\n   */\n  var createMethod = function () {\n    var method = createOutputMethod('hex');\n    if (NODE_JS) {\n      method = nodeWrap(method);\n    }\n    method.create = function () {\n      return new Md5();\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method) {\n    var crypto = eval(\"require('crypto')\");\n    var Buffer = eval(\"require('buffer').Buffer\");\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash('md5').update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw ERROR;\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash('md5').update(new Buffer(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  /**\n   * Md5 class\n   * @class Md5\n   * @description This is internal class.\n   * @see {@link md5.create}\n   */\n  function Md5(sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n      blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n      blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n      blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n      this.buffer8 = buffer8;\n    } else {\n      if (ARRAY_BUFFER) {\n        var buffer = new ArrayBuffer(68);\n        this.buffer8 = new Uint8Array(buffer);\n        this.blocks = new Uint32Array(buffer);\n      } else {\n        this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n      }\n    }\n    this.h0 = this.h1 = this.h2 = this.h3 = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n  }\n\n  /**\n   * @method update\n   * @memberof Md5\n   * @instance\n   * @description Update hash\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Md5} Md5 object.\n   * @see {@link md5.update}\n   */\n  Md5.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw ERROR;\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw ERROR;\n          }\n        }\n      } else {\n        throw ERROR;\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n    var buffer8 = this.buffer8;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = blocks[16];\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        if (ARRAY_BUFFER) {\n          for (i = this.start; index < length && i < 64; ++index) {\n            buffer8[i++] = message[index];\n          }\n        } else {\n          for (i = this.start; index < length && i < 64; ++index) {\n            blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n          }\n        }\n      } else {\n        if (ARRAY_BUFFER) {\n          for (i = this.start; index < length && i < 64; ++index) {\n            code = message.charCodeAt(index);\n            if (code < 0x80) {\n              buffer8[i++] = code;\n            } else if (code < 0x800) {\n              buffer8[i++] = 0xc0 | (code >> 6);\n              buffer8[i++] = 0x80 | (code & 0x3f);\n            } else if (code < 0xd800 || code >= 0xe000) {\n              buffer8[i++] = 0xe0 | (code >> 12);\n              buffer8[i++] = 0x80 | ((code >> 6) & 0x3f);\n              buffer8[i++] = 0x80 | (code & 0x3f);\n            } else {\n              code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n              buffer8[i++] = 0xf0 | (code >> 18);\n              buffer8[i++] = 0x80 | ((code >> 12) & 0x3f);\n              buffer8[i++] = 0x80 | ((code >> 6) & 0x3f);\n              buffer8[i++] = 0x80 | (code & 0x3f);\n            }\n          }\n        } else {\n          for (i = this.start; index < length && i < 64; ++index) {\n            code = message.charCodeAt(index);\n            if (code < 0x80) {\n              blocks[i >> 2] |= code << SHIFT[i++ & 3];\n            } else if (code < 0x800) {\n              blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n            } else if (code < 0xd800 || code >= 0xe000) {\n              blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n            } else {\n              code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n              blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n            }\n          }\n        }\n      }\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Md5.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = blocks[16];\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n      blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n      blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n      blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.bytes << 3;\n    blocks[15] = this.hBytes << 3 | this.bytes >>> 29;\n    this.hash();\n  };\n\n  Md5.prototype.hash = function () {\n    var a, b, c, d, bc, da, blocks = this.blocks;\n\n    if (this.first) {\n      a = blocks[0] - 680876937;\n      a = (a << 7 | a >>> 25) - 271733879 << 0;\n      d = (-1732584194 ^ a & 2004318071) + blocks[1] - 117830708;\n      d = (d << 12 | d >>> 20) + a << 0;\n      c = (-271733879 ^ (d & (a ^ -271733879))) + blocks[2] - 1126478375;\n      c = (c << 17 | c >>> 15) + d << 0;\n      b = (a ^ (c & (d ^ a))) + blocks[3] - 1316259209;\n      b = (b << 22 | b >>> 10) + c << 0;\n    } else {\n      a = this.h0;\n      b = this.h1;\n      c = this.h2;\n      d = this.h3;\n      a += (d ^ (b & (c ^ d))) + blocks[0] - 680876936;\n      a = (a << 7 | a >>> 25) + b << 0;\n      d += (c ^ (a & (b ^ c))) + blocks[1] - 389564586;\n      d = (d << 12 | d >>> 20) + a << 0;\n      c += (b ^ (d & (a ^ b))) + blocks[2] + 606105819;\n      c = (c << 17 | c >>> 15) + d << 0;\n      b += (a ^ (c & (d ^ a))) + blocks[3] - 1044525330;\n      b = (b << 22 | b >>> 10) + c << 0;\n    }\n\n    a += (d ^ (b & (c ^ d))) + blocks[4] - 176418897;\n    a = (a << 7 | a >>> 25) + b << 0;\n    d += (c ^ (a & (b ^ c))) + blocks[5] + 1200080426;\n    d = (d << 12 | d >>> 20) + a << 0;\n    c += (b ^ (d & (a ^ b))) + blocks[6] - 1473231341;\n    c = (c << 17 | c >>> 15) + d << 0;\n    b += (a ^ (c & (d ^ a))) + blocks[7] - 45705983;\n    b = (b << 22 | b >>> 10) + c << 0;\n    a += (d ^ (b & (c ^ d))) + blocks[8] + 1770035416;\n    a = (a << 7 | a >>> 25) + b << 0;\n    d += (c ^ (a & (b ^ c))) + blocks[9] - 1958414417;\n    d = (d << 12 | d >>> 20) + a << 0;\n    c += (b ^ (d & (a ^ b))) + blocks[10] - 42063;\n    c = (c << 17 | c >>> 15) + d << 0;\n    b += (a ^ (c & (d ^ a))) + blocks[11] - 1990404162;\n    b = (b << 22 | b >>> 10) + c << 0;\n    a += (d ^ (b & (c ^ d))) + blocks[12] + 1804603682;\n    a = (a << 7 | a >>> 25) + b << 0;\n    d += (c ^ (a & (b ^ c))) + blocks[13] - 40341101;\n    d = (d << 12 | d >>> 20) + a << 0;\n    c += (b ^ (d & (a ^ b))) + blocks[14] - 1502002290;\n    c = (c << 17 | c >>> 15) + d << 0;\n    b += (a ^ (c & (d ^ a))) + blocks[15] + 1236535329;\n    b = (b << 22 | b >>> 10) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[1] - 165796510;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[6] - 1069501632;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[11] + 643717713;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[0] - 373897302;\n    b = (b << 20 | b >>> 12) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[5] - 701558691;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[10] + 38016083;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[15] - 660478335;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[4] - 405537848;\n    b = (b << 20 | b >>> 12) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[9] + 568446438;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[14] - 1019803690;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[3] - 187363961;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[8] + 1163531501;\n    b = (b << 20 | b >>> 12) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[13] - 1444681467;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[2] - 51403784;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[7] + 1735328473;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[12] - 1926607734;\n    b = (b << 20 | b >>> 12) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[5] - 378558;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[8] - 2022574463;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[11] + 1839030562;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[14] - 35309556;\n    b = (b << 23 | b >>> 9) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[1] - 1530992060;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[4] + 1272893353;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[7] - 155497632;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[10] - 1094730640;\n    b = (b << 23 | b >>> 9) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[13] + 681279174;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[0] - 358537222;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[3] - 722521979;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[6] + 76029189;\n    b = (b << 23 | b >>> 9) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[9] - 640364487;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[12] - 421815835;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[15] + 530742520;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[2] - 995338651;\n    b = (b << 23 | b >>> 9) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[0] - 198630844;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[7] + 1126891415;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[14] - 1416354905;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[5] - 57434055;\n    b = (b << 21 | b >>> 11) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[12] + 1700485571;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[3] - 1894986606;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[10] - 1051523;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[1] - 2054922799;\n    b = (b << 21 | b >>> 11) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[8] + 1873313359;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[15] - 30611744;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[6] - 1560198380;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[13] + 1309151649;\n    b = (b << 21 | b >>> 11) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[4] - 145523070;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[11] - 1120210379;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[2] + 718787259;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[9] - 343485551;\n    b = (b << 21 | b >>> 11) + c << 0;\n\n    if (this.first) {\n      this.h0 = a + 1732584193 << 0;\n      this.h1 = b - 271733879 << 0;\n      this.h2 = c - 1732584194 << 0;\n      this.h3 = d + 271733878 << 0;\n      this.first = false;\n    } else {\n      this.h0 = this.h0 + a << 0;\n      this.h1 = this.h1 + b << 0;\n      this.h2 = this.h2 + c << 0;\n      this.h3 = this.h3 + d << 0;\n    }\n  };\n\n  /**\n   * @method hex\n   * @memberof Md5\n   * @instance\n   * @description Output hash as hex string\n   * @returns {String} Hex string\n   * @see {@link md5.hex}\n   * @example\n   * hash.hex();\n   */\n  Md5.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3;\n\n    return HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n      HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n      HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n      HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n      HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n      HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n      HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n      HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n      HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n      HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n      HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n      HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F];\n  };\n\n  /**\n   * @method toString\n   * @memberof Md5\n   * @instance\n   * @description Output hash as hex string\n   * @returns {String} Hex string\n   * @see {@link md5.hex}\n   * @example\n   * hash.toString();\n   */\n  Md5.prototype.toString = Md5.prototype.hex;\n\n  /**\n   * @method digest\n   * @memberof Md5\n   * @instance\n   * @description Output hash as bytes array\n   * @returns {Array} Bytes array\n   * @see {@link md5.digest}\n   * @example\n   * hash.digest();\n   */\n  Md5.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3;\n    return [\n      h0 & 0xFF, (h0 >> 8) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 24) & 0xFF,\n      h1 & 0xFF, (h1 >> 8) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 24) & 0xFF,\n      h2 & 0xFF, (h2 >> 8) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 24) & 0xFF,\n      h3 & 0xFF, (h3 >> 8) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 24) & 0xFF\n    ];\n  };\n\n  /**\n   * @method array\n   * @memberof Md5\n   * @instance\n   * @description Output hash as bytes array\n   * @returns {Array} Bytes array\n   * @see {@link md5.array}\n   * @example\n   * hash.array();\n   */\n  Md5.prototype.array = Md5.prototype.digest;\n\n  /**\n   * @method arrayBuffer\n   * @memberof Md5\n   * @instance\n   * @description Output hash as ArrayBuffer\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @see {@link md5.arrayBuffer}\n   * @example\n   * hash.arrayBuffer();\n   */\n  Md5.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(16);\n    var blocks = new Uint32Array(buffer);\n    blocks[0] = this.h0;\n    blocks[1] = this.h1;\n    blocks[2] = this.h2;\n    blocks[3] = this.h3;\n    return buffer;\n  };\n\n  /**\n   * @method buffer\n   * @deprecated This maybe confuse with Buffer in node.js. Please use arrayBuffer instead.\n   * @memberof Md5\n   * @instance\n   * @description Output hash as ArrayBuffer\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @see {@link md5.buffer}\n   * @example\n   * hash.buffer();\n   */\n  Md5.prototype.buffer = Md5.prototype.arrayBuffer;\n\n  /**\n   * @method base64\n   * @memberof Md5\n   * @instance\n   * @description Output hash as base64 string\n   * @returns {String} base64 string\n   * @see {@link md5.base64}\n   * @example\n   * hash.base64();\n   */\n  Md5.prototype.base64 = function () {\n    var v1, v2, v3, base64Str = '', bytes = this.array();\n    for (var i = 0; i < 15;) {\n      v1 = bytes[i++];\n      v2 = bytes[i++];\n      v3 = bytes[i++];\n      base64Str += BASE64_ENCODE_CHAR[v1 >>> 2] +\n        BASE64_ENCODE_CHAR[(v1 << 4 | v2 >>> 4) & 63] +\n        BASE64_ENCODE_CHAR[(v2 << 2 | v3 >>> 6) & 63] +\n        BASE64_ENCODE_CHAR[v3 & 63];\n    }\n    v1 = bytes[i];\n    base64Str += BASE64_ENCODE_CHAR[v1 >>> 2] +\n      BASE64_ENCODE_CHAR[(v1 << 4) & 63] +\n      '==';\n    return base64Str;\n  };\n\n  var exports = createMethod();\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    /**\n     * @method md5\b\n     * @description Md5 hash function, export to global in browsers.\n     * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n     * @returns {String} md5 hashes\n     * @example\n     * md5(''); // d41d8cd98f00b204e9800998ecf8427e\n     * md5('The quick brown fox jumps over the lazy dog'); // 9e107d9d372bb6826bd81d3542a419d6\n     * md5('The quick brown fox jumps over the lazy dog.'); // e4d909c290d0fb1ca068ffaddf22cbd0\n     *\n     * // It also supports UTF-8 encoding\n     * md5(''); // a7bac2239fcdcb3a067903d8077c4a07\n     *\n     * // It also supports byte `Array`, `Uint8Array`, `ArrayBuffer`\n     * md5([]); // d41d8cd98f00b204e9800998ecf8427e\n     * md5(new Uint8Array([])); // d41d8cd98f00b204e9800998ecf8427e\n     */\n    root.md5 = exports;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","import md5 from 'js-md5';\n\nlet loadLibraries = [];\nlet libLoaded = [];\n\nexport class YadomsHelper {\n  public changeCardTitle($element, content) {\n    let $cardtitle = $element.querySelector('.card-title');\n    let $title = $cardtitle.querySelector('.title');\n    $title.innerHTML = content;\n    if (content == '') $cardtitle.classList.add('no-border');\n    else $cardtitle.classList.remove('no-border');\n  }\n\n  public makeDigital(value, hollow = true, format = '8.8.8.8.8.8.8.8.') {\n    if (hollow)\n      return `\n        <div class=\"digital\">\n          <span class=\"hollow font-mono\">${format}</span>\n          <span class=\"digits font-mono\">${value}</span>\n        </div>\n      `;\n    else\n      return `\n        <div class=\"digital\">\n          <span class=\"digits\">${value}</span>\n        </div>\n      `;\n  }\n  private static _load(tag, url) {\n    return new Promise((resolve, reject) => {\n      loadLibraries.push(url);\n      let $element = document.createElement(tag);\n      $element.id = `_${md5(url)}`;\n      let parent = 'body';\n      let attr = 'src';\n      $element.onload = function () {\n        libLoaded.push(url);\n        resolve(url);\n      };\n      $element.onerror = function () {\n        reject(url);\n      };\n      switch (tag) {\n        case 'script':\n          $element.async = true;\n          break;\n        case 'link':\n          $element.type = 'text/css';\n          $element.rel = 'stylesheet';\n          attr = 'href';\n          parent = 'head';\n      }\n      $element[attr] = url;\n      if (parent == 'body') document[parent].appendChild($element);\n      else document[parent].insertBefore($element, document[parent].firstChild);\n    });\n  }\n\n  private _waitForLoad(url, resolve) {\n    if (libLoaded.indexOf(url) != -1) resolve();\n    else\n      setTimeout(() => {\n        this._waitForLoad(url, resolve);\n      }, 100);\n  }\n\n  public loader(...urls) {\n    const cranberries = [];\n    urls.forEach((url) => {\n      if (loadLibraries.indexOf(url) == -1) {\n        if (url.endsWith('.js'))\n          cranberries.push(YadomsHelper._load('script', url));\n        if (url.endsWith('.css'))\n          cranberries.push(YadomsHelper._load('link', url));\n      } else {\n        cranberries.push(\n          new Promise((resolve) => {\n            this._waitForLoad(url, resolve);\n          })\n        );\n      }\n    });\n    return Promise.all(cranberries);\n  }\n\n  public static loadComponent(type) {\n    return new Promise((resolve) => {\n      if (!Object.keys(window.YadomsApp.components).includes(type)) {\n        import(`./components/${type}.mjs`)\n          .then((Component: any) => {\n            if (!Object.keys(window.YadomsApp.components).includes(type)) {\n              window.YadomsApp.components[type] = Component;\n              window.YadomsApp.$style.textContent += Component.style();\n            }\n            resolve(window.YadomsApp.components[type]);\n          })\n          .catch((err) => {\n            console.error(err.message);\n          });\n      } else resolve(window.YadomsApp.components[type]);\n    });\n  }\n\n  public useComponent(type, data) {\n    let uniqID = `_${type}_${Date.now()}`;\n    YadomsHelper.loadComponent(type).then((Component) => {\n      document.querySelector(`#${uniqID}`).innerHTML = Component.render(data);\n    });\n    return `<div id=\"${uniqID}\"></div>`;\n  }\n}\n","interface ContentRect {\n    height: number;\n    left: number;\n    top: number;\n    width: number;\n}\n\nconst ContentRect = (target: Element): Readonly<ContentRect> => {\n    if ('getBBox' in (target as SVGGraphicsElement)) {\n        const box = (target as SVGGraphicsElement).getBBox();\n        return Object.freeze({\n            height: box.height,\n            left: 0,\n            top: 0,\n            width: box.width,\n        });\n    } else { // if (target instanceof HTMLElement) { // also includes all other non-SVGGraphicsElements\n        const styles = window.getComputedStyle(target);\n        return Object.freeze({\n            height: parseFloat(styles.height || '0'),\n            left: parseFloat(styles.paddingLeft || '0'),\n            top: parseFloat(styles.paddingTop || '0'),\n            width: parseFloat(styles.width || '0'),\n        });\n    }\n};\n\nexport { ContentRect };\n","import { ContentRect } from './ContentRect';\n\nclass ResizeObservation {\n    public readonly target: Element;\n\n    /** @internal */\n    public $$broadcastWidth: number;\n    /** @internal */\n    public $$broadcastHeight: number;\n\n    public get broadcastWidth(): number {\n        return this.$$broadcastWidth;\n    }\n    public get broadcastHeight(): number {\n        return this.$$broadcastHeight;\n    }\n\n    constructor(target: Element) {\n        this.target = target;\n        this.$$broadcastWidth = this.$$broadcastHeight = 0;\n    }\n\n    public isActive(): boolean {\n        const cr = ContentRect(this.target);\n\n        return !!cr\n            && (\n                cr.width !== this.broadcastWidth\n                || cr.height !== this.broadcastHeight\n            );\n    }\n}\n\nexport { ResizeObservation };\n","import { ContentRect } from './ContentRect';\n\nclass ResizeObserverEntry {\n    public readonly target: Element;\n    public readonly contentRect: ContentRect;\n    constructor(target: Element) {\n        this.target = target;\n        this.contentRect = ContentRect(target);\n    }\n}\n\nexport { ResizeObserverEntry };\n","import { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverCallback } from './ResizeObserverCallback';\nimport { ResizeObserverEntry } from './ResizeObserverEntry';\n\nconst resizeObservers = [] as ResizeObserver[];\n\nclass ResizeObserver {\n    /** @internal */\n    public $$callback: ResizeObserverCallback;\n    /** @internal */\n    public $$observationTargets = [] as ResizeObservation[];\n    /** @internal */\n    public $$activeTargets = [] as ResizeObservation[];\n    /** @internal */\n    public $$skippedTargets = [] as ResizeObservation[];\n\n    constructor(callback: ResizeObserverCallback) {\n        const message = callbackGuard(callback);\n        if (message) {\n            throw TypeError(message);\n        }\n        this.$$callback = callback;\n        resizeObservers.push(this);\n    }\n\n    public observe(target: Element) {\n        const message = targetGuard('observe', target);\n        if (message) {\n            throw TypeError(message);\n        }\n        const index = findTargetIndex(this.$$observationTargets, target);\n        if (index > 0) {\n            return;\n        }\n        this.$$observationTargets.push(new ResizeObservation(target));\n        startLoop();\n    }\n\n    public unobserve(target: Element) {\n        const message = targetGuard('unobserve', target);\n        if (message) {\n            throw TypeError(message);\n        }\n        const index = findTargetIndex(this.$$observationTargets, target);\n        if (index < 0) {\n            return;\n        }\n        this.$$observationTargets.splice(index, 1);\n        checkStopLoop();\n    }\n\n    public disconnect() {\n        this.$$observationTargets = [];\n        this.$$activeTargets = [];\n    }\n}\n\nfunction callbackGuard(callback: ResizeObserverCallback) {\n    if (typeof(callback) === 'undefined') {\n        return `Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.`;\n    }\n    if (typeof(callback) !== 'function') {\n        return `Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.`;\n    }\n}\n\nfunction targetGuard(functionName: string, target: Element) {\n    if (typeof(target) === 'undefined') {\n        return `Failed to execute '${functionName}' on 'ResizeObserver': 1 argument required, but only 0 present.`;\n    }\n    if (!(target instanceof (window as any).Element)) {\n        return `Failed to execute '${functionName}' on 'ResizeObserver': parameter 1 is not of type 'Element'.`;\n    }\n}\n\nfunction findTargetIndex(collection: ResizeObservation[], target: Element) {\n    for (let index = 0; index < collection.length; index += 1) {\n        if (collection[index].target === target) {\n            return index;\n        }\n    }\n    return -1;\n}\n\nconst gatherActiveObservationsAtDepth = (depth: number): void => {\n    resizeObservers.forEach((ro) => {\n        ro.$$activeTargets = [];\n        ro.$$skippedTargets = [];\n        ro.$$observationTargets.forEach((ot) => {\n            if (ot.isActive()) {\n                const targetDepth = calculateDepthForNode(ot.target);\n                if (targetDepth > depth) {\n                    ro.$$activeTargets.push(ot);\n                } else {\n                    ro.$$skippedTargets.push(ot);\n                }\n            }\n        });\n    });\n};\n\nconst hasActiveObservations = (): boolean =>\n    resizeObservers.some((ro) => !!ro.$$activeTargets.length);\n\nconst hasSkippedObservations = (): boolean =>\n    resizeObservers.some((ro) => !!ro.$$skippedTargets.length);\n\nconst broadcastActiveObservations = (): number => {\n    let shallowestTargetDepth = Infinity;\n    resizeObservers.forEach((ro) => {\n        if (!ro.$$activeTargets.length) {\n            return;\n        }\n\n        const entries = [] as ResizeObserverEntry[];\n        ro.$$activeTargets.forEach((obs) => {\n            const entry = new ResizeObserverEntry(obs.target);\n            entries.push(entry);\n            obs.$$broadcastWidth = entry.contentRect.width;\n            obs.$$broadcastHeight = entry.contentRect.height;\n            const targetDepth = calculateDepthForNode(obs.target);\n            if (targetDepth < shallowestTargetDepth) {\n                shallowestTargetDepth = targetDepth;\n            }\n        });\n\n        ro.$$callback(entries, ro);\n        ro.$$activeTargets = [];\n    });\n\n    return shallowestTargetDepth;\n};\n\nconst deliverResizeLoopErrorNotification = () => {\n    const errorEvent = new (window as any).ErrorEvent('ResizeLoopError', {\n        message: 'ResizeObserver loop completed with undelivered notifications.',\n    });\n\n    window.dispatchEvent(errorEvent);\n};\n\nconst calculateDepthForNode = (target: Node): number => {\n    let depth = 0;\n    while (target.parentNode) {\n        target = target.parentNode;\n        depth += 1;\n    }\n    return depth;\n};\n\nconst notificationIteration = () => {\n    let depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n\n    if (hasSkippedObservations()) {\n        deliverResizeLoopErrorNotification();\n    }\n};\n\nlet animationFrameCancelToken: undefined | number;\n\nconst startLoop = () => {\n    if (animationFrameCancelToken) return;\n\n    runLoop();\n};\n\nconst runLoop = () => {\n    animationFrameCancelToken = window.requestAnimationFrame(() => {\n        notificationIteration();\n        runLoop();\n    });\n};\n\nconst checkStopLoop = () => {\n    if (animationFrameCancelToken && !resizeObservers.some((ro) => !!ro.$$observationTargets.length)) {\n        window.cancelAnimationFrame(animationFrameCancelToken);\n        animationFrameCancelToken = undefined;\n    }\n};\n\nconst install = () =>\n    (window as any).ResizeObserver = ResizeObserver;\n\nexport {\n    install,\n    ResizeObserver,\n};\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly constants.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.constants');\n\n/**\n * The multiplier for scroll wheel deltas using the line delta mode.\n * @type {number}\n */\nBlockly.LINE_MODE_MULTIPLIER = 40;\n\n/**\n * The multiplier for scroll wheel deltas using the page delta mode.\n * @type {number}\n */\nBlockly.PAGE_MODE_MULTIPLIER = 125;\n\n/**\n * Number of pixels the mouse must move before a drag starts.\n */\nBlockly.DRAG_RADIUS = 5;\n\n/**\n * Number of pixels the mouse must move before a drag/scroll starts from the\n * flyout.  Because the drag-intention is determined when this is reached, it is\n * larger than Blockly.DRAG_RADIUS so that the drag-direction is clearer.\n */\nBlockly.FLYOUT_DRAG_RADIUS = 10;\n\n/**\n * Maximum misalignment between connections for them to snap together.\n */\nBlockly.SNAP_RADIUS = 28;\n\n/**\n * Maximum misalignment between connections for them to snap together,\n * when a connection is already highlighted.\n */\nBlockly.CONNECTING_SNAP_RADIUS = Blockly.SNAP_RADIUS;\n\n/**\n * How much to prefer staying connected to the current connection over moving to\n * a new connection.  The current previewed connection is considered to be this\n * much closer to the matching connection on the block than it actually is.\n */\nBlockly.CURRENT_CONNECTION_PREFERENCE = 8;\n\n/**\n * Delay in ms between trigger and bumping unconnected block out of alignment.\n */\nBlockly.BUMP_DELAY = 250;\n\n/**\n * Maximum randomness in workspace units for bumping a block.\n */\nBlockly.BUMP_RANDOMNESS = 10;\n\n/**\n * Number of characters to truncate a collapsed block to.\n */\nBlockly.COLLAPSE_CHARS = 30;\n\n/**\n * Length in ms for a touch to become a long press.\n */\nBlockly.LONGPRESS = 750;\n\n/**\n * Prevent a sound from playing if another sound preceded it within this many\n * milliseconds.\n */\nBlockly.SOUND_LIMIT = 100;\n\n/**\n * When dragging a block out of a stack, split the stack in two (true), or drag\n * out the block healing the stack (false).\n */\nBlockly.DRAG_STACK = true;\n\n/**\n * The richness of block colours, regardless of the hue.\n * Must be in the range of 0 (inclusive) to 1 (exclusive).\n */\nBlockly.HSV_SATURATION = 0.45;\n\n/**\n * The intensity of block colours, regardless of the hue.\n * Must be in the range of 0 (inclusive) to 1 (exclusive).\n */\nBlockly.HSV_VALUE = 0.65;\n\n/**\n * Sprited icons and images.\n */\nBlockly.SPRITE = {\n  width: 96,\n  height: 124,\n  url: 'sprites.png'\n};\n\n// Constants below this point are not intended to be changed.\n\n/**\n * ENUM for a right-facing value input.  E.g. 'set item to' or 'return'.\n * @const\n */\nBlockly.INPUT_VALUE = 1;\n\n/**\n * ENUM for a left-facing value output.  E.g. 'random fraction'.\n * @const\n */\nBlockly.OUTPUT_VALUE = 2;\n\n/**\n * ENUM for a down-facing block stack.  E.g. 'if-do' or 'else'.\n * @const\n */\nBlockly.NEXT_STATEMENT = 3;\n\n/**\n * ENUM for an up-facing block stack.  E.g. 'break out of loop'.\n * @const\n */\nBlockly.PREVIOUS_STATEMENT = 4;\n\n/**\n * ENUM for an dummy input.  Used to add field(s) with no input.\n * @const\n */\nBlockly.DUMMY_INPUT = 5;\n\n/**\n * ENUM for left alignment.\n * @const\n */\nBlockly.ALIGN_LEFT = -1;\n\n/**\n * ENUM for centre alignment.\n * @const\n */\nBlockly.ALIGN_CENTRE = 0;\n\n/**\n * ENUM for right alignment.\n * @const\n */\nBlockly.ALIGN_RIGHT = 1;\n\n/**\n * ENUM for no drag operation.\n * @const\n */\nBlockly.DRAG_NONE = 0;\n\n/**\n * ENUM for inside the sticky DRAG_RADIUS.\n * @const\n */\nBlockly.DRAG_STICKY = 1;\n\n/**\n * ENUM for inside the non-sticky DRAG_RADIUS, for differentiating between\n * clicks and drags.\n * @const\n */\nBlockly.DRAG_BEGIN = 1;\n\n/**\n * ENUM for freely draggable (outside the DRAG_RADIUS, if one applies).\n * @const\n */\nBlockly.DRAG_FREE = 2;\n\n/**\n * Lookup table for determining the opposite type of a connection.\n * @const\n */\nBlockly.OPPOSITE_TYPE = [];\nBlockly.OPPOSITE_TYPE[Blockly.INPUT_VALUE] = Blockly.OUTPUT_VALUE;\nBlockly.OPPOSITE_TYPE[Blockly.OUTPUT_VALUE] = Blockly.INPUT_VALUE;\nBlockly.OPPOSITE_TYPE[Blockly.NEXT_STATEMENT] = Blockly.PREVIOUS_STATEMENT;\nBlockly.OPPOSITE_TYPE[Blockly.PREVIOUS_STATEMENT] = Blockly.NEXT_STATEMENT;\n\n\n/**\n * ENUM for toolbox and flyout at top of screen.\n * @const\n */\nBlockly.TOOLBOX_AT_TOP = 0;\n\n/**\n * ENUM for toolbox and flyout at bottom of screen.\n * @const\n */\nBlockly.TOOLBOX_AT_BOTTOM = 1;\n\n/**\n * ENUM for toolbox and flyout at left of screen.\n * @const\n */\nBlockly.TOOLBOX_AT_LEFT = 2;\n\n/**\n * ENUM for toolbox and flyout at right of screen.\n * @const\n */\nBlockly.TOOLBOX_AT_RIGHT = 3;\n\n/**\n * ENUM representing that an event is not in any delete areas.\n * Null for backwards compatibility reasons.\n * @const\n */\nBlockly.DELETE_AREA_NONE = null;\n\n/**\n * ENUM representing that an event is in the delete area of the trash can.\n * @const\n */\nBlockly.DELETE_AREA_TRASH = 1;\n\n/**\n * ENUM representing that an event is in the delete area of the toolbox or\n * flyout.\n * @const\n */\nBlockly.DELETE_AREA_TOOLBOX = 2;\n\n/**\n * String for use in the \"custom\" attribute of a category in toolbox XML.\n * This string indicates that the category should be dynamically populated with\n * variable blocks.\n * @const {string}\n */\nBlockly.VARIABLE_CATEGORY_NAME = 'VARIABLE';\n/**\n * String for use in the \"custom\" attribute of a category in toolbox XML.\n * This string indicates that the category should be dynamically populated with\n * variable blocks.\n * @const {string}\n */\nBlockly.VARIABLE_DYNAMIC_CATEGORY_NAME = 'VARIABLE_DYNAMIC';\n\n/**\n * String for use in the \"custom\" attribute of a category in toolbox XML.\n * This string indicates that the category should be dynamically populated with\n * procedure blocks.\n * @const {string}\n */\nBlockly.PROCEDURE_CATEGORY_NAME = 'PROCEDURE';\n\n/**\n * String for use in the dropdown created in field_variable.\n * This string indicates that this option in the dropdown is 'Rename\n * variable...' and if selected, should trigger the prompt to rename a variable.\n * @const {string}\n */\nBlockly.RENAME_VARIABLE_ID = 'RENAME_VARIABLE_ID';\n\n/**\n * String for use in the dropdown created in field_variable.\n * This string indicates that this option in the dropdown is 'Delete the \"%1\"\n * variable' and if selected, should trigger the prompt to delete a variable.\n * @const {string}\n */\nBlockly.DELETE_VARIABLE_ID = 'DELETE_VARIABLE_ID';\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview This file is a universal registry that provides generic methods\n *    for registering and unregistering different types of classes.\n * @author aschmiedt@google.com (Abby Schmiedt)\n */\n'use strict';\n\ngoog.provide('Blockly.registry');\n\ngoog.requireType('Blockly.blockRendering.Renderer');\ngoog.requireType('Blockly.Events.Abstract');\ngoog.requireType('Blockly.Field');\ngoog.requireType('Blockly.IConnectionChecker');\ngoog.requireType('Blockly.IFlyout');\ngoog.requireType('Blockly.IToolbox');\ngoog.requireType('Blockly.Theme');\n\n\n/**\n * A map of maps. With the keys being the type and name of the class we are\n * registering and the value being the constructor function.\n * e.g. {'field': {'field_angle': Blockly.FieldAngle}}\n *\n * @type {Object<string, Object<string, function(new:?)>>}\n */\nBlockly.registry.typeMap_ = {};\n\n/**\n * The string used to register the default class for a type of plugin.\n * @type {string}\n */\nBlockly.registry.DEFAULT = 'default';\n\n/**\n * A name with the type of the element stored in the generic.\n * @param {string} name The name of the registry type.\n * @constructor\n * @template T\n */\nBlockly.registry.Type = function(name) {\n  /**\n   * @type {string}\n   * @private\n   */\n  this.name_ = name;\n};\n\n/**\n * Returns the name of the type.\n * @return {string} The name.\n * @override\n */\nBlockly.registry.Type.prototype.toString = function() {\n  return this.name_;\n};\n\n/** @type {!Blockly.registry.Type<Blockly.IConnectionChecker>} */\nBlockly.registry.Type.CONNECTION_CHECKER =\n    new Blockly.registry.Type('connectionChecker');\n\n/** @type {!Blockly.registry.Type<Blockly.Events.Abstract>} */\nBlockly.registry.Type.EVENT = new Blockly.registry.Type('event');\n\n/** @type {!Blockly.registry.Type<Blockly.Field>} */\nBlockly.registry.Type.FIELD = new Blockly.registry.Type('field');\n\n/** @type {!Blockly.registry.Type<Blockly.blockRendering.Renderer>} */\nBlockly.registry.Type.RENDERER = new Blockly.registry.Type('renderer');\n\n/** @type {!Blockly.registry.Type<Blockly.IToolbox>} */\nBlockly.registry.Type.TOOLBOX = new Blockly.registry.Type('toolbox');\n\n/** @type {!Blockly.registry.Type<Blockly.Theme>} */\nBlockly.registry.Type.THEME = new Blockly.registry.Type('theme');\n\n/** @type {!Blockly.registry.Type<Blockly.ToolboxItem>} */\nBlockly.registry.Type.TOOLBOX_ITEM = new Blockly.registry.Type('toolboxItem');\n\n/** @type {!Blockly.registry.Type<Blockly.IFlyout>} */\nBlockly.registry.Type.FLYOUTS_VERTICAL_TOOLBOX =\n    new Blockly.registry.Type('flyoutsVerticalToolbox');\n\n/** @type {!Blockly.registry.Type<Blockly.IFlyout>} */\nBlockly.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX =\n    new Blockly.registry.Type('flyoutsHorizontalToolbox');\n\n/**\n * Registers a class based on a type and name.\n * @param {string|!Blockly.registry.Type<T>} type The type of the plugin.\n *     (e.g. Field, Renderer)\n * @param {string} name The plugin's name. (Ex. field_angle, geras)\n * @param {?function(new:T, ...?)|Object} registryItem The class or object to\n *     register.\n * @param {boolean=} opt_quiet True to prevent an error when overriding an\n *     already registered item.\n * @throws {Error} if the type or name is empty, a name with the given type has\n *     already been registered, or if the given class or object is not valid for it's type.\n * @template T\n */\nBlockly.registry.register = function(type, name, registryItem, opt_quiet) {\n  if ((!(type instanceof Blockly.registry.Type) && typeof type != 'string') || String(type).trim() == '') {\n    throw Error('Invalid type \"' + type + '\". The type must be a' +\n      ' non-empty string or a Blockly.registry.Type.');\n  }\n  type = String(type).toLowerCase();\n\n  if ((typeof name != 'string') || (name.trim() == '')) {\n    throw Error('Invalid name \"' + name + '\". The name must be a' +\n      ' non-empty string.');\n  }\n  name = name.toLowerCase();\n  if (!registryItem) {\n    throw Error('Can not register a null value');\n  }\n  var typeRegistry = Blockly.registry.typeMap_[type];\n  // If the type registry has not been created, create it.\n  if (!typeRegistry) {\n    typeRegistry = Blockly.registry.typeMap_[type] = {};\n  }\n\n  // Validate that the given class has all the required properties.\n  Blockly.registry.validate_(type, registryItem);\n\n  // Don't throw an error if opt_quiet is true.\n  if (!opt_quiet && typeRegistry[name]) {\n    throw Error('Name \"' + name + '\" with type \"' + type + '\" already registered.');\n  }\n  typeRegistry[name] = registryItem;\n};\n\n/**\n * Checks the given registry item for properties that are required based on the\n * type.\n * @param {string} type The type of the plugin. (e.g. Field, Renderer)\n * @param {Function|Object} registryItem A class or object that we are checking\n *     for the required properties.\n * @private\n */\nBlockly.registry.validate_ = function(type, registryItem) {\n  switch (type) {\n    case String(Blockly.registry.Type.FIELD):\n      if (typeof registryItem.fromJson != 'function') {\n        throw Error('Type \"' + type + '\" must have a fromJson function');\n      }\n      break;\n  }\n};\n\n/**\n * Unregisters the registry item with the given type and name.\n * @param {string|!Blockly.registry.Type<T>} type The type of the plugin.\n *     (e.g. Field, Renderer)\n * @param {string} name The plugin's name. (Ex. field_angle, geras)\n * @template T\n */\nBlockly.registry.unregister = function(type, name) {\n  type = String(type).toLowerCase();\n  name = name.toLowerCase();\n  var typeRegistry = Blockly.registry.typeMap_[type];\n  if (!typeRegistry) {\n    console.warn('No type \"' + type + '\" found');\n    return;\n  }\n  if (!typeRegistry[name]) {\n    console.warn('No name \"' + name + '\" with type \"' + type + '\" found');\n    return;\n  }\n  delete Blockly.registry.typeMap_[type][name];\n};\n\n/**\n * Gets the registry item for the given name and type. This can be either a\n * class or an object.\n * @param {string|!Blockly.registry.Type<T>} type The type of the plugin.\n *     (e.g. Field, Renderer)\n * @param {string} name The plugin's name. (Ex. field_angle, geras)\n * @return {?function(new:T, ...?)|Object} The class or object with the given\n *     name and type or null if none exists.\n * @template T\n */\nBlockly.registry.getItem_ = function(type, name) {\n  type = String(type).toLowerCase();\n  name = name.toLowerCase();\n  var typeRegistry = Blockly.registry.typeMap_[type];\n  if (!typeRegistry) {\n    console.warn('No type \"' + type + '\" found');\n    return null;\n  }\n  if (!typeRegistry[name]) {\n    console.warn('No name \"' + name + '\" with type \"' + type + '\" found');\n    return null;\n  }\n  return typeRegistry[name];\n};\n\n/**\n * Returns whether or not the registry contains an item with the given type and\n * name.\n * @param {string|!Blockly.registry.Type<T>} type The type of the plugin.\n *     (e.g. Field, Renderer)\n * @param {string} name The plugin's name. (Ex. field_angle, geras)\n * @return {boolean} True if the registry has an item with the given type and\n *     name, false otherwise.\n * @template T\n */\nBlockly.registry.hasItem = function(type, name) {\n  type = String(type).toLowerCase();\n  name = name.toLowerCase();\n  var typeRegistry = Blockly.registry.typeMap_[type];\n  if (!typeRegistry) {\n    return false;\n  }\n  return !!(typeRegistry[name]);\n};\n\n/**\n * Gets the class for the given name and type.\n * @param {string|!Blockly.registry.Type<T>} type The type of the plugin.\n *     (e.g. Field, Renderer)\n * @param {string} name The plugin's name. (Ex. field_angle, geras)\n * @return {?function(new:T, ...?)} The class with the given name and type or\n *     null if none exists.\n * @template T\n */\nBlockly.registry.getClass = function(type, name) {\n  return /** @type {?function(new:T, ...?)} */ (Blockly.registry.getItem_(type, name));\n};\n\n/**\n * Gets the object for the given name and type.\n * @param {string|!Blockly.registry.Type<T>} type The type of the plugin.\n *     (e.g. Category)\n * @param {string} name The plugin's name. (Ex. logic_category)\n * @returns {T} The object with the given name and type or null if none exists.\n * @template T\n */\nBlockly.registry.getObject = function(type, name) {\n  return /** @type {T} */ (Blockly.registry.getItem_(type, name));\n};\n\n/**\n * Gets the class from Blockly options for the given type.\n * This is used for plugins that override a built in feature. (e.g. Toolbox)\n * @param {!Blockly.registry.Type<T>} type The type of the plugin.\n * @param {!Blockly.Options} options The option object to check for the given\n *     plugin.\n * @return {?function(new:T, ...?)} The class for the plugin.\n * @template T\n */\nBlockly.registry.getClassFromOptions = function(type, options) {\n  var typeName = type.toString();\n  var plugin = options.plugins[typeName] || Blockly.registry.DEFAULT;\n\n  // If the user passed in a plugin class instead of a registered plugin name.\n  if (typeof plugin == 'function') {\n    return plugin;\n  }\n  return Blockly.registry.getClass(type, plugin);\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Provides a reference to the global object.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\n/**\n * @name Blockly.utils.global\n * @namespace\n */\ngoog.provide('Blockly.utils.global');\n\n\n/**\n * Reference to the global object.\n *\n * More info on this implementation here:\n * https://docs.google.com/document/d/1NAeW4Wk7I7FV0Y2tcUFvQdGMc89k2vdgSXInw8_nvCI/edit\n */\nBlockly.utils.global = function() {\n  if (typeof self === 'object') {\n    return self;\n  }\n  if (typeof window === 'object') {\n    return window;\n  }\n  if (typeof global === 'object') {\n    return global;\n  }\n  return this;\n}();\n","/**\n * @license\n * Copyright 2013 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Empty name space for the Message singleton.\n * @author scr@google.com (Sheridan Rawlins)\n */\n'use strict';\n\n/**\n * Name space for the Msg singleton.\n * Msg gets populated in the message files.\n */\ngoog.provide('Blockly.Msg');\n\ngoog.require('Blockly.utils.global');\n\n\n/**\n * Exported so that if Blockly is compiled with ADVANCED_COMPILATION,\n * the Blockly.Msg object exists for message files included in script tags.\n */\nif (!Blockly.utils.global['Blockly']) {\n  Blockly.utils.global['Blockly'] = {};\n}\nif (!Blockly.utils.global['Blockly']['Msg']) {\n  Blockly.utils.global['Blockly']['Msg'] = Blockly.Msg;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for colour manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.utils.colour\n * @namespace\n */\ngoog.provide('Blockly.utils.colour');\n\n\n/**\n * Parses a colour from a string.\n * .parse('red') -> '#ff0000'\n * .parse('#f00') -> '#ff0000'\n * .parse('#ff0000') -> '#ff0000'\n * .parse('0xff0000') -> '#ff0000'\n * .parse('rgb(255, 0, 0)') -> '#ff0000'\n * @param {string|number} str Colour in some CSS format.\n * @return {?string} A string containing a hex representation of the colour,\n *   or null if can't be parsed.\n */\nBlockly.utils.colour.parse = function(str) {\n  str = String(str).toLowerCase().trim();\n  var hex = Blockly.utils.colour.names[str];\n  if (hex) {\n    // e.g. 'red'\n    return hex;\n  }\n  hex = str.substring(0, 2) == '0x' ? '#' + str.substring(2) : str;\n  hex = hex[0] == '#' ? hex : '#' + hex;\n  if (/^#[0-9a-f]{6}$/.test(hex)) {\n    // e.g. '#00ff88'\n    return hex;\n  }\n  if (/^#[0-9a-f]{3}$/.test(hex)) {\n    // e.g. '#0f8'\n    return ['#', hex[1], hex[1], hex[2], hex[2], hex[3], hex[3]].join('');\n  }\n  var rgb = str.match(/^(?:rgb)?\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/);\n  if (rgb) {\n    // e.g. 'rgb(0, 128, 255)'\n    var r = Number(rgb[1]);\n    var g = Number(rgb[2]);\n    var b = Number(rgb[3]);\n    if (r >= 0 && r < 256 && g >= 0 && g < 256 && b >= 0 && b < 256) {\n      return Blockly.utils.colour.rgbToHex(r, g, b);\n    }\n  }\n  return null;\n};\n\n/**\n * Converts a colour from RGB to hex representation.\n * @param {number} r Amount of red, int between 0 and 255.\n * @param {number} g Amount of green, int between 0 and 255.\n * @param {number} b Amount of blue, int between 0 and 255.\n * @return {string} Hex representation of the colour.\n */\nBlockly.utils.colour.rgbToHex = function(r, g, b) {\n  var rgb = (r << 16) | (g << 8) | b;\n  if (r < 0x10) {\n    return '#' + (0x1000000 | rgb).toString(16).substr(1);\n  }\n  return '#' + rgb.toString(16);\n};\n\n/**\n * Converts a colour to RGB.\n * @param {string} colour String representing colour in any\n *     colour format ('#ff0000', 'red', '0xff000', etc).\n * @return {!Array.<number>} RGB representation of the colour.\n */\nBlockly.utils.colour.hexToRgb = function(colour) {\n  var hex = Blockly.utils.colour.parse(colour);\n  if (!hex) {\n    return [0, 0, 0];\n  }\n\n  var rgb = parseInt(hex.substr(1), 16);\n  var r = rgb >> 16;\n  var g = (rgb >> 8) & 255;\n  var b = rgb & 255;\n\n  return [r, g, b];\n};\n\n/**\n * Converts an HSV triplet to hex representation.\n * @param {number} h Hue value in [0, 360].\n * @param {number} s Saturation value in [0, 1].\n * @param {number} v Brightness in [0, 255].\n * @return {string} Hex representation of the colour.\n */\nBlockly.utils.colour.hsvToHex = function(h, s, v) {\n  var red = 0;\n  var green = 0;\n  var blue = 0;\n  if (s == 0) {\n    red = v;\n    green = v;\n    blue = v;\n  } else {\n    var sextant = Math.floor(h / 60);\n    var remainder = (h / 60) - sextant;\n    var val1 = v * (1 - s);\n    var val2 = v * (1 - (s * remainder));\n    var val3 = v * (1 - (s * (1 - remainder)));\n    switch (sextant) {\n      case 1:\n        red = val2;\n        green = v;\n        blue = val1;\n        break;\n      case 2:\n        red = val1;\n        green = v;\n        blue = val3;\n        break;\n      case 3:\n        red = val1;\n        green = val2;\n        blue = v;\n        break;\n      case 4:\n        red = val3;\n        green = val1;\n        blue = v;\n        break;\n      case 5:\n        red = v;\n        green = val1;\n        blue = val2;\n        break;\n      case 6:\n      case 0:\n        red = v;\n        green = val3;\n        blue = val1;\n        break;\n    }\n  }\n  return Blockly.utils.colour.rgbToHex(\n      Math.floor(red), Math.floor(green), Math.floor(blue));\n};\n\n/**\n * Blend two colours together, using the specified factor to indicate the\n * weight given to the first colour.\n * @param {string} colour1 First colour.\n * @param {string} colour2 Second colour.\n * @param {number} factor The weight to be given to colour1 over colour2.\n *     Values should be in the range [0, 1].\n * @return {?string} Combined colour represented in hex.\n */\nBlockly.utils.colour.blend = function(colour1, colour2, factor) {\n  var hex1 = Blockly.utils.colour.parse(colour1);\n  if (!hex1) {\n    return null;\n  }\n  var hex2 = Blockly.utils.colour.parse(colour2);\n  if (!hex2) {\n    return null;\n  }\n  var rgb1 = Blockly.utils.colour.hexToRgb(hex1);\n  var rgb2 = Blockly.utils.colour.hexToRgb(hex2);\n  var r = Math.round(rgb2[0] + factor * (rgb1[0] - rgb2[0]));\n  var g = Math.round(rgb2[1] + factor * (rgb1[1] - rgb2[1]));\n  var b = Math.round(rgb2[2] + factor * (rgb1[2] - rgb2[2]));\n  return Blockly.utils.colour.rgbToHex(r, g, b);\n};\n\n/**\n * A map that contains the 16 basic colour keywords as defined by W3C:\n * https://www.w3.org/TR/2018/REC-css-color-3-20180619/#html4\n * The keys of this map are the lowercase \"readable\" names of the colours,\n * while the values are the \"hex\" values.\n *\n * @type {!Object<string, string>}\n */\nBlockly.utils.colour.names = {\n  'aqua': '#00ffff',\n  'black': '#000000',\n  'blue': '#0000ff',\n  'fuchsia': '#ff00ff',\n  'gray': '#808080',\n  'green': '#008000',\n  'lime': '#00ff00',\n  'maroon': '#800000',\n  'navy': '#000080',\n  'olive': '#808000',\n  'purple': '#800080',\n  'red': '#ff0000',\n  'silver': '#c0c0c0',\n  'teal': '#008080',\n  'white': '#ffffff',\n  'yellow': '#ffff00'\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for coordinate manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.utils.Coordinate\n * @namespace\n */\ngoog.provide('Blockly.utils.Coordinate');\n\n\n/**\n * Class for representing coordinates and positions.\n * @param {number} x Left.\n * @param {number} y Top.\n * @struct\n * @constructor\n */\nBlockly.utils.Coordinate = function(x, y) {\n  /**\n   * X-value\n   * @type {number}\n   */\n  this.x = x;\n\n  /**\n   * Y-value\n   * @type {number}\n   */\n  this.y = y;\n};\n\n/**\n * Compares coordinates for equality.\n * @param {Blockly.utils.Coordinate} a A Coordinate.\n * @param {Blockly.utils.Coordinate} b A Coordinate.\n * @return {boolean} True iff the coordinates are equal, or if both are null.\n */\nBlockly.utils.Coordinate.equals = function(a, b) {\n  if (a == b) {\n    return true;\n  }\n  if (!a || !b) {\n    return false;\n  }\n  return a.x == b.x && a.y == b.y;\n};\n\n/**\n * Returns the distance between two coordinates.\n * @param {!Blockly.utils.Coordinate} a A Coordinate.\n * @param {!Blockly.utils.Coordinate} b A Coordinate.\n * @return {number} The distance between `a` and `b`.\n */\nBlockly.utils.Coordinate.distance = function(a, b) {\n  var dx = a.x - b.x;\n  var dy = a.y - b.y;\n  return Math.sqrt(dx * dx + dy * dy);\n};\n\n/**\n * Returns the magnitude of a coordinate.\n * @param {!Blockly.utils.Coordinate} a A Coordinate.\n * @return {number} The distance between the origin and `a`.\n */\nBlockly.utils.Coordinate.magnitude = function(a) {\n  return Math.sqrt(a.x * a.x + a.y * a.y);\n};\n\n/**\n * Returns the difference between two coordinates as a new\n * Blockly.utils.Coordinate.\n * @param {!Blockly.utils.Coordinate|!SVGPoint} a An x/y coordinate.\n * @param {!Blockly.utils.Coordinate|!SVGPoint} b An x/y coordinate.\n * @return {!Blockly.utils.Coordinate} A Coordinate representing the difference\n *     between `a` and `b`.\n */\nBlockly.utils.Coordinate.difference = function(a, b) {\n  return new Blockly.utils.Coordinate(a.x - b.x, a.y - b.y);\n};\n\n/**\n * Returns the sum of two coordinates as a new Blockly.utils.Coordinate.\n * @param {!Blockly.utils.Coordinate|!SVGPoint} a An x/y coordinate.\n * @param {!Blockly.utils.Coordinate|!SVGPoint} b An x/y coordinate.\n * @return {!Blockly.utils.Coordinate} A Coordinate representing the sum of\n *     the two coordinates.\n */\nBlockly.utils.Coordinate.sum = function(a, b) {\n  return new Blockly.utils.Coordinate(a.x + b.x, a.y + b.y);\n};\n\n/**\n * Scales this coordinate by the given scale factor.\n * @param {number} s The scale factor to use for both x and y dimensions.\n * @return {!Blockly.utils.Coordinate} This coordinate after scaling.\n */\nBlockly.utils.Coordinate.prototype.scale = function(s) {\n  this.x *= s;\n  this.y *= s;\n  return this;\n};\n\n/**\n * Translates this coordinate by the given offsets.\n * respectively.\n * @param {number} tx The value to translate x by.\n * @param {number} ty The value to translate y by.\n * @return {!Blockly.utils.Coordinate} This coordinate after translating.\n */\nBlockly.utils.Coordinate.prototype.translate = function(tx, ty) {\n  this.x += tx;\n  this.y += ty;\n  return this;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for rectangle manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.utils.Rect\n * @namespace\n */\ngoog.provide('Blockly.utils.Rect');\n\n\n/**\n * Class for representing rectangular regions.\n * @param {number} top Top.\n * @param {number} bottom Bottom.\n * @param {number} left Left.\n * @param {number} right Right.\n * @struct\n * @constructor\n */\nBlockly.utils.Rect = function(top, bottom, left, right) {\n  /** @type {number} */\n  this.top = top;\n\n  /** @type {number} */\n  this.bottom = bottom;\n\n  /** @type {number} */\n  this.left = left;\n\n  /** @type {number} */\n  this.right = right;\n};\n\n/**\n * Tests whether this rectangle contains a x/y coordinate.\n *\n * @param {number} x The x coordinate to test for containment.\n * @param {number} y The y coordinate to test for containment.\n * @return {boolean} Whether this rectangle contains given coordinate.\n */\nBlockly.utils.Rect.prototype.contains = function(x, y) {\n  return x >= this.left && x <= this.right && y >= this.top && y <= this.bottom;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for string manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.utils.string\n * @namespace\n */\ngoog.provide('Blockly.utils.string');\n\n\n/**\n * Fast prefix-checker.\n * Copied from Closure's goog.string.startsWith.\n * @param {string} str The string to check.\n * @param {string} prefix A string to look for at the start of `str`.\n * @return {boolean} True if `str` begins with `prefix`.\n */\nBlockly.utils.string.startsWith = function(str, prefix) {\n  return str.lastIndexOf(prefix, 0) == 0;\n};\n\n/**\n * Given an array of strings, return the length of the shortest one.\n * @param {!Array.<string>} array Array of strings.\n * @return {number} Length of shortest string.\n */\nBlockly.utils.string.shortestStringLength = function(array) {\n  if (!array.length) {\n    return 0;\n  }\n  return array.reduce(function(a, b) {\n    return a.length < b.length ? a : b;\n  }).length;\n};\n\n/**\n * Given an array of strings, return the length of the common prefix.\n * Words may not be split.  Any space after a word is included in the length.\n * @param {!Array.<string>} array Array of strings.\n * @param {number=} opt_shortest Length of shortest string.\n * @return {number} Length of common prefix.\n */\nBlockly.utils.string.commonWordPrefix = function(array, opt_shortest) {\n  if (!array.length) {\n    return 0;\n  } else if (array.length == 1) {\n    return array[0].length;\n  }\n  var wordPrefix = 0;\n  var max = opt_shortest || Blockly.utils.string.shortestStringLength(array);\n  for (var len = 0; len < max; len++) {\n    var letter = array[0][len];\n    for (var i = 1; i < array.length; i++) {\n      if (letter != array[i][len]) {\n        return wordPrefix;\n      }\n    }\n    if (letter == ' ') {\n      wordPrefix = len + 1;\n    }\n  }\n  for (var i = 1; i < array.length; i++) {\n    var letter = array[i][len];\n    if (letter && letter != ' ') {\n      return wordPrefix;\n    }\n  }\n  return max;\n};\n\n/**\n * Given an array of strings, return the length of the common suffix.\n * Words may not be split.  Any space after a word is included in the length.\n * @param {!Array.<string>} array Array of strings.\n * @param {number=} opt_shortest Length of shortest string.\n * @return {number} Length of common suffix.\n */\nBlockly.utils.string.commonWordSuffix = function(array, opt_shortest) {\n  if (!array.length) {\n    return 0;\n  } else if (array.length == 1) {\n    return array[0].length;\n  }\n  var wordPrefix = 0;\n  var max = opt_shortest || Blockly.utils.string.shortestStringLength(array);\n  for (var len = 0; len < max; len++) {\n    var letter = array[0].substr(-len - 1, 1);\n    for (var i = 1; i < array.length; i++) {\n      if (letter != array[i].substr(-len - 1, 1)) {\n        return wordPrefix;\n      }\n    }\n    if (letter == ' ') {\n      wordPrefix = len + 1;\n    }\n  }\n  for (var i = 1; i < array.length; i++) {\n    var letter = array[i].charAt(array[i].length - len - 1);\n    if (letter && letter != ' ') {\n      return wordPrefix;\n    }\n  }\n  return max;\n};\n\n/**\n * Wrap text to the specified width.\n * @param {string} text Text to wrap.\n * @param {number} limit Width to wrap each line.\n * @return {string} Wrapped text.\n */\nBlockly.utils.string.wrap = function(text, limit) {\n  var lines = text.split('\\n');\n  for (var i = 0; i < lines.length; i++) {\n    lines[i] = Blockly.utils.string.wrapLine_(lines[i], limit);\n  }\n  return lines.join('\\n');\n};\n\n/**\n * Wrap single line of text to the specified width.\n * @param {string} text Text to wrap.\n * @param {number} limit Width to wrap each line.\n * @return {string} Wrapped text.\n * @private\n */\nBlockly.utils.string.wrapLine_ = function(text, limit) {\n  if (text.length <= limit) {\n    // Short text, no need to wrap.\n    return text;\n  }\n  // Split the text into words.\n  var words = text.trim().split(/\\s+/);\n  // Set limit to be the length of the largest word.\n  for (var i = 0; i < words.length; i++) {\n    if (words[i].length > limit) {\n      limit = words[i].length;\n    }\n  }\n\n  var lastScore;\n  var score = -Infinity;\n  var lastText;\n  var lineCount = 1;\n  do {\n    lastScore = score;\n    lastText = text;\n    // Create a list of booleans representing if a space (false) or\n    // a break (true) appears after each word.\n    var wordBreaks = [];\n    // Seed the list with evenly spaced linebreaks.\n    var steps = words.length / lineCount;\n    var insertedBreaks = 1;\n    for (var i = 0; i < words.length - 1; i++) {\n      if (insertedBreaks < (i + 1.5) / steps) {\n        insertedBreaks++;\n        wordBreaks[i] = true;\n      } else {\n        wordBreaks[i] = false;\n      }\n    }\n    wordBreaks = Blockly.utils.string.wrapMutate_(words, wordBreaks, limit);\n    score = Blockly.utils.string.wrapScore_(words, wordBreaks, limit);\n    text = Blockly.utils.string.wrapToText_(words, wordBreaks);\n    lineCount++;\n  } while (score > lastScore);\n  return lastText;\n};\n\n/**\n * Compute a score for how good the wrapping is.\n * @param {!Array.<string>} words Array of each word.\n * @param {!Array.<boolean>} wordBreaks Array of line breaks.\n * @param {number} limit Width to wrap each line.\n * @return {number} Larger the better.\n * @private\n */\nBlockly.utils.string.wrapScore_ = function(words, wordBreaks, limit) {\n  // If this function becomes a performance liability, add caching.\n  // Compute the length of each line.\n  var lineLengths = [0];\n  var linePunctuation = [];\n  for (var i = 0; i < words.length; i++) {\n    lineLengths[lineLengths.length - 1] += words[i].length;\n    if (wordBreaks[i] === true) {\n      lineLengths.push(0);\n      linePunctuation.push(words[i].charAt(words[i].length - 1));\n    } else if (wordBreaks[i] === false) {\n      lineLengths[lineLengths.length - 1]++;\n    }\n  }\n  var maxLength = Math.max.apply(Math, lineLengths);\n\n  var score = 0;\n  for (var i = 0; i < lineLengths.length; i++) {\n    // Optimize for width.\n    // -2 points per char over limit (scaled to the power of 1.5).\n    score -= Math.pow(Math.abs(limit - lineLengths[i]), 1.5) * 2;\n    // Optimize for even lines.\n    // -1 point per char smaller than max (scaled to the power of 1.5).\n    score -= Math.pow(maxLength - lineLengths[i], 1.5);\n    // Optimize for structure.\n    // Add score to line endings after punctuation.\n    if ('.?!'.indexOf(linePunctuation[i]) != -1) {\n      score += limit / 3;\n    } else if (',;)]}'.indexOf(linePunctuation[i]) != -1) {\n      score += limit / 4;\n    }\n  }\n  // All else being equal, the last line should not be longer than the\n  // previous line.  For example, this looks wrong:\n  // aaa bbb\n  // ccc ddd eee\n  if (lineLengths.length > 1 && lineLengths[lineLengths.length - 1] <=\n      lineLengths[lineLengths.length - 2]) {\n    score += 0.5;\n  }\n  return score;\n};\n\n/**\n * Mutate the array of line break locations until an optimal solution is found.\n * No line breaks are added or deleted, they are simply moved around.\n * @param {!Array.<string>} words Array of each word.\n * @param {!Array.<boolean>} wordBreaks Array of line breaks.\n * @param {number} limit Width to wrap each line.\n * @return {!Array.<boolean>} New array of optimal line breaks.\n * @private\n */\nBlockly.utils.string.wrapMutate_ = function(words, wordBreaks, limit) {\n  var bestScore = Blockly.utils.string.wrapScore_(words, wordBreaks, limit);\n  var bestBreaks;\n  // Try shifting every line break forward or backward.\n  for (var i = 0; i < wordBreaks.length - 1; i++) {\n    if (wordBreaks[i] == wordBreaks[i + 1]) {\n      continue;\n    }\n    var mutatedWordBreaks = [].concat(wordBreaks);\n    mutatedWordBreaks[i] = !mutatedWordBreaks[i];\n    mutatedWordBreaks[i + 1] = !mutatedWordBreaks[i + 1];\n    var mutatedScore =\n        Blockly.utils.string.wrapScore_(words, mutatedWordBreaks, limit);\n    if (mutatedScore > bestScore) {\n      bestScore = mutatedScore;\n      bestBreaks = mutatedWordBreaks;\n    }\n  }\n  if (bestBreaks) {\n    // Found an improvement.  See if it may be improved further.\n    return Blockly.utils.string.wrapMutate_(words, bestBreaks, limit);\n  }\n  // No improvements found.  Done.\n  return wordBreaks;\n};\n\n/**\n * Reassemble the array of words into text, with the specified line breaks.\n * @param {!Array.<string>} words Array of each word.\n * @param {!Array.<boolean>} wordBreaks Array of line breaks.\n * @return {string} Plain text.\n * @private\n */\nBlockly.utils.string.wrapToText_ = function(words, wordBreaks) {\n  var text = [];\n  for (var i = 0; i < words.length; i++) {\n    text.push(words[i]);\n    if (wordBreaks[i] !== undefined) {\n      text.push(wordBreaks[i] ? '\\n' : ' ');\n    }\n  }\n  return text.join('');\n};\n\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for size calculation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\n/**\n * @name Blockly.utils.Size\n * @namespace\n */\ngoog.provide('Blockly.utils.Size');\n\n\n/**\n * Class for representing sizes consisting of a width and height.\n * @param {number} width Width.\n * @param {number} height Height.\n * @struct\n * @constructor\n */\nBlockly.utils.Size = function(width, height) {\n  /**\n   * Width\n   * @type {number}\n   */\n  this.width = width;\n\n  /**\n   * Height\n   * @type {number}\n   */\n  this.height = height;\n};\n\n/**\n * Compares sizes for equality.\n * @param {Blockly.utils.Size} a A Size.\n * @param {Blockly.utils.Size} b A Size.\n * @return {boolean} True iff the sizes have equal widths and equal\n *     heights, or if both are null.\n */\nBlockly.utils.Size.equals = function(a, b) {\n  if (a == b) {\n    return true;\n  }\n  if (!a || !b) {\n    return false;\n  }\n  return a.width == b.width && a.height == b.height;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utilities for element styles.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\n/**\n * @name Blockly.utils.style\n * @namespace\n */\ngoog.provide('Blockly.utils.style');\n\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.Size');\n\n\n/**\n * Gets the height and width of an element.\n * Similar to Closure's goog.style.getSize\n * @param {!Element} element Element to get size of.\n * @return {!Blockly.utils.Size} Object with width/height properties.\n */\nBlockly.utils.style.getSize = function(element) {\n  if (Blockly.utils.style.getStyle_(element, 'display') != 'none') {\n    return Blockly.utils.style.getSizeWithDisplay_(element);\n  }\n\n  // Evaluate size with a temporary element.\n  var style = element.style;\n  var originalDisplay = style.display;\n  var originalVisibility = style.visibility;\n  var originalPosition = style.position;\n\n  style.visibility = 'hidden';\n  style.position = 'absolute';\n  style.display = 'inline';\n\n  var offsetWidth = /** @type {!HTMLElement} */ (element).offsetWidth;\n  var offsetHeight = /** @type {!HTMLElement} */ (element).offsetHeight;\n\n  style.display = originalDisplay;\n  style.position = originalPosition;\n  style.visibility = originalVisibility;\n\n  return new Blockly.utils.Size(offsetWidth, offsetHeight);\n};\n\n/**\n * Gets the height and width of an element when the display is not none.\n * @param {!Element} element Element to get size of.\n * @return {!Blockly.utils.Size} Object with width/height properties.\n * @private\n */\nBlockly.utils.style.getSizeWithDisplay_ = function(element) {\n  var offsetWidth = /** @type {!HTMLElement} */ (element).offsetWidth;\n  var offsetHeight = /** @type {!HTMLElement} */ (element).offsetHeight;\n  return new Blockly.utils.Size(offsetWidth, offsetHeight);\n};\n\n/**\n * Cross-browser pseudo get computed style. It returns the computed style where\n * available. If not available it tries the cascaded style value (IE\n * currentStyle) and in worst case the inline style value.  It shouldn't be\n * called directly, see http://wiki/Main/ComputedStyleVsCascadedStyle for\n * discussion.\n *\n * Copied from Closure's goog.style.getStyle_\n *\n * @param {!Element} element Element to get style of.\n * @param {string} style Property to get (must be camelCase, not css-style.).\n * @return {string} Style value.\n * @private\n */\nBlockly.utils.style.getStyle_ = function(element, style) {\n  return Blockly.utils.style.getComputedStyle(element, style) ||\n      Blockly.utils.style.getCascadedStyle(element, style) ||\n      (element.style && element.style[style]);\n};\n\n/**\n * Retrieves a computed style value of a node. It returns empty string if the\n * value cannot be computed (which will be the case in Internet Explorer) or\n * \"none\" if the property requested is an SVG one and it has not been\n * explicitly set (firefox and webkit).\n *\n * Copied from Closure's goog.style.getComputedStyle\n *\n * @param {!Element} element Element to get style of.\n * @param {string} property Property to get (camel-case).\n * @return {string} Style value.\n */\nBlockly.utils.style.getComputedStyle = function(element, property) {\n  if (document.defaultView && document.defaultView.getComputedStyle) {\n    var styles = document.defaultView.getComputedStyle(element, null);\n    if (styles) {\n      // element.style[..] is undefined for browser specific styles\n      // as 'filter'.\n      return styles[property] || styles.getPropertyValue(property) || '';\n    }\n  }\n\n  return '';\n};\n\n/**\n * Gets the cascaded style value of a node, or null if the value cannot be\n * computed (only Internet Explorer can do this).\n *\n * Copied from Closure's goog.style.getCascadedStyle\n *\n * @param {!Element} element Element to get style of.\n * @param {string} style Property to get (camel-case).\n * @return {string} Style value.\n */\nBlockly.utils.style.getCascadedStyle = function(element, style) {\n  return /** @type {string} */ (\n      element.currentStyle ? element.currentStyle[style] : null);\n};\n\n/**\n * Returns a Coordinate object relative to the top-left of the HTML document.\n * Similar to Closure's goog.style.getPageOffset\n * @param {!Element} el Element to get the page offset for.\n * @return {!Blockly.utils.Coordinate} The page offset.\n */\nBlockly.utils.style.getPageOffset = function(el) {\n  var pos = new Blockly.utils.Coordinate(0, 0);\n  var box = el.getBoundingClientRect();\n  var documentElement = document.documentElement;\n  // Must add the scroll coordinates in to get the absolute page offset\n  // of element since getBoundingClientRect returns relative coordinates to\n  // the viewport.\n  var scrollCoord = new Blockly.utils.Coordinate(\n      window.pageXOffset || documentElement.scrollLeft,\n      window.pageYOffset || documentElement.scrollTop);\n  pos.x = box.left + scrollCoord.x;\n  pos.y = box.top + scrollCoord.y;\n\n  return pos;\n};\n\n/**\n * Calculates the viewport coordinates relative to the document.\n * Similar to Closure's goog.style.getViewportPageOffset\n * @return {!Blockly.utils.Coordinate} The page offset of the viewport.\n */\nBlockly.utils.style.getViewportPageOffset = function() {\n  var body = document.body;\n  var documentElement = document.documentElement;\n  var scrollLeft = body.scrollLeft || documentElement.scrollLeft;\n  var scrollTop = body.scrollTop || documentElement.scrollTop;\n  return new Blockly.utils.Coordinate(scrollLeft, scrollTop);\n};\n\n/**\n * Shows or hides an element from the page. Hiding the element is done by\n * setting the display property to \"none\", removing the element from the\n * rendering hierarchy so it takes up no space. To show the element, the default\n * inherited display property is restored (defined either in stylesheets or by\n * the browser's default style rules).\n * Copied from Closure's goog.style.getViewportPageOffset\n *\n * @param {!Element} el Element to show or hide.\n * @param {*} isShown True to render the element in its default style,\n *     false to disable rendering the element.\n */\nBlockly.utils.style.setElementShown = function(el, isShown) {\n  el.style.display = isShown ? '' : 'none';\n};\n\n/**\n * Returns true if the element is using right to left (RTL) direction.\n * Copied from Closure's goog.style.isRightToLeft\n *\n * @param {!Element} el The element to test.\n * @return {boolean} True for right to left, false for left to right.\n */\nBlockly.utils.style.isRightToLeft = function(el) {\n  return 'rtl' == Blockly.utils.style.getStyle_(el, 'direction');\n};\n\n/**\n * Gets the computed border widths (on all sides) in pixels\n * Copied from Closure's goog.style.getBorderBox\n * @param {!Element} element  The element to get the border widths for.\n * @return {!Object} The computed border widths.\n */\nBlockly.utils.style.getBorderBox = function(element) {\n  var left = Blockly.utils.style.getComputedStyle(element, 'borderLeftWidth');\n  var right = Blockly.utils.style.getComputedStyle(element, 'borderRightWidth');\n  var top = Blockly.utils.style.getComputedStyle(element, 'borderTopWidth');\n  var bottom = Blockly.utils.style.getComputedStyle(element, 'borderBottomWidth');\n\n  return {\n    top: parseFloat(top),\n    right: parseFloat(right),\n    bottom: parseFloat(bottom),\n    left: parseFloat(left)\n  };\n};\n\n/**\n * Changes the scroll position of `container` with the minimum amount so\n * that the content and the borders of the given `element` become visible.\n * If the element is bigger than the container, its top left corner will be\n * aligned as close to the container's top left corner as possible.\n * Copied from Closure's goog.style.scrollIntoContainerView\n *\n * @param {!Element} element The element to make visible.\n * @param {!Element} container The container to scroll. If not set, then the\n *     document scroll element will be used.\n * @param {boolean=} opt_center Whether to center the element in the container.\n *     Defaults to false.\n */\nBlockly.utils.style.scrollIntoContainerView = function(\n    element, container, opt_center) {\n  var offset =\n      Blockly.utils.style.getContainerOffsetToScrollInto(element,\n          container, opt_center);\n  container.scrollLeft = offset.x;\n  container.scrollTop = offset.y;\n};\n\n/**\n * Calculate the scroll position of `container` with the minimum amount so\n * that the content and the borders of the given `element` become visible.\n * If the element is bigger than the container, its top left corner will be\n * aligned as close to the container's top left corner as possible.\n * Copied from Closure's goog.style.getContainerOffsetToScrollInto\n *\n * @param {!Element} element The element to make visible.\n * @param {!Element} container The container to scroll. If not set, then the\n *     document scroll element will be used.\n * @param {boolean=} opt_center Whether to center the element in the container.\n *     Defaults to false.\n * @return {!Blockly.utils.Coordinate} The new scroll position of the container,\n *     in form of goog.math.Coordinate(scrollLeft, scrollTop).\n */\nBlockly.utils.style.getContainerOffsetToScrollInto = function(\n    element, container, opt_center) {\n  // Absolute position of the element's border's top left corner.\n  var elementPos = Blockly.utils.style.getPageOffset(element);\n  // Absolute position of the container's border's top left corner.\n  var containerPos = Blockly.utils.style.getPageOffset(container);\n  var containerBorder = Blockly.utils.style.getBorderBox(container);\n  // Relative pos. of the element's border box to the container's content box.\n  var relX = elementPos.x - containerPos.x - containerBorder.left;\n  var relY = elementPos.y - containerPos.y - containerBorder.top;\n  // How much the element can move in the container, i.e. the difference between\n  // the element's bottom-right-most and top-left-most position where it's\n  // fully visible.\n  var elementSize = Blockly.utils.style.getSizeWithDisplay_(element);\n  var spaceX = container.clientWidth - elementSize.width;\n  var spaceY = container.clientHeight - elementSize.height;\n  var scrollLeft = container.scrollLeft;\n  var scrollTop = container.scrollTop;\n  if (opt_center) {\n    // All browsers round non-integer scroll positions down.\n    scrollLeft += relX - spaceX / 2;\n    scrollTop += relY - spaceY / 2;\n  } else {\n    // This formula was designed to give the correct scroll values in the\n    // following cases:\n    // - element is higher than container (spaceY < 0) => scroll down by relY\n    // - element is not higher that container (spaceY >= 0):\n    //   - it is above container (relY < 0) => scroll up by abs(relY)\n    //   - it is below container (relY > spaceY) => scroll down by relY - spaceY\n    //   - it is in the container => don't scroll\n    scrollLeft += Math.min(relX, Math.max(relX - spaceX, 0));\n    scrollTop += Math.min(relY, Math.max(relY - spaceY, 0));\n  }\n  return new Blockly.utils.Coordinate(scrollLeft, scrollTop);\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Useragent detection.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.utils.userAgent\n * @namespace\n */\ngoog.provide('Blockly.utils.userAgent');\n\ngoog.require('Blockly.utils.global');\n\n/** @const {boolean} */\nBlockly.utils.userAgent.IE;\n\n/** @const {boolean} */\nBlockly.utils.userAgent.EDGE;\n\n/** @const {boolean} */\nBlockly.utils.userAgent.JAVA_FX;\n\n/** @const {boolean} */\nBlockly.utils.userAgent.CHROME;\n\n/** @const {boolean} */\nBlockly.utils.userAgent.WEBKIT;\n\n/** @const {boolean} */\nBlockly.utils.userAgent.GECKO;\n\n/** @const {boolean} */\nBlockly.utils.userAgent.ANDROID;\n\n/** @const {boolean} */\nBlockly.utils.userAgent.IPAD;\n\n/** @const {boolean} */\nBlockly.utils.userAgent.IPOD;\n\n/** @const {boolean} */\nBlockly.utils.userAgent.IPHONE;\n\n/** @const {boolean} */\nBlockly.utils.userAgent.MAC;\n\n/** @const {boolean} */\nBlockly.utils.userAgent.TABLET;\n\n/** @const {boolean} */\nBlockly.utils.userAgent.MOBILE;\n\n(function(raw) {\n  Blockly.utils.userAgent.raw = raw;\n  var rawUpper = Blockly.utils.userAgent.raw.toUpperCase();\n  /**\n   * Case-insensitive test of whether name is in the useragent string.\n   * @param {string} name Name to test.\n   * @return {boolean} True if name is present.\n   */\n  function has(name) {\n    return rawUpper.indexOf(name.toUpperCase()) != -1;\n  }\n\n  // Browsers.  Logic from:\n  // https://github.com/google/closure-library/blob/master/closure/goog/labs/useragent/browser.js\n  Blockly.utils.userAgent.IE = has('Trident') || has('MSIE');\n  Blockly.utils.userAgent.EDGE = has('Edge');\n  // Useragent for JavaFX:\n  // Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.44\n  //     (KHTML, like Gecko) JavaFX/8.0 Safari/537.44\n  Blockly.utils.userAgent.JAVA_FX = has('JavaFX');\n  Blockly.utils.userAgent.CHROME = (has('Chrome') || has('CriOS')) &&\n        !Blockly.utils.userAgent.EDGE;\n\n  // Engines.  Logic from:\n  // https://github.com/google/closure-library/blob/master/closure/goog/labs/useragent/engine.js\n  Blockly.utils.userAgent.WEBKIT = has('WebKit') &&\n      !Blockly.utils.userAgent.EDGE;\n  Blockly.utils.userAgent.GECKO = has('Gecko') &&\n      !Blockly.utils.userAgent.WEBKIT &&\n      !Blockly.utils.userAgent.IE &&\n      !Blockly.utils.userAgent.EDGE;\n\n  // Platforms.  Logic from:\n  // https://github.com/google/closure-library/blob/master/closure/goog/labs/useragent/platform.js\n  Blockly.utils.userAgent.ANDROID = has('Android');\n  Blockly.utils.userAgent.IPAD = has('iPad');\n  Blockly.utils.userAgent.IPOD = has('iPod');\n  Blockly.utils.userAgent.IPHONE = has('iPhone') &&\n      !Blockly.utils.userAgent.IPAD && !Blockly.utils.userAgent.IPOD;\n  Blockly.utils.userAgent.MAC = has('Macintosh');\n\n  // Devices.  Logic from:\n  // https://github.com/google/closure-library/blob/master/closure/goog/labs/useragent/device.js\n  Blockly.utils.userAgent.TABLET = Blockly.utils.userAgent.IPAD ||\n      (Blockly.utils.userAgent.ANDROID && !has('Mobile')) || has('Silk');\n  Blockly.utils.userAgent.MOBILE = !Blockly.utils.userAgent.TABLET &&\n      (Blockly.utils.userAgent.IPOD || Blockly.utils.userAgent.IPHONE ||\n       Blockly.utils.userAgent.ANDROID || has('IEMobile'));\n})((Blockly.utils.global.navigator && Blockly.utils.global.navigator.userAgent) || '');\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.utils\n * @namespace\n */\ngoog.provide('Blockly.utils');\n\ngoog.require('Blockly.Msg');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.utils.colour');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.global');\ngoog.require('Blockly.utils.Rect');\ngoog.require('Blockly.utils.string');\ngoog.require('Blockly.utils.style');\ngoog.require('Blockly.utils.userAgent');\n\n\n/**\n * Don't do anything for this event, just halt propagation.\n * @param {!Event} e An event.\n */\nBlockly.utils.noEvent = function(e) {\n  // This event has been handled.  No need to bubble up to the document.\n  e.preventDefault();\n  e.stopPropagation();\n};\n\n/**\n * Is this event targeting a text input widget?\n * @param {!Event} e An event.\n * @return {boolean} True if text input.\n */\nBlockly.utils.isTargetInput = function(e) {\n  return e.target.type == 'textarea' || e.target.type == 'text' ||\n         e.target.type == 'number' || e.target.type == 'email' ||\n         e.target.type == 'password' || e.target.type == 'search' ||\n         e.target.type == 'tel' || e.target.type == 'url' ||\n         e.target.isContentEditable ||\n         (e.target.dataset && e.target.dataset.isTextInput == 'true');\n};\n\n/**\n * Return the coordinates of the top-left corner of this element relative to\n * its parent.  Only for SVG elements and children (e.g. rect, g, path).\n * @param {!Element} element SVG element to find the coordinates of.\n * @return {!Blockly.utils.Coordinate} Object with .x and .y properties.\n */\nBlockly.utils.getRelativeXY = function(element) {\n  var xy = new Blockly.utils.Coordinate(0, 0);\n  // First, check for x and y attributes.\n  var x = element.getAttribute('x');\n  if (x) {\n    xy.x = parseInt(x, 10);\n  }\n  var y = element.getAttribute('y');\n  if (y) {\n    xy.y = parseInt(y, 10);\n  }\n  // Second, check for transform=\"translate(...)\" attribute.\n  var transform = element.getAttribute('transform');\n  var r = transform && transform.match(Blockly.utils.getRelativeXY.XY_REGEX_);\n  if (r) {\n    xy.x += Number(r[1]);\n    if (r[3]) {\n      xy.y += Number(r[3]);\n    }\n  }\n\n  // Then check for style = transform: translate(...) or translate3d(...)\n  var style = element.getAttribute('style');\n  if (style && style.indexOf('translate') > -1) {\n    var styleComponents =\n        style.match(Blockly.utils.getRelativeXY.XY_STYLE_REGEX_);\n    if (styleComponents) {\n      xy.x += Number(styleComponents[1]);\n      if (styleComponents[3]) {\n        xy.y += Number(styleComponents[3]);\n      }\n    }\n  }\n  return xy;\n};\n\n/**\n * Return the coordinates of the top-left corner of this element relative to\n * the div Blockly was injected into.\n * @param {!Element} element SVG element to find the coordinates of. If this is\n *     not a child of the div Blockly was injected into, the behaviour is\n *     undefined.\n * @return {!Blockly.utils.Coordinate} Object with .x and .y properties.\n */\nBlockly.utils.getInjectionDivXY_ = function(element) {\n  var x = 0;\n  var y = 0;\n  while (element) {\n    var xy = Blockly.utils.getRelativeXY(element);\n    x = x + xy.x;\n    y = y + xy.y;\n    var classes = element.getAttribute('class') || '';\n    if ((' ' + classes + ' ').indexOf(' injectionDiv ') != -1) {\n      break;\n    }\n    element = /** @type {!Element} */ (element.parentNode);\n  }\n  return new Blockly.utils.Coordinate(x, y);\n};\n\n/**\n * Static regex to pull the x,y values out of an SVG translate() directive.\n * Note that Firefox and IE (9,10) return 'translate(12)' instead of\n * 'translate(12, 0)'.\n * Note that IE (9,10) returns 'translate(16 8)' instead of 'translate(16, 8)'.\n * Note that IE has been reported to return scientific notation (0.123456e-42).\n * @type {!RegExp}\n * @private\n */\nBlockly.utils.getRelativeXY.XY_REGEX_ =\n    /translate\\(\\s*([-+\\d.e]+)([ ,]\\s*([-+\\d.e]+)\\s*)?/;\n\n/**\n * Static regex to pull the x,y values out of a translate() or translate3d()\n * style property.\n * Accounts for same exceptions as XY_REGEX_.\n * @type {!RegExp}\n * @private\n */\nBlockly.utils.getRelativeXY.XY_STYLE_REGEX_ =\n    /transform:\\s*translate(?:3d)?\\(\\s*([-+\\d.e]+)\\s*px([ ,]\\s*([-+\\d.e]+)\\s*px)?/;\n\n/**\n * Is this event a right-click?\n * @param {!Event} e Mouse event.\n * @return {boolean} True if right-click.\n */\nBlockly.utils.isRightButton = function(e) {\n  if (e.ctrlKey && Blockly.utils.userAgent.MAC) {\n    // Control-clicking on Mac OS X is treated as a right-click.\n    // WebKit on Mac OS X fails to change button to 2 (but Gecko does).\n    return true;\n  }\n  return e.button == 2;\n};\n\n/**\n * Return the converted coordinates of the given mouse event.\n * The origin (0,0) is the top-left corner of the Blockly SVG.\n * @param {!Event} e Mouse event.\n * @param {!Element} svg SVG element.\n * @param {SVGMatrix} matrix Inverted screen CTM to use.\n * @return {!SVGPoint} Object with .x and .y properties.\n */\nBlockly.utils.mouseToSvg = function(e, svg, matrix) {\n  var svgPoint = svg.createSVGPoint();\n  svgPoint.x = e.clientX;\n  svgPoint.y = e.clientY;\n\n  if (!matrix) {\n    matrix = svg.getScreenCTM().inverse();\n  }\n  return svgPoint.matrixTransform(matrix);\n};\n\n/**\n * Get the scroll delta of a mouse event in pixel units.\n * @param {!Event} e Mouse event.\n * @return {{x: number, y: number}} Scroll delta object with .x and .y\n *    properties.\n */\nBlockly.utils.getScrollDeltaPixels = function(e) {\n  switch (e.deltaMode) {\n    case 0x00:  // Pixel mode.\n    default:\n      return {\n        x: e.deltaX,\n        y: e.deltaY\n      };\n    case 0x01:  // Line mode.\n      return {\n        x: e.deltaX * Blockly.LINE_MODE_MULTIPLIER,\n        y: e.deltaY * Blockly.LINE_MODE_MULTIPLIER\n      };\n    case 0x02:  // Page mode.\n      return {\n        x: e.deltaX * Blockly.PAGE_MODE_MULTIPLIER,\n        y: e.deltaY * Blockly.PAGE_MODE_MULTIPLIER\n      };\n  }\n};\n\n/**\n * Parse a string with any number of interpolation tokens (%1, %2, ...).\n * It will also replace string table references (e.g., %{bky_my_msg} and\n * %{BKY_MY_MSG} will both be replaced with the value in\n * Blockly.Msg['MY_MSG']). Percentage sign characters '%' may be self-escaped\n * (e.g., '%%').\n * @param {string} message Text which might contain string table references and\n *     interpolation tokens.\n * @return {!Array.<string|number>} Array of strings and numbers.\n */\nBlockly.utils.tokenizeInterpolation = function(message) {\n  return Blockly.utils.tokenizeInterpolation_(message, true);\n};\n\n/**\n * Replaces string table references in a message, if the message is a string.\n * For example, \"%{bky_my_msg}\" and \"%{BKY_MY_MSG}\" will both be replaced with\n * the value in Blockly.Msg['MY_MSG'].\n * @param {string|?} message Message, which may be a string that contains\n *     string table references.\n * @return {string} String with message references replaced.\n */\nBlockly.utils.replaceMessageReferences = function(message) {\n  if (typeof message != 'string') {\n    return message;\n  }\n  var interpolatedResult = Blockly.utils.tokenizeInterpolation_(message, false);\n  // When parseInterpolationTokens == false, interpolatedResult should be at\n  // most length 1.\n  return interpolatedResult.length ? String(interpolatedResult[0]) : '';\n};\n\n/**\n * Validates that any %{MSG_KEY} references in the message refer to keys of\n * the Blockly.Msg string table.\n * @param {string} message Text which might contain string table references.\n * @return {boolean} True if all message references have matching values.\n *     Otherwise, false.\n */\nBlockly.utils.checkMessageReferences = function(message) {\n  var validSoFar = true;\n\n  var msgTable = Blockly.Msg;\n\n  // TODO (#1169): Implement support for other string tables,\n  // prefixes other than BKY_.\n  var m = message.match(/%{BKY_[A-Z]\\w*}/ig);\n  for (var i = 0; i < m.length; i++) {\n    var msgKey = m[i].toUpperCase();\n    if (msgTable[msgKey.slice(6, -1)] == undefined) {\n      console.warn('No message string for ' + m[i] + ' in ' + message);\n      validSoFar = false;  // Continue to report other errors.\n    }\n  }\n\n  return validSoFar;\n};\n\n/**\n * Internal implementation of the message reference and interpolation token\n * parsing used by tokenizeInterpolation() and replaceMessageReferences().\n * @param {string} message Text which might contain string table references and\n *     interpolation tokens.\n * @param {boolean} parseInterpolationTokens Option to parse numeric\n *     interpolation tokens (%1, %2, ...) when true.\n * @return {!Array.<string|number>} Array of strings and numbers.\n * @private\n */\nBlockly.utils.tokenizeInterpolation_ = function(message,\n    parseInterpolationTokens) {\n  var tokens = [];\n  var chars = message.split('');\n  chars.push('');  // End marker.\n  // Parse the message with a finite state machine.\n  // 0 - Base case.\n  // 1 - % found.\n  // 2 - Digit found.\n  // 3 - Message ref found.\n  var state = 0;\n  var buffer = [];\n  var number = null;\n  for (var i = 0; i < chars.length; i++) {\n    var c = chars[i];\n    if (state == 0) {\n      if (c == '%') {\n        var text = buffer.join('');\n        if (text) {\n          tokens.push(text);\n        }\n        buffer.length = 0;\n        state = 1;  // Start escape.\n      } else {\n        buffer.push(c);  // Regular char.\n      }\n    } else if (state == 1) {\n      if (c == '%') {\n        buffer.push(c);  // Escaped %: %%\n        state = 0;\n      } else if (parseInterpolationTokens && '0' <= c && c <= '9') {\n        state = 2;\n        number = c;\n        var text = buffer.join('');\n        if (text) {\n          tokens.push(text);\n        }\n        buffer.length = 0;\n      } else if (c == '{') {\n        state = 3;\n      } else {\n        buffer.push('%', c);  // Not recognized. Return as literal.\n        state = 0;\n      }\n    } else if (state == 2) {\n      if ('0' <= c && c <= '9') {\n        number += c;  // Multi-digit number.\n      } else {\n        tokens.push(parseInt(number, 10));\n        i--;  // Parse this char again.\n        state = 0;\n      }\n    } else if (state == 3) {  // String table reference\n      if (c == '') {\n        // Premature end before closing '}'\n        buffer.splice(0, 0, '%{');  // Re-insert leading delimiter\n        i--;  // Parse this char again.\n        state = 0;  // and parse as string literal.\n      } else if (c != '}') {\n        buffer.push(c);\n      } else {\n        var rawKey = buffer.join('');\n        if (/[A-Z]\\w*/i.test(rawKey)) {  // Strict matching\n          // Found a valid string key. Attempt case insensitive match.\n          var keyUpper = rawKey.toUpperCase();\n\n          // BKY_ is the prefix used to namespace the strings used in Blockly\n          // core files and the predefined blocks in ../blocks/.\n          // These strings are defined in ../msgs/ files.\n          var bklyKey = Blockly.utils.string.startsWith(keyUpper, 'BKY_') ?\n              keyUpper.substring(4) : null;\n          if (bklyKey && bklyKey in Blockly.Msg) {\n            var rawValue = Blockly.Msg[bklyKey];\n            if (typeof rawValue == 'string') {\n              // Attempt to dereference substrings, too, appending to the end.\n              Array.prototype.push.apply(tokens,\n                  Blockly.utils.tokenizeInterpolation_(\n                      rawValue, parseInterpolationTokens));\n            } else if (parseInterpolationTokens) {\n              // When parsing interpolation tokens, numbers are special\n              // placeholders (%1, %2, etc). Make sure all other values are\n              // strings.\n              tokens.push(String(rawValue));\n            } else {\n              tokens.push(rawValue);\n            }\n          } else {\n            // No entry found in the string table. Pass reference as string.\n            tokens.push('%{' + rawKey + '}');\n          }\n          buffer.length = 0;  // Clear the array\n          state = 0;\n        } else {\n          tokens.push('%{' + rawKey + '}');\n          buffer.length = 0;\n          state = 0;  // and parse as string literal.\n        }\n      }\n    }\n  }\n  var text = buffer.join('');\n  if (text) {\n    tokens.push(text);\n  }\n\n  // Merge adjacent text tokens into a single string.\n  var mergedTokens = [];\n  buffer.length = 0;\n  for (var i = 0; i < tokens.length; ++i) {\n    if (typeof tokens[i] == 'string') {\n      buffer.push(tokens[i]);\n    } else {\n      text = buffer.join('');\n      if (text) {\n        mergedTokens.push(text);\n      }\n      buffer.length = 0;\n      mergedTokens.push(tokens[i]);\n    }\n  }\n  text = buffer.join('');\n  if (text) {\n    mergedTokens.push(text);\n  }\n  buffer.length = 0;\n\n  return mergedTokens;\n};\n\n/**\n * Generate a unique ID.  This should be globally unique.\n * 87 characters ^ 20 length > 128 bits (better than a UUID).\n * @return {string} A globally unique ID string.\n */\nBlockly.utils.genUid = function() {\n  var length = 20;\n  var soupLength = Blockly.utils.genUid.soup_.length;\n  var id = [];\n  for (var i = 0; i < length; i++) {\n    id[i] = Blockly.utils.genUid.soup_.charAt(Math.random() * soupLength);\n  }\n  return id.join('');\n};\n\n/**\n * Legal characters for the unique ID.  Should be all on a US keyboard.\n * No characters that conflict with XML or JSON.  Requests to remove additional\n * 'problematic' characters from this soup will be denied.  That's your failure\n * to properly escape in your own environment.  Issues #251, #625, #682, #1304.\n * @private\n */\nBlockly.utils.genUid.soup_ = '!#$%()*+,-./:;=?@[]^_`{|}~' +\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n/**\n * Check if 3D transforms are supported by adding an element\n * and attempting to set the property.\n * @return {boolean} True if 3D transforms are supported.\n */\nBlockly.utils.is3dSupported = function() {\n  if (Blockly.utils.is3dSupported.cached_ !== undefined) {\n    return Blockly.utils.is3dSupported.cached_;\n  }\n  // CC-BY-SA Lorenzo Polidori\n  // stackoverflow.com/questions/5661671/detecting-transform-translate3d-support\n  if (!Blockly.utils.global.getComputedStyle) {\n    return false;\n  }\n\n  var el = document.createElement('p');\n  var has3d = 'none';\n  var transforms = {\n    'webkitTransform': '-webkit-transform',\n    'OTransform': '-o-transform',\n    'msTransform': '-ms-transform',\n    'MozTransform': '-moz-transform',\n    'transform': 'transform'\n  };\n\n  // Add it to the body to get the computed style.\n  document.body.insertBefore(el, null);\n\n  for (var t in transforms) {\n    if (el.style[t] !== undefined) {\n      el.style[t] = 'translate3d(1px,1px,1px)';\n      var computedStyle = Blockly.utils.global.getComputedStyle(el);\n      if (!computedStyle) {\n        // getComputedStyle in Firefox returns null when Blockly is loaded\n        // inside an iframe with display: none.  Returning false and not\n        // caching is3dSupported means we try again later.  This is most likely\n        // when users are interacting with blocks which should mean Blockly is\n        // visible again.\n        // See https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n        document.body.removeChild(el);\n        return false;\n      }\n      has3d = computedStyle.getPropertyValue(transforms[t]);\n    }\n  }\n  document.body.removeChild(el);\n  Blockly.utils.is3dSupported.cached_ = has3d !== 'none';\n  return Blockly.utils.is3dSupported.cached_;\n};\n\n/**\n * Calls a function after the page has loaded, possibly immediately.\n * @param {function()} fn Function to run.\n * @throws Error Will throw if no global document can be found (e.g., Node.js).\n */\nBlockly.utils.runAfterPageLoad = function(fn) {\n  if (typeof document != 'object') {\n    throw Error('Blockly.utils.runAfterPageLoad() requires browser document.');\n  }\n  if (document.readyState == 'complete') {\n    fn();  // Page has already loaded. Call immediately.\n  } else {\n    // Poll readyState.\n    var readyStateCheckInterval = setInterval(function() {\n      if (document.readyState == 'complete') {\n        clearInterval(readyStateCheckInterval);\n        fn();\n      }\n    }, 10);\n  }\n};\n\n/**\n * Get the position of the current viewport in window coordinates.  This takes\n * scroll into account.\n * @return {!Blockly.utils.Rect} An object containing window width, height, and\n *     scroll position in window coordinates.\n * @package\n */\nBlockly.utils.getViewportBBox = function() {\n  // Pixels, in window coordinates.\n  var scrollOffset = Blockly.utils.style.getViewportPageOffset();\n  return new Blockly.utils.Rect(\n      scrollOffset.y,\n      document.documentElement.clientHeight + scrollOffset.y,\n      scrollOffset.x,\n      document.documentElement.clientWidth + scrollOffset.x\n  );\n};\n\n/**\n * Removes the first occurrence of a particular value from an array.\n * @param {!Array} arr Array from which to remove\n *     value.\n * @param {*} obj Object to remove.\n * @return {boolean} True if an element was removed.\n * @package\n */\nBlockly.utils.arrayRemove = function(arr, obj) {\n  var i = arr.indexOf(obj);\n  if (i == -1) {\n    return false;\n  }\n  arr.splice(i, 1);\n  return true;\n};\n\n/**\n * Gets the document scroll distance as a coordinate object.\n * Copied from Closure's goog.dom.getDocumentScroll.\n * @return {!Blockly.utils.Coordinate} Object with values 'x' and 'y'.\n */\nBlockly.utils.getDocumentScroll = function() {\n  var el = document.documentElement;\n  var win = window;\n  if (Blockly.utils.userAgent.IE && win.pageYOffset != el.scrollTop) {\n    // The keyboard on IE10 touch devices shifts the page using the pageYOffset\n    // without modifying scrollTop. For this case, we want the body scroll\n    // offsets.\n    return new Blockly.utils.Coordinate(el.scrollLeft, el.scrollTop);\n  }\n  return new Blockly.utils.Coordinate(\n      win.pageXOffset || el.scrollLeft, win.pageYOffset || el.scrollTop);\n};\n\n/**\n * Get a map of all the block's descendants mapping their type to the number of\n *    children with that type.\n * @param {!Blockly.Block} block The block to map.\n * @param {boolean=} opt_stripFollowing Optionally ignore all following\n *    statements (blocks that are not inside a value or statement input\n *    of the block).\n * @return {!Object} Map of types to type counts for descendants of the bock.\n */\nBlockly.utils.getBlockTypeCounts = function(block, opt_stripFollowing) {\n  var typeCountsMap = Object.create(null);\n  var descendants = block.getDescendants(true);\n  if (opt_stripFollowing) {\n    var nextBlock = block.getNextBlock();\n    if (nextBlock) {\n      var index = descendants.indexOf(nextBlock);\n      descendants.splice(index, descendants.length - index);\n    }\n  }\n  for (var i = 0, checkBlock; (checkBlock = descendants[i]); i++) {\n    if (typeCountsMap[checkBlock.type]) {\n      typeCountsMap[checkBlock.type]++;\n    } else {\n      typeCountsMap[checkBlock.type] = 1;\n    }\n  }\n  return typeCountsMap;\n};\n\n/**\n * Converts screen coordinates to workspace coordinates.\n * @param {Blockly.WorkspaceSvg} ws The workspace to find the coordinates on.\n * @param {Blockly.utils.Coordinate} screenCoordinates The screen coordinates to\n * be converted to workspace coordinates\n * @return {Blockly.utils.Coordinate} The workspace coordinates.\n * @package\n */\nBlockly.utils.screenToWsCoordinates = function(ws, screenCoordinates) {\n  var screenX = screenCoordinates.x;\n  var screenY = screenCoordinates.y;\n\n  var injectionDiv = ws.getInjectionDiv();\n  // Bounding rect coordinates are in client coordinates, meaning that they\n  // are in pixels relative to the upper left corner of the visible browser\n  // window.  These coordinates change when you scroll the browser window.\n  var boundingRect = injectionDiv.getBoundingClientRect();\n\n  // The client coordinates offset by the injection div's upper left corner.\n  var clientOffsetPixels = new Blockly.utils.Coordinate(\n      screenX - boundingRect.left, screenY - boundingRect.top);\n\n  // The offset in pixels between the main workspace's origin and the upper\n  // left corner of the injection div.\n  var mainOffsetPixels = ws.getOriginOffsetInPixels();\n\n  // The position of the new comment in pixels relative to the origin of the\n  // main workspace.\n  var finalOffsetPixels = Blockly.utils.Coordinate.difference(\n      clientOffsetPixels, mainOffsetPixels);\n\n  // The position in main workspace coordinates.\n  var finalOffsetMainWs = finalOffsetPixels.scale(1 / ws.scale);\n  return finalOffsetMainWs;\n};\n\n/**\n * Parse a block colour from a number or string, as provided in a block\n * definition.\n * @param {number|string} colour HSV hue value (0 to 360), #RRGGBB string,\n *     or a message reference string pointing to one of those two values.\n * @return {{hue: ?number, hex: string}} An object containing the colour as\n *     a #RRGGBB string, and the hue if the input was an HSV hue value.\n * @throws {Error} If the colour cannot be parsed.\n */\nBlockly.utils.parseBlockColour = function(colour) {\n  var dereferenced = (typeof colour == 'string') ?\n      Blockly.utils.replaceMessageReferences(colour) : colour;\n\n  var hue = Number(dereferenced);\n  if (!isNaN(hue) && 0 <= hue && hue <= 360) {\n    return {\n      hue: hue,\n      hex: Blockly.utils.colour.hsvToHex(hue, Blockly.HSV_SATURATION,\n          Blockly.HSV_VALUE * 255)\n    };\n  } else {\n    var hex = Blockly.utils.colour.parse(dereferenced);\n    if (hex) {\n      // Only store hue if colour is set as a hue.\n      return {\n        hue: null,\n        hex: hex\n      };\n    } else {\n      var errorMsg = 'Invalid colour: \"' + dereferenced + '\"';\n      if (colour != dereferenced) {\n        errorMsg += ' (from \"' + colour + '\")';\n      }\n      throw Error(errorMsg);\n    }\n  }\n};\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Events fired as a result of actions in Blockly's editor.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * Events fired as a result of actions in Blockly's editor.\n * @namespace Blockly.Events\n */\ngoog.provide('Blockly.Events');\n\ngoog.require('Blockly.registry');\ngoog.require('Blockly.utils');\n\n\n/**\n * Group ID for new events.  Grouped events are indivisible.\n * @type {string}\n * @private\n */\nBlockly.Events.group_ = '';\n\n/**\n * Sets whether the next event should be added to the undo stack.\n * @type {boolean}\n */\nBlockly.Events.recordUndo = true;\n\n/**\n * Allow change events to be created and fired.\n * @type {number}\n * @private\n */\nBlockly.Events.disabled_ = 0;\n\n/**\n * Name of event that creates a block. Will be deprecated for BLOCK_CREATE.\n * @const\n */\nBlockly.Events.CREATE = 'create';\n\n/**\n * Name of event that creates a block.\n * @const\n */\nBlockly.Events.BLOCK_CREATE = Blockly.Events.CREATE;\n\n/**\n * Name of event that deletes a block. Will be deprecated for BLOCK_DELETE.\n * @const\n */\nBlockly.Events.DELETE = 'delete';\n\n/**\n * Name of event that deletes a block.\n * @const\n */\nBlockly.Events.BLOCK_DELETE = Blockly.Events.DELETE;\n\n/**\n * Name of event that changes a block. Will be deprecated for BLOCK_CHANGE.\n * @const\n */\nBlockly.Events.CHANGE = 'change';\n\n/**\n * Name of event that changes a block.\n * @const\n */\nBlockly.Events.BLOCK_CHANGE = Blockly.Events.CHANGE;\n\n/**\n * Name of event that moves a block. Will be deprecated for BLOCK_MOVE.\n * @const\n */\nBlockly.Events.MOVE = 'move';\n\n/**\n * Name of event that moves a block.\n * @const\n */\nBlockly.Events.BLOCK_MOVE = Blockly.Events.MOVE;\n\n/**\n * Name of event that creates a variable.\n * @const\n */\nBlockly.Events.VAR_CREATE = 'var_create';\n\n/**\n * Name of event that deletes a variable.\n * @const\n */\nBlockly.Events.VAR_DELETE = 'var_delete';\n\n/**\n * Name of event that renames a variable.\n * @const\n */\nBlockly.Events.VAR_RENAME = 'var_rename';\n\n/**\n * Name of event that records a UI change.\n * @const\n */\nBlockly.Events.UI = 'ui';\n\n/**\n * Name of event that creates a comment.\n * @const\n */\nBlockly.Events.COMMENT_CREATE = 'comment_create';\n\n/**\n * Name of event that deletes a comment.\n * @const\n */\nBlockly.Events.COMMENT_DELETE = 'comment_delete';\n\n/**\n * Name of event that changes a comment.\n * @const\n */\nBlockly.Events.COMMENT_CHANGE = 'comment_change';\n\n/**\n * Name of event that moves a comment.\n * @const\n */\nBlockly.Events.COMMENT_MOVE = 'comment_move';\n\n/**\n * Name of event that records a workspace load.\n */\nBlockly.Events.FINISHED_LOADING = 'finished_loading';\n\n/**\n * List of events that cause objects to be bumped back into the visible\n * portion of the workspace (only used for non-movable workspaces).\n *\n * Not to be confused with bumping so that disconnected connections to do\n * not appear connected.\n * @const\n */\nBlockly.Events.BUMP_EVENTS = [\n  Blockly.Events.BLOCK_CREATE,\n  Blockly.Events.BLOCK_MOVE,\n  Blockly.Events.COMMENT_CREATE,\n  Blockly.Events.COMMENT_MOVE\n];\n\n/**\n * List of events queued for firing.\n * @private\n */\nBlockly.Events.FIRE_QUEUE_ = [];\n\n/**\n * Create a custom event and fire it.\n * @param {!Blockly.Events.Abstract} event Custom data for event.\n */\nBlockly.Events.fire = function(event) {\n  if (!Blockly.Events.isEnabled()) {\n    return;\n  }\n  if (!Blockly.Events.FIRE_QUEUE_.length) {\n    // First event added; schedule a firing of the event queue.\n    setTimeout(Blockly.Events.fireNow_, 0);\n  }\n  Blockly.Events.FIRE_QUEUE_.push(event);\n};\n\n/**\n * Fire all queued events.\n * @private\n */\nBlockly.Events.fireNow_ = function() {\n  var queue = Blockly.Events.filter(Blockly.Events.FIRE_QUEUE_, true);\n  Blockly.Events.FIRE_QUEUE_.length = 0;\n  for (var i = 0, event; (event = queue[i]); i++) {\n    if (!event.workspaceId) {\n      continue;\n    }\n    var workspace = Blockly.Workspace.getById(event.workspaceId);\n    if (workspace) {\n      workspace.fireChangeListener(event);\n    }\n  }\n};\n\n/**\n * Filter the queued events and merge duplicates.\n * @param {!Array.<!Blockly.Events.Abstract>} queueIn Array of events.\n * @param {boolean} forward True if forward (redo), false if backward (undo).\n * @return {!Array.<!Blockly.Events.Abstract>} Array of filtered events.\n */\nBlockly.Events.filter = function(queueIn, forward) {\n  var queue = queueIn.slice();  // Shallow copy of queue.\n  if (!forward) {\n    // Undo is merged in reverse order.\n    queue.reverse();\n  }\n  var mergedQueue = [];\n  var hash = Object.create(null);\n  // Merge duplicates.\n  for (var i = 0, event; (event = queue[i]); i++) {\n    if (!event.isNull()) {\n      var key = [event.type, event.blockId, event.workspaceId].join(' ');\n\n      var lastEntry = hash[key];\n      var lastEvent = lastEntry ? lastEntry.event : null;\n      if (!lastEntry) {\n        // Each item in the hash table has the event and the index of that event\n        // in the input array.  This lets us make sure we only merge adjacent\n        // move events.\n        hash[key] = { event: event, index: i};\n        mergedQueue.push(event);\n      } else if (event.type == Blockly.Events.MOVE &&\n          lastEntry.index == i - 1) {\n        // Merge move events.\n        lastEvent.newParentId = event.newParentId;\n        lastEvent.newInputName = event.newInputName;\n        lastEvent.newCoordinate = event.newCoordinate;\n        lastEntry.index = i;\n      } else if (event.type == Blockly.Events.CHANGE &&\n          event.element == lastEvent.element &&\n          event.name == lastEvent.name) {\n        // Merge change events.\n        lastEvent.newValue = event.newValue;\n      } else if (event.type == Blockly.Events.UI &&\n          event.element == 'click' &&\n          (lastEvent.element == 'commentOpen' ||\n           lastEvent.element == 'mutatorOpen' ||\n           lastEvent.element == 'warningOpen')) {\n        // Drop click events caused by opening/closing bubbles.\n      } else {\n        // Collision: newer events should merge into this event to maintain\n        // order.\n        hash[key] = {event: event, index: 1};\n        mergedQueue.push(event);\n      }\n    }\n  }\n  // Filter out any events that have become null due to merging.\n  queue = mergedQueue.filter(function(e) { return !e.isNull(); });\n  if (!forward) {\n    // Restore undo order.\n    queue.reverse();\n  }\n  // Move mutation events to the top of the queue.\n  // Intentionally skip first event.\n  for (var i = 1, event; (event = queue[i]); i++) {\n    if (event.type == Blockly.Events.CHANGE &&\n        event.element == 'mutation') {\n      queue.unshift(queue.splice(i, 1)[0]);\n    }\n  }\n  return queue;\n};\n\n/**\n * Modify pending undo events so that when they are fired they don't land\n * in the undo stack.  Called by Blockly.Workspace.clearUndo.\n */\nBlockly.Events.clearPendingUndo = function() {\n  for (var i = 0, event; (event = Blockly.Events.FIRE_QUEUE_[i]); i++) {\n    event.recordUndo = false;\n  }\n};\n\n/**\n * Stop sending events.  Every call to this function MUST also call enable.\n */\nBlockly.Events.disable = function() {\n  Blockly.Events.disabled_++;\n};\n\n/**\n * Start sending events.  Unless events were already disabled when the\n * corresponding call to disable was made.\n */\nBlockly.Events.enable = function() {\n  Blockly.Events.disabled_--;\n};\n\n/**\n * Returns whether events may be fired or not.\n * @return {boolean} True if enabled.\n */\nBlockly.Events.isEnabled = function() {\n  return Blockly.Events.disabled_ == 0;\n};\n\n/**\n * Current group.\n * @return {string} ID string.\n */\nBlockly.Events.getGroup = function() {\n  return Blockly.Events.group_;\n};\n\n/**\n * Start or stop a group.\n * @param {boolean|string} state True to start new group, false to end group.\n *   String to set group explicitly.\n */\nBlockly.Events.setGroup = function(state) {\n  if (typeof state == 'boolean') {\n    Blockly.Events.group_ = state ? Blockly.utils.genUid() : '';\n  } else {\n    Blockly.Events.group_ = state;\n  }\n};\n\n/**\n * Compute a list of the IDs of the specified block and all its descendants.\n * @param {!Blockly.Block} block The root block.\n * @return {!Array.<string>} List of block IDs.\n * @package\n */\nBlockly.Events.getDescendantIds = function(block) {\n  var ids = [];\n  var descendants = block.getDescendants(false);\n  for (var i = 0, descendant; (descendant = descendants[i]); i++) {\n    ids[i] = descendant.id;\n  }\n  return ids;\n};\n\n/**\n * Decode the JSON into an event.\n * @param {!Object} json JSON representation.\n * @param {!Blockly.Workspace} workspace Target workspace for event.\n * @return {!Blockly.Events.Abstract} The event represented by the JSON.\n * @throws {Error} if an event type is not found in the registry.\n */\nBlockly.Events.fromJson = function(json, workspace) {\n  var eventClass = Blockly.registry.getClass(Blockly.registry.Type.EVENT,\n      json.type);\n  if (!eventClass) {\n    throw Error('Unknown event type.');\n  }\n  var event = new eventClass();\n  event.fromJson(json);\n  event.workspaceId = workspace.id;\n  return event;\n};\n\n/**\n * Enable/disable a block depending on whether it is properly connected.\n * Use this on applications where all blocks should be connected to a top block.\n * Recommend setting the 'disable' option to 'false' in the config so that\n * users don't try to re-enable disabled orphan blocks.\n * @param {!Blockly.Events.Abstract} event Custom data for event.\n */\nBlockly.Events.disableOrphans = function(event) {\n  if (event.type == Blockly.Events.MOVE ||\n      event.type == Blockly.Events.CREATE) {\n    if (!event.workspaceId) {\n      return;\n    }\n    var workspace = Blockly.Workspace.getById(event.workspaceId);\n    var block = workspace.getBlockById(event.blockId);\n    if (block) {\n      var parent = block.getParent();\n      if (parent && parent.isEnabled()) {\n        var children = block.getDescendants(false);\n        for (var i = 0, child; (child = children[i]); i++) {\n          child.setEnabled(true);\n        }\n      } else if ((block.outputConnection || block.previousConnection) &&\n                 !workspace.isDragging()) {\n        do {\n          block.setEnabled(false);\n          block = block.getNextBlock();\n        } while (block);\n      }\n    }\n  }\n};\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Abstract class for events fired as a result of actions in\n *     Blockly's editor.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Events.Abstract');\n\ngoog.require('Blockly.Events');\n\n\n/**\n * Abstract class for an event.\n * @constructor\n */\nBlockly.Events.Abstract = function() {\n\n  /**\n   * Whether or not the event is blank (to be populated by fromJson).\n   * @type {?boolean}\n   */\n  this.isBlank = null;\n\n  /**\n   * The workspace identifier for this event.\n   * @type {string|undefined}\n   */\n  this.workspaceId = undefined;\n\n  /**\n   * The event group id for the group this event belongs to. Groups define\n   * events that should be treated as an single action from the user's\n   * perspective, and should be undone together.\n   * @type {string}\n   */\n  this.group = Blockly.Events.getGroup();\n\n  /**\n   * Sets whether the event should be added to the undo stack.\n   * @type {boolean}\n   */\n  this.recordUndo = Blockly.Events.recordUndo;\n};\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\nBlockly.Events.Abstract.prototype.toJson = function() {\n  var json = {\n    'type': this.type\n  };\n  if (this.group) {\n    json['group'] = this.group;\n  }\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.Abstract.prototype.fromJson = function(json) {\n  this.isBlank = false;\n  this.group = json['group'];\n};\n\n/**\n * Does this event record any change of state?\n * @return {boolean} True if null, false if something changed.\n */\nBlockly.Events.Abstract.prototype.isNull = function() {\n  return false;\n};\n\n/**\n * Run an event.\n * @param {boolean} _forward True if run forward, false if run backward (undo).\n */\nBlockly.Events.Abstract.prototype.run = function(_forward) {\n  // Defined by subclasses.\n};\n\n/**\n * Get workspace the event belongs to.\n * @return {!Blockly.Workspace} The workspace the event belongs to.\n * @throws {Error} if workspace is null.\n * @protected\n */\nBlockly.Events.Abstract.prototype.getEventWorkspace_ = function() {\n  if (this.workspaceId) {\n    var workspace = Blockly.Workspace.getById(this.workspaceId);\n  }\n  if (!workspace) {\n    throw Error('Workspace is null. Event must have been generated from real' +\n        ' Blockly events.');\n  }\n  return workspace;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for objects.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.utils.object');\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * @param {!Function} childCtor Child class.\n * @param {!Function} parentCtor Parent class.\n * @suppress {strictMissingProperties} superClass_ is not defined on Function.\n */\nBlockly.utils.object.inherits = function(childCtor, parentCtor) {\n  childCtor.superClass_ = parentCtor.prototype;\n  childCtor.prototype = Object.create(parentCtor.prototype);\n  childCtor.prototype.constructor = childCtor;\n};\n\n/**\n * Copies all the members of a source object to a target object.\n * @param {!Object} target Target.\n * @param {!Object} source Source.\n */\nBlockly.utils.object.mixin = function(target, source) {\n  for (var x in source) {\n    target[x] = source[x];\n  }\n};\n\n/**\n * Complete a deep merge of all members of a source object with a target object.\n * @param {!Object} target Target.\n * @param {!Object} source Source.\n * @return {!Object} The resulting object.\n */\nBlockly.utils.object.deepMerge = function(target, source) {\n  for (var x in source) {\n    if (source[x] != null && typeof source[x] === 'object') {\n      target[x] = Blockly.utils.object.deepMerge(\n          target[x] || Object.create(null), source[x]);\n    } else {\n      target[x] = source[x];\n    }\n  }\n  return target;\n};\n\n/**\n * Returns an array of a given object's own enumerable property values.\n * @param {!Object} obj Object containing values.\n * @return {!Array} Array of values.\n */\nBlockly.utils.object.values = function(obj) {\n  if (Object.values) {\n    /* eslint-disable es5/no-es6-methods */\n    return Object.values(obj);\n    /* eslint-enable es5/no-es6-methods */\n  }\n  // Fallback for IE.\n  return Object.keys(obj).map(function(e) {\n    return obj[e];\n  });\n};\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Events fired as a result of UI actions in Blockly's editor.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Events.Ui');\n\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.Abstract');\ngoog.require('Blockly.registry');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * Class for a UI event.\n * UI events are events that don't need to be sent over the wire for multi-user\n * editing to work (e.g. scrolling the workspace, zooming, opening toolbox\n * categories).\n * UI events do not undo or redo.\n * @param {?Blockly.Block=} opt_block The affected block.  Null for UI events\n *     that do not have an associated block.  Undefined for a blank event.\n * @param {string=} opt_element One of 'selected', 'comment', 'mutatorOpen',\n *     etc.\n * @param {*=} opt_oldValue Previous value of element.\n * @param {*=} opt_newValue New value of element.\n * @extends {Blockly.Events.Abstract}\n * @constructor\n */\nBlockly.Events.Ui = function(opt_block, opt_element, opt_oldValue,\n    opt_newValue) {\n  Blockly.Events.Ui.superClass_.constructor.call(this);\n  this.isBlank = typeof opt_block == 'undefined';\n\n  this.blockId = opt_block ? opt_block.id : null;\n  this.workspaceId = opt_block ? opt_block.workspace.id : undefined;\n  this.element = typeof opt_element == 'undefined' ? '' : opt_element;\n  this.oldValue = typeof opt_oldValue == 'undefined' ? '' : opt_oldValue;\n  this.newValue = typeof opt_newValue == 'undefined' ? '' : opt_newValue;\n  // UI events do not undo or redo.\n  this.recordUndo = false;\n};\nBlockly.utils.object.inherits(Blockly.Events.Ui, Blockly.Events.Abstract);\n\n/**\n * Type of this event.\n * @type {string}\n */\nBlockly.Events.Ui.prototype.type = Blockly.Events.UI;\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\nBlockly.Events.Ui.prototype.toJson = function() {\n  var json = Blockly.Events.Ui.superClass_.toJson.call(this);\n  json['element'] = this.element;\n  if (this.newValue !== undefined) {\n    json['newValue'] = this.newValue;\n  }\n  if (this.blockId) {\n    json['blockId'] = this.blockId;\n  }\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.Ui.prototype.fromJson = function(json) {\n  Blockly.Events.Ui.superClass_.fromJson.call(this, json);\n  this.element = json['element'];\n  this.newValue = json['newValue'];\n  this.blockId = json['blockId'];\n};\n\nBlockly.registry.register(Blockly.registry.Type.EVENT, Blockly.Events.UI,\n    Blockly.Events.Ui);\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Defines the Blockly.utils.Svg class. Its constants enumerate\n * all SVG tag names used by Blockly.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\n/**\n * @name Blockly.utils.Svg\n * @namespace\n */\ngoog.provide('Blockly.utils.Svg');\n\n\n/**\n * A name with the type of the SVG element stored in the generic.\n * @param {string} tagName The SVG element tag name.\n * @constructor\n * @template T\n * @private\n */\nBlockly.utils.Svg = function(tagName) {\n  /**\n   * @type {string}\n   * @private\n   */\n  this.tagName_ = tagName;\n};\n\n/**\n * Returns the SVG element tag name.\n * @return {string} The name.\n * @override\n */\nBlockly.utils.Svg.prototype.toString = function() {\n  return this.tagName_;\n};\n\n/** @type {!Blockly.utils.Svg<!SVGAnimateElement>}\n * @package\n */\nBlockly.utils.Svg.ANIMATE =\n    new Blockly.utils.Svg('animate');\n\n/** @type {!Blockly.utils.Svg<!SVGCircleElement>}\n* @package\n */\nBlockly.utils.Svg.CIRCLE =\n    new Blockly.utils.Svg('circle');\n\n/** @type {!Blockly.utils.Svg<!SVGClipPathElement>}\n * @package\n */\nBlockly.utils.Svg.CLIPPATH =\n    new Blockly.utils.Svg('clipPath');\n\n/** @type {!Blockly.utils.Svg<!SVGDefsElement>}\n * @package\n */\nBlockly.utils.Svg.DEFS =\n    new Blockly.utils.Svg('defs');\n\n/** @type {!Blockly.utils.Svg<!SVGFECompositeElement>}\n * @package\n */\nBlockly.utils.Svg.FECOMPOSITE =\n    new Blockly.utils.Svg('feComposite');\n\n/** @type {!Blockly.utils.Svg<!SVGFEComponentTransferElement>}\n * @package\n */\nBlockly.utils.Svg.FECOMPONENTTRANSFER =\n    new Blockly.utils.Svg('feComponentTransfer');\n\n/** @type {!Blockly.utils.Svg<!SVGFEFloodElement>}\n * @package\n */\nBlockly.utils.Svg.FEFLOOD =\n    new Blockly.utils.Svg('feFlood');\n\n/** @type {!Blockly.utils.Svg<!SVGFEFuncAElement>}\n * @package\n */\nBlockly.utils.Svg.FEFUNCA =\n    new Blockly.utils.Svg('feFuncA');\n\n/** @type {!Blockly.utils.Svg<!SVGFEGaussianBlurElement>}\n * @package\n */\nBlockly.utils.Svg.FEGAUSSIANBLUR =\n    new Blockly.utils.Svg('feGaussianBlur');\n\n/** @type {!Blockly.utils.Svg<!SVGFEPointLightElement>}\n * @package\n */\nBlockly.utils.Svg.FEPOINTLIGHT =\n    new Blockly.utils.Svg('fePointLight');\n\n/** @type {!Blockly.utils.Svg<!SVGFESpecularLightingElement>}\n * @package\n */\nBlockly.utils.Svg.FESPECULARLIGHTING =\n    new Blockly.utils.Svg('feSpecularLighting');\n\n/** @type {!Blockly.utils.Svg<!SVGFilterElement>}\n * @package\n */\nBlockly.utils.Svg.FILTER =\n    new Blockly.utils.Svg('filter');\n\n/** @type {!Blockly.utils.Svg<!SVGForeignObjectElement>}\n * @package\n */\nBlockly.utils.Svg.FOREIGNOBJECT =\n    new Blockly.utils.Svg('foreignObject');\n\n/** @type {!Blockly.utils.Svg<!SVGGElement>}\n * @package\n */\nBlockly.utils.Svg.G =\n    new Blockly.utils.Svg('g');\n\n/** @type {!Blockly.utils.Svg<!SVGImageElement>}\n * @package\n */\nBlockly.utils.Svg.IMAGE =\n    new Blockly.utils.Svg('image');\n\n/** @type {!Blockly.utils.Svg<!SVGLineElement>}\n * @package\n */\nBlockly.utils.Svg.LINE =\n    new Blockly.utils.Svg('line');\n\n/** @type {!Blockly.utils.Svg<!SVGPathElement>}\n * @package\n */\nBlockly.utils.Svg.PATH =\n    new Blockly.utils.Svg('path');\n\n/** @type {!Blockly.utils.Svg<!SVGPatternElement>}\n * @package\n */\nBlockly.utils.Svg.PATTERN =\n    new Blockly.utils.Svg('pattern');\n\n/** @type {!Blockly.utils.Svg<!SVGPolygonElement>}\n * @package\n */\nBlockly.utils.Svg.POLYGON =\n    new Blockly.utils.Svg('polygon');\n\n/** @type {!Blockly.utils.Svg<!SVGRectElement>}\n * @package\n */\nBlockly.utils.Svg.RECT =\n    new Blockly.utils.Svg('rect');\n\n/** @type {!Blockly.utils.Svg<!SVGSVGElement>}\n * @package\n */\nBlockly.utils.Svg.SVG =\n    new Blockly.utils.Svg('svg');\n\n/** @type {!Blockly.utils.Svg<!SVGTextElement>}\n * @package\n */\nBlockly.utils.Svg.TEXT =\n    new Blockly.utils.Svg('text');\n\n/** @type {!Blockly.utils.Svg<!SVGTSpanElement>}\n * @package\n */\nBlockly.utils.Svg.TSPAN =\n    new Blockly.utils.Svg('tspan');\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for DOM manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.utils.dom\n * @namespace\n */\ngoog.provide('Blockly.utils.dom');\n\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.userAgent');\n\n\n/**\n * Required name space for SVG elements.\n * @const\n */\nBlockly.utils.dom.SVG_NS = 'http://www.w3.org/2000/svg';\n\n/**\n * Required name space for HTML elements.\n * @const\n */\nBlockly.utils.dom.HTML_NS = 'http://www.w3.org/1999/xhtml';\n\n/**\n * Required name space for XLINK elements.\n * @const\n */\nBlockly.utils.dom.XLINK_NS = 'http://www.w3.org/1999/xlink';\n\n/**\n * Node type constants.\n * https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\n * @enum {number}\n */\nBlockly.utils.dom.NodeType = {\n  ELEMENT_NODE: 1,\n  TEXT_NODE: 3,\n  COMMENT_NODE: 8,\n  DOCUMENT_POSITION_CONTAINED_BY: 16\n};\n\n/**\n * Temporary cache of text widths.\n * @type {Object}\n * @private\n */\nBlockly.utils.dom.cacheWidths_ = null;\n\n/**\n * Number of current references to cache.\n * @type {number}\n * @private\n */\nBlockly.utils.dom.cacheReference_ = 0;\n\n/**\n * A HTML canvas context used for computing text width.\n * @type {CanvasRenderingContext2D}\n * @private\n */\nBlockly.utils.dom.canvasContext_ = null;\n\n/**\n * Helper method for creating SVG elements.\n * @param {string|Blockly.utils.Svg<T>} name Element's tag name.\n * @param {!Object} attrs Dictionary of attribute names and values.\n * @param {Element=} opt_parent Optional parent on which to append the element.\n * @return {T} Newly created SVG element.  The return type is {!SVGElement} if\n *     name is a string or a more specific type if it a member of\n *     Blockly.utils.Svg\n * @template T\n */\nBlockly.utils.dom.createSvgElement = function(name, attrs, opt_parent) {\n  var e = /** @type {T} */\n      (document.createElementNS(Blockly.utils.dom.SVG_NS, String(name)));\n  for (var key in attrs) {\n    e.setAttribute(key, attrs[key]);\n  }\n  // IE defines a unique attribute \"runtimeStyle\", it is NOT applied to\n  // elements created with createElementNS. However, Closure checks for IE\n  // and assumes the presence of the attribute and crashes.\n  if (document.body.runtimeStyle) {  // Indicates presence of IE-only attr.\n    e.runtimeStyle = e.currentStyle = e.style;\n  }\n  if (opt_parent) {\n    opt_parent.appendChild(e);\n  }\n  return e;\n};\n\n/**\n * Add a CSS class to a element.\n * Similar to Closure's goog.dom.classes.add, except it handles SVG elements.\n * @param {!Element} element DOM element to add class to.\n * @param {string} className Name of class to add.\n * @return {boolean} True if class was added, false if already present.\n */\nBlockly.utils.dom.addClass = function(element, className) {\n  var classes = element.getAttribute('class') || '';\n  if ((' ' + classes + ' ').indexOf(' ' + className + ' ') != -1) {\n    return false;\n  }\n  if (classes) {\n    classes += ' ';\n  }\n  element.setAttribute('class', classes + className);\n  return true;\n};\n\n/**\n * Removes multiple calsses from an element.\n * @param {!Element} element DOM element to remove classes from.\n * @param {string} classNames A string of one or multiple class names for an\n *    element.\n */\nBlockly.utils.dom.removeClasses = function(element, classNames) {\n  var classList = classNames.split(' ');\n  for (var i = 0; i < classList.length; i++) {\n    var cssName = classList[i];\n    Blockly.utils.dom.removeClass(element, cssName);\n  }\n};\n\n/**\n * Remove a CSS class from a element.\n * Similar to Closure's goog.dom.classes.remove, except it handles SVG elements.\n * @param {!Element} element DOM element to remove class from.\n * @param {string} className Name of class to remove.\n * @return {boolean} True if class was removed, false if never present.\n */\nBlockly.utils.dom.removeClass = function(element, className) {\n  var classes = element.getAttribute('class');\n  if ((' ' + classes + ' ').indexOf(' ' + className + ' ') == -1) {\n    return false;\n  }\n  var classList = classes.split(/\\s+/);\n  for (var i = 0; i < classList.length; i++) {\n    if (!classList[i] || classList[i] == className) {\n      classList.splice(i, 1);\n      i--;\n    }\n  }\n  if (classList.length) {\n    element.setAttribute('class', classList.join(' '));\n  } else {\n    element.removeAttribute('class');\n  }\n  return true;\n};\n\n/**\n * Checks if an element has the specified CSS class.\n * Similar to Closure's goog.dom.classes.has, except it handles SVG elements.\n * @param {!Element} element DOM element to check.\n * @param {string} className Name of class to check.\n * @return {boolean} True if class exists, false otherwise.\n */\nBlockly.utils.dom.hasClass = function(element, className) {\n  var classes = element.getAttribute('class');\n  return (' ' + classes + ' ').indexOf(' ' + className + ' ') != -1;\n};\n\n/**\n * Removes a node from its parent. No-op if not attached to a parent.\n * @param {Node} node The node to remove.\n * @return {Node} The node removed if removed; else, null.\n */\n// Copied from Closure goog.dom.removeNode\nBlockly.utils.dom.removeNode = function(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n};\n\n/**\n * Insert a node after a reference node.\n * Contrast with node.insertBefore function.\n * @param {!Element} newNode New element to insert.\n * @param {!Element} refNode Existing element to precede new node.\n */\nBlockly.utils.dom.insertAfter = function(newNode, refNode) {\n  var siblingNode = refNode.nextSibling;\n  var parentNode = refNode.parentNode;\n  if (!parentNode) {\n    throw Error('Reference node has no parent.');\n  }\n  if (siblingNode) {\n    parentNode.insertBefore(newNode, siblingNode);\n  } else {\n    parentNode.appendChild(newNode);\n  }\n};\n\n/**\n * Whether a node contains another node.\n * @param {!Node} parent The node that should contain the other node.\n * @param {!Node} descendant The node to test presence of.\n * @return {boolean} Whether the parent node contains the descendant node.\n */\nBlockly.utils.dom.containsNode = function(parent, descendant) {\n  return !!(parent.compareDocumentPosition(descendant) &\n            Blockly.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY);\n};\n\n/**\n * Sets the CSS transform property on an element. This function sets the\n * non-vendor-prefixed and vendor-prefixed versions for backwards compatibility\n * with older browsers. See https://caniuse.com/#feat=transforms2d\n * @param {!Element} element Element to which the CSS transform will be applied.\n * @param {string} transform The value of the CSS `transform` property.\n */\nBlockly.utils.dom.setCssTransform = function(element, transform) {\n  element.style['transform'] = transform;\n  element.style['-webkit-transform'] = transform;\n};\n\n/**\n * Start caching text widths. Every call to this function MUST also call\n * stopTextWidthCache. Caches must not survive between execution threads.\n */\nBlockly.utils.dom.startTextWidthCache = function() {\n  Blockly.utils.dom.cacheReference_++;\n  if (!Blockly.utils.dom.cacheWidths_) {\n    Blockly.utils.dom.cacheWidths_ = {};\n  }\n};\n\n/**\n * Stop caching field widths. Unless caching was already on when the\n * corresponding call to startTextWidthCache was made.\n */\nBlockly.utils.dom.stopTextWidthCache = function() {\n  Blockly.utils.dom.cacheReference_--;\n  if (!Blockly.utils.dom.cacheReference_) {\n    Blockly.utils.dom.cacheWidths_ = null;\n  }\n};\n\n/**\n * Gets the width of a text element, caching it in the process.\n * @param {!Element} textElement An SVG 'text' element.\n * @return {number} Width of element.\n */\nBlockly.utils.dom.getTextWidth = function(textElement) {\n  var key = textElement.textContent + '\\n' + textElement.className.baseVal;\n  var width;\n\n  // Return the cached width if it exists.\n  if (Blockly.utils.dom.cacheWidths_) {\n    width = Blockly.utils.dom.cacheWidths_[key];\n    if (width) {\n      return width;\n    }\n  }\n\n  // Attempt to compute fetch the width of the SVG text element.\n  try {\n    if (Blockly.utils.userAgent.IE || Blockly.utils.userAgent.EDGE) {\n      width = textElement.getBBox().width;\n    } else {\n      width = textElement.getComputedTextLength();\n    }\n  } catch (e) {\n    // In other cases where we fail to get the computed text. Instead, use an\n    // approximation and do not cache the result. At some later point in time\n    // when the block is inserted into the visible DOM, this method will be\n    // called again and, at that point in time, will not throw an exception.\n    return textElement.textContent.length * 8;\n  }\n\n  // Cache the computed width and return.\n  if (Blockly.utils.dom.cacheWidths_) {\n    Blockly.utils.dom.cacheWidths_[key] = width;\n  }\n  return width;\n};\n\n/**\n * Gets the width of a text element using a faster method than `getTextWidth`.\n * This method requires that we know the text element's font family and size in\n * advance. Similar to `getTextWidth`, we cache the width we compute.\n * @param {!Element} textElement An SVG 'text' element.\n * @param {number} fontSize The font size to use.\n * @param {string} fontWeight The font weight to use.\n * @param {string} fontFamily The font family to use.\n * @return {number} Width of element.\n */\nBlockly.utils.dom.getFastTextWidth = function(textElement,\n    fontSize, fontWeight, fontFamily) {\n  return Blockly.utils.dom.getFastTextWidthWithSizeString(textElement,\n      fontSize + 'pt', fontWeight, fontFamily);\n};\n\n/**\n * Gets the width of a text element using a faster method than `getTextWidth`.\n * This method requires that we know the text element's font family and size in\n * advance. Similar to `getTextWidth`, we cache the width we compute.\n * This method is similar to ``getFastTextWidth`` but expects the font size\n * parameter to be a string.\n * @param {!Element} textElement An SVG 'text' element.\n * @param {string} fontSize The font size to use.\n * @param {string} fontWeight The font weight to use.\n * @param {string} fontFamily The font family to use.\n * @return {number} Width of element.\n */\nBlockly.utils.dom.getFastTextWidthWithSizeString = function(textElement,\n    fontSize, fontWeight, fontFamily) {\n  var text = textElement.textContent;\n  var key = text + '\\n' + textElement.className.baseVal;\n  var width;\n\n  // Return the cached width if it exists.\n  if (Blockly.utils.dom.cacheWidths_) {\n    width = Blockly.utils.dom.cacheWidths_[key];\n    if (width) {\n      return width;\n    }\n  }\n\n  if (!Blockly.utils.dom.canvasContext_) {\n    // Inject the canvas element used for computing text widths.\n    var computeCanvas = document.createElement('canvas');\n    computeCanvas.className = 'blocklyComputeCanvas';\n    document.body.appendChild(computeCanvas);\n\n    // Initialize the HTML canvas context and set the font.\n    // The context font must match blocklyText's fontsize and font-family\n    // set in CSS.\n    Blockly.utils.dom.canvasContext_ = computeCanvas.getContext('2d');\n  }\n  // Set the desired font size and family.\n  Blockly.utils.dom.canvasContext_.font =\n      fontWeight + ' ' + fontSize + ' ' + fontFamily;\n\n  // Measure the text width using the helper canvas context.\n  width = Blockly.utils.dom.canvasContext_.measureText(text).width;\n\n  // Cache the computed width and return.\n  if (Blockly.utils.dom.cacheWidths_) {\n    Blockly.utils.dom.cacheWidths_[key] = width;\n  }\n  return width;\n};\n\n/**\n * Measure a font's metrics. The height and baseline values.\n * @param {string} text Text to measure the font dimensions of.\n * @param {string} fontSize The font size to use.\n * @param {string} fontWeight The font weight to use.\n * @param {string} fontFamily The font family to use.\n * @return {{height: number, baseline: number}} Font measurements.\n */\nBlockly.utils.dom.measureFontMetrics = function(text, fontSize, fontWeight,\n    fontFamily) {\n\n  var span = document.createElement('span');\n  span.style.font = fontWeight + ' ' + fontSize + ' ' + fontFamily;\n  span.textContent = text;\n\n  var block = document.createElement('div');\n  block.style.width = '1px';\n  block.style.height = '0px';\n\n  var div = document.createElement('div');\n  div.setAttribute('style', 'position: fixed; top: 0; left: 0; display: flex;');\n  div.appendChild(span);\n  div.appendChild(block);\n\n  document.body.appendChild(div);\n  try {\n    var result = {};\n    div.style.alignItems = 'baseline';\n    result.baseline = block.offsetTop - span.offsetTop;\n    div.style.alignItems = 'flex-end';\n    result.height = block.offsetTop - span.offsetTop;\n  } finally {\n    document.body.removeChild(div);\n  }\n  return result;\n};\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A class that manages a surface for dragging blocks.  When a\n * block drag is started, we move the block (and children) to a separate DOM\n * element that we move around using translate3d. At the end of the drag, the\n * blocks are put back in into the SVG they came from. This helps performance by\n * avoiding repainting the entire SVG on every mouse move while dragging blocks.\n * @author picklesrus\n */\n\n'use strict';\n\ngoog.provide('Blockly.BlockDragSurfaceSvg');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for a drag surface for the currently dragged block. This is a separate\n * SVG that contains only the currently moving block, or nothing.\n * @param {!Element} container Containing element.\n * @constructor\n */\nBlockly.BlockDragSurfaceSvg = function(container) {\n  /**\n   * @type {!Element}\n   * @private\n   */\n  this.container_ = container;\n  this.createDom();\n};\n\n/**\n * The SVG drag surface. Set once by Blockly.BlockDragSurfaceSvg.createDom.\n * @type {SVGElement}\n * @private\n */\nBlockly.BlockDragSurfaceSvg.prototype.SVG_ = null;\n\n/**\n * This is where blocks live while they are being dragged if the drag surface\n * is enabled.\n * @type {SVGElement}\n * @private\n */\nBlockly.BlockDragSurfaceSvg.prototype.dragGroup_ = null;\n\n/**\n * Containing HTML element; parent of the workspace and the drag surface.\n * @type {Element}\n * @private\n */\nBlockly.BlockDragSurfaceSvg.prototype.container_ = null;\n\n/**\n * Cached value for the scale of the drag surface.\n * Used to set/get the correct translation during and after a drag.\n * @type {number}\n * @private\n */\nBlockly.BlockDragSurfaceSvg.prototype.scale_ = 1;\n\n/**\n * Cached value for the translation of the drag surface.\n * This translation is in pixel units, because the scale is applied to the\n * drag group rather than the top-level SVG.\n * @type {Blockly.utils.Coordinate}\n * @private\n */\nBlockly.BlockDragSurfaceSvg.prototype.surfaceXY_ = null;\n\n/**\n * Create the drag surface and inject it into the container.\n */\nBlockly.BlockDragSurfaceSvg.prototype.createDom = function() {\n  if (this.SVG_) {\n    return;  // Already created.\n  }\n  this.SVG_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.SVG, {\n        'xmlns': Blockly.utils.dom.SVG_NS,\n        'xmlns:html': Blockly.utils.dom.HTML_NS,\n        'xmlns:xlink': Blockly.utils.dom.XLINK_NS,\n        'version': '1.1',\n        'class': 'blocklyBlockDragSurface'\n      }, this.container_);\n  this.dragGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G, {}, this.SVG_);\n};\n\n/**\n * Set the SVG blocks on the drag surface's group and show the surface.\n * Only one block group should be on the drag surface at a time.\n * @param {!SVGElement} blocks Block or group of blocks to place on the drag\n * surface.\n */\nBlockly.BlockDragSurfaceSvg.prototype.setBlocksAndShow = function(blocks) {\n  if (this.dragGroup_.childNodes.length) {\n    throw Error('Already dragging a block.');\n  }\n  // appendChild removes the blocks from the previous parent\n  this.dragGroup_.appendChild(blocks);\n  this.SVG_.style.display = 'block';\n  this.surfaceXY_ = new Blockly.utils.Coordinate(0, 0);\n};\n\n/**\n * Translate and scale the entire drag surface group to the given position, to\n * keep in sync with the workspace.\n * @param {number} x X translation in workspace coordinates.\n * @param {number} y Y translation in workspace coordinates.\n * @param {number} scale Scale of the group.\n */\nBlockly.BlockDragSurfaceSvg.prototype.translateAndScaleGroup = function(x, y,\n    scale) {\n  this.scale_ = scale;\n  // This is a work-around to prevent a the blocks from rendering\n  // fuzzy while they are being dragged on the drag surface.\n  var fixedX = x.toFixed(0);\n  var fixedY = y.toFixed(0);\n  this.dragGroup_.setAttribute('transform',\n      'translate(' + fixedX + ',' + fixedY + ') scale(' + scale + ')');\n};\n\n/**\n * Translate the drag surface's SVG based on its internal state.\n * @private\n */\nBlockly.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_ = function() {\n  var x = this.surfaceXY_.x;\n  var y = this.surfaceXY_.y;\n  // This is a work-around to prevent a the blocks from rendering\n  // fuzzy while they are being dragged on the drag surface.\n  x = x.toFixed(0);\n  y = y.toFixed(0);\n  this.SVG_.style.display = 'block';\n\n  Blockly.utils.dom.setCssTransform(this.SVG_,\n      'translate3d(' + x + 'px, ' + y + 'px, 0px)');\n};\n\n/**\n * Translate the entire drag surface during a drag.\n * We translate the drag surface instead of the blocks inside the surface\n * so that the browser avoids repainting the SVG.\n * Because of this, the drag coordinates must be adjusted by scale.\n * @param {number} x X translation for the entire surface.\n * @param {number} y Y translation for the entire surface.\n */\nBlockly.BlockDragSurfaceSvg.prototype.translateSurface = function(x, y) {\n  this.surfaceXY_ = new Blockly.utils.Coordinate(x * this.scale_, y * this.scale_);\n  this.translateSurfaceInternal_();\n};\n\n/**\n * Reports the surface translation in scaled workspace coordinates.\n * Use this when finishing a drag to return blocks to the correct position.\n * @return {!Blockly.utils.Coordinate} Current translation of the surface.\n */\nBlockly.BlockDragSurfaceSvg.prototype.getSurfaceTranslation = function() {\n  var xy = Blockly.utils.getRelativeXY(/** @type {!SVGElement} */ (this.SVG_));\n  return new Blockly.utils.Coordinate(xy.x / this.scale_, xy.y / this.scale_);\n};\n\n/**\n * Provide a reference to the drag group (primarily for\n * BlockSvg.getRelativeToSurfaceXY).\n * @return {SVGElement} Drag surface group element.\n */\nBlockly.BlockDragSurfaceSvg.prototype.getGroup = function() {\n  return this.dragGroup_;\n};\n\n/**\n * Get the current blocks on the drag surface, if any (primarily\n * for BlockSvg.getRelativeToSurfaceXY).\n * @return {Element} Drag surface block DOM element, or undefined if no blocks\n * exist.\n */\nBlockly.BlockDragSurfaceSvg.prototype.getCurrentBlock = function() {\n  return /** @type {Element} */ (this.dragGroup_.firstChild);\n};\n\n/**\n * Clear the group and hide the surface; move the blocks off onto the provided\n * element.\n * If the block is being deleted it doesn't need to go back to the original\n * surface, since it would be removed immediately during dispose.\n * @param {Element=} opt_newSurface Surface the dragging blocks should be moved\n *     to, or null if the blocks should be removed from this surface without\n *     being moved to a different surface.\n */\nBlockly.BlockDragSurfaceSvg.prototype.clearAndHide = function(opt_newSurface) {\n  if (opt_newSurface) {\n    // appendChild removes the node from this.dragGroup_\n    opt_newSurface.appendChild(this.getCurrentBlock());\n  } else {\n    this.dragGroup_.removeChild(this.getCurrentBlock());\n  }\n  this.SVG_.style.display = 'none';\n  if (this.dragGroup_.childNodes.length) {\n    throw Error('Drag group was not cleared.');\n  }\n  this.surfaceXY_ = null;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generator for unique element IDs.\n * For UUIDs use Blockly.utils.genUid. The ID generator should primarily be\n * used for IDs that end up in the DOM.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.utils.IdGenerator');\n\n\n/**\n * Next unique ID to use.\n * @type {number}\n * @private\n */\nBlockly.utils.IdGenerator.nextId_ = 0;\n\n/**\n * Gets the next unique ID.\n * IDs are compatible with the HTML4 id attribute restrictions:\n * Use only ASCII letters, digits, '_', '-' and '.'\n * @return {string} The next unique identifier.\n */\nBlockly.utils.IdGenerator.getNextUniqueId = function() {\n  return 'blockly-' + (Blockly.utils.IdGenerator.nextId_++).toString(36);\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Definition of the Blockly.Component class.\n * This class is similar to Closure's goog.ui.Component class.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.Component');\n\ngoog.provide('Blockly.Component.Error');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.IdGenerator');\ngoog.require('Blockly.utils.style');\n\n\n/**\n * Default implementation of a UI component.\n * Similar to Closure's goog.ui.Component.\n *\n * @constructor\n */\nBlockly.Component = function() {\n\n  /**\n   * Whether the component is rendered right-to-left.\n   * @type {boolean}\n   * @protected\n   */\n  this.rightToLeft_ = Blockly.Component.defaultRightToLeft;\n\n  /**\n   * Unique ID of the component, lazily initialized in {@link\n   * Blockly.Component#getId} if needed.  This property is strictly private and\n   * must not be accessed directly outside of this class!\n   * @type {?string}\n   * @private\n   */\n  this.id_ = null;\n\n  /**\n   * Whether the component is in the document.\n   * @type {boolean}\n   * @private\n   */\n  this.inDocument_ = false;\n\n  /**\n   * The DOM element for the component.\n   * @type {?Element}\n   * @private\n   */\n  this.element_ = null;\n\n  /**\n   * Parent component to which events will be propagated.  This property is\n   * strictly private and must not be accessed directly outside of this class!\n   * @type {?Blockly.Component}\n   * @private\n   */\n  this.parent_ = null;\n\n  /**\n   * Array of child components.\n   * Must be kept in sync with `childIndex_`.  This property is strictly\n   * private and must not be accessed directly outside of this class!\n   * @type {?Array.<?Blockly.Component>}\n   * @private\n   */\n  this.children_ = [];\n\n  /**\n   * Map of child component IDs to child components.  Used for constant-time\n   * random access to child components by ID.\n   * Must be kept in sync with `children_`.  This property is strictly\n   * private and must not be accessed directly outside of this class!\n   *\n   * @type {?Object}\n   * @private\n   */\n  this.childIndex_ = {};\n\n  /**\n   * Whether or not the component has been disposed.\n   * @type {boolean}\n   * @private\n   */\n  this.disposed_ = false;\n};\n\n\n/**\n * The default right to left value.\n * @type {boolean}\n * @package\n */\nBlockly.Component.defaultRightToLeft = false;\n\n/**\n * Errors thrown by the component.\n * @enum {string}\n */\nBlockly.Component.Error = {\n  /**\n   * Error when the component is already rendered and another render attempt is\n   * made.\n   */\n  ALREADY_RENDERED: 'Component already rendered',\n\n  /**\n   * Error when an attempt is made to set the parent of a component in a way\n   * that would result in an inconsistent object graph.\n   */\n  PARENT_UNABLE_TO_BE_SET: 'Unable to set parent component',\n\n  /**\n   * Error when an attempt is made to add a child component at an out-of-bounds\n   * index.  We don't support sparse child arrays.\n   */\n  CHILD_INDEX_OUT_OF_BOUNDS: 'Child component index out of bounds',\n\n  /**\n   * Error when calling an abstract method that should be overriden.\n   */\n  ABSTRACT_METHOD: 'Unimplemented abstract method'\n};\n\n/**\n * Gets the unique ID for the instance of this component.  If the instance\n * doesn't already have an ID, generates one on the fly.\n * @return {string} Unique component ID.\n * @package\n */\nBlockly.Component.prototype.getId = function() {\n  return this.id_ || (this.id_ = Blockly.utils.IdGenerator.getNextUniqueId());\n};\n\n/**\n * Gets the component's element.\n * @return {Element} The element for the component.\n * @package\n */\nBlockly.Component.prototype.getElement = function() {\n  return this.element_;\n};\n\n/**\n * Sets the component's root element to the given element.  Considered\n * protected and final.\n *\n * This should generally only be called during createDom. Setting the element\n * does not actually change which element is rendered, only the element that is\n * associated with this UI component.\n *\n * This should only be used by subclasses and its associated renderers.\n *\n * @param {Element} element Root element for the component.\n * @protected\n */\nBlockly.Component.prototype.setElementInternal = function(element) {\n  this.element_ = element;\n};\n\n/**\n * Sets the parent of this component to use for event bubbling.  Throws an error\n * if the component already has a parent or if an attempt is made to add a\n * component to itself as a child.\n * @param {Blockly.Component} parent The parent component.\n * @protected\n */\nBlockly.Component.prototype.setParent = function(parent) {\n  if (this == parent) {\n    // Attempting to add a child to itself is an error.\n    throw Error(Blockly.Component.Error.PARENT_UNABLE_TO_BE_SET);\n  }\n\n  if (parent && this.parent_ && this.id_ && this.parent_.getChild(this.id_) &&\n      this.parent_ != parent) {\n    // This component is already the child of some parent.\n    throw Error(Blockly.Component.Error.PARENT_UNABLE_TO_BE_SET);\n  }\n\n  this.parent_ = parent;\n};\n\n/**\n * Returns the component's parent, if any.\n * @return {?Blockly.Component} The parent component.\n * @protected\n */\nBlockly.Component.prototype.getParent = function() {\n  return this.parent_;\n};\n\n/**\n * Determines whether the component has been added to the document.\n * @return {boolean} TRUE if rendered. Otherwise, FALSE.\n * @protected\n */\nBlockly.Component.prototype.isInDocument = function() {\n  return this.inDocument_;\n};\n\n/**\n * Creates the initial DOM representation for the component.\n * @protected\n */\nBlockly.Component.prototype.createDom = function() {\n  throw Error(Blockly.Component.Error.ABSTRACT_METHOD);\n};\n\n/**\n * Renders the component.  If a parent element is supplied, the component's\n * element will be appended to it.  If there is no optional parent element and\n * the element doesn't have a parentNode then it will be appended to the\n * document body.\n *\n * If this component has a parent component, and the parent component is\n * not in the document already, then this will not call `enterDocument`\n * on this component.\n *\n * Throws an Error if the component is already rendered.\n *\n * @param {Element=} opt_parentElement Optional parent element to render the\n *    component into.\n * @package\n */\nBlockly.Component.prototype.render = function(opt_parentElement) {\n  this.render_(opt_parentElement);\n};\n\n/**\n * Renders the component.  If a parent element is supplied, the component's\n * element will be appended to it.  If there is no optional parent element and\n * the element doesn't have a parentNode then it will be appended to the\n * document body.\n *\n * If this component has a parent component, and the parent component is\n * not in the document already, then this will not call `enterDocument`\n * on this component.\n *\n * Throws an Error if the component is already rendered.\n *\n * @param {Element=} opt_parentElement Optional parent element to render the\n *    component into.\n * @param {Node=} opt_beforeNode Node before which the component is to\n *    be rendered.  If left out the node is appended to the parent element.\n * @private\n */\nBlockly.Component.prototype.render_ = function(\n    opt_parentElement, opt_beforeNode) {\n  if (this.inDocument_) {\n    throw Error(Blockly.Component.Error.ALREADY_RENDERED);\n  }\n\n  if (!this.element_) {\n    this.createDom();\n  }\n\n  if (opt_parentElement) {\n    opt_parentElement.insertBefore(this.element_, opt_beforeNode || null);\n  } else {\n    document.body.appendChild(this.element_);\n  }\n\n  // If this component has a parent component that isn't in the document yet,\n  // we don't call enterDocument() here.  Instead, when the parent component\n  // enters the document, the enterDocument() call will propagate to its\n  // children, including this one.  If the component doesn't have a parent\n  // or if the parent is already in the document, we call enterDocument().\n  if (!this.parent_ || this.parent_.isInDocument()) {\n    this.enterDocument();\n  }\n};\n\n/**\n * Called when the component's element is known to be in the document. Anything\n * using document.getElementById etc. should be done at this stage.\n *\n * If the component contains child components, this call is propagated to its\n * children.\n * @protected\n */\nBlockly.Component.prototype.enterDocument = function() {\n  this.inDocument_ = true;\n\n  // Propagate enterDocument to child components that have a DOM, if any.\n  // If a child was decorated before entering the document (permitted when\n  // Blockly.Component.ALLOW_DETACHED_DECORATION is true), its enterDocument\n  // will be called here.\n  this.forEachChild(function(child) {\n    if (!child.isInDocument() && child.getElement()) {\n      child.enterDocument();\n    }\n  });\n};\n\n/**\n * Called by dispose to clean up the elements and listeners created by a\n * component, or by a parent component/application who has removed the\n * component from the document but wants to reuse it later.\n *\n * If the component contains child components, this call is propagated to its\n * children.\n *\n * It should be possible for the component to be rendered again once this method\n * has been called.\n * @protected\n */\nBlockly.Component.prototype.exitDocument = function() {\n  // Propagate exitDocument to child components that have been rendered, if any.\n  this.forEachChild(function(child) {\n    if (child.isInDocument()) {\n      child.exitDocument();\n    }\n  });\n\n  this.inDocument_ = false;\n};\n\n/**\n * Disposes of the object. If the object hasn't already been disposed of, calls\n * {@link #disposeInternal}.\n * @package\n */\nBlockly.Component.prototype.dispose = function() {\n  if (!this.disposed_) {\n    // Set disposed_ to true first, in case during the chain of disposal this\n    // gets disposed recursively.\n    this.disposed_ = true;\n    this.disposeInternal();\n  }\n};\n\n/**\n * Disposes of the component.  Calls `exitDocument`, which is expected to\n * remove event handlers and clean up the component.  Propagates the call to\n * the component's children, if any. Removes the component's DOM from the\n * document.\n * @protected\n */\nBlockly.Component.prototype.disposeInternal = function() {\n  if (this.inDocument_) {\n    this.exitDocument();\n  }\n\n  // Disposes of the component's children, if any.\n  this.forEachChild(function(child) { child.dispose(); });\n\n  // Detach the component's element from the DOM.\n  if (this.element_) {\n    Blockly.utils.dom.removeNode(this.element_);\n  }\n\n  this.children_ = null;\n  this.childIndex_ = null;\n  this.element_ = null;\n  this.parent_ = null;\n};\n\n/**\n * Adds the specified component as the last child of this component.  See\n * {@link Blockly.Component#addChildAt} for detailed semantics.\n *\n * @see Blockly.Component#addChildAt\n * @param {Blockly.Component} child The new child component.\n * @param {boolean=} opt_render If true, the child component will be rendered\n *    into the parent.\n * @package\n */\nBlockly.Component.prototype.addChild = function(child, opt_render) {\n  this.addChildAt(child, this.getChildCount(), opt_render);\n};\n\n/**\n * Adds the specified component as a child of this component at the given\n * 0-based index.\n *\n * Both `addChild` and `addChildAt` assume the following contract\n * between parent and child components:\n *  <ul>\n *    <li>the child component's element must be a descendant of the parent\n *        component's element, and\n *    <li>the DOM state of the child component must be consistent with the DOM\n *        state of the parent component (see `isInDocument`) in the\n *        steady state -- the exception is to addChildAt(child, i, false) and\n *        then immediately decorate/render the child.\n *  </ul>\n *\n * In particular, `parent.addChild(child)` will throw an error if the\n * child component is already in the document, but the parent isn't.\n *\n * Clients of this API may call `addChild` and `addChildAt` with\n * `opt_render` set to true.  If `opt_render` is true, calling these\n * methods will automatically render the child component's element into the\n * parent component's element. If the parent does not yet have an element, then\n * `createDom` will automatically be invoked on the parent before\n * rendering the child.\n *\n * Invoking {@code parent.addChild(child, true)} will throw an error if the\n * child component is already in the document, regardless of the parent's DOM\n * state.\n *\n * If `opt_render` is true and the parent component is not already\n * in the document, `enterDocument` will not be called on this component\n * at this point.\n *\n * Finally, this method also throws an error if the new child already has a\n * different parent, or the given index is out of bounds.\n *\n * @see Blockly.Component#addChild\n * @param {Blockly.Component} child The new child component.\n * @param {number} index 0-based index at which the new child component is to be\n *    added; must be between 0 and the current child count (inclusive).\n * @param {boolean=} opt_render If true, the child component will be rendered\n *    into the parent.\n * @protected\n */\nBlockly.Component.prototype.addChildAt = function(child, index, opt_render) {\n  if (child.inDocument_ && (opt_render || !this.inDocument_)) {\n    // Adding a child that's already in the document is an error, except if the\n    // parent is also in the document and opt_render is false (e.g. decorate()).\n    throw Error(Blockly.Component.Error.ALREADY_RENDERED);\n  }\n\n  if (index < 0 || index > this.getChildCount()) {\n    // Allowing sparse child arrays would lead to strange behavior, so we don't.\n    throw Error(Blockly.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);\n  }\n\n  // Moving child within component, remove old reference.\n  this.childIndex_[child.getId()] = child;\n  if (child.getParent() == this) {\n    // Remove from this.children_\n    var i = this.children_.indexOf(child);\n    if (i > -1) {\n      this.children_.splice(i, 1);\n    }\n  }\n\n  // Set the parent of the child to this component.  This throws an error if\n  // the child is already contained by another component.\n  child.setParent(this);\n  this.children_.splice(index, 0, child);\n\n  if (child.inDocument_ && this.inDocument_ && child.getParent() == this) {\n    // Changing the position of an existing child, move the DOM node (if\n    // necessary).\n    var contentElement = this.getContentElement();\n    var insertBeforeElement = contentElement.childNodes[index] || null;\n    if (insertBeforeElement != child.getElement()) {\n      contentElement.insertBefore(child.getElement(), insertBeforeElement);\n    }\n  } else if (opt_render) {\n    // If this (parent) component doesn't have a DOM yet, call createDom now\n    // to make sure we render the child component's element into the correct\n    // parent element (otherwise render_ with a null first argument would\n    // render the child into the document body, which is almost certainly not\n    // what we want).\n    if (!this.element_) {\n      this.createDom();\n    }\n    // Render the child into the parent at the appropriate location.  Note that\n    // getChildAt(index + 1) returns undefined if inserting at the end.\n    var sibling = this.getChildAt(index + 1);\n    // render_() calls enterDocument() if the parent is already in the document.\n    child.render_(this.getContentElement(), sibling ? sibling.element_ : null);\n  } else if (this.inDocument_ && !child.inDocument_ && child.element_ &&\n      child.element_.parentNode &&\n      // Under some circumstances, IE8 implicitly creates a Document Fragment\n      // for detached nodes, so ensure the parent is an Element as it should be.\n      child.element_.parentNode.nodeType ==\n          Blockly.utils.dom.NodeType.ELEMENT_NODE) {\n    // We don't touch the DOM, but if the parent is in the document, and the\n    // child element is in the document but not marked as such, then we call\n    // enterDocument on the child.\n    child.enterDocument();\n  }\n};\n\n/**\n * Returns the DOM element into which child components are to be rendered,\n * or null if the component itself hasn't been rendered yet.  This default\n * implementation returns the component's root element.  Subclasses with\n * complex DOM structures must override this method.\n * @return {Element} Element to contain child elements (null if none).\n * @protected\n */\nBlockly.Component.prototype.getContentElement = function() {\n  return this.element_;\n};\n\n/**\n * Returns true if the component has children.\n * @return {boolean} True if the component has children.\n * @protected\n */\nBlockly.Component.prototype.hasChildren = function() {\n  return this.children_.length != 0;\n};\n\n/**\n * Returns the number of children of this component.\n * @return {number} The number of children.\n * @protected\n */\nBlockly.Component.prototype.getChildCount = function() {\n  return this.children_.length;\n};\n\n/**\n * Returns the child with the given ID, or null if no such child exists.\n * @param {string} id Child component ID.\n * @return {?Blockly.Component} The child with the given ID; null if none.\n * @protected\n */\nBlockly.Component.prototype.getChild = function(id) {\n  // Use childIndex_ for O(1) access by ID.\n  return id ?\n      /** @type {Blockly.Component} */ (this.childIndex_[id]) || null : null;\n};\n\n/**\n * Returns the child at the given index, or null if the index is out of bounds.\n * @param {number} index 0-based index.\n * @return {?Blockly.Component} The child at the given index; null if none.\n * @protected\n */\nBlockly.Component.prototype.getChildAt = function(index) {\n  // Use children_ for access by index.\n  return this.children_[index] || null;\n};\n\n/**\n * Calls the given function on each of this component's children in order.  If\n * `opt_obj` is provided, it will be used as the 'this' object in the\n * function when called.  The function should take two arguments:  the child\n * component and its 0-based index.  The return value is ignored.\n * @param {function(this:T,?,number):?} f The function to call for every\n * child component; should take 2 arguments (the child and its index).\n * @param {T=} opt_obj Used as the 'this' object in f when called.\n * @template T\n * @protected\n */\nBlockly.Component.prototype.forEachChild = function(f, opt_obj) {\n  for (var i = 0; i < this.children_.length; i++) {\n    f.call(/** @type {?} */ (opt_obj), this.children_[i], i);\n  }\n};\n","/**\n * @license\n * Copyright 2013 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Inject Blockly's CSS synchronously.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.Css\n * @namespace\n */\ngoog.provide('Blockly.Css');\n\n\n/**\n * Has CSS already been injected?\n * @type {boolean}\n * @private\n */\nBlockly.Css.injected_ = false;\n\n/**\n * Add some CSS to the blob that will be injected later.  Allows optional\n * components such as fields and the toolbox to store separate CSS.\n * The provided array of CSS will be destroyed by this function.\n * @param {!Array.<string>} cssArray Array of CSS strings.\n */\nBlockly.Css.register = function(cssArray) {\n  if (Blockly.Css.injected_) {\n    throw Error('CSS already injected');\n  }\n  // Concatenate cssArray onto Blockly.Css.CONTENT.\n  Array.prototype.push.apply(Blockly.Css.CONTENT, cssArray);\n  cssArray.length = 0;  // Garbage collect provided CSS content.\n};\n\n/**\n * Inject the CSS into the DOM.  This is preferable over using a regular CSS\n * file since:\n * a) It loads synchronously and doesn't force a redraw later.\n * b) It speeds up loading by not blocking on a separate HTTP transfer.\n * c) The CSS content may be made dynamic depending on init options.\n * @param {boolean} hasCss If false, don't inject CSS\n *     (providing CSS becomes the document's responsibility).\n * @param {string} pathToMedia Path from page to the Blockly media directory.\n */\nBlockly.Css.inject = function(hasCss, pathToMedia) {\n  // Only inject the CSS once.\n  if (Blockly.Css.injected_) {\n    return;\n  }\n  Blockly.Css.injected_ = true;\n  var text = Blockly.Css.CONTENT.join('\\n');\n  Blockly.Css.CONTENT.length = 0;  // Garbage collect CSS content.\n  if (!hasCss) {\n    return;\n  }\n  // Strip off any trailing slash (either Unix or Windows).\n  var mediaPath = pathToMedia.replace(/[\\\\/]$/, '');\n  text = text.replace(/<<<PATH>>>/g, mediaPath);\n\n  // Inject CSS tag at start of head.\n  var cssNode = document.createElement('style');\n  cssNode.id = 'blockly-common-style';\n  var cssTextNode = document.createTextNode(text);\n  cssNode.appendChild(cssTextNode);\n  document.head.insertBefore(cssNode, document.head.firstChild);\n};\n\n/**\n * Array making up the CSS content for Blockly.\n */\nBlockly.Css.CONTENT = [\n  /* eslint-disable indent */\n  '.blocklySvg {',\n    'background-color: #fff;',\n    'outline: none;',\n    'overflow: hidden;',  /* IE overflows by default. */\n    'position: absolute;',\n    'display: block;',\n  '}',\n\n  '.blocklyWidgetDiv {',\n    'display: none;',\n    'position: absolute;',\n    'z-index: 99999;', /* big value for bootstrap3 compatibility */\n  '}',\n\n  '.injectionDiv {',\n    'height: 100%;',\n    'position: relative;',\n    'overflow: hidden;', /* So blocks in drag surface disappear at edges */\n    'touch-action: none;',\n  '}',\n\n  '.blocklyNonSelectable {',\n    'user-select: none;',\n    '-ms-user-select: none;',\n    '-webkit-user-select: none;',\n  '}',\n\n  '.blocklyWsDragSurface {',\n    'display: none;',\n    'position: absolute;',\n    'top: 0;',\n    'left: 0;',\n  '}',\n  /* Added as a separate rule with multiple classes to make it more specific\n     than a bootstrap rule that selects svg:root. See issue #1275 for context.\n  */\n  '.blocklyWsDragSurface.blocklyOverflowVisible {',\n    'overflow: visible;',\n  '}',\n\n  '.blocklyBlockDragSurface {',\n    'display: none;',\n    'position: absolute;',\n    'top: 0;',\n    'left: 0;',\n    'right: 0;',\n    'bottom: 0;',\n    'overflow: visible !important;',\n    'z-index: 50;', /* Display below toolbox, but above everything else. */\n  '}',\n\n  '.blocklyBlockCanvas.blocklyCanvasTransitioning,',\n  '.blocklyBubbleCanvas.blocklyCanvasTransitioning {',\n    'transition: transform .5s;',\n  '}',\n\n  '.blocklyTooltipDiv {',\n    'background-color: #ffffc7;',\n    'border: 1px solid #ddc;',\n    'box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);',\n    'color: #000;',\n    'display: none;',\n    'font: 9pt sans-serif;',\n    'opacity: .9;',\n    'padding: 2px;',\n    'position: absolute;',\n    'z-index: 100000;', /* big value for bootstrap3 compatibility */\n  '}',\n\n  '.blocklyDropDownDiv {',\n    'position: absolute;',\n    'left: 0;',\n    'top: 0;',\n    'z-index: 1000;',\n    'display: none;',\n    'border: 1px solid;',\n    'border-color: #dadce0;',\n    'background-color: #fff;',\n    'border-radius: 2px;',\n    'padding: 4px;',\n    'box-shadow: 0 0 3px 1px rgba(0,0,0,.3);',\n  '}',\n\n  '.blocklyDropDownDiv.blocklyFocused {',\n    'box-shadow: 0 0 6px 1px rgba(0,0,0,.3);',\n  '}',\n\n  '.blocklyDropDownContent {',\n    'max-height: 300px;', // @todo: spec for maximum height.\n    'overflow: auto;',\n    'overflow-x: hidden;',\n    'position: relative;',\n  '}',\n\n  '.blocklyDropDownArrow {',\n    'position: absolute;',\n    'left: 0;',\n    'top: 0;',\n    'width: 16px;',\n    'height: 16px;',\n    'z-index: -1;',\n    'background-color: inherit;',\n    'border-color: inherit;',\n  '}',\n\n  '.blocklyDropDownButton {',\n    'display: inline-block;',\n    'float: left;',\n    'padding: 0;',\n    'margin: 4px;',\n    'border-radius: 4px;',\n    'outline: none;',\n    'border: 1px solid;',\n    'transition: box-shadow .1s;',\n    'cursor: pointer;',\n  '}',\n\n  '.blocklyArrowTop {',\n    'border-top: 1px solid;',\n    'border-left: 1px solid;',\n    'border-top-left-radius: 4px;',\n    'border-color: inherit;',\n  '}',\n\n  '.blocklyArrowBottom {',\n    'border-bottom: 1px solid;',\n    'border-right: 1px solid;',\n    'border-bottom-right-radius: 4px;',\n    'border-color: inherit;',\n  '}',\n\n  '.blocklyResizeSE {',\n    'cursor: se-resize;',\n    'fill: #aaa;',\n  '}',\n\n  '.blocklyResizeSW {',\n    'cursor: sw-resize;',\n    'fill: #aaa;',\n  '}',\n\n  '.blocklyResizeLine {',\n    'stroke: #515A5A;',\n    'stroke-width: 1;',\n  '}',\n\n  '.blocklyHighlightedConnectionPath {',\n    'fill: none;',\n    'stroke: #fc3;',\n    'stroke-width: 4px;',\n  '}',\n\n  '.blocklyPathLight {',\n    'fill: none;',\n    'stroke-linecap: round;',\n    'stroke-width: 1;',\n  '}',\n\n  '.blocklySelected>.blocklyPathLight {',\n    'display: none;',\n  '}',\n\n  '.blocklyDraggable {',\n    /* backup for browsers (e.g. IE11) that don't support grab */\n    'cursor: url(\"<<<PATH>>>/handopen.cur\"), auto;',\n    'cursor: grab;',\n    'cursor: -webkit-grab;',\n  '}',\n\n  '.blocklyDragging {',\n    /* backup for browsers (e.g. IE11) that don't support grabbing */\n    'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\n    'cursor: grabbing;',\n    'cursor: -webkit-grabbing;',\n  '}',\n  /* Changes cursor on mouse down. Not effective in Firefox because of\n    https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */\n  '.blocklyDraggable:active {',\n    /* backup for browsers (e.g. IE11) that don't support grabbing */\n    'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\n    'cursor: grabbing;',\n    'cursor: -webkit-grabbing;',\n  '}',\n  /* Change the cursor on the whole drag surface in case the mouse gets\n     ahead of block during a drag. This way the cursor is still a closed hand.\n   */\n  '.blocklyBlockDragSurface .blocklyDraggable {',\n    /* backup for browsers (e.g. IE11) that don't support grabbing */\n    'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\n    'cursor: grabbing;',\n    'cursor: -webkit-grabbing;',\n  '}',\n\n  '.blocklyDragging.blocklyDraggingDelete {',\n    'cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;',\n  '}',\n\n  '.blocklyDragging>.blocklyPath,',\n  '.blocklyDragging>.blocklyPathLight {',\n    'fill-opacity: .8;',\n    'stroke-opacity: .8;',\n  '}',\n\n  '.blocklyDragging>.blocklyPathDark {',\n    'display: none;',\n  '}',\n\n  '.blocklyDisabled>.blocklyPath {',\n    'fill-opacity: .5;',\n    'stroke-opacity: .5;',\n  '}',\n\n  '.blocklyDisabled>.blocklyPathLight,',\n  '.blocklyDisabled>.blocklyPathDark {',\n    'display: none;',\n  '}',\n\n  '.blocklyInsertionMarker>.blocklyPath,',\n  '.blocklyInsertionMarker>.blocklyPathLight,',\n  '.blocklyInsertionMarker>.blocklyPathDark {',\n    'fill-opacity: .2;',\n    'stroke: none;',\n  '}',\n\n  '.blocklyMultilineText {',\n    'font-family: monospace;',\n  '}',\n\n  '.blocklyNonEditableText>text {',\n    'pointer-events: none;',\n  '}',\n\n  '.blocklyFlyout {',\n    'position: absolute;',\n    'z-index: 20;',\n  '}',\n\n  '.blocklyText text {',\n    'cursor: default;',\n  '}',\n\n  /*\n    Don't allow users to select text.  It gets annoying when trying to\n    drag a block and selected text moves instead.\n  */\n  '.blocklySvg text,',\n  '.blocklyBlockDragSurface text {',\n    'user-select: none;',\n    '-ms-user-select: none;',\n    '-webkit-user-select: none;',\n    'cursor: inherit;',\n  '}',\n\n  '.blocklyHidden {',\n    'display: none;',\n  '}',\n\n  '.blocklyFieldDropdown:not(.blocklyHidden) {',\n    'display: block;',\n  '}',\n\n  '.blocklyIconGroup {',\n    'cursor: default;',\n  '}',\n\n  '.blocklyIconGroup:not(:hover),',\n  '.blocklyIconGroupReadonly {',\n    'opacity: .6;',\n  '}',\n\n  '.blocklyIconShape {',\n    'fill: #00f;',\n    'stroke: #fff;',\n    'stroke-width: 1px;',\n  '}',\n\n  '.blocklyIconSymbol {',\n    'fill: #fff;',\n  '}',\n\n  '.blocklyMinimalBody {',\n    'margin: 0;',\n    'padding: 0;',\n  '}',\n\n  '.blocklyHtmlInput {',\n    'border: none;',\n    'border-radius: 4px;',\n    'height: 100%;',\n    'margin: 0;',\n    'outline: none;',\n    'padding: 0;',\n    'width: 100%;',\n    'text-align: center;',\n    'display: block;',\n    'box-sizing: border-box;',\n  '}',\n\n  /* Edge and IE introduce a close icon when the input value is longer than a\n     certain length. This affects our sizing calculations of the text input.\n     Hiding the close icon to avoid that. */\n  '.blocklyHtmlInput::-ms-clear {',\n    'display: none;',\n  '}',\n\n  '.blocklyMainBackground {',\n    'stroke-width: 1;',\n    'stroke: #c6c6c6;',  /* Equates to #ddd due to border being off-pixel. */\n  '}',\n\n  '.blocklyMutatorBackground {',\n    'fill: #fff;',\n    'stroke: #ddd;',\n    'stroke-width: 1;',\n  '}',\n\n  '.blocklyFlyoutBackground {',\n    'fill: #ddd;',\n    'fill-opacity: .8;',\n  '}',\n\n  '.blocklyMainWorkspaceScrollbar {',\n    'z-index: 20;',\n  '}',\n\n  '.blocklyFlyoutScrollbar {',\n    'z-index: 30;',\n  '}',\n\n  '.blocklyScrollbarHorizontal,',\n  '.blocklyScrollbarVertical {',\n    'position: absolute;',\n    'outline: none;',\n  '}',\n\n  '.blocklyScrollbarBackground {',\n    'opacity: 0;',\n  '}',\n\n  '.blocklyScrollbarHandle {',\n    'fill: #ccc;',\n  '}',\n\n  '.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,',\n  '.blocklyScrollbarHandle:hover {',\n    'fill: #bbb;',\n  '}',\n\n  /* Darken flyout scrollbars due to being on a grey background. */\n  /* By contrast, workspace scrollbars are on a white background. */\n  '.blocklyFlyout .blocklyScrollbarHandle {',\n    'fill: #bbb;',\n  '}',\n\n  '.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,',\n  '.blocklyFlyout .blocklyScrollbarHandle:hover {',\n    'fill: #aaa;',\n  '}',\n\n  '.blocklyInvalidInput {',\n    'background: #faa;',\n  '}',\n\n  '.blocklyVerticalMarker {',\n    'stroke-width: 3px;',\n    'fill: rgba(255,255,255,.5);',\n    'pointer-events: none;',\n  '}',\n\n  '.blocklyComputeCanvas {',\n    'position: absolute;',\n    'width: 0;',\n    'height: 0;',\n  '}',\n\n  '.blocklyNoPointerEvents {',\n    'pointer-events: none;',\n  '}',\n\n  '.blocklyContextMenu {',\n    'border-radius: 4px;',\n    'max-height: 100%;',\n  '}',\n\n  '.blocklyDropdownMenu {',\n    'border-radius: 2px;',\n    'padding: 0 !important;',\n  '}',\n\n  '.blocklyDropdownMenu .blocklyMenuItem {',\n    /* 28px on the left for icon or checkbox. */\n    'padding-left: 28px;',\n  '}',\n\n  /* BiDi override for the resting state. */\n  '.blocklyDropdownMenu .blocklyMenuItemRtl {',\n     /* Flip left/right padding for BiDi. */\n    'padding-left: 5px;',\n    'padding-right: 28px;',\n  '}',\n\n  '.blocklyWidgetDiv .blocklyMenu {',\n    'background: #fff;',\n    'border: 1px solid transparent;',\n    'box-shadow: 0 0 3px 1px rgba(0,0,0,.3);',\n    'font: normal 13px Arial, sans-serif;',\n    'margin: 0;',\n    'outline: none;',\n    'padding: 4px 0;',\n    'position: absolute;',\n    'overflow-y: auto;',\n    'overflow-x: hidden;',\n    'max-height: 100%;',\n    'z-index: 20000;',  /* Arbitrary, but some apps depend on it... */\n  '}',\n\n  '.blocklyWidgetDiv .blocklyMenu.blocklyFocused {',\n    'box-shadow: 0 0 6px 1px rgba(0,0,0,.3);',\n  '}',\n\n  '.blocklyDropDownDiv .blocklyMenu {',\n    'font: normal 13px \"Helvetica Neue\", Helvetica, sans-serif;',\n    'outline: none;',\n    'z-index: 20000;',  /* Arbitrary, but some apps depend on it... */\n  '}',\n\n  /* State: resting. */\n  '.blocklyMenuItem {',\n    'border: none;',\n    'color: #000;',\n    'cursor: pointer;',\n    'list-style: none;',\n    'margin: 0;',\n     /* 7em on the right for shortcut. */\n    'min-width: 7em;',\n    'padding: 6px 15px;',\n    'white-space: nowrap;',\n  '}',\n\n  /* State: disabled. */\n  '.blocklyMenuItemDisabled {',\n    'color: #ccc;',\n    'cursor: inherit;',\n  '}',\n\n  /* State: hover. */\n  '.blocklyMenuItemHighlight {',\n    'background-color: rgba(0,0,0,.1);',\n  '}',\n\n  /* State: selected/checked. */\n  '.blocklyMenuItemCheckbox {',\n    'height: 16px;',\n    'position: absolute;',\n    'width: 16px;',\n  '}',\n\n  '.blocklyMenuItemSelected .blocklyMenuItemCheckbox {',\n    'background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;',\n    'float: left;',\n    'margin-left: -24px;',\n    'position: static;', /* Scroll with the menu. */\n  '}',\n\n  '.blocklyMenuItemRtl .blocklyMenuItemCheckbox {',\n    'float: right;',\n    'margin-right: -24px;',\n  '}',\n  /* eslint-enable indent */\n];\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility methods for math.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.utils.math\n * @namespace\n */\ngoog.provide('Blockly.utils.math');\n\n\n/**\n * Converts degrees to radians.\n * Copied from Closure's goog.math.toRadians.\n * @param {number} angleDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nBlockly.utils.math.toRadians = function(angleDegrees) {\n  return angleDegrees * Math.PI / 180;\n};\n\n/**\n * Converts radians to degrees.\n * Copied from Closure's goog.math.toDegrees.\n * @param {number} angleRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nBlockly.utils.math.toDegrees = function(angleRadians) {\n  return angleRadians * 180 / Math.PI;\n};\n\n/**\n * Clamp the provided number between the lower bound and the upper bound.\n * @param {number} lowerBound The desired lower bound.\n * @param {number} number The number to clamp.\n * @param {number} upperBound The desired upper bound.\n * @return {number} The clamped number.\n */\nBlockly.utils.math.clamp = function(lowerBound, number, upperBound) {\n  if (upperBound < lowerBound) {\n    var temp = upperBound;\n    upperBound = lowerBound;\n    lowerBound = temp;\n  }\n  return Math.max(lowerBound, Math.min(number, upperBound));\n};\n","/**\n * @license\n * Copyright 2016 Massachusetts Institute of Technology\n * All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A div that floats on top of the workspace, for drop-down menus.\n * The drop-down can be kept inside the workspace, animate in/out, etc.\n * @author tmickel@mit.edu (Tim Mickel)\n */\n\n'use strict';\n\ngoog.provide('Blockly.DropDownDiv');\n\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.math');\ngoog.require('Blockly.utils.style');\n\ngoog.requireType('Blockly.utils.Rect');\ngoog.requireType('Blockly.utils.Size');\n\n\n/**\n * Class for drop-down div.\n * @constructor\n * @package\n */\nBlockly.DropDownDiv = function() {\n};\n\n/**\n * Drop-downs will appear within the bounds of this element if possible.\n * Set in Blockly.DropDownDiv.setBoundsElement.\n * @type {Element}\n * @private\n */\nBlockly.DropDownDiv.boundsElement_ = null;\n\n/**\n * The object currently using the drop-down.\n * @type {Object}\n * @private\n */\nBlockly.DropDownDiv.owner_ = null;\n\n/**\n * Whether the dropdown was positioned to a field or the source block.\n * @type {?boolean}\n * @private\n */\nBlockly.DropDownDiv.positionToField_ = null;\n\n/**\n * Arrow size in px. Should match the value in CSS\n * (need to position pre-render).\n * @type {number}\n * @const\n */\nBlockly.DropDownDiv.ARROW_SIZE = 16;\n\n/**\n * Drop-down border size in px. Should match the value in CSS (need to position\n * the arrow).\n * @type {number}\n * @const\n */\nBlockly.DropDownDiv.BORDER_SIZE = 1;\n\n/**\n * Amount the arrow must be kept away from the edges of the main drop-down div,\n * in px.\n * @type {number}\n * @const\n */\nBlockly.DropDownDiv.ARROW_HORIZONTAL_PADDING = 12;\n\n/**\n * Amount drop-downs should be padded away from the source, in px.\n * @type {number}\n * @const\n */\nBlockly.DropDownDiv.PADDING_Y = 16;\n\n/**\n * Length of animations in seconds.\n * @type {number}\n * @const\n */\nBlockly.DropDownDiv.ANIMATION_TIME = 0.25;\n\n/**\n * Timer for animation out, to be cleared if we need to immediately hide\n * without disrupting new shows.\n * @type {?number}\n * @private\n */\nBlockly.DropDownDiv.animateOutTimer_ = null;\n\n/**\n * Callback for when the drop-down is hidden.\n * @type {?Function}\n * @private\n */\nBlockly.DropDownDiv.onHide_ = null;\n\n/**\n * A class name representing the current owner's workspace renderer.\n * @type {string}\n * @private\n */\nBlockly.DropDownDiv.rendererClassName_ = '';\n\n/**\n * A class name representing the current owner's workspace theme.\n * @type {string}\n * @private\n */\nBlockly.DropDownDiv.themeClassName_ = '';\n\n/**\n * Dropdown bounds info object used to encapsulate sizing information about a\n * bounding element (bounding box and width/height).\n * @typedef {{\n *        top:number,\n *        left:number,\n *        bottom:number,\n *        right:number,\n *        width:number,\n *        height:number\n * }}\n */\nBlockly.DropDownDiv.BoundsInfo;\n\n/**\n * Dropdown position metrics.\n * @typedef {{\n *        initialX:number,\n *        initialY:number,\n *        finalX:number,\n *        finalY:number,\n *        arrowX:?number,\n *        arrowY:?number,\n *        arrowAtTop:?boolean,\n *        arrowVisible:boolean\n * }}\n */\nBlockly.DropDownDiv.PositionMetrics;\n \n/**\n * Create and insert the DOM element for this div.\n * @package\n */\nBlockly.DropDownDiv.createDom = function() {\n  if (Blockly.DropDownDiv.DIV_) {\n    return;  // Already created.\n  }\n  var div = document.createElement('div');\n  div.className = 'blocklyDropDownDiv';\n  var container = Blockly.parentContainer || document.body;\n  container.appendChild(div);\n  /**\n   * The div element.\n   * @type {!Element}\n   * @private\n   */\n  Blockly.DropDownDiv.DIV_ = div;\n\n  var content = document.createElement('div');\n  content.className = 'blocklyDropDownContent';\n  div.appendChild(content);\n  /**\n   * The content element.\n   * @type {!Element}\n   * @private\n   */\n  Blockly.DropDownDiv.content_ = content;\n\n  var arrow = document.createElement('div');\n  arrow.className = 'blocklyDropDownArrow';\n  div.appendChild(arrow);\n  /**\n   * The arrow element.\n   * @type {!Element}\n   * @private\n   */\n  Blockly.DropDownDiv.arrow_ = arrow;\n\n  Blockly.DropDownDiv.DIV_.style.opacity = 0;\n\n  // Transition animation for transform: translate() and opacity.\n  Blockly.DropDownDiv.DIV_.style.transition = 'transform ' +\n    Blockly.DropDownDiv.ANIMATION_TIME + 's, ' +\n    'opacity ' + Blockly.DropDownDiv.ANIMATION_TIME + 's';\n\n  // Handle focusin/out events to add a visual indicator when\n  // a child is focused or blurred.\n  div.addEventListener('focusin', function() {\n    Blockly.utils.dom.addClass(div, 'blocklyFocused');\n  });\n  div.addEventListener('focusout', function() {\n    Blockly.utils.dom.removeClass(div, 'blocklyFocused');\n  });\n};\n\n/**\n * Set an element to maintain bounds within. Drop-downs will appear\n * within the box of this element if possible.\n * @param {Element} boundsElement Element to bind drop-down to.\n */\nBlockly.DropDownDiv.setBoundsElement = function(boundsElement) {\n  Blockly.DropDownDiv.boundsElement_ = boundsElement;\n};\n\n/**\n * Provide the div for inserting content into the drop-down.\n * @return {!Element} Div to populate with content.\n */\nBlockly.DropDownDiv.getContentDiv = function() {\n  return Blockly.DropDownDiv.content_;\n};\n\n/**\n * Clear the content of the drop-down.\n */\nBlockly.DropDownDiv.clearContent = function() {\n  Blockly.DropDownDiv.content_.textContent = '';\n  Blockly.DropDownDiv.content_.style.width = '';\n};\n\n/**\n * Set the colour for the drop-down.\n * @param {string} backgroundColour Any CSS colour for the background.\n * @param {string} borderColour Any CSS colour for the border.\n */\nBlockly.DropDownDiv.setColour = function(backgroundColour, borderColour) {\n  Blockly.DropDownDiv.DIV_.style.backgroundColor = backgroundColour;\n  Blockly.DropDownDiv.DIV_.style.borderColor = borderColour;\n};\n\n/**\n * Shortcut to show and place the drop-down with positioning determined\n * by a particular block. The primary position will be below the block,\n * and the secondary position above the block. Drop-down will be\n * constrained to the block's workspace.\n * @param {!Blockly.Field} field The field showing the drop-down.\n * @param {!Blockly.BlockSvg} block Block to position the drop-down around.\n * @param {Function=} opt_onHide Optional callback for when the drop-down is\n *   hidden.\n * @param {number=} opt_secondaryYOffset Optional Y offset for above-block\n *   positioning.\n * @return {boolean} True if the menu rendered below block; false if above.\n */\nBlockly.DropDownDiv.showPositionedByBlock = function(field, block,\n    opt_onHide, opt_secondaryYOffset) {\n  return Blockly.DropDownDiv.showPositionedByRect_(\n      Blockly.DropDownDiv.getScaledBboxOfBlock_(block),\n      field, opt_onHide, opt_secondaryYOffset);\n};\n\n/**\n * Shortcut to show and place the drop-down with positioning determined\n * by a particular field. The primary position will be below the field,\n * and the secondary position above the field. Drop-down will be\n * constrained to the block's workspace.\n * @param {!Blockly.Field} field The field to position the dropdown against.\n * @param {Function=} opt_onHide Optional callback for when the drop-down is\n *   hidden.\n * @param {number=} opt_secondaryYOffset Optional Y offset for above-block\n *   positioning.\n * @return {boolean} True if the menu rendered below block; false if above.\n */\nBlockly.DropDownDiv.showPositionedByField = function(field,\n    opt_onHide, opt_secondaryYOffset) {\n  Blockly.DropDownDiv.positionToField_ = true;\n  return Blockly.DropDownDiv.showPositionedByRect_(\n      Blockly.DropDownDiv.getScaledBboxOfField_(field),\n      field, opt_onHide, opt_secondaryYOffset);\n};\n\n/**\n * Get the scaled bounding box of a block.\n * @param {!Blockly.BlockSvg} block The block.\n * @return {!Blockly.utils.Rect} The scaled bounding box of the block.\n * @private\n */\nBlockly.DropDownDiv.getScaledBboxOfBlock_ = function(block) {\n  var blockSvg = block.getSvgRoot();\n  var bBox = blockSvg.getBBox();\n  var scale = block.workspace.scale;\n  var scaledHeight = bBox.height * scale;\n  var scaledWidth = bBox.width * scale;\n  var xy = Blockly.utils.style.getPageOffset(blockSvg);\n  return new Blockly.utils.Rect(\n      xy.y, xy.y + scaledHeight, xy.x, xy.x + scaledWidth);\n};\n\n/**\n * Get the scaled bounding box of a field.\n * @param {!Blockly.Field} field The field.\n * @return {!Blockly.utils.Rect} The scaled bounding box of the field.\n * @private\n */\nBlockly.DropDownDiv.getScaledBboxOfField_ = function(field) {\n  var bBox = field.getScaledBBox();\n  return new Blockly.utils.Rect(\n      bBox.top, bBox.bottom, bBox.left, bBox.right);\n};\n\n/**\n * Helper method to show and place the drop-down with positioning determined\n * by a scaled bounding box.  The primary position will be below the rect,\n * and the secondary position above the rect. Drop-down will be constrained to\n * the block's workspace.\n * @param {!Blockly.utils.Rect} bBox The scaled bounding box.\n * @param {!Blockly.Field} field The field to position the dropdown against.\n * @param {Function=} opt_onHide Optional callback for when the drop-down is\n *   hidden.\n * @param {number=} opt_secondaryYOffset Optional Y offset for above-block\n *   positioning.\n * @return {boolean} True if the menu rendered below block; false if above.\n * @private\n */\nBlockly.DropDownDiv.showPositionedByRect_ = function(bBox, field,\n    opt_onHide, opt_secondaryYOffset) {\n  // If we can fit it, render below the block.\n  var primaryX = bBox.left + (bBox.right - bBox.left) / 2;\n  var primaryY = bBox.bottom;\n  // If we can't fit it, render above the entire parent block.\n  var secondaryX = primaryX;\n  var secondaryY = bBox.top;\n  if (opt_secondaryYOffset) {\n    secondaryY += opt_secondaryYOffset;\n  }\n  var sourceBlock = /** @type {!Blockly.BlockSvg} */ (field.getSourceBlock());\n  // Set bounds to main workspace; show the drop-down.\n  var workspace = sourceBlock.workspace;\n  while (workspace.options.parentWorkspace) {\n    workspace = /** @type {!Blockly.WorkspaceSvg} */ (\n      workspace.options.parentWorkspace);\n  }\n  Blockly.DropDownDiv.setBoundsElement(\n      /** @type {Element} */ (workspace.getParentSvg().parentNode));\n  return Blockly.DropDownDiv.show(\n      field, sourceBlock.RTL,\n      primaryX, primaryY, secondaryX, secondaryY, opt_onHide);\n};\n\n/**\n * Show and place the drop-down.\n * The drop-down is placed with an absolute \"origin point\" (x, y) - i.e.,\n * the arrow will point at this origin and box will positioned below or above\n * it.  If we can maintain the container bounds at the primary point, the arrow\n * will point there, and the container will be positioned below it.\n * If we can't maintain the container bounds at the primary point, fall-back to\n * the secondary point and position above.\n * @param {Object} owner The object showing the drop-down\n * @param {boolean} rtl Right-to-left (true) or left-to-right (false).\n * @param {number} primaryX Desired origin point x, in absolute px.\n * @param {number} primaryY Desired origin point y, in absolute px.\n * @param {number} secondaryX Secondary/alternative origin point x, in absolute\n *     px.\n * @param {number} secondaryY Secondary/alternative origin point y, in absolute\n *     px.\n * @param {Function=} opt_onHide Optional callback for when the drop-down is\n *     hidden.\n * @return {boolean} True if the menu rendered at the primary origin point.\n * @package\n */\nBlockly.DropDownDiv.show = function(owner, rtl, primaryX, primaryY,\n    secondaryX, secondaryY, opt_onHide) {\n  Blockly.DropDownDiv.owner_ = owner;\n  Blockly.DropDownDiv.onHide_ = opt_onHide || null;\n  // Set direction.\n  var div = Blockly.DropDownDiv.DIV_;\n  div.style.direction = rtl ? 'rtl' : 'ltr';\n\n  var mainWorkspace =\n    /** @type {!Blockly.WorkspaceSvg} */ (Blockly.getMainWorkspace());\n  Blockly.DropDownDiv.rendererClassName_ =\n      mainWorkspace.getRenderer().getClassName();\n  Blockly.DropDownDiv.themeClassName_ = mainWorkspace.getTheme().getClassName();\n  Blockly.utils.dom.addClass(div, Blockly.DropDownDiv.rendererClassName_);\n  Blockly.utils.dom.addClass(div, Blockly.DropDownDiv.themeClassName_);\n\n  // When we change `translate` multiple times in close succession,\n  // Chrome may choose to wait and apply them all at once.\n  // Since we want the translation to initial X, Y to be immediate,\n  // and the translation to final X, Y to be animated,\n  // we saw problems where both would be applied after animation was turned on,\n  // making the dropdown appear to fly in from (0, 0).\n  // Using both `left`, `top` for the initial translation and then `translate`\n  // for the animated transition to final X, Y is a workaround.\n\n  return Blockly.DropDownDiv.positionInternal_(\n      primaryX, primaryY, secondaryX, secondaryY);\n};\n\n/**\n * Get sizing info about the bounding element.\n * @return {!Blockly.DropDownDiv.BoundsInfo} An object containing size\n *     information about the bounding element (bounding box and width/height).\n * @private\n */\nBlockly.DropDownDiv.getBoundsInfo_ = function() {\n  var boundPosition = Blockly.utils.style.getPageOffset(\n      /** @type {!Element} */ (Blockly.DropDownDiv.boundsElement_));\n  var boundSize = Blockly.utils.style.getSize(\n      /** @type {!Element} */ (Blockly.DropDownDiv.boundsElement_));\n\n  return {\n    left: boundPosition.x,\n    right: boundPosition.x + boundSize.width,\n    top: boundPosition.y,\n    bottom: boundPosition.y + boundSize.height,\n    width: boundSize.width,\n    height: boundSize.height\n  };\n};\n\n/**\n * Helper to position the drop-down and the arrow, maintaining bounds.\n * See explanation of origin points in Blockly.DropDownDiv.show.\n * @param {number} primaryX Desired origin point x, in absolute px.\n * @param {number} primaryY Desired origin point y, in absolute px.\n * @param {number} secondaryX Secondary/alternative origin point x,\n *     in absolute px.\n * @param {number} secondaryY Secondary/alternative origin point y,\n *     in absolute px.\n * @return {!Blockly.DropDownDiv.PositionMetrics} Various final metrics,\n *     including rendered positions for drop-down and arrow.\n * @private\n */\nBlockly.DropDownDiv.getPositionMetrics_ = function(primaryX, primaryY,\n    secondaryX, secondaryY) {\n  var boundsInfo = Blockly.DropDownDiv.getBoundsInfo_();\n  var divSize = Blockly.utils.style.getSize(\n      /** @type {!Element} */ (Blockly.DropDownDiv.DIV_));\n\n  // Can we fit in-bounds below the target?\n  if (primaryY + divSize.height < boundsInfo.bottom) {\n    return Blockly.DropDownDiv.getPositionBelowMetrics_(\n        primaryX, primaryY, boundsInfo, divSize);\n  }\n  // Can we fit in-bounds above the target?\n  if (secondaryY - divSize.height > boundsInfo.top) {\n    return Blockly.DropDownDiv.getPositionAboveMetrics_(\n        secondaryX, secondaryY, boundsInfo, divSize);\n  }\n  // Can we fit outside the workspace bounds (but inside the window) below?\n  if (primaryY + divSize.height < document.documentElement.clientHeight) {\n    return Blockly.DropDownDiv.getPositionBelowMetrics_(\n        primaryX, primaryY, boundsInfo, divSize);\n  }\n  // Can we fit outside the workspace bounds (but inside the window) above?\n  if (secondaryY - divSize.height > document.documentElement.clientTop) {\n    return Blockly.DropDownDiv.getPositionAboveMetrics_(\n        secondaryX, secondaryY, boundsInfo, divSize);\n  }\n\n  // Last resort, render at top of page.\n  return Blockly.DropDownDiv.getPositionTopOfPageMetrics_(\n      primaryX, boundsInfo, divSize);\n};\n\n/**\n * Get the metrics for positioning the div below the source.\n * @param {number} primaryX Desired origin point x, in absolute px.\n * @param {number} primaryY Desired origin point y, in absolute px.\n * @param {!Blockly.DropDownDiv.BoundsInfo} boundsInfo An object containing size\n *     information about the bounding element (bounding box and width/height).\n * @param {!Blockly.utils.Size} divSize An object containing information about\n *     the size of the DropDownDiv (width & height).\n * @return {!Blockly.DropDownDiv.PositionMetrics} Various final metrics,\n *     including rendered positions for drop-down and arrow.\n * @private\n */\nBlockly.DropDownDiv.getPositionBelowMetrics_ = function(\n    primaryX, primaryY, boundsInfo, divSize) {\n\n  var xCoords = Blockly.DropDownDiv.getPositionX(\n      primaryX, boundsInfo.left, boundsInfo.right, divSize.width);\n\n  var arrowY = -(Blockly.DropDownDiv.ARROW_SIZE / 2 +\n      Blockly.DropDownDiv.BORDER_SIZE);\n  var finalY = primaryY + Blockly.DropDownDiv.PADDING_Y;\n\n  return {\n    initialX: xCoords.divX,\n    initialY : primaryY,\n    finalX: xCoords.divX, // X position remains constant during animation.\n    finalY: finalY,\n    arrowX: xCoords.arrowX,\n    arrowY: arrowY,\n    arrowAtTop: true,\n    arrowVisible: true\n  };\n};\n\n/**\n * Get the metrics for positioning the div above the source.\n * @param {number} secondaryX Secondary/alternative origin point x,\n *     in absolute px.\n * @param {number} secondaryY Secondary/alternative origin point y,\n *     in absolute px.\n * @param {!Blockly.DropDownDiv.BoundsInfo} boundsInfo An object containing size\n *     information about the bounding element (bounding box and width/height).\n * @param {!Blockly.utils.Size} divSize An object containing information about\n *     the size of the DropDownDiv (width & height).\n * @return {!Blockly.DropDownDiv.PositionMetrics} Various final metrics,\n *     including rendered positions for drop-down and arrow.\n * @private\n */\nBlockly.DropDownDiv.getPositionAboveMetrics_ = function(\n    secondaryX, secondaryY, boundsInfo, divSize) {\n\n  var xCoords = Blockly.DropDownDiv.getPositionX(\n      secondaryX, boundsInfo.left, boundsInfo.right, divSize.width);\n\n  var arrowY = divSize.height - (Blockly.DropDownDiv.BORDER_SIZE * 2) -\n      (Blockly.DropDownDiv.ARROW_SIZE / 2);\n  var finalY = secondaryY - divSize.height - Blockly.DropDownDiv.PADDING_Y;\n  var initialY = secondaryY - divSize.height; // No padding on Y\n\n  return {\n    initialX: xCoords.divX,\n    initialY : initialY,\n    finalX: xCoords.divX, // X position remains constant during animation.\n    finalY: finalY,\n    arrowX: xCoords.arrowX,\n    arrowY: arrowY,\n    arrowAtTop: false,\n    arrowVisible: true\n  };\n};\n\n/**\n * Get the metrics for positioning the div at the top of the page.\n * @param {number} sourceX Desired origin point x, in absolute px.\n * @param {!Blockly.DropDownDiv.BoundsInfo} boundsInfo An object containing size\n *     information about the bounding element (bounding box and width/height).\n * @param {!Blockly.utils.Size} divSize An object containing information about\n *     the size of the DropDownDiv (width & height).\n * @return {!Blockly.DropDownDiv.PositionMetrics} Various final metrics,\n *     including rendered positions for drop-down and arrow.\n * @private\n */\nBlockly.DropDownDiv.getPositionTopOfPageMetrics_ = function(\n    sourceX, boundsInfo, divSize) {\n\n  var xCoords = Blockly.DropDownDiv.getPositionX(\n      sourceX, boundsInfo.left, boundsInfo.right, divSize.width);\n\n  // No need to provide arrow-specific information because it won't be visible.\n  return {\n    initialX: xCoords.divX,\n    initialY : 0,\n    finalX: xCoords.divX, // X position remains constant during animation.\n    finalY: 0,            // Y position remains constant during animation.\n    arrowAtTop: null,\n    arrowX: null,\n    arrowY: null,\n    arrowVisible: false\n  };\n};\n\n/**\n * Get the x positions for the left side of the DropDownDiv and the arrow,\n * accounting for the bounds of the workspace.\n * @param {number} sourceX Desired origin point x, in absolute px.\n * @param {number} boundsLeft The left edge of the bounding element, in\n *    absolute px.\n * @param {number} boundsRight The right edge of the bounding element, in\n *    absolute px.\n * @param {number} divWidth The width of the div in px.\n * @return {{divX: number, arrowX: number}} An object containing metrics for\n *    the x positions of the left side of the DropDownDiv and the arrow.\n * @package\n */\nBlockly.DropDownDiv.getPositionX = function(\n    sourceX, boundsLeft, boundsRight, divWidth) {\n  var arrowX, divX;\n  arrowX = divX = sourceX;\n\n  // Offset the topLeft coord so that the dropdowndiv is centered.\n  divX -= divWidth / 2;\n  // Fit the dropdowndiv within the bounds of the workspace.\n  divX = Blockly.utils.math.clamp(boundsLeft, divX, boundsRight - divWidth);\n\n  // Offset the arrow coord so that the arrow is centered.\n  arrowX -= Blockly.DropDownDiv.ARROW_SIZE / 2;\n  // Convert the arrow position to be relative to the top left of the div.\n  var relativeArrowX = arrowX - divX;\n  var horizPadding = Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING;\n  // Clamp the arrow position so that it stays attached to the dropdowndiv.\n  relativeArrowX = Blockly.utils.math.clamp(\n      horizPadding,\n      relativeArrowX,\n      divWidth - horizPadding - Blockly.DropDownDiv.ARROW_SIZE);\n\n  return {\n    arrowX: relativeArrowX,\n    divX: divX\n  };\n};\n\n/**\n * Is the container visible?\n * @return {boolean} True if visible.\n */\nBlockly.DropDownDiv.isVisible = function() {\n  return !!Blockly.DropDownDiv.owner_;\n};\n\n/**\n * Hide the menu only if it is owned by the provided object.\n * @param {Object} owner Object which must be owning the drop-down to hide.\n * @param {boolean=} opt_withoutAnimation True if we should hide the dropdown\n *     without animating.\n * @return {boolean} True if hidden.\n */\nBlockly.DropDownDiv.hideIfOwner = function(owner, opt_withoutAnimation) {\n  if (Blockly.DropDownDiv.owner_ === owner) {\n    if (opt_withoutAnimation) {\n      Blockly.DropDownDiv.hideWithoutAnimation();\n    } else {\n      Blockly.DropDownDiv.hide();\n    }\n    return true;\n  }\n  return false;\n};\n\n/**\n * Hide the menu, triggering animation.\n */\nBlockly.DropDownDiv.hide = function() {\n  // Start the animation by setting the translation and fading out.\n  var div = Blockly.DropDownDiv.DIV_;\n  // Reset to (initialX, initialY) - i.e., no translation.\n  div.style.transform = 'translate(0, 0)';\n  div.style.opacity = 0;\n  // Finish animation - reset all values to default.\n  Blockly.DropDownDiv.animateOutTimer_ =\n      setTimeout(function() {\n        Blockly.DropDownDiv.hideWithoutAnimation();\n      }, Blockly.DropDownDiv.ANIMATION_TIME * 1000);\n  if (Blockly.DropDownDiv.onHide_) {\n    Blockly.DropDownDiv.onHide_();\n    Blockly.DropDownDiv.onHide_ = null;\n  }\n};\n\n/**\n * Hide the menu, without animation.\n */\nBlockly.DropDownDiv.hideWithoutAnimation = function() {\n  if (!Blockly.DropDownDiv.isVisible()) {\n    return;\n  }\n  if (Blockly.DropDownDiv.animateOutTimer_) {\n    clearTimeout(Blockly.DropDownDiv.animateOutTimer_);\n  }\n\n  // Reset style properties in case this gets called directly\n  // instead of hide() - see discussion on #2551.\n  var div = Blockly.DropDownDiv.DIV_;\n  div.style.transform = '';\n  div.style.left = '';\n  div.style.top = '';\n  div.style.opacity = 0;\n  div.style.display = 'none';\n  div.style.backgroundColor = '';\n  div.style.borderColor = '';\n\n  if (Blockly.DropDownDiv.onHide_) {\n    Blockly.DropDownDiv.onHide_();\n    Blockly.DropDownDiv.onHide_ = null;\n  }\n  Blockly.DropDownDiv.clearContent();\n  Blockly.DropDownDiv.owner_ = null;\n\n  if (Blockly.DropDownDiv.rendererClassName_) {\n    Blockly.utils.dom.removeClass(div, Blockly.DropDownDiv.rendererClassName_);\n    Blockly.DropDownDiv.rendererClassName_ = '';\n  }\n  if (Blockly.DropDownDiv.themeClassName_) {\n    Blockly.utils.dom.removeClass(div, Blockly.DropDownDiv.themeClassName_);\n    Blockly.DropDownDiv.themeClassName_ = '';\n  }\n  (/** @type {!Blockly.WorkspaceSvg} */ (\n    Blockly.getMainWorkspace())).markFocused();\n};\n\n/**\n * Set the dropdown div's position.\n * @param {number} primaryX Desired origin point x, in absolute px.\n * @param {number} primaryY Desired origin point y, in absolute px.\n * @param {number} secondaryX Secondary/alternative origin point x,\n *    in absolute px.\n * @param {number} secondaryY Secondary/alternative origin point y,\n *    in absolute px.\n * @return {boolean} True if the menu rendered at the primary origin point.\n * @private\n */\nBlockly.DropDownDiv.positionInternal_ = function(\n    primaryX, primaryY, secondaryX, secondaryY) {\n  var metrics = Blockly.DropDownDiv.getPositionMetrics_(primaryX, primaryY,\n      secondaryX, secondaryY);\n\n  // Update arrow CSS.\n  if (metrics.arrowVisible) {\n    Blockly.DropDownDiv.arrow_.style.display = '';\n    Blockly.DropDownDiv.arrow_.style.transform = 'translate(' +\n        metrics.arrowX + 'px,' + metrics.arrowY + 'px) rotate(45deg)';\n    Blockly.DropDownDiv.arrow_.setAttribute('class', metrics.arrowAtTop ?\n        'blocklyDropDownArrow blocklyArrowTop' :\n        'blocklyDropDownArrow blocklyArrowBottom');\n  } else {\n    Blockly.DropDownDiv.arrow_.style.display = 'none';\n  }\n\n  var initialX = Math.floor(metrics.initialX);\n  var initialY = Math.floor(metrics.initialY);\n  var finalX = Math.floor(metrics.finalX);\n  var finalY = Math.floor(metrics.finalY);\n\n  var div = Blockly.DropDownDiv.DIV_;\n  // First apply initial translation.\n  div.style.left = initialX + 'px';\n  div.style.top = initialY + 'px';\n\n  // Show the div.\n  div.style.display = 'block';\n  div.style.opacity = 1;\n  // Add final translate, animated through `transition`.\n  // Coordinates are relative to (initialX, initialY),\n  // where the drop-down is absolutely positioned.\n  var dx = finalX - initialX;\n  var dy = finalY - initialY;\n  div.style.transform = 'translate(' + dx + 'px,' + dy + 'px)';\n\n  return !!metrics.arrowAtTop;\n};\n\n/**\n * Repositions the dropdownDiv on window resize. If it doesn't know how to\n * calculate the new position, it will just hide it instead.\n * @package\n */\nBlockly.DropDownDiv.repositionForWindowResize = function() {\n  // This condition mainly catches the dropdown div when it is being used as a\n  // dropdown.  It is important not to close it in this case because on Android,\n  // when a field is focused, the soft keyboard opens triggering a window resize\n  // event and we want the dropdown div to stick around so users can type into\n  // it.\n  if (Blockly.DropDownDiv.owner_) {\n    var field = /** @type {!Blockly.Field} */ (Blockly.DropDownDiv.owner_);\n    var block = /** @type {!Blockly.BlockSvg} */ (field.getSourceBlock());\n    var bBox = Blockly.DropDownDiv.positionToField_ ?\n        Blockly.DropDownDiv.getScaledBboxOfField_(field) :\n        Blockly.DropDownDiv.getScaledBboxOfBlock_(block);\n    // If we can fit it, render below the block.\n    var primaryX = bBox.left + (bBox.right - bBox.left) / 2;\n    var primaryY = bBox.bottom;\n    // If we can't fit it, render above the entire parent block.\n    var secondaryX = primaryX;\n    var secondaryY = bBox.top;\n    Blockly.DropDownDiv.positionInternal_(\n        primaryX, primaryY, secondaryX, secondaryY);\n  } else {\n    Blockly.DropDownDiv.hide();\n  }\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object for configuring and updating a workspace grid in\n * Blockly.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.Grid');\n\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.userAgent');\n\n\n/**\n * Class for a workspace's grid.\n * @param {!SVGElement} pattern The grid's SVG pattern, created during\n *     injection.\n * @param {!Object} options A dictionary of normalized options for the grid.\n *     See grid documentation:\n *     https://developers.google.com/blockly/guides/configure/web/grid\n * @constructor\n */\nBlockly.Grid = function(pattern, options) {\n  /**\n   * The grid's SVG pattern, created during injection.\n   * @type {!SVGElement}\n   * @private\n   */\n  this.gridPattern_ = pattern;\n\n  /**\n   * The spacing of the grid lines (in px).\n   * @type {number}\n   * @private\n   */\n  this.spacing_ = options['spacing'];\n\n  /**\n   * How long the grid lines should be (in px).\n   * @type {number}\n   * @private\n   */\n  this.length_ = options['length'];\n\n  /**\n   * The horizontal grid line, if it exists.\n   * @type {SVGElement}\n   * @private\n   */\n  this.line1_ = /** @type {SVGElement} */ (pattern.firstChild);\n\n  /**\n   * The vertical grid line, if it exists.\n   * @type {SVGElement}\n   * @private\n   */\n  this.line2_ = this.line1_ &&\n    (/** @type {SVGElement} */ (this.line1_.nextSibling));\n\n  /**\n   * Whether blocks should snap to the grid.\n   * @type {boolean}\n   * @private\n   */\n  this.snapToGrid_ = options['snap'];\n};\n\n/**\n * The scale of the grid, used to set stroke width on grid lines.\n * This should always be the same as the workspace scale.\n * @type {number}\n * @private\n */\nBlockly.Grid.prototype.scale_ = 1;\n\n/**\n * Dispose of this grid and unlink from the DOM.\n * @package\n * @suppress {checkTypes}\n */\nBlockly.Grid.prototype.dispose = function() {\n  this.gridPattern_ = null;\n};\n\n/**\n * Whether blocks should snap to the grid, based on the initial configuration.\n * @return {boolean} True if blocks should snap, false otherwise.\n * @package\n */\nBlockly.Grid.prototype.shouldSnap = function() {\n  return this.snapToGrid_;\n};\n\n/**\n * Get the spacing of the grid points (in px).\n * @return {number} The spacing of the grid points.\n * @package\n */\nBlockly.Grid.prototype.getSpacing = function() {\n  return this.spacing_;\n};\n\n/**\n * Get the id of the pattern element, which should be randomized to avoid\n * conflicts with other Blockly instances on the page.\n * @return {string} The pattern ID.\n * @package\n */\nBlockly.Grid.prototype.getPatternId = function() {\n  return this.gridPattern_.id;\n};\n\n/**\n * Update the grid with a new scale.\n * @param {number} scale The new workspace scale.\n * @package\n */\nBlockly.Grid.prototype.update = function(scale) {\n  this.scale_ = scale;\n  // MSIE freaks if it sees a 0x0 pattern, so set empty patterns to 100x100.\n  var safeSpacing = (this.spacing_ * scale) || 100;\n\n  this.gridPattern_.setAttribute('width', safeSpacing);\n  this.gridPattern_.setAttribute('height', safeSpacing);\n\n  var half = Math.floor(this.spacing_ / 2) + 0.5;\n  var start = half - this.length_ / 2;\n  var end = half + this.length_ / 2;\n\n  half *= scale;\n  start *= scale;\n  end *= scale;\n\n  this.setLineAttributes_(this.line1_, scale, start, end, half, half);\n  this.setLineAttributes_(this.line2_, scale, half, half, start, end);\n};\n\n/**\n * Set the attributes on one of the lines in the grid.  Use this to update the\n * length and stroke width of the grid lines.\n * @param {SVGElement} line Which line to update.\n * @param {number} width The new stroke size (in px).\n * @param {number} x1 The new x start position of the line (in px).\n * @param {number} x2 The new x end position of the line (in px).\n * @param {number} y1 The new y start position of the line (in px).\n * @param {number} y2 The new y end position of the line (in px).\n * @private\n */\nBlockly.Grid.prototype.setLineAttributes_ = function(line, width,\n    x1, x2, y1, y2) {\n  if (line) {\n    line.setAttribute('stroke-width', width);\n    line.setAttribute('x1', x1);\n    line.setAttribute('y1', y1);\n    line.setAttribute('x2', x2);\n    line.setAttribute('y2', y2);\n  }\n};\n\n/**\n * Move the grid to a new x and y position, and make sure that change is\n * visible.\n * @param {number} x The new x position of the grid (in px).\n * @param {number} y The new y position of the grid (in px).\n * @package\n */\nBlockly.Grid.prototype.moveTo = function(x, y) {\n  this.gridPattern_.setAttribute('x', x);\n  this.gridPattern_.setAttribute('y', y);\n\n  if (Blockly.utils.userAgent.IE || Blockly.utils.userAgent.EDGE) {\n    // IE/Edge doesn't notice that the x/y offsets have changed.\n    // Force an update.\n    this.update(this.scale_);\n  }\n};\n\n/**\n * Create the DOM for the grid described by options.\n * @param {string} rnd A random ID to append to the pattern's ID.\n * @param {!Object} gridOptions The object containing grid configuration.\n * @param {!SVGElement} defs The root SVG element for this workspace's defs.\n * @return {!SVGElement} The SVG element for the grid pattern.\n * @package\n */\nBlockly.Grid.createDom = function(rnd, gridOptions, defs) {\n  /*\n    <pattern id=\"blocklyGridPattern837493\" patternUnits=\"userSpaceOnUse\">\n      <rect stroke=\"#888\" />\n      <rect stroke=\"#888\" />\n    </pattern>\n  */\n  var gridPattern = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATTERN,\n      {\n        'id': 'blocklyGridPattern' + rnd,\n        'patternUnits': 'userSpaceOnUse'\n      }, defs);\n  if (gridOptions['length'] > 0 && gridOptions['spacing'] > 0) {\n    Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.LINE,\n        {'stroke': gridOptions['colour']}, gridPattern);\n    if (gridOptions['length'] > 1) {\n      Blockly.utils.dom.createSvgElement(\n          Blockly.utils.Svg.LINE,\n          {'stroke': gridOptions['colour']}, gridPattern);\n    }\n    // x1, y1, x1, x2 properties will be set later in update.\n  } else {\n    // Edge 16 doesn't handle empty patterns\n    Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.LINE, {}, gridPattern);\n  }\n  return gridPattern;\n};\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing a theme.\n */\n'use strict';\n\ngoog.provide('Blockly.Theme');\n\ngoog.require('Blockly.registry');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.colour');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * Class for a theme.\n * @param {string} name Theme name.\n * @param {!Object.<string, Blockly.Theme.BlockStyle>=} opt_blockStyles A map\n *     from style names (strings) to objects with style attributes for blocks.\n * @param {!Object.<string, Blockly.Theme.CategoryStyle>=} opt_categoryStyles A\n *     map from style names (strings) to objects with style attributes for\n *     categories.\n * @param {!Blockly.Theme.ComponentStyle=} opt_componentStyles A map of Blockly\n *     component names to style value.\n * @constructor\n */\nBlockly.Theme = function(name, opt_blockStyles, opt_categoryStyles,\n    opt_componentStyles) {\n\n  /**\n   * The theme name. This can be used to reference a specific theme in CSS.\n   * @type {string}\n   */\n  this.name = name;\n\n  /**\n   * The block styles map.\n   * @type {!Object.<string, !Blockly.Theme.BlockStyle>}\n   * @package\n   */\n  this.blockStyles = opt_blockStyles || Object.create(null);\n\n  /**\n   * The category styles map.\n   * @type {!Object.<string, Blockly.Theme.CategoryStyle>}\n   * @package\n   */\n  this.categoryStyles = opt_categoryStyles || Object.create(null);\n\n  /**\n   * The UI components styles map.\n   * @type {!Blockly.Theme.ComponentStyle}\n   * @package\n   */\n  this.componentStyles = opt_componentStyles ||\n    (/** @type {Blockly.Theme.ComponentStyle} */ (Object.create(null)));\n\n  /**\n   * The font style.\n   * @type {!Blockly.Theme.FontStyle}\n   * @package\n   */\n  this.fontStyle = /** @type {Blockly.Theme.FontStyle} */ (Object.create(null));\n\n  /**\n   * Whether or not to add a 'hat' on top of all blocks with no previous or\n   * output connections.\n   * @type {?boolean}\n   * @package\n   */\n  this.startHats = null;\n\n  // Register the theme by name.\n  Blockly.registry.register(Blockly.registry.Type.THEME, name, this);\n};\n\n/**\n * A block style.\n * @typedef {{\n *            colourPrimary:string,\n *            colourSecondary:string,\n *            colourTertiary:string,\n *            hat:string\n *          }}\n */\nBlockly.Theme.BlockStyle;\n\n/**\n * A category style.\n * @typedef {{\n *            colour:string\n *          }}\n */\nBlockly.Theme.CategoryStyle;\n\n/**\n * A component style.\n * @typedef {{\n *            workspaceBackgroundColour:?string,\n *            toolboxBackgroundColour:?string,\n *            toolboxForegroundColour:?string,\n *            flyoutBackgroundColour:?string,\n *            flyoutForegroundColour:?string,\n *            flyoutOpacity:?number,\n *            scrollbarColour:?string,\n *            scrollbarOpacity:?number,\n *            insertionMarkerColour:?string,\n *            insertionMarkerOpacity:?number,\n *            markerColour:?string,\n *            cursorColour:?string,\n *            selectedGlowColour:?string,\n *            selectedGlowOpacity:?number,\n *            replacementGlowColour:?string,\n *            replacementGlowOpacity:?number\n *          }}\n */\nBlockly.Theme.ComponentStyle;\n\n/**\n * A font style.\n * @typedef {{\n *            family:?string,\n *            weight:?string,\n *            size:?number\n *          }}\n */\nBlockly.Theme.FontStyle;\n\n/**\n * Gets the class name that identifies this theme.\n * @return {string} The CSS class name.\n * @package\n */\nBlockly.Theme.prototype.getClassName = function() {\n  return this.name + '-theme';\n};\n\n/**\n * Overrides or adds a style to the blockStyles map.\n * @param {string} blockStyleName The name of the block style.\n * @param {Blockly.Theme.BlockStyle} blockStyle The block style.\n*/\nBlockly.Theme.prototype.setBlockStyle = function(blockStyleName, blockStyle) {\n  this.blockStyles[blockStyleName] = blockStyle;\n};\n\n/**\n * Overrides or adds a style to the categoryStyles map.\n * @param {string} categoryStyleName The name of the category style.\n * @param {Blockly.Theme.CategoryStyle} categoryStyle The category style.\n*/\nBlockly.Theme.prototype.setCategoryStyle = function(categoryStyleName,\n    categoryStyle) {\n  this.categoryStyles[categoryStyleName] = categoryStyle;\n};\n\n/**\n * Gets the style for a given Blockly UI component.  If the style value is a\n * string, we attempt to find the value of any named references.\n * @param {string} componentName The name of the component.\n * @return {?string} The style value.\n */\nBlockly.Theme.prototype.getComponentStyle = function(componentName) {\n  var style = this.componentStyles[componentName];\n  if (style && typeof style == 'string' &&\n      this.getComponentStyle(/** @type {string} */ (style))) {\n    return this.getComponentStyle(/** @type {string} */ (style));\n  }\n  return style ? String(style) : null;\n};\n\n/**\n * Configure a specific Blockly UI component with a style value.\n * @param {string} componentName The name of the component.\n * @param {*} styleValue The style value.\n*/\nBlockly.Theme.prototype.setComponentStyle = function(componentName,\n    styleValue) {\n  this.componentStyles[componentName] = styleValue;\n};\n\n/**\n * Configure a theme's font style.\n * @param {Blockly.Theme.FontStyle} fontStyle The font style.\n*/\nBlockly.Theme.prototype.setFontStyle = function(fontStyle) {\n  this.fontStyle = fontStyle;\n};\n\n/**\n * Configure a theme's start hats.\n * @param {boolean} startHats True if the theme enables start hats, false\n *     otherwise.\n*/\nBlockly.Theme.prototype.setStartHats = function(startHats) {\n  this.startHats = startHats;\n};\n\n/**\n * Define a new Blockly theme.\n * @param {string} name The name of the theme.\n * @param {!Object} themeObj An object containing theme properties.\n * @return {!Blockly.Theme} A new Blockly theme.\n*/\nBlockly.Theme.defineTheme = function(name, themeObj) {\n  var theme = new Blockly.Theme(name);\n  var base = themeObj['base'];\n  if (base) {\n    if (typeof base == \"string\") {\n      base = Blockly.registry.getObject(Blockly.registry.Type.THEME, base);\n    }\n    if (base instanceof Blockly.Theme) {\n      Blockly.utils.object.deepMerge(theme, base);\n      theme.name = name;\n    }\n  }\n\n  Blockly.utils.object.deepMerge(theme.blockStyles,\n      themeObj['blockStyles']);\n  Blockly.utils.object.deepMerge(theme.categoryStyles,\n      themeObj['categoryStyles']);\n  Blockly.utils.object.deepMerge(theme.componentStyles,\n      themeObj['componentStyles']);\n  Blockly.utils.object.deepMerge(theme.fontStyle,\n      themeObj['fontStyle']);\n  if (themeObj['startHats'] != null) {\n    theme.startHats = themeObj['startHats'];\n  }\n\n  return theme;\n};\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Classic theme.\n * Contains multi-coloured border to create shadow effect.\n */\n'use strict';\n\ngoog.provide('Blockly.Themes.Classic');\n\ngoog.require('Blockly.Theme');\n\n\n// Temporary holding object.\nBlockly.Themes.Classic = {};\n\nBlockly.Themes.Classic.defaultBlockStyles = {\n  \"colour_blocks\": {\n    \"colourPrimary\": \"20\"\n  },\n  \"list_blocks\": {\n    \"colourPrimary\": \"260\"\n  },\n  \"logic_blocks\": {\n    \"colourPrimary\": \"210\"\n  },\n  \"loop_blocks\": {\n    \"colourPrimary\": \"120\"\n  },\n  \"math_blocks\": {\n    \"colourPrimary\": \"230\"\n  },\n  \"procedure_blocks\": {\n    \"colourPrimary\": \"290\"\n  },\n  \"text_blocks\": {\n    \"colourPrimary\": \"160\"\n  },\n  \"variable_blocks\": {\n    \"colourPrimary\": \"330\"\n  },\n  \"variable_dynamic_blocks\": {\n    \"colourPrimary\": \"310\"\n  },\n  \"hat_blocks\": {\n    \"colourPrimary\": \"330\",\n    \"hat\": \"cap\"\n  }\n};\n\nBlockly.Themes.Classic.categoryStyles = {\n  \"colour_category\": {\n    \"colour\": \"20\"\n  },\n  \"list_category\": {\n    \"colour\": \"260\"\n  },\n  \"logic_category\": {\n    \"colour\": \"210\"\n  },\n  \"loop_category\": {\n    \"colour\": \"120\"\n  },\n  \"math_category\": {\n    \"colour\": \"230\"\n  },\n  \"procedure_category\": {\n    \"colour\": \"290\"\n  },\n  \"text_category\": {\n    \"colour\": \"160\"\n  },\n  \"variable_category\": {\n    \"colour\": \"330\"\n  },\n  \"variable_dynamic_category\": {\n    \"colour\": \"310\"\n  }\n};\n\nBlockly.Themes.Classic =\n    new Blockly.Theme('classic', Blockly.Themes.Classic.defaultBlockStyles,\n        Blockly.Themes.Classic.categoryStyles);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Constant declarations for common key codes.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.utils.KeyCodes');\n\n\n/**\n * Key codes for common characters.\n *\n * Copied from Closure's goog.events.KeyCodes\n *\n * This list is not localized and therefore some of the key codes are not\n * correct for non US keyboard layouts. See comments below.\n *\n * @enum {number}\n */\nBlockly.utils.KeyCodes = {\n  WIN_KEY_FF_LINUX: 0,\n  MAC_ENTER: 3,\n  BACKSPACE: 8,\n  TAB: 9,\n  NUM_CENTER: 12,  // NUMLOCK on FF/Safari Mac\n  ENTER: 13,\n  SHIFT: 16,\n  CTRL: 17,\n  ALT: 18,\n  PAUSE: 19,\n  CAPS_LOCK: 20,\n  ESC: 27,\n  SPACE: 32,\n  PAGE_UP: 33,    // also NUM_NORTH_EAST\n  PAGE_DOWN: 34,  // also NUM_SOUTH_EAST\n  END: 35,        // also NUM_SOUTH_WEST\n  HOME: 36,       // also NUM_NORTH_WEST\n  LEFT: 37,       // also NUM_WEST\n  UP: 38,         // also NUM_NORTH\n  RIGHT: 39,      // also NUM_EAST\n  DOWN: 40,       // also NUM_SOUTH\n  PLUS_SIGN: 43,  // NOT numpad plus\n  PRINT_SCREEN: 44,\n  INSERT: 45,  // also NUM_INSERT\n  DELETE: 46,  // also NUM_DELETE\n  ZERO: 48,\n  ONE: 49,\n  TWO: 50,\n  THREE: 51,\n  FOUR: 52,\n  FIVE: 53,\n  SIX: 54,\n  SEVEN: 55,\n  EIGHT: 56,\n  NINE: 57,\n  FF_SEMICOLON: 59,  // Firefox (Gecko) fires this for semicolon instead of 186\n  FF_EQUALS: 61,     // Firefox (Gecko) fires this for equals instead of 187\n  FF_DASH: 173,      // Firefox (Gecko) fires this for dash instead of 189\n  // Firefox (Gecko) fires this for # on UK keyboards, rather than\n  // Shift+SINGLE_QUOTE.\n  FF_HASH: 163,\n  QUESTION_MARK: 63,  // needs localization\n  AT_SIGN: 64,\n  A: 65,\n  B: 66,\n  C: 67,\n  D: 68,\n  E: 69,\n  F: 70,\n  G: 71,\n  H: 72,\n  I: 73,\n  J: 74,\n  K: 75,\n  L: 76,\n  M: 77,\n  N: 78,\n  O: 79,\n  P: 80,\n  Q: 81,\n  R: 82,\n  S: 83,\n  T: 84,\n  U: 85,\n  V: 86,\n  W: 87,\n  X: 88,\n  Y: 89,\n  Z: 90,\n  META: 91,  // WIN_KEY_LEFT\n  WIN_KEY_RIGHT: 92,\n  CONTEXT_MENU: 93,\n  NUM_ZERO: 96,\n  NUM_ONE: 97,\n  NUM_TWO: 98,\n  NUM_THREE: 99,\n  NUM_FOUR: 100,\n  NUM_FIVE: 101,\n  NUM_SIX: 102,\n  NUM_SEVEN: 103,\n  NUM_EIGHT: 104,\n  NUM_NINE: 105,\n  NUM_MULTIPLY: 106,\n  NUM_PLUS: 107,\n  NUM_MINUS: 109,\n  NUM_PERIOD: 110,\n  NUM_DIVISION: 111,\n  F1: 112,\n  F2: 113,\n  F3: 114,\n  F4: 115,\n  F5: 116,\n  F6: 117,\n  F7: 118,\n  F8: 119,\n  F9: 120,\n  F10: 121,\n  F11: 122,\n  F12: 123,\n  NUMLOCK: 144,\n  SCROLL_LOCK: 145,\n\n  // OS-specific media keys like volume controls and browser controls.\n  FIRST_MEDIA_KEY: 166,\n  LAST_MEDIA_KEY: 183,\n\n  SEMICOLON: 186,             // needs localization\n  DASH: 189,                  // needs localization\n  EQUALS: 187,                // needs localization\n  COMMA: 188,                 // needs localization\n  PERIOD: 190,                // needs localization\n  SLASH: 191,                 // needs localization\n  APOSTROPHE: 192,            // needs localization\n  TILDE: 192,                 // needs localization\n  SINGLE_QUOTE: 222,          // needs localization\n  OPEN_SQUARE_BRACKET: 219,   // needs localization\n  BACKSLASH: 220,             // needs localization\n  CLOSE_SQUARE_BRACKET: 221,  // needs localization\n  WIN_KEY: 224,\n  MAC_FF_META:\n      224,  // Firefox (Gecko) fires this for the meta key instead of 91\n  MAC_WK_CMD_LEFT: 91,   // WebKit Left Command key fired, same as META\n  MAC_WK_CMD_RIGHT: 93,  // WebKit Right Command key fired, different from META\n  WIN_IME: 229,\n\n  // \"Reserved for future use\". Some programs (e.g. the SlingPlayer 2.4 ActiveX\n  // control) fire this as a hacky way to disable screensavers.\n  VK_NONAME: 252,\n\n  // We've seen users whose machines fire this keycode at regular one\n  // second intervals. The common thread among these users is that\n  // they're all using Dell Inspiron laptops, so we suspect that this\n  // indicates a hardware/bios problem.\n  // http://en.community.dell.com/support-forums/laptop/f/3518/p/19285957/19523128.aspx\n  PHANTOM: 255\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The namespace used to keep track of keyboard actions and the\n * key codes used to execute those actions.\n * This is used primarily for keyboard navigation.\n */\n'use strict';\n\ngoog.provide('Blockly.user.keyMap');\n\n// TODO: Fix circular dependency.\n// goog.require('Blockly.navigation');\ngoog.require('Blockly.utils.KeyCodes');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * Holds the serialized key to key action mapping.\n * @type {!Object<string, Blockly.Action>}\n * @private\n */\nBlockly.user.keyMap.map_ = {};\n\n/**\n * Object holding valid modifiers.\n * @enum {string}\n */\nBlockly.user.keyMap.modifierKeys = {\n  SHIFT: 'Shift',\n  CONTROL: 'Control',\n  ALT: 'Alt',\n  META: 'Meta'\n};\n\n/**\n * Update the key map to contain the new action.\n * @param {string} keyCode The key code serialized by the serializeKeyEvent.\n * @param {!Blockly.Action} action The action to be executed when the keys\n *     corresponding to the serialized key code is pressed.\n */\nBlockly.user.keyMap.setActionForKey = function(keyCode, action) {\n  var oldKey = Blockly.user.keyMap.getKeyByAction(action);\n  // If the action already exists in the key map remove it and add the new mapping.\n  if (oldKey) {\n    delete Blockly.user.keyMap.map_[oldKey];\n  }\n  Blockly.user.keyMap.map_[keyCode] = action;\n};\n\n/**\n * Creates a new key map.\n * @param {!Object<string, Blockly.Action>} keyMap The object holding the key\n *     to action mapping.\n */\nBlockly.user.keyMap.setKeyMap = function(keyMap) {\n  Blockly.user.keyMap.map_ = keyMap;\n};\n\n/**\n * Gets the current key map.\n * @return {Object<string,Blockly.Action>} The object holding the key to\n *     action mapping.\n */\nBlockly.user.keyMap.getKeyMap = function() {\n  var map = {};\n  Blockly.utils.object.mixin(map, Blockly.user.keyMap.map_);\n  return map;\n};\n\n/**\n * Get the action by the serialized key code.\n * @param {string} keyCode The serialized key code.\n * @return {Blockly.Action|undefined} The action holding the function to\n *     call when the given keyCode is used or undefined if no action exists.\n */\nBlockly.user.keyMap.getActionByKeyCode = function(keyCode) {\n  return Blockly.user.keyMap.map_[keyCode];\n};\n\n/**\n * Get the serialized key that corresponds to the action.\n * @param {!Blockly.Action} action The action for which we want to get\n *     the key.\n * @return {?string} The serialized key or null if the action does not have\n *     a key mapping.\n */\nBlockly.user.keyMap.getKeyByAction = function(action) {\n  var keys = Object.keys(Blockly.user.keyMap.map_);\n  for (var i = 0, key; (key = keys[i]); i++) {\n    if (Blockly.user.keyMap.map_[key].name === action.name) {\n      return key;\n    }\n  }\n  return null;\n};\n\n/**\n * Serialize the key event.\n * @param {!KeyboardEvent} e A key up event holding the key code.\n * @return {string} A string containing the serialized key event.\n * @package\n */\nBlockly.user.keyMap.serializeKeyEvent = function(e) {\n  var modifiers = Blockly.utils.object.values(Blockly.user.keyMap.modifierKeys);\n  var key = '';\n  for (var i = 0, keyName; (keyName = modifiers[i]); i++) {\n    if (e.getModifierState(keyName)) {\n      key += keyName;\n    }\n  }\n  key += e.keyCode;\n  return key;\n};\n\n/**\n * Checks whether any of the given modifiers are not valid.\n * @param {!Array.<string>} modifiers List of modifiers to be used with the key.\n * @param {!Array.<string>} validModifiers List of modifiers we support.\n * @throws {Error} if the modifier is not in the valid modifiers list.\n * @private\n */\nBlockly.user.keyMap.checkModifiers_ = function(modifiers, validModifiers) {\n  for (var i = 0, modifier; (modifier = modifiers[i]); i++) {\n    if (validModifiers.indexOf(modifier) < 0) {\n      throw Error(modifier + ' is not a valid modifier key.');\n    }\n  }\n};\n\n/**\n * Create the serialized key code that will be used in the key map.\n * @param {number} keyCode Number code representing the key.\n * @param {!Array.<string>} modifiers List of modifiers to be used with the key.\n *     All valid modifiers can be found in the Blockly.user.keyMap.modifierKeys.\n * @return {string} The serialized key code for the given modifiers and key.\n */\nBlockly.user.keyMap.createSerializedKey = function(keyCode, modifiers) {\n  var key = '';\n  var validModifiers = Blockly.utils.object.values(Blockly.user.keyMap.modifierKeys);\n  Blockly.user.keyMap.checkModifiers_(modifiers, validModifiers);\n  for (var i = 0, validModifier; (validModifier = validModifiers[i]); i++) {\n    if (modifiers.indexOf(validModifier) > -1) {\n      key += validModifier;\n    }\n  }\n  key += keyCode;\n  return key;\n};\n\n/**\n * Creates the default key map.\n * @return {!Object<string,Blockly.Action>} An object holding the default key\n *     to action mapping.\n */\nBlockly.user.keyMap.createDefaultKeyMap = function() {\n  var map = {};\n  var controlK = Blockly.user.keyMap.createSerializedKey(\n      Blockly.utils.KeyCodes.K, [Blockly.user.keyMap.modifierKeys.CONTROL,\n        Blockly.user.keyMap.modifierKeys.SHIFT]);\n  var shiftW = Blockly.user.keyMap.createSerializedKey(\n      Blockly.utils.KeyCodes.W, [Blockly.user.keyMap.modifierKeys.SHIFT]);\n  var shiftA = Blockly.user.keyMap.createSerializedKey(\n      Blockly.utils.KeyCodes.A, [Blockly.user.keyMap.modifierKeys.SHIFT]);\n  var shiftS = Blockly.user.keyMap.createSerializedKey(\n      Blockly.utils.KeyCodes.S, [Blockly.user.keyMap.modifierKeys.SHIFT]);\n  var shiftD = Blockly.user.keyMap.createSerializedKey(\n      Blockly.utils.KeyCodes.D, [Blockly.user.keyMap.modifierKeys.SHIFT]);\n\n  map[Blockly.utils.KeyCodes.W] = Blockly.navigation.ACTION_PREVIOUS;\n  map[Blockly.utils.KeyCodes.A] = Blockly.navigation.ACTION_OUT;\n  map[Blockly.utils.KeyCodes.S] = Blockly.navigation.ACTION_NEXT;\n  map[Blockly.utils.KeyCodes.D] = Blockly.navigation.ACTION_IN;\n  map[Blockly.utils.KeyCodes.I] = Blockly.navigation.ACTION_INSERT;\n  map[Blockly.utils.KeyCodes.ENTER] = Blockly.navigation.ACTION_MARK;\n  map[Blockly.utils.KeyCodes.X] = Blockly.navigation.ACTION_DISCONNECT;\n  map[Blockly.utils.KeyCodes.T] = Blockly.navigation.ACTION_TOOLBOX;\n  map[Blockly.utils.KeyCodes.E] = Blockly.navigation.ACTION_EXIT;\n  map[Blockly.utils.KeyCodes.ESC] = Blockly.navigation.ACTION_EXIT;\n  map[controlK] = Blockly.navigation.ACTION_TOGGLE_KEYBOARD_NAV;\n  map[shiftW] = Blockly.navigation.ACTION_MOVE_WS_CURSOR_UP;\n  map[shiftA] = Blockly.navigation.ACTION_MOVE_WS_CURSOR_LEFT;\n  map[shiftS] = Blockly.navigation.ACTION_MOVE_WS_CURSOR_DOWN;\n  map[shiftD] = Blockly.navigation.ACTION_MOVE_WS_CURSOR_RIGHT;\n  return map;\n};\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Workspace metrics definitions.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.utils.Metrics');\n\n\n/**\n * @record\n */\nBlockly.utils.Metrics = function() {};\n\n/**\n * Height of the visible portion of the workspace.\n * @type {number}\n */\nBlockly.utils.Metrics.prototype.viewHeight;\n\n/**\n * Width of the visible portion of the workspace.\n * @type {number}\n */\nBlockly.utils.Metrics.prototype.viewWidth;\n\n/**\n * Height of the content.\n * @type {number}\n */\nBlockly.utils.Metrics.prototype.contentHeight;\n\n/**\n * Width of the content.\n * @type {number}\n */\nBlockly.utils.Metrics.prototype.contentWidth;\n\n/**\n * Top-edge of the visible portion of the workspace, relative to the workspace\n * origin.\n * @type {number}\n */\nBlockly.utils.Metrics.prototype.viewTop;\n\n/**\n * Left-edge of the visible portion of the workspace, relative to the workspace\n * origin.\n * @type {number}\n */\nBlockly.utils.Metrics.prototype.viewLeft;\n\n/**\n * Top-edge of the content, relative to the workspace origin.\n * @type {number}\n */\nBlockly.utils.Metrics.prototype.contentTop;\n\n/**\n * Left-edge of the content relative to the workspace origin.\n * @type {number}\n */\nBlockly.utils.Metrics.prototype.contentLeft;\n\n/**\n * Top-edge of the visible portion of the workspace, relative to the blocklyDiv.\n * @type {number}\n */\nBlockly.utils.Metrics.prototype.absoluteTop;\n\n/**\n * Left-edge of the visible portion of the workspace, relative to the\n * blocklyDiv.\n * @type {number}\n */\nBlockly.utils.Metrics.prototype.absoluteLeft;\n\n/**\n * Height of the Blockly div (the view + the toolbox, simple of otherwise).\n * @type {number|undefined}\n */\nBlockly.utils.Metrics.prototype.svgHeight;\n\n/**\n * Width of the Blockly div (the view + the toolbox, simple or otherwise).\n * @type {number|undefined}\n */\nBlockly.utils.Metrics.prototype.svgWidth;\n\n/**\n * Width of the toolbox, if it exists.  Otherwise zero.\n * @type {number|undefined}\n */\nBlockly.utils.Metrics.prototype.toolboxWidth;\n\n/**\n * Height of the toolbox, if it exists.  Otherwise zero.\n * @type {number|undefined}\n */\nBlockly.utils.Metrics.prototype.toolboxHeight;\n\n/**\n * Top, bottom, left or right. Use TOOLBOX_AT constants to compare.\n * @type {number|undefined}\n */\nBlockly.utils.Metrics.prototype.toolboxPosition;\n\n/**\n * Width of the flyout if it is always open.  Otherwise zero.\n * @type {number|undefined}\n */\nBlockly.utils.Metrics.prototype.flyoutWidth;\n\n/**\n * Height of the flyout if it is always open.  Otherwise zero.\n * @type {number|undefined}\n */\nBlockly.utils.Metrics.prototype.flyoutHeight;\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility functions for the toolbox and flyout.\n * @author aschmiedt@google.com (Abby Schmiedt)\n */\n'use strict';\n\ngoog.provide('Blockly.utils.toolbox');\n\ngoog.require('Blockly.constants');\n\ngoog.requireType('Blockly.ToolboxCategory');\ngoog.requireType('Blockly.ToolboxSeparator');\n\n\n/**\n * The information needed to create a block in the toolbox.\n * @typedef {{\n *            kind:string,\n *            blockxml:(?string|Node),\n *            type: ?string,\n *            gap: (?string|?number),\n *            disabled: (?string|?boolean)\n *          }}\n */\nBlockly.utils.toolbox.BlockInfo;\n\n/**\n * The information needed to create a separator in the toolbox.\n * @typedef {{\n *            kind:string,\n *            id:?string,\n *            gap:?number,\n *            cssconfig:?Blockly.ToolboxSeparator.CssConfig\n *          }}\n */\nBlockly.utils.toolbox.SeparatorInfo;\n\n/**\n * The information needed to create a button in the toolbox.\n * @typedef {{\n *            kind:string,\n *            text:string,\n *            callbackkey:string\n *          }}\n */\nBlockly.utils.toolbox.ButtonInfo;\n\n/**\n * The information needed to create a label in the toolbox.\n * @typedef {{\n *            kind:string,\n *            id:?string,\n *            text:string\n *          }}\n */\nBlockly.utils.toolbox.LabelInfo;\n\n/**\n * The information needed to create either a button or a label in the flyout.\n * @typedef {Blockly.utils.toolbox.ButtonInfo|\n *           Blockly.utils.toolbox.LabelInfo}\n */\nBlockly.utils.toolbox.ButtonOrLabelInfo;\n\n/**\n * The information needed to create a category in the toolbox.\n * @typedef {{\n *            kind:string,\n *            name:string,\n *            id:?string,\n *            categorystyle:?string,\n *            colour:?string,\n *            cssconfig:?Blockly.ToolboxCategory.CssConfig,\n *            contents:!Array<Blockly.utils.toolbox.ToolboxItemInfo>,\n *            hidden:?string\n *          }}\n */\nBlockly.utils.toolbox.StaticCategoryInfo;\n\n/**\n * The information needed to create a custom category.\n * @typedef {{\n *            kind:string,\n *            custom:string,\n *            id:?string,\n *            categorystyle:?string,\n *            colour:?string,\n *            cssconfig:?Blockly.ToolboxCategory.CssConfig,\n *            hidden:?string\n *          }}\n */\nBlockly.utils.toolbox.DynamicCategoryInfo;\n\n/**\n * The information needed to create either a dynamic or static category.\n * @typedef {Blockly.utils.toolbox.StaticCategoryInfo|\n *           Blockly.utils.toolbox.DynamicCategoryInfo}\n */\nBlockly.utils.toolbox.CategoryInfo;\n\n/**\n * Any information that can be used to create an item in the toolbox.\n * @typedef {Blockly.utils.toolbox.FlyoutItemInfo|\n *           Blockly.utils.toolbox.StaticCategoryInfo}\n */\nBlockly.utils.toolbox.ToolboxItemInfo;\n\n/**\n * All the different types that can be displayed in a flyout.\n * @typedef {Blockly.utils.toolbox.BlockInfo|\n *           Blockly.utils.toolbox.SeparatorInfo|\n *           Blockly.utils.toolbox.ButtonInfo|\n *           Blockly.utils.toolbox.LabelInfo|\n *           Blockly.utils.toolbox.DynamicCategoryInfo}\n */\nBlockly.utils.toolbox.FlyoutItemInfo;\n\n/**\n * The JSON definition of a toolbox.\n * @typedef {{\n *            contents:!Array<Blockly.utils.toolbox.ToolboxItemInfo>\n *          }}\n */\nBlockly.utils.toolbox.ToolboxInfo;\n\n/**\n * An array holding flyout items.\n * @typedef {\n *            Array<!Blockly.utils.toolbox.FlyoutItemInfo>\n *          }\n */\nBlockly.utils.toolbox.FlyoutItemInfoArray;\n\n/**\n * All of the different types that can create a toolbox.\n * @typedef {Node|\n *           Blockly.utils.toolbox.ToolboxInfo|\n *           string}\n */\nBlockly.utils.toolbox.ToolboxDefinition;\n\n/**\n * All of the different types that can be used to show items in a flyout.\n * @typedef {Blockly.utils.toolbox.FlyoutItemInfoArray|\n *           NodeList|\n *           Blockly.utils.toolbox.ToolboxInfo|\n *           Array<!Node>}\n */\nBlockly.utils.toolbox.FlyoutDefinition;\n\n/**\n * The name used to identify a toolbox that has category like items.\n * This only needs to be used if a toolbox wants to be treated like a category\n * toolbox but does not actually contain any toolbox items with the kind\n * 'category'.\n * @const {string}\n */\nBlockly.utils.toolbox.CATEGORY_TOOLBOX_KIND = 'categoryToolbox';\n\n/**\n * The name used to identify a toolbox that has no categories and is displayed\n * as a simple flyout displaying blocks, buttons, or labels.\n * @const {string}\n */\nBlockly.utils.toolbox.FLYOUT_TOOLBOX_KIND = 'flyoutToolbox';\n\n/**\n * Position of the the toolbox relative to the flyout.\n * @enum {number}\n */\nBlockly.utils.toolbox.Position = {\n  TOP: Blockly.TOOLBOX_AT_TOP,\n  BOTTOM: Blockly.TOOLBOX_AT_BOTTOM,\n  LEFT: Blockly.TOOLBOX_AT_LEFT,\n  RIGHT: Blockly.TOOLBOX_AT_RIGHT\n};\n\n/**\n * Converts the toolbox definition into toolbox JSON.\n * @param {?Blockly.utils.toolbox.ToolboxDefinition} toolboxDef The definition\n *     of the toolbox in one of its many forms.\n * @return {?Blockly.utils.toolbox.ToolboxInfo} Object holding information\n *     for creating a toolbox.\n * @package\n */\nBlockly.utils.toolbox.convertToolboxDefToJson = function(toolboxDef) {\n  if (!toolboxDef) {\n    return null;\n  }\n\n  if (toolboxDef instanceof Element || typeof toolboxDef == 'string') {\n    toolboxDef = Blockly.utils.toolbox.parseToolboxTree(toolboxDef);\n    toolboxDef = Blockly.utils.toolbox.convertToToolboxJson_(toolboxDef);\n  }\n\n  var toolboxJson = /** @type {Blockly.utils.toolbox.ToolboxInfo} */ (toolboxDef);\n  Blockly.utils.toolbox.validateToolbox_(toolboxJson);\n  return toolboxJson;\n};\n\n/**\n * Validates the toolbox JSON fields have been set correctly.\n * @param {Blockly.utils.toolbox.ToolboxInfo} toolboxJson Object holding\n *     information for creating a toolbox.\n * @throws {Error} if the toolbox is not the correct format.\n * @private\n */\nBlockly.utils.toolbox.validateToolbox_ = function(toolboxJson) {\n  var toolboxKind = toolboxJson['kind'];\n  var toolboxContents = toolboxJson['contents'];\n\n  if (toolboxKind) {\n    if (toolboxKind != Blockly.utils.toolbox.FLYOUT_TOOLBOX_KIND &&\n      toolboxKind != Blockly.utils.toolbox.CATEGORY_TOOLBOX_KIND) {\n      throw Error('Invalid toolbox kind ' + toolboxKind + '.' +\n        ' Please supply either ' +\n        Blockly.utils.toolbox.FLYOUT_TOOLBOX_KIND + ' or ' +\n        Blockly.utils.toolbox.CATEGORY_TOOLBOX_KIND);\n    }\n  }\n  if (!toolboxContents) {\n    throw Error('Toolbox must have a contents attribute.');\n  }\n};\n\n/**\n * Converts the flyout definition into a list of flyout items.\n * @param {?Blockly.utils.toolbox.FlyoutDefinition} flyoutDef The definition of\n *    the flyout in one of its many forms.\n * @return {!Blockly.utils.toolbox.FlyoutItemInfoArray} A list of flyout items.\n * @package\n */\nBlockly.utils.toolbox.convertFlyoutDefToJsonArray = function(flyoutDef) {\n  if (!flyoutDef) {\n    return [];\n  }\n\n  if (flyoutDef['contents']) {\n    return flyoutDef['contents'];\n  }\n\n  // If it is already in the correct format return the flyoutDef.\n  if (Array.isArray(flyoutDef) && flyoutDef.length > 0 &&\n      !flyoutDef[0].nodeType) {\n    return flyoutDef;\n  }\n\n  return Blockly.utils.toolbox.xmlToJsonArray_(\n      /** @type {!Array<Node>|!NodeList} */ (flyoutDef));\n};\n\n/**\n * Whether or not the toolbox definition has categories.\n * @param {?Blockly.utils.toolbox.ToolboxInfo} toolboxJson Object holding\n *     information for creating a toolbox.\n * @return {boolean} True if the toolbox has categories.\n * @package\n */\nBlockly.utils.toolbox.hasCategories = function(toolboxJson) {\n  if (!toolboxJson) {\n    return false;\n  }\n\n  var toolboxKind = toolboxJson['kind'];\n  if (toolboxKind) {\n    return toolboxKind == Blockly.utils.toolbox.CATEGORY_TOOLBOX_KIND;\n  }\n\n  var categories = toolboxJson['contents'].filter(function(item) {\n    return item['kind'].toUpperCase() == 'CATEGORY';\n  });\n  return !!categories.length;\n};\n\n/**\n * Whether or not the category is collapsible.\n * @param {!Blockly.utils.toolbox.CategoryInfo} categoryInfo Object holing\n *    information for creating a category.\n * @return {boolean} True if the category has subcategories.\n * @package\n */\nBlockly.utils.toolbox.isCategoryCollapsible = function(categoryInfo) {\n  if (!categoryInfo || !categoryInfo['contents']) {\n    return false;\n  }\n\n  var categories = categoryInfo['contents'].filter(function(item) {\n    return item['kind'].toUpperCase() == 'CATEGORY';\n  });\n  return !!categories.length;\n};\n\n/**\n * Parses the provided toolbox definition into a consistent format.\n * @param {Node} toolboxDef The definition of the toolbox in one of its many forms.\n * @return {!Blockly.utils.toolbox.ToolboxInfo} Object holding information\n *     for creating a toolbox.\n * @private\n */\nBlockly.utils.toolbox.convertToToolboxJson_ = function(toolboxDef) {\n  var contents = Blockly.utils.toolbox.xmlToJsonArray_(\n      /** @type {!Node|!Array<Node>} */ (toolboxDef));\n  var toolboxJson = {'contents': contents};\n  if (toolboxDef instanceof Node) {\n    Blockly.utils.toolbox.addAttributes_(toolboxDef, toolboxJson);\n  }\n  return toolboxJson;\n};\n\n/**\n * Converts the xml for a toolbox to JSON.\n * @param {!Node|!Array<Node>|!NodeList} toolboxDef The\n *     definition of the toolbox in one of its many forms.\n * @return {!Blockly.utils.toolbox.FlyoutItemInfoArray|\n *          !Array<Blockly.utils.toolbox.ToolboxItemInfo>} A list of objects in\n *          the toolbox.\n * @private\n */\nBlockly.utils.toolbox.xmlToJsonArray_ = function(toolboxDef) {\n  var arr = [];\n  // If it is a node it will have children.\n  var childNodes = toolboxDef.childNodes;\n  if (!childNodes) {\n    // Otherwise the toolboxDef is an array or collection.\n    childNodes = toolboxDef;\n  }\n  for (var i = 0, child; (child = childNodes[i]); i++) {\n    if (!child.tagName) {\n      continue;\n    }\n    var obj = {};\n    var tagName = child.tagName.toUpperCase();\n    obj['kind'] = tagName;\n\n    // Store the xml for a block\n    if (tagName == 'BLOCK') {\n      obj['blockxml'] = child;\n    } else if (tagName == 'CATEGORY') {\n      // Get the contents of a category\n      obj['contents'] = Blockly.utils.toolbox.xmlToJsonArray_(child);\n    }\n\n    // Add xml attributes to object\n    Blockly.utils.toolbox.addAttributes_(child, obj);\n    arr.push(obj);\n  }\n  return arr;\n};\n\n/**\n * Adds the attributes on the node to the given object.\n * @param {!Node} node The node to copy the attributes from.\n * @param {!Object} obj The object to copy the attributes to.\n * @private\n */\nBlockly.utils.toolbox.addAttributes_ = function(node, obj) {\n  for (var j = 0; j < node.attributes.length; j++) {\n    var attr = node.attributes[j];\n    if (attr.nodeName.indexOf('css-') > -1) {\n      obj['cssconfig'] = obj['cssconfig'] || {};\n      obj['cssconfig'][attr.nodeName.replace('css-', '')] = attr.value;\n    } else {\n      obj[attr.nodeName] = attr.value;\n    }\n  }\n};\n\n/**\n * Parse the provided toolbox tree into a consistent DOM format.\n * @param {?Node|?string} toolboxDef DOM tree of blocks, or text representation\n *    of same.\n * @return {?Node} DOM tree of blocks, or null.\n */\nBlockly.utils.toolbox.parseToolboxTree = function(toolboxDef) {\n  if (toolboxDef) {\n    if (typeof toolboxDef != 'string') {\n      if (Blockly.utils.userAgent.IE && toolboxDef.outerHTML) {\n        // In this case the tree will not have been properly built by the\n        // browser. The HTML will be contained in the element, but it will\n        // not have the proper DOM structure since the browser doesn't support\n        // XSLTProcessor (XML -> HTML).\n        toolboxDef = toolboxDef.outerHTML;\n      } else if (!(toolboxDef instanceof Element)) {\n        toolboxDef = null;\n      }\n    }\n    if (typeof toolboxDef == 'string') {\n      toolboxDef = Blockly.Xml.textToDom(toolboxDef);\n      if (toolboxDef.nodeName.toLowerCase() != 'xml') {\n        throw TypeError('Toolbox should be an <xml> document.');\n      }\n    }\n  } else {\n    toolboxDef = null;\n  }\n  return toolboxDef;\n};\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview XML element manipulation.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.utils.xml\n * @namespace\n */\ngoog.provide('Blockly.utils.xml');\n\n/**\n * Namespace for Blockly's XML.\n */\nBlockly.utils.xml.NAME_SPACE = 'https://developers.google.com/blockly/xml';\n\n/**\n * Get the document object.  This method is overridden in the Node.js build of\n * Blockly. See gulpfile.js, package-blockly-node task.\n * @return {!Document} The document object.\n * @public\n */\nBlockly.utils.xml.document = function() {\n  return document;\n};\n\n/**\n * Create DOM element for XML.\n * @param {string} tagName Name of DOM element.\n * @return {!Element} New DOM element.\n * @public\n */\nBlockly.utils.xml.createElement = function(tagName) {\n  return Blockly.utils.xml.document().createElementNS(\n      Blockly.utils.xml.NAME_SPACE, tagName);\n};\n\n/**\n * Create text element for XML.\n * @param {string} text Text content.\n * @return {!Text} New DOM text node.\n * @public\n */\nBlockly.utils.xml.createTextNode = function(text) {\n  return Blockly.utils.xml.document().createTextNode(text);\n};\n\n/**\n * Converts an XML string into a DOM tree.\n * @param {string} text XML string.\n * @return {Document} The DOM document.\n * @throws if XML doesn't parse.\n * @public\n */\nBlockly.utils.xml.textToDomDocument = function(text) {\n  var oParser = new DOMParser();\n  return oParser.parseFromString(text, 'text/xml');\n};\n\n/**\n * Converts a DOM structure into plain text.\n * Currently the text format is fairly ugly: all one line with no whitespace.\n * @param {!Node} dom A tree of XML nodes.\n * @return {string} Text representation.\n * @public\n */\nBlockly.utils.xml.domToText = function(dom) {\n  var oSerializer = new XMLSerializer();\n  return oSerializer.serializeToString(dom);\n};\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Classes for all types of block events.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.Events.BlockBase');\ngoog.provide('Blockly.Events.BlockChange');\ngoog.provide('Blockly.Events.BlockCreate');\ngoog.provide('Blockly.Events.BlockDelete');\ngoog.provide('Blockly.Events.BlockMove');\ngoog.provide('Blockly.Events.Change');  // Deprecated.\ngoog.provide('Blockly.Events.Create');  // Deprecated.\ngoog.provide('Blockly.Events.Delete');  // Deprecated.\ngoog.provide('Blockly.Events.Move');  // Deprecated.\n\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.Abstract');\ngoog.require('Blockly.registry');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.xml');\n// TODO: Fix recursive dependency.\n// goog.require('Blockly.Xml');\n\n\n/**\n * Abstract class for a block event.\n * @param {!Blockly.Block=} opt_block The block this event corresponds to.\n *     Undefined for a blank event.\n * @extends {Blockly.Events.Abstract}\n * @constructor\n */\nBlockly.Events.BlockBase = function(opt_block) {\n  Blockly.Events.BlockBase.superClass_.constructor.call(this);\n  this.isBlank = typeof opt_block == 'undefined';\n\n  /**\n   * The block id for the block this event pertains to\n   * @type {string}\n   */\n  this.blockId = this.isBlank ? '' : opt_block.id;\n\n  /**\n   * The workspace identifier for this event.\n   * @type {string}\n   */\n  this.workspaceId = this.isBlank ? '' : opt_block.workspace.id;\n};\nBlockly.utils.object.inherits(Blockly.Events.BlockBase,\n    Blockly.Events.Abstract);\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\nBlockly.Events.BlockBase.prototype.toJson = function() {\n  var json = Blockly.Events.BlockBase.superClass_.toJson.call(this);\n  json['blockId'] = this.blockId;\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.BlockBase.prototype.fromJson = function(json) {\n  Blockly.Events.BlockBase.superClass_.fromJson.call(this, json);\n  this.blockId = json['blockId'];\n};\n\n/**\n * Class for a block change event.\n * @param {!Blockly.Block=} opt_block The changed block.  Undefined for a blank\n *     event.\n * @param {string=} opt_element One of 'field', 'comment', 'disabled', etc.\n * @param {?string=} opt_name Name of input or field affected, or null.\n * @param {*=} opt_oldValue Previous value of element.\n * @param {*=} opt_newValue New value of element.\n * @extends {Blockly.Events.BlockBase}\n * @constructor\n */\nBlockly.Events.Change = function(opt_block, opt_element, opt_name, opt_oldValue,\n    opt_newValue) {\n  Blockly.Events.Change.superClass_.constructor.call(this, opt_block);\n  if (!opt_block) {\n    return;  // Blank event to be populated by fromJson.\n  }\n  this.element = typeof opt_element == 'undefined' ? '' : opt_element;\n  this.name = typeof opt_name == 'undefined' ? '' : opt_name;\n  this.oldValue = typeof opt_oldValue == 'undefined' ? '' : opt_oldValue;\n  this.newValue = typeof opt_newValue == 'undefined' ? '' : opt_newValue;\n};\nBlockly.utils.object.inherits(Blockly.Events.Change, Blockly.Events.BlockBase);\n\n/**\n * Class for a block change event.\n * @param {!Blockly.Block=} opt_block The changed block.  Undefined for a blank\n *     event.\n * @param {string=} opt_element One of 'field', 'comment', 'disabled', etc.\n * @param {?string=} opt_name Name of input or field affected, or null.\n * @param {*=} opt_oldValue Previous value of element.\n * @param {*=} opt_newValue New value of element.\n * @extends {Blockly.Events.BlockBase}\n * @constructor\n */\nBlockly.Events.BlockChange = Blockly.Events.Change;\n\n/**\n * Type of this event.\n * @type {string}\n */\nBlockly.Events.Change.prototype.type = Blockly.Events.CHANGE;\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\nBlockly.Events.Change.prototype.toJson = function() {\n  var json = Blockly.Events.Change.superClass_.toJson.call(this);\n  json['element'] = this.element;\n  if (this.name) {\n    json['name'] = this.name;\n  }\n  json['newValue'] = this.newValue;\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.Change.prototype.fromJson = function(json) {\n  Blockly.Events.Change.superClass_.fromJson.call(this, json);\n  this.element = json['element'];\n  this.name = json['name'];\n  this.newValue = json['newValue'];\n};\n\n/**\n * Does this event record any change of state?\n * @return {boolean} False if something changed.\n */\nBlockly.Events.Change.prototype.isNull = function() {\n  return this.oldValue == this.newValue;\n};\n\n/**\n * Run a change event.\n * @param {boolean} forward True if run forward, false if run backward (undo).\n */\nBlockly.Events.Change.prototype.run = function(forward) {\n  var workspace = this.getEventWorkspace_();\n  var block = workspace.getBlockById(this.blockId);\n  if (!block) {\n    console.warn(\"Can't change non-existent block: \" + this.blockId);\n    return;\n  }\n  if (block.mutator) {\n    // Close the mutator (if open) since we don't want to update it.\n    block.mutator.setVisible(false);\n  }\n  var value = forward ? this.newValue : this.oldValue;\n  switch (this.element) {\n    case 'field':\n      var field = block.getField(this.name);\n      if (field) {\n        field.setValue(value);\n      } else {\n        console.warn(\"Can't set non-existent field: \" + this.name);\n      }\n      break;\n    case 'comment':\n      block.setCommentText(/** @type {string} */ (value) || null);\n      break;\n    case 'collapsed':\n      block.setCollapsed(!!value);\n      break;\n    case 'disabled':\n      block.setEnabled(!value);\n      break;\n    case 'inline':\n      block.setInputsInline(!!value);\n      break;\n    case 'mutation':\n      var oldMutation = '';\n      if (block.mutationToDom) {\n        var oldMutationDom = block.mutationToDom();\n        oldMutation = oldMutationDom && Blockly.Xml.domToText(oldMutationDom);\n      }\n      if (block.domToMutation) {\n        var dom = Blockly.Xml.textToDom(/** @type {string} */ (value) || '<mutation/>');\n        block.domToMutation(dom);\n      }\n      Blockly.Events.fire(new Blockly.Events.Change(\n          block, 'mutation', null, oldMutation, value));\n      break;\n    default:\n      console.warn('Unknown change type: ' + this.element);\n  }\n};\n\n/**\n * Class for a block creation event.\n * @param {!Blockly.Block=} opt_block The created block.  Undefined for a blank\n *     event.\n * @extends {Blockly.Events.BlockBase}\n * @constructor\n */\nBlockly.Events.Create = function(opt_block) {\n  Blockly.Events.Create.superClass_.constructor.call(this, opt_block);\n  if (!opt_block) {\n    return;  // Blank event to be populated by fromJson.\n  }\n  if (opt_block.isShadow()) {\n    // Moving shadow blocks is handled via disconnection.\n    this.recordUndo = false;\n  }\n\n  if (opt_block.workspace.rendered) {\n    this.xml = Blockly.Xml.blockToDomWithXY(opt_block);\n  } else {\n    this.xml = Blockly.Xml.blockToDom(opt_block);\n  }\n  this.ids = Blockly.Events.getDescendantIds(opt_block);\n};\nBlockly.utils.object.inherits(Blockly.Events.Create, Blockly.Events.BlockBase);\n\n/**\n * Class for a block creation event.\n * @param {!Blockly.Block=} block The created block. Undefined for a blank\n *     event.\n * @extends {Blockly.Events.BlockBase}\n * @constructor\n */\nBlockly.Events.BlockCreate = Blockly.Events.Create;\n\n/**\n * Type of this event.\n * @type {string}\n */\nBlockly.Events.Create.prototype.type = Blockly.Events.CREATE;\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\nBlockly.Events.Create.prototype.toJson = function() {\n  var json = Blockly.Events.Create.superClass_.toJson.call(this);\n  json['xml'] = Blockly.Xml.domToText(this.xml);\n  json['ids'] = this.ids;\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.Create.prototype.fromJson = function(json) {\n  Blockly.Events.Create.superClass_.fromJson.call(this, json);\n  this.xml = Blockly.Xml.textToDom(json['xml']);\n  this.ids = json['ids'];\n};\n\n/**\n * Run a creation event.\n * @param {boolean} forward True if run forward, false if run backward (undo).\n */\nBlockly.Events.Create.prototype.run = function(forward) {\n  var workspace = this.getEventWorkspace_();\n  if (forward) {\n    var xml = Blockly.utils.xml.createElement('xml');\n    xml.appendChild(this.xml);\n    Blockly.Xml.domToWorkspace(xml, workspace);\n  } else {\n    for (var i = 0, id; (id = this.ids[i]); i++) {\n      var block = workspace.getBlockById(id);\n      if (block) {\n        block.dispose(false);\n      } else if (id == this.blockId) {\n        // Only complain about root-level block.\n        console.warn(\"Can't uncreate non-existent block: \" + id);\n      }\n    }\n  }\n};\n\n/**\n * Class for a block deletion event.\n * @param {!Blockly.Block=} opt_block The deleted block.  Undefined for a blank\n *     event.\n * @extends {Blockly.Events.BlockBase}\n * @constructor\n */\nBlockly.Events.Delete = function(opt_block) {\n  Blockly.Events.Delete.superClass_.constructor.call(this, opt_block);\n  if (!opt_block) {\n    return;  // Blank event to be populated by fromJson.\n  }\n  if (opt_block.getParent()) {\n    throw Error('Connected blocks cannot be deleted.');\n  }\n  if (opt_block.isShadow()) {\n    // Respawning shadow blocks is handled via disconnection.\n    this.recordUndo = false;\n  }\n\n  if (opt_block.workspace.rendered) {\n    this.oldXml = Blockly.Xml.blockToDomWithXY(opt_block);\n  } else {\n    this.oldXml = Blockly.Xml.blockToDom(opt_block);\n  }\n  this.ids = Blockly.Events.getDescendantIds(opt_block);\n};\nBlockly.utils.object.inherits(Blockly.Events.Delete, Blockly.Events.BlockBase);\n\n/**\n * Class for a block deletion event.\n * @param {Blockly.Block} block The deleted block.  Null for a blank event.\n * @extends {Blockly.Events.BlockBase}\n * @constructor\n */\nBlockly.Events.BlockDelete = Blockly.Events.Delete;\n\n/**\n * Type of this event.\n * @type {string}\n */\nBlockly.Events.Delete.prototype.type = Blockly.Events.DELETE;\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\nBlockly.Events.Delete.prototype.toJson = function() {\n  var json = Blockly.Events.Delete.superClass_.toJson.call(this);\n  json['ids'] = this.ids;\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.Delete.prototype.fromJson = function(json) {\n  Blockly.Events.Delete.superClass_.fromJson.call(this, json);\n  this.ids = json['ids'];\n};\n\n/**\n * Run a deletion event.\n * @param {boolean} forward True if run forward, false if run backward (undo).\n */\nBlockly.Events.Delete.prototype.run = function(forward) {\n  var workspace = this.getEventWorkspace_();\n  if (forward) {\n    for (var i = 0, id; (id = this.ids[i]); i++) {\n      var block = workspace.getBlockById(id);\n      if (block) {\n        block.dispose(false);\n      } else if (id == this.blockId) {\n        // Only complain about root-level block.\n        console.warn(\"Can't delete non-existent block: \" + id);\n      }\n    }\n  } else {\n    var xml = Blockly.utils.xml.createElement('xml');\n    xml.appendChild(this.oldXml);\n    Blockly.Xml.domToWorkspace(xml, workspace);\n  }\n};\n\n/**\n * Class for a block move event.  Created before the move.\n * @param {!Blockly.Block=} opt_block The moved block.  Undefined for a blank\n *     event.\n * @extends {Blockly.Events.BlockBase}\n * @constructor\n */\nBlockly.Events.Move = function(opt_block) {\n  Blockly.Events.Move.superClass_.constructor.call(this, opt_block);\n  if (!opt_block) {\n    return;  // Blank event to be populated by fromJson.\n  }\n  if (opt_block.isShadow()) {\n    // Moving shadow blocks is handled via disconnection.\n    this.recordUndo = false;\n  }\n\n  var location = this.currentLocation_();\n  this.oldParentId = location.parentId;\n  this.oldInputName = location.inputName;\n  this.oldCoordinate = location.coordinate;\n};\nBlockly.utils.object.inherits(Blockly.Events.Move, Blockly.Events.BlockBase);\n\n/**\n * Class for a block move event.  Created before the move.\n * @param {Blockly.Block} block The moved block.  Null for a blank event.\n * @extends {Blockly.Events.BlockBase}\n * @constructor\n */\nBlockly.Events.BlockMove = Blockly.Events.Move;\n\n/**\n * Type of this event.\n * @type {string}\n */\nBlockly.Events.Move.prototype.type = Blockly.Events.MOVE;\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\nBlockly.Events.Move.prototype.toJson = function() {\n  var json = Blockly.Events.Move.superClass_.toJson.call(this);\n  if (this.newParentId) {\n    json['newParentId'] = this.newParentId;\n  }\n  if (this.newInputName) {\n    json['newInputName'] = this.newInputName;\n  }\n  if (this.newCoordinate) {\n    json['newCoordinate'] = Math.round(this.newCoordinate.x) + ',' +\n        Math.round(this.newCoordinate.y);\n  }\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.Move.prototype.fromJson = function(json) {\n  Blockly.Events.Move.superClass_.fromJson.call(this, json);\n  this.newParentId = json['newParentId'];\n  this.newInputName = json['newInputName'];\n  if (json['newCoordinate']) {\n    var xy = json['newCoordinate'].split(',');\n    this.newCoordinate =\n        new Blockly.utils.Coordinate(Number(xy[0]), Number(xy[1]));\n  }\n};\n\n/**\n * Record the block's new location.  Called after the move.\n */\nBlockly.Events.Move.prototype.recordNew = function() {\n  var location = this.currentLocation_();\n  this.newParentId = location.parentId;\n  this.newInputName = location.inputName;\n  this.newCoordinate = location.coordinate;\n};\n\n/**\n * Returns the parentId and input if the block is connected,\n *   or the XY location if disconnected.\n * @return {!Object} Collection of location info.\n * @private\n */\nBlockly.Events.Move.prototype.currentLocation_ = function() {\n  var workspace = this.getEventWorkspace_();\n  var block = workspace.getBlockById(this.blockId);\n  var location = {};\n  var parent = block.getParent();\n  if (parent) {\n    location.parentId = parent.id;\n    var input = parent.getInputWithBlock(block);\n    if (input) {\n      location.inputName = input.name;\n    }\n  } else {\n    location.coordinate = block.getRelativeToSurfaceXY();\n  }\n  return location;\n};\n\n/**\n * Does this event record any change of state?\n * @return {boolean} False if something changed.\n */\nBlockly.Events.Move.prototype.isNull = function() {\n  return this.oldParentId == this.newParentId &&\n      this.oldInputName == this.newInputName &&\n      Blockly.utils.Coordinate.equals(this.oldCoordinate, this.newCoordinate);\n};\n\n/**\n * Run a move event.\n * @param {boolean} forward True if run forward, false if run backward (undo).\n */\nBlockly.Events.Move.prototype.run = function(forward) {\n  var workspace = this.getEventWorkspace_();\n  var block = workspace.getBlockById(this.blockId);\n  if (!block) {\n    console.warn(\"Can't move non-existent block: \" + this.blockId);\n    return;\n  }\n  var parentId = forward ? this.newParentId : this.oldParentId;\n  var inputName = forward ? this.newInputName : this.oldInputName;\n  var coordinate = forward ? this.newCoordinate : this.oldCoordinate;\n  var parentBlock = null;\n  if (parentId) {\n    parentBlock = workspace.getBlockById(parentId);\n    if (!parentBlock) {\n      console.warn(\"Can't connect to non-existent block: \" + parentId);\n      return;\n    }\n  }\n  if (block.getParent()) {\n    block.unplug();\n  }\n  if (coordinate) {\n    var xy = block.getRelativeToSurfaceXY();\n    block.moveBy(coordinate.x - xy.x, coordinate.y - xy.y);\n  } else {\n    var blockConnection = block.outputConnection || block.previousConnection;\n    var parentConnection;\n    if (inputName) {\n      var input = parentBlock.getInput(inputName);\n      if (input) {\n        parentConnection = input.connection;\n      }\n    } else if (blockConnection.type == Blockly.PREVIOUS_STATEMENT) {\n      parentConnection = parentBlock.nextConnection;\n    }\n    if (parentConnection) {\n      blockConnection.connect(parentConnection);\n    } else {\n      console.warn(\"Can't connect to non-existent input: \" + inputName);\n    }\n  }\n};\n\nBlockly.registry.register(Blockly.registry.Type.EVENT, Blockly.Events.CREATE,\n    Blockly.Events.Create);\nBlockly.registry.register(Blockly.registry.Type.EVENT, Blockly.Events.DELETE,\n    Blockly.Events.Delete);\nBlockly.registry.register(Blockly.registry.Type.EVENT, Blockly.Events.CHANGE,\n    Blockly.Events.Change);\nBlockly.registry.register(Blockly.registry.Type.EVENT, Blockly.Events.MOVE,\n    Blockly.Events.Move);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class for a finished loading workspace event.\n * @author BeksOmega\n */\n'use strict';\n\ngoog.provide('Blockly.Events.FinishedLoading');\n\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.Ui');\ngoog.require('Blockly.registry');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * Class for a finished loading event.\n * Used to notify the developer when the workspace has finished loading (i.e\n * domToWorkspace).\n * Finished loading events do not record undo or redo.\n * @param {!Blockly.Workspace=} opt_workspace The workspace that has finished\n *    loading.  Undefined for a blank event.\n * @extends {Blockly.Events.Ui}\n * @constructor\n */\nBlockly.Events.FinishedLoading = function(opt_workspace) {\n\n  /**\n   * Whether or not the event is blank (to be populated by fromJson).\n   * @type {boolean}\n   */\n  this.isBlank = typeof opt_workspace == 'undefined';\n\n  /**\n   * The workspace identifier for this event.\n   * @type {string}\n   */\n  this.workspaceId = opt_workspace ? opt_workspace.id : '';\n\n  /**\n   * The event group ID for the group this event belongs to. Groups define\n   * events that should be treated as an single action from the user's\n   * perspective, and should be undone together.\n   * @type {string}\n   */\n  this.group = Blockly.Events.getGroup();\n\n  // Workspace events do not undo or redo.\n  this.recordUndo = false;\n};\nBlockly.utils.object.inherits(Blockly.Events.FinishedLoading,\n    Blockly.Events.Ui);\n\n/**\n * Type of this event.\n * @type {string}\n */\nBlockly.Events.FinishedLoading.prototype.type = Blockly.Events.FINISHED_LOADING;\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\nBlockly.Events.FinishedLoading.prototype.toJson = function() {\n  var json = {\n    'type': this.type,\n  };\n  if (this.group) {\n    json['group'] = this.group;\n  }\n  if (this.workspaceId) {\n    json['workspaceId'] = this.workspaceId;\n  }\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.FinishedLoading.prototype.fromJson = function(json) {\n  this.isBlank = false;\n  this.workspaceId = json['workspaceId'];\n  this.group = json['group'];\n};\n\nBlockly.registry.register(Blockly.registry.Type.EVENT,\n    Blockly.Events.FINISHED_LOADING, Blockly.Events.FinishedLoading);\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Classes for all types of variable events.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.Events.VarBase');\ngoog.provide('Blockly.Events.VarCreate');\ngoog.provide('Blockly.Events.VarDelete');\ngoog.provide('Blockly.Events.VarRename');\n\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.Abstract');\ngoog.require('Blockly.registry');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * Abstract class for a variable event.\n * @param {!Blockly.VariableModel=} opt_variable The variable this event\n *     corresponds to.  Undefined for a blank event.\n * @extends {Blockly.Events.Abstract}\n * @constructor\n */\nBlockly.Events.VarBase = function(opt_variable) {\n  Blockly.Events.VarBase.superClass_.constructor.call(this);\n  this.isBlank = typeof opt_variable == 'undefined';\n\n  /**\n   * The variable id for the variable this event pertains to.\n   * @type {string}\n   */\n  this.varId = this.isBlank ? '' : opt_variable.getId();\n\n  /**\n   * The workspace identifier for this event.\n   * @type {string}\n   */\n  this.workspaceId = this.isBlank ? '' : opt_variable.workspace.id;\n};\nBlockly.utils.object.inherits(Blockly.Events.VarBase, Blockly.Events.Abstract);\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\nBlockly.Events.VarBase.prototype.toJson = function() {\n  var json = Blockly.Events.VarBase.superClass_.toJson.call(this);\n  json['varId'] = this.varId;\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.VarBase.prototype.fromJson = function(json) {\n  Blockly.Events.VarBase.superClass_.toJson.call(this);\n  this.varId = json['varId'];\n};\n\n/**\n * Class for a variable creation event.\n * @param {!Blockly.VariableModel=} opt_variable The created variable. Undefined\n *     for a blank event.\n * @extends {Blockly.Events.VarBase}\n * @constructor\n */\nBlockly.Events.VarCreate = function(opt_variable) {\n  Blockly.Events.VarCreate.superClass_.constructor.call(this, opt_variable);\n  if (!opt_variable) {\n    return;  // Blank event to be populated by fromJson.\n  }\n\n  this.varType = opt_variable.type;\n  this.varName = opt_variable.name;\n};\nBlockly.utils.object.inherits(Blockly.Events.VarCreate, Blockly.Events.VarBase);\n\n/**\n * Type of this event.\n * @type {string}\n */\nBlockly.Events.VarCreate.prototype.type = Blockly.Events.VAR_CREATE;\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\nBlockly.Events.VarCreate.prototype.toJson = function() {\n  var json = Blockly.Events.VarCreate.superClass_.toJson.call(this);\n  json['varType'] = this.varType;\n  json['varName'] = this.varName;\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.VarCreate.prototype.fromJson = function(json) {\n  Blockly.Events.VarCreate.superClass_.fromJson.call(this, json);\n  this.varType = json['varType'];\n  this.varName = json['varName'];\n};\n\n/**\n * Run a variable creation event.\n * @param {boolean} forward True if run forward, false if run backward (undo).\n */\nBlockly.Events.VarCreate.prototype.run = function(forward) {\n  var workspace = this.getEventWorkspace_();\n  if (forward) {\n    workspace.createVariable(this.varName, this.varType, this.varId);\n  } else {\n    workspace.deleteVariableById(this.varId);\n  }\n};\n\n/**\n * Class for a variable deletion event.\n * @param {!Blockly.VariableModel=} opt_variable The deleted variable. Undefined\n *     for a blank event.\n * @extends {Blockly.Events.VarBase}\n * @constructor\n */\nBlockly.Events.VarDelete = function(opt_variable) {\n  Blockly.Events.VarDelete.superClass_.constructor.call(this, opt_variable);\n  if (!opt_variable) {\n    return;  // Blank event to be populated by fromJson.\n  }\n\n  this.varType = opt_variable.type;\n  this.varName = opt_variable.name;\n};\nBlockly.utils.object.inherits(Blockly.Events.VarDelete, Blockly.Events.VarBase);\n\n/**\n * Type of this event.\n * @type {string}\n */\nBlockly.Events.VarDelete.prototype.type = Blockly.Events.VAR_DELETE;\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\nBlockly.Events.VarDelete.prototype.toJson = function() {\n  var json = Blockly.Events.VarDelete.superClass_.toJson.call(this);\n  json['varType'] = this.varType;\n  json['varName'] = this.varName;\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.VarDelete.prototype.fromJson = function(json) {\n  Blockly.Events.VarDelete.superClass_.fromJson.call(this, json);\n  this.varType = json['varType'];\n  this.varName = json['varName'];\n};\n\n/**\n * Run a variable deletion event.\n * @param {boolean} forward True if run forward, false if run backward (undo).\n */\nBlockly.Events.VarDelete.prototype.run = function(forward) {\n  var workspace = this.getEventWorkspace_();\n  if (forward) {\n    workspace.deleteVariableById(this.varId);\n  } else {\n    workspace.createVariable(this.varName, this.varType, this.varId);\n  }\n};\n\n/**\n * Class for a variable rename event.\n * @param {!Blockly.VariableModel=} opt_variable The renamed variable. Undefined\n *     for a blank event.\n * @param {string=} newName The new name the variable will be changed to.\n * @extends {Blockly.Events.VarBase}\n * @constructor\n */\nBlockly.Events.VarRename = function(opt_variable, newName) {\n  Blockly.Events.VarRename.superClass_.constructor.call(this, opt_variable);\n  if (!opt_variable) {\n    return;  // Blank event to be populated by fromJson.\n  }\n\n  this.oldName = opt_variable.name;\n  this.newName = typeof newName == 'undefined' ? '' : newName;\n};\nBlockly.utils.object.inherits(Blockly.Events.VarRename, Blockly.Events.VarBase);\n\n/**\n * Type of this event.\n * @type {string}\n */\nBlockly.Events.VarRename.prototype.type = Blockly.Events.VAR_RENAME;\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\nBlockly.Events.VarRename.prototype.toJson = function() {\n  var json = Blockly.Events.VarRename.superClass_.toJson.call(this);\n  json['oldName'] = this.oldName;\n  json['newName'] = this.newName;\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.VarRename.prototype.fromJson = function(json) {\n  Blockly.Events.VarRename.superClass_.fromJson.call(this, json);\n  this.oldName = json['oldName'];\n  this.newName = json['newName'];\n};\n\n/**\n * Run a variable rename event.\n * @param {boolean} forward True if run forward, false if run backward (undo).\n */\nBlockly.Events.VarRename.prototype.run = function(forward) {\n  var workspace = this.getEventWorkspace_();\n  if (forward) {\n    workspace.renameVariableById(this.varId, this.newName);\n  } else {\n    workspace.renameVariableById(this.varId, this.oldName);\n  }\n};\n\nBlockly.registry.register(Blockly.registry.Type.EVENT,\n    Blockly.Events.VAR_CREATE, Blockly.Events.VarCreate);\nBlockly.registry.register(Blockly.registry.Type.EVENT,\n    Blockly.Events.VAR_DELETE, Blockly.Events.VarDelete);\nBlockly.registry.register(Blockly.registry.Type.EVENT,\n    Blockly.Events.VAR_RENAME, Blockly.Events.VarRename);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview XML reader and writer.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.Xml\n * @namespace\n */\ngoog.provide('Blockly.Xml');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockCreate');\ngoog.require('Blockly.Events.FinishedLoading');\ngoog.require('Blockly.Events.VarCreate');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.global');\ngoog.require('Blockly.utils.xml');\n\n\n/**\n * Encode a block tree as XML.\n * @param {!Blockly.Workspace} workspace The workspace containing blocks.\n * @param {boolean=} opt_noId True if the encoder should skip the block IDs.\n * @return {!Element} XML DOM element.\n */\nBlockly.Xml.workspaceToDom = function(workspace, opt_noId) {\n  var xml = Blockly.utils.xml.createElement('xml');\n  var variablesElement = Blockly.Xml.variablesToDom(\n      Blockly.Variables.allUsedVarModels(workspace));\n  if (variablesElement.hasChildNodes()) {\n    xml.appendChild(variablesElement);\n  }\n  var comments = workspace.getTopComments(true);\n  for (var i = 0, comment; (comment = comments[i]); i++) {\n    xml.appendChild(comment.toXmlWithXY(opt_noId));\n  }\n  var blocks = workspace.getTopBlocks(true);\n  for (var i = 0, block; (block = blocks[i]); i++) {\n    xml.appendChild(Blockly.Xml.blockToDomWithXY(block, opt_noId));\n  }\n  return xml;\n};\n\n/**\n * Encode a list of variables as XML.\n * @param {!Array.<!Blockly.VariableModel>} variableList List of all variable\n *     models.\n * @return {!Element} Tree of XML elements.\n */\nBlockly.Xml.variablesToDom = function(variableList) {\n  var variables = Blockly.utils.xml.createElement('variables');\n  for (var i = 0, variable; (variable = variableList[i]); i++) {\n    var element = Blockly.utils.xml.createElement('variable');\n    element.appendChild(Blockly.utils.xml.createTextNode(variable.name));\n    if (variable.type) {\n      element.setAttribute('type', variable.type);\n    }\n    element.id = variable.getId();\n    variables.appendChild(element);\n  }\n  return variables;\n};\n\n/**\n * Encode a block subtree as XML with XY coordinates.\n * @param {!Blockly.Block} block The root block to encode.\n * @param {boolean=} opt_noId True if the encoder should skip the block ID.\n * @return {!Element|!DocumentFragment} Tree of XML elements or an empty document\n *     fragment if the block was an insertion marker.\n */\nBlockly.Xml.blockToDomWithXY = function(block, opt_noId) {\n  if (block.isInsertionMarker()) {  // Skip over insertion markers.\n    block = block.getChildren(false)[0];\n    if (!block) {\n      // Disappears when appended.\n      return new DocumentFragment();\n    }\n  }\n\n  var width;  // Not used in LTR.\n  if (block.workspace.RTL) {\n    width = block.workspace.getWidth();\n  }\n\n  var element = Blockly.Xml.blockToDom(block, opt_noId);\n  var xy = block.getRelativeToSurfaceXY();\n  element.setAttribute('x',\n      Math.round(block.workspace.RTL ? width - xy.x : xy.x));\n  element.setAttribute('y', Math.round(xy.y));\n  return element;\n};\n\n/**\n * Encode a field as XML.\n * @param {!Blockly.Field} field The field to encode.\n * @return {Element} XML element, or null if the field did not need to be\n *     serialized.\n * @private\n */\nBlockly.Xml.fieldToDom_ = function(field) {\n  if (field.isSerializable()) {\n    var container = Blockly.utils.xml.createElement('field');\n    container.setAttribute('name', field.name || '');\n    return field.toXml(container);\n  }\n  return null;\n};\n\n/**\n * Encode all of a block's fields as XML and attach them to the given tree of\n * XML elements.\n * @param {!Blockly.Block} block A block with fields to be encoded.\n * @param {!Element} element The XML element to which the field DOM should be\n *     attached.\n * @private\n */\nBlockly.Xml.allFieldsToDom_ = function(block, element) {\n  for (var i = 0, input; (input = block.inputList[i]); i++) {\n    for (var j = 0, field; (field = input.fieldRow[j]); j++) {\n      var fieldDom = Blockly.Xml.fieldToDom_(field);\n      if (fieldDom) {\n        element.appendChild(fieldDom);\n      }\n    }\n  }\n};\n\n/**\n * Encode a block subtree as XML.\n * @param {!Blockly.Block} block The root block to encode.\n * @param {boolean=} opt_noId True if the encoder should skip the block ID.\n * @return {!Element|!DocumentFragment} Tree of XML elements or an empty document\n *     fragment if the block was an insertion marker.\n */\nBlockly.Xml.blockToDom = function(block, opt_noId) {\n  // Skip over insertion markers.\n  if (block.isInsertionMarker()) {\n    var child = block.getChildren(false)[0];\n    if (child) {\n      return Blockly.Xml.blockToDom(child);\n    } else {\n      // Disappears when appended.\n      return new DocumentFragment();\n    }\n  }\n\n\n  var element =\n      Blockly.utils.xml.createElement(block.isShadow() ? 'shadow' : 'block');\n  element.setAttribute('type', block.type);\n  if (!opt_noId) {\n    // It's important to use setAttribute here otherwise IE11 won't serialize\n    // the block's id when domToText is called.\n    element.setAttribute('id', block.id);\n  }\n  if (block.mutationToDom) {\n    // Custom data for an advanced block.\n    var mutation = block.mutationToDom();\n    if (mutation && (mutation.hasChildNodes() || mutation.hasAttributes())) {\n      element.appendChild(mutation);\n    }\n  }\n\n  Blockly.Xml.allFieldsToDom_(block, element);\n\n  var commentText = block.getCommentText();\n  if (commentText) {\n    var size = block.commentModel.size;\n    var pinned = block.commentModel.pinned;\n\n    var commentElement = Blockly.utils.xml.createElement('comment');\n    commentElement.appendChild(Blockly.utils.xml.createTextNode(commentText));\n    commentElement.setAttribute('pinned', pinned);\n    commentElement.setAttribute('h', size.height);\n    commentElement.setAttribute('w', size.width);\n\n    element.appendChild(commentElement);\n  }\n\n  if (block.data) {\n    var dataElement = Blockly.utils.xml.createElement('data');\n    dataElement.appendChild(Blockly.utils.xml.createTextNode(block.data));\n    element.appendChild(dataElement);\n  }\n\n  for (var i = 0, input; (input = block.inputList[i]); i++) {\n    var container;\n    var empty = true;\n    if (input.type == Blockly.DUMMY_INPUT) {\n      continue;\n    } else {\n      var childBlock = input.connection.targetBlock();\n      if (input.type == Blockly.INPUT_VALUE) {\n        container = Blockly.utils.xml.createElement('value');\n      } else if (input.type == Blockly.NEXT_STATEMENT) {\n        container = Blockly.utils.xml.createElement('statement');\n      }\n      var shadow = input.connection.getShadowDom();\n      if (shadow && (!childBlock || !childBlock.isShadow())) {\n        container.appendChild(Blockly.Xml.cloneShadow_(shadow, opt_noId));\n      }\n      if (childBlock) {\n        var elem = Blockly.Xml.blockToDom(childBlock, opt_noId);\n        if (elem.nodeType == Blockly.utils.dom.NodeType.ELEMENT_NODE) {\n          container.appendChild(elem);\n          empty = false;\n        }\n      }\n    }\n    container.setAttribute('name', input.name);\n    if (!empty) {\n      element.appendChild(container);\n    }\n  }\n  if (block.inputsInline != undefined &&\n      block.inputsInline != block.inputsInlineDefault) {\n    element.setAttribute('inline', block.inputsInline);\n  }\n  if (block.isCollapsed()) {\n    element.setAttribute('collapsed', true);\n  }\n  if (!block.isEnabled()) {\n    element.setAttribute('disabled', true);\n  }\n  if (!block.isDeletable() && !block.isShadow()) {\n    element.setAttribute('deletable', false);\n  }\n  if (!block.isMovable() && !block.isShadow()) {\n    element.setAttribute('movable', false);\n  }\n  if (!block.isEditable()) {\n    element.setAttribute('editable', false);\n  }\n\n  var nextBlock = block.getNextBlock();\n  if (nextBlock) {\n    var elem = Blockly.Xml.blockToDom(nextBlock, opt_noId);\n    if (elem.nodeType == Blockly.utils.dom.NodeType.ELEMENT_NODE) {\n      var container = Blockly.utils.xml.createElement('next');\n      container.appendChild(elem);\n      element.appendChild(container);\n    }\n  }\n  var shadow = block.nextConnection && block.nextConnection.getShadowDom();\n  if (shadow && (!nextBlock || !nextBlock.isShadow())) {\n    container.appendChild(Blockly.Xml.cloneShadow_(shadow, opt_noId));\n  }\n\n  return element;\n};\n\n/**\n * Deeply clone the shadow's DOM so that changes don't back-wash to the block.\n * @param {!Element} shadow A tree of XML elements.\n * @param {boolean=} opt_noId True if the encoder should skip the block ID.\n * @return {!Element} A tree of XML elements.\n * @private\n */\nBlockly.Xml.cloneShadow_ = function(shadow, opt_noId) {\n  shadow = shadow.cloneNode(true);\n  // Walk the tree looking for whitespace.  Don't prune whitespace in a tag.\n  var node = shadow;\n  var textNode;\n  while (node) {\n    if (opt_noId && node.nodeName == 'shadow') {\n      // Strip off IDs from shadow blocks.  There should never be a 'block' as\n      // a child of a 'shadow', so no need to check that.\n      node.removeAttribute('id');\n    }\n    if (node.firstChild) {\n      node = node.firstChild;\n    } else {\n      while (node && !node.nextSibling) {\n        textNode = node;\n        node = node.parentNode;\n        if (textNode.nodeType == Blockly.utils.dom.NodeType.TEXT_NODE &&\n            textNode.data.trim() == '' && node.firstChild != textNode) {\n          // Prune whitespace after a tag.\n          Blockly.utils.dom.removeNode(textNode);\n        }\n      }\n      if (node) {\n        textNode = node;\n        node = node.nextSibling;\n        if (textNode.nodeType == Blockly.utils.dom.NodeType.TEXT_NODE &&\n            textNode.data.trim() == '') {\n          // Prune whitespace before a tag.\n          Blockly.utils.dom.removeNode(textNode);\n        }\n      }\n    }\n  }\n  return shadow;\n};\n\n/**\n * Converts a DOM structure into plain text.\n * Currently the text format is fairly ugly: all one line with no whitespace,\n * unless the DOM itself has whitespace built-in.\n * @param {!Node} dom A tree of XML nodes.\n * @return {string} Text representation.\n */\nBlockly.Xml.domToText = function(dom) {\n  var text = Blockly.utils.xml.domToText(dom);\n  // Unpack self-closing tags.  These tags fail when embedded in HTML.\n  // <block name=\"foo\"/> -> <block name=\"foo\"></block>\n  return text.replace(/<(\\w+)([^<]*)\\/>/g, '<$1$2></$1>');\n};\n\n/**\n * Converts a DOM structure into properly indented text.\n * @param {!Node} dom A tree of XML elements.\n * @return {string} Text representation.\n */\nBlockly.Xml.domToPrettyText = function(dom) {\n  // This function is not guaranteed to be correct for all XML.\n  // But it handles the XML that Blockly generates.\n  var blob = Blockly.Xml.domToText(dom);\n  // Place every open and close tag on its own line.\n  var lines = blob.split('<');\n  // Indent every line.\n  var indent = '';\n  for (var i = 1; i < lines.length; i++) {\n    var line = lines[i];\n    if (line[0] == '/') {\n      indent = indent.substring(2);\n    }\n    lines[i] = indent + '<' + line;\n    if (line[0] != '/' && line.slice(-2) != '/>') {\n      indent += '  ';\n    }\n  }\n  // Pull simple tags back together.\n  // E.g. <foo></foo>\n  var text = lines.join('\\n');\n  text = text.replace(/(<(\\w+)\\b[^>]*>[^\\n]*)\\n *<\\/\\2>/g, '$1</$2>');\n  // Trim leading blank line.\n  return text.replace(/^\\n/, '');\n};\n\n/**\n * Converts an XML string into a DOM structure.\n * @param {string} text An XML string.\n * @return {!Element} A DOM object representing the singular child of the\n *     document element.\n * @throws if the text doesn't parse.\n */\nBlockly.Xml.textToDom = function(text) {\n  var doc = Blockly.utils.xml.textToDomDocument(text);\n  if (!doc || !doc.documentElement ||\n      doc.getElementsByTagName('parsererror').length) {\n    throw Error('textToDom was unable to parse: ' + text);\n  }\n  return doc.documentElement;\n};\n\n/**\n * Clear the given workspace then decode an XML DOM and\n * create blocks on the workspace.\n * @param {!Element} xml XML DOM.\n * @param {!Blockly.Workspace} workspace The workspace.\n * @return {Array.<string>} An array containing new block ids.\n */\nBlockly.Xml.clearWorkspaceAndLoadFromXml = function(xml, workspace) {\n  workspace.setResizesEnabled(false);\n  workspace.clear();\n  var blockIds = Blockly.Xml.domToWorkspace(xml, workspace);\n  workspace.setResizesEnabled(true);\n  return blockIds;\n};\n\n/**\n * Decode an XML DOM and create blocks on the workspace.\n * @param {!Element} xml XML DOM.\n * @param {!Blockly.Workspace} workspace The workspace.\n * @return {!Array.<string>} An array containing new block IDs.\n * @suppress {strictModuleDepCheck} Suppress module check while workspace\n *     comments are not bundled in.\n */\nBlockly.Xml.domToWorkspace = function(xml, workspace) {\n  if (xml instanceof Blockly.Workspace) {\n    var swap = xml;\n    // Closure Compiler complains here because the arguments are reversed.\n    /** @suppress {checkTypes} */\n    xml = workspace;\n    workspace = swap;\n    console.warn('Deprecated call to Blockly.Xml.domToWorkspace, ' +\n                 'swap the arguments.');\n  }\n\n  var width;  // Not used in LTR.\n  if (workspace.RTL) {\n    width = workspace.getWidth();\n  }\n  var newBlockIds = [];  // A list of block IDs added by this call.\n  Blockly.utils.dom.startTextWidthCache();\n  var existingGroup = Blockly.Events.getGroup();\n  if (!existingGroup) {\n    Blockly.Events.setGroup(true);\n  }\n\n  // Disable workspace resizes as an optimization.\n  if (workspace.setResizesEnabled) {\n    workspace.setResizesEnabled(false);\n  }\n  var variablesFirst = true;\n  try {\n    for (var i = 0, xmlChild; (xmlChild = xml.childNodes[i]); i++) {\n      var name = xmlChild.nodeName.toLowerCase();\n      var xmlChildElement = /** @type {!Element} */ (xmlChild);\n      if (name == 'block' ||\n          (name == 'shadow' && !Blockly.Events.recordUndo)) {\n        // Allow top-level shadow blocks if recordUndo is disabled since\n        // that means an undo is in progress.  Such a block is expected\n        // to be moved to a nested destination in the next operation.\n        var block = Blockly.Xml.domToBlock(xmlChildElement, workspace);\n        newBlockIds.push(block.id);\n        var blockX = xmlChildElement.hasAttribute('x') ?\n            parseInt(xmlChildElement.getAttribute('x'), 10) : 10;\n        var blockY = xmlChildElement.hasAttribute('y') ?\n            parseInt(xmlChildElement.getAttribute('y'), 10) : 10;\n        if (!isNaN(blockX) && !isNaN(blockY)) {\n          block.moveBy(workspace.RTL ? width - blockX : blockX, blockY);\n        }\n        variablesFirst = false;\n      } else if (name == 'shadow') {\n        throw TypeError('Shadow block cannot be a top-level block.');\n      } else if (name == 'comment') {\n        if (workspace.rendered) {\n          if (!Blockly.WorkspaceCommentSvg) {\n            console.warn('Missing require for Blockly.WorkspaceCommentSvg, ' +\n                'ignoring workspace comment.');\n          } else {\n            Blockly.WorkspaceCommentSvg.fromXml(\n                xmlChildElement, workspace, width);\n          }\n        } else {\n          if (!Blockly.WorkspaceComment) {\n            console.warn('Missing require for Blockly.WorkspaceComment, ' +\n                'ignoring workspace comment.');\n          } else {\n            Blockly.WorkspaceComment.fromXml(xmlChildElement, workspace);\n          }\n        }\n      } else if (name == 'variables') {\n        if (variablesFirst) {\n          Blockly.Xml.domToVariables(xmlChildElement, workspace);\n        } else {\n          throw Error('\\'variables\\' tag must exist once before block and ' +\n              'shadow tag elements in the workspace XML, but it was found in ' +\n              'another location.');\n        }\n        variablesFirst = false;\n      }\n    }\n  } finally {\n    if (!existingGroup) {\n      Blockly.Events.setGroup(false);\n    }\n    Blockly.utils.dom.stopTextWidthCache();\n  }\n  // Re-enable workspace resizing.\n  if (workspace.setResizesEnabled) {\n    workspace.setResizesEnabled(true);\n  }\n  Blockly.Events.fire(new Blockly.Events.FinishedLoading(workspace));\n  return newBlockIds;\n};\n\n/**\n * Decode an XML DOM and create blocks on the workspace. Position the new\n * blocks immediately below prior blocks, aligned by their starting edge.\n * @param {!Element} xml The XML DOM.\n * @param {!Blockly.Workspace} workspace The workspace to add to.\n * @return {Array.<string>} An array containing new block IDs.\n */\nBlockly.Xml.appendDomToWorkspace = function(xml, workspace) {\n  var bbox;  // Bounding box of the current blocks.\n  // First check if we have a workspaceSvg, otherwise the blocks have no shape\n  // and the position does not matter.\n  if (Object.prototype.hasOwnProperty.call(workspace, 'scale')) {\n    bbox = workspace.getBlocksBoundingBox();\n  }\n  // Load the new blocks into the workspace and get the IDs of the new blocks.\n  var newBlockIds = Blockly.Xml.domToWorkspace(xml, workspace);\n  if (bbox && bbox.top != bbox.bottom) {  // check if any previous block\n    var offsetY = 0;  // offset to add to y of the new block\n    var offsetX = 0;\n    var farY = bbox.bottom;  // bottom position\n    var topX = workspace.RTL ? bbox.right : bbox.left;  // x of bounding box\n    // Check position of the new blocks.\n    var newLeftX = Infinity;  // x of top left corner\n    var newRightX = -Infinity;  // x of top right corner\n    var newY = Infinity;  // y of top corner\n    var ySeparation = 10;\n    for (var i = 0; i < newBlockIds.length; i++) {\n      var blockXY =\n          workspace.getBlockById(newBlockIds[i]).getRelativeToSurfaceXY();\n      if (blockXY.y < newY) {\n        newY = blockXY.y;\n      }\n      if (blockXY.x < newLeftX) {  // if we left align also on x\n        newLeftX = blockXY.x;\n      }\n      if (blockXY.x > newRightX) {  // if we right align also on x\n        newRightX = blockXY.x;\n      }\n    }\n    offsetY = farY - newY + ySeparation;\n    offsetX = workspace.RTL ? topX - newRightX : topX - newLeftX;\n    for (var i = 0; i < newBlockIds.length; i++) {\n      var block = workspace.getBlockById(newBlockIds[i]);\n      block.moveBy(offsetX, offsetY);\n    }\n  }\n  return newBlockIds;\n};\n\n/**\n * Decode an XML block tag and create a block (and possibly sub blocks) on the\n * workspace.\n * @param {!Element} xmlBlock XML block element.\n * @param {!Blockly.Workspace} workspace The workspace.\n * @return {!Blockly.Block} The root block created.\n */\nBlockly.Xml.domToBlock = function(xmlBlock, workspace) {\n  if (xmlBlock instanceof Blockly.Workspace) {\n    var swap = xmlBlock;\n    // Closure Compiler complains here because the arguments are reversed.\n    /** @suppress {checkTypes} */\n    xmlBlock = /** @type {!Element} */ (workspace);\n    workspace = swap;\n    console.warn('Deprecated call to Blockly.Xml.domToBlock, ' +\n                 'swap the arguments.');\n  }\n  // Create top-level block.\n  Blockly.Events.disable();\n  var variablesBeforeCreation = workspace.getAllVariables();\n  try {\n    var topBlock = Blockly.Xml.domToBlockHeadless_(xmlBlock, workspace);\n    // Generate list of all blocks.\n    var blocks = topBlock.getDescendants(false);\n    if (workspace.rendered) {\n      // Wait to track connections to speed up assembly.\n      topBlock.setConnectionTracking(false);\n      // Render each block.\n      for (var i = blocks.length - 1; i >= 0; i--) {\n        blocks[i].initSvg();\n      }\n      for (var i = blocks.length - 1; i >= 0; i--) {\n        blocks[i].render(false);\n      }\n      // Populating the connection database may be deferred until after the\n      // blocks have rendered.\n      setTimeout(function() {\n        if (!topBlock.disposed) {\n          topBlock.setConnectionTracking(true);\n        }\n      }, 1);\n      topBlock.updateDisabled();\n      // Allow the scrollbars to resize and move based on the new contents.\n      // TODO(@picklesrus): #387. Remove when domToBlock avoids resizing.\n      workspace.resizeContents();\n    } else {\n      for (var i = blocks.length - 1; i >= 0; i--) {\n        blocks[i].initModel();\n      }\n    }\n  } finally {\n    Blockly.Events.enable();\n  }\n  if (Blockly.Events.isEnabled()) {\n    var newVariables = Blockly.Variables.getAddedVariables(workspace,\n        variablesBeforeCreation);\n    // Fire a VarCreate event for each (if any) new variable created.\n    for (var i = 0; i < newVariables.length; i++) {\n      var thisVariable = newVariables[i];\n      Blockly.Events.fire(new Blockly.Events.VarCreate(thisVariable));\n    }\n    // Block events come after var events, in case they refer to newly created\n    // variables.\n    Blockly.Events.fire(new Blockly.Events.BlockCreate(topBlock));\n  }\n  return topBlock;\n};\n\n\n/**\n * Decode an XML list of variables and add the variables to the workspace.\n * @param {!Element} xmlVariables List of XML variable elements.\n * @param {!Blockly.Workspace} workspace The workspace to which the variable\n *     should be added.\n */\nBlockly.Xml.domToVariables = function(xmlVariables, workspace) {\n  for (var i = 0, xmlChild; (xmlChild = xmlVariables.childNodes[i]); i++) {\n    if (xmlChild.nodeType != Blockly.utils.dom.NodeType.ELEMENT_NODE) {\n      continue;  // Skip text nodes.\n    }\n    var type = xmlChild.getAttribute('type');\n    var id = xmlChild.getAttribute('id');\n    var name = xmlChild.textContent;\n\n    workspace.createVariable(name, type, id);\n  }\n};\n\n/**\n * Decode an XML block tag and create a block (and possibly sub blocks) on the\n * workspace.\n * @param {!Element} xmlBlock XML block element.\n * @param {!Blockly.Workspace} workspace The workspace.\n * @return {!Blockly.Block} The root block created.\n * @private\n */\nBlockly.Xml.domToBlockHeadless_ = function(xmlBlock, workspace) {\n  var block = null;\n  var prototypeName = xmlBlock.getAttribute('type');\n  if (!prototypeName) {\n    throw TypeError('Block type unspecified: ' + xmlBlock.outerHTML);\n  }\n  var id = xmlBlock.getAttribute('id');\n  block = workspace.newBlock(prototypeName, id);\n\n  var blockChild = null;\n  for (var i = 0, xmlChild; (xmlChild = xmlBlock.childNodes[i]); i++) {\n    if (xmlChild.nodeType == Blockly.utils.dom.NodeType.TEXT_NODE) {\n      // Ignore any text at the <block> level.  It's all whitespace anyway.\n      continue;\n    }\n    var input;\n\n    // Find any enclosed blocks or shadows in this tag.\n    var childBlockElement = null;\n    var childShadowElement = null;\n    for (var j = 0, grandchild; (grandchild = xmlChild.childNodes[j]); j++) {\n      if (grandchild.nodeType == Blockly.utils.dom.NodeType.ELEMENT_NODE) {\n        if (grandchild.nodeName.toLowerCase() == 'block') {\n          childBlockElement = /** @type {!Element} */ (grandchild);\n        } else if (grandchild.nodeName.toLowerCase() == 'shadow') {\n          childShadowElement = /** @type {!Element} */ (grandchild);\n        }\n      }\n    }\n\n    var callInitSvg = false;\n    var name = xmlChild.getAttribute('name');\n    var xmlChildElement = /** @type {!Element} */ (xmlChild);\n    switch (xmlChild.nodeName.toLowerCase()) {\n      case 'mutation':\n        // Custom data for an advanced block.\n        if (block.domToMutation) {\n          block.domToMutation(xmlChildElement);\n          if (block.initSvg) {\n            // Mutation may have added some elements that need initializing.\n            callInitSvg = true;\n          }\n        }\n        break;\n      case 'comment':\n        if (!Blockly.Comment) {\n          console.warn('Missing require for Blockly.Comment, ' +\n              'ignoring block comment.');\n          break;\n        }\n        var text = xmlChildElement.textContent;\n        var pinned = xmlChildElement.getAttribute('pinned') == 'true';\n        var width = parseInt(xmlChildElement.getAttribute('w'), 10);\n        var height = parseInt(xmlChildElement.getAttribute('h'), 10);\n\n        block.setCommentText(text);\n        block.commentModel.pinned = pinned;\n        if (!isNaN(width) && !isNaN(height)) {\n          block.commentModel.size = new Blockly.utils.Size(width, height);\n        }\n\n        if (pinned && block.getCommentIcon && !block.isInFlyout) {\n          setTimeout(function() {\n            block.getCommentIcon().setVisible(true);\n          }, 1);\n        }\n        break;\n      case 'data':\n        block.data = xmlChild.textContent;\n        break;\n      case 'title':\n        // Titles were renamed to field in December 2013.\n        // Fall through.\n      case 'field':\n        Blockly.Xml.domToField_(block, name, xmlChildElement);\n        break;\n      case 'value':\n      case 'statement':\n        input = block.getInput(name);\n        if (!input) {\n          console.warn('Ignoring non-existent input ' + name + ' in block ' +\n                       prototypeName);\n          break;\n        }\n        if (childBlockElement) {\n          blockChild = Blockly.Xml.domToBlockHeadless_(childBlockElement,\n              workspace);\n          if (blockChild.outputConnection) {\n            input.connection.connect(blockChild.outputConnection);\n          } else if (blockChild.previousConnection) {\n            input.connection.connect(blockChild.previousConnection);\n          } else {\n            throw TypeError(\n                'Child block does not have output or previous statement.');\n          }\n        }\n        // Set shadow after so we don't create a shadow we delete immediately.\n        if (childShadowElement) {\n          input.connection.setShadowDom(childShadowElement);\n        }\n        break;\n      case 'next':\n        if (childBlockElement) {\n          if (!block.nextConnection) {\n            throw TypeError('Next statement does not exist.');\n          }\n          // If there is more than one XML 'next' tag.\n          if (block.nextConnection.isConnected()) {\n            throw TypeError('Next statement is already connected.');\n          }\n          blockChild = Blockly.Xml.domToBlockHeadless_(childBlockElement,\n              workspace);\n          if (!blockChild.previousConnection) {\n            throw TypeError('Next block does not have previous statement.');\n          }\n          block.nextConnection.connect(blockChild.previousConnection);\n        }\n        // Set shadow after so we don't create a shadow we delete immediately.\n        if (childShadowElement && block.nextConnection) {\n          block.nextConnection.setShadowDom(childShadowElement);\n        }\n        break;\n      default:\n        // Unknown tag; ignore.  Same principle as HTML parsers.\n        console.warn('Ignoring unknown tag: ' + xmlChild.nodeName);\n    }\n  }\n\n  if (callInitSvg) {\n    // InitSvg needs to be called after variable fields are loaded.\n    block.initSvg();\n  }\n\n  var inline = xmlBlock.getAttribute('inline');\n  if (inline) {\n    block.setInputsInline(inline == 'true');\n  }\n  var disabled = xmlBlock.getAttribute('disabled');\n  if (disabled) {\n    block.setEnabled(disabled != 'true' && disabled != 'disabled');\n  }\n  var deletable = xmlBlock.getAttribute('deletable');\n  if (deletable) {\n    block.setDeletable(deletable == 'true');\n  }\n  var movable = xmlBlock.getAttribute('movable');\n  if (movable) {\n    block.setMovable(movable == 'true');\n  }\n  var editable = xmlBlock.getAttribute('editable');\n  if (editable) {\n    block.setEditable(editable == 'true');\n  }\n  var collapsed = xmlBlock.getAttribute('collapsed');\n  if (collapsed) {\n    block.setCollapsed(collapsed == 'true');\n  }\n  if (xmlBlock.nodeName.toLowerCase() == 'shadow') {\n    // Ensure all children are also shadows.\n    var children = block.getChildren(false);\n    for (var i = 0, child; (child = children[i]); i++) {\n      if (!child.isShadow()) {\n        throw TypeError('Shadow block not allowed non-shadow child.');\n      }\n    }\n    // Ensure this block doesn't have any variable inputs.\n    if (block.getVarModels().length) {\n      throw TypeError('Shadow blocks cannot have variable references.');\n    }\n    block.setShadow(true);\n  }\n  return block;\n};\n\n/**\n * Decode an XML field tag and set the value of that field on the given block.\n * @param {!Blockly.Block} block The block that is currently being deserialized.\n * @param {string} fieldName The name of the field on the block.\n * @param {!Element} xml The field tag to decode.\n * @private\n */\nBlockly.Xml.domToField_ = function(block, fieldName, xml) {\n  var field = block.getField(fieldName);\n  if (!field) {\n    console.warn('Ignoring non-existent field ' + fieldName + ' in block ' +\n        block.type);\n    return;\n  }\n  field.fromXml(xml);\n};\n\n/**\n * Remove any 'next' block (statements in a stack).\n * @param {!Element|!DocumentFragment} xmlBlock XML block element or an empty\n *     DocumentFragment if the block was an insertion marker.\n */\nBlockly.Xml.deleteNext = function(xmlBlock) {\n  for (var i = 0, child; (child = xmlBlock.childNodes[i]); i++) {\n    if (child.nodeName.toLowerCase() == 'next') {\n      xmlBlock.removeChild(child);\n      break;\n    }\n  }\n};\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object that controls settings for the workspace.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.Options');\n\ngoog.require('Blockly.Theme');\ngoog.require('Blockly.Themes.Classic');\ngoog.require('Blockly.registry');\ngoog.require('Blockly.user.keyMap');\ngoog.require('Blockly.utils.IdGenerator');\ngoog.require('Blockly.utils.Metrics');\ngoog.require('Blockly.utils.toolbox');\ngoog.require('Blockly.utils.userAgent');\ngoog.require('Blockly.Xml');\n\ngoog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Parse the user-specified options, using reasonable defaults where behaviour\n * is unspecified.\n * @param {!Blockly.BlocklyOptions} options Dictionary of options.\n *     Specification: https://developers.google.com/blockly/guides/get-started/web#configuration\n * @constructor\n */\nBlockly.Options = function(options) {\n  var readOnly = !!options['readOnly'];\n  if (readOnly) {\n    var toolboxJsonDef = null;\n    var hasCategories = false;\n    var hasTrashcan = false;\n    var hasCollapse = false;\n    var hasComments = false;\n    var hasDisable = false;\n    var hasSounds = false;\n  } else {\n    var toolboxJsonDef = Blockly.utils.toolbox.convertToolboxDefToJson(options['toolbox']);\n    var hasCategories = Blockly.utils.toolbox.hasCategories(toolboxJsonDef);\n    var hasTrashcan = options['trashcan'];\n    if (hasTrashcan === undefined) {\n      hasTrashcan = hasCategories;\n    }\n    var maxTrashcanContents = options['maxTrashcanContents'];\n    if (hasTrashcan) {\n      if (maxTrashcanContents === undefined) {\n        maxTrashcanContents = 32;\n      }\n    } else {\n      maxTrashcanContents = 0;\n    }\n    var hasCollapse = options['collapse'];\n    if (hasCollapse === undefined) {\n      hasCollapse = hasCategories;\n    }\n    var hasComments = options['comments'];\n    if (hasComments === undefined) {\n      hasComments = hasCategories;\n    }\n    var hasDisable = options['disable'];\n    if (hasDisable === undefined) {\n      hasDisable = hasCategories;\n    }\n    var hasSounds = options['sounds'];\n    if (hasSounds === undefined) {\n      hasSounds = true;\n    }\n  }\n  var rtl = !!options['rtl'];\n  var horizontalLayout = options['horizontalLayout'];\n  if (horizontalLayout === undefined) {\n    horizontalLayout = false;\n  }\n  var toolboxAtStart = options['toolboxPosition'];\n  toolboxAtStart = toolboxAtStart !== 'end';\n\n  /** @type {!Blockly.utils.toolbox.Position} */\n  var toolboxPosition;\n  if (horizontalLayout) {\n    toolboxPosition = toolboxAtStart ?\n        Blockly.utils.toolbox.Position.TOP : Blockly.utils.toolbox.Position.BOTTOM;\n  } else {\n    toolboxPosition = (toolboxAtStart == rtl) ?\n        Blockly.utils.toolbox.Position.RIGHT : Blockly.utils.toolbox.Position.LEFT;\n  }\n\n  var hasCss = options['css'];\n  if (hasCss === undefined) {\n    hasCss = true;\n  }\n  var pathToMedia = 'https://blockly-demo.appspot.com/static/media/';\n  if (options['media']) {\n    pathToMedia = options['media'];\n  } else if (options['path']) {\n    // 'path' is a deprecated option which has been replaced by 'media'.\n    pathToMedia = options['path'] + 'media/';\n  }\n  if (options['oneBasedIndex'] === undefined) {\n    var oneBasedIndex = true;\n  } else {\n    var oneBasedIndex = !!options['oneBasedIndex'];\n  }\n  var keyMap = options['keyMap'] || Blockly.user.keyMap.createDefaultKeyMap();\n\n  var renderer = options['renderer'] || 'geras';\n\n  var plugins = options['plugins'] || {};\n\n  /** @type {boolean} */\n  this.RTL = rtl;\n  /** @type {boolean} */\n  this.oneBasedIndex = oneBasedIndex;\n  /** @type {boolean} */\n  this.collapse = hasCollapse;\n  /** @type {boolean} */\n  this.comments = hasComments;\n  /** @type {boolean} */\n  this.disable = hasDisable;\n  /** @type {boolean} */\n  this.readOnly = readOnly;\n  /** @type {number} */\n  this.maxBlocks = options['maxBlocks'] || Infinity;\n  /** @type {?Object.<string, number>} */\n  this.maxInstances = options['maxInstances'];\n  /** @type {string} */\n  this.pathToMedia = pathToMedia;\n  /** @type {boolean} */\n  this.hasCategories = hasCategories;\n  /** @type {!Blockly.Options.MoveOptions} */\n  this.moveOptions = Blockly.Options.parseMoveOptions_(options, hasCategories);\n  /** @deprecated  January 2019 */\n  this.hasScrollbars = this.moveOptions.scrollbars;\n  /** @type {boolean} */\n  this.hasTrashcan = hasTrashcan;\n  /** @type {number} */\n  this.maxTrashcanContents = maxTrashcanContents;\n  /** @type {boolean} */\n  this.hasSounds = hasSounds;\n  /** @type {boolean} */\n  this.hasCss = hasCss;\n  /** @type {boolean} */\n  this.horizontalLayout = horizontalLayout;\n  /** @type {?Blockly.utils.toolbox.ToolboxInfo} */\n  this.languageTree = toolboxJsonDef;\n  /** @type {!Blockly.Options.GridOptions} */\n  this.gridOptions = Blockly.Options.parseGridOptions_(options);\n  /** @type {!Blockly.Options.ZoomOptions} */\n  this.zoomOptions = Blockly.Options.parseZoomOptions_(options);\n  /** @type {!Blockly.utils.toolbox.Position} */\n  this.toolboxPosition = toolboxPosition;\n  /** @type {!Blockly.Theme} */\n  this.theme = Blockly.Options.parseThemeOptions_(options);\n  /** @type {!Object<string,Blockly.Action>} */\n  this.keyMap = keyMap;\n  /** @type {string} */\n  this.renderer = renderer;\n  /** @type {?Object} */\n  this.rendererOverrides = options['rendererOverrides'];\n\n  /**\n   * The SVG element for the grid pattern.\n   * Created during injection.\n   * @type {?SVGElement}\n   */\n  this.gridPattern = null;\n\n  /**\n   * The parent of the current workspace, or null if there is no parent\n   * workspace.  We can assert that this is of type WorkspaceSvg as opposed to\n   * Workspace as this is only used in a rendered workspace.\n   * @type {Blockly.WorkspaceSvg}\n   */\n  this.parentWorkspace = options['parentWorkspace'];\n\n  /**\n   * Map of plugin type to name of registered plugin or plugin class.\n   * @type {!Object.<string, (function(new:?, ...?)|string)>}\n   */\n  this.plugins = plugins;\n};\n\n/**\n * Blockly options.\n * This interface is further described in\n * `typings/parts/blockly-interfaces.d.ts`.\n * @interface\n */\nBlockly.BlocklyOptions = function() {};\n\n/**\n * Grid Options.\n * @typedef {{\n *     colour: string,\n *     length: number,\n *     snap: boolean,\n *     spacing: number\n * }}\n */\nBlockly.Options.GridOptions;\n\n/**\n * Move Options.\n * @typedef {{\n *     drag: boolean,\n *     scrollbars: boolean,\n *     wheel: boolean\n * }}\n */\nBlockly.Options.MoveOptions;\n\n/**\n * Zoom Options.\n * @typedef {{\n *     controls: boolean,\n *     maxScale: number,\n *     minScale: number,\n *     pinch: boolean,\n *     scaleSpeed: number,\n *     startScale: number,\n *     wheel: boolean\n * }}\n */\nBlockly.Options.ZoomOptions;\n\n/**\n * If set, sets the translation of the workspace to match the scrollbars.\n * @param {!{x:number,y:number}} xyRatio Contains an x and/or y property which\n *     is a float between 0 and 1 specifying the degree of scrolling.\n * @return {void}\n */\nBlockly.Options.prototype.setMetrics;\n\n/**\n * Return an object with the metrics required to size the workspace.\n * @return {!Blockly.utils.Metrics} Contains size and position metrics.\n */\nBlockly.Options.prototype.getMetrics;\n\n/**\n * Parse the user-specified move options, using reasonable defaults where\n *    behaviour is unspecified.\n * @param {!Object} options Dictionary of options.\n * @param {boolean} hasCategories Whether the workspace has categories or not.\n * @return {!Blockly.Options.MoveOptions} Normalized move options.\n * @private\n */\nBlockly.Options.parseMoveOptions_ = function(options, hasCategories) {\n  var move = options['move'] || {};\n  var moveOptions = {};\n  if (move['scrollbars'] === undefined && options['scrollbars'] === undefined) {\n    moveOptions.scrollbars = hasCategories;\n  } else {\n    moveOptions.scrollbars = !!move['scrollbars'] || !!options['scrollbars'];\n  }\n  if (!moveOptions.scrollbars || move['wheel'] === undefined) {\n    // Defaults to false so that developers' settings don't appear to change.\n    moveOptions.wheel = false;\n  } else {\n    moveOptions.wheel = !!move['wheel'];\n  }\n  if (!moveOptions.scrollbars) {\n    moveOptions.drag = false;\n  } else if (move['drag'] === undefined) {\n    // Defaults to true if scrollbars is true.\n    moveOptions.drag = true;\n  } else {\n    moveOptions.drag = !!move['drag'];\n  }\n  return moveOptions;\n};\n\n/**\n * Parse the user-specified zoom options, using reasonable defaults where\n * behaviour is unspecified.  See zoom documentation:\n *   https://developers.google.com/blockly/guides/configure/web/zoom\n * @param {!Object} options Dictionary of options.\n * @return {!Blockly.Options.ZoomOptions} Normalized zoom options.\n * @private\n */\nBlockly.Options.parseZoomOptions_ = function(options) {\n  var zoom = options['zoom'] || {};\n  var zoomOptions = {};\n  if (zoom['controls'] === undefined) {\n    zoomOptions.controls = false;\n  } else {\n    zoomOptions.controls = !!zoom['controls'];\n  }\n  if (zoom['wheel'] === undefined) {\n    zoomOptions.wheel = false;\n  } else {\n    zoomOptions.wheel = !!zoom['wheel'];\n  }\n  if (zoom['startScale'] === undefined) {\n    zoomOptions.startScale = 1;\n  } else {\n    zoomOptions.startScale = Number(zoom['startScale']);\n  }\n  if (zoom['maxScale'] === undefined) {\n    zoomOptions.maxScale = 3;\n  } else {\n    zoomOptions.maxScale = Number(zoom['maxScale']);\n  }\n  if (zoom['minScale'] === undefined) {\n    zoomOptions.minScale = 0.3;\n  } else {\n    zoomOptions.minScale = Number(zoom['minScale']);\n  }\n  if (zoom['scaleSpeed'] === undefined) {\n    zoomOptions.scaleSpeed = 1.2;\n  } else {\n    zoomOptions.scaleSpeed = Number(zoom['scaleSpeed']);\n  }\n  if (zoom['pinch'] === undefined) {\n    zoomOptions.pinch = zoomOptions.wheel || zoomOptions.controls;\n  } else {\n    zoomOptions.pinch = !!zoom['pinch'];\n  }\n  return zoomOptions;\n};\n\n/**\n * Parse the user-specified grid options, using reasonable defaults where\n * behaviour is unspecified. See grid documentation:\n *   https://developers.google.com/blockly/guides/configure/web/grid\n * @param {!Object} options Dictionary of options.\n * @return {!Blockly.Options.GridOptions} Normalized grid options.\n * @private\n */\nBlockly.Options.parseGridOptions_ = function(options) {\n  var grid = options['grid'] || {};\n  var gridOptions = {};\n  gridOptions.spacing = Number(grid['spacing']) || 0;\n  gridOptions.colour = grid['colour'] || '#888';\n  gridOptions.length =\n      (grid['length'] === undefined) ? 1 : Number(grid['length']);\n  gridOptions.snap = gridOptions.spacing > 0 && !!grid['snap'];\n  return gridOptions;\n};\n\n/**\n * Parse the user-specified theme options, using the classic theme as a default.\n *   https://developers.google.com/blockly/guides/configure/web/themes\n * @param {!Object} options Dictionary of options.\n * @return {!Blockly.Theme} A Blockly Theme.\n * @private\n */\nBlockly.Options.parseThemeOptions_ = function(options) {\n  var theme = options['theme'] || Blockly.Themes.Classic;\n  if (typeof theme == 'string') {\n    return /** @type {!Blockly.Theme} */ (\n      Blockly.registry.getObject(Blockly.registry.Type.THEME, theme));\n  } else if (theme instanceof Blockly.Theme) {\n    return /** @type {!Blockly.Theme} */ (theme);\n  }\n  return Blockly.Theme.defineTheme(theme.name ||\n      ('builtin' + Blockly.utils.IdGenerator.getNextUniqueId()), theme);\n};\n\n/**\n * Parse the provided toolbox tree into a consistent DOM format.\n * @param {?Node|?string} toolboxDef DOM tree of blocks, or text representation\n *    of same.\n * @return {?Node} DOM tree of blocks, or null.\n * @deprecated Use Blockly.utils.toolbox.parseToolboxTree. (2020 September 28)\n */\nBlockly.Options.parseToolboxTree = function(toolboxDef) {\n  Blockly.utils.deprecation.warn(\n      'Blockly.Options.parseToolboxTree',\n      'September 2020',\n      'September 2021',\n      'Blockly.utils.toolbox.parseToolboxTree');\n  return Blockly.utils.toolbox.parseToolboxTree(toolboxDef);\n};\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Touch handling for Blockly.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\n/**\n * @name Blockly.Touch\n * @namespace\n */\ngoog.provide('Blockly.Touch');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.global');\ngoog.require('Blockly.utils.string');\n\n\n/**\n  * Whether touch is enabled in the browser.\n  * Copied from Closure's goog.events.BrowserFeature.TOUCH_ENABLED\n  */\nBlockly.Touch.TOUCH_ENABLED =\n    ('ontouchstart' in Blockly.utils.global ||\n     !!(Blockly.utils.global['document'] && document.documentElement &&\n        'ontouchstart' in document.documentElement) ||\n     // IE10 uses non-standard touch events, so it has a different check.\n     !!(Blockly.utils.global['navigator'] &&\n        (Blockly.utils.global['navigator']['maxTouchPoints'] ||\n         Blockly.utils.global['navigator']['msMaxTouchPoints'])));\n\n/**\n * Which touch events are we currently paying attention to?\n * @type {?string}\n * @private\n */\nBlockly.Touch.touchIdentifier_ = null;\n\n/**\n * The TOUCH_MAP lookup dictionary specifies additional touch events to fire,\n * in conjunction with mouse events.\n * @type {Object}\n */\nBlockly.Touch.TOUCH_MAP = {};\nif (Blockly.utils.global['PointerEvent']) {\n  Blockly.Touch.TOUCH_MAP = {\n    'mousedown': ['pointerdown'],\n    'mouseenter': ['pointerenter'],\n    'mouseleave': ['pointerleave'],\n    'mousemove': ['pointermove'],\n    'mouseout': ['pointerout'],\n    'mouseover': ['pointerover'],\n    'mouseup': ['pointerup', 'pointercancel'],\n    'touchend': ['pointerup'],\n    'touchcancel': ['pointercancel']\n  };\n} else if (Blockly.Touch.TOUCH_ENABLED) {\n  Blockly.Touch.TOUCH_MAP = {\n    'mousedown': ['touchstart'],\n    'mousemove': ['touchmove'],\n    'mouseup': ['touchend', 'touchcancel']\n  };\n}\n\n/**\n * PID of queued long-press task.\n * @private\n */\nBlockly.longPid_ = 0;\n\n/**\n * Context menus on touch devices are activated using a long-press.\n * Unfortunately the contextmenu touch event is currently (2015) only supported\n * by Chrome.  This function is fired on any touchstart event, queues a task,\n * which after about a second opens the context menu.  The tasks is killed\n * if the touch event terminates early.\n * @param {!Event} e Touch start event.\n * @param {Blockly.Gesture} gesture The gesture that triggered this longStart.\n * @package\n */\nBlockly.longStart = function(e, gesture) {\n  Blockly.longStop_();\n  // Punt on multitouch events.\n  if (e.changedTouches && e.changedTouches.length != 1) {\n    return;\n  }\n  Blockly.longPid_ = setTimeout(function() {\n    // Additional check to distinguish between touch events and pointer events\n    if (e.changedTouches) {\n      // TouchEvent\n      e.button = 2;  // Simulate a right button click.\n      // e was a touch event.  It needs to pretend to be a mouse event.\n      e.clientX = e.changedTouches[0].clientX;\n      e.clientY = e.changedTouches[0].clientY;\n    }\n\n    // Let the gesture route the right-click correctly.\n    if (gesture) {\n      gesture.handleRightClick(e);\n    }\n\n  }, Blockly.LONGPRESS);\n};\n\n/**\n * Nope, that's not a long-press.  Either touchend or touchcancel was fired,\n * or a drag hath begun.  Kill the queued long-press task.\n * @package\n */\nBlockly.longStop_ = function() {\n  if (Blockly.longPid_) {\n    clearTimeout(Blockly.longPid_);\n    Blockly.longPid_ = 0;\n  }\n};\n\n/**\n * Clear the touch identifier that tracks which touch stream to pay attention\n * to.  This ends the current drag/gesture and allows other pointers to be\n * captured.\n */\nBlockly.Touch.clearTouchIdentifier = function() {\n  Blockly.Touch.touchIdentifier_ = null;\n};\n\n/**\n * Decide whether Blockly should handle or ignore this event.\n * Mouse and touch events require special checks because we only want to deal\n * with one touch stream at a time.  All other events should always be handled.\n * @param {!Event} e The event to check.\n * @return {boolean} True if this event should be passed through to the\n *     registered handler; false if it should be blocked.\n */\nBlockly.Touch.shouldHandleEvent = function(e) {\n  return !Blockly.Touch.isMouseOrTouchEvent(e) ||\n      Blockly.Touch.checkTouchIdentifier(e);\n};\n\n/**\n * Get the touch identifier from the given event.  If it was a mouse event, the\n * identifier is the string 'mouse'.\n * @param {!Event} e Mouse event or touch event.\n * @return {string} The touch identifier from the first changed touch, if\n *     defined.  Otherwise 'mouse'.\n */\nBlockly.Touch.getTouchIdentifierFromEvent = function(e) {\n  return e.pointerId != undefined ? e.pointerId :\n      (e.changedTouches && e.changedTouches[0] &&\n      e.changedTouches[0].identifier !== undefined &&\n      e.changedTouches[0].identifier !== null) ?\n      e.changedTouches[0].identifier : 'mouse';\n};\n\n/**\n * Check whether the touch identifier on the event matches the current saved\n * identifier.  If there is no identifier, that means it's a mouse event and\n * we'll use the identifier \"mouse\".  This means we won't deal well with\n * multiple mice being used at the same time.  That seems okay.\n * If the current identifier was unset, save the identifier from the\n * event.  This starts a drag/gesture, during which touch events with other\n * identifiers will be silently ignored.\n * @param {!Event} e Mouse event or touch event.\n * @return {boolean} Whether the identifier on the event matches the current\n *     saved identifier.\n */\nBlockly.Touch.checkTouchIdentifier = function(e) {\n  var identifier = Blockly.Touch.getTouchIdentifierFromEvent(e);\n\n  // if (Blockly.touchIdentifier_ )is insufficient because Android touch\n  // identifiers may be zero.\n  if (Blockly.Touch.touchIdentifier_ !== undefined &&\n      Blockly.Touch.touchIdentifier_ !== null) {\n    // We're already tracking some touch/mouse event.  Is this from the same\n    // source?\n    return Blockly.Touch.touchIdentifier_ == identifier;\n  }\n  if (e.type == 'mousedown' || e.type == 'touchstart' ||\n      e.type == 'pointerdown') {\n    // No identifier set yet, and this is the start of a drag.  Set it and\n    // return.\n    Blockly.Touch.touchIdentifier_ = identifier;\n    return true;\n  }\n  // There was no identifier yet, but this wasn't a start event so we're going\n  // to ignore it.  This probably means that another drag finished while this\n  // pointer was down.\n  return false;\n};\n\n/**\n * Set an event's clientX and clientY from its first changed touch.  Use this to\n * make a touch event work in a mouse event handler.\n * @param {!Event} e A touch event.\n */\nBlockly.Touch.setClientFromTouch = function(e) {\n  if (Blockly.utils.string.startsWith(e.type, 'touch')) {\n    // Map the touch event's properties to the event.\n    var touchPoint = e.changedTouches[0];\n    e.clientX = touchPoint.clientX;\n    e.clientY = touchPoint.clientY;\n  }\n};\n\n/**\n * Check whether a given event is a mouse or touch event.\n * @param {!Event} e An event.\n * @return {boolean} True if it is a mouse or touch event; false otherwise.\n */\nBlockly.Touch.isMouseOrTouchEvent = function(e) {\n  return Blockly.utils.string.startsWith(e.type, 'touch') ||\n      Blockly.utils.string.startsWith(e.type, 'mouse') ||\n      Blockly.utils.string.startsWith(e.type, 'pointer');\n};\n\n/**\n * Check whether a given event is a touch event or a pointer event.\n * @param {!Event} e An event.\n * @return {boolean} True if it is a touch event; false otherwise.\n */\nBlockly.Touch.isTouchEvent = function(e) {\n  return Blockly.utils.string.startsWith(e.type, 'touch') ||\n      Blockly.utils.string.startsWith(e.type, 'pointer');\n};\n\n/**\n * Split an event into an array of events, one per changed touch or mouse\n * point.\n * @param {!Event} e A mouse event or a touch event with one or more changed\n * touches.\n * @return {!Array.<!Event>} An array of mouse or touch events.  Each touch\n *     event will have exactly one changed touch.\n */\nBlockly.Touch.splitEventByTouches = function(e) {\n  var events = [];\n  if (e.changedTouches) {\n    for (var i = 0; i < e.changedTouches.length; i++) {\n      var newEvent = {\n        type: e.type,\n        changedTouches: [e.changedTouches[i]],\n        target: e.target,\n        stopPropagation: function() { e.stopPropagation(); },\n        preventDefault: function() { e.preventDefault(); }\n      };\n      events[i] = newEvent;\n    }\n  } else {\n    events.push(e);\n  }\n  return events;\n};\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Library for creating scrollbars.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Scrollbar');\ngoog.provide('Blockly.ScrollbarPair');\n\ngoog.require('Blockly.Touch');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Metrics');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * A note on units: most of the numbers that are in CSS pixels are scaled if the\n * scrollbar is in a mutator.\n */\n\n/**\n * Class for a pair of scrollbars.  Horizontal and vertical.\n * @param {!Blockly.WorkspaceSvg} workspace Workspace to bind the scrollbars to.\n * @constructor\n */\nBlockly.ScrollbarPair = function(workspace) {\n  this.workspace_ = workspace;\n  this.hScroll = new Blockly.Scrollbar(\n      workspace, true, true, 'blocklyMainWorkspaceScrollbar');\n  this.vScroll = new Blockly.Scrollbar(\n      workspace, false, true, 'blocklyMainWorkspaceScrollbar');\n  this.corner_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {\n        'height': Blockly.Scrollbar.scrollbarThickness,\n        'width': Blockly.Scrollbar.scrollbarThickness,\n        'class': 'blocklyScrollbarBackground'\n      },\n      null);\n  Blockly.utils.dom.insertAfter(this.corner_, workspace.getBubbleCanvas());\n\n  /**\n   * Previously recorded metrics from the workspace.\n   * @type {?Blockly.utils.Metrics}\n   * @private\n   */\n  this.oldHostMetrics_ = null;\n};\n\n/**\n * Dispose of this pair of scrollbars.\n * Unlink from all DOM elements to prevent memory leaks.\n */\nBlockly.ScrollbarPair.prototype.dispose = function() {\n  Blockly.utils.dom.removeNode(this.corner_);\n  this.corner_ = null;\n  this.workspace_ = null;\n  this.oldHostMetrics_ = null;\n  this.hScroll.dispose();\n  this.hScroll = null;\n  this.vScroll.dispose();\n  this.vScroll = null;\n};\n\n/**\n * Recalculate both of the scrollbars' locations and lengths.\n * Also reposition the corner rectangle.\n */\nBlockly.ScrollbarPair.prototype.resize = function() {\n  // Look up the host metrics once, and use for both scrollbars.\n  var hostMetrics = this.workspace_.getMetrics();\n  if (!hostMetrics) {\n    // Host element is likely not visible.\n    return;\n  }\n\n  // Only change the scrollbars if there has been a change in metrics.\n  var resizeH = false;\n  var resizeV = false;\n  if (!this.oldHostMetrics_ ||\n      this.oldHostMetrics_.viewWidth != hostMetrics.viewWidth ||\n      this.oldHostMetrics_.viewHeight != hostMetrics.viewHeight ||\n      this.oldHostMetrics_.absoluteTop != hostMetrics.absoluteTop ||\n      this.oldHostMetrics_.absoluteLeft != hostMetrics.absoluteLeft) {\n    // The window has been resized or repositioned.\n    resizeH = true;\n    resizeV = true;\n  } else {\n    // Has the content been resized or moved?\n    if (!this.oldHostMetrics_ ||\n        this.oldHostMetrics_.contentWidth != hostMetrics.contentWidth ||\n        this.oldHostMetrics_.viewLeft != hostMetrics.viewLeft ||\n        this.oldHostMetrics_.contentLeft != hostMetrics.contentLeft) {\n      resizeH = true;\n    }\n    if (!this.oldHostMetrics_ ||\n        this.oldHostMetrics_.contentHeight != hostMetrics.contentHeight ||\n        this.oldHostMetrics_.viewTop != hostMetrics.viewTop ||\n        this.oldHostMetrics_.contentTop != hostMetrics.contentTop) {\n      resizeV = true;\n    }\n  }\n  if (resizeH || resizeV) {\n    try {\n      Blockly.Events.disable();\n      if (resizeH) {\n        this.hScroll.resize(hostMetrics);\n      }\n      if (resizeV) {\n        this.vScroll.resize(hostMetrics);\n      }\n    } finally {\n      Blockly.Events.enable();\n    }\n    this.workspace_.maybeFireViewportChangeEvent();\n  }\n\n  // Reposition the corner square.\n  if (!this.oldHostMetrics_ ||\n      this.oldHostMetrics_.viewWidth != hostMetrics.viewWidth ||\n      this.oldHostMetrics_.absoluteLeft != hostMetrics.absoluteLeft) {\n    this.corner_.setAttribute('x', this.vScroll.position.x);\n  }\n  if (!this.oldHostMetrics_ ||\n      this.oldHostMetrics_.viewHeight != hostMetrics.viewHeight ||\n      this.oldHostMetrics_.absoluteTop != hostMetrics.absoluteTop) {\n    this.corner_.setAttribute('y', this.hScroll.position.y);\n  }\n\n  // Cache the current metrics to potentially short-cut the next resize event.\n  this.oldHostMetrics_ = hostMetrics;\n};\n\n/**\n * Set the handles of both scrollbars to be at a certain position in CSS pixels\n * relative to their parents.\n * @param {number} x Horizontal scroll value.\n * @param {number} y Vertical scroll value.\n */\nBlockly.ScrollbarPair.prototype.set = function(x, y) {\n  // This function is equivalent to:\n  //   this.hScroll.set(x);\n  //   this.vScroll.set(y);\n  // However, that calls setMetrics twice which causes a chain of\n  // getAttribute->setAttribute->getAttribute resulting in an extra layout pass.\n  // Combining them speeds up rendering.\n  var xyRatio = {};\n\n  var hHandlePosition = x * this.hScroll.ratio;\n  var vHandlePosition = y * this.vScroll.ratio;\n\n  var hBarLength = this.hScroll.scrollViewSize_;\n  var vBarLength = this.vScroll.scrollViewSize_;\n\n  xyRatio.x = this.getRatio_(hHandlePosition, hBarLength);\n  xyRatio.y = this.getRatio_(vHandlePosition, vBarLength);\n  this.workspace_.setMetrics(xyRatio);\n\n  this.hScroll.setHandlePosition(hHandlePosition);\n  this.vScroll.setHandlePosition(vHandlePosition);\n};\n\n/**\n * Helper to calculate the ratio of handle position to scrollbar view size.\n * @param {number} handlePosition The value of the handle.\n * @param {number} viewSize The total size of the scrollbar's view.\n * @return {number} Ratio.\n * @private\n */\nBlockly.ScrollbarPair.prototype.getRatio_ = function(handlePosition, viewSize) {\n  var ratio = handlePosition / viewSize;\n  if (isNaN(ratio)) {\n    return 0;\n  }\n  return ratio;\n};\n\n// --------------------------------------------------------------------\n\n/**\n * Class for a pure SVG scrollbar.\n * This technique offers a scrollbar that is guaranteed to work, but may not\n * look or behave like the system's scrollbars.\n * @param {!Blockly.WorkspaceSvg} workspace Workspace to bind the scrollbar to.\n * @param {boolean} horizontal True if horizontal, false if vertical.\n * @param {boolean=} opt_pair True if scrollbar is part of a horiz/vert pair.\n * @param {string=} opt_class A class to be applied to this scrollbar.\n * @constructor\n */\nBlockly.Scrollbar = function(workspace, horizontal, opt_pair, opt_class) {\n  this.workspace_ = workspace;\n  this.pair_ = opt_pair || false;\n  this.horizontal_ = horizontal;\n  this.oldHostMetrics_ = null;\n\n  /**\n   * @type {?number}\n   * @package\n   */\n  this.ratio = null;\n\n  this.createDom_(opt_class);\n\n  /**\n   * The upper left corner of the scrollbar's SVG group in CSS pixels relative\n   * to the scrollbar's origin.  This is usually relative to the injection div\n   * origin.\n   * @type {Blockly.utils.Coordinate}\n   * @package\n   */\n  this.position = new Blockly.utils.Coordinate(0, 0);\n\n  // Store the thickness in a temp variable for readability.\n  var scrollbarThickness = Blockly.Scrollbar.scrollbarThickness;\n  if (horizontal) {\n    this.svgBackground_.setAttribute('height', scrollbarThickness);\n    this.outerSvg_.setAttribute('height', scrollbarThickness);\n    this.svgHandle_.setAttribute('height', scrollbarThickness - 5);\n    this.svgHandle_.setAttribute('y', 2.5);\n\n    this.lengthAttribute_ = 'width';\n    this.positionAttribute_ = 'x';\n  } else {\n    this.svgBackground_.setAttribute('width', scrollbarThickness);\n    this.outerSvg_.setAttribute('width', scrollbarThickness);\n    this.svgHandle_.setAttribute('width', scrollbarThickness - 5);\n    this.svgHandle_.setAttribute('x', 2.5);\n\n    this.lengthAttribute_ = 'height';\n    this.positionAttribute_ = 'y';\n  }\n  var scrollbar = this;\n  this.onMouseDownBarWrapper_ = Blockly.bindEventWithChecks_(\n      this.svgBackground_, 'mousedown', scrollbar, scrollbar.onMouseDownBar_);\n  this.onMouseDownHandleWrapper_ = Blockly.bindEventWithChecks_(this.svgHandle_,\n      'mousedown', scrollbar, scrollbar.onMouseDownHandle_);\n};\n\n/**\n * The location of the origin of the workspace that the scrollbar is in,\n * measured in CSS pixels relative to the injection div origin.  This is usually\n * (0, 0).  When the scrollbar is in a flyout it may have a different origin.\n * @type {Blockly.utils.Coordinate}\n * @private\n */\nBlockly.Scrollbar.prototype.origin_ = new Blockly.utils.Coordinate(0, 0);\n\n/**\n * The position of the mouse along this scrollbar's major axis at the start of\n * the most recent drag.\n * Units are CSS pixels, with (0, 0) at the top left of the browser window.\n * For a horizontal scrollbar this is the x coordinate of the mouse down event;\n * for a vertical scrollbar it's the y coordinate of the mouse down event.\n * @type {number}\n * @private\n */\nBlockly.Scrollbar.prototype.startDragMouse_ = 0;\n\n/**\n * The size of the area within which the scrollbar handle can move, in CSS\n * pixels.\n * @type {number}\n * @private\n */\nBlockly.Scrollbar.prototype.scrollViewSize_ = 0;\n\n/**\n * The length of the scrollbar handle in CSS pixels.\n * @type {number}\n * @private\n */\nBlockly.Scrollbar.prototype.handleLength_ = 0;\n\n/**\n * The offset of the start of the handle from the scrollbar position, in CSS\n * pixels.\n * @type {number}\n * @private\n */\nBlockly.Scrollbar.prototype.handlePosition_ = 0;\n\n/**\n * Whether the scrollbar handle is visible.\n * @type {boolean}\n * @private\n */\nBlockly.Scrollbar.prototype.isVisible_ = true;\n\n/**\n * Whether the workspace containing this scrollbar is visible.\n * @type {boolean}\n * @private\n */\nBlockly.Scrollbar.prototype.containerVisible_ = true;\n\n/**\n * Width of vertical scrollbar or height of horizontal scrollbar in CSS pixels.\n * Scrollbars should be larger on touch devices.\n */\nBlockly.Scrollbar.scrollbarThickness = 15;\nif (Blockly.Touch.TOUCH_ENABLED) {\n  Blockly.Scrollbar.scrollbarThickness = 25;\n}\n\n/**\n * @param {Blockly.utils.Metrics} first An object containing computed\n *     measurements of a workspace.\n * @param {Blockly.utils.Metrics} second Another object containing computed\n *     measurements of a workspace.\n * @return {boolean} Whether the two sets of metrics are equivalent.\n * @private\n */\nBlockly.Scrollbar.metricsAreEquivalent_ = function(first, second) {\n  if (!(first && second)) {\n    return false;\n  }\n\n  if (first.viewWidth != second.viewWidth ||\n      first.viewHeight != second.viewHeight ||\n      first.viewLeft != second.viewLeft ||\n      first.viewTop != second.viewTop ||\n      first.absoluteTop != second.absoluteTop ||\n      first.absoluteLeft != second.absoluteLeft ||\n      first.contentWidth != second.contentWidth ||\n      first.contentHeight != second.contentHeight ||\n      first.contentLeft != second.contentLeft ||\n      first.contentTop != second.contentTop) {\n    return false;\n  }\n\n  return true;\n};\n\n/**\n * Dispose of this scrollbar.\n * Unlink from all DOM elements to prevent memory leaks.\n */\nBlockly.Scrollbar.prototype.dispose = function() {\n  this.cleanUp_();\n  Blockly.unbindEvent_(this.onMouseDownBarWrapper_);\n  this.onMouseDownBarWrapper_ = null;\n  Blockly.unbindEvent_(this.onMouseDownHandleWrapper_);\n  this.onMouseDownHandleWrapper_ = null;\n\n  Blockly.utils.dom.removeNode(this.outerSvg_);\n  this.outerSvg_ = null;\n  this.svgGroup_ = null;\n  this.svgBackground_ = null;\n  if (this.svgHandle_) {\n    this.workspace_.getThemeManager().unsubscribe(this.svgHandle_);\n    this.svgHandle_ = null;\n  }\n  this.workspace_ = null;\n};\n\n/**\n * Set the length of the scrollbar's handle and change the SVG attribute\n * accordingly.\n * @param {number} newLength The new scrollbar handle length in CSS pixels.\n * @private\n */\nBlockly.Scrollbar.prototype.setHandleLength_ = function(newLength) {\n  this.handleLength_ = newLength;\n  this.svgHandle_.setAttribute(this.lengthAttribute_, this.handleLength_);\n};\n\n/**\n * Set the offset of the scrollbar's handle from the scrollbar's position, and\n * change the SVG attribute accordingly.\n * @param {number} newPosition The new scrollbar handle offset in CSS pixels.\n */\nBlockly.Scrollbar.prototype.setHandlePosition = function(newPosition) {\n  this.handlePosition_ = newPosition;\n  this.svgHandle_.setAttribute(this.positionAttribute_, this.handlePosition_);\n};\n\n/**\n * Set the size of the scrollbar's background and change the SVG attribute\n * accordingly.\n * @param {number} newSize The new scrollbar background length in CSS pixels.\n * @private\n */\nBlockly.Scrollbar.prototype.setScrollViewSize_ = function(newSize) {\n  this.scrollViewSize_ = newSize;\n  this.outerSvg_.setAttribute(this.lengthAttribute_, this.scrollViewSize_);\n  this.svgBackground_.setAttribute(this.lengthAttribute_, this.scrollViewSize_);\n};\n\n/**\n * Set whether this scrollbar's container is visible.\n * @param {boolean} visible Whether the container is visible.\n */\nBlockly.ScrollbarPair.prototype.setContainerVisible = function(visible) {\n  this.hScroll.setContainerVisible(visible);\n  this.vScroll.setContainerVisible(visible);\n};\n\n/**\n * Set the position of the scrollbar's SVG group in CSS pixels relative to the\n * scrollbar's origin.  This sets the scrollbar's location within the workspace.\n * @param {number} x The new x coordinate.\n * @param {number} y The new y coordinate.\n * @package\n */\nBlockly.Scrollbar.prototype.setPosition = function(x, y) {\n  this.position.x = x;\n  this.position.y = y;\n\n  var tempX = this.position.x + this.origin_.x;\n  var tempY = this.position.y + this.origin_.y;\n  var transform = 'translate(' + tempX + 'px,' + tempY + 'px)';\n  Blockly.utils.dom.setCssTransform(this.outerSvg_, transform);\n};\n\n/**\n * Recalculate the scrollbar's location and its length.\n * @param {Blockly.utils.Metrics=} opt_metrics A data structure of from the\n *     describing all the required dimensions.  If not provided, it will be\n *     fetched from the host object.\n */\nBlockly.Scrollbar.prototype.resize = function(opt_metrics) {\n  // Determine the location, height and width of the host element.\n  var hostMetrics = opt_metrics;\n  if (!hostMetrics) {\n    hostMetrics = this.workspace_.getMetrics();\n    if (!hostMetrics) {\n      // Host element is likely not visible.\n      return;\n    }\n  }\n\n  if (Blockly.Scrollbar.metricsAreEquivalent_(hostMetrics,\n      this.oldHostMetrics_)) {\n    return;\n  }\n  this.oldHostMetrics_ = hostMetrics;\n\n  /* hostMetrics is an object with the following properties.\n   * .viewHeight: Height of the visible rectangle,\n   * .viewWidth: Width of the visible rectangle,\n   * .contentHeight: Height of the contents,\n   * .contentWidth: Width of the content,\n   * .viewTop: Offset of top edge of visible rectangle from parent,\n   * .viewLeft: Offset of left edge of visible rectangle from parent,\n   * .contentTop: Offset of the top-most content from the y=0 coordinate,\n   * .contentLeft: Offset of the left-most content from the x=0 coordinate,\n   * .absoluteTop: Top-edge of view.\n   * .absoluteLeft: Left-edge of view.\n   */\n  if (this.horizontal_) {\n    this.resizeHorizontal_(hostMetrics);\n  } else {\n    this.resizeVertical_(hostMetrics);\n  }\n  // Resizing may have caused some scrolling.\n  this.onScroll_();\n};\n\n/**\n * Recalculate a horizontal scrollbar's location and length.\n * @param {!Blockly.utils.Metrics} hostMetrics A data structure describing all\n *     the required dimensions, possibly fetched from the host object.\n * @private\n */\nBlockly.Scrollbar.prototype.resizeHorizontal_ = function(hostMetrics) {\n  // TODO: Inspect metrics to determine if we can get away with just a content\n  // resize.\n  this.resizeViewHorizontal(hostMetrics);\n};\n\n/**\n * Recalculate a horizontal scrollbar's location on the screen and path length.\n * This should be called when the layout or size of the window has changed.\n * @param {!Blockly.utils.Metrics} hostMetrics A data structure describing all\n *     the required dimensions, possibly fetched from the host object.\n */\nBlockly.Scrollbar.prototype.resizeViewHorizontal = function(hostMetrics) {\n  var viewSize = hostMetrics.viewWidth - 1;\n  if (this.pair_) {\n    // Shorten the scrollbar to make room for the corner square.\n    viewSize -= Blockly.Scrollbar.scrollbarThickness;\n  }\n  this.setScrollViewSize_(Math.max(0, viewSize));\n\n  var xCoordinate = hostMetrics.absoluteLeft + 0.5;\n  if (this.pair_ && this.workspace_.RTL) {\n    xCoordinate += Blockly.Scrollbar.scrollbarThickness;\n  }\n\n  // Horizontal toolbar should always be just above the bottom of the workspace.\n  var yCoordinate = hostMetrics.absoluteTop + hostMetrics.viewHeight -\n      Blockly.Scrollbar.scrollbarThickness - 0.5;\n  this.setPosition(xCoordinate, yCoordinate);\n\n  // If the view has been resized, a content resize will also be necessary.  The\n  // reverse is not true.\n  this.resizeContentHorizontal(hostMetrics);\n};\n\n/**\n * Recalculate a horizontal scrollbar's location within its path and length.\n * This should be called when the contents of the workspace have changed.\n * @param {!Blockly.utils.Metrics} hostMetrics A data structure describing all\n *     the required dimensions, possibly fetched from the host object.\n */\nBlockly.Scrollbar.prototype.resizeContentHorizontal = function(hostMetrics) {\n  if (!this.pair_) {\n    // Only show the scrollbar if needed.\n    // Ideally this would also apply to scrollbar pairs, but that's a bigger\n    // headache (due to interactions with the corner square).\n    this.setVisible(this.scrollViewSize_ < hostMetrics.contentWidth);\n  }\n\n  this.ratio = this.scrollViewSize_ / hostMetrics.contentWidth;\n  if (this.ratio == -Infinity || this.ratio == Infinity ||\n      isNaN(this.ratio)) {\n    this.ratio = 0;\n  }\n\n  var handleLength = hostMetrics.viewWidth * this.ratio;\n  this.setHandleLength_(Math.max(0, handleLength));\n\n  var handlePosition = (hostMetrics.viewLeft - hostMetrics.contentLeft) *\n      this.ratio;\n  this.setHandlePosition(this.constrainHandle_(handlePosition));\n};\n\n/**\n * Recalculate a vertical scrollbar's location and length.\n * @param {!Blockly.utils.Metrics} hostMetrics A data structure describing all\n *     the required dimensions, possibly fetched from the host object.\n * @private\n */\nBlockly.Scrollbar.prototype.resizeVertical_ = function(hostMetrics) {\n  // TODO: Inspect metrics to determine if we can get away with just a content\n  // resize.\n  this.resizeViewVertical(hostMetrics);\n};\n\n/**\n * Recalculate a vertical scrollbar's location on the screen and path length.\n * This should be called when the layout or size of the window has changed.\n * @param {!Blockly.utils.Metrics} hostMetrics A data structure describing all\n *     the required dimensions, possibly fetched from the host object.\n */\nBlockly.Scrollbar.prototype.resizeViewVertical = function(hostMetrics) {\n  var viewSize = hostMetrics.viewHeight - 1;\n  if (this.pair_) {\n    // Shorten the scrollbar to make room for the corner square.\n    viewSize -= Blockly.Scrollbar.scrollbarThickness;\n  }\n  this.setScrollViewSize_(Math.max(0, viewSize));\n\n  var xCoordinate = hostMetrics.absoluteLeft + 0.5;\n  if (!this.workspace_.RTL) {\n    xCoordinate += hostMetrics.viewWidth -\n        Blockly.Scrollbar.scrollbarThickness - 1;\n  }\n  var yCoordinate = hostMetrics.absoluteTop + 0.5;\n  this.setPosition(xCoordinate, yCoordinate);\n\n  // If the view has been resized, a content resize will also be necessary.  The\n  // reverse is not true.\n  this.resizeContentVertical(hostMetrics);\n};\n\n/**\n * Recalculate a vertical scrollbar's location within its path and length.\n * This should be called when the contents of the workspace have changed.\n * @param {!Blockly.utils.Metrics} hostMetrics A data structure describing all\n *     the required dimensions, possibly fetched from the host object.\n */\nBlockly.Scrollbar.prototype.resizeContentVertical = function(hostMetrics) {\n  if (!this.pair_) {\n    // Only show the scrollbar if needed.\n    this.setVisible(this.scrollViewSize_ < hostMetrics.contentHeight);\n  }\n\n  this.ratio = this.scrollViewSize_ / hostMetrics.contentHeight;\n  if (this.ratio == -Infinity || this.ratio == Infinity ||\n      isNaN(this.ratio)) {\n    this.ratio = 0;\n  }\n\n  var handleLength = hostMetrics.viewHeight * this.ratio;\n  this.setHandleLength_(Math.max(0, handleLength));\n\n  var handlePosition = (hostMetrics.viewTop - hostMetrics.contentTop) *\n      this.ratio;\n  this.setHandlePosition(this.constrainHandle_(handlePosition));\n};\n\n/**\n * Create all the DOM elements required for a scrollbar.\n * The resulting widget is not sized.\n * @param {string=} opt_class A class to be applied to this scrollbar.\n * @private\n */\nBlockly.Scrollbar.prototype.createDom_ = function(opt_class) {\n  /* Create the following DOM:\n  <svg class=\"blocklyScrollbarHorizontal  optionalClass\">\n    <g>\n      <rect class=\"blocklyScrollbarBackground\" />\n      <rect class=\"blocklyScrollbarHandle\" rx=\"8\" ry=\"8\" />\n    </g>\n  </svg>\n  */\n  var className = 'blocklyScrollbar' +\n      (this.horizontal_ ? 'Horizontal' : 'Vertical');\n  if (opt_class) {\n    className += ' ' + opt_class;\n  }\n  this.outerSvg_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.SVG, {'class': className}, null);\n  this.svgGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G, {}, this.outerSvg_);\n  this.svgBackground_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT, {\n        'class': 'blocklyScrollbarBackground'\n      }, this.svgGroup_);\n  var radius = Math.floor((Blockly.Scrollbar.scrollbarThickness - 5) / 2);\n  this.svgHandle_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {\n        'class': 'blocklyScrollbarHandle',\n        'rx': radius,\n        'ry': radius\n      },\n      this.svgGroup_);\n  this.workspace_.getThemeManager().subscribe(\n      this.svgHandle_, 'scrollbarColour', 'fill');\n  this.workspace_.getThemeManager().subscribe(\n      this.svgHandle_, 'scrollbarOpacity', 'fill-opacity');\n  Blockly.utils.dom.insertAfter(this.outerSvg_,\n      this.workspace_.getParentSvg());\n};\n\n/**\n * Is the scrollbar visible.  Non-paired scrollbars disappear when they aren't\n * needed.\n * @return {boolean} True if visible.\n */\nBlockly.Scrollbar.prototype.isVisible = function() {\n  return this.isVisible_;\n};\n\n/**\n * Set whether the scrollbar's container is visible and update\n * display accordingly if visibility has changed.\n * @param {boolean} visible Whether the container is visible\n */\nBlockly.Scrollbar.prototype.setContainerVisible = function(visible) {\n  var visibilityChanged = (visible != this.containerVisible_);\n\n  this.containerVisible_ = visible;\n  if (visibilityChanged) {\n    this.updateDisplay_();\n  }\n};\n\n/**\n * Set whether the scrollbar is visible.\n * Only applies to non-paired scrollbars.\n * @param {boolean} visible True if visible.\n */\nBlockly.Scrollbar.prototype.setVisible = function(visible) {\n  var visibilityChanged = (visible != this.isVisible());\n\n  // Ideally this would also apply to scrollbar pairs, but that's a bigger\n  // headache (due to interactions with the corner square).\n  if (this.pair_) {\n    throw Error('Unable to toggle visibility of paired scrollbars.');\n  }\n  this.isVisible_ = visible;\n  if (visibilityChanged) {\n    this.updateDisplay_();\n  }\n};\n\n/**\n * Update visibility of scrollbar based on whether it thinks it should\n * be visible and whether its containing workspace is visible.\n * We cannot rely on the containing workspace being hidden to hide us\n * because it is not necessarily our parent in the DOM.\n */\nBlockly.Scrollbar.prototype.updateDisplay_ = function() {\n  var show = true;\n  // Check whether our parent/container is visible.\n  if (!this.containerVisible_) {\n    show = false;\n  } else {\n    show = this.isVisible();\n  }\n  if (show) {\n    this.outerSvg_.setAttribute('display', 'block');\n  } else {\n    this.outerSvg_.setAttribute('display', 'none');\n  }\n};\n\n/**\n * Scroll by one pageful.\n * Called when scrollbar background is clicked.\n * @param {!Event} e Mouse down event.\n * @private\n */\nBlockly.Scrollbar.prototype.onMouseDownBar_ = function(e) {\n  this.workspace_.markFocused();\n  Blockly.Touch.clearTouchIdentifier();  // This is really a click.\n  this.cleanUp_();\n  if (Blockly.utils.isRightButton(e)) {\n    // Right-click.\n    // Scrollbars have no context menu.\n    e.stopPropagation();\n    return;\n  }\n  var mouseXY = Blockly.utils.mouseToSvg(e,\n      this.workspace_.getParentSvg(),\n      this.workspace_.getInverseScreenCTM());\n  var mouseLocation = this.horizontal_ ? mouseXY.x : mouseXY.y;\n\n  var handleXY = Blockly.utils.getInjectionDivXY_(this.svgHandle_);\n  var handleStart = this.horizontal_ ? handleXY.x : handleXY.y;\n  var handlePosition = this.handlePosition_;\n\n  var pageLength = this.handleLength_ * 0.95;\n  if (mouseLocation <= handleStart) {\n    // Decrease the scrollbar's value by a page.\n    handlePosition -= pageLength;\n  } else if (mouseLocation >= handleStart + this.handleLength_) {\n    // Increase the scrollbar's value by a page.\n    handlePosition += pageLength;\n  }\n\n  this.setHandlePosition(this.constrainHandle_(handlePosition));\n\n  this.onScroll_();\n  e.stopPropagation();\n  e.preventDefault();\n};\n\n/**\n * Start a dragging operation.\n * Called when scrollbar handle is clicked.\n * @param {!Event} e Mouse down event.\n * @private\n */\nBlockly.Scrollbar.prototype.onMouseDownHandle_ = function(e) {\n  this.workspace_.markFocused();\n  this.cleanUp_();\n  if (Blockly.utils.isRightButton(e)) {\n    // Right-click.\n    // Scrollbars have no context menu.\n    e.stopPropagation();\n    return;\n  }\n  // Look up the current translation and record it.\n  this.startDragHandle = this.handlePosition_;\n\n  // Tell the workspace to setup its drag surface since it is about to move.\n  // onMouseMoveHandle will call onScroll which actually tells the workspace\n  // to move.\n  this.workspace_.setupDragSurface();\n\n  // Record the current mouse position.\n  this.startDragMouse_ = this.horizontal_ ? e.clientX : e.clientY;\n  Blockly.Scrollbar.onMouseUpWrapper_ = Blockly.bindEventWithChecks_(document,\n      'mouseup', this, this.onMouseUpHandle_);\n  Blockly.Scrollbar.onMouseMoveWrapper_ = Blockly.bindEventWithChecks_(document,\n      'mousemove', this, this.onMouseMoveHandle_);\n  e.stopPropagation();\n  e.preventDefault();\n};\n\n/**\n * Drag the scrollbar's handle.\n * @param {!Event} e Mouse up event.\n * @private\n */\nBlockly.Scrollbar.prototype.onMouseMoveHandle_ = function(e) {\n  var currentMouse = this.horizontal_ ? e.clientX : e.clientY;\n  var mouseDelta = currentMouse - this.startDragMouse_;\n  var handlePosition = this.startDragHandle + mouseDelta;\n  // Position the bar.\n  this.setHandlePosition(this.constrainHandle_(handlePosition));\n  this.onScroll_();\n};\n\n/**\n * Release the scrollbar handle and reset state accordingly.\n * @private\n */\nBlockly.Scrollbar.prototype.onMouseUpHandle_ = function() {\n  // Tell the workspace to clean up now that the workspace is done moving.\n  this.workspace_.resetDragSurface();\n  Blockly.Touch.clearTouchIdentifier();\n  this.cleanUp_();\n};\n\n/**\n * Hide chaff and stop binding to mouseup and mousemove events.  Call this to\n * wrap up loose ends associated with the scrollbar.\n * @private\n */\nBlockly.Scrollbar.prototype.cleanUp_ = function() {\n  Blockly.hideChaff(true);\n  if (Blockly.Scrollbar.onMouseUpWrapper_) {\n    Blockly.unbindEvent_(Blockly.Scrollbar.onMouseUpWrapper_);\n    Blockly.Scrollbar.onMouseUpWrapper_ = null;\n  }\n  if (Blockly.Scrollbar.onMouseMoveWrapper_) {\n    Blockly.unbindEvent_(Blockly.Scrollbar.onMouseMoveWrapper_);\n    Blockly.Scrollbar.onMouseMoveWrapper_ = null;\n  }\n};\n\n/**\n * Constrain the handle's position within the minimum (0) and maximum\n * (length of scrollbar) values allowed for the scrollbar.\n * @param {number} value Value that is potentially out of bounds, in CSS pixels.\n * @return {number} Constrained value, in CSS pixels.\n * @private\n */\nBlockly.Scrollbar.prototype.constrainHandle_ = function(value) {\n  if (value <= 0 || isNaN(value) || this.scrollViewSize_ < this.handleLength_) {\n    value = 0;\n  } else {\n    value = Math.min(value, this.scrollViewSize_ - this.handleLength_);\n  }\n  return value;\n};\n\n/**\n * Called when scrollbar is moved.\n * @private\n */\nBlockly.Scrollbar.prototype.onScroll_ = function() {\n  var ratio = this.handlePosition_ / this.scrollViewSize_;\n  if (isNaN(ratio)) {\n    ratio = 0;\n  }\n  var xyRatio = {};\n  if (this.horizontal_) {\n    xyRatio.x = ratio;\n  } else {\n    xyRatio.y = ratio;\n  }\n  this.workspace_.setMetrics(xyRatio);\n};\n\n/**\n * Set the scrollbar handle's position.\n * @param {number} value The distance from the top/left end of the bar, in CSS\n *     pixels.  It may be larger than the maximum allowable position of the\n *     scrollbar handle.\n */\nBlockly.Scrollbar.prototype.set = function(value) {\n  this.setHandlePosition(this.constrainHandle_(value * this.ratio));\n  this.onScroll_();\n};\n\n/**\n * Record the origin of the workspace that the scrollbar is in, in pixels\n * relative to the injection div origin. This is for times when the scrollbar is\n * used in an object whose origin isn't the same as the main workspace\n * (e.g. in a flyout.)\n * @param {number} x The x coordinate of the scrollbar's origin, in CSS pixels.\n * @param {number} y The y coordinate of the scrollbar's origin, in CSS pixels.\n */\nBlockly.Scrollbar.prototype.setOrigin = function(x, y) {\n  this.origin_ = new Blockly.utils.Coordinate(x, y);\n};\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Library to create tooltips for Blockly.\n * First, call Blockly.Tooltip.init() after onload.\n * Second, set the 'tooltip' property on any SVG element that needs a tooltip.\n * If the tooltip is a string, then that message will be displayed.\n * If the tooltip is an SVG element, then that object's tooltip will be used.\n * Third, call Blockly.Tooltip.bindMouseEvents(e) passing the SVG element.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.Tooltip\n * @namespace\n */\ngoog.provide('Blockly.Tooltip');\n\ngoog.require('Blockly.utils.string');\n\n/**\n * A type which can define a tooltip.\n * Either a string, an object containing a tooltip property, or a function which\n * returns either a string, or another arbitrarily nested function which\n * eventually unwinds to a string.\n * @typedef {string|{tooltip}|function(): (string|!Function)}\n */\nBlockly.Tooltip.TipInfo;\n\n/**\n * Is a tooltip currently showing?\n */\nBlockly.Tooltip.visible = false;\n\n/**\n * Is someone else blocking the tooltip from being shown?\n * @type {boolean}\n * @private\n */\nBlockly.Tooltip.blocked_ = false;\n\n/**\n * Maximum width (in characters) of a tooltip.\n */\nBlockly.Tooltip.LIMIT = 50;\n\n/**\n * PID of suspended thread to clear tooltip on mouse out.\n * @private\n */\nBlockly.Tooltip.mouseOutPid_ = 0;\n\n/**\n * PID of suspended thread to show the tooltip.\n * @private\n */\nBlockly.Tooltip.showPid_ = 0;\n\n/**\n * Last observed X location of the mouse pointer (freezes when tooltip appears).\n * @private\n */\nBlockly.Tooltip.lastX_ = 0;\n\n/**\n * Last observed Y location of the mouse pointer (freezes when tooltip appears).\n * @private\n */\nBlockly.Tooltip.lastY_ = 0;\n\n/**\n * Current element being pointed at.\n * @type {Element}\n * @private\n */\nBlockly.Tooltip.element_ = null;\n\n/**\n * Once a tooltip has opened for an element, that element is 'poisoned' and\n * cannot respawn a tooltip until the pointer moves over a different element.\n * @type {Element}\n * @private\n */\nBlockly.Tooltip.poisonedElement_ = null;\n\n/**\n * Horizontal offset between mouse cursor and tooltip.\n */\nBlockly.Tooltip.OFFSET_X = 0;\n\n/**\n * Vertical offset between mouse cursor and tooltip.\n */\nBlockly.Tooltip.OFFSET_Y = 10;\n\n/**\n * Radius mouse can move before killing tooltip.\n */\nBlockly.Tooltip.RADIUS_OK = 10;\n\n/**\n * Delay before tooltip appears.\n */\nBlockly.Tooltip.HOVER_MS = 750;\n\n/**\n * Horizontal padding between tooltip and screen edge.\n */\nBlockly.Tooltip.MARGINS = 5;\n\n/**\n * The HTML container.  Set once by Blockly.Tooltip.createDom.\n * @type {Element}\n */\nBlockly.Tooltip.DIV = null;\n\n/**\n * Returns the tooltip text for the given element.\n * @param {?Object} object The object to get the the tooltip text of.\n * @returns {string} The tooltip text of the element.\n */\nBlockly.Tooltip.getTooltipOfObject = function(object) {\n  var obj = Blockly.Tooltip.getTargetObject_(object);\n  if (obj) {\n    var tooltip = obj.tooltip;\n    while (typeof tooltip == 'function') {\n      tooltip = tooltip();\n    }\n    if (typeof tooltip != 'string') {\n      throw Error('Tooltip function must return a string.');\n    }\n    return tooltip;\n  }\n  return '';\n};\n\n/**\n * Returns the target object that the given object is targeting for its\n * tooltip. Could be the object itself.\n * @param {?Object} obj The object are trying to find the target tooltip\n *     object of.\n * @returns {?{tooltip}} The target tooltip object.\n * @private\n */\nBlockly.Tooltip.getTargetObject_ = function(obj) {\n  while (obj && obj.tooltip) {\n    if ((typeof obj.tooltip == 'string') ||\n        (typeof obj.tooltip == 'function')) {\n      return obj;\n    }\n    obj = obj.tooltip;\n  }\n  return null;\n};\n\n/**\n * Create the tooltip div and inject it onto the page.\n */\nBlockly.Tooltip.createDom = function() {\n  if (Blockly.Tooltip.DIV) {\n    return;  // Already created.\n  }\n  // Create an HTML container for popup overlays (e.g. editor widgets).\n  Blockly.Tooltip.DIV = document.createElement('div');\n  Blockly.Tooltip.DIV.className = 'blocklyTooltipDiv';\n  var container = Blockly.parentContainer || document.body;\n  container.appendChild(Blockly.Tooltip.DIV);\n};\n\n/**\n * Binds the required mouse events onto an SVG element.\n * @param {!Element} element SVG element onto which tooltip is to be bound.\n */\nBlockly.Tooltip.bindMouseEvents = function(element) {\n  element.mouseOverWrapper_ = Blockly.bindEvent_(element, 'mouseover', null,\n      Blockly.Tooltip.onMouseOver_);\n  element.mouseOutWrapper_ = Blockly.bindEvent_(element, 'mouseout', null,\n      Blockly.Tooltip.onMouseOut_);\n\n  // Don't use bindEvent_ for mousemove since that would create a\n  // corresponding touch handler, even though this only makes sense in the\n  // context of a mouseover/mouseout.\n  element.addEventListener('mousemove', Blockly.Tooltip.onMouseMove_, false);\n};\n\n/**\n * Unbinds tooltip mouse events from the SVG element.\n * @param {!Element} element SVG element onto which tooltip is bound.\n */\nBlockly.Tooltip.unbindMouseEvents = function(element) {\n  if (!element) {\n    return;\n  }\n  Blockly.unbindEvent_(element.mouseOverWrapper_);\n  Blockly.unbindEvent_(element.mouseOutWrapper_);\n  element.removeEventListener('mousemove', Blockly.Tooltip.onMouseMove_);\n};\n\n/**\n * Hide the tooltip if the mouse is over a different object.\n * Initialize the tooltip to potentially appear for this object.\n * @param {!Event} e Mouse event.\n * @private\n */\nBlockly.Tooltip.onMouseOver_ = function(e) {\n  if (Blockly.Tooltip.blocked_) {\n    // Someone doesn't want us to show tooltips.\n    return;\n  }\n  // If the tooltip is an object, treat it as a pointer to the next object in\n  // the chain to look at.  Terminate when a string or function is found.\n  var element = /** @type {Element} */ (Blockly.Tooltip.getTargetObject_(\n      e.currentTarget));\n  if (Blockly.Tooltip.element_ != element) {\n    Blockly.Tooltip.hide();\n    Blockly.Tooltip.poisonedElement_ = null;\n    Blockly.Tooltip.element_ = element;\n  }\n  // Forget about any immediately preceding mouseOut event.\n  clearTimeout(Blockly.Tooltip.mouseOutPid_);\n};\n\n/**\n * Hide the tooltip if the mouse leaves the object and enters the workspace.\n * @param {!Event} _e Mouse event.\n * @private\n */\nBlockly.Tooltip.onMouseOut_ = function(_e) {\n  if (Blockly.Tooltip.blocked_) {\n    // Someone doesn't want us to show tooltips.\n    return;\n  }\n  // Moving from one element to another (overlapping or with no gap) generates\n  // a mouseOut followed instantly by a mouseOver.  Fork off the mouseOut\n  // event and kill it if a mouseOver is received immediately.\n  // This way the task only fully executes if mousing into the void.\n  Blockly.Tooltip.mouseOutPid_ = setTimeout(function() {\n    Blockly.Tooltip.element_ = null;\n    Blockly.Tooltip.poisonedElement_ = null;\n    Blockly.Tooltip.hide();\n  }, 1);\n  clearTimeout(Blockly.Tooltip.showPid_);\n};\n\n/**\n * When hovering over an element, schedule a tooltip to be shown.  If a tooltip\n * is already visible, hide it if the mouse strays out of a certain radius.\n * @param {!Event} e Mouse event.\n * @private\n */\nBlockly.Tooltip.onMouseMove_ = function(e) {\n  if (!Blockly.Tooltip.element_ || !Blockly.Tooltip.element_.tooltip) {\n    // No tooltip here to show.\n    return;\n  } else if (Blockly.Tooltip.blocked_) {\n    // Someone doesn't want us to show tooltips.  We are probably handling a\n    // user gesture, such as a click or drag.\n    return;\n  }\n  if (Blockly.Tooltip.visible) {\n    // Compute the distance between the mouse position when the tooltip was\n    // shown and the current mouse position.  Pythagorean theorem.\n    var dx = Blockly.Tooltip.lastX_ - e.pageX;\n    var dy = Blockly.Tooltip.lastY_ - e.pageY;\n    if (Math.sqrt(dx * dx + dy * dy) > Blockly.Tooltip.RADIUS_OK) {\n      Blockly.Tooltip.hide();\n    }\n  } else if (Blockly.Tooltip.poisonedElement_ != Blockly.Tooltip.element_) {\n    // The mouse moved, clear any previously scheduled tooltip.\n    clearTimeout(Blockly.Tooltip.showPid_);\n    // Maybe this time the mouse will stay put.  Schedule showing of tooltip.\n    Blockly.Tooltip.lastX_ = e.pageX;\n    Blockly.Tooltip.lastY_ = e.pageY;\n    Blockly.Tooltip.showPid_ =\n        setTimeout(Blockly.Tooltip.show_, Blockly.Tooltip.HOVER_MS);\n  }\n};\n\n/**\n * Dispose of the tooltip.\n * @package\n */\nBlockly.Tooltip.dispose = function() {\n  Blockly.Tooltip.element_ = null;\n  Blockly.Tooltip.poisonedElement_ = null;\n  Blockly.Tooltip.hide();\n};\n\n/**\n * Hide the tooltip.\n */\nBlockly.Tooltip.hide = function() {\n  if (Blockly.Tooltip.visible) {\n    Blockly.Tooltip.visible = false;\n    if (Blockly.Tooltip.DIV) {\n      Blockly.Tooltip.DIV.style.display = 'none';\n    }\n  }\n  if (Blockly.Tooltip.showPid_) {\n    clearTimeout(Blockly.Tooltip.showPid_);\n  }\n};\n\n/**\n * Hide any in-progress tooltips and block showing new tooltips until the next\n * call to unblock().\n * @package\n */\nBlockly.Tooltip.block = function() {\n  Blockly.Tooltip.hide();\n  Blockly.Tooltip.blocked_ = true;\n};\n\n/**\n * Unblock tooltips: allow them to be scheduled and shown according to their own\n * logic.\n * @package\n */\nBlockly.Tooltip.unblock = function() {\n  Blockly.Tooltip.blocked_ = false;\n};\n\n/**\n * Create the tooltip and show it.\n * @private\n */\nBlockly.Tooltip.show_ = function() {\n  if (Blockly.Tooltip.blocked_) {\n    // Someone doesn't want us to show tooltips.\n    return;\n  }\n  Blockly.Tooltip.poisonedElement_ = Blockly.Tooltip.element_;\n  if (!Blockly.Tooltip.DIV) {\n    return;\n  }\n  // Erase all existing text.\n  Blockly.Tooltip.DIV.textContent = '';\n  var tip = Blockly.Tooltip.getTooltipOfObject(Blockly.Tooltip.element_);\n  tip = Blockly.utils.string.wrap(tip, Blockly.Tooltip.LIMIT);\n  // Create new text, line by line.\n  var lines = tip.split('\\n');\n  for (var i = 0; i < lines.length; i++) {\n    var div = document.createElement('div');\n    div.appendChild(document.createTextNode(lines[i]));\n    Blockly.Tooltip.DIV.appendChild(div);\n  }\n  var rtl = Blockly.Tooltip.element_.RTL;\n  var windowWidth = document.documentElement.clientWidth;\n  var windowHeight = document.documentElement.clientHeight;\n  // Display the tooltip.\n  Blockly.Tooltip.DIV.style.direction = rtl ? 'rtl' : 'ltr';\n  Blockly.Tooltip.DIV.style.display = 'block';\n  Blockly.Tooltip.visible = true;\n  // Move the tooltip to just below the cursor.\n  var anchorX = Blockly.Tooltip.lastX_;\n  if (rtl) {\n    anchorX -= Blockly.Tooltip.OFFSET_X + Blockly.Tooltip.DIV.offsetWidth;\n  } else {\n    anchorX += Blockly.Tooltip.OFFSET_X;\n  }\n  var anchorY = Blockly.Tooltip.lastY_ + Blockly.Tooltip.OFFSET_Y;\n\n  if (anchorY + Blockly.Tooltip.DIV.offsetHeight >\n      windowHeight + window.scrollY) {\n    // Falling off the bottom of the screen; shift the tooltip up.\n    anchorY -= Blockly.Tooltip.DIV.offsetHeight + 2 * Blockly.Tooltip.OFFSET_Y;\n  }\n  if (rtl) {\n    // Prevent falling off left edge in RTL mode.\n    anchorX = Math.max(Blockly.Tooltip.MARGINS - window.scrollX, anchorX);\n  } else {\n    if (anchorX + Blockly.Tooltip.DIV.offsetWidth >\n        windowWidth + window.scrollX - 2 * Blockly.Tooltip.MARGINS) {\n      // Falling off the right edge of the screen;\n      // clamp the tooltip on the edge.\n      anchorX = windowWidth - Blockly.Tooltip.DIV.offsetWidth -\n          2 * Blockly.Tooltip.MARGINS;\n    }\n  }\n  Blockly.Tooltip.DIV.style.top = anchorY + 'px';\n  Blockly.Tooltip.DIV.style.left = anchorX + 'px';\n};\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An SVG that floats on top of the workspace.\n * Blocks are moved into this SVG during a drag, improving performance.\n * The entire SVG is translated using CSS translation instead of SVG so the\n * blocks are never repainted during drag improving performance.\n * @author katelyn@google.com (Katelyn Mann)\n */\n\n'use strict';\n\ngoog.provide('Blockly.WorkspaceDragSurfaceSvg');\n\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * Blocks are moved into this SVG during a drag, improving performance.\n * The entire SVG is translated using CSS transforms instead of SVG so the\n * blocks are never repainted during drag improving performance.\n * @param {!Element} container Containing element.\n * @constructor\n */\nBlockly.WorkspaceDragSurfaceSvg = function(container) {\n  this.container_ = container;\n  this.createDom();\n};\n\n/**\n * The SVG drag surface. Set once by Blockly.WorkspaceDragSurfaceSvg.createDom.\n * @type {SVGElement}\n * @private\n */\nBlockly.WorkspaceDragSurfaceSvg.prototype.SVG_ = null;\n\n/**\n * Containing HTML element; parent of the workspace and the drag surface.\n * @type {Element}\n * @private\n */\nBlockly.WorkspaceDragSurfaceSvg.prototype.container_ = null;\n\n/**\n * Create the drag surface and inject it into the container.\n */\nBlockly.WorkspaceDragSurfaceSvg.prototype.createDom = function() {\n  if (this.SVG_) {\n    return;  // Already created.\n  }\n\n  /**\n  * Dom structure when the workspace is being dragged. If there is no drag in\n  * progress, the SVG is empty and display: none.\n  * <svg class=\"blocklyWsDragSurface\" style=transform:translate3d(...)>\n  *   <g class=\"blocklyBlockCanvas\"></g>\n  *   <g class=\"blocklyBubbleCanvas\">/g>\n  * </svg>\n  */\n  this.SVG_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.SVG,\n      {\n        'xmlns': Blockly.utils.dom.SVG_NS,\n        'xmlns:html': Blockly.utils.dom.HTML_NS,\n        'xmlns:xlink': Blockly.utils.dom.XLINK_NS,\n        'version': '1.1',\n        'class': 'blocklyWsDragSurface blocklyOverflowVisible'\n      }, null);\n  this.container_.appendChild(this.SVG_);\n};\n\n/**\n * Translate the entire drag surface during a drag.\n * We translate the drag surface instead of the blocks inside the surface\n * so that the browser avoids repainting the SVG.\n * Because of this, the drag coordinates must be adjusted by scale.\n * @param {number} x X translation for the entire surface\n * @param {number} y Y translation for the entire surface\n * @package\n */\nBlockly.WorkspaceDragSurfaceSvg.prototype.translateSurface = function(x, y) {\n  // This is a work-around to prevent a the blocks from rendering\n  // fuzzy while they are being moved on the drag surface.\n  var fixedX = x.toFixed(0);\n  var fixedY = y.toFixed(0);\n\n  this.SVG_.style.display = 'block';\n  Blockly.utils.dom.setCssTransform(\n      this.SVG_, 'translate3d(' + fixedX + 'px, ' + fixedY + 'px, 0px)');\n};\n\n/**\n * Reports the surface translation in scaled workspace coordinates.\n * Use this when finishing a drag to return blocks to the correct position.\n * @return {!Blockly.utils.Coordinate} Current translation of the surface\n * @package\n */\nBlockly.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation = function() {\n  return Blockly.utils.getRelativeXY(/** @type {!SVGElement} */ (this.SVG_));\n};\n\n/**\n * Move the blockCanvas and bubbleCanvas out of the surface SVG and on to\n * newSurface.\n * @param {SVGElement} newSurface The element to put the drag surface contents\n *     into.\n * @package\n */\nBlockly.WorkspaceDragSurfaceSvg.prototype.clearAndHide = function(newSurface) {\n  if (!newSurface) {\n    throw Error('Couldn\\'t clear and hide the drag surface: missing ' +\n        'new surface.');\n  }\n  var blockCanvas = /** @type {!Element} */ (this.SVG_.childNodes[0]);\n  var bubbleCanvas = /** @type {!Element} */ (this.SVG_.childNodes[1]);\n  if (!blockCanvas || !bubbleCanvas ||\n      !Blockly.utils.dom.hasClass(blockCanvas, 'blocklyBlockCanvas') ||\n      !Blockly.utils.dom.hasClass(bubbleCanvas, 'blocklyBubbleCanvas')) {\n    throw Error('Couldn\\'t clear and hide the drag surface. ' +\n        'A node was missing.');\n  }\n\n  // If there is a previous sibling, put the blockCanvas back right afterwards,\n  // otherwise insert it as the first child node in newSurface.\n  if (this.previousSibling_ != null) {\n    Blockly.utils.dom.insertAfter(blockCanvas, this.previousSibling_);\n  } else {\n    newSurface.insertBefore(blockCanvas, newSurface.firstChild);\n  }\n\n  // Reattach the bubble canvas after the blockCanvas.\n  Blockly.utils.dom.insertAfter(bubbleCanvas, blockCanvas);\n  // Hide the drag surface.\n  this.SVG_.style.display = 'none';\n  if (this.SVG_.childNodes.length) {\n    throw Error('Drag surface was not cleared.');\n  }\n  Blockly.utils.dom.setCssTransform(this.SVG_, '');\n  this.previousSibling_ = null;\n};\n\n/**\n * Set the SVG to have the block canvas and bubble canvas in it and then\n * show the surface.\n * @param {!SVGElement} blockCanvas The block canvas <g> element from the\n *     workspace.\n * @param {!SVGElement} bubbleCanvas The <g> element that contains the bubbles.\n * @param {Element} previousSibling The element to insert the block canvas and\n       bubble canvas after when it goes back in the DOM at the end of a drag.\n * @param {number} width The width of the workspace SVG element.\n * @param {number} height The height of the workspace SVG element.\n * @param {number} scale The scale of the workspace being dragged.\n * @package\n */\nBlockly.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow = function(\n    blockCanvas, bubbleCanvas, previousSibling, width, height, scale) {\n  if (this.SVG_.childNodes.length) {\n    throw Error('Already dragging a block.');\n  }\n  this.previousSibling_ = previousSibling;\n  // Make sure the blocks and bubble canvas are scaled appropriately.\n  blockCanvas.setAttribute('transform', 'translate(0, 0) scale(' + scale + ')');\n  bubbleCanvas.setAttribute(\n      'transform', 'translate(0, 0) scale(' + scale + ')');\n  this.SVG_.setAttribute('width', width);\n  this.SVG_.setAttribute('height', height);\n  this.SVG_.appendChild(blockCanvas);\n  this.SVG_.appendChild(bubbleCanvas);\n  this.SVG_.style.display = 'block';\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing an AST node.\n * Used to traverse the Blockly AST.\n */\n'use strict';\n\ngoog.provide('Blockly.ASTNode');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.utils.Coordinate');\n\ngoog.requireType('Blockly.IASTNodeLocation');\ngoog.requireType('Blockly.IASTNodeLocationWithBlock');\n\n\n/**\n * Class for an AST node.\n * It is recommended that you use one of the createNode methods instead of\n * creating a node directly.\n * @param {string} type The type of the location.\n *     Must be in Blockly.ASTNode.types.\n * @param {!Blockly.IASTNodeLocation} location The position in the AST.\n * @param {!Blockly.ASTNode.Params=} opt_params Optional dictionary of options.\n * @constructor\n */\nBlockly.ASTNode = function(type, location, opt_params) {\n  if (!location) {\n    throw Error('Cannot create a node without a location.');\n  }\n\n  /**\n   * The type of the location.\n   * One of Blockly.ASTNode.types\n   * @type {string}\n   * @private\n   */\n  this.type_ = type;\n\n  /**\n   * Whether the location points to a connection.\n   * @type {boolean}\n   * @private\n   */\n  this.isConnection_ = Blockly.ASTNode.isConnectionType_(type);\n\n  /**\n   * The location of the AST node.\n   * @type {!Blockly.IASTNodeLocation}\n   * @private\n   */\n  this.location_ = location;\n\n  /**\n   * The coordinate on the workspace.\n   * @type {Blockly.utils.Coordinate}\n   * @private\n   */\n  this.wsCoordinate_ = null;\n\n  this.processParams_(opt_params || null);\n};\n\n/**\n * @typedef {{\n *     wsCoordinate: Blockly.utils.Coordinate\n * }}\n */\nBlockly.ASTNode.Params;\n\n/**\n * Object holding different types for an AST node.\n * @enum {string}\n */\nBlockly.ASTNode.types = {\n  FIELD: 'field',\n  BLOCK: 'block',\n  INPUT: 'input',\n  OUTPUT: 'output',\n  NEXT: 'next',\n  PREVIOUS: 'previous',\n  STACK: 'stack',\n  WORKSPACE: 'workspace'\n};\n\n/**\n * True to navigate to all fields. False to only navigate to clickable fields.\n * @type {boolean}\n */\nBlockly.ASTNode.NAVIGATE_ALL_FIELDS = false;\n\n/**\n * The default y offset to use when moving the cursor from a stack to the\n * workspace.\n * @type {number}\n * @private\n */\nBlockly.ASTNode.DEFAULT_OFFSET_Y = -20;\n\n/**\n * Whether an AST node of the given type points to a connection.\n * @param {string} type The type to check.  One of Blockly.ASTNode.types.\n * @return {boolean} True if a node of the given type points to a connection.\n * @private\n */\nBlockly.ASTNode.isConnectionType_ = function(type) {\n  switch (type) {\n    case Blockly.ASTNode.types.PREVIOUS:\n    case Blockly.ASTNode.types.NEXT:\n    case Blockly.ASTNode.types.INPUT:\n    case Blockly.ASTNode.types.OUTPUT:\n      return true;\n  }\n  return false;\n};\n\n/**\n * Create an AST node pointing to a field.\n * @param {Blockly.Field} field The location of the AST node.\n * @return {Blockly.ASTNode} An AST node pointing to a field.\n */\nBlockly.ASTNode.createFieldNode = function(field) {\n  if (!field) {\n    return null;\n  }\n  return new Blockly.ASTNode(Blockly.ASTNode.types.FIELD, field);\n};\n\n/**\n * Creates an AST node pointing to a connection. If the connection has a parent\n * input then create an AST node of type input that will hold the connection.\n * @param {Blockly.Connection} connection This is the connection the node will\n *     point to.\n * @return {Blockly.ASTNode} An AST node pointing to a connection.\n */\nBlockly.ASTNode.createConnectionNode = function(connection) {\n  if (!connection) {\n    return null;\n  }\n  if (connection.type == Blockly.INPUT_VALUE) {\n    return Blockly.ASTNode.createInputNode(connection.getParentInput());\n  } else if (connection.type == Blockly.NEXT_STATEMENT &&\n      connection.getParentInput()) {\n    return Blockly.ASTNode.createInputNode(connection.getParentInput());\n  } else if (connection.type == Blockly.NEXT_STATEMENT) {\n    return new Blockly.ASTNode(Blockly.ASTNode.types.NEXT, connection);\n  } else if (connection.type == Blockly.OUTPUT_VALUE) {\n    return new Blockly.ASTNode(Blockly.ASTNode.types.OUTPUT, connection);\n  } else if (connection.type == Blockly.PREVIOUS_STATEMENT) {\n    return new Blockly.ASTNode(Blockly.ASTNode.types.PREVIOUS, connection);\n  }\n  return null;\n};\n\n/**\n * Creates an AST node pointing to an input. Stores the input connection as the\n *     location.\n * @param {Blockly.Input} input The input used to create an AST node.\n * @return {Blockly.ASTNode} An AST node pointing to a input.\n */\nBlockly.ASTNode.createInputNode = function(input) {\n  if (!input || !input.connection) {\n    return null;\n  }\n  return new Blockly.ASTNode(Blockly.ASTNode.types.INPUT, input.connection);\n};\n\n/**\n * Creates an AST node pointing to a block.\n * @param {Blockly.Block} block The block used to create an AST node.\n * @return {Blockly.ASTNode} An AST node pointing to a block.\n */\nBlockly.ASTNode.createBlockNode = function(block) {\n  if (!block) {\n    return null;\n  }\n  return new Blockly.ASTNode(Blockly.ASTNode.types.BLOCK, block);\n};\n\n/**\n * Create an AST node of type stack. A stack, represented by its top block, is\n *     the set of all blocks connected to a top block, including the top block.\n * @param {Blockly.Block} topBlock A top block has no parent and can be found\n *     in the list returned by workspace.getTopBlocks().\n * @return {Blockly.ASTNode} An AST node of type stack that points to the top\n *     block on the stack.\n */\nBlockly.ASTNode.createStackNode = function(topBlock) {\n  if (!topBlock) {\n    return null;\n  }\n  return new Blockly.ASTNode(Blockly.ASTNode.types.STACK, topBlock);\n};\n\n/**\n * Creates an AST node pointing to a workspace.\n * @param {!Blockly.Workspace} workspace The workspace that we are on.\n * @param {Blockly.utils.Coordinate} wsCoordinate The position on the workspace\n *     for this node.\n * @return {Blockly.ASTNode} An AST node pointing to a workspace and a position\n *     on the workspace.\n */\nBlockly.ASTNode.createWorkspaceNode = function(workspace, wsCoordinate) {\n  if (!wsCoordinate || !workspace) {\n    return null;\n  }\n  var params = {\n    wsCoordinate: wsCoordinate\n  };\n  return new Blockly.ASTNode(\n      Blockly.ASTNode.types.WORKSPACE, workspace, params);\n};\n\n/**\n * Creates an AST node for the top position on a block.\n * This is either an output connection, previous connection, or block.\n * @param {!Blockly.Block} block The block to find the top most AST node on.\n * @return {Blockly.ASTNode} The AST node holding the top most position on the\n *     block.\n */\nBlockly.ASTNode.createTopNode = function(block) {\n  var astNode;\n  var topConnection = block.previousConnection || block.outputConnection;\n  if (topConnection) {\n    astNode = Blockly.ASTNode.createConnectionNode(topConnection);\n  } else {\n    astNode = Blockly.ASTNode.createBlockNode(block);\n  }\n  return astNode;\n};\n\n/**\n * Parse the optional parameters.\n * @param {?Blockly.ASTNode.Params} params The user specified parameters.\n * @private\n */\nBlockly.ASTNode.prototype.processParams_ = function(params) {\n  if (!params) {\n    return;\n  }\n  if (params.wsCoordinate) {\n    this.wsCoordinate_ = params.wsCoordinate;\n  }\n};\n\n/**\n * Gets the value pointed to by this node.\n * It is the callers responsibility to check the node type to figure out what\n * type of object they get back from this.\n * @return {!Blockly.IASTNodeLocation} The current field, connection, workspace, or\n *     block the cursor is on.\n */\nBlockly.ASTNode.prototype.getLocation = function() {\n  return this.location_;\n};\n\n/**\n * The type of the current location.\n * One of Blockly.ASTNode.types\n * @return {string} The type of the location.\n */\nBlockly.ASTNode.prototype.getType = function() {\n  return this.type_;\n};\n\n/**\n * The coordinate on the workspace.\n * @return {Blockly.utils.Coordinate} The workspace coordinate or null if the\n *     location is not a workspace.\n */\nBlockly.ASTNode.prototype.getWsCoordinate = function() {\n  return this.wsCoordinate_;\n};\n\n/**\n * Whether the node points to a connection.\n * @return {boolean} [description]\n * @package\n */\nBlockly.ASTNode.prototype.isConnection = function() {\n  return this.isConnection_;\n};\n\n/**\n * Given an input find the next editable field or an input with a non null\n * connection in the same block. The current location must be an input\n * connection.\n * @return {Blockly.ASTNode} The AST node holding the next field or connection\n *     or null if there is no editable field or input connection after the given\n *     input.\n * @private\n */\nBlockly.ASTNode.prototype.findNextForInput_ = function() {\n  var location = /** @type {!Blockly.Connection} */ (this.location_);\n  var parentInput = location.getParentInput();\n  var block = parentInput.getSourceBlock();\n  var curIdx = block.inputList.indexOf(parentInput);\n  for (var i = curIdx + 1, input; (input = block.inputList[i]); i++) {\n    var fieldRow = input.fieldRow;\n    for (var j = 0, field; (field = fieldRow[j]); j++) {\n      if (field.isClickable() || Blockly.ASTNode.NAVIGATE_ALL_FIELDS) {\n        return Blockly.ASTNode.createFieldNode(field);\n      }\n    }\n    if (input.connection) {\n      return Blockly.ASTNode.createInputNode(input);\n    }\n  }\n  return null;\n};\n\n/**\n * Given a field find the next editable field or an input with a non null\n * connection in the same block. The current location must be a field.\n * @return {Blockly.ASTNode} The AST node pointing to the next field or\n *     connection or null if there is no editable field or input connection\n *     after the given input.\n * @private\n */\nBlockly.ASTNode.prototype.findNextForField_ = function() {\n  var location = /** @type {!Blockly.Field} */ (this.location_);\n  var input = location.getParentInput();\n  var block = location.getSourceBlock();\n  var curIdx = block.inputList.indexOf(/** @type {!Blockly.Input} */ (input));\n  var fieldIdx = input.fieldRow.indexOf(location) + 1;\n  for (var i = curIdx, newInput; (newInput = block.inputList[i]); i++) {\n    var fieldRow = newInput.fieldRow;\n    while (fieldIdx < fieldRow.length) {\n      if (fieldRow[fieldIdx].isClickable() || Blockly.ASTNode.NAVIGATE_ALL_FIELDS) {\n        return Blockly.ASTNode.createFieldNode(fieldRow[fieldIdx]);\n      }\n      fieldIdx++;\n    }\n    fieldIdx = 0;\n    if (newInput.connection) {\n      return Blockly.ASTNode.createInputNode(newInput);\n    }\n  }\n  return null;\n};\n\n/**\n * Given an input find the previous editable field or an input with a non null\n * connection in the same block. The current location must be an input\n * connection.\n * @return {Blockly.ASTNode} The AST node holding the previous field or\n *     connection.\n * @private\n */\nBlockly.ASTNode.prototype.findPrevForInput_ = function() {\n  var location = /** @type {!Blockly.Connection} */ (this.location_);\n  var parentInput = location.getParentInput();\n  var block = parentInput.getSourceBlock();\n  var curIdx = block.inputList.indexOf(parentInput);\n  for (var i = curIdx, input; (input = block.inputList[i]); i--) {\n    if (input.connection && input !== parentInput) {\n      return Blockly.ASTNode.createInputNode(input);\n    }\n    var fieldRow = input.fieldRow;\n    for (var j = fieldRow.length - 1, field; (field = fieldRow[j]); j--) {\n      if (field.isClickable() || Blockly.ASTNode.NAVIGATE_ALL_FIELDS) {\n        return Blockly.ASTNode.createFieldNode(field);\n      }\n    }\n  }\n  return null;\n};\n\n/**\n * Given a field find the previous editable field or an input with a non null\n * connection in the same block. The current location must be a field.\n * @return {Blockly.ASTNode} The AST node holding the previous input or field.\n * @private\n */\nBlockly.ASTNode.prototype.findPrevForField_ = function() {\n  var location = /** @type {!Blockly.Field} */ (this.location_);\n  var parentInput = location.getParentInput();\n  var block = location.getSourceBlock();\n  var curIdx = block.inputList.indexOf(\n      /** @type {!Blockly.Input} */ (parentInput));\n  var fieldIdx = parentInput.fieldRow.indexOf(location) - 1;\n  for (var i = curIdx, input; (input = block.inputList[i]); i--) {\n    if (input.connection && input !== parentInput) {\n      return Blockly.ASTNode.createInputNode(input);\n    }\n    var fieldRow = input.fieldRow;\n    while (fieldIdx > -1) {\n      if (fieldRow[fieldIdx].isClickable() || Blockly.ASTNode.NAVIGATE_ALL_FIELDS) {\n        return Blockly.ASTNode.createFieldNode(fieldRow[fieldIdx]);\n      }\n      fieldIdx--;\n    }\n    // Reset the fieldIdx to the length of the field row of the previous input.\n    if (i - 1 >= 0) {\n      fieldIdx = block.inputList[i - 1].fieldRow.length - 1;\n    }\n  }\n  return null;\n};\n\n/**\n * Navigate between stacks of blocks on the workspace.\n * @param {boolean} forward True to go forward. False to go backwards.\n * @return {Blockly.ASTNode} The first block of the next stack or null if there\n * are no blocks on the workspace.\n * @private\n */\nBlockly.ASTNode.prototype.navigateBetweenStacks_ = function(forward) {\n  var curLocation = this.getLocation();\n  if (!(curLocation instanceof Blockly.Block)) {\n    curLocation = /** @type {!Blockly.IASTNodeLocationWithBlock} */ (\n      curLocation).getSourceBlock();\n  }\n  if (!curLocation || !curLocation.workspace) {\n    return null;\n  }\n  var curRoot = curLocation.getRootBlock();\n  var topBlocks = curRoot.workspace.getTopBlocks(true);\n  for (var i = 0, topBlock; (topBlock = topBlocks[i]); i++) {\n    if (curRoot.id == topBlock.id) {\n      var offset = forward ? 1 : -1;\n      var resultIndex = i + offset;\n      if (resultIndex == -1 || resultIndex == topBlocks.length) {\n        return null;\n      }\n      return Blockly.ASTNode.createStackNode(topBlocks[resultIndex]);\n    }\n  }\n  throw Error('Couldn\\'t find ' + (forward ? 'next' : 'previous') + ' stack?!');\n};\n\n/**\n * Finds the top most AST node for a given block.\n * This is either the previous connection, output connection or block depending\n * on what kind of connections the block has.\n * @param {!Blockly.Block} block The block that we want to find the top\n *     connection on.\n * @return {!Blockly.ASTNode} The AST node containing the top connection.\n * @private\n */\nBlockly.ASTNode.prototype.findTopASTNodeForBlock_ = function(block) {\n  var topConnection = block.previousConnection || block.outputConnection;\n  if (topConnection) {\n    return /** @type {!Blockly.ASTNode} */ (Blockly.ASTNode.createConnectionNode(\n        topConnection));\n  } else {\n    return /** @type {!Blockly.ASTNode} */ (Blockly.ASTNode.createBlockNode(\n        block));\n  }\n};\n\n/**\n * Get the AST node pointing to the input that the block is nested under or if\n * the block is not nested then get the stack AST node.\n * @param {Blockly.Block} block The source block of the current location.\n * @return {Blockly.ASTNode} The AST node pointing to the input connection or\n *     the top block of the stack this block is in.\n * @private\n */\nBlockly.ASTNode.prototype.getOutAstNodeForBlock_ = function(block) {\n  if (!block) {\n    return null;\n  }\n  var topBlock;\n  // If the block doesn't have a previous connection then it is the top of the\n  // substack.\n  topBlock = block.getTopStackBlock();\n  var topConnection = topBlock.previousConnection || topBlock.outputConnection;\n  // If the top connection has a parentInput, create an AST node pointing to\n  // that input.\n  if (topConnection && topConnection.targetConnection &&\n      topConnection.targetConnection.getParentInput()) {\n    return Blockly.ASTNode.createInputNode(\n        topConnection.targetConnection.getParentInput());\n  } else {\n    // Go to stack level if you are not underneath an input.\n    return Blockly.ASTNode.createStackNode(topBlock);\n  }\n};\n\n/**\n * Find the first editable field or input with a connection on a given block.\n * @param {!Blockly.Block} block The source block of the current location.\n * @return {Blockly.ASTNode} An AST node pointing to the first field or input.\n * Null if there are no editable fields or inputs with connections on the block.\n * @private\n */\nBlockly.ASTNode.prototype.findFirstFieldOrInput_ = function(block) {\n  var inputs = block.inputList;\n  for (var i = 0, input; (input = inputs[i]); i++) {\n    var fieldRow = input.fieldRow;\n    for (var j = 0, field; (field = fieldRow[j]); j++) {\n      if (field.isClickable() || Blockly.ASTNode.NAVIGATE_ALL_FIELDS) {\n        return Blockly.ASTNode.createFieldNode(field);\n      }\n    }\n    if (input.connection) {\n      return Blockly.ASTNode.createInputNode(input);\n    }\n  }\n  return null;\n};\n\n/**\n * Finds the source block of the location of this node.\n * @return {Blockly.Block} The source block of the location, or null if the node\n * is of type workspace.\n */\nBlockly.ASTNode.prototype.getSourceBlock = function() {\n  if (this.getType() === Blockly.ASTNode.types.BLOCK) {\n    return /** @type {Blockly.Block} */ (this.getLocation());\n  } else if (this.getType() === Blockly.ASTNode.types.STACK) {\n    return /** @type {Blockly.Block} */ (this.getLocation());\n  } else if (this.getType() === Blockly.ASTNode.types.WORKSPACE) {\n    return null;\n  } else {\n    return /** @type {Blockly.IASTNodeLocationWithBlock} */ (\n      this.getLocation()).getSourceBlock();\n  }\n};\n\n/**\n * Find the element to the right of the current element in the AST.\n * @return {Blockly.ASTNode} An AST node that wraps the next field, connection,\n *     block, or workspace. Or null if there is no node to the right.\n */\nBlockly.ASTNode.prototype.next = function() {\n  switch (this.type_) {\n    case Blockly.ASTNode.types.STACK:\n      return this.navigateBetweenStacks_(true);\n\n    case Blockly.ASTNode.types.OUTPUT:\n      var connection = /** @type {!Blockly.Connection} */ (this.location_);\n      return Blockly.ASTNode.createBlockNode(connection.getSourceBlock());\n\n    case Blockly.ASTNode.types.FIELD:\n      return this.findNextForField_();\n\n    case Blockly.ASTNode.types.INPUT:\n      return this.findNextForInput_();\n\n    case Blockly.ASTNode.types.BLOCK:\n      var block = /** @type {!Blockly.Block} */ (this.location_);\n      var nextConnection = block.nextConnection;\n      return Blockly.ASTNode.createConnectionNode(nextConnection);\n\n    case Blockly.ASTNode.types.PREVIOUS:\n      var connection = /** @type {!Blockly.Connection} */ (this.location_);\n      return Blockly.ASTNode.createBlockNode(connection.getSourceBlock());\n\n    case Blockly.ASTNode.types.NEXT:\n      var connection = /** @type {!Blockly.Connection} */ (this.location_);\n      var targetConnection = connection.targetConnection;\n      return Blockly.ASTNode.createConnectionNode(targetConnection);\n  }\n\n  return null;\n};\n\n/**\n * Find the element one level below and all the way to the left of the current\n * location.\n * @return {Blockly.ASTNode} An AST node that wraps the next field, connection,\n * workspace, or block. Or null if there is nothing below this node.\n */\nBlockly.ASTNode.prototype.in = function() {\n  switch (this.type_) {\n    case Blockly.ASTNode.types.WORKSPACE:\n      var workspace = /** @type {!Blockly.Workspace} */ (this.location_);\n      var topBlocks = workspace.getTopBlocks(true);\n      if (topBlocks.length > 0) {\n        return Blockly.ASTNode.createStackNode(topBlocks[0]);\n      }\n      break;\n\n    case Blockly.ASTNode.types.STACK:\n      var block = /** @type {!Blockly.Block} */ (this.location_);\n      return this.findTopASTNodeForBlock_(block);\n\n    case Blockly.ASTNode.types.BLOCK:\n      var block = /** @type {!Blockly.Block} */ (this.location_);\n      return this.findFirstFieldOrInput_(block);\n\n    case Blockly.ASTNode.types.INPUT:\n      var connection = /** @type {!Blockly.Connection} */ (this.location_);\n      var targetConnection = connection.targetConnection;\n      return Blockly.ASTNode.createConnectionNode(targetConnection);\n  }\n\n  return null;\n};\n\n/**\n * Find the element to the left of the current element in the AST.\n * @return {Blockly.ASTNode} An AST node that wraps the previous field,\n * connection, workspace or block. Or null if no node exists to the left.\n * null.\n */\nBlockly.ASTNode.prototype.prev = function() {\n  switch (this.type_) {\n    case Blockly.ASTNode.types.STACK:\n      return this.navigateBetweenStacks_(false);\n\n    case Blockly.ASTNode.types.OUTPUT:\n      return null;\n\n    case Blockly.ASTNode.types.FIELD:\n      return this.findPrevForField_();\n\n    case Blockly.ASTNode.types.INPUT:\n      return this.findPrevForInput_();\n\n    case Blockly.ASTNode.types.BLOCK:\n      var block = /** @type {!Blockly.Block} */ (this.location_);\n      var topConnection = block.previousConnection || block.outputConnection;\n      return Blockly.ASTNode.createConnectionNode(topConnection);\n\n    case Blockly.ASTNode.types.PREVIOUS:\n      var connection = /** @type {!Blockly.Connection} */ (this.location_);\n      var targetConnection = connection.targetConnection;\n      if (targetConnection && !targetConnection.getParentInput()) {\n        return Blockly.ASTNode.createConnectionNode(targetConnection);\n      }\n      break;\n\n    case Blockly.ASTNode.types.NEXT:\n      var connection = /** @type {!Blockly.Connection} */ (this.location_);\n      return Blockly.ASTNode.createBlockNode(connection.getSourceBlock());\n  }\n\n  return null;\n};\n\n/**\n * Find the next element that is one position above and all the way to the left\n * of the current location.\n * @return {Blockly.ASTNode} An AST node that wraps the next field, connection,\n *     workspace or block. Or null if we are at the workspace level.\n */\nBlockly.ASTNode.prototype.out = function() {\n  switch (this.type_) {\n    case Blockly.ASTNode.types.STACK:\n      var block = /** @type {!Blockly.Block} */ (this.location_);\n      var blockPos = block.getRelativeToSurfaceXY();\n      // TODO: Make sure this is in the bounds of the workspace.\n      var wsCoordinate = new Blockly.utils.Coordinate(\n          blockPos.x, blockPos.y + Blockly.ASTNode.DEFAULT_OFFSET_Y);\n      return Blockly.ASTNode.createWorkspaceNode(block.workspace, wsCoordinate);\n\n    case Blockly.ASTNode.types.OUTPUT:\n      var connection = /** @type {!Blockly.Connection} */ (this.location_);\n      var target = connection.targetConnection;\n      if (target) {\n        return Blockly.ASTNode.createConnectionNode(target);\n      }\n      return Blockly.ASTNode.createStackNode(connection.getSourceBlock());\n\n    case Blockly.ASTNode.types.FIELD:\n      var field = /** @type {!Blockly.Field} */ (this.location_);\n      return Blockly.ASTNode.createBlockNode(field.getSourceBlock());\n\n    case Blockly.ASTNode.types.INPUT:\n      var connection = /** @type {!Blockly.Connection} */ (this.location_);\n      return Blockly.ASTNode.createBlockNode(connection.getSourceBlock());\n\n    case Blockly.ASTNode.types.BLOCK:\n      var block = /** @type {!Blockly.Block} */ (this.location_);\n      return this.getOutAstNodeForBlock_(block);\n\n    case Blockly.ASTNode.types.PREVIOUS:\n      var connection = /** @type {!Blockly.Connection} */ (this.location_);\n      return this.getOutAstNodeForBlock_(connection.getSourceBlock());\n\n    case Blockly.ASTNode.types.NEXT:\n      var connection = /** @type {!Blockly.Connection} */ (this.location_);\n      return this.getOutAstNodeForBlock_(connection.getSourceBlock());\n  }\n\n  return null;\n};\n","/**\n * @license\n * Copyright 2013 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A mapping of block type names to block prototype objects.\n * @author spertus@google.com (Ellen Spertus)\n */\n'use strict';\n\n/**\n * A mapping of block type names to block prototype objects.\n * @name Blockly.Blocks\n */\ngoog.provide('Blockly.Blocks');\n\n/**\n * A mapping of block type names to block prototype objects.\n * @type {!Object.<string,Object>}\n */\nBlockly.Blocks = Object.create(null);\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Helper function for warning developers about deprecations.\n * This method is not specific to Blockly.\n * @author fenichel@google.com (Rachel Fenichel);\n */\n'use strict';\n\ngoog.provide('Blockly.utils.deprecation');\n\n/**\n * Warn developers that a function is deprecated.\n * @param {string} functionName The name of the function.\n * @param {string} deprecationDate The date when the function was deprecated.\n *     Prefer 'month yyyy' or 'quarter yyyy' format.\n * @param {string} deletionDate The date when the function will be deleted, in\n *     the same format as the deprecation date.\n * @param {string=} opt_use The name of a function to use instead, if any.\n * @package\n */\nBlockly.utils.deprecation.warn = function(\n    functionName, deprecationDate, deletionDate, opt_use) {\n  var msg = functionName + ' was deprecated on ' + deprecationDate +\n        ' and will be deleted on ' + deletionDate + '.';\n  if (opt_use) {\n    msg += '\\nUse ' + opt_use + ' instead.';\n  }\n  console.warn(msg);\n};\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Components for creating connections between blocks.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Connection');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockMove');\ngoog.require('Blockly.utils.deprecation');\ngoog.require('Blockly.Xml');\n\ngoog.requireType('Blockly.IASTNodeLocationWithBlock');\ngoog.requireType('Blockly.IConnectionChecker');\n\n\n/**\n * Class for a connection between blocks.\n * @param {!Blockly.Block} source The block establishing this connection.\n * @param {number} type The type of the connection.\n * @constructor\n * @implements {Blockly.IASTNodeLocationWithBlock}\n */\nBlockly.Connection = function(source, type) {\n  /**\n   * @type {!Blockly.Block}\n   * @protected\n   */\n  this.sourceBlock_ = source;\n  /** @type {number} */\n  this.type = type;\n};\n\n/**\n * Constants for checking whether two connections are compatible.\n */\nBlockly.Connection.CAN_CONNECT = 0;\nBlockly.Connection.REASON_SELF_CONNECTION = 1;\nBlockly.Connection.REASON_WRONG_TYPE = 2;\nBlockly.Connection.REASON_TARGET_NULL = 3;\nBlockly.Connection.REASON_CHECKS_FAILED = 4;\nBlockly.Connection.REASON_DIFFERENT_WORKSPACES = 5;\nBlockly.Connection.REASON_SHADOW_PARENT = 6;\nBlockly.Connection.REASON_DRAG_CHECKS_FAILED = 7;\n\n/**\n * Connection this connection connects to.  Null if not connected.\n * @type {Blockly.Connection}\n */\nBlockly.Connection.prototype.targetConnection = null;\n\n/**\n * Has this connection been disposed of?\n * @type {boolean}\n * @package\n */\nBlockly.Connection.prototype.disposed = false;\n\n/**\n * List of compatible value types.  Null if all types are compatible.\n * @type {Array}\n * @private\n */\nBlockly.Connection.prototype.check_ = null;\n\n/**\n * DOM representation of a shadow block, or null if none.\n * @type {Element}\n * @private\n */\nBlockly.Connection.prototype.shadowDom_ = null;\n\n/**\n * Horizontal location of this connection.\n * @type {number}\n * @package\n */\nBlockly.Connection.prototype.x = 0;\n\n/**\n * Vertical location of this connection.\n * @type {number}\n * @package\n */\nBlockly.Connection.prototype.y = 0;\n\n/**\n * Connect two connections together.  This is the connection on the superior\n * block.\n * @param {!Blockly.Connection} childConnection Connection on inferior block.\n * @protected\n */\nBlockly.Connection.prototype.connect_ = function(childConnection) {\n  var parentConnection = this;\n  var parentBlock = parentConnection.getSourceBlock();\n  var childBlock = childConnection.getSourceBlock();\n  // Disconnect any existing parent on the child connection.\n  if (childConnection.isConnected()) {\n    childConnection.disconnect();\n  }\n  if (parentConnection.isConnected()) {\n    // Other connection is already connected to something.\n    // Disconnect it and reattach it or bump it as needed.\n    var orphanBlock = parentConnection.targetBlock();\n    var shadowDom = parentConnection.getShadowDom();\n    // Temporarily set the shadow DOM to null so it does not respawn.\n    parentConnection.shadowDom_ = null;\n    // Displaced shadow blocks dissolve rather than reattaching or bumping.\n    if (orphanBlock.isShadow()) {\n      // Save the shadow block so that field values are preserved.\n      // This cast assumes that a block can not be both a shadow block and an insertion marker.\n      shadowDom = /** @type {!Element} */ (Blockly.Xml.blockToDom(orphanBlock));\n      orphanBlock.dispose(false);\n      orphanBlock = null;\n    } else if (parentConnection.type == Blockly.INPUT_VALUE) {\n      // Value connections.\n      // If female block is already connected, disconnect and bump the male.\n      if (!orphanBlock.outputConnection) {\n        throw Error('Orphan block does not have an output connection.');\n      }\n      // Attempt to reattach the orphan at the end of the newly inserted\n      // block.  Since this block may be a row, walk down to the end\n      // or to the first (and only) shadow block.\n      var connection = Blockly.Connection.lastConnectionInRow(\n          childBlock, orphanBlock);\n      if (connection) {\n        orphanBlock.outputConnection.connect(connection);\n        orphanBlock = null;\n      }\n    } else if (parentConnection.type == Blockly.NEXT_STATEMENT) {\n      // Statement connections.\n      // Statement blocks may be inserted into the middle of a stack.\n      // Split the stack.\n      if (!orphanBlock.previousConnection) {\n        throw Error('Orphan block does not have a previous connection.');\n      }\n      // Attempt to reattach the orphan at the bottom of the newly inserted\n      // block.  Since this block may be a stack, walk down to the end.\n      var newBlock = childBlock;\n      while (newBlock.nextConnection) {\n        var nextBlock = newBlock.getNextBlock();\n        if (nextBlock && !nextBlock.isShadow()) {\n          newBlock = nextBlock;\n        } else {\n          var checker = orphanBlock.workspace.connectionChecker;\n          if (checker.canConnect(\n              orphanBlock.previousConnection, newBlock.nextConnection, false)) {\n            newBlock.nextConnection.connect(orphanBlock.previousConnection);\n            orphanBlock = null;\n          }\n          break;\n        }\n      }\n    }\n    if (orphanBlock) {\n      // Unable to reattach orphan.\n      parentConnection.disconnect();\n      if (Blockly.Events.recordUndo) {\n        // Bump it off to the side after a moment.\n        var group = Blockly.Events.getGroup();\n        setTimeout(function() {\n          // Verify orphan hasn't been deleted or reconnected.\n          if (orphanBlock.workspace && !orphanBlock.getParent()) {\n            Blockly.Events.setGroup(group);\n            if (orphanBlock.outputConnection) {\n              orphanBlock.outputConnection.onFailedConnect(parentConnection);\n            } else if (orphanBlock.previousConnection) {\n              orphanBlock.previousConnection.onFailedConnect(parentConnection);\n            }\n            Blockly.Events.setGroup(false);\n          }\n        }, Blockly.BUMP_DELAY);\n      }\n    }\n    // Restore the shadow DOM.\n    parentConnection.shadowDom_ = shadowDom;\n  }\n\n  var event;\n  if (Blockly.Events.isEnabled()) {\n    event = new Blockly.Events.BlockMove(childBlock);\n  }\n  // Establish the connections.\n  Blockly.Connection.connectReciprocally_(parentConnection, childConnection);\n  // Demote the inferior block so that one is a child of the superior one.\n  childBlock.setParent(parentBlock);\n  if (event) {\n    event.recordNew();\n    Blockly.Events.fire(event);\n  }\n};\n\n/**\n * Dispose of this connection and deal with connected blocks.\n * @package\n */\nBlockly.Connection.prototype.dispose = function() {\n\n  // isConnected returns true for shadows and non-shadows.\n  if (this.isConnected()) {\n    // Destroy the attached shadow block & its children (if it exists).\n    this.setShadowDom(null);\n\n    var targetBlock = this.targetBlock();\n    if (targetBlock) {\n      // Disconnect the attached normal block.\n      targetBlock.unplug();\n    }\n  }\n\n  this.disposed = true;\n};\n\n/**\n * Get the source block for this connection.\n * @return {!Blockly.Block} The source block.\n */\nBlockly.Connection.prototype.getSourceBlock = function() {\n  return this.sourceBlock_;\n};\n\n/**\n * Does the connection belong to a superior block (higher in the source stack)?\n * @return {boolean} True if connection faces down or right.\n */\nBlockly.Connection.prototype.isSuperior = function() {\n  return this.type == Blockly.INPUT_VALUE ||\n      this.type == Blockly.NEXT_STATEMENT;\n};\n\n/**\n * Is the connection connected?\n * @return {boolean} True if connection is connected to another connection.\n */\nBlockly.Connection.prototype.isConnected = function() {\n  return !!this.targetConnection;\n};\n\n/**\n * Checks whether the current connection can connect with the target\n * connection.\n * @param {Blockly.Connection} target Connection to check compatibility with.\n * @return {number} Blockly.Connection.CAN_CONNECT if the connection is legal,\n *    an error code otherwise.\n * @deprecated July 2020. Will be deleted July 2021. Use the workspace's\n *     connectionChecker instead.\n */\nBlockly.Connection.prototype.canConnectWithReason = function(target) {\n  Blockly.utils.deprecation.warn(\n      'Connection.prototype.canConnectWithReason',\n      'July 2020',\n      'July 2021',\n      'the workspace\\'s connection checker');\n  return this.getConnectionChecker().canConnectWithReason(\n      this, target, false);\n};\n\n/**\n * Checks whether the current connection and target connection are compatible\n * and throws an exception if they are not.\n * @param {Blockly.Connection} target The connection to check compatibility\n *    with.\n * @package\n * @deprecated July 2020. Will be deleted July 2021. Use the workspace's\n *     connectionChecker instead.\n */\nBlockly.Connection.prototype.checkConnection = function(target) {\n  Blockly.utils.deprecation.warn(\n      'Connection.prototype.checkConnection',\n      'July 2020',\n      'July 2021',\n      'the workspace\\'s connection checker');\n  var checker = this.getConnectionChecker();\n  var reason = checker.canConnectWithReason(this, target, false);\n  if (reason != Blockly.Connection.CAN_CONNECT) {\n    throw new Error(checker.getErrorMessage(reason, this, target));\n  }\n};\n\n/**\n * Get the workspace's connection type checker object.\n * @return {!Blockly.IConnectionChecker} The connection type checker for the\n *     source block's workspace.\n * @package\n */\nBlockly.Connection.prototype.getConnectionChecker = function() {\n  return this.sourceBlock_.workspace.connectionChecker;\n};\n\n/**\n * Check if the two connections can be dragged to connect to each other.\n * @param {!Blockly.Connection} candidate A nearby connection to check.\n * @return {boolean} True if the connection is allowed, false otherwise.\n * @deprecated July 2020. Will be deleted July 2021. Use the workspace's\n *     connectionChecker instead.\n */\nBlockly.Connection.prototype.isConnectionAllowed = function(candidate) {\n  Blockly.utils.deprecation.warn(\n      'Connection.prototype.isConnectionAllowed',\n      'July 2020',\n      'July 2021',\n      'the workspace\\'s connection checker');\n  return this.getConnectionChecker().canConnect(this, candidate, true);\n};\n\n/**\n * Behavior after a connection attempt fails.\n * @param {!Blockly.Connection} _otherConnection Connection that this connection\n *     failed to connect to.\n * @package\n */\nBlockly.Connection.prototype.onFailedConnect = function(_otherConnection) {\n  // NOP\n};\n\n/**\n * Connect this connection to another connection.\n * @param {!Blockly.Connection} otherConnection Connection to connect to.\n */\nBlockly.Connection.prototype.connect = function(otherConnection) {\n  if (this.targetConnection == otherConnection) {\n    // Already connected together.  NOP.\n    return;\n  }\n\n  var checker = this.getConnectionChecker();\n  if (checker.canConnect(this, otherConnection, false)) {\n    var eventGroup = Blockly.Events.getGroup();\n    if (!eventGroup) {\n      Blockly.Events.setGroup(true);\n    }\n    // Determine which block is superior (higher in the source stack).\n    if (this.isSuperior()) {\n      // Superior block.\n      this.connect_(otherConnection);\n    } else {\n      // Inferior block.\n      otherConnection.connect_(this);\n    }\n    if (!eventGroup) {\n      Blockly.Events.setGroup(false);\n    }\n  }\n};\n\n/**\n * Update two connections to target each other.\n * @param {Blockly.Connection} first The first connection to update.\n * @param {Blockly.Connection} second The second connection to update.\n * @private\n */\nBlockly.Connection.connectReciprocally_ = function(first, second) {\n  if (!first || !second) {\n    throw Error('Cannot connect null connections.');\n  }\n  first.targetConnection = second;\n  second.targetConnection = first;\n};\n\n/**\n * Does the given block have one and only one connection point that will accept\n * an orphaned block?\n * @param {!Blockly.Block} block The superior block.\n * @param {!Blockly.Block} orphanBlock The inferior block.\n * @return {Blockly.Connection} The suitable connection point on 'block',\n *     or null.\n * @private\n */\nBlockly.Connection.singleConnection_ = function(block, orphanBlock) {\n  var connection = null;\n  var output = orphanBlock.outputConnection;\n  for (var i = 0; i < block.inputList.length; i++) {\n    var thisConnection = block.inputList[i].connection;\n    var typeChecker = output.getConnectionChecker();\n    if (thisConnection && thisConnection.type == Blockly.INPUT_VALUE &&\n        typeChecker.canConnect(output, thisConnection, false)) {\n      if (connection) {\n        return null;  // More than one connection.\n      }\n      connection = thisConnection;\n    }\n  }\n  return connection;\n};\n\n/**\n * Walks down a row a blocks, at each stage checking if there are any\n * connections that will accept the orphaned block.  If at any point there\n * are zero or multiple eligible connections, returns null.  Otherwise\n * returns the only input on the last block in the chain.\n * Terminates early for shadow blocks.\n * @param {!Blockly.Block} startBlock The block on which to start the search.\n * @param {!Blockly.Block} orphanBlock The block that is looking for a home.\n * @return {Blockly.Connection} The suitable connection point on the chain\n *     of blocks, or null.\n * @package\n */\nBlockly.Connection.lastConnectionInRow = function(startBlock, orphanBlock) {\n  var newBlock = startBlock;\n  var connection;\n  while ((connection = Blockly.Connection.singleConnection_(\n      /** @type {!Blockly.Block} */ (newBlock), orphanBlock))) {\n    newBlock = connection.targetBlock();\n    if (!newBlock || newBlock.isShadow()) {\n      return connection;\n    }\n  }\n  return null;\n};\n\n/**\n * Disconnect this connection.\n */\nBlockly.Connection.prototype.disconnect = function() {\n  var otherConnection = this.targetConnection;\n  if (!otherConnection) {\n    throw Error('Source connection not connected.');\n  }\n  if (otherConnection.targetConnection != this) {\n    throw Error('Target connection not connected to source connection.');\n  }\n  var parentBlock, childBlock, parentConnection;\n  if (this.isSuperior()) {\n    // Superior block.\n    parentBlock = this.sourceBlock_;\n    childBlock = otherConnection.getSourceBlock();\n    parentConnection = this;\n  } else {\n    // Inferior block.\n    parentBlock = otherConnection.getSourceBlock();\n    childBlock = this.sourceBlock_;\n    parentConnection = otherConnection;\n  }\n\n  var eventGroup = Blockly.Events.getGroup();\n  if (!eventGroup) {\n    Blockly.Events.setGroup(true);\n  }\n  this.disconnectInternal_(parentBlock, childBlock);\n  if (!childBlock.isShadow()) {\n    // If we were disconnecting a shadow, no need to spawn a new one.\n    parentConnection.respawnShadow_();\n  }\n  if (!eventGroup) {\n    Blockly.Events.setGroup(false);\n  }\n};\n\n/**\n * Disconnect two blocks that are connected by this connection.\n * @param {!Blockly.Block} parentBlock The superior block.\n * @param {!Blockly.Block} childBlock The inferior block.\n * @protected\n */\nBlockly.Connection.prototype.disconnectInternal_ = function(parentBlock,\n    childBlock) {\n  var event;\n  if (Blockly.Events.isEnabled()) {\n    event = new Blockly.Events.BlockMove(childBlock);\n  }\n  var otherConnection = this.targetConnection;\n  otherConnection.targetConnection = null;\n  this.targetConnection = null;\n  childBlock.setParent(null);\n  if (event) {\n    event.recordNew();\n    Blockly.Events.fire(event);\n  }\n};\n\n/**\n * Respawn the shadow block if there was one connected to the this connection.\n * @protected\n */\nBlockly.Connection.prototype.respawnShadow_ = function() {\n  var parentBlock = this.getSourceBlock();\n  var shadow = this.getShadowDom();\n  if (parentBlock.workspace && shadow) {\n    var blockShadow =\n        Blockly.Xml.domToBlock(shadow, parentBlock.workspace);\n    if (blockShadow.outputConnection) {\n      this.connect(blockShadow.outputConnection);\n    } else if (blockShadow.previousConnection) {\n      this.connect(blockShadow.previousConnection);\n    } else {\n      throw Error('Child block does not have output or previous statement.');\n    }\n  }\n};\n\n/**\n * Returns the block that this connection connects to.\n * @return {Blockly.Block} The connected block or null if none is connected.\n */\nBlockly.Connection.prototype.targetBlock = function() {\n  if (this.isConnected()) {\n    return this.targetConnection.getSourceBlock();\n  }\n  return null;\n};\n\n/**\n * Is this connection compatible with another connection with respect to the\n * value type system.  E.g. square_root(\"Hello\") is not compatible.\n * @param {!Blockly.Connection} otherConnection Connection to compare against.\n * @return {boolean} True if the connections share a type.\n * @deprecated July 2020. Will be deleted July 2021. Use the workspace's\n *     connectionChecker instead.\n */\nBlockly.Connection.prototype.checkType = function(otherConnection) {\n  Blockly.utils.deprecation.warn(\n      'Connection.prototype.checkType',\n      'October 2019',\n      'January 2021',\n      'the workspace\\'s connection checker');\n  return this.getConnectionChecker().canConnect(this, otherConnection,\n      false);\n};\n\n/**\n * Is this connection compatible with another connection with respect to the\n * value type system.  E.g. square_root(\"Hello\") is not compatible.\n * @param {!Blockly.Connection} otherConnection Connection to compare against.\n * @return {boolean} True if the connections share a type.\n * @private\n * @deprecated October 2019. Will be deleted January 2021. Use the workspace's\n *     connectionChecker instead.\n * @suppress {unusedPrivateMembers}\n */\nBlockly.Connection.prototype.checkType_ = function(otherConnection) {\n  Blockly.utils.deprecation.warn(\n      'Connection.prototype.checkType_',\n      'October 2019',\n      'January 2021',\n      'the workspace\\'s connection checker');\n  return this.checkType(otherConnection);\n};\n\n/**\n * Function to be called when this connection's compatible types have changed.\n * @protected\n */\nBlockly.Connection.prototype.onCheckChanged_ = function() {\n  // The new value type may not be compatible with the existing connection.\n  if (this.isConnected() && (!this.targetConnection ||\n      !this.getConnectionChecker().canConnect(\n          this, this.targetConnection, false))) {\n    var child = this.isSuperior() ? this.targetBlock() : this.sourceBlock_;\n    child.unplug();\n  }\n};\n\n/**\n * Change a connection's compatibility.\n * @param {?(string|!Array.<string>)} check Compatible value type or list of\n *     value types. Null if all types are compatible.\n * @return {!Blockly.Connection} The connection being modified\n *     (to allow chaining).\n */\nBlockly.Connection.prototype.setCheck = function(check) {\n  if (check) {\n    // Ensure that check is in an array.\n    if (!Array.isArray(check)) {\n      check = [check];\n    }\n    this.check_ = check;\n    this.onCheckChanged_();\n  } else {\n    this.check_ = null;\n  }\n  return this;\n};\n\n/**\n * Get a connection's compatibility.\n * @return {Array} List of compatible value types.\n *     Null if all types are compatible.\n * @public\n */\nBlockly.Connection.prototype.getCheck = function() {\n  return this.check_;\n};\n\n/**\n * Changes the connection's shadow block.\n * @param {Element} shadow DOM representation of a block or null.\n */\nBlockly.Connection.prototype.setShadowDom = function(shadow) {\n  this.shadowDom_ = shadow;\n  var target = this.targetBlock();\n  if (!target) {\n    this.respawnShadow_();\n  } else if (target.isShadow()) {\n    // The disconnect from dispose will automatically generate the new shadow.\n    target.dispose(false);\n    this.respawnShadow_();\n  }\n};\n\n/**\n * Returns the xml representation of the connection's shadow block.\n * @return {Element} Shadow DOM representation of a block or null.\n */\nBlockly.Connection.prototype.getShadowDom = function() {\n  return this.shadowDom_;\n};\n\n/**\n * Find all nearby compatible connections to this connection.\n * Type checking does not apply, since this function is used for bumping.\n *\n * Headless configurations (the default) do not have neighboring connection,\n * and always return an empty list (the default).\n * {@link Blockly.RenderedConnection} overrides this behavior with a list\n * computed from the rendered positioning.\n * @param {number} _maxLimit The maximum radius to another connection.\n * @return {!Array.<!Blockly.Connection>} List of connections.\n * @package\n */\nBlockly.Connection.prototype.neighbours = function(_maxLimit) {\n  return [];\n};\n\n/**\n * Get the parent input of a connection.\n * @return {Blockly.Input} The input that the connection belongs to or null if\n *     no parent exists.\n * @package\n */\nBlockly.Connection.prototype.getParentInput = function() {\n  var parentInput = null;\n  var block = this.sourceBlock_;\n  var inputs = block.inputList;\n  for (var idx = 0; idx < block.inputList.length; idx++) {\n    if (inputs[idx].connection === this) {\n      parentInput = inputs[idx];\n      break;\n    }\n  }\n  return parentInput;\n};\n\n/**\n * This method returns a string describing this Connection in developer terms\n * (English only). Intended to on be used in console logs and errors.\n * @return {string} The description.\n */\nBlockly.Connection.prototype.toString = function() {\n  var msg;\n  var block = this.sourceBlock_;\n  if (!block) {\n    return 'Orphan Connection';\n  } else if (block.outputConnection == this) {\n    msg = 'Output Connection of ';\n  } else if (block.previousConnection == this) {\n    msg = 'Previous Connection of ';\n  } else if (block.nextConnection == this) {\n    msg = 'Next Connection of ';\n  } else {\n    var parentInput = null;\n    for (var i = 0, input; (input = block.inputList[i]); i++) {\n      if (input.connection == this) {\n        parentInput = input;\n        break;\n      }\n    }\n    if (parentInput) {\n      msg = 'Input \"' + parentInput.name + '\" connection on ';\n    } else {\n      console.warn('Connection not actually connected to sourceBlock_');\n      return 'Orphan Connection';\n    }\n  }\n  return msg + block.toDevString();\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Extensions are functions that help initialize blocks, usually\n *      adding dynamic behavior such as onchange handlers and mutators. These\n *      are applied using Block.applyExtension(), or the JSON \"extensions\"\n *      array attribute.\n * @author Anm@anm.me (Andrew n marshall)\n */\n'use strict';\n\n/**\n * @name Blockly.Extensions\n * @namespace\n */\ngoog.provide('Blockly.Extensions');\n\ngoog.require('Blockly.utils');\n\n\n/**\n * The set of all registered extensions, keyed by extension name/id.\n * @private\n */\nBlockly.Extensions.ALL_ = {};\n\n/**\n * Registers a new extension function. Extensions are functions that help\n * initialize blocks, usually adding dynamic behavior such as onchange\n * handlers and mutators. These are applied using Block.applyExtension(), or\n * the JSON \"extensions\" array attribute.\n * @param {string} name The name of this extension.\n * @param {Function} initFn The function to initialize an extended block.\n * @throws {Error} if the extension name is empty, the extension is already\n *     registered, or extensionFn is not a function.\n */\nBlockly.Extensions.register = function(name, initFn) {\n  if ((typeof name != 'string') || (name.trim() == '')) {\n    throw Error('Error: Invalid extension name \"' + name + '\"');\n  }\n  if (Blockly.Extensions.ALL_[name]) {\n    throw Error('Error: Extension \"' + name + '\" is already registered.');\n  }\n  if (typeof initFn != 'function') {\n    throw Error('Error: Extension \"' + name + '\" must be a function');\n  }\n  Blockly.Extensions.ALL_[name] = initFn;\n};\n\n/**\n * Registers a new extension function that adds all key/value of mixinObj.\n * @param {string} name The name of this extension.\n * @param {!Object} mixinObj The values to mix in.\n * @throws {Error} if the extension name is empty or the extension is already\n *     registered.\n */\nBlockly.Extensions.registerMixin = function(name, mixinObj) {\n  if (!mixinObj || typeof mixinObj != 'object') {\n    throw Error('Error: Mixin \"' + name + '\" must be a object');\n  }\n  Blockly.Extensions.register(name, function() {\n    this.mixin(mixinObj);\n  });\n};\n\n/**\n * Registers a new extension function that adds a mutator to the block.\n * At register time this performs some basic sanity checks on the mutator.\n * The wrapper may also add a mutator dialog to the block, if both compose and\n * decompose are defined on the mixin.\n * @param {string} name The name of this mutator extension.\n * @param {!Object} mixinObj The values to mix in.\n * @param {(function())=} opt_helperFn An optional function to apply after\n *     mixing in the object.\n * @param {!Array.<string>=} opt_blockList A list of blocks to appear in the\n *     flyout of the mutator dialog.\n * @throws {Error} if the mutation is invalid or can't be applied to the block.\n */\nBlockly.Extensions.registerMutator = function(name, mixinObj, opt_helperFn,\n    opt_blockList) {\n  var errorPrefix = 'Error when registering mutator \"' + name + '\": ';\n\n  // Sanity check the mixin object before registering it.\n  Blockly.Extensions.checkHasFunction_(\n      errorPrefix, mixinObj.domToMutation, 'domToMutation');\n  Blockly.Extensions.checkHasFunction_(\n      errorPrefix, mixinObj.mutationToDom, 'mutationToDom');\n\n  var hasMutatorDialog =\n      Blockly.Extensions.checkMutatorDialog_(mixinObj, errorPrefix);\n\n  if (opt_helperFn && (typeof opt_helperFn != 'function')) {\n    throw Error('Extension \"' + name + '\" is not a function');\n  }\n\n  // Sanity checks passed.\n  Blockly.Extensions.register(name, function() {\n    if (hasMutatorDialog) {\n      if (!Blockly.Mutator) {\n        throw Error(errorPrefix + 'Missing require for Blockly.Mutator');\n      }\n      this.setMutator(new Blockly.Mutator(opt_blockList || []));\n    }\n    // Mixin the object.\n    this.mixin(mixinObj);\n\n    if (opt_helperFn) {\n      opt_helperFn.apply(this);\n    }\n  });\n};\n\n/**\n * Unregisters the extension registered with the given name.\n * @param {string} name The name of the extension to unregister.\n */\nBlockly.Extensions.unregister = function(name) {\n  if (Blockly.Extensions.ALL_[name]) {\n    delete Blockly.Extensions.ALL_[name];\n  } else {\n    console.warn('No extension mapping for name \"' + name +\n        '\" found to unregister');\n  }\n};\n\n/**\n * Applies an extension method to a block. This should only be called during\n * block construction.\n * @param {string} name The name of the extension.\n * @param {!Blockly.Block} block The block to apply the named extension to.\n * @param {boolean} isMutator True if this extension defines a mutator.\n * @throws {Error} if the extension is not found.\n */\nBlockly.Extensions.apply = function(name, block, isMutator) {\n  var extensionFn = Blockly.Extensions.ALL_[name];\n  if (typeof extensionFn != 'function') {\n    throw Error('Error: Extension \"' + name + '\" not found.');\n  }\n  if (isMutator) {\n    // Fail early if the block already has mutation properties.\n    Blockly.Extensions.checkNoMutatorProperties_(name, block);\n  } else {\n    // Record the old properties so we can make sure they don't change after\n    // applying the extension.\n    var mutatorProperties = Blockly.Extensions.getMutatorProperties_(block);\n  }\n  extensionFn.apply(block);\n\n  if (isMutator) {\n    var errorPrefix = 'Error after applying mutator \"' + name + '\": ';\n    Blockly.Extensions.checkBlockHasMutatorProperties_(errorPrefix, block);\n  } else {\n    if (!Blockly.Extensions.mutatorPropertiesMatch_(\n        /** @type {!Array.<Object>} */ (mutatorProperties), block)) {\n      throw Error('Error when applying extension \"' + name + '\": ' +\n          'mutation properties changed when applying a non-mutator extension.');\n    }\n  }\n};\n\n/**\n * Check that the given value is a function.\n * @param {string} errorPrefix The string to prepend to any error message.\n * @param {*} func Function to check.\n * @param {string} propertyName Which property to check.\n * @throws {Error} if the property does not exist or is not a function.\n * @private\n */\nBlockly.Extensions.checkHasFunction_ = function(errorPrefix, func,\n    propertyName) {\n  if (!func) {\n    throw Error(errorPrefix +\n        'missing required property \"' + propertyName + '\"');\n  } else if (typeof func != 'function') {\n    throw Error(errorPrefix +\n        '\" required property \"' + propertyName + '\" must be a function');\n  }\n};\n\n/**\n * Check that the given block does not have any of the four mutator properties\n * defined on it.  This function should be called before applying a mutator\n * extension to a block, to make sure we are not overwriting properties.\n * @param {string} mutationName The name of the mutation to reference in error\n *     messages.\n * @param {!Blockly.Block} block The block to check.\n * @throws {Error} if any of the properties already exist on the block.\n * @private\n */\nBlockly.Extensions.checkNoMutatorProperties_ = function(mutationName, block) {\n  var properties = Blockly.Extensions.getMutatorProperties_(block);\n  if (properties.length) {\n    throw Error('Error: tried to apply mutation \"' + mutationName +\n        '\" to a block that already has mutator functions.' +\n        '  Block id: ' + block.id);\n  }\n};\n\n/**\n * Check that the given object has both or neither of the functions required\n * to have a mutator dialog.\n * These functions are 'compose' and 'decompose'.  If a block has one, it must\n * have both.\n * @param {!Object} object The object to check.\n * @param {string} errorPrefix The string to prepend to any error message.\n * @return {boolean} True if the object has both functions.  False if it has\n *     neither function.\n * @throws {Error} if the object has only one of the functions.\n * @private\n */\nBlockly.Extensions.checkMutatorDialog_ = function(object, errorPrefix) {\n  var hasCompose = object.compose !== undefined;\n  var hasDecompose = object.decompose !== undefined;\n\n  if (hasCompose && hasDecompose) {\n    if (typeof object.compose != 'function') {\n      throw Error(errorPrefix + 'compose must be a function.');\n    } else if (typeof object.decompose != 'function') {\n      throw Error(errorPrefix + 'decompose must be a function.');\n    }\n    return true;\n  } else if (!hasCompose && !hasDecompose) {\n    return false;\n  } else {\n    throw Error(errorPrefix +\n        'Must have both or neither of \"compose\" and \"decompose\"');\n  }\n};\n\n/**\n * Check that a block has required mutator properties.  This should be called\n * after applying a mutation extension.\n * @param {string} errorPrefix The string to prepend to any error message.\n * @param {!Blockly.Block} block The block to inspect.\n * @private\n */\nBlockly.Extensions.checkBlockHasMutatorProperties_ = function(errorPrefix,\n    block) {\n  if (typeof block.domToMutation != 'function') {\n    throw Error(errorPrefix + 'Applying a mutator didn\\'t add \"domToMutation\"');\n  }\n  if (typeof block.mutationToDom != 'function') {\n    throw Error(errorPrefix + 'Applying a mutator didn\\'t add \"mutationToDom\"');\n  }\n\n  // A block with a mutator isn't required to have a mutation dialog, but\n  // it should still have both or neither of compose and decompose.\n  Blockly.Extensions.checkMutatorDialog_(block, errorPrefix);\n};\n\n/**\n * Get a list of values of mutator properties on the given block.\n * @param {!Blockly.Block} block The block to inspect.\n * @return {!Array.<Object>} A list with all of the defined properties, which\n *     should be functions, but may be anything other than undefined.\n * @private\n */\nBlockly.Extensions.getMutatorProperties_ = function(block) {\n  var result = [];\n  // List each function explicitly by reference to allow for renaming\n  // during compilation.\n  if (block.domToMutation !== undefined) {\n    result.push(block.domToMutation);\n  }\n  if (block.mutationToDom !== undefined) {\n    result.push(block.mutationToDom);\n  }\n  if (block.compose !== undefined) {\n    result.push(block.compose);\n  }\n  if (block.decompose !== undefined) {\n    result.push(block.decompose);\n  }\n  return result;\n};\n\n/**\n * Check that the current mutator properties match a list of old mutator\n * properties.  This should be called after applying a non-mutator extension,\n * to verify that the extension didn't change properties it shouldn't.\n * @param {!Array.<Object>} oldProperties The old values to compare to.\n * @param {!Blockly.Block} block The block to inspect for new values.\n * @return {boolean} True if the property lists match.\n * @private\n */\nBlockly.Extensions.mutatorPropertiesMatch_ = function(oldProperties, block) {\n  var newProperties = Blockly.Extensions.getMutatorProperties_(block);\n  if (newProperties.length != oldProperties.length) {\n    return false;\n  }\n  for (var i = 0; i < newProperties.length; i++) {\n    if (oldProperties[i] != newProperties[i]) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * Builds an extension function that will map a dropdown value to a tooltip\n * string.\n *\n * This method includes multiple checks to ensure tooltips, dropdown options,\n * and message references are aligned. This aims to catch errors as early as\n * possible, without requiring developers to manually test tooltips under each\n * option. After the page is loaded, each tooltip text string will be checked\n * for matching message keys in the internationalized string table. Deferring\n * this until the page is loaded decouples loading dependencies. Later, upon\n * loading the first block of any given type, the extension will validate every\n * dropdown option has a matching tooltip in the lookupTable.  Errors are\n * reported as warnings in the console, and are never fatal.\n * @param {string} dropdownName The name of the field whose value is the key\n *     to the lookup table.\n * @param {!Object.<string, string>} lookupTable The table of field values to\n *     tooltip text.\n * @return {!Function} The extension function.\n */\nBlockly.Extensions.buildTooltipForDropdown = function(dropdownName,\n    lookupTable) {\n  // List of block types already validated, to minimize duplicate warnings.\n  var blockTypesChecked = [];\n\n  // Check the tooltip string messages for invalid references.\n  // Wait for load, in case Blockly.Msg is not yet populated.\n  // runAfterPageLoad() does not run in a Node.js environment due to lack of\n  // document object, in which case skip the validation.\n  if (typeof document == 'object') {  // Relies on document.readyState\n    Blockly.utils.runAfterPageLoad(function() {\n      for (var key in lookupTable) {\n        // Will print warnings if reference is missing.\n        Blockly.utils.checkMessageReferences(lookupTable[key]);\n      }\n    });\n  }\n\n  /**\n   * The actual extension.\n   * @this {Blockly.Block}\n   */\n  var extensionFn = function() {\n    if (this.type && blockTypesChecked.indexOf(this.type) == -1) {\n      Blockly.Extensions.checkDropdownOptionsInTable_(\n          this, dropdownName, lookupTable);\n      blockTypesChecked.push(this.type);\n    }\n\n    this.setTooltip(function() {\n      var value = String(this.getFieldValue(dropdownName));\n      var tooltip = lookupTable[value];\n      if (tooltip == null) {\n        if (blockTypesChecked.indexOf(this.type) == -1) {\n          // Warn for missing values on generated tooltips.\n          var warning = 'No tooltip mapping for value ' + value +\n              ' of field ' + dropdownName;\n          if (this.type != null) {\n            warning += (' of block type ' + this.type);\n          }\n          console.warn(warning + '.');\n        }\n      } else {\n        tooltip = Blockly.utils.replaceMessageReferences(tooltip);\n      }\n      return tooltip;\n    }.bind(this));\n  };\n  return extensionFn;\n};\n\n/**\n * Checks all options keys are present in the provided string lookup table.\n * Emits console warnings when they are not.\n * @param {!Blockly.Block} block The block containing the dropdown\n * @param {string} dropdownName The name of the dropdown\n * @param {!Object.<string, string>} lookupTable The string lookup table\n * @private\n */\nBlockly.Extensions.checkDropdownOptionsInTable_ = function(block, dropdownName,\n    lookupTable) {\n  // Validate all dropdown options have values.\n  var dropdown = block.getField(dropdownName);\n  if (!dropdown.isOptionListDynamic()) {\n    var options = dropdown.getOptions();\n    for (var i = 0; i < options.length; ++i) {\n      var optionKey = options[i][1];  // label, then value\n      if (lookupTable[optionKey] == null) {\n        console.warn('No tooltip mapping for value ' + optionKey +\n           ' of field ' + dropdownName + ' of block type ' + block.type);\n      }\n    }\n  }\n};\n\n/**\n * Builds an extension function that will install a dynamic tooltip. The\n * tooltip message should include the string '%1' and that string will be\n * replaced with the text of the named field.\n * @param {string} msgTemplate The template form to of the message text, with\n *     %1 placeholder.\n * @param {string} fieldName The field with the replacement text.\n * @return {!Function} The extension function.\n */\nBlockly.Extensions.buildTooltipWithFieldText = function(msgTemplate,\n    fieldName) {\n  // Check the tooltip string messages for invalid references.\n  // Wait for load, in case Blockly.Msg is not yet populated.\n  // runAfterPageLoad() does not run in a Node.js environment due to lack of\n  // document object, in which case skip the validation.\n  if (typeof document == 'object') {  // Relies on document.readyState\n    Blockly.utils.runAfterPageLoad(function() {\n      // Will print warnings if reference is missing.\n      Blockly.utils.checkMessageReferences(msgTemplate);\n    });\n  }\n\n  /**\n   * The actual extension.\n   * @this {Blockly.Block}\n   */\n  var extensionFn = function() {\n    this.setTooltip(function() {\n      var field = this.getField(fieldName);\n      return Blockly.utils.replaceMessageReferences(msgTemplate)\n          .replace('%1', field ? field.getText() : '');\n    }.bind(this));\n  };\n  return extensionFn;\n};\n\n/**\n * Configures the tooltip to mimic the parent block when connected. Otherwise,\n * uses the tooltip text at the time this extension is initialized. This takes\n * advantage of the fact that all other values from JSON are initialized before\n * extensions.\n * @this {Blockly.Block}\n * @private\n */\nBlockly.Extensions.extensionParentTooltip_ = function() {\n  this.tooltipWhenNotConnected_ = this.tooltip;\n  this.setTooltip(function() {\n    var parent = this.getParent();\n    return (parent && parent.getInputsInline() && parent.tooltip) ||\n        this.tooltipWhenNotConnected_;\n  }.bind(this));\n};\nBlockly.Extensions.register('parent_tooltip_when_inline',\n    Blockly.Extensions.extensionParentTooltip_);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Fields can be created based on a JSON definition. This file\n *    contains methods for registering those JSON definitions, and building the\n *    fields based on JSON.\n * @author bekawestberg@gmail.com (Beka Westberg)\n */\n'use strict';\n\ngoog.provide('Blockly.fieldRegistry');\n\ngoog.require('Blockly.registry');\n\ngoog.requireType('Blockly.IRegistrableField');\n\n\n/**\n * Registers a field type.\n * Blockly.fieldRegistry.fromJson uses this registry to\n * find the appropriate field type.\n * @param {string} type The field type name as used in the JSON definition.\n * @param {!Blockly.IRegistrableField} fieldClass The field class containing a\n *     fromJson function that can construct an instance of the field.\n * @throws {Error} if the type name is empty, the field is already\n *     registered, or the fieldClass is not an object containing a fromJson\n *     function.\n */\nBlockly.fieldRegistry.register = function(type, fieldClass) {\n  Blockly.registry.register(Blockly.registry.Type.FIELD, type, fieldClass);\n};\n\n/**\n * Unregisters the field registered with the given type.\n * @param {string} type The field type name as used in the JSON definition.\n */\nBlockly.fieldRegistry.unregister = function(type) {\n  Blockly.registry.unregister(Blockly.registry.Type.FIELD, type);\n};\n\n/**\n * Construct a Field from a JSON arg object.\n * Finds the appropriate registered field by the type name as registered using\n * Blockly.fieldRegistry.register.\n * @param {!Object} options A JSON object with a type and options specific\n *     to the field type.\n * @return {Blockly.Field} The new field instance or null if a field wasn't\n *     found with the given type name\n * @package\n */\nBlockly.fieldRegistry.fromJson = function(options) {\n  var fieldObject = /** @type {?Blockly.IRegistrableField} */ (\n    Blockly.registry.getObject(Blockly.registry.Type.FIELD, options['type']));\n  if (!fieldObject) {\n    console.warn('Blockly could not create a field of type ' + options['type'] +\n      '. The field is probably not being registered. This could be because' +\n      ' the file is not loaded, the field does not register itself (Issue' +\n      ' #1584), or the registration is not being reached.');\n    return null;\n  }\n  return fieldObject.fromJson(options);\n};\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods animating a block on connection and disconnection.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.blockAnimations');\n\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * PID of disconnect UI animation.  There can only be one at a time.\n * @type {number}\n * @private\n */\nBlockly.blockAnimations.disconnectPid_ = 0;\n\n/**\n * SVG group of wobbling block.  There can only be one at a time.\n * @type {Element}\n * @private\n */\nBlockly.blockAnimations.disconnectGroup_ = null;\n\n/**\n * Play some UI effects (sound, animation) when disposing of a block.\n * @param {!Blockly.BlockSvg} block The block being disposed of.\n * @package\n */\nBlockly.blockAnimations.disposeUiEffect = function(block) {\n  var workspace = block.workspace;\n  var svgGroup = block.getSvgRoot();\n  workspace.getAudioManager().play('delete');\n\n  var xy = workspace.getSvgXY(svgGroup);\n  // Deeply clone the current block.\n  var clone = svgGroup.cloneNode(true);\n  clone.translateX_ = xy.x;\n  clone.translateY_ = xy.y;\n  clone.setAttribute('transform', 'translate(' + xy.x + ',' + xy.y + ')');\n  workspace.getParentSvg().appendChild(clone);\n  clone.bBox_ = clone.getBBox();\n  // Start the animation.\n  Blockly.blockAnimations.disposeUiStep_(clone, workspace.RTL, new Date,\n      workspace.scale);\n};\n\n/**\n * Animate a cloned block and eventually dispose of it.\n * This is a class method, not an instance method since the original block has\n * been destroyed and is no longer accessible.\n * @param {!Element} clone SVG element to animate and dispose of.\n * @param {boolean} rtl True if RTL, false if LTR.\n * @param {!Date} start Date of animation's start.\n * @param {number} workspaceScale Scale of workspace.\n * @private\n */\nBlockly.blockAnimations.disposeUiStep_ = function(clone, rtl, start,\n    workspaceScale) {\n  var ms = new Date - start;\n  var percent = ms / 150;\n  if (percent > 1) {\n    Blockly.utils.dom.removeNode(clone);\n  } else {\n    var x = clone.translateX_ +\n        (rtl ? -1 : 1) * clone.bBox_.width * workspaceScale / 2 * percent;\n    var y = clone.translateY_ + clone.bBox_.height * workspaceScale * percent;\n    var scale = (1 - percent) * workspaceScale;\n    clone.setAttribute('transform', 'translate(' + x + ',' + y + ')' +\n        ' scale(' + scale + ')');\n    setTimeout(Blockly.blockAnimations.disposeUiStep_, 10, clone, rtl, start,\n        workspaceScale);\n  }\n};\n\n/**\n * Play some UI effects (sound, ripple) after a connection has been established.\n * @param {!Blockly.BlockSvg} block The block being connected.\n * @package\n */\nBlockly.blockAnimations.connectionUiEffect = function(block) {\n  var workspace = block.workspace;\n  var scale = workspace.scale;\n  workspace.getAudioManager().play('click');\n  if (scale < 1) {\n    return;  // Too small to care about visual effects.\n  }\n  // Determine the absolute coordinates of the inferior block.\n  var xy = workspace.getSvgXY(block.getSvgRoot());\n  // Offset the coordinates based on the two connection types, fix scale.\n  if (block.outputConnection) {\n    xy.x += (block.RTL ? 3 : -3) * scale;\n    xy.y += 13 * scale;\n  } else if (block.previousConnection) {\n    xy.x += (block.RTL ? -23 : 23) * scale;\n    xy.y += 3 * scale;\n  }\n  var ripple = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.CIRCLE,\n      {\n        'cx': xy.x,\n        'cy': xy.y,\n        'r': 0,\n        'fill': 'none',\n        'stroke': '#888',\n        'stroke-width': 10\n      },\n      workspace.getParentSvg());\n  // Start the animation.\n  Blockly.blockAnimations.connectionUiStep_(ripple, new Date, scale);\n};\n\n/**\n * Expand a ripple around a connection.\n * @param {!SVGElement} ripple Element to animate.\n * @param {!Date} start Date of animation's start.\n * @param {number} scale Scale of workspace.\n * @private\n */\nBlockly.blockAnimations.connectionUiStep_ = function(ripple, start, scale) {\n  var ms = new Date - start;\n  var percent = ms / 150;\n  if (percent > 1) {\n    Blockly.utils.dom.removeNode(ripple);\n  } else {\n    ripple.setAttribute('r', percent * 25 * scale);\n    ripple.style.opacity = 1 - percent;\n    Blockly.blockAnimations.disconnectPid_ = setTimeout(\n        Blockly.blockAnimations.connectionUiStep_, 10, ripple, start, scale);\n  }\n};\n\n/**\n * Play some UI effects (sound, animation) when disconnecting a block.\n * @param {!Blockly.BlockSvg} block The block being disconnected.\n * @package\n */\nBlockly.blockAnimations.disconnectUiEffect = function(block) {\n  block.workspace.getAudioManager().play('disconnect');\n  if (block.workspace.scale < 1) {\n    return;  // Too small to care about visual effects.\n  }\n  // Horizontal distance for bottom of block to wiggle.\n  var DISPLACEMENT = 10;\n  // Scale magnitude of skew to height of block.\n  var height = block.getHeightWidth().height;\n  var magnitude = Math.atan(DISPLACEMENT / height) / Math.PI * 180;\n  if (!block.RTL) {\n    magnitude *= -1;\n  }\n  // Start the animation.\n  Blockly.blockAnimations.disconnectUiStep_(\n      block.getSvgRoot(), magnitude, new Date);\n};\n/**\n * Animate a brief wiggle of a disconnected block.\n * @param {!SVGElement} group SVG element to animate.\n * @param {number} magnitude Maximum degrees skew (reversed for RTL).\n * @param {!Date} start Date of animation's start.\n * @private\n */\nBlockly.blockAnimations.disconnectUiStep_ = function(group, magnitude, start) {\n  var DURATION = 200;  // Milliseconds.\n  var WIGGLES = 3;  // Half oscillations.\n\n  var ms = new Date - start;\n  var percent = ms / DURATION;\n\n  if (percent > 1) {\n    group.skew_ = '';\n  } else {\n    var skew = Math.round(\n        Math.sin(percent * Math.PI * WIGGLES) * (1 - percent) * magnitude);\n    group.skew_ = 'skewX(' + skew + ')';\n    Blockly.blockAnimations.disconnectGroup_ = group;\n    Blockly.blockAnimations.disconnectPid_ =\n        setTimeout(Blockly.blockAnimations.disconnectUiStep_, 10, group,\n            magnitude, start);\n  }\n  group.setAttribute('transform', group.translate_ + group.skew_);\n};\n\n/**\n * Stop the disconnect UI animation immediately.\n * @package\n */\nBlockly.blockAnimations.disconnectUiStop = function() {\n  if (Blockly.blockAnimations.disconnectGroup_) {\n    clearTimeout(Blockly.blockAnimations.disconnectPid_);\n    var group = Blockly.blockAnimations.disconnectGroup_;\n    group.skew_ = '';\n    group.setAttribute('transform', group.translate_);\n    Blockly.blockAnimations.disconnectGroup_ = null;\n  }\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class that controls updates to connections during drags.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.InsertionMarkerManager');\n\ngoog.require('Blockly.blockAnimations');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Events');\n\n\n/**\n * Class that controls updates to connections during drags.  It is primarily\n * responsible for finding the closest eligible connection and highlighting or\n * unhiglighting it as needed during a drag.\n * @param {!Blockly.BlockSvg} block The top block in the stack being dragged.\n * @constructor\n */\nBlockly.InsertionMarkerManager = function(block) {\n  Blockly.selected = block;\n\n  /**\n   * The top block in the stack being dragged.\n   * Does not change during a drag.\n   * @type {!Blockly.BlockSvg}\n   * @private\n   */\n  this.topBlock_ = block;\n\n  /**\n   * The workspace on which these connections are being dragged.\n   * Does not change during a drag.\n   * @type {!Blockly.WorkspaceSvg}\n   * @private\n   */\n  this.workspace_ = block.workspace;\n\n  /**\n   * The last connection on the stack, if it's not the last connection on the\n   * first block.\n   * Set in initAvailableConnections, if at all.\n   * @type {Blockly.RenderedConnection}\n   * @private\n   */\n  this.lastOnStack_ = null;\n\n  /**\n   * The insertion marker corresponding to the last block in the stack, if\n   * that's not the same as the first block in the stack.\n   * Set in initAvailableConnections, if at all\n   * @type {Blockly.BlockSvg}\n   * @private\n   */\n  this.lastMarker_ = null;\n\n  /**\n   * The insertion marker that shows up between blocks to show where a block\n   * would go if dropped immediately.\n   * @type {Blockly.BlockSvg}\n   * @private\n   */\n  this.firstMarker_ = this.createMarkerBlock_(this.topBlock_);\n\n  /**\n   * The connection that this block would connect to if released immediately.\n   * Updated on every mouse move.\n   * This is not on any of the blocks that are being dragged.\n   * @type {Blockly.RenderedConnection}\n   * @private\n   */\n  this.closestConnection_ = null;\n\n  /**\n   * The connection that would connect to this.closestConnection_ if this block\n   * were released immediately.\n   * Updated on every mouse move.\n   * This is on the top block that is being dragged or the last block in the\n   * dragging stack.\n   * @type {Blockly.RenderedConnection}\n   * @private\n   */\n  this.localConnection_ = null;\n\n  /**\n   * Whether the block would be deleted if it were dropped immediately.\n   * Updated on every mouse move.\n   * @type {boolean}\n   * @private\n   */\n  this.wouldDeleteBlock_ = false;\n\n  /**\n   * Connection on the insertion marker block that corresponds to\n   * this.localConnection_ on the currently dragged block.\n   * @type {Blockly.RenderedConnection}\n   * @private\n   */\n  this.markerConnection_ = null;\n\n  /**\n   * The block that currently has an input being highlighted, or null.\n   * @type {Blockly.BlockSvg}\n   * @private\n   */\n  this.highlightedBlock_ = null;\n\n  /**\n   * The block being faded to indicate replacement, or null.\n   * @type {Blockly.BlockSvg}\n   * @private\n   */\n  this.fadedBlock_ = null;\n\n  /**\n   * The connections on the dragging blocks that are available to connect to\n   * other blocks.  This includes all open connections on the top block, as well\n   * as the last connection on the block stack.\n   * Does not change during a drag.\n   * @type {!Array.<!Blockly.RenderedConnection>}\n   * @private\n   */\n  this.availableConnections_ = this.initAvailableConnections_();\n};\n\n/**\n * An enum describing different kinds of previews the InsertionMarkerManager\n * could display.\n * @enum {number}\n */\nBlockly.InsertionMarkerManager.PREVIEW_TYPE = {\n  INSERTION_MARKER: 0,\n  INPUT_OUTLINE: 1,\n  REPLACEMENT_FADE: 2,\n};\n\n/**\n * Sever all links from this object.\n * @package\n */\nBlockly.InsertionMarkerManager.prototype.dispose = function() {\n  this.availableConnections_.length = 0;\n\n  Blockly.Events.disable();\n  try {\n    if (this.firstMarker_) {\n      this.firstMarker_.dispose();\n    }\n    if (this.lastMarker_) {\n      this.lastMarker_.dispose();\n    }\n  } finally {\n    Blockly.Events.enable();\n  }\n};\n\n/**\n * Update the available connections for the top block. These connections can\n * change if a block is unplugged and the stack is healed.\n * @package\n */\nBlockly.InsertionMarkerManager.prototype.updateAvailableConnections = function() {\n  this.availableConnections_ = this.initAvailableConnections_();\n};\n\n/**\n * Return whether the block would be deleted if dropped immediately, based on\n * information from the most recent move event.\n * @return {boolean} True if the block would be deleted if dropped immediately.\n * @package\n */\nBlockly.InsertionMarkerManager.prototype.wouldDeleteBlock = function() {\n  return this.wouldDeleteBlock_;\n};\n\n/**\n * Return whether the block would be connected if dropped immediately, based on\n * information from the most recent move event.\n * @return {boolean} True if the block would be connected if dropped\n *   immediately.\n * @package\n */\nBlockly.InsertionMarkerManager.prototype.wouldConnectBlock = function() {\n  return !!this.closestConnection_;\n};\n\n/**\n * Connect to the closest connection and render the results.\n * This should be called at the end of a drag.\n * @package\n */\nBlockly.InsertionMarkerManager.prototype.applyConnections = function() {\n  if (this.closestConnection_) {\n    // Don't fire events for insertion markers.\n    Blockly.Events.disable();\n    this.hidePreview_();\n    Blockly.Events.enable();\n    // Connect two blocks together.\n    this.localConnection_.connect(this.closestConnection_);\n    if (this.topBlock_.rendered) {\n      // Trigger a connection animation.\n      // Determine which connection is inferior (lower in the source stack).\n      var inferiorConnection = this.localConnection_.isSuperior() ?\n          this.closestConnection_ : this.localConnection_;\n      Blockly.blockAnimations.connectionUiEffect(\n          inferiorConnection.getSourceBlock());\n      // Bring the just-edited stack to the front.\n      var rootBlock = this.topBlock_.getRootBlock();\n      rootBlock.bringToFront();\n    }\n  }\n};\n\n/**\n * Update connections based on the most recent move location.\n * @param {!Blockly.utils.Coordinate} dxy Position relative to drag start,\n *     in workspace units.\n * @param {?number} deleteArea One of {@link Blockly.DELETE_AREA_TRASH},\n *     {@link Blockly.DELETE_AREA_TOOLBOX}, or {@link Blockly.DELETE_AREA_NONE}.\n * @package\n */\nBlockly.InsertionMarkerManager.prototype.update = function(dxy, deleteArea) {\n  var candidate = this.getCandidate_(dxy);\n\n  this.wouldDeleteBlock_ = this.shouldDelete_(candidate, deleteArea);\n  var shouldUpdate = this.wouldDeleteBlock_ ||\n      this.shouldUpdatePreviews_(candidate, dxy);\n\n  if (shouldUpdate) {\n    // Don't fire events for insertion marker creation or movement.\n    Blockly.Events.disable();\n    this.maybeHidePreview_(candidate);\n    this.maybeShowPreview_(candidate);\n    Blockly.Events.enable();\n  }\n};\n\n/**\n * Create an insertion marker that represents the given block.\n * @param {!Blockly.BlockSvg} sourceBlock The block that the insertion marker\n *     will represent.\n * @return {!Blockly.BlockSvg} The insertion marker that represents the given\n *     block.\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.createMarkerBlock_ = function(sourceBlock) {\n  var imType = sourceBlock.type;\n\n  Blockly.Events.disable();\n  try {\n    var result = this.workspace_.newBlock(imType);\n    result.setInsertionMarker(true);\n    if (sourceBlock.mutationToDom) {\n      var oldMutationDom = sourceBlock.mutationToDom();\n      if (oldMutationDom) {\n        result.domToMutation(oldMutationDom);\n      }\n    }\n    // Copy field values from the other block.  These values may impact the\n    // rendered size of the insertion marker.  Note that we do not care about\n    // child blocks here.\n    for (var i = 0; i < sourceBlock.inputList.length; i++) {\n      var sourceInput = sourceBlock.inputList[i];\n      if (sourceInput.name == Blockly.Block.COLLAPSED_INPUT_NAME) {\n        continue;  // Ignore the collapsed input.\n      }\n      var resultInput = result.inputList[i];\n      for (var j = 0; j < sourceInput.fieldRow.length; j++) {\n        var sourceField = sourceInput.fieldRow[j];\n        var resultField = resultInput.fieldRow[j];\n        resultField.setValue(sourceField.getValue());\n      }\n    }\n\n    result.setCollapsed(sourceBlock.isCollapsed());\n    result.setInputsInline(sourceBlock.getInputsInline());\n\n    result.initSvg();\n    result.getSvgRoot().setAttribute('visibility', 'hidden');\n  } finally {\n    Blockly.Events.enable();\n  }\n\n  return result;\n};\n\n/**\n * Populate the list of available connections on this block stack.  This should\n * only be called once, at the beginning of a drag.\n * If the stack has more than one block, this function will populate\n * lastOnStack_ and create the corresponding insertion marker.\n * @return {!Array.<!Blockly.RenderedConnection>} A list of available\n *     connections.\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.initAvailableConnections_ = function() {\n  var available = this.topBlock_.getConnections_(false);\n  // Also check the last connection on this stack\n  var lastOnStack = this.topBlock_.lastConnectionInStack();\n  if (lastOnStack && lastOnStack != this.topBlock_.nextConnection) {\n    available.push(lastOnStack);\n    this.lastOnStack_ = lastOnStack;\n    if (this.lastMarker_) {\n      Blockly.Events.disable();\n      try {\n        this.lastMarker_.dispose();\n      } finally {\n        Blockly.Events.enable();\n      }\n    }\n    this.lastMarker_ = this.createMarkerBlock_(lastOnStack.getSourceBlock());\n  }\n  return available;\n};\n\n/**\n * Whether the previews (insertion marker and replacement marker) should be\n * updated based on the closest candidate and the current drag distance.\n * @param {!Object} candidate An object containing a local connection, a closest\n *     connection, and a radius.  Returned by getCandidate_.\n * @param {!Blockly.utils.Coordinate} dxy Position relative to drag start,\n *     in workspace units.\n * @return {boolean} Whether the preview should be updated.\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.shouldUpdatePreviews_ = function(\n    candidate, dxy) {\n  var candidateLocal = candidate.local;\n  var candidateClosest = candidate.closest;\n  var radius = candidate.radius;\n\n  // Found a connection!\n  if (candidateLocal && candidateClosest) {\n    // We're already showing an insertion marker.\n    // Decide whether the new connection has higher priority.\n    if (this.localConnection_ && this.closestConnection_) {\n      // The connection was the same as the current connection.\n      if (this.closestConnection_ == candidateClosest &&\n          this.localConnection_ == candidateLocal) {\n        return false;\n      }\n      var xDiff = this.localConnection_.x + dxy.x - this.closestConnection_.x;\n      var yDiff = this.localConnection_.y + dxy.y - this.closestConnection_.y;\n      var curDistance = Math.sqrt(xDiff * xDiff + yDiff * yDiff);\n      // Slightly prefer the existing preview over a new preview.\n      return !(candidateClosest && radius > curDistance -\n          Blockly.CURRENT_CONNECTION_PREFERENCE);\n    } else if (!this.localConnection_ && !this.closestConnection_) {\n    // We weren't showing a preview before, but we should now.\n      return true;\n    } else {\n      console.error('Only one of localConnection_ and closestConnection_ was set.');\n    }\n  } else { // No connection found.\n    // Only need to update if we were showing a preview before.\n    return !!(this.localConnection_ && this.closestConnection_);\n  }\n\n  console.error('Returning true from shouldUpdatePreviews, but it\\'s not clear why.');\n  return true;\n};\n\n/**\n * Find the nearest valid connection, which may be the same as the current\n * closest connection.\n * @param {!Blockly.utils.Coordinate} dxy Position relative to drag start,\n *     in workspace units.\n * @return {!Object} An object containing a local connection, a closest\n *     connection, and a radius.\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.getCandidate_ = function(dxy) {\n  var radius = this.getStartRadius_();\n  var candidateClosest = null;\n  var candidateLocal = null;\n\n  for (var i = 0; i < this.availableConnections_.length; i++) {\n    var myConnection = this.availableConnections_[i];\n    var neighbour = myConnection.closest(radius, dxy);\n    if (neighbour.connection) {\n      candidateClosest = neighbour.connection;\n      candidateLocal = myConnection;\n      radius = neighbour.radius;\n    }\n  }\n  return {\n    closest: candidateClosest,\n    local: candidateLocal,\n    radius: radius\n  };\n};\n\n/**\n * Decide the radius at which to start searching for the closest connection.\n * @return {number} The radius at which to start the search for the closest\n *     connection.\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.getStartRadius_ = function() {\n  // If there is already a connection highlighted,\n  // increase the radius we check for making new connections.\n  // Why? When a connection is highlighted, blocks move around when the insertion\n  // marker is created, which could cause the connection became out of range.\n  // By increasing radiusConnection when a connection already exists,\n  // we never \"lose\" the connection from the offset.\n  if (this.closestConnection_ && this.localConnection_) {\n    return Blockly.CONNECTING_SNAP_RADIUS;\n  }\n  return Blockly.SNAP_RADIUS;\n};\n\n/**\n * Whether ending the drag would delete the block.\n * @param {!Object} candidate An object containing a local connection, a closest\n *     connection, and a radius.\n * @param {?number} deleteArea One of {@link Blockly.DELETE_AREA_TRASH},\n *     {@link Blockly.DELETE_AREA_TOOLBOX}, or {@link Blockly.DELETE_AREA_NONE}.\n * @return {boolean} True if dropping the block immediately would replace\n *     delete the block.  False otherwise.\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.shouldDelete_ = function(candidate,\n    deleteArea) {\n  // Prefer connecting over dropping into the trash can, but prefer dragging to\n  // the toolbox over connecting to other blocks.\n  var wouldConnect = candidate && !!candidate.closest &&\n      deleteArea != Blockly.DELETE_AREA_TOOLBOX;\n  var wouldDelete = !!deleteArea && !this.topBlock_.getParent() &&\n      this.topBlock_.isDeletable();\n\n  return wouldDelete && !wouldConnect;\n};\n\n/**\n * Show an insertion marker or replacement highlighting during a drag, if\n * needed.\n * At the beginning of this function, this.localConnection_ and\n * this.closestConnection_ should both be null.\n * @param {!Object} candidate An object containing a local connection, a closest\n *     connection, and a radius.\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.maybeShowPreview_ = function(candidate) {\n  // Nope, don't add a marker.\n  if (this.wouldDeleteBlock_) {\n    return;\n  }\n  var closest = candidate.closest;\n  var local = candidate.local;\n\n  // Nothing to connect to.\n  if (!closest) {\n    return;\n  }\n\n  // Something went wrong and we're trying to connect to an invalid connection.\n  if (closest == this.closestConnection_ ||\n      closest.getSourceBlock().isInsertionMarker()) {\n    console.log('Trying to connect to an insertion marker');\n    return;\n  }\n  // Add an insertion marker or replacement marker.\n  this.closestConnection_ = closest;\n  this.localConnection_ = local;\n  this.showPreview_();\n};\n\n/**\n * A preview should be shown.  This function figures out if it should be a block\n * highlight or an insertion marker, and shows the appropriate one.\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.showPreview_ = function() {\n  var closest = this.closestConnection_;\n  var renderer = this.workspace_.getRenderer();\n  var method = renderer.getConnectionPreviewMethod(\n      /** @type {!Blockly.RenderedConnection} */ (closest),\n      /** @type {!Blockly.RenderedConnection} */ (this.localConnection_),\n      this.topBlock_);\n\n  switch (method) {\n    case Blockly.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:\n      this.showInsertionInputOutline_();\n      break;\n    case Blockly.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:\n      this.showInsertionMarker_();\n      break;\n    case Blockly.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:\n      this.showReplacementFade_();\n      break;\n  }\n\n  // Optionally highlight the actual connection, as a nod to previous behaviour.\n  if (closest && renderer.shouldHighlightConnection(closest)) {\n    closest.highlight();\n  }\n};\n\n/**\n * Show an insertion marker or replacement highlighting during a drag, if\n * needed.\n * At the end of this function, this.localConnection_ and\n * this.closestConnection_ should both be null.\n * @param {!Object} candidate An object containing a local connection, a closest\n *     connection, and a radius.\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.maybeHidePreview_ = function(candidate) {\n  // If there's no new preview, remove the old one but don't bother deleting it.\n  // We might need it later, and this saves disposing of it and recreating it.\n  if (!candidate.closest) {\n    this.hidePreview_();\n  } else {\n    // If there's a new preview and there was an preview before, and either\n    // connection has changed, remove the old preview.\n    var hadPreview = this.closestConnection_ && this.localConnection_;\n    var closestChanged = this.closestConnection_ != candidate.closest;\n    var localChanged = this.localConnection_ != candidate.local;\n\n    // Also hide if we had a preview before but now we're going to delete instead.\n    if (hadPreview && (closestChanged || localChanged || this.wouldDeleteBlock_)) {\n      this.hidePreview_();\n    }\n  }\n\n  // Either way, clear out old state.\n  this.markerConnection_ = null;\n  this.closestConnection_ = null;\n  this.localConnection_ = null;\n};\n\n/**\n * A preview should be hidden.  This function figures out if it is a block\n *  highlight or an insertion marker, and hides the appropriate one.\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.hidePreview_ = function() {\n  if (this.closestConnection_ && this.closestConnection_.targetBlock() &&\n      this.workspace_.getRenderer()\n          .shouldHighlightConnection(this.closestConnection_)) {\n    this.closestConnection_.unhighlight();\n  }\n  if (this.fadedBlock_) {\n    this.hideReplacementFade_();\n  } else if (this.highlightedBlock_) {\n    this.hideInsertionInputOutline_();\n  } else if (this.markerConnection_) {\n    this.hideInsertionMarker_();\n  }\n};\n\n/**\n * Shows an insertion marker connected to the appropriate blocks (based on\n * manager state).\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.showInsertionMarker_ = function() {\n  var local = this.localConnection_;\n  var closest = this.closestConnection_;\n\n  var isLastInStack = this.lastOnStack_ && local == this.lastOnStack_;\n  var imBlock = isLastInStack ? this.lastMarker_ : this.firstMarker_;\n  var imConn = imBlock.getMatchingConnection(local.getSourceBlock(), local);\n\n  if (imConn == this.markerConnection_) {\n    throw Error('Made it to showInsertionMarker_ even though the marker isn\\'t ' +\n        'changing');\n  }\n\n  // Render disconnected from everything else so that we have a valid\n  // connection location.\n  imBlock.render();\n  imBlock.rendered = true;\n  imBlock.getSvgRoot().setAttribute('visibility', 'visible');\n\n  if (imConn && closest) {\n    // Position so that the existing block doesn't move.\n    imBlock.positionNearConnection(imConn, closest);\n  }\n  if (closest) {\n    // Connect() also renders the insertion marker.\n    imConn.connect(closest);\n  }\n\n  this.markerConnection_ = imConn;\n};\n\n/**\n * Disconnects and hides the current insertion marker. Should return the blocks\n * to their original state.\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.hideInsertionMarker_ = function() {\n  if (!this.markerConnection_) {\n    console.log('No insertion marker connection to disconnect');\n    return;\n  }\n\n  var imConn = this.markerConnection_;\n  var imBlock = imConn.getSourceBlock();\n  var markerNext = imBlock.nextConnection;\n  var markerPrev = imBlock.previousConnection;\n  var markerOutput = imBlock.outputConnection;\n\n  var isFirstInStatementStack =\n      (imConn == markerNext && !(markerPrev && markerPrev.targetConnection));\n\n  var isFirstInOutputStack = imConn.type == Blockly.INPUT_VALUE &&\n      !(markerOutput && markerOutput.targetConnection);\n  // The insertion marker is the first block in a stack.  Unplug won't do\n  // anything in that case.  Instead, unplug the following block.\n  if (isFirstInStatementStack || isFirstInOutputStack) {\n    imConn.targetBlock().unplug(false);\n  }\n  // Inside of a C-block, first statement connection.\n  else if (imConn.type == Blockly.NEXT_STATEMENT && imConn != markerNext) {\n    var innerConnection = imConn.targetConnection;\n    innerConnection.getSourceBlock().unplug(false);\n\n    var previousBlockNextConnection =\n        markerPrev ? markerPrev.targetConnection : null;\n\n    imBlock.unplug(true);\n    if (previousBlockNextConnection) {\n      previousBlockNextConnection.connect(innerConnection);\n    }\n  } else {\n    imBlock.unplug(true /* healStack */);\n  }\n\n  if (imConn.targetConnection) {\n    throw Error('markerConnection_ still connected at the end of ' +\n        'disconnectInsertionMarker');\n  }\n\n  this.markerConnection_ = null;\n  imBlock.getSvgRoot().setAttribute('visibility', 'hidden');\n};\n\n/**\n * Shows an outline around the input the closest connection belongs to.\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.showInsertionInputOutline_ = function() {\n  var closest = this.closestConnection_;\n  this.highlightedBlock_ = closest.getSourceBlock();\n  this.highlightedBlock_.highlightShapeForInput(closest, true);\n};\n\n/**\n * Hides any visible input outlines.\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.hideInsertionInputOutline_ = function() {\n  this.highlightedBlock_.highlightShapeForInput(this.closestConnection_, false);\n  this.highlightedBlock_ = null;\n};\n\n/**\n * Shows a replacement fade affect on the closest connection's target block\n * (the block that is currently connected to it).\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.showReplacementFade_ = function() {\n  this.fadedBlock_ = this.closestConnection_.targetBlock();\n  this.fadedBlock_.fadeForReplacement(true);\n};\n\n/**\n * Hides/Removes any visible fade affects.\n * @private\n */\nBlockly.InsertionMarkerManager.prototype.hideReplacementFade_ = function() {\n  this.fadedBlock_.fadeForReplacement(false);\n  this.fadedBlock_ = null;\n};\n\n/**\n * Get a list of the insertion markers that currently exist.  Drags have 0, 1,\n * or 2 insertion markers.\n * @return {!Array.<!Blockly.BlockSvg>} A possibly empty list of insertion\n *     marker blocks.\n * @package\n */\nBlockly.InsertionMarkerManager.prototype.getInsertionMarkers = function() {\n  var result = [];\n  if (this.firstMarker_) {\n    result.push(this.firstMarker_);\n  }\n  if (this.lastMarker_) {\n    result.push(this.lastMarker_);\n  }\n  return result;\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for dragging a block visually.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.BlockDragger');\n\ngoog.require('Blockly.blockAnimations');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockMove');\ngoog.require('Blockly.Events.Ui');\ngoog.require('Blockly.InsertionMarkerManager');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.dom');\n\n\n/**\n * Class for a block dragger.  It moves blocks around the workspace when they\n * are being dragged by a mouse or touch.\n * @param {!Blockly.BlockSvg} block The block to drag.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace to drag on.\n * @constructor\n */\nBlockly.BlockDragger = function(block, workspace) {\n  /**\n   * The top block in the stack that is being dragged.\n   * @type {!Blockly.BlockSvg}\n   * @private\n   */\n  this.draggingBlock_ = block;\n\n  /**\n   * The workspace on which the block is being dragged.\n   * @type {!Blockly.WorkspaceSvg}\n   * @private\n   */\n  this.workspace_ = workspace;\n\n  /**\n   * Object that keeps track of connections on dragged blocks.\n   * @type {!Blockly.InsertionMarkerManager}\n   * @private\n   */\n  this.draggedConnectionManager_ = new Blockly.InsertionMarkerManager(\n      this.draggingBlock_);\n\n  /**\n   * Which delete area the mouse pointer is over, if any.\n   * One of {@link Blockly.DELETE_AREA_TRASH},\n   * {@link Blockly.DELETE_AREA_TOOLBOX}, or {@link Blockly.DELETE_AREA_NONE}.\n   * @type {?number}\n   * @private\n   */\n  this.deleteArea_ = null;\n\n  /**\n   * Whether the block would be deleted if dropped immediately.\n   * @type {boolean}\n   * @private\n   */\n  this.wouldDeleteBlock_ = false;\n\n  /**\n   * The location of the top left corner of the dragging block at the beginning\n   * of the drag in workspace coordinates.\n   * @type {!Blockly.utils.Coordinate}\n   * @private\n   */\n  this.startXY_ = this.draggingBlock_.getRelativeToSurfaceXY();\n\n  /**\n   * A list of all of the icons (comment, warning, and mutator) that are\n   * on this block and its descendants.  Moving an icon moves the bubble that\n   * extends from it if that bubble is open.\n   * @type {Array.<!Object>}\n   * @private\n   */\n  this.dragIconData_ = Blockly.BlockDragger.initIconData_(block);\n};\n\n/**\n * Sever all links from this object.\n * @package\n */\nBlockly.BlockDragger.prototype.dispose = function() {\n  this.dragIconData_.length = 0;\n\n  if (this.draggedConnectionManager_) {\n    this.draggedConnectionManager_.dispose();\n  }\n};\n\n/**\n * Make a list of all of the icons (comment, warning, and mutator) that are\n * on this block and its descendants.  Moving an icon moves the bubble that\n * extends from it if that bubble is open.\n * @param {!Blockly.BlockSvg} block The root block that is being dragged.\n * @return {!Array.<!Object>} The list of all icons and their locations.\n * @private\n */\nBlockly.BlockDragger.initIconData_ = function(block) {\n  // Build a list of icons that need to be moved and where they started.\n  var dragIconData = [];\n  var descendants = block.getDescendants(false);\n  for (var i = 0, descendant; (descendant = descendants[i]); i++) {\n    var icons = descendant.getIcons();\n    for (var j = 0; j < icons.length; j++) {\n      var data = {\n        // Blockly.utils.Coordinate with x and y properties (workspace coordinates).\n        location: icons[j].getIconLocation(),\n        // Blockly.Icon\n        icon: icons[j]\n      };\n      dragIconData.push(data);\n    }\n  }\n  return dragIconData;\n};\n\n/**\n * Start dragging a block.  This includes moving it to the drag surface.\n * @param {!Blockly.utils.Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at mouse down, in pixel units.\n * @param {boolean} healStack Whether or not to heal the stack after\n *     disconnecting.\n * @package\n */\nBlockly.BlockDragger.prototype.startBlockDrag = function(currentDragDeltaXY,\n    healStack) {\n  if (!Blockly.Events.getGroup()) {\n    Blockly.Events.setGroup(true);\n  }\n  this.fireDragStartEvent_();\n\n  // Mutators don't have the same type of z-ordering as the normal workspace\n  // during a drag.  They have to rely on the order of the blocks in the SVG.\n  // For performance reasons that usually happens at the end of a drag,\n  // but do it at the beginning for mutators.\n  if (this.workspace_.isMutator) {\n    this.draggingBlock_.bringToFront();\n  }\n\n  // During a drag there may be a lot of rerenders, but not field changes.\n  // Turn the cache on so we don't do spurious remeasures during the drag.\n  Blockly.utils.dom.startTextWidthCache();\n  this.workspace_.setResizesEnabled(false);\n  Blockly.blockAnimations.disconnectUiStop();\n\n  if (this.draggingBlock_.getParent() ||\n      (healStack && this.draggingBlock_.nextConnection &&\n      this.draggingBlock_.nextConnection.targetBlock())) {\n    this.draggingBlock_.unplug(healStack);\n    var delta = this.pixelsToWorkspaceUnits_(currentDragDeltaXY);\n    var newLoc = Blockly.utils.Coordinate.sum(this.startXY_, delta);\n\n    this.draggingBlock_.translate(newLoc.x, newLoc.y);\n    Blockly.blockAnimations.disconnectUiEffect(this.draggingBlock_);\n    this.draggedConnectionManager_.updateAvailableConnections();\n  }\n  this.draggingBlock_.setDragging(true);\n  // For future consideration: we may be able to put moveToDragSurface inside\n  // the block dragger, which would also let the block not track the block drag\n  // surface.\n  this.draggingBlock_.moveToDragSurface();\n\n  var toolbox = this.workspace_.getToolbox();\n  if (toolbox && typeof toolbox.addStyle == 'function') {\n    var style = this.draggingBlock_.isDeletable() ? 'blocklyToolboxDelete' :\n        'blocklyToolboxGrab';\n    toolbox.addStyle(style);\n  }\n};\n\n/**\n * Fire a UI event at the start of a block drag.\n * @private\n */\nBlockly.BlockDragger.prototype.fireDragStartEvent_ = function() {\n  var event = new Blockly.Events.Ui(this.draggingBlock_, 'dragStart',\n      null, this.draggingBlock_.getDescendants(false));\n  Blockly.Events.fire(event);\n};\n\n/**\n * Execute a step of block dragging, based on the given event.  Update the\n * display accordingly.\n * @param {!Event} e The most recent move event.\n * @param {!Blockly.utils.Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at the start of the drag, in pixel units.\n * @package\n */\nBlockly.BlockDragger.prototype.dragBlock = function(e, currentDragDeltaXY) {\n  var delta = this.pixelsToWorkspaceUnits_(currentDragDeltaXY);\n  var newLoc = Blockly.utils.Coordinate.sum(this.startXY_, delta);\n\n  this.draggingBlock_.moveDuringDrag(newLoc);\n  this.dragIcons_(delta);\n\n  this.deleteArea_ = this.workspace_.isDeleteArea(e);\n  this.draggedConnectionManager_.update(delta, this.deleteArea_);\n\n  this.updateCursorDuringBlockDrag_();\n};\n\n/**\n * Finish a block drag and put the block back on the workspace.\n * @param {!Event} e The mouseup/touchend event.\n * @param {!Blockly.utils.Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at the start of the drag, in pixel units.\n * @package\n */\nBlockly.BlockDragger.prototype.endBlockDrag = function(e, currentDragDeltaXY) {\n  // Make sure internal state is fresh.\n  this.dragBlock(e, currentDragDeltaXY);\n  this.dragIconData_ = [];\n  this.fireDragEndEvent_();\n\n  Blockly.utils.dom.stopTextWidthCache();\n\n  Blockly.blockAnimations.disconnectUiStop();\n\n  var delta = this.pixelsToWorkspaceUnits_(currentDragDeltaXY);\n  var newLoc = Blockly.utils.Coordinate.sum(this.startXY_, delta);\n  this.draggingBlock_.moveOffDragSurface(newLoc);\n\n  var deleted = this.maybeDeleteBlock_();\n  if (!deleted) {\n    // These are expensive and don't need to be done if we're deleting.\n    this.draggingBlock_.moveConnections(delta.x, delta.y);\n    this.draggingBlock_.setDragging(false);\n    this.fireMoveEvent_();\n    if (this.draggedConnectionManager_.wouldConnectBlock()) {\n      // Applying connections also rerenders the relevant blocks.\n      this.draggedConnectionManager_.applyConnections();\n    } else {\n      this.draggingBlock_.render();\n    }\n    this.draggingBlock_.scheduleSnapAndBump();\n  }\n  this.workspace_.setResizesEnabled(true);\n\n  var toolbox = this.workspace_.getToolbox();\n  if (toolbox && typeof toolbox.removeStyle == 'function') {\n    var style = this.draggingBlock_.isDeletable() ? 'blocklyToolboxDelete' :\n        'blocklyToolboxGrab';\n    toolbox.removeStyle(style);\n  }\n  Blockly.Events.setGroup(false);\n};\n\n/**\n * Fire a UI event at the end of a block drag.\n * @private\n */\nBlockly.BlockDragger.prototype.fireDragEndEvent_ = function() {\n  var event = new Blockly.Events.Ui(this.draggingBlock_, 'dragStop',\n      this.draggingBlock_.getDescendants(false), null);\n  Blockly.Events.fire(event);\n};\n\n/**\n * Fire a move event at the end of a block drag.\n * @private\n */\nBlockly.BlockDragger.prototype.fireMoveEvent_ = function() {\n  var event = new Blockly.Events.BlockMove(this.draggingBlock_);\n  event.oldCoordinate = this.startXY_;\n  event.recordNew();\n  Blockly.Events.fire(event);\n};\n\n/**\n * Shut the trash can and, if necessary, delete the dragging block.\n * Should be called at the end of a block drag.\n * @return {boolean} Whether the block was deleted.\n * @private\n */\nBlockly.BlockDragger.prototype.maybeDeleteBlock_ = function() {\n  var trashcan = this.workspace_.trashcan;\n\n  if (this.wouldDeleteBlock_) {\n    if (trashcan) {\n      setTimeout(trashcan.closeLid.bind(trashcan), 100);\n    }\n    // Fire a move event, so we know where to go back to for an undo.\n    this.fireMoveEvent_();\n    this.draggingBlock_.dispose(false, true);\n    Blockly.draggingConnections = [];\n  } else if (trashcan) {\n    // Make sure the trash can lid is closed.\n    trashcan.closeLid();\n  }\n  return this.wouldDeleteBlock_;\n};\n\n/**\n * Update the cursor (and possibly the trash can lid) to reflect whether the\n * dragging block would be deleted if released immediately.\n * @private\n */\nBlockly.BlockDragger.prototype.updateCursorDuringBlockDrag_ = function() {\n  this.wouldDeleteBlock_ = this.draggedConnectionManager_.wouldDeleteBlock();\n  var trashcan = this.workspace_.trashcan;\n  if (this.wouldDeleteBlock_) {\n    this.draggingBlock_.setDeleteStyle(true);\n    if (this.deleteArea_ == Blockly.DELETE_AREA_TRASH && trashcan) {\n      trashcan.setLidOpen(true);\n    }\n  } else {\n    this.draggingBlock_.setDeleteStyle(false);\n    if (trashcan) {\n      trashcan.setLidOpen(false);\n    }\n  }\n};\n\n/**\n * Convert a coordinate object from pixels to workspace units, including a\n * correction for mutator workspaces.\n * This function does not consider differing origins.  It simply scales the\n * input's x and y values.\n * @param {!Blockly.utils.Coordinate} pixelCoord A coordinate with x and y values\n *     in CSS pixel units.\n * @return {!Blockly.utils.Coordinate} The input coordinate divided by the workspace\n *     scale.\n * @private\n */\nBlockly.BlockDragger.prototype.pixelsToWorkspaceUnits_ = function(pixelCoord) {\n  var result = new Blockly.utils.Coordinate(\n      pixelCoord.x / this.workspace_.scale,\n      pixelCoord.y / this.workspace_.scale);\n  if (this.workspace_.isMutator) {\n    // If we're in a mutator, its scale is always 1, purely because of some\n    // oddities in our rendering optimizations.  The actual scale is the same as\n    // the scale on the parent workspace.\n    // Fix that for dragging.\n    var mainScale = this.workspace_.options.parentWorkspace.scale;\n    result.scale(1 / mainScale);\n  }\n  return result;\n};\n\n/**\n * Move all of the icons connected to this drag.\n * @param {!Blockly.utils.Coordinate} dxy How far to move the icons from their\n *     original positions, in workspace units.\n * @private\n */\nBlockly.BlockDragger.prototype.dragIcons_ = function(dxy) {\n  // Moving icons moves their associated bubbles.\n  for (var i = 0; i < this.dragIconData_.length; i++) {\n    var data = this.dragIconData_[i];\n    data.icon.setIconLocation(Blockly.utils.Coordinate.sum(data.location, dxy));\n  }\n};\n\n/**\n * Get a list of the insertion markers that currently exist.  Drags have 0, 1,\n * or 2 insertion markers.\n * @return {!Array.<!Blockly.BlockSvg>} A possibly empty list of insertion\n *     marker blocks.\n * @package\n */\nBlockly.BlockDragger.prototype.getInsertionMarkers = function() {\n  // No insertion markers with the old style of dragged connection managers.\n  if (this.draggedConnectionManager_ &&\n      this.draggedConnectionManager_.getInsertionMarkers) {\n    return this.draggedConnectionManager_.getInsertionMarkers();\n  }\n  return [];\n};\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that encapsulates logic for checking whether a potential\n * connection is safe and valid.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.ConnectionChecker');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.registry');\n\ngoog.requireType('Blockly.Connection');\ngoog.requireType('Blockly.IConnectionChecker');\n\n\n/**\n * Class for connection type checking logic.\n * @implements {Blockly.IConnectionChecker}\n * @constructor\n */\nBlockly.ConnectionChecker = function() {\n};\n\n/**\n * Check whether the current connection can connect with the target\n * connection.\n * @param {Blockly.Connection} a Connection to check compatibility with.\n * @param {Blockly.Connection} b Connection to check compatibility with.\n * @param {boolean} isDragging True if the connection is being made by dragging\n *     a block.\n * @param {number=} opt_distance The max allowable distance between the\n *     connections for drag checks.\n * @return {boolean} Whether the connection is legal.\n * @public\n */\nBlockly.ConnectionChecker.prototype.canConnect = function(a, b,\n    isDragging, opt_distance) {\n  return this.canConnectWithReason(a, b, isDragging, opt_distance) ==\n      Blockly.Connection.CAN_CONNECT;\n};\n\n/**\n * Checks whether the current connection can connect with the target\n * connection, and return an error code if there are problems.\n * @param {Blockly.Connection} a Connection to check compatibility with.\n * @param {Blockly.Connection} b Connection to check compatibility with.\n * @param {boolean} isDragging True if the connection is being made by dragging\n *     a block.\n * @param {number=} opt_distance The max allowable distance between the\n *     connections for drag checks.\n * @return {number} Blockly.Connection.CAN_CONNECT if the connection is legal,\n *    an error code otherwise.\n * @public\n */\nBlockly.ConnectionChecker.prototype.canConnectWithReason = function(\n    a, b, isDragging, opt_distance) {\n  var safety = this.doSafetyChecks(a, b);\n  if (safety != Blockly.Connection.CAN_CONNECT) {\n    return safety;\n  }\n\n  // If the safety checks passed, both connections are non-null.\n  var connOne = /** @type {!Blockly.Connection} **/ (a);\n  var connTwo = /** @type {!Blockly.Connection} **/ (b);\n  if (!this.doTypeChecks(connOne, connTwo)) {\n    return Blockly.Connection.REASON_CHECKS_FAILED;\n  }\n\n  if (isDragging &&\n      !this.doDragChecks(\n          /** @type {!Blockly.RenderedConnection} **/ (a),\n          /** @type {!Blockly.RenderedConnection} **/ (b),\n          opt_distance || 0)) {\n    return Blockly.Connection.REASON_DRAG_CHECKS_FAILED;\n  }\n\n  return Blockly.Connection.CAN_CONNECT;\n};\n\n/**\n * Helper method that translates a connection error code into a string.\n * @param {number} errorCode The error code.\n * @param {Blockly.Connection} a One of the two connections being checked.\n * @param {Blockly.Connection} b The second of the two connections being\n *     checked.\n * @return {string} A developer-readable error string.\n * @public\n */\nBlockly.ConnectionChecker.prototype.getErrorMessage = function(errorCode,\n    a, b) {\n  switch (errorCode) {\n    case Blockly.Connection.REASON_SELF_CONNECTION:\n      return 'Attempted to connect a block to itself.';\n    case Blockly.Connection.REASON_DIFFERENT_WORKSPACES:\n      // Usually this means one block has been deleted.\n      return 'Blocks not on same workspace.';\n    case Blockly.Connection.REASON_WRONG_TYPE:\n      return 'Attempt to connect incompatible types.';\n    case Blockly.Connection.REASON_TARGET_NULL:\n      return 'Target connection is null.';\n    case Blockly.Connection.REASON_CHECKS_FAILED:\n      var connOne = /** @type {!Blockly.Connection} **/ (a);\n      var connTwo = /** @type {!Blockly.Connection} **/ (b);\n      var msg = 'Connection checks failed. ';\n      msg += connOne + ' expected ' + connOne.getCheck() + ', found ' + connTwo.getCheck();\n      return msg;\n    case Blockly.Connection.REASON_SHADOW_PARENT:\n      return 'Connecting non-shadow to shadow block.';\n    case Blockly.Connection.REASON_DRAG_CHECKS_FAILED:\n      return 'Drag checks failed.';\n    default:\n      return 'Unknown connection failure: this should never happen!';\n  }\n};\n\n/**\n * Check that connecting the given connections is safe, meaning that it would\n * not break any of Blockly's basic assumptions (e.g. no self connections).\n * @param {Blockly.Connection} a The first of the connections to check.\n * @param {Blockly.Connection} b The second of the connections to check.\n * @return {number} An enum with the reason this connection is safe or unsafe.\n * @public\n */\nBlockly.ConnectionChecker.prototype.doSafetyChecks = function(a, b) {\n  if (!a || !b) {\n    return Blockly.Connection.REASON_TARGET_NULL;\n  }\n  if (a.isSuperior()) {\n    var blockA = a.getSourceBlock();\n    var blockB = b.getSourceBlock();\n  } else {\n    var blockB = a.getSourceBlock();\n    var blockA = b.getSourceBlock();\n  }\n  if (blockA == blockB) {\n    return Blockly.Connection.REASON_SELF_CONNECTION;\n  } else if (b.type != Blockly.OPPOSITE_TYPE[a.type]) {\n    return Blockly.Connection.REASON_WRONG_TYPE;\n  } else if (blockA.workspace !== blockB.workspace) {\n    return Blockly.Connection.REASON_DIFFERENT_WORKSPACES;\n  } else if (blockA.isShadow() && !blockB.isShadow()) {\n    return Blockly.Connection.REASON_SHADOW_PARENT;\n  }\n  return Blockly.Connection.CAN_CONNECT;\n};\n\n/**\n * Check whether this connection is compatible with another connection with\n * respect to the value type system.  E.g. square_root(\"Hello\") is not\n * compatible.\n * @param {!Blockly.Connection} a Connection to compare.\n * @param {!Blockly.Connection} b Connection to compare against.\n * @return {boolean} True if the connections share a type.\n * @public\n */\nBlockly.ConnectionChecker.prototype.doTypeChecks = function(a, b) {\n  var checkArrayOne = a.getCheck();\n  var checkArrayTwo = b.getCheck();\n\n  if (!checkArrayOne || !checkArrayTwo) {\n    // One or both sides are promiscuous enough that anything will fit.\n    return true;\n  }\n  // Find any intersection in the check lists.\n  for (var i = 0; i < checkArrayOne.length; i++) {\n    if (checkArrayTwo.indexOf(checkArrayOne[i]) != -1) {\n      return true;\n    }\n  }\n  // No intersection.\n  return false;\n};\n\n/**\n * Check whether this connection can be made by dragging.\n * @param {!Blockly.RenderedConnection} a Connection to compare.\n * @param {!Blockly.RenderedConnection} b Connection to compare against.\n * @param {number} distance The maximum allowable distance between connections.\n * @return {boolean} True if the connection is allowed during a drag.\n * @public\n */\nBlockly.ConnectionChecker.prototype.doDragChecks = function(a, b, distance) {\n  if (a.distanceFrom(b) > distance) {\n    return false;\n  }\n\n  // Don't consider insertion markers.\n  if (b.getSourceBlock().isInsertionMarker()) {\n    return false;\n  }\n\n  switch (b.type) {\n    case Blockly.PREVIOUS_STATEMENT:\n      return this.canConnectToPrevious_(a, b);\n    case Blockly.OUTPUT_VALUE: {\n      // Don't offer to connect an already connected left (male) value plug to\n      // an available right (female) value plug.\n      if ((b.isConnected() &&\n          !b.targetBlock().isInsertionMarker()) ||\n          a.isConnected()) {\n        return false;\n      }\n      break;\n    }\n    case Blockly.INPUT_VALUE: {\n      // Offering to connect the left (male) of a value block to an already\n      // connected value pair is ok, we'll splice it in.\n      // However, don't offer to splice into an immovable block.\n      if (b.isConnected() &&\n          !b.targetBlock().isMovable() &&\n          !b.targetBlock().isShadow()) {\n        return false;\n      }\n      break;\n    }\n    case Blockly.NEXT_STATEMENT: {\n      // Don't let a block with no next connection bump other blocks out of the\n      // stack.  But covering up a shadow block or stack of shadow blocks is\n      // fine.  Similarly, replacing a terminal statement with another terminal\n      // statement is allowed.\n      if (b.isConnected() &&\n          !a.getSourceBlock().nextConnection &&\n          !b.targetBlock().isShadow() &&\n          b.targetBlock().nextConnection) {\n        return false;\n      }\n      break;\n    }\n    default:\n      // Unexpected connection type.\n      return false;\n  }\n\n  // Don't let blocks try to connect to themselves or ones they nest.\n  if (Blockly.draggingConnections.indexOf(b) != -1) {\n    return false;\n  }\n\n  return true;\n};\n\n/**\n * Helper function for drag checking.\n * @param {!Blockly.Connection} a The connection to check, which must be a\n *     statement input or next connection.\n * @param {!Blockly.Connection} b A nearby connection to check, which\n *     must be a previous connection.\n * @return {boolean} True if the connection is allowed, false otherwise.\n * @protected\n */\nBlockly.ConnectionChecker.prototype.canConnectToPrevious_ = function(a, b) {\n  if (a.targetConnection) {\n    // This connection is already occupied.\n    // A next connection will never disconnect itself mid-drag.\n    return false;\n  }\n\n  // Don't let blocks try to connect to themselves or ones they nest.\n  if (Blockly.draggingConnections.indexOf(b) != -1) {\n    return false;\n  }\n\n  if (!b.targetConnection) {\n    return true;\n  }\n\n  var targetBlock = b.targetBlock();\n  // If it is connected to a real block, game over.\n  if (!targetBlock.isInsertionMarker()) {\n    return false;\n  }\n  // If it's connected to an insertion marker but that insertion marker\n  // is the first block in a stack, it's still fine.  If that insertion\n  // marker is in the middle of a stack, it won't work.\n  return !targetBlock.getPreviousBlock();\n};\n\nBlockly.registry.register(Blockly.registry.Type.CONNECTION_CHECKER,\n    Blockly.registry.DEFAULT, Blockly.ConnectionChecker);\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a map of variables and their types.\n * @author marisaleung@google.com (Marisa Leung)\n */\n'use strict';\n\ngoog.provide('Blockly.VariableMap');\n\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.VarDelete');\ngoog.require('Blockly.Events.VarRename');\ngoog.require('Blockly.Msg');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * Class for a variable map.  This contains a dictionary data structure with\n * variable types as keys and lists of variables as values.  The list of\n * variables are the type indicated by the key.\n * @param {!Blockly.Workspace} workspace The workspace this map belongs to.\n * @constructor\n */\nBlockly.VariableMap = function(workspace) {\n  /**\n   * A map from variable type to list of variable names.  The lists contain all\n   * of the named variables in the workspace, including variables\n   * that are not currently in use.\n   * @type {!Object.<string, !Array.<Blockly.VariableModel>>}\n   * @private\n   */\n  this.variableMap_ = Object.create(null);\n\n  /**\n   * The workspace this map belongs to.\n   * @type {!Blockly.Workspace}\n   */\n  this.workspace = workspace;\n};\n\n/**\n * Clear the variable map.\n */\nBlockly.VariableMap.prototype.clear = function() {\n  this.variableMap_ = Object.create(null);\n};\n\n/* Begin functions for renaming variables. */\n\n/**\n * Rename the given variable by updating its name in the variable map.\n * @param {!Blockly.VariableModel} variable Variable to rename.\n * @param {string} newName New variable name.\n * @package\n */\nBlockly.VariableMap.prototype.renameVariable = function(variable, newName) {\n  var type = variable.type;\n  var conflictVar = this.getVariable(newName, type);\n  var blocks = this.workspace.getAllBlocks(false);\n  Blockly.Events.setGroup(true);\n  try {\n    // The IDs may match if the rename is a simple case change (name1 -> Name1).\n    if (!conflictVar || conflictVar.getId() == variable.getId()) {\n      this.renameVariableAndUses_(variable, newName, blocks);\n    } else {\n      this.renameVariableWithConflict_(variable, newName, conflictVar, blocks);\n    }\n  } finally {\n    Blockly.Events.setGroup(false);\n  }\n};\n\n/**\n * Rename a variable by updating its name in the variable map. Identify the\n * variable to rename with the given ID.\n * @param {string} id ID of the variable to rename.\n * @param {string} newName New variable name.\n */\nBlockly.VariableMap.prototype.renameVariableById = function(id, newName) {\n  var variable = this.getVariableById(id);\n  if (!variable) {\n    throw Error('Tried to rename a variable that didn\\'t exist. ID: ' + id);\n  }\n\n  this.renameVariable(variable, newName);\n};\n\n/**\n * Update the name of the given variable and refresh all references to it.\n * The new name must not conflict with any existing variable names.\n * @param {!Blockly.VariableModel} variable Variable to rename.\n * @param {string} newName New variable name.\n * @param {!Array.<!Blockly.Block>} blocks The list of all blocks in the\n *     workspace.\n * @private\n */\nBlockly.VariableMap.prototype.renameVariableAndUses_ = function(variable,\n    newName, blocks) {\n  Blockly.Events.fire(new Blockly.Events.VarRename(variable, newName));\n  variable.name = newName;\n  for (var i = 0; i < blocks.length; i++) {\n    blocks[i].updateVarName(variable);\n  }\n};\n\n/**\n * Update the name of the given variable to the same name as an existing\n * variable.  The two variables are coalesced into a single variable with the ID\n * of the existing variable that was already using newName.\n * Refresh all references to the variable.\n * @param {!Blockly.VariableModel} variable Variable to rename.\n * @param {string} newName New variable name.\n * @param {!Blockly.VariableModel} conflictVar The variable that was already\n *     using newName.\n * @param {!Array.<!Blockly.Block>} blocks The list of all blocks in the\n *     workspace.\n * @private\n */\nBlockly.VariableMap.prototype.renameVariableWithConflict_ = function(variable,\n    newName, conflictVar, blocks) {\n  var type = variable.type;\n  var oldCase = conflictVar.name;\n\n  if (newName != oldCase) {\n    // Simple rename to change the case and update references.\n    this.renameVariableAndUses_(conflictVar, newName, blocks);\n  }\n\n  // These blocks now refer to a different variable.\n  // These will fire change events.\n  for (var i = 0; i < blocks.length; i++) {\n    blocks[i].renameVarById(variable.getId(), conflictVar.getId());\n  }\n\n  // Finally delete the original variable, which is now unreferenced.\n  Blockly.Events.fire(new Blockly.Events.VarDelete(variable));\n  // And remove it from the list.\n  var variableList = this.getVariablesOfType(type);\n  var variableIndex = variableList.indexOf(variable);\n  this.variableMap_[type].splice(variableIndex, 1);\n\n};\n\n/* End functions for renaming variables. */\n\n/**\n * Create a variable with a given name, optional type, and optional ID.\n * @param {string} name The name of the variable. This must be unique across\n *     variables and procedures.\n * @param {?string=} opt_type The type of the variable like 'int' or 'string'.\n *     Does not need to be unique. Field_variable can filter variables based on\n *     their type. This will default to '' which is a specific type.\n * @param {?string=} opt_id The unique ID of the variable. This will default to\n *     a UUID.\n * @return {!Blockly.VariableModel} The newly created variable.\n */\nBlockly.VariableMap.prototype.createVariable = function(name,\n    opt_type, opt_id) {\n  var variable = this.getVariable(name, opt_type);\n  if (variable) {\n    if (opt_id && variable.getId() != opt_id) {\n      throw Error('Variable \"' + name + '\" is already in use and its id is \"' +\n          variable.getId() + '\" which conflicts with the passed in ' +\n          'id, \"' + opt_id + '\".');\n    }\n    // The variable already exists and has the same ID.\n    return variable;\n  }\n  if (opt_id && this.getVariableById(opt_id)) {\n    throw Error('Variable id, \"' + opt_id + '\", is already in use.');\n  }\n  var id = opt_id || Blockly.utils.genUid();\n  var type = opt_type || '';\n  variable = new Blockly.VariableModel(this.workspace, name, type, id);\n\n  var variables = this.variableMap_[type] || [];\n  variables.push(variable);\n  // Delete the list of variables of this type, and re-add it so that\n  // the most recent addition is at the end.\n  // This is used so the toolbox's set block is set to the most recent variable.\n  delete this.variableMap_[type];\n  this.variableMap_[type] = variables;\n\n  return variable;\n};\n\n/* Begin functions for variable deletion. */\n\n/**\n * Delete a variable.\n * @param {!Blockly.VariableModel} variable Variable to delete.\n */\nBlockly.VariableMap.prototype.deleteVariable = function(variable) {\n  var variableList = this.variableMap_[variable.type];\n  for (var i = 0, tempVar; (tempVar = variableList[i]); i++) {\n    if (tempVar.getId() == variable.getId()) {\n      variableList.splice(i, 1);\n      Blockly.Events.fire(new Blockly.Events.VarDelete(variable));\n      return;\n    }\n  }\n};\n\n/**\n * Delete a variables by the passed in ID and all of its uses from this\n * workspace. May prompt the user for confirmation.\n * @param {string} id ID of variable to delete.\n */\nBlockly.VariableMap.prototype.deleteVariableById = function(id) {\n  var variable = this.getVariableById(id);\n  if (variable) {\n    // Check whether this variable is a function parameter before deleting.\n    var variableName = variable.name;\n    var uses = this.getVariableUsesById(id);\n    for (var i = 0, block; (block = uses[i]); i++) {\n      if (block.type == 'procedures_defnoreturn' ||\n        block.type == 'procedures_defreturn') {\n        var procedureName = block.getFieldValue('NAME');\n        var deleteText = Blockly.Msg['CANNOT_DELETE_VARIABLE_PROCEDURE'].\n            replace('%1', variableName).\n            replace('%2', procedureName);\n        Blockly.alert(deleteText);\n        return;\n      }\n    }\n\n    var map = this;\n    if (uses.length > 1) {\n      // Confirm before deleting multiple blocks.\n      var confirmText = Blockly.Msg['DELETE_VARIABLE_CONFIRMATION'].\n          replace('%1', String(uses.length)).\n          replace('%2', variableName);\n      Blockly.confirm(confirmText,\n          function(ok) {\n            if (ok && variable) {\n              map.deleteVariableInternal(variable, uses);\n            }\n          });\n    } else {\n      // No confirmation necessary for a single block.\n      map.deleteVariableInternal(variable, uses);\n    }\n  } else {\n    console.warn(\"Can't delete non-existent variable: \" + id);\n  }\n};\n\n/**\n * Deletes a variable and all of its uses from this workspace without asking the\n * user for confirmation.\n * @param {!Blockly.VariableModel} variable Variable to delete.\n * @param {!Array.<!Blockly.Block>} uses An array of uses of the variable.\n * @package\n */\nBlockly.VariableMap.prototype.deleteVariableInternal = function(variable,\n    uses) {\n  var existingGroup = Blockly.Events.getGroup();\n  if (!existingGroup) {\n    Blockly.Events.setGroup(true);\n  }\n  try {\n    for (var i = 0; i < uses.length; i++) {\n      uses[i].dispose(true);\n    }\n    this.deleteVariable(variable);\n  } finally {\n    if (!existingGroup) {\n      Blockly.Events.setGroup(false);\n    }\n  }\n};\n\n/* End functions for variable deletion. */\n\n/**\n * Find the variable by the given name and type and return it.  Return null if\n *     it is not found.\n * @param {string} name The name to check for.\n * @param {?string=} opt_type The type of the variable.  If not provided it\n *     defaults to the empty string, which is a specific type.\n * @return {Blockly.VariableModel} The variable with the given name, or null if\n *     it was not found.\n */\nBlockly.VariableMap.prototype.getVariable = function(name, opt_type) {\n  var type = opt_type || '';\n  var list = this.variableMap_[type];\n  if (list) {\n    for (var j = 0, variable; (variable = list[j]); j++) {\n      if (Blockly.Names.equals(variable.name, name)) {\n        return variable;\n      }\n    }\n  }\n  return null;\n};\n\n/**\n * Find the variable by the given ID and return it. Return null if it is not\n *     found.\n * @param {string} id The ID to check for.\n * @return {Blockly.VariableModel} The variable with the given ID.\n */\nBlockly.VariableMap.prototype.getVariableById = function(id) {\n  var keys = Object.keys(this.variableMap_);\n  for (var i = 0; i < keys.length; i++ ) {\n    var key = keys[i];\n    for (var j = 0, variable; (variable = this.variableMap_[key][j]); j++) {\n      if (variable.getId() == id) {\n        return variable;\n      }\n    }\n  }\n  return null;\n};\n\n/**\n * Get a list containing all of the variables of a specified type. If type is\n *     null, return list of variables with empty string type.\n * @param {?string} type Type of the variables to find.\n * @return {!Array.<!Blockly.VariableModel>} The sought after variables of the\n *     passed in type. An empty array if none are found.\n */\nBlockly.VariableMap.prototype.getVariablesOfType = function(type) {\n  type = type || '';\n  var variable_list = this.variableMap_[type];\n  if (variable_list) {\n    return variable_list.slice();\n  }\n  return [];\n};\n\n/**\n * Return all variable and potential variable types.  This list always contains\n * the empty string.\n * @param {?Blockly.Workspace} ws The workspace used to look for potential\n * variables. This can be different than the workspace stored on this object\n * if the passed in ws is a flyout workspace.\n * @return {!Array.<string>} List of variable types.\n * @package\n */\nBlockly.VariableMap.prototype.getVariableTypes = function(ws) {\n  var variableMap = {};\n  Blockly.utils.object.mixin(variableMap, this.variableMap_);\n  if (ws && ws.getPotentialVariableMap()) {\n    Blockly.utils.object.mixin(variableMap,\n        ws.getPotentialVariableMap().variableMap_);\n  }\n  var types = Object.keys(variableMap);\n  var hasEmpty = false;\n  for (var i = 0; i < types.length; i++) {\n    if (types[i] == '') {\n      hasEmpty = true;\n    }\n  }\n  if (!hasEmpty) {\n    types.push('');\n  }\n  return types;\n};\n\n/**\n * Return all variables of all types.\n * @return {!Array.<!Blockly.VariableModel>} List of variable models.\n */\nBlockly.VariableMap.prototype.getAllVariables = function() {\n  var all_variables = [];\n  for (var key in this.variableMap_) {\n    all_variables = all_variables.concat(this.variableMap_[key]);\n  }\n  return all_variables;\n};\n\n/**\n * Returns all of the variable names of all types.\n * @return {!Array.<string>} All of the variable names of all types.\n */\nBlockly.VariableMap.prototype.getAllVariableNames = function() {\n  var allNames = [];\n  for (var key in this.variableMap_) {\n    var variables = this.variableMap_[key];\n    for (var i = 0, variable; (variable = variables[i]); i++) {\n      allNames.push(variable.name);\n    }\n  }\n  return allNames;\n};\n\n/**\n * Find all the uses of a named variable.\n * @param {string} id ID of the variable to find.\n * @return {!Array.<!Blockly.Block>} Array of block usages.\n */\nBlockly.VariableMap.prototype.getVariableUsesById = function(id) {\n  var uses = [];\n  var blocks = this.workspace.getAllBlocks(false);\n  // Iterate through every block and check the name.\n  for (var i = 0; i < blocks.length; i++) {\n    var blockVariables = blocks[i].getVarModels();\n    if (blockVariables) {\n      for (var j = 0; j < blockVariables.length; j++) {\n        if (blockVariables[j].getId() == id) {\n          uses.push(blocks[i]);\n        }\n      }\n    }\n  }\n  return uses;\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a workspace.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Workspace');\n\ngoog.require('Blockly.ConnectionChecker');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Options');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.math');\ngoog.require('Blockly.VariableMap');\n\ngoog.requireType('Blockly.IASTNodeLocation');\ngoog.requireType('Blockly.IConnectionChecker');\n\n\n/**\n * Class for a workspace.  This is a data structure that contains blocks.\n * There is no UI, and can be created headlessly.\n * @param {!Blockly.Options=} opt_options Dictionary of options.\n * @constructor\n * @implements {Blockly.IASTNodeLocation}\n */\nBlockly.Workspace = function(opt_options) {\n  /** @type {string} */\n  this.id = Blockly.utils.genUid();\n  Blockly.Workspace.WorkspaceDB_[this.id] = this;\n  /** @type {!Blockly.Options} */\n  this.options = opt_options ||\n      new Blockly.Options(/** @type {!Blockly.BlocklyOptions} */ ({}));\n  /** @type {boolean} */\n  this.RTL = !!this.options.RTL;\n  /** @type {boolean} */\n  this.horizontalLayout = !!this.options.horizontalLayout;\n  /** @type {number} */\n  this.toolboxPosition = this.options.toolboxPosition;\n\n  var connectionCheckerClass = Blockly.registry.getClassFromOptions(\n      Blockly.registry.Type.CONNECTION_CHECKER, this.options);\n  /**\n   * An object that encapsulates logic for safety, type, and dragging checks.\n   * @type {!Blockly.IConnectionChecker}\n   */\n  this.connectionChecker = new connectionCheckerClass(this);\n\n  /**\n   * @type {!Array.<!Blockly.Block>}\n   * @private\n   */\n  this.topBlocks_ = [];\n  /**\n   * @type {!Array.<!Blockly.WorkspaceComment>}\n   * @private\n   */\n  this.topComments_ = [];\n  /**\n   * @type {!Object}\n   * @private\n   */\n  this.commentDB_ = Object.create(null);\n  /**\n   * @type {!Array.<!Function>}\n   * @private\n   */\n  this.listeners_ = [];\n  /**\n   * @type {!Array.<!Blockly.Events.Abstract>}\n   * @protected\n   */\n  this.undoStack_ = [];\n  /**\n   * @type {!Array.<!Blockly.Events.Abstract>}\n   * @protected\n   */\n  this.redoStack_ = [];\n  /**\n   * @type {!Object}\n   * @private\n   */\n  this.blockDB_ = Object.create(null);\n  /**\n   * @type {!Object}\n   * @private\n   */\n  this.typedBlocksDB_ = Object.create(null);\n\n  /**\n   * A map from variable type to list of variable names.  The lists contain all\n   * of the named variables in the workspace, including variables\n   * that are not currently in use.\n   * @type {!Blockly.VariableMap}\n   * @private\n   */\n  this.variableMap_ = new Blockly.VariableMap(this);\n\n  /**\n   * Blocks in the flyout can refer to variables that don't exist in the main\n   * workspace.  For instance, the \"get item in list\" block refers to an \"item\"\n   * variable regardless of whether the variable has been created yet.\n   * A FieldVariable must always refer to a Blockly.VariableModel.  We reconcile\n   * these by tracking \"potential\" variables in the flyout.  These variables\n   * become real when references to them are dragged into the main workspace.\n   * @type {Blockly.VariableMap}\n   * @private\n   */\n  this.potentialVariableMap_ = null;\n};\n\n/**\n * Returns `true` if the workspace is visible and `false` if it's headless.\n * @type {boolean}\n */\nBlockly.Workspace.prototype.rendered = false;\n\n/**\n * Returns `true` if the workspace is currently in the process of a bulk clear.\n * @type {boolean}\n * @package\n */\nBlockly.Workspace.prototype.isClearing = false;\n\n/**\n * Maximum number of undo events in stack. `0` turns off undo, `Infinity` sets\n * it to unlimited.\n * @type {number}\n */\nBlockly.Workspace.prototype.MAX_UNDO = 1024;\n\n/**\n * Set of databases for rapid lookup of connection locations.\n * @type {Array.<!Blockly.ConnectionDB>}\n */\nBlockly.Workspace.prototype.connectionDBList = null;\n\n/**\n * Dispose of this workspace.\n * Unlink from all DOM elements to prevent memory leaks.\n * @suppress {checkTypes}\n */\nBlockly.Workspace.prototype.dispose = function() {\n  this.listeners_.length = 0;\n  this.clear();\n  // Remove from workspace database.\n  delete Blockly.Workspace.WorkspaceDB_[this.id];\n};\n\n/**\n * Angle away from the horizontal to sweep for blocks.  Order of execution is\n * generally top to bottom, but a small angle changes the scan to give a bit of\n * a left to right bias (reversed in RTL).  Units are in degrees.\n * See: https://tvtropes.org/pmwiki/pmwiki.php/Main/DiagonalBilling\n */\nBlockly.Workspace.SCAN_ANGLE = 3;\n\n/**\n * Compare function for sorting objects (blocks, comments, etc) by position;\n *    top to bottom (with slight LTR or RTL bias).\n * @param {!Blockly.Block | !Blockly.WorkspaceComment} a The first object to\n *    compare.\n * @param {!Blockly.Block | !Blockly.WorkspaceComment} b The second object to\n *    compare.\n * @return {number} The comparison value. This tells Array.sort() how to change\n *    object a's index.\n * @private\n */\nBlockly.Workspace.prototype.sortObjects_ = function(a, b) {\n  var aXY = a.getRelativeToSurfaceXY();\n  var bXY = b.getRelativeToSurfaceXY();\n  return (aXY.y + Blockly.Workspace.prototype.sortObjects_.offset * aXY.x) -\n      (bXY.y + Blockly.Workspace.prototype.sortObjects_.offset * bXY.x);\n};\n\n/**\n * Adds a block to the list of top blocks.\n * @param {!Blockly.Block} block Block to add.\n */\nBlockly.Workspace.prototype.addTopBlock = function(block) {\n  this.topBlocks_.push(block);\n};\n\n/**\n * Removes a block from the list of top blocks.\n * @param {!Blockly.Block} block Block to remove.\n */\nBlockly.Workspace.prototype.removeTopBlock = function(block) {\n  if (!Blockly.utils.arrayRemove(this.topBlocks_, block)) {\n    throw Error('Block not present in workspace\\'s list of top-most blocks.');\n  }\n};\n\n/**\n * Finds the top-level blocks and returns them.  Blocks are optionally sorted\n * by position; top to bottom (with slight LTR or RTL bias).\n * @param {boolean} ordered Sort the list if true.\n * @return {!Array.<!Blockly.Block>} The top-level block objects.\n */\nBlockly.Workspace.prototype.getTopBlocks = function(ordered) {\n  // Copy the topBlocks_ list.\n  var blocks = [].concat(this.topBlocks_);\n  if (ordered && blocks.length > 1) {\n    this.sortObjects_.offset =\n        Math.sin(Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE));\n    if (this.RTL) {\n      this.sortObjects_.offset *= -1;\n    }\n    blocks.sort(this.sortObjects_);\n  }\n  return blocks;\n};\n\n/**\n * Add a block to the list of blocks keyed by type.\n * @param {!Blockly.Block} block Block to add.\n */\nBlockly.Workspace.prototype.addTypedBlock = function(block) {\n  if (!this.typedBlocksDB_[block.type]) {\n    this.typedBlocksDB_[block.type] = [];\n  }\n  this.typedBlocksDB_[block.type].push(block);\n};\n\n/**\n * Remove a block from the list of blocks keyed by type.\n * @param {!Blockly.Block} block Block to remove.\n */\nBlockly.Workspace.prototype.removeTypedBlock = function(block) {\n  this.typedBlocksDB_[block.type].splice(this.typedBlocksDB_[block.type]\n      .indexOf(block), 1);\n  if (!this.typedBlocksDB_[block.type].length) {\n    delete this.typedBlocksDB_[block.type];\n  }\n};\n\n/**\n * Finds the blocks with the associated type and returns them. Blocks are\n * optionally sorted by position; top to bottom (with slight LTR or RTL bias).\n * @param {string} type The type of block to search for.\n * @param {boolean} ordered Sort the list if true.\n * @return {!Array.<!Blockly.Block>} The blocks of the given type.\n */\nBlockly.Workspace.prototype.getBlocksByType = function(type, ordered) {\n  if (!this.typedBlocksDB_[type]) {\n    return [];\n  }\n  var blocks = this.typedBlocksDB_[type].slice(0);\n  if (ordered && blocks.length > 1) {\n    this.sortObjects_.offset =\n        Math.sin(Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE));\n    if (this.RTL) {\n      this.sortObjects_.offset *= -1;\n    }\n    blocks.sort(this.sortObjects_);\n  }\n  return blocks;\n};\n\n/**\n * Adds a comment to the list of top comments.\n * @param {!Blockly.WorkspaceComment} comment comment to add.\n * @package\n */\nBlockly.Workspace.prototype.addTopComment = function(comment) {\n  this.topComments_.push(comment);\n\n  // Note: If the comment database starts to hold block comments, this may need\n  // to move to a separate function.\n  if (this.commentDB_[comment.id]) {\n    console.warn('Overriding an existing comment on this workspace, with id \"' +\n        comment.id + '\"');\n  }\n  this.commentDB_[comment.id] = comment;\n};\n\n/**\n * Removes a comment from the list of top comments.\n * @param {!Blockly.WorkspaceComment} comment comment to remove.\n * @package\n */\nBlockly.Workspace.prototype.removeTopComment = function(comment) {\n  if (!Blockly.utils.arrayRemove(this.topComments_, comment)) {\n    throw Error('Comment not present in workspace\\'s list of top-most ' +\n        'comments.');\n  }\n  // Note: If the comment database starts to hold block comments, this may need\n  // to move to a separate function.\n  delete this.commentDB_[comment.id];\n};\n\n/**\n * Finds the top-level comments and returns them.  Comments are optionally\n * sorted by position; top to bottom (with slight LTR or RTL bias).\n * @param {boolean} ordered Sort the list if true.\n * @return {!Array.<!Blockly.WorkspaceComment>} The top-level comment objects.\n * @package\n */\nBlockly.Workspace.prototype.getTopComments = function(ordered) {\n  // Copy the topComments_ list.\n  var comments = [].concat(this.topComments_);\n  if (ordered && comments.length > 1) {\n    this.sortObjects_.offset =\n        Math.sin(Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE));\n    if (this.RTL) {\n      this.sortObjects_.offset *= -1;\n    }\n    comments.sort(this.sortObjects_);\n  }\n  return comments;\n};\n\n/**\n * Find all blocks in workspace.  Blocks are optionally sorted\n * by position; top to bottom (with slight LTR or RTL bias).\n * @param {boolean} ordered Sort the list if true.\n * @return {!Array.<!Blockly.Block>} Array of blocks.\n */\nBlockly.Workspace.prototype.getAllBlocks = function(ordered) {\n  if (ordered) {\n    // Slow, but ordered.\n    var topBlocks = this.getTopBlocks(true);\n    var blocks = [];\n    for (var i = 0; i < topBlocks.length; i++) {\n      blocks.push.apply(blocks, topBlocks[i].getDescendants(true));\n    }\n  } else {\n    // Fast, but in no particular order.\n    var blocks = this.getTopBlocks(false);\n    for (var i = 0; i < blocks.length; i++) {\n      blocks.push.apply(blocks, blocks[i].getChildren(false));\n    }\n  }\n\n  // Insertion markers exist on the workspace for rendering reasons, but aren't\n  // \"real\" blocks from a developer perspective.\n  var filtered = blocks.filter(function(block) {\n    return !block.isInsertionMarker();\n  });\n\n  return filtered;\n};\n\n/**\n * Dispose of all blocks and comments in workspace.\n */\nBlockly.Workspace.prototype.clear = function() {\n  this.isClearing = true;\n  try {\n    var existingGroup = Blockly.Events.getGroup();\n    if (!existingGroup) {\n      Blockly.Events.setGroup(true);\n    }\n    while (this.topBlocks_.length) {\n      this.topBlocks_[0].dispose(false);\n    }\n    while (this.topComments_.length) {\n      this.topComments_[this.topComments_.length - 1].dispose(false);\n    }\n    if (!existingGroup) {\n      Blockly.Events.setGroup(false);\n    }\n    this.variableMap_.clear();\n    if (this.potentialVariableMap_) {\n      this.potentialVariableMap_.clear();\n    }\n  } finally {\n    this.isClearing = false;\n  }\n};\n\n/* Begin functions that are just pass-throughs to the variable map. */\n/**\n * Rename a variable by updating its name in the variable map. Identify the\n * variable to rename with the given ID.\n * @param {string} id ID of the variable to rename.\n * @param {string} newName New variable name.\n */\nBlockly.Workspace.prototype.renameVariableById = function(id, newName) {\n  this.variableMap_.renameVariableById(id, newName);\n};\n\n/**\n * Create a variable with a given name, optional type, and optional ID.\n * @param {string} name The name of the variable. This must be unique across\n *     variables and procedures.\n * @param {?string=} opt_type The type of the variable like 'int' or 'string'.\n *     Does not need to be unique. Field_variable can filter variables based on\n *     their type. This will default to '' which is a specific type.\n * @param {?string=} opt_id The unique ID of the variable. This will default to\n *     a UUID.\n * @return {!Blockly.VariableModel} The newly created variable.\n */\nBlockly.Workspace.prototype.createVariable = function(name, opt_type, opt_id) {\n  return this.variableMap_.createVariable(name, opt_type, opt_id);\n};\n\n/**\n * Find all the uses of the given variable, which is identified by ID.\n * @param {string} id ID of the variable to find.\n * @return {!Array.<!Blockly.Block>} Array of block usages.\n */\nBlockly.Workspace.prototype.getVariableUsesById = function(id) {\n  return this.variableMap_.getVariableUsesById(id);\n};\n\n/**\n * Delete a variables by the passed in ID and all of its uses from this\n * workspace. May prompt the user for confirmation.\n * @param {string} id ID of variable to delete.\n */\nBlockly.Workspace.prototype.deleteVariableById = function(id) {\n  this.variableMap_.deleteVariableById(id);\n};\n\n/**\n * Find the variable by the given name and return it. Return null if it is not\n *     found.\n * @param {string} name The name to check for.\n * @param {string=} opt_type The type of the variable.  If not provided it\n *     defaults to the empty string, which is a specific type.\n * @return {Blockly.VariableModel} The variable with the given name.\n */\n// TODO (#1559): Possibly delete this function after resolving #1559.\nBlockly.Workspace.prototype.getVariable = function(name, opt_type) {\n  return this.variableMap_.getVariable(name, opt_type);\n};\n\n/**\n * Find the variable by the given ID and return it. Return null if it is not\n *     found.\n * @param {string} id The ID to check for.\n * @return {Blockly.VariableModel} The variable with the given ID.\n */\nBlockly.Workspace.prototype.getVariableById = function(id) {\n  return this.variableMap_.getVariableById(id);\n};\n\n/**\n * Find the variable with the specified type. If type is null, return list of\n *     variables with empty string type.\n * @param {?string} type Type of the variables to find.\n * @return {!Array.<!Blockly.VariableModel>} The sought after variables of the\n *     passed in type. An empty array if none are found.\n */\nBlockly.Workspace.prototype.getVariablesOfType = function(type) {\n  return this.variableMap_.getVariablesOfType(type);\n};\n\n/**\n * Return all variable types.\n * @return {!Array.<string>} List of variable types.\n * @package\n */\nBlockly.Workspace.prototype.getVariableTypes = function() {\n  return this.variableMap_.getVariableTypes(this);\n};\n\n/**\n * Return all variables of all types.\n * @return {!Array.<!Blockly.VariableModel>} List of variable models.\n */\nBlockly.Workspace.prototype.getAllVariables = function() {\n  return this.variableMap_.getAllVariables();\n};\n\n/**\n * Returns all variable names of all types.\n * @return {!Array.<string>} List of all variable names of all types.\n */\nBlockly.Workspace.prototype.getAllVariableNames = function() {\n  return this.variableMap_.getAllVariableNames();\n};\n\n/* End functions that are just pass-throughs to the variable map. */\n\n/**\n * Returns the horizontal offset of the workspace.\n * Intended for LTR/RTL compatibility in XML.\n * Not relevant for a headless workspace.\n * @return {number} Width.\n */\nBlockly.Workspace.prototype.getWidth = function() {\n  return 0;\n};\n\n/**\n * Obtain a newly created block.\n * @param {!string} prototypeName Name of the language object containing\n *     type-specific functions for this block.\n * @param {string=} opt_id Optional ID.  Use this ID if provided, otherwise\n *     create a new ID.\n * @return {!Blockly.Block} The created block.\n */\nBlockly.Workspace.prototype.newBlock = function(prototypeName, opt_id) {\n  return new Blockly.Block(this, prototypeName, opt_id);\n};\n\n/**\n * The number of blocks that may be added to the workspace before reaching\n *     the maxBlocks.\n * @return {number} Number of blocks left.\n */\nBlockly.Workspace.prototype.remainingCapacity = function() {\n  if (isNaN(this.options.maxBlocks)) {\n    return Infinity;\n  }\n\n  return this.options.maxBlocks - this.getAllBlocks(false).length;\n};\n\n/**\n * The number of blocks of the given type that may be added to the workspace\n *    before reaching the maxInstances allowed for that type.\n * @param {string} type Type of block to return capacity for.\n * @return {number} Number of blocks of type left.\n */\nBlockly.Workspace.prototype.remainingCapacityOfType = function(type) {\n  if (!this.options.maxInstances) {\n    return Infinity;\n  }\n\n  var maxInstanceOfType = (this.options.maxInstances[type] !== undefined) ?\n      this.options.maxInstances[type] : Infinity;\n\n  return maxInstanceOfType - this.getBlocksByType(type, false).length;\n};\n\n/**\n * Check if there is remaining capacity for blocks of the given counts to be\n *    created. If the total number of blocks represented by the map is more than\n *    the total remaining capacity, it returns false. If a type count is more\n *    than the remaining capacity for that type, it returns false.\n * @param {!Object} typeCountsMap A map of types to counts (usually representing\n *    blocks to be created).\n * @return {boolean} True if there is capacity for the given map,\n *    false otherwise.\n */\nBlockly.Workspace.prototype.isCapacityAvailable = function(typeCountsMap) {\n  if (!this.hasBlockLimits()) {\n    return true;\n  }\n  var copyableBlocksCount = 0;\n  for (var type in typeCountsMap) {\n    if (typeCountsMap[type] > this.remainingCapacityOfType(type)) {\n      return false;\n    }\n    copyableBlocksCount += typeCountsMap[type];\n  }\n  if (copyableBlocksCount > this.remainingCapacity()) {\n    return false;\n  }\n  return true;\n};\n\n/**\n * Checks if the workspace has any limits on the maximum number of blocks,\n *    or the maximum number of blocks of specific types.\n * @return {boolean} True if it has block limits, false otherwise.\n */\nBlockly.Workspace.prototype.hasBlockLimits = function() {\n  return this.options.maxBlocks != Infinity || !!this.options.maxInstances;\n};\n\n/**\n * Gets the undo stack for workplace.\n * @return {!Array.<!Blockly.Events.Abstract>} undo stack\n * @package\n */\nBlockly.Workspace.prototype.getUndoStack = function() {\n  return this.undoStack_;\n};\n\n/**\n * Gets the redo stack for workplace.\n * @return {!Array.<!Blockly.Events.Abstract>} redo stack\n * @package\n */\nBlockly.Workspace.prototype.getRedoStack = function() {\n  return this.redoStack_;\n};\n\n/**\n * Undo or redo the previous action.\n * @param {boolean} redo False if undo, true if redo.\n */\nBlockly.Workspace.prototype.undo = function(redo) {\n  var inputStack = redo ? this.redoStack_ : this.undoStack_;\n  var outputStack = redo ? this.undoStack_ : this.redoStack_;\n  var inputEvent = inputStack.pop();\n  if (!inputEvent) {\n    return;\n  }\n  var events = [inputEvent];\n  // Do another undo/redo if the next one is of the same group.\n  while (inputStack.length && inputEvent.group &&\n      inputEvent.group == inputStack[inputStack.length - 1].group) {\n    events.push(inputStack.pop());\n  }\n  // Push these popped events on the opposite stack.\n  for (var i = 0, event; (event = events[i]); i++) {\n    outputStack.push(event);\n  }\n  events = Blockly.Events.filter(events, redo);\n  Blockly.Events.recordUndo = false;\n  try {\n    for (var i = 0, event; (event = events[i]); i++) {\n      event.run(redo);\n    }\n  } finally {\n    Blockly.Events.recordUndo = true;\n  }\n};\n\n/**\n * Clear the undo/redo stacks.\n */\nBlockly.Workspace.prototype.clearUndo = function() {\n  this.undoStack_.length = 0;\n  this.redoStack_.length = 0;\n  // Stop any events already in the firing queue from being undoable.\n  Blockly.Events.clearPendingUndo();\n};\n\n/**\n * When something in this workspace changes, call a function.\n * Note that there may be a few recent events already on the stack.  Thus the\n * new change listener might be called with events that occurred a few\n * milliseconds before the change listener was added.\n * @param {!Function} func Function to call.\n * @return {!Function} Obsolete return value, ignore.\n */\nBlockly.Workspace.prototype.addChangeListener = function(func) {\n  this.listeners_.push(func);\n  return func;\n};\n\n/**\n * Stop listening for this workspace's changes.\n * @param {Function} func Function to stop calling.\n */\nBlockly.Workspace.prototype.removeChangeListener = function(func) {\n  Blockly.utils.arrayRemove(this.listeners_, func);\n};\n\n/**\n * Fire a change event.\n * @param {!Blockly.Events.Abstract} event Event to fire.\n */\nBlockly.Workspace.prototype.fireChangeListener = function(event) {\n  if (event.recordUndo) {\n    this.undoStack_.push(event);\n    this.redoStack_.length = 0;\n    while (this.undoStack_.length > this.MAX_UNDO && this.MAX_UNDO >= 0) {\n      this.undoStack_.shift();\n    }\n  }\n  for (var i = 0, func; (func = this.listeners_[i]); i++) {\n    func(event);\n  }\n};\n\n/**\n * Find the block on this workspace with the specified ID.\n * @param {string} id ID of block to find.\n * @return {Blockly.Block} The sought after block, or null if not found.\n */\nBlockly.Workspace.prototype.getBlockById = function(id) {\n  return this.blockDB_[id] || null;\n};\n\n/**\n * Set a block on this workspace with the specified ID.\n * @param {string} id ID of block to set.\n * @param {Blockly.Block} block The block to set.\n * @package\n */\nBlockly.Workspace.prototype.setBlockById = function(id, block) {\n  this.blockDB_[id] = block;\n};\n\n/**\n * Delete a block off this workspace with the specified ID.\n * @param {string} id ID of block to delete.\n * @package\n */\nBlockly.Workspace.prototype.removeBlockById = function(id) {\n  delete this.blockDB_[id];\n};\n\n/**\n * Find the comment on this workspace with the specified ID.\n * @param {string} id ID of comment to find.\n * @return {Blockly.WorkspaceComment} The sought after comment, or null if not\n *     found.\n * @package\n */\nBlockly.Workspace.prototype.getCommentById = function(id) {\n  return this.commentDB_[id] || null;\n};\n\n/**\n * Checks whether all value and statement inputs in the workspace are filled\n * with blocks.\n * @param {boolean=} opt_shadowBlocksAreFilled An optional argument controlling\n *     whether shadow blocks are counted as filled. Defaults to true.\n * @return {boolean} True if all inputs are filled, false otherwise.\n */\nBlockly.Workspace.prototype.allInputsFilled = function(\n    opt_shadowBlocksAreFilled) {\n  var blocks = this.getTopBlocks(false);\n  for (var i = 0, block; (block = blocks[i]); i++) {\n    if (!block.allInputsFilled(opt_shadowBlocksAreFilled)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * Return the variable map that contains \"potential\" variables.\n * These exist in the flyout but not in the workspace.\n * @return {Blockly.VariableMap} The potential variable map.\n * @package\n */\nBlockly.Workspace.prototype.getPotentialVariableMap = function() {\n  return this.potentialVariableMap_;\n};\n\n/**\n * Create and store the potential variable map for this workspace.\n * @package\n */\nBlockly.Workspace.prototype.createPotentialVariableMap = function() {\n  this.potentialVariableMap_ = new Blockly.VariableMap(this);\n};\n\n/**\n * Return the map of all variables on the workspace.\n * @return {!Blockly.VariableMap} The variable map.\n */\nBlockly.Workspace.prototype.getVariableMap = function() {\n  return this.variableMap_;\n};\n\n/**\n * Set the map of all variables on the workspace.\n * @param {!Blockly.VariableMap} variableMap The variable map.\n * @package\n */\nBlockly.Workspace.prototype.setVariableMap = function(variableMap) {\n  this.variableMap_ = variableMap;\n};\n\n/**\n * Database of all workspaces.\n * @private\n */\nBlockly.Workspace.WorkspaceDB_ = Object.create(null);\n\n/**\n * Find the workspace with the specified ID.\n * @param {string} id ID of workspace to find.\n * @return {Blockly.Workspace} The sought after workspace or null if not found.\n */\nBlockly.Workspace.getById = function(id) {\n  return Blockly.Workspace.WorkspaceDB_[id] || null;\n};\n\n/**\n * Find all workspaces.\n * @return {!Array.<!Blockly.Workspace>} Array of workspaces.\n */\nBlockly.Workspace.getAll = function() {\n  var workspaces = [];\n  for (var workspaceId in Blockly.Workspace.WorkspaceDB_) {\n    workspaces.push(Blockly.Workspace.WorkspaceDB_[workspaceId]);\n  }\n  return workspaces;\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a UI bubble.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Bubble');\n\ngoog.require('Blockly.Scrollbar');\ngoog.require('Blockly.Touch');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.math');\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.userAgent');\ngoog.require('Blockly.Workspace');\n\ngoog.requireType('Blockly.IBubble');\ngoog.requireType('Blockly.utils.Metrics');\n\n\n/**\n * Class for UI bubble.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace on which to draw the\n *     bubble.\n * @param {!Element} content SVG content for the bubble.\n * @param {Element} shape SVG element to avoid eclipsing.\n * @param {!Blockly.utils.Coordinate} anchorXY Absolute position of bubble's\n *     anchor point.\n * @param {?number} bubbleWidth Width of bubble, or null if not resizable.\n * @param {?number} bubbleHeight Height of bubble, or null if not resizable.\n * @implements {Blockly.IBubble}\n * @constructor\n */\nBlockly.Bubble = function(\n    workspace, content, shape, anchorXY, bubbleWidth, bubbleHeight) {\n  this.workspace_ = workspace;\n  this.content_ = content;\n  this.shape_ = shape;\n\n  /**\n   * Method to call on resize of bubble.\n   * @type {?function()}\n   * @private\n   */\n  this.resizeCallback_ = null;\n\n  /**\n   * Method to call on move of bubble.\n   * @type {?function()}\n   * @private\n   */\n  this.moveCallback_ = null;\n\n  /**\n   * Mouse down on bubbleBack_ event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onMouseDownBubbleWrapper_ = null;\n\n  /**\n   * Mouse down on resizeGroup_ event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onMouseDownResizeWrapper_ = null;\n\n  /**\n   * Describes whether this bubble has been disposed of (nodes and event\n   * listeners removed from the page) or not.\n   * @type {boolean}\n   * @package\n   */\n  this.disposed = false;\n\n  var angle = Blockly.Bubble.ARROW_ANGLE;\n  if (this.workspace_.RTL) {\n    angle = -angle;\n  }\n  this.arrow_radians_ = Blockly.utils.math.toRadians(angle);\n\n  var canvas = workspace.getBubbleCanvas();\n  canvas.appendChild(this.createDom_(content, !!(bubbleWidth && bubbleHeight)));\n\n  this.setAnchorLocation(anchorXY);\n  if (!bubbleWidth || !bubbleHeight) {\n    var bBox = /** @type {SVGLocatable} */ (this.content_).getBBox();\n    bubbleWidth = bBox.width + 2 * Blockly.Bubble.BORDER_WIDTH;\n    bubbleHeight = bBox.height + 2 * Blockly.Bubble.BORDER_WIDTH;\n  }\n  this.setBubbleSize(bubbleWidth, bubbleHeight);\n\n  // Render the bubble.\n  this.positionBubble_();\n  this.renderArrow_();\n  this.rendered_ = true;\n};\n\n/**\n * Width of the border around the bubble.\n */\nBlockly.Bubble.BORDER_WIDTH = 6;\n\n/**\n * Determines the thickness of the base of the arrow in relation to the size\n * of the bubble.  Higher numbers result in thinner arrows.\n */\nBlockly.Bubble.ARROW_THICKNESS = 5;\n\n/**\n * The number of degrees that the arrow bends counter-clockwise.\n */\nBlockly.Bubble.ARROW_ANGLE = 20;\n\n/**\n * The sharpness of the arrow's bend.  Higher numbers result in smoother arrows.\n */\nBlockly.Bubble.ARROW_BEND = 4;\n\n/**\n * Distance between arrow point and anchor point.\n */\nBlockly.Bubble.ANCHOR_RADIUS = 8;\n\n/**\n * Mouse up event data.\n * @type {?Blockly.EventData}\n * @private\n */\nBlockly.Bubble.onMouseUpWrapper_ = null;\n\n/**\n * Mouse move event data.\n * @type {?Blockly.EventData}\n * @private\n */\nBlockly.Bubble.onMouseMoveWrapper_ = null;\n\n/**\n * Stop binding to the global mouseup and mousemove events.\n * @private\n */\nBlockly.Bubble.unbindDragEvents_ = function() {\n  if (Blockly.Bubble.onMouseUpWrapper_) {\n    Blockly.unbindEvent_(Blockly.Bubble.onMouseUpWrapper_);\n    Blockly.Bubble.onMouseUpWrapper_ = null;\n  }\n  if (Blockly.Bubble.onMouseMoveWrapper_) {\n    Blockly.unbindEvent_(Blockly.Bubble.onMouseMoveWrapper_);\n    Blockly.Bubble.onMouseMoveWrapper_ = null;\n  }\n};\n\n/**\n * Handle a mouse-up event while dragging a bubble's border or resize handle.\n * @param {!Event} _e Mouse up event.\n * @private\n */\nBlockly.Bubble.bubbleMouseUp_ = function(_e) {\n  Blockly.Touch.clearTouchIdentifier();\n  Blockly.Bubble.unbindDragEvents_();\n};\n\n/**\n * Flag to stop incremental rendering during construction.\n * @private\n */\nBlockly.Bubble.prototype.rendered_ = false;\n\n/**\n * Absolute coordinate of anchor point, in workspace coordinates.\n * @type {Blockly.utils.Coordinate}\n * @private\n */\nBlockly.Bubble.prototype.anchorXY_ = null;\n\n/**\n * Relative X coordinate of bubble with respect to the anchor's centre,\n * in workspace units.\n * In RTL mode the initial value is negated.\n * @private\n */\nBlockly.Bubble.prototype.relativeLeft_ = 0;\n\n/**\n * Relative Y coordinate of bubble with respect to the anchor's centre, in\n * workspace units.\n * @private\n */\nBlockly.Bubble.prototype.relativeTop_ = 0;\n\n/**\n * Width of bubble, in workspace units.\n * @private\n */\nBlockly.Bubble.prototype.width_ = 0;\n\n/**\n * Height of bubble, in workspace units.\n * @private\n */\nBlockly.Bubble.prototype.height_ = 0;\n\n/**\n * Automatically position and reposition the bubble.\n * @private\n */\nBlockly.Bubble.prototype.autoLayout_ = true;\n\n/**\n * Create the bubble's DOM.\n * @param {!Element} content SVG content for the bubble.\n * @param {boolean} hasResize Add diagonal resize gripper if true.\n * @return {!SVGElement} The bubble's SVG group.\n * @private\n */\nBlockly.Bubble.prototype.createDom_ = function(content, hasResize) {\n  /* Create the bubble.  Here's the markup that will be generated:\n  <g>\n    <g filter=\"url(#blocklyEmbossFilter837493)\">\n      <path d=\"... Z\" />\n      <rect class=\"blocklyDraggable\" rx=\"8\" ry=\"8\" width=\"180\" height=\"180\"/>\n    </g>\n    <g transform=\"translate(165, 165)\" class=\"blocklyResizeSE\">\n      <polygon points=\"0,15 15,15 15,0\"/>\n      <line class=\"blocklyResizeLine\" x1=\"5\" y1=\"14\" x2=\"14\" y2=\"5\"/>\n      <line class=\"blocklyResizeLine\" x1=\"10\" y1=\"14\" x2=\"14\" y2=\"10\"/>\n    </g>\n    [...content goes here...]\n  </g>\n  */\n  this.bubbleGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G, {}, null);\n  var filter = {\n    'filter': 'url(#' +\n        this.workspace_.getRenderer().getConstants().embossFilterId + ')'\n  };\n  if (Blockly.utils.userAgent.JAVA_FX) {\n    // Multiple reports that JavaFX can't handle filters.\n    // https://github.com/google/blockly/issues/99\n    filter = {};\n  }\n  var bubbleEmboss = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G, filter, this.bubbleGroup_);\n  this.bubbleArrow_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH, {}, bubbleEmboss);\n  this.bubbleBack_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT, {\n        'class': 'blocklyDraggable',\n        'x': 0,\n        'y': 0,\n        'rx': Blockly.Bubble.BORDER_WIDTH,\n        'ry': Blockly.Bubble.BORDER_WIDTH\n      },\n      bubbleEmboss);\n  if (hasResize) {\n    this.resizeGroup_ = Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.G,\n        {'class': this.workspace_.RTL ? 'blocklyResizeSW' : 'blocklyResizeSE'},\n        this.bubbleGroup_);\n    var resizeSize = 2 * Blockly.Bubble.BORDER_WIDTH;\n    Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.POLYGON,\n        {'points': '0,x x,x x,0'.replace(/x/g, resizeSize.toString())},\n        this.resizeGroup_);\n    Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.LINE, {\n          'class': 'blocklyResizeLine',\n          'x1': resizeSize / 3,\n          'y1': resizeSize - 1,\n          'x2': resizeSize - 1,\n          'y2': resizeSize / 3\n        },\n        this.resizeGroup_);\n    Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.LINE, {\n          'class': 'blocklyResizeLine',\n          'x1': resizeSize * 2 / 3,\n          'y1': resizeSize - 1,\n          'x2': resizeSize - 1,\n          'y2': resizeSize * 2 / 3\n        },\n        this.resizeGroup_);\n  } else {\n    this.resizeGroup_ = null;\n  }\n\n  if (!this.workspace_.options.readOnly) {\n    this.onMouseDownBubbleWrapper_ = Blockly.bindEventWithChecks_(\n        this.bubbleBack_, 'mousedown', this, this.bubbleMouseDown_);\n    if (this.resizeGroup_) {\n      this.onMouseDownResizeWrapper_ = Blockly.bindEventWithChecks_(\n          this.resizeGroup_, 'mousedown', this, this.resizeMouseDown_);\n    }\n  }\n  this.bubbleGroup_.appendChild(content);\n  return this.bubbleGroup_;\n};\n\n/**\n * Return the root node of the bubble's SVG group.\n * @return {!SVGElement} The root SVG node of the bubble's group.\n */\nBlockly.Bubble.prototype.getSvgRoot = function() {\n  return this.bubbleGroup_;\n};\n\n/**\n * Expose the block's ID on the bubble's top-level SVG group.\n * @param {string} id ID of block.\n */\nBlockly.Bubble.prototype.setSvgId = function(id) {\n  if (this.bubbleGroup_.dataset) {\n    this.bubbleGroup_.dataset['blockId'] = id;\n  }\n};\n\n/**\n * Handle a mouse-down on bubble's border.\n * @param {!Event} e Mouse down event.\n * @private\n */\nBlockly.Bubble.prototype.bubbleMouseDown_ = function(e) {\n  var gesture = this.workspace_.getGesture(e);\n  if (gesture) {\n    gesture.handleBubbleStart(e, this);\n  }\n};\n\n/**\n * Show the context menu for this bubble.\n * @param {!Event} _e Mouse event.\n * @package\n */\nBlockly.Bubble.prototype.showContextMenu = function(_e) {\n  // NOP on bubbles, but used by the bubble dragger to pass events to\n  // workspace comments.\n};\n\n/**\n * Get whether this bubble is deletable or not.\n * @return {boolean} True if deletable.\n * @package\n */\nBlockly.Bubble.prototype.isDeletable = function() {\n  return false;\n};\n\n/**\n * Update the style of this bubble when it is dragged over a delete area.\n * @param {boolean} _enable True if the bubble is about to be deleted, false\n *     otherwise.\n */\nBlockly.Bubble.prototype.setDeleteStyle = function(_enable) {\n  // NOP if bubble is not deletable.\n};\n\n/**\n * Handle a mouse-down on bubble's resize corner.\n * @param {!Event} e Mouse down event.\n * @private\n */\nBlockly.Bubble.prototype.resizeMouseDown_ = function(e) {\n  this.promote();\n  Blockly.Bubble.unbindDragEvents_();\n  if (Blockly.utils.isRightButton(e)) {\n    // No right-click.\n    e.stopPropagation();\n    return;\n  }\n  // Left-click (or middle click)\n  this.workspace_.startDrag(\n      e,\n      new Blockly.utils.Coordinate(\n          this.workspace_.RTL ? -this.width_ : this.width_, this.height_));\n\n  Blockly.Bubble.onMouseUpWrapper_ = Blockly.bindEventWithChecks_(\n      document, 'mouseup', this, Blockly.Bubble.bubbleMouseUp_);\n  Blockly.Bubble.onMouseMoveWrapper_ = Blockly.bindEventWithChecks_(\n      document, 'mousemove', this, this.resizeMouseMove_);\n  Blockly.hideChaff();\n  // This event has been handled.  No need to bubble up to the document.\n  e.stopPropagation();\n};\n\n/**\n * Resize this bubble to follow the mouse.\n * @param {!Event} e Mouse move event.\n * @private\n */\nBlockly.Bubble.prototype.resizeMouseMove_ = function(e) {\n  this.autoLayout_ = false;\n  var newXY = this.workspace_.moveDrag(e);\n  this.setBubbleSize(this.workspace_.RTL ? -newXY.x : newXY.x, newXY.y);\n  if (this.workspace_.RTL) {\n    // RTL requires the bubble to move its left edge.\n    this.positionBubble_();\n  }\n};\n\n/**\n * Register a function as a callback event for when the bubble is resized.\n * @param {!Function} callback The function to call on resize.\n */\nBlockly.Bubble.prototype.registerResizeEvent = function(callback) {\n  this.resizeCallback_ = callback;\n};\n\n/**\n * Register a function as a callback event for when the bubble is moved.\n * @param {!Function} callback The function to call on move.\n */\nBlockly.Bubble.prototype.registerMoveEvent = function(callback) {\n  this.moveCallback_ = callback;\n};\n\n/**\n * Move this bubble to the top of the stack.\n * @return {boolean} Whether or not the bubble has been moved.\n * @package\n */\nBlockly.Bubble.prototype.promote = function() {\n  var svgGroup = this.bubbleGroup_.parentNode;\n  if (svgGroup.lastChild !== this.bubbleGroup_) {\n    svgGroup.appendChild(this.bubbleGroup_);\n    return true;\n  }\n  return false;\n};\n\n/**\n * Notification that the anchor has moved.\n * Update the arrow and bubble accordingly.\n * @param {!Blockly.utils.Coordinate} xy Absolute location.\n */\nBlockly.Bubble.prototype.setAnchorLocation = function(xy) {\n  this.anchorXY_ = xy;\n  if (this.rendered_) {\n    this.positionBubble_();\n  }\n};\n\n/**\n * Position the bubble so that it does not fall off-screen.\n * @private\n */\nBlockly.Bubble.prototype.layoutBubble_ = function() {\n  // Get the metrics in workspace units.\n  var metrics = this.workspace_.getMetrics();\n  metrics.viewLeft /= this.workspace_.scale;\n  metrics.viewWidth /= this.workspace_.scale;\n  metrics.viewTop /= this.workspace_.scale;\n  metrics.viewHeight /= this.workspace_.scale;\n\n  var optimalLeft = this.getOptimalRelativeLeft_(metrics);\n  var optimalTop = this.getOptimalRelativeTop_(metrics);\n  var bbox = this.shape_.getBBox();\n\n  var topPosition = {\n    x: optimalLeft,\n    y: -this.height_ -\n        this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT\n  };\n  var startPosition = {x: -this.width_ - 30, y: optimalTop};\n  var endPosition = {x: bbox.width, y: optimalTop};\n  var bottomPosition = {x: optimalLeft, y: bbox.height};\n\n  var closerPosition = bbox.width < bbox.height ? endPosition : bottomPosition;\n  var fartherPosition = bbox.width < bbox.height ? bottomPosition : endPosition;\n\n  var topPositionOverlap = this.getOverlap_(topPosition, metrics);\n  var startPositionOverlap = this.getOverlap_(startPosition, metrics);\n  var closerPositionOverlap = this.getOverlap_(closerPosition, metrics);\n  var fartherPositionOverlap = this.getOverlap_(fartherPosition, metrics);\n\n  // Set the position to whichever position shows the most of the bubble,\n  // with tiebreaks going in the order: top > start > close > far.\n  var mostOverlap = Math.max(\n      topPositionOverlap, startPositionOverlap, closerPositionOverlap,\n      fartherPositionOverlap);\n  if (topPositionOverlap == mostOverlap) {\n    this.relativeLeft_ = topPosition.x;\n    this.relativeTop_ = topPosition.y;\n    return;\n  }\n  if (startPositionOverlap == mostOverlap) {\n    this.relativeLeft_ = startPosition.x;\n    this.relativeTop_ = startPosition.y;\n    return;\n  }\n  if (closerPositionOverlap == mostOverlap) {\n    this.relativeLeft_ = closerPosition.x;\n    this.relativeTop_ = closerPosition.y;\n    return;\n  }\n  // TODO: I believe relativeLeft_ should actually be called relativeStart_\n  //  and then the math should be fixed to reflect this. (hopefully it'll\n  //  make it look simpler)\n  this.relativeLeft_ = fartherPosition.x;\n  this.relativeTop_ = fartherPosition.y;\n};\n\n/**\n * Calculate the what percentage of the bubble overlaps with the visible\n * workspace (what percentage of the bubble is visible).\n * @param {!{x: number, y: number}} relativeMin The position of the top-left\n *     corner of the bubble relative to the anchor point.\n * @param {!Blockly.utils.Metrics} metrics The metrics of the workspace the\n *     bubble will appear in.\n * @return {number} The percentage of the bubble that is visible.\n * @private\n */\nBlockly.Bubble.prototype.getOverlap_ = function(relativeMin, metrics) {\n  // The position of the top-left corner of the bubble in workspace units.\n  var bubbleMin = {\n    x: this.workspace_.RTL ? (this.anchorXY_.x - relativeMin.x - this.width_) :\n                             (relativeMin.x + this.anchorXY_.x),\n    y: relativeMin.y + this.anchorXY_.y\n  };\n  // The position of the bottom-right corner of the bubble in workspace units.\n  var bubbleMax = {x: bubbleMin.x + this.width_, y: bubbleMin.y + this.height_};\n\n  // We could adjust these values to account for the scrollbars, but the\n  // bubbles should have been adjusted to not collide with them anyway, so\n  // giving the workspace a slightly larger \"bounding box\" shouldn't affect the\n  // calculation.\n\n  // The position of the top-left corner of the workspace.\n  var workspaceMin = {x: metrics.viewLeft, y: metrics.viewTop};\n  // The position of the bottom-right corner of the workspace.\n  var workspaceMax = {\n    x: metrics.viewLeft + metrics.viewWidth,\n    y: metrics.viewTop + metrics.viewHeight\n  };\n\n  var overlapWidth = Math.min(bubbleMax.x, workspaceMax.x) -\n      Math.max(bubbleMin.x, workspaceMin.x);\n  var overlapHeight = Math.min(bubbleMax.y, workspaceMax.y) -\n      Math.max(bubbleMin.y, workspaceMin.y);\n  return Math.max(\n      0,\n      Math.min(\n          1, (overlapWidth * overlapHeight) / (this.width_ * this.height_)));\n};\n\n/**\n * Calculate what the optimal horizontal position of the top-left corner of the\n * bubble is (relative to the anchor point) so that the most area of the\n * bubble is shown.\n * @param {!Blockly.utils.Metrics} metrics The metrics of the workspace the\n *     bubble will appear in.\n * @return {number} The optimal horizontal position of the top-left corner\n *     of the bubble.\n * @private\n */\nBlockly.Bubble.prototype.getOptimalRelativeLeft_ = function(metrics) {\n  var relativeLeft = -this.width_ / 4;\n\n  // No amount of sliding left or right will give us a better overlap.\n  if (this.width_ > metrics.viewWidth) {\n    return relativeLeft;\n  }\n\n  if (this.workspace_.RTL) {\n    // Bubble coordinates are flipped in RTL.\n    var bubbleRight = this.anchorXY_.x - relativeLeft;\n    var bubbleLeft = bubbleRight - this.width_;\n\n    var workspaceRight = metrics.viewLeft + metrics.viewWidth;\n    var workspaceLeft = metrics.viewLeft +\n        // Thickness in workspace units.\n        (Blockly.Scrollbar.scrollbarThickness / this.workspace_.scale);\n  } else {\n    var bubbleLeft = relativeLeft + this.anchorXY_.x;\n    var bubbleRight = bubbleLeft + this.width_;\n\n    var workspaceLeft = metrics.viewLeft;\n    var workspaceRight = metrics.viewLeft + metrics.viewWidth -\n        // Thickness in workspace units.\n        (Blockly.Scrollbar.scrollbarThickness / this.workspace_.scale);\n  }\n\n  if (this.workspace_.RTL) {\n    if (bubbleLeft < workspaceLeft) {\n      // Slide the bubble right until it is onscreen.\n      relativeLeft = -(workspaceLeft - this.anchorXY_.x + this.width_);\n    } else if (bubbleRight > workspaceRight) {\n      // Slide the bubble left until it is onscreen.\n      relativeLeft = -(workspaceRight - this.anchorXY_.x);\n    }\n  } else {\n    if (bubbleLeft < workspaceLeft) {\n      // Slide the bubble right until it is onscreen.\n      relativeLeft = workspaceLeft - this.anchorXY_.x;\n    } else if (bubbleRight > workspaceRight) {\n      // Slide the bubble left until it is onscreen.\n      relativeLeft = workspaceRight - this.anchorXY_.x - this.width_;\n    }\n  }\n\n  return relativeLeft;\n};\n\n/**\n * Calculate what the optimal vertical position of the top-left corner of\n * the bubble is (relative to the anchor point) so that the most area of the\n * bubble is shown.\n * @param {!Blockly.utils.Metrics} metrics The metrics of the workspace the\n *     bubble will appear in.\n * @return {number} The optimal vertical position of the top-left corner\n *     of the bubble.\n * @private\n */\nBlockly.Bubble.prototype.getOptimalRelativeTop_ = function(metrics) {\n  var relativeTop = -this.height_ / 4;\n\n  // No amount of sliding up or down will give us a better overlap.\n  if (this.height_ > metrics.viewHeight) {\n    return relativeTop;\n  }\n\n  var bubbleTop = this.anchorXY_.y + relativeTop;\n  var bubbleBottom = bubbleTop + this.height_;\n  var workspaceTop = metrics.viewTop;\n  var workspaceBottom = metrics.viewTop + metrics.viewHeight -\n      // Thickness in workspace units.\n      (Blockly.Scrollbar.scrollbarThickness / this.workspace_.scale);\n\n  var anchorY = this.anchorXY_.y;\n  if (bubbleTop < workspaceTop) {\n    // Slide the bubble down until it is onscreen.\n    relativeTop = workspaceTop - anchorY;\n  } else if (bubbleBottom > workspaceBottom) {\n    // Slide the bubble up until it is onscreen.\n    relativeTop = workspaceBottom - anchorY - this.height_;\n  }\n\n  return relativeTop;\n};\n\n/**\n * Move the bubble to a location relative to the anchor's centre.\n * @private\n */\nBlockly.Bubble.prototype.positionBubble_ = function() {\n  var left = this.anchorXY_.x;\n  if (this.workspace_.RTL) {\n    left -= this.relativeLeft_ + this.width_;\n  } else {\n    left += this.relativeLeft_;\n  }\n  var top = this.relativeTop_ + this.anchorXY_.y;\n  this.moveTo(left, top);\n};\n\n/**\n * Move the bubble group to the specified location in workspace coordinates.\n * @param {number} x The x position to move to.\n * @param {number} y The y position to move to.\n * @package\n */\nBlockly.Bubble.prototype.moveTo = function(x, y) {\n  this.bubbleGroup_.setAttribute('transform', 'translate(' + x + ',' + y + ')');\n};\n\n/**\n * Triggers a move callback if one exists at the end of a drag.\n * @param {boolean} adding True if adding, false if removing.\n * @package\n */\nBlockly.Bubble.prototype.setDragging = function(adding) {\n  if (!adding && this.moveCallback_) {\n    this.moveCallback_();\n  }\n};\n\n/**\n * Get the dimensions of this bubble.\n * @return {!Blockly.utils.Size} The height and width of the bubble.\n */\nBlockly.Bubble.prototype.getBubbleSize = function() {\n  return new Blockly.utils.Size(this.width_, this.height_);\n};\n\n/**\n * Size this bubble.\n * @param {number} width Width of the bubble.\n * @param {number} height Height of the bubble.\n */\nBlockly.Bubble.prototype.setBubbleSize = function(width, height) {\n  var doubleBorderWidth = 2 * Blockly.Bubble.BORDER_WIDTH;\n  // Minimum size of a bubble.\n  width = Math.max(width, doubleBorderWidth + 45);\n  height = Math.max(height, doubleBorderWidth + 20);\n  this.width_ = width;\n  this.height_ = height;\n  this.bubbleBack_.setAttribute('width', width);\n  this.bubbleBack_.setAttribute('height', height);\n  if (this.resizeGroup_) {\n    if (this.workspace_.RTL) {\n      // Mirror the resize group.\n      var resizeSize = 2 * Blockly.Bubble.BORDER_WIDTH;\n      this.resizeGroup_.setAttribute(\n          'transform',\n          'translate(' + resizeSize + ',' + (height - doubleBorderWidth) +\n              ') scale(-1 1)');\n    } else {\n      this.resizeGroup_.setAttribute(\n          'transform',\n          'translate(' + (width - doubleBorderWidth) + ',' +\n              (height - doubleBorderWidth) + ')');\n    }\n  }\n  if (this.autoLayout_) {\n    this.layoutBubble_();\n  }\n  this.positionBubble_();\n  this.renderArrow_();\n\n  // Allow the contents to resize.\n  if (this.resizeCallback_) {\n    this.resizeCallback_();\n  }\n};\n\n/**\n * Draw the arrow between the bubble and the origin.\n * @private\n */\nBlockly.Bubble.prototype.renderArrow_ = function() {\n  var steps = [];\n  // Find the relative coordinates of the center of the bubble.\n  var relBubbleX = this.width_ / 2;\n  var relBubbleY = this.height_ / 2;\n  // Find the relative coordinates of the center of the anchor.\n  var relAnchorX = -this.relativeLeft_;\n  var relAnchorY = -this.relativeTop_;\n  if (relBubbleX == relAnchorX && relBubbleY == relAnchorY) {\n    // Null case.  Bubble is directly on top of the anchor.\n    // Short circuit this rather than wade through divide by zeros.\n    steps.push('M ' + relBubbleX + ',' + relBubbleY);\n  } else {\n    // Compute the angle of the arrow's line.\n    var rise = relAnchorY - relBubbleY;\n    var run = relAnchorX - relBubbleX;\n    if (this.workspace_.RTL) {\n      run *= -1;\n    }\n    var hypotenuse = Math.sqrt(rise * rise + run * run);\n    var angle = Math.acos(run / hypotenuse);\n    if (rise < 0) {\n      angle = 2 * Math.PI - angle;\n    }\n    // Compute a line perpendicular to the arrow.\n    var rightAngle = angle + Math.PI / 2;\n    if (rightAngle > Math.PI * 2) {\n      rightAngle -= Math.PI * 2;\n    }\n    var rightRise = Math.sin(rightAngle);\n    var rightRun = Math.cos(rightAngle);\n\n    // Calculate the thickness of the base of the arrow.\n    var bubbleSize = this.getBubbleSize();\n    var thickness =\n        (bubbleSize.width + bubbleSize.height) / Blockly.Bubble.ARROW_THICKNESS;\n    thickness = Math.min(thickness, bubbleSize.width, bubbleSize.height) / 4;\n\n    // Back the tip of the arrow off of the anchor.\n    var backoffRatio = 1 - Blockly.Bubble.ANCHOR_RADIUS / hypotenuse;\n    relAnchorX = relBubbleX + backoffRatio * run;\n    relAnchorY = relBubbleY + backoffRatio * rise;\n\n    // Coordinates for the base of the arrow.\n    var baseX1 = relBubbleX + thickness * rightRun;\n    var baseY1 = relBubbleY + thickness * rightRise;\n    var baseX2 = relBubbleX - thickness * rightRun;\n    var baseY2 = relBubbleY - thickness * rightRise;\n\n    // Distortion to curve the arrow.\n    var swirlAngle = angle + this.arrow_radians_;\n    if (swirlAngle > Math.PI * 2) {\n      swirlAngle -= Math.PI * 2;\n    }\n    var swirlRise =\n        Math.sin(swirlAngle) * hypotenuse / Blockly.Bubble.ARROW_BEND;\n    var swirlRun =\n        Math.cos(swirlAngle) * hypotenuse / Blockly.Bubble.ARROW_BEND;\n\n    steps.push('M' + baseX1 + ',' + baseY1);\n    steps.push(\n        'C' + (baseX1 + swirlRun) + ',' + (baseY1 + swirlRise) + ' ' +\n        relAnchorX + ',' + relAnchorY + ' ' + relAnchorX + ',' + relAnchorY);\n    steps.push(\n        'C' + relAnchorX + ',' + relAnchorY + ' ' + (baseX2 + swirlRun) + ',' +\n        (baseY2 + swirlRise) + ' ' + baseX2 + ',' + baseY2);\n  }\n  steps.push('z');\n  this.bubbleArrow_.setAttribute('d', steps.join(' '));\n};\n\n/**\n * Change the colour of a bubble.\n * @param {string} hexColour Hex code of colour.\n */\nBlockly.Bubble.prototype.setColour = function(hexColour) {\n  this.bubbleBack_.setAttribute('fill', hexColour);\n  this.bubbleArrow_.setAttribute('fill', hexColour);\n};\n\n/**\n * Dispose of this bubble.\n */\nBlockly.Bubble.prototype.dispose = function() {\n  if (this.onMouseDownBubbleWrapper_) {\n    Blockly.unbindEvent_(this.onMouseDownBubbleWrapper_);\n  }\n  if (this.onMouseDownResizeWrapper_) {\n    Blockly.unbindEvent_(this.onMouseDownResizeWrapper_);\n  }\n  Blockly.Bubble.unbindDragEvents_();\n  Blockly.utils.dom.removeNode(this.bubbleGroup_);\n  this.disposed = true;\n};\n\n/**\n * Move this bubble during a drag, taking into account whether or not there is\n * a drag surface.\n * @param {Blockly.BlockDragSurfaceSvg} dragSurface The surface that carries\n *     rendered items during a drag, or null if no drag surface is in use.\n * @param {!Blockly.utils.Coordinate} newLoc The location to translate to, in\n *     workspace coordinates.\n * @package\n */\nBlockly.Bubble.prototype.moveDuringDrag = function(dragSurface, newLoc) {\n  if (dragSurface) {\n    dragSurface.translateSurface(newLoc.x, newLoc.y);\n  } else {\n    this.moveTo(newLoc.x, newLoc.y);\n  }\n  if (this.workspace_.RTL) {\n    this.relativeLeft_ = this.anchorXY_.x - newLoc.x - this.width_;\n  } else {\n    this.relativeLeft_ = newLoc.x - this.anchorXY_.x;\n  }\n  this.relativeTop_ = newLoc.y - this.anchorXY_.y;\n  this.renderArrow_();\n};\n\n/**\n * Return the coordinates of the top-left corner of this bubble's body relative\n * to the drawing surface's origin (0,0), in workspace units.\n * @return {!Blockly.utils.Coordinate} Object with .x and .y properties.\n */\nBlockly.Bubble.prototype.getRelativeToSurfaceXY = function() {\n  return new Blockly.utils.Coordinate(\n      this.workspace_.RTL ?\n          -this.relativeLeft_ + this.anchorXY_.x - this.width_ :\n          this.anchorXY_.x + this.relativeLeft_,\n      this.anchorXY_.y + this.relativeTop_);\n};\n\n/**\n * Set whether auto-layout of this bubble is enabled.  The first time a bubble\n * is shown it positions itself to not cover any blocks.  Once a user has\n * dragged it to reposition, it renders where the user put it.\n * @param {boolean} enable True if auto-layout should be enabled, false\n *     otherwise.\n * @package\n */\nBlockly.Bubble.prototype.setAutoLayout = function(enable) {\n  this.autoLayout_ = enable;\n};\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Classes for all comment events.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.Events.CommentBase');\ngoog.provide('Blockly.Events.CommentChange');\ngoog.provide('Blockly.Events.CommentCreate');\ngoog.provide('Blockly.Events.CommentDelete');\ngoog.provide('Blockly.Events.CommentMove');\n\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.Abstract');\ngoog.require('Blockly.registry');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.xml');\n// TODO: Fix recursive dependency.\n// goog.require('Blockly.Xml');\n\n\n/**\n * Abstract class for a comment event.\n * @param {!Blockly.WorkspaceComment=} opt_comment The comment this event\n *     corresponds to.  Undefined for a blank event.\n * @extends {Blockly.Events.Abstract}\n * @constructor\n */\nBlockly.Events.CommentBase = function(opt_comment) {\n\n  /**\n   * Whether or not an event is blank.\n   * @type {boolean}\n   */\n  this.isBlank = typeof opt_comment == 'undefined';\n\n  /**\n   * The ID of the comment this event pertains to.\n   * @type {string}\n   */\n  this.commentId = this.isBlank ? '' : opt_comment.id;\n\n  /**\n   * The workspace identifier for this event.\n   * @type {string}\n   */\n  this.workspaceId = this.isBlank ? '' : opt_comment.workspace.id;\n\n  /**\n   * The event group id for the group this event belongs to. Groups define\n   * events that should be treated as an single action from the user's\n   * perspective, and should be undone together.\n   * @type {string}\n   */\n  this.group = Blockly.Events.getGroup();\n\n  /**\n   * Sets whether the event should be added to the undo stack.\n   * @type {boolean}\n   */\n  this.recordUndo = Blockly.Events.recordUndo;\n};\nBlockly.utils.object.inherits(Blockly.Events.CommentBase,\n    Blockly.Events.Abstract);\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\nBlockly.Events.CommentBase.prototype.toJson = function() {\n  var json = Blockly.Events.CommentBase.superClass_.toJson.call(this);\n  if (this.commentId) {\n    json['commentId'] = this.commentId;\n  }\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.CommentBase.prototype.fromJson = function(json) {\n  Blockly.Events.CommentBase.superClass_.fromJson.call(this, json);\n  this.commentId = json['commentId'];\n};\n\n/**\n * Class for a comment change event.\n * @param {!Blockly.WorkspaceComment=} opt_comment The comment that is being\n *     changed.  Undefined for a blank event.\n * @param {string=} opt_oldContents Previous contents of the comment.\n * @param {string=} opt_newContents New contents of the comment.\n * @extends {Blockly.Events.CommentBase}\n * @constructor\n */\nBlockly.Events.CommentChange = function(opt_comment, opt_oldContents,\n    opt_newContents) {\n  Blockly.Events.CommentChange.superClass_.constructor.call(this, opt_comment);\n  if (!opt_comment) {\n    return;  // Blank event to be populated by fromJson.\n  }\n\n  this.oldContents_ = typeof opt_oldContents == 'undefined' ? '' :\n      opt_oldContents;\n  this.newContents_ = typeof opt_newContents == 'undefined' ? '' :\n      opt_newContents;\n};\nBlockly.utils.object.inherits(Blockly.Events.CommentChange,\n    Blockly.Events.CommentBase);\n\n/**\n * Type of this event.\n * @type {string}\n */\nBlockly.Events.CommentChange.prototype.type = Blockly.Events.COMMENT_CHANGE;\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\nBlockly.Events.CommentChange.prototype.toJson = function() {\n  var json = Blockly.Events.CommentChange.superClass_.toJson.call(this);\n  json['newContents'] = this.newContents_;\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.CommentChange.prototype.fromJson = function(json) {\n  Blockly.Events.CommentChange.superClass_.fromJson.call(this, json);\n  this.newContents_ = json['newValue'];\n};\n\n/**\n * Does this event record any change of state?\n * @return {boolean} False if something changed.\n */\nBlockly.Events.CommentChange.prototype.isNull = function() {\n  return this.oldContents_ == this.newContents_;\n};\n\n/**\n * Run a change event.\n * @param {boolean} forward True if run forward, false if run backward (undo).\n */\nBlockly.Events.CommentChange.prototype.run = function(forward) {\n  var workspace = this.getEventWorkspace_();\n  var comment = workspace.getCommentById(this.commentId);\n  if (!comment) {\n    console.warn('Can\\'t change non-existent comment: ' + this.commentId);\n    return;\n  }\n  var contents = forward ? this.newContents_ : this.oldContents_;\n\n  comment.setContent(contents);\n};\n\n/**\n * Class for a comment creation event.\n * @param {!Blockly.WorkspaceComment=} opt_comment The created comment.\n *     Undefined for a blank event.\n * @extends {Blockly.Events.CommentBase}\n * @constructor\n */\nBlockly.Events.CommentCreate = function(opt_comment) {\n  Blockly.Events.CommentCreate.superClass_.constructor.call(this, opt_comment);\n  if (!opt_comment) {\n    return;  // Blank event to be populated by fromJson.\n  }\n\n  this.xml = opt_comment.toXmlWithXY();\n};\nBlockly.utils.object.inherits(Blockly.Events.CommentCreate,\n    Blockly.Events.CommentBase);\n\n/**\n * Type of this event.\n * @type {string}\n */\nBlockly.Events.CommentCreate.prototype.type = Blockly.Events.COMMENT_CREATE;\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\n// TODO (#1266): \"Full\" and \"minimal\" serialization.\nBlockly.Events.CommentCreate.prototype.toJson = function() {\n  var json = Blockly.Events.CommentCreate.superClass_.toJson.call(this);\n  json['xml'] = Blockly.Xml.domToText(this.xml);\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.CommentCreate.prototype.fromJson = function(json) {\n  Blockly.Events.CommentCreate.superClass_.fromJson.call(this, json);\n  this.xml = Blockly.Xml.textToDom(json['xml']);\n};\n\n/**\n * Run a creation event.\n * @param {boolean} forward True if run forward, false if run backward (undo).\n */\nBlockly.Events.CommentCreate.prototype.run = function(forward) {\n  Blockly.Events.CommentCreateDeleteHelper(this, forward);\n};\n\n/**\n * Helper function for Comment[Create|Delete]\n * @param {!Blockly.Events.CommentCreate|!Blockly.Events.CommentDelete} event\n *     The event to run.\n * @param {boolean} create if True then Create, if False then Delete\n */\nBlockly.Events.CommentCreateDeleteHelper = function(event, create) {\n  var workspace = event.getEventWorkspace_();\n  if (create) {\n    var xml = Blockly.utils.xml.createElement('xml');\n    xml.appendChild(event.xml);\n    Blockly.Xml.domToWorkspace(xml, workspace);\n  } else {\n    var comment = workspace.getCommentById(event.commentId);\n    if (comment) {\n      comment.dispose(false, false);\n    } else {\n      // Only complain about root-level block.\n      console.warn(\"Can't uncreate non-existent comment: \" + event.commentId);\n    }\n  }\n};\n/**\n * Class for a comment deletion event.\n * @param {!Blockly.WorkspaceComment=} opt_comment The deleted comment.\n *     Undefined for a blank event.\n * @extends {Blockly.Events.CommentBase}\n * @constructor\n */\nBlockly.Events.CommentDelete = function(opt_comment) {\n  Blockly.Events.CommentDelete.superClass_.constructor.call(this, opt_comment);\n  if (!opt_comment) {\n    return;  // Blank event to be populated by fromJson.\n  }\n\n  this.xml = opt_comment.toXmlWithXY();\n};\nBlockly.utils.object.inherits(Blockly.Events.CommentDelete,\n    Blockly.Events.CommentBase);\n\n/**\n * Type of this event.\n * @type {string}\n */\nBlockly.Events.CommentDelete.prototype.type = Blockly.Events.COMMENT_DELETE;\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\n// TODO (#1266): \"Full\" and \"minimal\" serialization.\nBlockly.Events.CommentDelete.prototype.toJson = function() {\n  var json = Blockly.Events.CommentDelete.superClass_.toJson.call(this);\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.CommentDelete.prototype.fromJson = function(json) {\n  Blockly.Events.CommentDelete.superClass_.fromJson.call(this, json);\n};\n\n/**\n * Run a creation event.\n * @param {boolean} forward True if run forward, false if run backward (undo).\n */\nBlockly.Events.CommentDelete.prototype.run = function(forward) {\n  Blockly.Events.CommentCreateDeleteHelper(this, !forward);\n};\n\n/**\n * Class for a comment move event.  Created before the move.\n * @param {!Blockly.WorkspaceComment=} opt_comment The comment that is being\n *     moved.  Undefined for a blank event.\n * @extends {Blockly.Events.CommentBase}\n * @constructor\n */\nBlockly.Events.CommentMove = function(opt_comment) {\n  Blockly.Events.CommentMove.superClass_.constructor.call(this, opt_comment);\n  if (!opt_comment) {\n    return;  // Blank event to be populated by fromJson.\n  }\n\n  /**\n   * The comment that is being moved.  Will be cleared after recording the new\n   * location.\n   * @type {Blockly.WorkspaceComment}\n   */\n  this.comment_ = opt_comment;\n\n  /**\n   * The location before the move, in workspace coordinates.\n   * @type {!Blockly.utils.Coordinate}\n   */\n  this.oldCoordinate_ = opt_comment.getXY();\n\n  /**\n   * The location after the move, in workspace coordinates.\n   * @type {Blockly.utils.Coordinate}\n   */\n  this.newCoordinate_ = null;\n};\nBlockly.utils.object.inherits(Blockly.Events.CommentMove,\n    Blockly.Events.CommentBase);\n\n/**\n * Record the comment's new location.  Called after the move.  Can only be\n * called once.\n */\nBlockly.Events.CommentMove.prototype.recordNew = function() {\n  if (!this.comment_) {\n    throw Error('Tried to record the new position of a comment on the ' +\n        'same event twice.');\n  }\n  this.newCoordinate_ = this.comment_.getXY();\n  this.comment_ = null;\n};\n\n/**\n * Type of this event.\n * @type {string}\n */\nBlockly.Events.CommentMove.prototype.type = Blockly.Events.COMMENT_MOVE;\n\n/**\n * Override the location before the move.  Use this if you don't create the\n * event until the end of the move, but you know the original location.\n * @param {!Blockly.utils.Coordinate} xy The location before the move,\n *     in workspace coordinates.\n */\nBlockly.Events.CommentMove.prototype.setOldCoordinate = function(xy) {\n  this.oldCoordinate_ = xy;\n};\n\n/**\n * Encode the event as JSON.\n * @return {!Object} JSON representation.\n */\n// TODO (#1266): \"Full\" and \"minimal\" serialization.\nBlockly.Events.CommentMove.prototype.toJson = function() {\n  var json = Blockly.Events.CommentMove.superClass_.toJson.call(this);\n  if (this.newCoordinate_) {\n    json['newCoordinate'] = Math.round(this.newCoordinate_.x) + ',' +\n        Math.round(this.newCoordinate_.y);\n  }\n  return json;\n};\n\n/**\n * Decode the JSON event.\n * @param {!Object} json JSON representation.\n */\nBlockly.Events.CommentMove.prototype.fromJson = function(json) {\n  Blockly.Events.CommentMove.superClass_.fromJson.call(this, json);\n\n  if (json['newCoordinate']) {\n    var xy = json['newCoordinate'].split(',');\n    this.newCoordinate_ =\n        new Blockly.utils.Coordinate(Number(xy[0]), Number(xy[1]));\n  }\n};\n\n/**\n * Does this event record any change of state?\n * @return {boolean} False if something changed.\n */\nBlockly.Events.CommentMove.prototype.isNull = function() {\n  return Blockly.utils.Coordinate.equals(this.oldCoordinate_,\n      this.newCoordinate_);\n};\n\n/**\n * Run a move event.\n * @param {boolean} forward True if run forward, false if run backward (undo).\n */\nBlockly.Events.CommentMove.prototype.run = function(forward) {\n  var workspace = this.getEventWorkspace_();\n  var comment = workspace.getCommentById(this.commentId);\n  if (!comment) {\n    console.warn('Can\\'t move non-existent comment: ' + this.commentId);\n    return;\n  }\n\n  var target = forward ? this.newCoordinate_ : this.oldCoordinate_;\n  // TODO: Check if the comment is being dragged, and give up if so.\n  var current = comment.getXY();\n  comment.moveBy(target.x - current.x, target.y - current.y);\n};\n\nBlockly.registry.register(Blockly.registry.Type.EVENT,\n    Blockly.Events.COMMENT_CREATE, Blockly.Events.CommentCreate);\nBlockly.registry.register(Blockly.registry.Type.EVENT,\n    Blockly.Events.COMMENT_CHANGE, Blockly.Events.CommentChange);\nBlockly.registry.register(Blockly.registry.Type.EVENT,\n    Blockly.Events.COMMENT_MOVE, Blockly.Events.CommentMove);\nBlockly.registry.register(Blockly.registry.Type.EVENT,\n    Blockly.Events.COMMENT_DELETE, Blockly.Events.CommentDelete);\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for dragging a bubble visually.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.BubbleDragger');\n\ngoog.require('Blockly.Bubble');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.CommentMove');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.Coordinate');\n\ngoog.requireType('Blockly.IBubble');\n\n\n/**\n * Class for a bubble dragger.  It moves things on the bubble canvas around the\n * workspace when they are being dragged by a mouse or touch.  These can be\n * block comments, mutators, warnings, or workspace comments.\n * @param {!Blockly.IBubble} bubble The item on the bubble canvas to drag.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace to drag on.\n * @constructor\n */\nBlockly.BubbleDragger = function(bubble, workspace) {\n  /**\n   * The item on the bubble canvas that is being dragged.\n   * @type {!Blockly.IBubble}\n   * @private\n   */\n  this.draggingBubble_ = bubble;\n\n  /**\n   * The workspace on which the bubble is being dragged.\n   * @type {!Blockly.WorkspaceSvg}\n   * @private\n   */\n  this.workspace_ = workspace;\n\n  /**\n   * Which delete area the mouse pointer is over, if any.\n   * One of {@link Blockly.DELETE_AREA_TRASH},\n   * {@link Blockly.DELETE_AREA_TOOLBOX}, or {@link Blockly.DELETE_AREA_NONE}.\n   * @type {?number}\n   * @private\n   */\n  this.deleteArea_ = null;\n\n  /**\n   * Whether the bubble would be deleted if dropped immediately.\n   * @type {boolean}\n   * @private\n   */\n  this.wouldDeleteBubble_ = false;\n\n  /**\n   * The location of the top left corner of the dragging bubble's body at the\n   * beginning of the drag, in workspace coordinates.\n   * @type {!Blockly.utils.Coordinate}\n   * @private\n   */\n  this.startXY_ = this.draggingBubble_.getRelativeToSurfaceXY();\n\n  /**\n   * The drag surface to move bubbles to during a drag, or null if none should\n   * be used.  Block dragging and bubble dragging use the same surface.\n   * @type {Blockly.BlockDragSurfaceSvg}\n   * @private\n   */\n  this.dragSurface_ =\n      Blockly.utils.is3dSupported() && !!workspace.getBlockDragSurface() ?\n      workspace.getBlockDragSurface() :\n      null;\n};\n\n/**\n * Sever all links from this object.\n * @package\n * @suppress {checkTypes}\n */\nBlockly.BubbleDragger.prototype.dispose = function() {\n  this.draggingBubble_ = null;\n  this.workspace_ = null;\n  this.dragSurface_ = null;\n};\n\n/**\n * Start dragging a bubble.  This includes moving it to the drag surface.\n * @package\n */\nBlockly.BubbleDragger.prototype.startBubbleDrag = function() {\n  if (!Blockly.Events.getGroup()) {\n    Blockly.Events.setGroup(true);\n  }\n\n  this.workspace_.setResizesEnabled(false);\n  this.draggingBubble_.setAutoLayout(false);\n  if (this.dragSurface_) {\n    this.moveToDragSurface_();\n  }\n\n  this.draggingBubble_.setDragging && this.draggingBubble_.setDragging(true);\n\n  var toolbox = this.workspace_.getToolbox();\n  if (toolbox && typeof toolbox.addStyle == 'function') {\n    var style = this.draggingBubble_.isDeletable() ? 'blocklyToolboxDelete' :\n                                                     'blocklyToolboxGrab';\n    toolbox.addStyle(style);\n  }\n};\n\n/**\n * Execute a step of bubble dragging, based on the given event.  Update the\n * display accordingly.\n * @param {!Event} e The most recent move event.\n * @param {!Blockly.utils.Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at the start of the drag, in pixel units.\n * @package\n */\nBlockly.BubbleDragger.prototype.dragBubble = function(e, currentDragDeltaXY) {\n  var delta = this.pixelsToWorkspaceUnits_(currentDragDeltaXY);\n  var newLoc = Blockly.utils.Coordinate.sum(this.startXY_, delta);\n\n  this.draggingBubble_.moveDuringDrag(this.dragSurface_, newLoc);\n\n  if (this.draggingBubble_.isDeletable()) {\n    this.deleteArea_ = this.workspace_.isDeleteArea(e);\n    this.updateCursorDuringBubbleDrag_();\n  }\n};\n\n/**\n * Shut the trash can and, if necessary, delete the dragging bubble.\n * Should be called at the end of a bubble drag.\n * @return {boolean} Whether the bubble was deleted.\n * @private\n */\nBlockly.BubbleDragger.prototype.maybeDeleteBubble_ = function() {\n  var trashcan = this.workspace_.trashcan;\n\n  if (this.wouldDeleteBubble_) {\n    if (trashcan) {\n      setTimeout(trashcan.closeLid.bind(trashcan), 100);\n    }\n    // Fire a move event, so we know where to go back to for an undo.\n    this.fireMoveEvent_();\n    this.draggingBubble_.dispose(false, true);\n  } else if (trashcan) {\n    // Make sure the trash can lid is closed.\n    trashcan.closeLid();\n  }\n  return this.wouldDeleteBubble_;\n};\n\n/**\n * Update the cursor (and possibly the trash can lid) to reflect whether the\n * dragging bubble would be deleted if released immediately.\n * @private\n */\nBlockly.BubbleDragger.prototype.updateCursorDuringBubbleDrag_ = function() {\n  this.wouldDeleteBubble_ = this.deleteArea_ != Blockly.DELETE_AREA_NONE;\n  var trashcan = this.workspace_.trashcan;\n  if (this.wouldDeleteBubble_) {\n    this.draggingBubble_.setDeleteStyle(true);\n    if (this.deleteArea_ == Blockly.DELETE_AREA_TRASH && trashcan) {\n      trashcan.setLidOpen(true);\n    }\n  } else {\n    this.draggingBubble_.setDeleteStyle(false);\n    if (trashcan) {\n      trashcan.setLidOpen(false);\n    }\n  }\n};\n\n/**\n * Finish a bubble drag and put the bubble back on the workspace.\n * @param {!Event} e The mouseup/touchend event.\n * @param {!Blockly.utils.Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at the start of the drag, in pixel units.\n * @package\n */\nBlockly.BubbleDragger.prototype.endBubbleDrag = function(\n    e, currentDragDeltaXY) {\n  // Make sure internal state is fresh.\n  this.dragBubble(e, currentDragDeltaXY);\n\n  var delta = this.pixelsToWorkspaceUnits_(currentDragDeltaXY);\n  var newLoc = Blockly.utils.Coordinate.sum(this.startXY_, delta);\n\n  // Move the bubble to its final location.\n  this.draggingBubble_.moveTo(newLoc.x, newLoc.y);\n  var deleted = this.maybeDeleteBubble_();\n\n  if (!deleted) {\n    // Put everything back onto the bubble canvas.\n    if (this.dragSurface_) {\n      this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas());\n    }\n\n    this.draggingBubble_.setDragging && this.draggingBubble_.setDragging(false);\n    this.fireMoveEvent_();\n  }\n  this.workspace_.setResizesEnabled(true);\n\n  var toolbox = this.workspace_.getToolbox();\n  if (toolbox && typeof toolbox.removeStyle == 'function') {\n    var style = this.draggingBubble_.isDeletable() ? 'blocklyToolboxDelete' :\n                                                     'blocklyToolboxGrab';\n    toolbox.removeStyle(style);\n  }\n  Blockly.Events.setGroup(false);\n};\n\n/**\n * Fire a move event at the end of a bubble drag.\n * @private\n */\nBlockly.BubbleDragger.prototype.fireMoveEvent_ = function() {\n  if (this.draggingBubble_.isComment) {\n    var event = new Blockly.Events.CommentMove(\n        /** @type {!Blockly.WorkspaceCommentSvg} */ (this.draggingBubble_));\n    event.setOldCoordinate(this.startXY_);\n    event.recordNew();\n    Blockly.Events.fire(event);\n  }\n  // TODO (fenichel): move events for comments.\n  return;\n};\n\n/**\n * Convert a coordinate object from pixels to workspace units, including a\n * correction for mutator workspaces.\n * This function does not consider differing origins.  It simply scales the\n * input's x and y values.\n * @param {!Blockly.utils.Coordinate} pixelCoord A coordinate with x and y\n *     values in CSS pixel units.\n * @return {!Blockly.utils.Coordinate} The input coordinate divided by the\n *     workspace scale.\n * @private\n */\nBlockly.BubbleDragger.prototype.pixelsToWorkspaceUnits_ = function(pixelCoord) {\n  var result = new Blockly.utils.Coordinate(\n      pixelCoord.x / this.workspace_.scale,\n      pixelCoord.y / this.workspace_.scale);\n  if (this.workspace_.isMutator) {\n    // If we're in a mutator, its scale is always 1, purely because of some\n    // oddities in our rendering optimizations.  The actual scale is the same as\n    // the scale on the parent workspace.\n    // Fix that for dragging.\n    var mainScale = this.workspace_.options.parentWorkspace.scale;\n    result.scale(1 / mainScale);\n  }\n  return result;\n};\n\n/**\n * Move the bubble onto the drag surface at the beginning of a drag.  Move the\n * drag surface to preserve the apparent location of the bubble.\n * @private\n */\nBlockly.BubbleDragger.prototype.moveToDragSurface_ = function() {\n  this.draggingBubble_.moveTo(0, 0);\n  this.dragSurface_.translateSurface(this.startXY_.x, this.startXY_.y);\n  // Execute the move on the top-level SVG component.\n  this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot());\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for dragging a workspace visually.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.WorkspaceDragger');\n\ngoog.require('Blockly.utils.Coordinate');\n\n\n/**\n * Class for a workspace dragger.  It moves the workspace around when it is\n * being dragged by a mouse or touch.\n * Note that the workspace itself manages whether or not it has a drag surface\n * and how to do translations based on that.  This simply passes the right\n * commands based on events.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace to drag.\n * @constructor\n */\nBlockly.WorkspaceDragger = function(workspace) {\n  /**\n   * @type {!Blockly.WorkspaceSvg}\n   * @private\n   */\n  this.workspace_ = workspace;\n\n  /**\n   * The scroll position of the workspace at the beginning of the drag.\n   * Coordinate system: pixel coordinates.\n   * @type {!Blockly.utils.Coordinate}\n   * @protected\n   */\n  this.startScrollXY_ = new Blockly.utils.Coordinate(\n      workspace.scrollX, workspace.scrollY);\n};\n\n/**\n * Sever all links from this object.\n * @package\n * @suppress {checkTypes}\n */\nBlockly.WorkspaceDragger.prototype.dispose = function() {\n  this.workspace_ = null;\n};\n\n/**\n * Start dragging the workspace.\n * @package\n */\nBlockly.WorkspaceDragger.prototype.startDrag = function() {\n  if (Blockly.selected) {\n    Blockly.selected.unselect();\n  }\n  this.workspace_.setupDragSurface();\n};\n\n/**\n * Finish dragging the workspace and put everything back where it belongs.\n * @param {!Blockly.utils.Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at the start of the drag, in pixel coordinates.\n * @package\n */\nBlockly.WorkspaceDragger.prototype.endDrag = function(currentDragDeltaXY) {\n  // Make sure everything is up to date.\n  this.drag(currentDragDeltaXY);\n  this.workspace_.resetDragSurface();\n};\n\n/**\n * Move the workspace based on the most recent mouse movements.\n * @param {!Blockly.utils.Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at the start of the drag, in pixel coordinates.\n * @package\n */\nBlockly.WorkspaceDragger.prototype.drag = function(currentDragDeltaXY) {\n  var newXY = Blockly.utils.Coordinate.sum(this.startScrollXY_, currentDragDeltaXY);\n  this.workspace_.scroll(newXY.x, newXY.y);\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for dragging a flyout visually.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.FlyoutDragger');\n\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.WorkspaceDragger');\n\ngoog.requireType('Blockly.IFlyout');\n\n\n/**\n * Class for a flyout dragger.  It moves a flyout workspace around when it is\n * being dragged by a mouse or touch.\n * Note that the workspace itself manages whether or not it has a drag surface\n * and how to do translations based on that.  This simply passes the right\n * commands based on events.\n * @param {!Blockly.IFlyout} flyout The flyout to drag.\n * @extends {Blockly.WorkspaceDragger}\n * @constructor\n */\nBlockly.FlyoutDragger = function(flyout) {\n  Blockly.FlyoutDragger.superClass_.constructor.call(this,\n      flyout.getWorkspace());\n\n  /**\n   * The scrollbar to update to move the flyout.\n   * Unlike the main workspace, the flyout has only one scrollbar, in either the\n   * horizontal or the vertical direction.\n   * @type {!Blockly.Scrollbar}\n   * @private\n   */\n  this.scrollbar_ = flyout.scrollbar;\n\n  /**\n   * Whether the flyout scrolls horizontally.  If false, the flyout scrolls\n   * vertically.\n   * @type {boolean}\n   * @private\n   */\n  this.horizontalLayout_ = flyout.horizontalLayout;\n};\nBlockly.utils.object.inherits(Blockly.FlyoutDragger, Blockly.WorkspaceDragger);\n\n/**\n * Move the flyout based on the most recent mouse movements.\n * @param {!Blockly.utils.Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at the start of the drag, in pixel coordinates.\n * @package\n */\nBlockly.FlyoutDragger.prototype.drag = function(currentDragDeltaXY) {\n  // startScrollXY_ is assigned by the superclass.\n  var newXY = Blockly.utils.Coordinate.sum(this.startScrollXY_,\n      currentDragDeltaXY);\n\n  // We can't call workspace.scroll because the flyout's workspace doesn't own\n  // it's own scrollbars. This is because (as of 2.20190722.1) the\n  // workspace's scrollbar property must be a scrollbar pair, rather than a\n  // single scrollbar.\n  // Instead we'll just expect setting the scrollbar to update the scroll of\n  // the workspace as well.\n  if (this.horizontalLayout_) {\n    this.scrollbar_.set(-newXY.x);\n  } else {\n    this.scrollbar_.set(-newXY.y);\n  }\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing an action.\n * Used primarily for keyboard navigation.\n */\n'use strict';\n\ngoog.provide('Blockly.Action');\n\n\n/**\n * Class for a single action.\n * An action describes user intent. (ex go to next or go to previous)\n * @param {string} name The name of the action.\n * @param {string} desc The description of the action.\n * @constructor\n */\nBlockly.Action = function(name, desc) {\n  this.name = name;\n  this.desc = desc;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class in charge of handling actions related to keyboard\n *     navigation.\n * @author aschmiedt@google.com (Abby Schmiedt)\n */\n'use strict';\n\ngoog.provide('Blockly.navigation');\n\ngoog.require('Blockly.Action');\ngoog.require('Blockly.ASTNode');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.user.keyMap');\n\n\n/**\n * A function to call to give feedback to the user about logs, warnings, and\n * errors.  You can override this to customize feedback (e.g. warning sounds,\n * reading out the warning text, etc).\n * Null by default.\n * The first argument is one of 'log', 'warn', and 'error'.\n * The second argument is the message.\n * @type {?function(string, string)}\n * @public\n */\nBlockly.navigation.loggingCallback = null;\n\n/**\n * State indicating focus is currently on the flyout.\n * @type {number}\n * @const\n */\nBlockly.navigation.STATE_FLYOUT = 1;\n\n/**\n * State indicating focus is currently on the workspace.\n * @type {number}\n * @const\n */\nBlockly.navigation.STATE_WS = 2;\n\n/**\n * State indicating focus is currently on the toolbox.\n * @type {number}\n * @const\n */\nBlockly.navigation.STATE_TOOLBOX = 3;\n\n/**\n * The distance to move the cursor on the workspace.\n * @type {number}\n * @const\n */\nBlockly.navigation.WS_MOVE_DISTANCE = 40;\n\n/**\n * The current state the user is in.\n * Initialized to workspace state since a user enters navigation mode by shift\n * clicking on a block or workspace.\n * @type {number}\n * @private\n */\nBlockly.navigation.currentState_ = Blockly.navigation.STATE_WS;\n\n/**\n * Object holding default action names.\n * @enum {string}\n */\nBlockly.navigation.actionNames = {\n  PREVIOUS: 'previous',\n  NEXT: 'next',\n  IN: 'in',\n  OUT: 'out',\n  INSERT: 'insert',\n  MARK: 'mark',\n  DISCONNECT: 'disconnect',\n  TOOLBOX: 'toolbox',\n  EXIT: 'exit',\n  TOGGLE_KEYBOARD_NAV: 'toggle_keyboard_nav',\n  MOVE_WS_CURSOR_UP: 'move workspace cursor up',\n  MOVE_WS_CURSOR_DOWN: 'move workspace cursor down',\n  MOVE_WS_CURSOR_LEFT: 'move workspace cursor left',\n  MOVE_WS_CURSOR_RIGHT: 'move workspace cursor right'\n};\n\n/**\n * The name of the marker reserved for internal use.\n * @type {string}\n * @const\n */\nBlockly.navigation.MARKER_NAME = 'local_marker_1';\n\n/** ****** */\n/** Focus  */\n/** ****** */\n\n/**\n * Get the local marker.\n * @return {Blockly.Marker} The local marker for the main workspace.\n */\nBlockly.navigation.getMarker = function() {\n  return Blockly.navigation.getNavigationWorkspace()\n      .getMarker(Blockly.navigation.MARKER_NAME);\n};\n\n/**\n * Get the workspace that is being navigated.\n * @return {!Blockly.WorkspaceSvg} The workspace being navigated.\n */\nBlockly.navigation.getNavigationWorkspace = function() {\n  return /** @type {!Blockly.WorkspaceSvg} */ (Blockly.getMainWorkspace());\n};\n\n/**\n * If a toolbox exists, set the navigation state to toolbox and select the first\n * category in the toolbox.\n * @private\n */\nBlockly.navigation.focusToolbox_ = function() {\n  var toolbox = Blockly.navigation.getNavigationWorkspace().getToolbox();\n  if (toolbox) {\n    Blockly.navigation.currentState_ = Blockly.navigation.STATE_TOOLBOX;\n    Blockly.navigation.resetFlyout_(false /* shouldHide */);\n\n    if (!Blockly.navigation.getMarker().getCurNode()) {\n      Blockly.navigation.markAtCursor_();\n    }\n    if (!toolbox.getSelectedItem()) {\n      toolbox.selectItemByPosition(0);\n    }\n  }\n};\n\n/**\n * Change focus to the flyout.\n * @private\n */\nBlockly.navigation.focusFlyout_ = function() {\n  var topBlock = null;\n  Blockly.navigation.currentState_ = Blockly.navigation.STATE_FLYOUT;\n  var workspace = Blockly.navigation.getNavigationWorkspace();\n  var toolbox = workspace.getToolbox();\n  var flyout = toolbox ? toolbox.getFlyout() : workspace.getFlyout();\n\n  if (!Blockly.navigation.getMarker().getCurNode()) {\n    Blockly.navigation.markAtCursor_();\n  }\n\n  if (flyout && flyout.getWorkspace()) {\n    var topBlocks = flyout.getWorkspace().getTopBlocks(true);\n    if (topBlocks.length > 0) {\n      topBlock = topBlocks[0];\n      var astNode = Blockly.ASTNode.createStackNode(topBlock);\n      Blockly.navigation.getFlyoutCursor_().setCurNode(astNode);\n    }\n  }\n};\n\n/**\n * Finds where the cursor should go on the workspace. This is either the top\n * block or a set position on the workspace.\n * @private\n */\nBlockly.navigation.focusWorkspace_ = function() {\n  Blockly.hideChaff();\n  var workspace = Blockly.navigation.getNavigationWorkspace();\n  var cursor = workspace.getCursor();\n  var reset = !!workspace.getToolbox();\n  var topBlocks = workspace.getTopBlocks(true);\n\n  Blockly.navigation.resetFlyout_(reset);\n  Blockly.navigation.currentState_ = Blockly.navigation.STATE_WS;\n  if (topBlocks.length > 0) {\n    cursor.setCurNode(Blockly.ASTNode.createTopNode(topBlocks[0]));\n  } else {\n    // TODO: Find the center of the visible workspace.\n    var wsCoord = new Blockly.utils.Coordinate(100, 100);\n    var wsNode = Blockly.ASTNode.createWorkspaceNode(workspace, wsCoord);\n    cursor.setCurNode(wsNode);\n  }\n};\n\n/** ****************** */\n/** Flyout Navigation  */\n/** ****************** */\n\n/**\n * Get the cursor from the flyouts workspace.\n * @return {Blockly.FlyoutCursor} The flyouts cursor or null if no flyout exists.\n * @private\n */\nBlockly.navigation.getFlyoutCursor_ = function() {\n  var workspace = Blockly.navigation.getNavigationWorkspace();\n  var cursor = null;\n  if (workspace.rendered) {\n    var toolbox = workspace.getToolbox();\n    var flyout = toolbox ? toolbox.getFlyout() : workspace.getFlyout();\n    cursor = flyout ? flyout.getWorkspace().getCursor() : null;\n  }\n  return /** @type {Blockly.FlyoutCursor} */ (cursor);\n};\n\n/**\n * If there is a marked connection try connecting the block from the flyout to\n * that connection. If no connection has been marked then inserting will place\n * it on the workspace.\n */\nBlockly.navigation.insertFromFlyout = function() {\n  var workspace = Blockly.navigation.getNavigationWorkspace();\n  var flyout = workspace.getFlyout();\n  if (!flyout || !flyout.isVisible()) {\n    Blockly.navigation.warn_('Trying to insert from the flyout when the flyout does not ' +\n      ' exist or is not visible');\n    return;\n  }\n\n  var curBlock = /** @type {!Blockly.BlockSvg} */ (\n    Blockly.navigation.getFlyoutCursor_().getCurNode().getLocation());\n  if (!curBlock.isEnabled()) {\n    Blockly.navigation.warn_('Can\\'t insert a disabled block.');\n    return;\n  }\n\n  var newBlock = flyout.createBlock(curBlock);\n  // Render to get the sizing right.\n  newBlock.render();\n  // Connections are not tracked when the block is first created.  Normally\n  // there's enough time for them to become tracked in the user's mouse\n  // movements, but not here.\n  newBlock.setConnectionTracking(true);\n  workspace.getCursor().setCurNode(\n      Blockly.ASTNode.createBlockNode(newBlock));\n  if (!Blockly.navigation.modify_()) {\n    Blockly.navigation.warn_('Something went wrong while inserting a block from the flyout.');\n  }\n\n  Blockly.navigation.focusWorkspace_();\n  workspace.getCursor().setCurNode(Blockly.ASTNode.createTopNode(newBlock));\n  Blockly.navigation.removeMark_();\n};\n\n/**\n * Reset flyout information, and optionally close the flyout.\n * @param {boolean} shouldHide True if the flyout should be hidden.\n * @private\n */\nBlockly.navigation.resetFlyout_ = function(shouldHide) {\n  if (Blockly.navigation.getFlyoutCursor_()) {\n    Blockly.navigation.getFlyoutCursor_().hide();\n    if (shouldHide) {\n      Blockly.navigation.getNavigationWorkspace().getFlyout().hide();\n    }\n  }\n};\n\n/** **************** */\n/** Modify Workspace */\n/** **************** */\n\n/**\n * Warns the user if the cursor or marker is on a type that can not be connected.\n * @return {boolean} True if the marker and cursor are valid types, false\n *     otherwise.\n * @private\n */\nBlockly.navigation.modifyWarn_ = function() {\n  var markerNode = Blockly.navigation.getMarker().getCurNode();\n  var cursorNode = Blockly.navigation.getNavigationWorkspace()\n      .getCursor().getCurNode();\n\n  if (!markerNode) {\n    Blockly.navigation.warn_('Cannot insert with no marked node.');\n    return false;\n  }\n\n  if (!cursorNode) {\n    Blockly.navigation.warn_('Cannot insert with no cursor node.');\n    return false;\n  }\n  var markerType = markerNode.getType();\n  var cursorType = cursorNode.getType();\n\n  // Check the marker for invalid types.\n  if (markerType == Blockly.ASTNode.types.FIELD) {\n    Blockly.navigation.warn_('Should not have been able to mark a field.');\n    return false;\n  } else if (markerType == Blockly.ASTNode.types.BLOCK) {\n    Blockly.navigation.warn_('Should not have been able to mark a block.');\n    return false;\n  } else if (markerType == Blockly.ASTNode.types.STACK) {\n    Blockly.navigation.warn_('Should not have been able to mark a stack.');\n    return false;\n  }\n\n  // Check the cursor for invalid types.\n  if (cursorType == Blockly.ASTNode.types.FIELD) {\n    Blockly.navigation.warn_('Cannot attach a field to anything else.');\n    return false;\n  } else if (cursorType == Blockly.ASTNode.types.WORKSPACE) {\n    Blockly.navigation.warn_('Cannot attach a workspace to anything else.');\n    return false;\n  }\n  return true;\n};\n\n/**\n * Disconnect the block from its parent and move to the position of the\n * workspace node.\n * @param {Blockly.BlockSvg} block The block to be moved to the workspace.\n * @param {!Blockly.ASTNode} wsNode The workspace node holding the position the\n *     block will be moved to.\n * @return {boolean} True if the block can be moved to the workspace,\n *     false otherwise.\n * @private\n */\nBlockly.navigation.moveBlockToWorkspace_ = function(block, wsNode) {\n  if (!block) {\n    return false;\n  }\n  if (block.isShadow()) {\n    Blockly.navigation.warn_('Cannot move a shadow block to the workspace.');\n    return false;\n  }\n  if (block.getParent()) {\n    block.unplug(false);\n  }\n  block.moveTo(wsNode.getWsCoordinate());\n  return true;\n};\n\n/**\n * Handle the modifier key (currently I for Insert).\n * Tries to connect the current marker and cursor location. Warns the user if\n * the two locations can not be connected.\n * @return {boolean} True if the key was handled; false if something went wrong.\n * @private\n */\nBlockly.navigation.modify_ = function() {\n  var markerNode = Blockly.navigation.getMarker().getCurNode();\n  var cursorNode = Blockly.navigation.getNavigationWorkspace()\n      .getCursor().getCurNode();\n  if (!Blockly.navigation.modifyWarn_()) {\n    return false;\n  }\n\n  var markerType = markerNode.getType();\n  var cursorType = cursorNode.getType();\n\n  var cursorLoc = cursorNode.getLocation();\n  var markerLoc = markerNode.getLocation();\n\n  if (markerNode.isConnection() && cursorNode.isConnection()) {\n    cursorLoc = /** @type {!Blockly.RenderedConnection} */ (cursorLoc);\n    markerLoc = /** @type {!Blockly.RenderedConnection} */ (markerLoc);\n    return Blockly.navigation.connect_(cursorLoc, markerLoc);\n  } else if (markerNode.isConnection() &&\n      (cursorType == Blockly.ASTNode.types.BLOCK ||\n      cursorType == Blockly.ASTNode.types.STACK)) {\n    cursorLoc = /** @type {!Blockly.BlockSvg} */ (cursorLoc);\n    markerLoc = /** @type {!Blockly.RenderedConnection} */ (markerLoc);\n    return Blockly.navigation.insertBlock(cursorLoc, markerLoc);\n  } else if (markerType == Blockly.ASTNode.types.WORKSPACE) {\n    var block = cursorNode ? cursorNode.getSourceBlock() : null;\n    return Blockly.navigation.moveBlockToWorkspace_(\n        /** @type {Blockly.BlockSvg} */ (block), markerNode);\n  }\n  Blockly.navigation.warn_('Unexpected state in Blockly.navigation.modify_.');\n  return false;\n};\n\n/**\n * If one of the connections source blocks is a child of the other, disconnect\n * the child.\n * @param {!Blockly.RenderedConnection} movingConnection The connection that is\n *     being moved.\n * @param {!Blockly.RenderedConnection} destConnection The connection to be\n *     moved to.\n * @private\n */\nBlockly.navigation.disconnectChild_ = function(movingConnection, destConnection) {\n  var movingBlock = movingConnection.getSourceBlock();\n  var destBlock = destConnection.getSourceBlock();\n\n  if (movingBlock.getRootBlock() == destBlock.getRootBlock()) {\n    if (movingBlock.getDescendants(false).indexOf(destBlock) > -1) {\n      Blockly.navigation.getInferiorConnection_(destConnection).disconnect();\n    } else {\n      Blockly.navigation.getInferiorConnection_(movingConnection).disconnect();\n    }\n  }\n};\n\n/**\n * If the two blocks are compatible move the moving connection to the target\n * connection and connect them.\n * @param {Blockly.RenderedConnection} movingConnection The connection that is\n *     being moved.\n * @param {Blockly.RenderedConnection} destConnection The connection to be moved\n *     to.\n * @return {boolean} True if the connections were connected, false otherwise.\n * @private\n */\nBlockly.navigation.moveAndConnect_ = function(movingConnection, destConnection) {\n  if (!movingConnection || !destConnection) {\n    return false;\n  }\n  var movingBlock = movingConnection.getSourceBlock();\n\n  var checker = movingConnection.getConnectionChecker();\n\n  if (checker.canConnect(movingConnection, destConnection, false)) {\n    Blockly.navigation.disconnectChild_(movingConnection, destConnection);\n\n    if (!destConnection.isSuperior()) {\n      var rootBlock = movingBlock.getRootBlock();\n      rootBlock.positionNearConnection(movingConnection, destConnection);\n    }\n    destConnection.connect(movingConnection);\n    return true;\n  }\n  return false;\n};\n\n/**\n * If the given connection is superior find the inferior connection on the\n * source block.\n * @param {Blockly.RenderedConnection} connection The connection trying to be\n *     connected.\n * @return {Blockly.RenderedConnection} The inferior connection or null if none\n *     exists.\n * @private\n */\nBlockly.navigation.getInferiorConnection_ = function(connection) {\n  var block = connection.getSourceBlock();\n  if (!connection.isSuperior()) {\n    return connection;\n  } else if (block.previousConnection) {\n    return block.previousConnection;\n  } else if (block.outputConnection) {\n    return block.outputConnection;\n  } else {\n    return null;\n  }\n};\n\n/**\n * If the given connection is inferior tries to find a superior connection to\n * connect to.\n * @param {Blockly.RenderedConnection} connection The connection trying to be\n *     connected.\n * @return {Blockly.RenderedConnection} The superior connection or null if none\n *     exists.\n * @private\n */\nBlockly.navigation.getSuperiorConnection_ = function(connection) {\n  if (connection.isSuperior()) {\n    return connection;\n  } else if (connection.targetConnection) {\n    return connection.targetConnection;\n  }\n  return null;\n};\n\n/**\n * Tries to connect the  given connections.\n *\n * If the given connections are not compatible try finding compatible connections\n * on the source blocks of the given connections.\n *\n * @param {Blockly.RenderedConnection} movingConnection The connection that is\n *     being moved.\n * @param {Blockly.RenderedConnection} destConnection The connection to be moved\n *     to.\n * @return {boolean} True if the two connections or their target connections\n *     were connected, false otherwise.\n * @private\n */\nBlockly.navigation.connect_ = function(movingConnection, destConnection) {\n  if (!movingConnection || !destConnection) {\n    return false;\n  }\n\n  var movingInferior = Blockly.navigation.getInferiorConnection_(movingConnection);\n  var destSuperior = Blockly.navigation.getSuperiorConnection_(destConnection);\n\n  var movingSuperior = Blockly.navigation.getSuperiorConnection_(movingConnection);\n  var destInferior = Blockly.navigation.getInferiorConnection_(destConnection);\n\n  if (movingInferior && destSuperior &&\n      Blockly.navigation.moveAndConnect_(movingInferior, destSuperior)) {\n    return true;\n  // Try swapping the inferior and superior connections on the blocks.\n  } else if (movingSuperior && destInferior &&\n      Blockly.navigation.moveAndConnect_(movingSuperior, destInferior)) {\n    return true;\n  } else if (Blockly.navigation.moveAndConnect_(movingConnection, destConnection)){\n    return true;\n  } else {\n    var checker = movingConnection.getConnectionChecker();\n    var reason = checker.canConnectWithReason(\n        movingConnection, destConnection, false);\n    Blockly.navigation.warn_('Connection failed with error: ' +\n        checker.getErrorMessage(reason, movingConnection, destConnection));\n    return false;\n  }\n};\n\n/**\n * Tries to connect the given block to the destination connection, making an\n * intelligent guess about which connection to use to on the moving block.\n * @param {!Blockly.BlockSvg} block The block to move.\n * @param {!Blockly.RenderedConnection} destConnection The connection to connect\n *     to.\n * @return {boolean} Whether the connection was successful.\n */\nBlockly.navigation.insertBlock = function(block, destConnection) {\n  switch (destConnection.type) {\n    case Blockly.PREVIOUS_STATEMENT:\n      if (Blockly.navigation.connect_(block.nextConnection, destConnection)) {\n        return true;\n      }\n      break;\n    case Blockly.NEXT_STATEMENT:\n      if (Blockly.navigation.connect_(block.previousConnection, destConnection)) {\n        return true;\n      }\n      break;\n    case Blockly.INPUT_VALUE:\n      if (Blockly.navigation.connect_(block.outputConnection, destConnection)) {\n        return true;\n      }\n      break;\n    case Blockly.OUTPUT_VALUE:\n      for (var i = 0; i < block.inputList.length; i++) {\n        var inputConnection = /** @type {Blockly.RenderedConnection} */ (\n          block.inputList[i].connection);\n        if (inputConnection && inputConnection.type === Blockly.INPUT_VALUE &&\n            Blockly.navigation.connect_(inputConnection, destConnection)) {\n          return true;\n        }\n      }\n      // If there are no input values pass the output and destination connections\n      // to connect_ to find a way to connect the two.\n      if (block.outputConnection &&\n          Blockly.navigation.connect_(block.outputConnection, destConnection)) {\n        return true;\n      }\n      break;\n  }\n  Blockly.navigation.warn_('This block can not be inserted at the marked location.');\n  return false;\n};\n\n/**\n * Disconnect the connection that the cursor is pointing to, and bump blocks.\n * This is a no-op if the connection cannot be broken or if the cursor is not\n * pointing to a connection.\n * @private\n */\nBlockly.navigation.disconnectBlocks_ = function() {\n  var workspace = Blockly.navigation.getNavigationWorkspace();\n  var curNode = workspace.getCursor().getCurNode();\n  if (!curNode.isConnection()) {\n    Blockly.navigation.log_('Cannot disconnect blocks when the cursor is not on a connection');\n    return;\n  }\n  var curConnection =\n    /** @type {!Blockly.RenderedConnection} */ (curNode.getLocation());\n  if (!curConnection.isConnected()) {\n    Blockly.navigation.log_('Cannot disconnect unconnected connection');\n    return;\n  }\n  var superiorConnection =\n      curConnection.isSuperior() ? curConnection : curConnection.targetConnection;\n\n  var inferiorConnection =\n      curConnection.isSuperior() ? curConnection.targetConnection : curConnection;\n\n  if (inferiorConnection.getSourceBlock().isShadow()) {\n    Blockly.navigation.log_('Cannot disconnect a shadow block');\n    return;\n  }\n  superiorConnection.disconnect();\n  inferiorConnection.bumpAwayFrom(superiorConnection);\n\n  var rootBlock = superiorConnection.getSourceBlock().getRootBlock();\n  rootBlock.bringToFront();\n\n  var connectionNode = Blockly.ASTNode.createConnectionNode(superiorConnection);\n  workspace.getCursor().setCurNode(connectionNode);\n};\n\n/** ***************** */\n/** Helper Functions  */\n/** ***************** */\n\n/**\n * Move the marker to the cursor's current location.\n * @private\n */\nBlockly.navigation.markAtCursor_ = function() {\n  Blockly.navigation.getMarker().setCurNode(\n      Blockly.navigation.getNavigationWorkspace().getCursor().getCurNode());\n};\n\n/**\n * Remove the marker from its current location and hide it.\n * @private\n */\nBlockly.navigation.removeMark_ = function() {\n  var marker = Blockly.navigation.getMarker();\n  marker.setCurNode(null);\n  marker.hide();\n};\n\n/**\n * Set the current navigation state.\n * @param {number} newState The new navigation state.\n * @package\n */\nBlockly.navigation.setState = function(newState) {\n  Blockly.navigation.currentState_ = newState;\n};\n\n/**\n * Before a block is deleted move the cursor to the appropriate position.\n * @param {!Blockly.BlockSvg} deletedBlock The block that is being deleted.\n */\nBlockly.navigation.moveCursorOnBlockDelete = function(deletedBlock) {\n  var workspace = Blockly.navigation.getNavigationWorkspace();\n  if (!workspace) {\n    return;\n  }\n  var cursor = workspace.getCursor();\n  if (cursor) {\n    var curNode = cursor.getCurNode();\n    var block = curNode ? curNode.getSourceBlock() : null;\n\n    if (block === deletedBlock) {\n      // If the block has a parent move the cursor to their connection point.\n      if (block.getParent()) {\n        var topConnection = block.previousConnection || block.outputConnection;\n        if (topConnection) {\n          cursor.setCurNode(\n              Blockly.ASTNode.createConnectionNode(topConnection.targetConnection));\n        }\n      } else {\n        // If the block is by itself move the cursor to the workspace.\n        cursor.setCurNode(Blockly.ASTNode.createWorkspaceNode(block.workspace,\n            block.getRelativeToSurfaceXY()));\n      }\n    // If the cursor is on a block whose parent is being deleted, move the\n    // cursor to the workspace.\n    } else if (block && deletedBlock.getChildren(false).indexOf(block) > -1) {\n      cursor.setCurNode(Blockly.ASTNode.createWorkspaceNode(block.workspace,\n          block.getRelativeToSurfaceXY()));\n    }\n  }\n};\n\n/**\n * When a block that the cursor is on is mutated move the cursor to the block\n * level.\n * @param {!Blockly.BlockSvg} mutatedBlock The block that is being mutated.\n * @package\n */\nBlockly.navigation.moveCursorOnBlockMutation = function(mutatedBlock) {\n  var cursor = Blockly.navigation.getNavigationWorkspace().getCursor();\n  if (cursor) {\n    var curNode = cursor.getCurNode();\n    var block = curNode ? curNode.getSourceBlock() : null;\n\n    if (block === mutatedBlock) {\n      cursor.setCurNode(Blockly.ASTNode.createBlockNode(block));\n    }\n  }\n};\n\n/**\n * Enable accessibility mode.\n */\nBlockly.navigation.enableKeyboardAccessibility = function() {\n  var workspace = Blockly.navigation.getNavigationWorkspace();\n  if (!workspace.keyboardAccessibilityMode) {\n    workspace.keyboardAccessibilityMode = true;\n    Blockly.navigation.focusWorkspace_();\n  }\n};\n\n/**\n * Disable accessibility mode.\n */\nBlockly.navigation.disableKeyboardAccessibility = function() {\n  var workspace = Blockly.navigation.getNavigationWorkspace();\n  if (workspace.keyboardAccessibilityMode) {\n    workspace.keyboardAccessibilityMode = false;\n    workspace.getCursor().hide();\n    Blockly.navigation.getMarker().hide();\n    if (Blockly.navigation.getFlyoutCursor_()) {\n      Blockly.navigation.getFlyoutCursor_().hide();\n    }\n  }\n};\n\n/**\n * Navigation log handler. If loggingCallback is defined, use it.\n * Otherwise just log to the console.\n * @param {string} msg The message to log.\n * @private\n */\nBlockly.navigation.log_ = function(msg) {\n  if (Blockly.navigation.loggingCallback) {\n    Blockly.navigation.loggingCallback('log', msg);\n  } else {\n    console.log(msg);\n  }\n};\n\n/**\n * Navigation warning handler. If loggingCallback is defined, use it.\n * Otherwise call Blockly.navigation.warn_.\n * @param {string} msg The warning message.\n * @private\n */\nBlockly.navigation.warn_ = function(msg) {\n  if (Blockly.navigation.loggingCallback) {\n    Blockly.navigation.loggingCallback('warn', msg);\n  } else {\n    console.warn(msg);\n  }\n};\n\n/**\n * Navigation error handler. If loggingCallback is defined, use it.\n * Otherwise call console.error.\n * @param {string} msg The error message.\n * @private\n */\nBlockly.navigation.error_ = function(msg) {\n  if (Blockly.navigation.loggingCallback) {\n    Blockly.navigation.loggingCallback('error', msg);\n  } else {\n    console.error(msg);\n  }\n};\n\n/** ***************** */\n/** Handle Key Press  */\n/** ***************** */\n\n/**\n * Handler for all the keyboard navigation events.\n * @param {!KeyboardEvent} e The keyboard event.\n * @return {boolean} True if the key was handled false otherwise.\n */\nBlockly.navigation.onKeyPress = function(e) {\n  var key = Blockly.user.keyMap.serializeKeyEvent(e);\n  var action = Blockly.user.keyMap.getActionByKeyCode(key);\n\n  if (action) {\n    return Blockly.navigation.onBlocklyAction(action);\n  }\n  return false;\n};\n\n/**\n * Decides which actions to handle depending on keyboard navigation and readonly\n * states.\n * @param {!Blockly.Action} action The current action.\n * @return {boolean} True if the action has been handled, false otherwise.\n */\nBlockly.navigation.onBlocklyAction = function(action) {\n  var workspace = Blockly.navigation.getNavigationWorkspace();\n  var readOnly = workspace.options.readOnly;\n  var actionHandled = false;\n\n  if (workspace.keyboardAccessibilityMode) {\n    if (!readOnly) {\n      actionHandled = Blockly.navigation.handleActions_(action);\n    // If in readonly mode only handle valid actions.\n    } else if (Blockly.navigation.READONLY_ACTION_LIST.indexOf(action) > -1) {\n      actionHandled = Blockly.navigation.handleActions_(action);\n    }\n  // If not in accessibility mode only handle turning on keyboard navigation.\n  } else if (action.name === Blockly.navigation.actionNames.TOGGLE_KEYBOARD_NAV) {\n    Blockly.navigation.enableKeyboardAccessibility();\n    actionHandled = true;\n  }\n  return actionHandled;\n};\n\n/**\n * Handles the action or dispatches to the appropriate action handler.\n * @param {!Blockly.Action} action The action to handle.\n * @return {boolean} True if the action has been handled, false otherwise.\n * @private\n */\nBlockly.navigation.handleActions_ = function(action) {\n  if (action.name == Blockly.navigation.actionNames.TOOLBOX ||\n    Blockly.navigation.currentState_ == Blockly.navigation.STATE_TOOLBOX) {\n    return Blockly.navigation.toolboxOnAction_(action);\n  } else if (action.name == Blockly.navigation.actionNames.TOGGLE_KEYBOARD_NAV) {\n    Blockly.navigation.disableKeyboardAccessibility();\n    return true;\n  } if (Blockly.navigation.currentState_ == Blockly.navigation.STATE_WS) {\n    return Blockly.navigation.workspaceOnAction_(action);\n  } else if (Blockly.navigation.currentState_ == Blockly.navigation.STATE_FLYOUT) {\n    return Blockly.navigation.flyoutOnAction_(action);\n  }\n  return false;\n};\n\n/**\n * Handles the given action for the flyout.\n * @param {!Blockly.Action} action The action to handle.\n * @return {boolean} True if the action has been handled, false otherwise.\n * @private\n */\nBlockly.navigation.flyoutOnAction_ = function(action) {\n  var workspace = Blockly.navigation.getNavigationWorkspace();\n  var toolbox = workspace.getToolbox();\n  var flyout = toolbox ? toolbox.getFlyout() : workspace.getFlyout();\n\n  if (flyout && flyout.onBlocklyAction(action)) {\n    return true;\n  }\n\n  switch (action.name) {\n    case Blockly.navigation.actionNames.OUT:\n      Blockly.navigation.focusToolbox_();\n      return true;\n    case Blockly.navigation.actionNames.MARK:\n      Blockly.navigation.insertFromFlyout();\n      return true;\n    case Blockly.navigation.actionNames.EXIT:\n      Blockly.navigation.focusWorkspace_();\n      return true;\n    default:\n      return false;\n  }\n};\n\n/**\n * Handles the given action for the toolbox.\n * @param {!Blockly.Action} action The action to handle.\n * @return {boolean} True if the action has been handled, false otherwise.\n * @private\n */\nBlockly.navigation.toolboxOnAction_ = function(action) {\n  var workspace = Blockly.navigation.getNavigationWorkspace();\n  var toolbox = workspace.getToolbox();\n  var handled = toolbox && typeof toolbox.onBlocklyAction == 'function' ?\n      toolbox.onBlocklyAction(action) : false;\n\n  if (handled) {\n    return true;\n  }\n\n  if (action.name === Blockly.navigation.actionNames.TOOLBOX) {\n    if (!workspace.getToolbox()) {\n      Blockly.navigation.focusFlyout_();\n    } else {\n      Blockly.navigation.focusToolbox_();\n    }\n    return true;\n  } else if (action.name === Blockly.navigation.actionNames.IN) {\n    Blockly.navigation.focusFlyout_();\n    return true;\n  } else if (action.name === Blockly.navigation.actionNames.EXIT) {\n    Blockly.navigation.focusWorkspace_();\n    return true;\n  }\n  return false;\n};\n\n/**\n * Move the workspace cursor in the given direction.\n * @param {number} xDirection -1 to move cursor left. 1 to move cursor right.\n * @param {number} yDirection -1 to move cursor up. 1 to move cursor down.\n * @return {boolean} True if the current node is a workspace, false otherwise.\n * @private\n */\nBlockly.navigation.moveWSCursor_ = function(xDirection, yDirection) {\n  var workspace = Blockly.navigation.getNavigationWorkspace();\n  var cursor = workspace.getCursor();\n  var curNode = workspace.getCursor().getCurNode();\n\n  if (curNode.getType() !== Blockly.ASTNode.types.WORKSPACE) {\n    return false;\n  }\n\n  var wsCoord = curNode.getWsCoordinate();\n  var newX = xDirection * Blockly.navigation.WS_MOVE_DISTANCE + wsCoord.x;\n  var newY = yDirection * Blockly.navigation.WS_MOVE_DISTANCE + wsCoord.y;\n\n  cursor.setCurNode(Blockly.ASTNode.createWorkspaceNode(\n      workspace, new Blockly.utils.Coordinate(newX, newY)));\n  return true;\n};\n\n/**\n * Handles the given action for the workspace.\n * @param {!Blockly.Action} action The action to handle.\n * @return {boolean} True if the action has been handled, false otherwise.\n * @private\n */\nBlockly.navigation.workspaceOnAction_ = function(action) {\n  var workspace = Blockly.navigation.getNavigationWorkspace();\n  if (workspace.getCursor().onBlocklyAction(action)) {\n    return true;\n  }\n  switch (action.name) {\n    case Blockly.navigation.actionNames.INSERT:\n      Blockly.navigation.modify_();\n      return true;\n    case Blockly.navigation.actionNames.MARK:\n      Blockly.navigation.handleEnterForWS_();\n      return true;\n    case Blockly.navigation.actionNames.DISCONNECT:\n      Blockly.navigation.disconnectBlocks_();\n      return true;\n    case Blockly.navigation.actionNames.MOVE_WS_CURSOR_UP:\n      return Blockly.navigation.moveWSCursor_(0, -1);\n    case Blockly.navigation.actionNames.MOVE_WS_CURSOR_DOWN:\n      return Blockly.navigation.moveWSCursor_(0, 1);\n    case Blockly.navigation.actionNames.MOVE_WS_CURSOR_LEFT:\n      return Blockly.navigation.moveWSCursor_(-1, 0);\n    case Blockly.navigation.actionNames.MOVE_WS_CURSOR_RIGHT:\n      return Blockly.navigation.moveWSCursor_(1, 0);\n    default:\n      return false;\n  }\n};\n\n/**\n * Handles hitting the enter key on the workspace.\n * @private\n */\nBlockly.navigation.handleEnterForWS_ = function() {\n  var cursor = Blockly.navigation.getNavigationWorkspace().getCursor();\n  var curNode = cursor.getCurNode();\n  var nodeType = curNode.getType();\n  if (nodeType == Blockly.ASTNode.types.FIELD) {\n    (/** @type {!Blockly.Field} */(curNode.getLocation())).showEditor();\n  } else if (curNode.isConnection() ||\n      nodeType == Blockly.ASTNode.types.WORKSPACE) {\n    Blockly.navigation.markAtCursor_();\n  } else if (nodeType == Blockly.ASTNode.types.BLOCK) {\n    Blockly.navigation.warn_('Cannot mark a block.');\n  } else if (nodeType == Blockly.ASTNode.types.STACK) {\n    Blockly.navigation.warn_('Cannot mark a stack.');\n  }\n};\n\n/** ******************* */\n/** Navigation Actions  */\n/** ******************* */\n\n/**\n * The previous action.\n * @type {!Blockly.Action}\n */\nBlockly.navigation.ACTION_PREVIOUS = new Blockly.Action(\n    Blockly.navigation.actionNames.PREVIOUS, 'Go to the previous location.');\n\n/**\n * The out action.\n * @type {!Blockly.Action}\n */\nBlockly.navigation.ACTION_OUT = new Blockly.Action(\n    Blockly.navigation.actionNames.OUT,\n    'Go to the parent of the current location.');\n\n/**\n * The next action.\n * @type {!Blockly.Action}\n */\nBlockly.navigation.ACTION_NEXT = new Blockly.Action(\n    Blockly.navigation.actionNames.NEXT, 'Go to the next location.');\n\n/**\n * The in action.\n * @type {!Blockly.Action}\n */\nBlockly.navigation.ACTION_IN = new Blockly.Action(\n    Blockly.navigation.actionNames.IN,\n    'Go to the first child of the current location.');\n\n/**\n * The action to try to insert a block.\n * @type {!Blockly.Action}\n */\nBlockly.navigation.ACTION_INSERT = new Blockly.Action(\n    Blockly.navigation.actionNames.INSERT,\n    'Connect the current location to the marked location.');\n\n/**\n * The action to mark a certain location.\n * @type {!Blockly.Action}\n */\nBlockly.navigation.ACTION_MARK = new Blockly.Action(\n    Blockly.navigation.actionNames.MARK, 'Mark the current location.');\n\n/**\n * The action to disconnect a block.\n * @type {!Blockly.Action}\n */\nBlockly.navigation.ACTION_DISCONNECT = new Blockly.Action(\n    Blockly.navigation.actionNames.DISCONNECT,\n    'Disconnect the block at the current location from its parent.');\n\n/**\n * The action to open the toolbox.\n * @type {!Blockly.Action}\n */\nBlockly.navigation.ACTION_TOOLBOX = new Blockly.Action(\n    Blockly.navigation.actionNames.TOOLBOX, 'Open the toolbox.');\n\n/**\n * The action to exit the toolbox or flyout.\n * @type {!Blockly.Action}\n */\nBlockly.navigation.ACTION_EXIT = new Blockly.Action(\n    Blockly.navigation.actionNames.EXIT,\n    'Close the current modal, such as a toolbox or field editor.');\n\n/**\n * The action to toggle keyboard navigation mode on and off.\n * @type {!Blockly.Action}\n */\nBlockly.navigation.ACTION_TOGGLE_KEYBOARD_NAV = new Blockly.Action(\n    Blockly.navigation.actionNames.TOGGLE_KEYBOARD_NAV,\n    'Turns on and off keyboard navigation.');\n\n/**\n * The action to move the cursor to the left on a workspace.\n * @type {!Blockly.Action}\n */\nBlockly.navigation.ACTION_MOVE_WS_CURSOR_LEFT = new Blockly.Action(\n    Blockly.navigation.actionNames.MOVE_WS_CURSOR_LEFT,\n    'Move the workspace cursor to the lefts.');\n\n/**\n * The action to move the cursor to the right on a workspace.\n * @type {!Blockly.Action}\n */\nBlockly.navigation.ACTION_MOVE_WS_CURSOR_RIGHT = new Blockly.Action(\n    Blockly.navigation.actionNames.MOVE_WS_CURSOR_RIGHT,\n    'Move the workspace cursor to the right.');\n\n/**\n * The action to move the cursor up on a workspace.\n * @type {!Blockly.Action}\n */\nBlockly.navigation.ACTION_MOVE_WS_CURSOR_UP = new Blockly.Action(\n    Blockly.navigation.actionNames.MOVE_WS_CURSOR_UP,\n    'Move the workspace cursor up.');\n\n/**\n * The action to move the cursor down on a workspace.\n * @type {!Blockly.Action}\n */\nBlockly.navigation.ACTION_MOVE_WS_CURSOR_DOWN = new Blockly.Action(\n    Blockly.navigation.actionNames.MOVE_WS_CURSOR_DOWN,\n    'Move the workspace cursor down.');\n\n\n/**\n * List of actions that can be performed in read only mode.\n * @type {!Array.<!Blockly.Action>}\n */\nBlockly.navigation.READONLY_ACTION_LIST = [\n  Blockly.navigation.ACTION_PREVIOUS,\n  Blockly.navigation.ACTION_OUT,\n  Blockly.navigation.ACTION_IN,\n  Blockly.navigation.ACTION_NEXT,\n  Blockly.navigation.ACTION_TOGGLE_KEYBOARD_NAV\n];\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing an in-progress gesture, usually a drag\n * or a tap.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.Gesture');\n\ngoog.require('Blockly.ASTNode');\ngoog.require('Blockly.blockAnimations');\ngoog.require('Blockly.BlockDragger');\ngoog.require('Blockly.BubbleDragger');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.Ui');\ngoog.require('Blockly.FlyoutDragger');\ngoog.require('Blockly.navigation');\ngoog.require('Blockly.Tooltip');\ngoog.require('Blockly.Touch');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.WorkspaceDragger');\n\ngoog.requireType('Blockly.IBubble');\ngoog.requireType('Blockly.IFlyout');\n\n\n/**\n * Note: In this file \"start\" refers to touchstart, mousedown, and pointerstart\n * events.  \"End\" refers to touchend, mouseup, and pointerend events.\n */\n// TODO: Consider touchcancel/pointercancel.\n\n/**\n * Class for one gesture.\n * @param {!Event} e The event that kicked off this gesture.\n * @param {!Blockly.WorkspaceSvg} creatorWorkspace The workspace that created\n *     this gesture and has a reference to it.\n * @constructor\n */\nBlockly.Gesture = function(e, creatorWorkspace) {\n  /**\n   * The position of the mouse when the gesture started.  Units are CSS pixels,\n   * with (0, 0) at the top left of the browser window (mouseEvent clientX/Y).\n   * @type {Blockly.utils.Coordinate}\n   * @private\n   */\n  this.mouseDownXY_ = null;\n\n  /**\n   * How far the mouse has moved during this drag, in pixel units.\n   * (0, 0) is at this.mouseDownXY_.\n   * @type {!Blockly.utils.Coordinate}\n   * @private\n   */\n  this.currentDragDeltaXY_ = new Blockly.utils.Coordinate(0, 0);\n\n  /**\n   * The bubble that the gesture started on, or null if it did not start on a\n   * bubble.\n   * @type {Blockly.IBubble}\n   * @private\n   */\n  this.startBubble_ = null;\n\n  /**\n   * The field that the gesture started on, or null if it did not start on a\n   * field.\n   * @type {Blockly.Field}\n   * @private\n   */\n  this.startField_ = null;\n\n  /**\n   * The block that the gesture started on, or null if it did not start on a\n   * block.\n   * @type {Blockly.BlockSvg}\n   * @private\n   */\n  this.startBlock_ = null;\n\n  /**\n   * The block that this gesture targets.  If the gesture started on a\n   * shadow block, this is the first non-shadow parent of the block.  If the\n   * gesture started in the flyout, this is the root block of the block group\n   * that was clicked or dragged.\n   * @type {Blockly.BlockSvg}\n   * @private\n   */\n  this.targetBlock_ = null;\n\n  /**\n   * The workspace that the gesture started on.  There may be multiple\n   * workspaces on a page; this is more accurate than using\n   * Blockly.getMainWorkspace().\n   * @type {Blockly.WorkspaceSvg}\n   * @protected\n   */\n  this.startWorkspace_ = null;\n\n  /**\n   * The workspace that created this gesture.  This workspace keeps a reference\n   * to the gesture, which will need to be cleared at deletion.\n   * This may be different from the start workspace.  For instance, a flyout is\n   * a workspace, but its parent workspace manages gestures for it.\n   * @type {!Blockly.WorkspaceSvg}\n   * @private\n   */\n  this.creatorWorkspace_ = creatorWorkspace;\n\n  /**\n   * Whether the pointer has at any point moved out of the drag radius.\n   * A gesture that exceeds the drag radius is a drag even if it ends exactly\n   * at its start point.\n   * @type {boolean}\n   * @private\n   */\n  this.hasExceededDragRadius_ = false;\n\n  /**\n   * Whether the workspace is currently being dragged.\n   * @type {boolean}\n   * @private\n   */\n  this.isDraggingWorkspace_ = false;\n\n  /**\n   * Whether the block is currently being dragged.\n   * @type {boolean}\n   * @private\n   */\n  this.isDraggingBlock_ = false;\n\n  /**\n   * Whether the bubble is currently being dragged.\n   * @type {boolean}\n   * @private\n   */\n  this.isDraggingBubble_ = false;\n\n  /**\n   * The event that most recently updated this gesture.\n   * @type {!Event}\n   * @private\n   */\n  this.mostRecentEvent_ = e;\n\n  /**\n   * A handle to use to unbind a mouse move listener at the end of a drag.\n   * Opaque data returned from Blockly.bindEventWithChecks_.\n   * @type {?Blockly.EventData}\n   * @protected\n   */\n  this.onMoveWrapper_ = null;\n\n  /**\n   * A handle to use to unbind a mouse up listener at the end of a drag.\n   * Opaque data returned from Blockly.bindEventWithChecks_.\n   * @type {?Blockly.EventData}\n   * @protected\n   */\n  this.onUpWrapper_ = null;\n\n  /**\n   * The object tracking a bubble drag, or null if none is in progress.\n   * @type {Blockly.BubbleDragger}\n   * @private\n   */\n  this.bubbleDragger_ = null;\n\n  /**\n   * The object tracking a block drag, or null if none is in progress.\n   * @type {Blockly.BlockDragger}\n   * @private\n   */\n  this.blockDragger_ = null;\n\n  /**\n   * The object tracking a workspace or flyout workspace drag, or null if none\n   * is in progress.\n   * @type {Blockly.WorkspaceDragger}\n   * @private\n   */\n  this.workspaceDragger_ = null;\n\n  /**\n   * The flyout a gesture started in, if any.\n   * @type {Blockly.IFlyout}\n   * @private\n   */\n  this.flyout_ = null;\n\n  /**\n   * Boolean for sanity-checking that some code is only called once.\n   * @type {boolean}\n   * @private\n   */\n  this.calledUpdateIsDragging_ = false;\n\n  /**\n   * Boolean for sanity-checking that some code is only called once.\n   * @type {boolean}\n   * @private\n   */\n  this.hasStarted_ = false;\n\n  /**\n   * Boolean used internally to break a cycle in disposal.\n   * @type {boolean}\n   * @protected\n   */\n  this.isEnding_ = false;\n\n  /**\n   * Boolean used to indicate whether or not to heal the stack after\n   * disconnecting a block.\n   * @type {boolean}\n   * @private\n   */\n  this.healStack_ = !Blockly.DRAG_STACK;\n};\n\n/**\n * Sever all links from this object.\n * @package\n */\nBlockly.Gesture.prototype.dispose = function() {\n  Blockly.Touch.clearTouchIdentifier();\n  Blockly.Tooltip.unblock();\n  // Clear the owner's reference to this gesture.\n  this.creatorWorkspace_.clearGesture();\n\n  if (this.onMoveWrapper_) {\n    Blockly.unbindEvent_(this.onMoveWrapper_);\n  }\n  if (this.onUpWrapper_) {\n    Blockly.unbindEvent_(this.onUpWrapper_);\n  }\n\n  if (this.blockDragger_) {\n    this.blockDragger_.dispose();\n  }\n  if (this.workspaceDragger_) {\n    this.workspaceDragger_.dispose();\n  }\n  if (this.bubbleDragger_) {\n    this.bubbleDragger_.dispose();\n  }\n};\n\n/**\n * Update internal state based on an event.\n * @param {!Event} e The most recent mouse or touch event.\n * @private\n */\nBlockly.Gesture.prototype.updateFromEvent_ = function(e) {\n  var currentXY = new Blockly.utils.Coordinate(e.clientX, e.clientY);\n  var changed = this.updateDragDelta_(currentXY);\n  // Exceeded the drag radius for the first time.\n  if (changed) {\n    this.updateIsDragging_();\n    Blockly.longStop_();\n  }\n  this.mostRecentEvent_ = e;\n};\n\n/**\n * DO MATH to set currentDragDeltaXY_ based on the most recent mouse position.\n * @param {!Blockly.utils.Coordinate} currentXY The most recent mouse/pointer\n *     position, in pixel units, with (0, 0) at the window's top left corner.\n * @return {boolean} True if the drag just exceeded the drag radius for the\n *     first time.\n * @private\n */\nBlockly.Gesture.prototype.updateDragDelta_ = function(currentXY) {\n  this.currentDragDeltaXY_ = Blockly.utils.Coordinate.difference(\n      currentXY,\n      /** @type {!Blockly.utils.Coordinate} */ (this.mouseDownXY_));\n\n  if (!this.hasExceededDragRadius_) {\n    var currentDragDelta =\n        Blockly.utils.Coordinate.magnitude(this.currentDragDeltaXY_);\n\n    // The flyout has a different drag radius from the rest of Blockly.\n    var limitRadius =\n        this.flyout_ ? Blockly.FLYOUT_DRAG_RADIUS : Blockly.DRAG_RADIUS;\n\n    this.hasExceededDragRadius_ = currentDragDelta > limitRadius;\n    return this.hasExceededDragRadius_;\n  }\n  return false;\n};\n\n/**\n * Update this gesture to record whether a block is being dragged from the\n * flyout.\n * This function should be called on a mouse/touch move event the first time the\n * drag radius is exceeded.  It should be called no more than once per gesture.\n * If a block should be dragged from the flyout this function creates the new\n * block on the main workspace and updates targetBlock_ and startWorkspace_.\n * @return {boolean} True if a block is being dragged from the flyout.\n * @private\n */\nBlockly.Gesture.prototype.updateIsDraggingFromFlyout_ = function() {\n  if (!this.targetBlock_) {\n    return false;\n  }\n  if (!this.flyout_.isBlockCreatable_(this.targetBlock_)) {\n    return false;\n  }\n  if (!this.flyout_.isScrollable() ||\n      this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)) {\n    this.startWorkspace_ = this.flyout_.targetWorkspace;\n    this.startWorkspace_.updateScreenCalculationsIfScrolled();\n    // Start the event group now, so that the same event group is used for block\n    // creation and block dragging.\n    if (!Blockly.Events.getGroup()) {\n      Blockly.Events.setGroup(true);\n    }\n    // The start block is no longer relevant, because this is a drag.\n    this.startBlock_ = null;\n    this.targetBlock_ = this.flyout_.createBlock(this.targetBlock_);\n    this.targetBlock_.select();\n    return true;\n  }\n  return false;\n};\n\n/**\n * Update this gesture to record whether a bubble is being dragged.\n * This function should be called on a mouse/touch move event the first time the\n * drag radius is exceeded.  It should be called no more than once per gesture.\n * If a bubble should be dragged this function creates the necessary\n * BubbleDragger and starts the drag.\n * @return {boolean} True if a bubble is being dragged.\n * @private\n */\nBlockly.Gesture.prototype.updateIsDraggingBubble_ = function() {\n  if (!this.startBubble_) {\n    return false;\n  }\n\n  this.isDraggingBubble_ = true;\n  this.startDraggingBubble_();\n  return true;\n};\n\n/**\n * Update this gesture to record whether a block is being dragged.\n * This function should be called on a mouse/touch move event the first time the\n * drag radius is exceeded.  It should be called no more than once per gesture.\n * If a block should be dragged, either from the flyout or in the workspace,\n * this function creates the necessary BlockDragger and starts the drag.\n * @return {boolean} True if a block is being dragged.\n * @private\n */\nBlockly.Gesture.prototype.updateIsDraggingBlock_ = function() {\n  if (!this.targetBlock_) {\n    return false;\n  }\n\n  if (this.flyout_) {\n    this.isDraggingBlock_ = this.updateIsDraggingFromFlyout_();\n  } else if (this.targetBlock_.isMovable()) {\n    this.isDraggingBlock_ = true;\n  }\n\n  if (this.isDraggingBlock_) {\n    this.startDraggingBlock_();\n    return true;\n  }\n  return false;\n};\n\n/**\n * Update this gesture to record whether a workspace is being dragged.\n * This function should be called on a mouse/touch move event the first time the\n * drag radius is exceeded.  It should be called no more than once per gesture.\n * If a workspace is being dragged this function creates the necessary\n * WorkspaceDragger or FlyoutDragger and starts the drag.\n * @private\n */\nBlockly.Gesture.prototype.updateIsDraggingWorkspace_ = function() {\n  var wsMovable = this.flyout_ ?\n      this.flyout_.isScrollable() :\n      this.startWorkspace_ && this.startWorkspace_.isDraggable();\n\n  if (!wsMovable) {\n    return;\n  }\n\n  if (this.flyout_) {\n    this.workspaceDragger_ = new Blockly.FlyoutDragger(this.flyout_);\n  } else {\n    this.workspaceDragger_ = new Blockly.WorkspaceDragger(\n        /** @type {!Blockly.WorkspaceSvg} */ (this.startWorkspace_));\n  }\n\n  this.isDraggingWorkspace_ = true;\n  this.workspaceDragger_.startDrag();\n};\n\n/**\n * Update this gesture to record whether anything is being dragged.\n * This function should be called on a mouse/touch move event the first time the\n * drag radius is exceeded.  It should be called no more than once per gesture.\n * @private\n */\nBlockly.Gesture.prototype.updateIsDragging_ = function() {\n  // Sanity check.\n  if (this.calledUpdateIsDragging_) {\n    throw Error('updateIsDragging_ should only be called once per gesture.');\n  }\n  this.calledUpdateIsDragging_ = true;\n\n  // First check if it was a bubble drag.  Bubbles always sit on top of blocks.\n  if (this.updateIsDraggingBubble_()) {\n    return;\n  }\n  // Then check if it was a block drag.\n  if (this.updateIsDraggingBlock_()) {\n    return;\n  }\n  // Then check if it's a workspace drag.\n  this.updateIsDraggingWorkspace_();\n};\n\n/**\n * Create a block dragger and start dragging the selected block.\n * @private\n */\nBlockly.Gesture.prototype.startDraggingBlock_ = function() {\n  this.blockDragger_ = new Blockly.BlockDragger(\n      /** @type {!Blockly.BlockSvg} */ (this.targetBlock_),\n      /** @type {!Blockly.WorkspaceSvg} */ (this.startWorkspace_));\n  this.blockDragger_.startBlockDrag(this.currentDragDeltaXY_, this.healStack_);\n  this.blockDragger_.dragBlock(this.mostRecentEvent_, this.currentDragDeltaXY_);\n};\n\n/**\n * Create a bubble dragger and start dragging the selected bubble.\n * @private\n */\n// TODO (fenichel): Possibly combine this and startDraggingBlock_.\nBlockly.Gesture.prototype.startDraggingBubble_ = function() {\n  this.bubbleDragger_ = new Blockly.BubbleDragger(\n      /** @type {!Blockly.IBubble} */ (this.startBubble_),\n      /** @type {!Blockly.WorkspaceSvg} */ (this.startWorkspace_));\n  this.bubbleDragger_.startBubbleDrag();\n  this.bubbleDragger_.dragBubble(\n      this.mostRecentEvent_, this.currentDragDeltaXY_);\n};\n/**\n * Start a gesture: update the workspace to indicate that a gesture is in\n * progress and bind mousemove and mouseup handlers.\n * @param {!Event} e A mouse down or touch start event.\n * @package\n */\nBlockly.Gesture.prototype.doStart = function(e) {\n  if (Blockly.utils.isTargetInput(e)) {\n    this.cancel();\n    return;\n  }\n  this.hasStarted_ = true;\n\n  Blockly.blockAnimations.disconnectUiStop();\n  this.startWorkspace_.updateScreenCalculationsIfScrolled();\n  if (this.startWorkspace_.isMutator) {\n    // Mutator's coordinate system could be out of date because the bubble was\n    // dragged, the block was moved, the parent workspace zoomed, etc.\n    this.startWorkspace_.resize();\n  }\n\n  // Hide chaff also hides the flyout, so don't do it if the click is in a\n  // flyout.\n  Blockly.hideChaff(!!this.flyout_);\n\n  this.startWorkspace_.markFocused();\n  this.mostRecentEvent_ = e;\n\n  Blockly.Tooltip.block();\n\n  if (this.targetBlock_) {\n    if (!this.targetBlock_.isInFlyout && e.shiftKey &&\n        this.targetBlock_.workspace.keyboardAccessibilityMode) {\n      this.creatorWorkspace_.getCursor().setCurNode(\n          Blockly.ASTNode.createTopNode(this.targetBlock_));\n    } else {\n      this.targetBlock_.select();\n    }\n  }\n\n  if (Blockly.utils.isRightButton(e)) {\n    this.handleRightClick(e);\n    return;\n  }\n\n  if ((e.type.toLowerCase() == 'touchstart' ||\n       e.type.toLowerCase() == 'pointerdown') &&\n      e.pointerType != 'mouse') {\n    Blockly.longStart(e, this);\n  }\n\n  this.mouseDownXY_ = new Blockly.utils.Coordinate(e.clientX, e.clientY);\n  this.healStack_ = e.altKey || e.ctrlKey || e.metaKey;\n\n  this.bindMouseEvents(e);\n};\n\n/**\n * Bind gesture events.\n * @param {!Event} e A mouse down or touch start event.\n * @package\n */\nBlockly.Gesture.prototype.bindMouseEvents = function(e) {\n  this.onMoveWrapper_ = Blockly.bindEventWithChecks_(\n      document, 'mousemove', null, this.handleMove.bind(this));\n  this.onUpWrapper_ = Blockly.bindEventWithChecks_(\n      document, 'mouseup', null, this.handleUp.bind(this));\n\n  e.preventDefault();\n  e.stopPropagation();\n};\n\n/**\n * Handle a mouse move or touch move event.\n * @param {!Event} e A mouse move or touch move event.\n * @package\n */\nBlockly.Gesture.prototype.handleMove = function(e) {\n  this.updateFromEvent_(e);\n  if (this.isDraggingWorkspace_) {\n    this.workspaceDragger_.drag(this.currentDragDeltaXY_);\n  } else if (this.isDraggingBlock_) {\n    this.blockDragger_.dragBlock(\n        this.mostRecentEvent_, this.currentDragDeltaXY_);\n  } else if (this.isDraggingBubble_) {\n    this.bubbleDragger_.dragBubble(\n        this.mostRecentEvent_, this.currentDragDeltaXY_);\n  }\n  e.preventDefault();\n  e.stopPropagation();\n};\n\n/**\n * Handle a mouse up or touch end event.\n * @param {!Event} e A mouse up or touch end event.\n * @package\n */\nBlockly.Gesture.prototype.handleUp = function(e) {\n  this.updateFromEvent_(e);\n  Blockly.longStop_();\n\n  if (this.isEnding_) {\n    console.log('Trying to end a gesture recursively.');\n    return;\n  }\n  this.isEnding_ = true;\n  // The ordering of these checks is important: drags have higher priority than\n  // clicks.  Fields have higher priority than blocks; blocks have higher\n  // priority than workspaces.\n  // The ordering within drags does not matter, because the three types of\n  // dragging are exclusive.\n  if (this.isDraggingBubble_) {\n    this.bubbleDragger_.endBubbleDrag(e, this.currentDragDeltaXY_);\n  } else if (this.isDraggingBlock_) {\n    this.blockDragger_.endBlockDrag(e, this.currentDragDeltaXY_);\n  } else if (this.isDraggingWorkspace_) {\n    this.workspaceDragger_.endDrag(this.currentDragDeltaXY_);\n  } else if (this.isBubbleClick_()) {\n    // Bubbles are in front of all fields and blocks.\n    this.doBubbleClick_();\n  } else if (this.isFieldClick_()) {\n    this.doFieldClick_();\n  } else if (this.isBlockClick_()) {\n    this.doBlockClick_();\n  } else if (this.isWorkspaceClick_()) {\n    this.doWorkspaceClick_(e);\n  }\n\n  e.preventDefault();\n  e.stopPropagation();\n\n  this.dispose();\n};\n\n/**\n * Cancel an in-progress gesture.  If a workspace or block drag is in progress,\n * end the drag at the most recent location.\n * @package\n */\nBlockly.Gesture.prototype.cancel = function() {\n  // Disposing of a block cancels in-progress drags, but dragging to a delete\n  // area disposes of a block and leads to recursive disposal. Break that cycle.\n  if (this.isEnding_) {\n    return;\n  }\n  Blockly.longStop_();\n  if (this.isDraggingBubble_) {\n    this.bubbleDragger_.endBubbleDrag(\n        this.mostRecentEvent_, this.currentDragDeltaXY_);\n  } else if (this.isDraggingBlock_) {\n    this.blockDragger_.endBlockDrag(\n        this.mostRecentEvent_, this.currentDragDeltaXY_);\n  } else if (this.isDraggingWorkspace_) {\n    this.workspaceDragger_.endDrag(this.currentDragDeltaXY_);\n  }\n  this.dispose();\n};\n\n/**\n * Handle a real or faked right-click event by showing a context menu.\n * @param {!Event} e A mouse move or touch move event.\n * @package\n */\nBlockly.Gesture.prototype.handleRightClick = function(e) {\n  if (this.targetBlock_) {\n    this.bringBlockToFront_();\n    Blockly.hideChaff(!!this.flyout_);\n    this.targetBlock_.showContextMenu(e);\n  } else if (this.startBubble_) {\n    this.startBubble_.showContextMenu(e);\n  } else if (this.startWorkspace_ && !this.flyout_) {\n    Blockly.hideChaff();\n    this.startWorkspace_.showContextMenu(e);\n  }\n\n  // TODO: Handle right-click on a bubble.\n  e.preventDefault();\n  e.stopPropagation();\n\n  this.dispose();\n};\n\n/**\n * Handle a mousedown/touchstart event on a workspace.\n * @param {!Event} e A mouse down or touch start event.\n * @param {!Blockly.WorkspaceSvg} ws The workspace the event hit.\n * @package\n */\nBlockly.Gesture.prototype.handleWsStart = function(e, ws) {\n  if (this.hasStarted_) {\n    throw Error(\n        'Tried to call gesture.handleWsStart, ' +\n        'but the gesture had already been started.');\n  }\n  this.setStartWorkspace_(ws);\n  this.mostRecentEvent_ = e;\n  this.doStart(e);\n  if (this.startWorkspace_.keyboardAccessibilityMode) {\n    Blockly.navigation.setState(Blockly.navigation.STATE_WS);\n  }\n};\n\n/**\n * Fires a workspace click event.\n * @param {!Blockly.WorkspaceSvg} ws The workspace that a user clicks on.\n * @private\n */\nBlockly.Gesture.prototype.fireWorkspaceClick_ = function(ws) {\n  var clickEvent = new Blockly.Events.Ui(null, 'click', null, 'workspace');\n  clickEvent.workspaceId = ws.id;\n  Blockly.Events.fire(clickEvent);\n};\n\n/**\n * Handle a mousedown/touchstart event on a flyout.\n * @param {!Event} e A mouse down or touch start event.\n * @param {!Blockly.IFlyout} flyout The flyout the event hit.\n * @package\n */\nBlockly.Gesture.prototype.handleFlyoutStart = function(e, flyout) {\n  if (this.hasStarted_) {\n    throw Error(\n        'Tried to call gesture.handleFlyoutStart, ' +\n        'but the gesture had already been started.');\n  }\n  this.setStartFlyout_(flyout);\n  this.handleWsStart(e, flyout.getWorkspace());\n};\n\n/**\n * Handle a mousedown/touchstart event on a block.\n * @param {!Event} e A mouse down or touch start event.\n * @param {!Blockly.BlockSvg} block The block the event hit.\n * @package\n */\nBlockly.Gesture.prototype.handleBlockStart = function(e, block) {\n  if (this.hasStarted_) {\n    throw Error(\n        'Tried to call gesture.handleBlockStart, ' +\n        'but the gesture had already been started.');\n  }\n  this.setStartBlock(block);\n  this.mostRecentEvent_ = e;\n};\n\n/**\n * Handle a mousedown/touchstart event on a bubble.\n * @param {!Event} e A mouse down or touch start event.\n * @param {!Blockly.IBubble} bubble The bubble the event hit.\n * @package\n */\nBlockly.Gesture.prototype.handleBubbleStart = function(e, bubble) {\n  if (this.hasStarted_) {\n    throw Error(\n        'Tried to call gesture.handleBubbleStart, ' +\n        'but the gesture had already been started.');\n  }\n  this.setStartBubble(bubble);\n  this.mostRecentEvent_ = e;\n};\n\n/* Begin functions defining what actions to take to execute clicks on each type\n * of target.  Any developer wanting to add behaviour on clicks should modify\n * only this code. */\n\n/**\n * Execute a bubble click.\n * @private\n */\nBlockly.Gesture.prototype.doBubbleClick_ = function() {\n  // TODO (#1673): Consistent handling of single clicks.\n  this.startBubble_.setFocus && this.startBubble_.setFocus();\n  this.startBubble_.select && this.startBubble_.select();\n};\n\n/**\n * Execute a field click.\n * @private\n */\nBlockly.Gesture.prototype.doFieldClick_ = function() {\n  this.startField_.showEditor(this.mostRecentEvent_);\n  this.bringBlockToFront_();\n};\n\n/**\n * Execute a block click.\n * @private\n */\nBlockly.Gesture.prototype.doBlockClick_ = function() {\n  // Block click in an autoclosing flyout.\n  if (this.flyout_ && this.flyout_.autoClose) {\n    if (this.targetBlock_.isEnabled()) {\n      if (!Blockly.Events.getGroup()) {\n        Blockly.Events.setGroup(true);\n      }\n      var newBlock = this.flyout_.createBlock(this.targetBlock_);\n      newBlock.scheduleSnapAndBump();\n    }\n  } else {\n    // Clicks events are on the start block, even if it was a shadow.\n    Blockly.Events.fire(\n        new Blockly.Events.Ui(this.startBlock_, 'click', undefined, 'block'));\n  }\n  this.bringBlockToFront_();\n  Blockly.Events.setGroup(false);\n};\n\n/**\n * Execute a workspace click. When in accessibility mode shift clicking will\n * move the cursor.\n * @param {!Event} e A mouse up or touch end event.\n * @private\n */\nBlockly.Gesture.prototype.doWorkspaceClick_ = function(e) {\n  var ws = this.creatorWorkspace_;\n  if (e.shiftKey && ws.keyboardAccessibilityMode) {\n    var screenCoord = new Blockly.utils.Coordinate(e.clientX, e.clientY);\n    var wsCoord = Blockly.utils.screenToWsCoordinates(ws, screenCoord);\n    var wsNode = Blockly.ASTNode.createWorkspaceNode(ws, wsCoord);\n    ws.getCursor().setCurNode(wsNode);\n  } else if (Blockly.selected) {\n    Blockly.selected.unselect();\n  }\n  this.fireWorkspaceClick_(this.startWorkspace_ || ws);\n};\n\n/* End functions defining what actions to take to execute clicks on each type\n * of target. */\n\n// TODO (fenichel): Move bubbles to the front.\n/**\n * Move the dragged/clicked block to the front of the workspace so that it is\n * not occluded by other blocks.\n * @private\n */\nBlockly.Gesture.prototype.bringBlockToFront_ = function() {\n  // Blocks in the flyout don't overlap, so skip the work.\n  if (this.targetBlock_ && !this.flyout_) {\n    this.targetBlock_.bringToFront();\n  }\n};\n\n/* Begin functions for populating a gesture at mouse down. */\n\n/**\n * Record the field that a gesture started on.\n * @param {Blockly.Field} field The field the gesture started on.\n * @package\n */\nBlockly.Gesture.prototype.setStartField = function(field) {\n  if (this.hasStarted_) {\n    throw Error(\n        'Tried to call gesture.setStartField, ' +\n        'but the gesture had already been started.');\n  }\n  if (!this.startField_) {\n    this.startField_ = field;\n  }\n};\n\n/**\n * Record the bubble that a gesture started on\n * @param {Blockly.IBubble} bubble The bubble the gesture started on.\n * @package\n */\nBlockly.Gesture.prototype.setStartBubble = function(bubble) {\n  if (!this.startBubble_) {\n    this.startBubble_ = bubble;\n  }\n};\n\n/**\n * Record the block that a gesture started on, and set the target block\n * appropriately.\n * @param {Blockly.BlockSvg} block The block the gesture started on.\n * @package\n */\nBlockly.Gesture.prototype.setStartBlock = function(block) {\n  // If the gesture already went through a bubble, don't set the start block.\n  if (!this.startBlock_ && !this.startBubble_) {\n    this.startBlock_ = block;\n    if (block.isInFlyout && block != block.getRootBlock()) {\n      this.setTargetBlock_(block.getRootBlock());\n    } else {\n      this.setTargetBlock_(block);\n    }\n  }\n};\n\n/**\n * Record the block that a gesture targets, meaning the block that will be\n * dragged if this turns into a drag.  If this block is a shadow, that will be\n * its first non-shadow parent.\n * @param {Blockly.BlockSvg} block The block the gesture targets.\n * @private\n */\nBlockly.Gesture.prototype.setTargetBlock_ = function(block) {\n  if (block.isShadow()) {\n    this.setTargetBlock_(block.getParent());\n  } else {\n    this.targetBlock_ = block;\n  }\n};\n\n/**\n * Record the workspace that a gesture started on.\n * @param {Blockly.WorkspaceSvg} ws The workspace the gesture started on.\n * @private\n */\nBlockly.Gesture.prototype.setStartWorkspace_ = function(ws) {\n  if (!this.startWorkspace_) {\n    this.startWorkspace_ = ws;\n  }\n};\n\n/**\n * Record the flyout that a gesture started on.\n * @param {Blockly.IFlyout} flyout The flyout the gesture started on.\n * @private\n */\nBlockly.Gesture.prototype.setStartFlyout_ = function(flyout) {\n  if (!this.flyout_) {\n    this.flyout_ = flyout;\n  }\n};\n\n\n/* End functions for populating a gesture at mouse down. */\n\n/* Begin helper functions defining types of clicks.  Any developer wanting\n * to change the definition of a click should modify only this code. */\n\n/**\n * Whether this gesture is a click on a bubble.  This should only be called when\n * ending a gesture (mouse up, touch end).\n * @return {boolean} Whether this gesture was a click on a bubble.\n * @private\n */\nBlockly.Gesture.prototype.isBubbleClick_ = function() {\n  // A bubble click starts on a bubble and never escapes the drag radius.\n  var hasStartBubble = !!this.startBubble_;\n  return hasStartBubble && !this.hasExceededDragRadius_;\n};\n\n/**\n * Whether this gesture is a click on a block.  This should only be called when\n * ending a gesture (mouse up, touch end).\n * @return {boolean} Whether this gesture was a click on a block.\n * @private\n */\nBlockly.Gesture.prototype.isBlockClick_ = function() {\n  // A block click starts on a block, never escapes the drag radius, and is not\n  // a field click.\n  var hasStartBlock = !!this.startBlock_;\n  return hasStartBlock && !this.hasExceededDragRadius_ && !this.isFieldClick_();\n};\n\n/**\n * Whether this gesture is a click on a field.  This should only be called when\n * ending a gesture (mouse up, touch end).\n * @return {boolean} Whether this gesture was a click on a field.\n * @private\n */\nBlockly.Gesture.prototype.isFieldClick_ = function() {\n  var fieldClickable =\n      this.startField_ ? this.startField_.isClickable() : false;\n  return fieldClickable && !this.hasExceededDragRadius_ &&\n      (!this.flyout_ || !this.flyout_.autoClose);\n};\n\n/**\n * Whether this gesture is a click on a workspace.  This should only be called\n * when ending a gesture (mouse up, touch end).\n * @return {boolean} Whether this gesture was a click on a workspace.\n * @private\n */\nBlockly.Gesture.prototype.isWorkspaceClick_ = function() {\n  var onlyTouchedWorkspace =\n      !this.startBlock_ && !this.startBubble_ && !this.startField_;\n  return onlyTouchedWorkspace && !this.hasExceededDragRadius_;\n};\n\n/* End helper functions defining types of clicks. */\n\n/**\n * Whether this gesture is a drag of either a workspace or block.\n * This function is called externally to block actions that cannot be taken\n * mid-drag (e.g. using the keyboard to delete the selected blocks).\n * @return {boolean} True if this gesture is a drag of a workspace or block.\n * @package\n */\nBlockly.Gesture.prototype.isDragging = function() {\n  return this.isDraggingWorkspace_ || this.isDraggingBlock_ ||\n      this.isDraggingBubble_;\n};\n\n/**\n * Whether this gesture has already been started.  In theory every mouse down\n * has a corresponding mouse up, but in reality it is possible to lose a\n * mouse up, leaving an in-process gesture hanging.\n * @return {boolean} Whether this gesture was a click on a workspace.\n * @package\n */\nBlockly.Gesture.prototype.hasStarted = function() {\n  return this.hasStarted_;\n};\n\n/**\n * Get a list of the insertion markers that currently exist.  Block drags have\n * 0, 1, or 2 insertion markers.\n * @return {!Array.<!Blockly.BlockSvg>} A possibly empty list of insertion\n *     marker blocks.\n * @package\n */\nBlockly.Gesture.prototype.getInsertionMarkers = function() {\n  if (this.blockDragger_) {\n    return this.blockDragger_.getInsertionMarkers();\n  }\n  return [];\n};\n\n/**\n * Is a drag or other gesture currently in progress on any workspace?\n * @return {boolean} True if gesture is occurring.\n */\nBlockly.Gesture.inProgress = function() {\n  var workspaces = Blockly.Workspace.getAll();\n  for (var i = 0, workspace; (workspace = workspaces[i]); i++) {\n    if (workspace.currentGesture_) {\n      return true;\n    }\n  }\n  return false;\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Field.  Used for editable titles, variables, etc.\n * This is an abstract class that defines the UI on the block.  Actual\n * instances would be Blockly.FieldTextInput, Blockly.FieldDropdown, etc.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Field');\n\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockChange');\ngoog.require('Blockly.Gesture');\ngoog.require('Blockly.Tooltip');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.deprecation');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Rect');\ngoog.require('Blockly.utils.Size');\ngoog.require('Blockly.utils.style');\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.userAgent');\n\ngoog.requireType('Blockly.blockRendering.ConstantProvider');\ngoog.requireType('Blockly.IASTNodeLocationSvg');\ngoog.requireType('Blockly.IASTNodeLocationWithBlock');\ngoog.requireType('Blockly.IBlocklyActionable');\ngoog.requireType('Blockly.IRegistrable');\n\n\n/**\n * Abstract class for an editable field.\n * @param {*} value The initial value of the field.\n * @param {?Function=} opt_validator  A function that is called to validate\n *    changes to the field's value. Takes in a value & returns a validated\n *    value, or null to abort the change.\n * @param {Object=} opt_config A map of options used to configure the field. See\n *    the individual field's documentation for a list of properties this\n *    parameter supports.\n * @constructor\n * @implements {Blockly.IASTNodeLocationSvg}\n * @implements {Blockly.IASTNodeLocationWithBlock}\n * @implements {Blockly.IBlocklyActionable}\n * @implements {Blockly.IRegistrable}\n */\nBlockly.Field = function(value, opt_validator, opt_config) {\n  /**\n   * A generic value possessed by the field.\n   * Should generally be non-null, only null when the field is created.\n   * @type {*}\n   * @protected\n   */\n  this.value_ = this.DEFAULT_VALUE;\n\n  /**\n   * Validation function called when user edits an editable field.\n   * @type {Function}\n   * @protected\n   */\n  this.validator_ = null;\n\n  /**\n   * Used to cache the field's tooltip value if setTooltip is called when the\n   * field is not yet initialized. Is *not* guaranteed to be accurate.\n   * @type {?Blockly.Tooltip.TipInfo}\n   * @private\n   */\n  this.tooltip_ = null;\n\n  /**\n   * The size of the area rendered by the field.\n   * @type {!Blockly.utils.Size}\n   * @protected\n   */\n  this.size_ = new Blockly.utils.Size(0, 0);\n\n  /**\n   * Holds the cursors svg element when the cursor is attached to the field.\n   * This is null if there is no cursor on the field.\n   * @type {SVGElement}\n   * @private\n   */\n  this.cursorSvg_ = null;\n\n  /**\n   * Holds the markers svg element when the marker is attached to the field.\n   * This is null if there is no marker on the field.\n   * @type {SVGElement}\n   * @private\n   */\n  this.markerSvg_ = null;\n\n  /**\n   * The rendered field's SVG group element.\n   * @type {SVGGElement}\n   * @protected\n   */\n  this.fieldGroup_ = null;\n\n  /**\n   * The rendered field's SVG border element.\n   * @type {SVGRectElement}\n   * @protected\n   */\n  this.borderRect_ = null;\n\n  /**\n   * The rendered field's SVG text element.\n   * @type {SVGTextElement}\n   * @protected\n   */\n  this.textElement_ = null;\n\n  /**\n   * The rendered field's text content element.\n   * @type {Text}\n   * @protected\n   */\n  this.textContent_ = null;\n\n  /**\n   * Mouse down event listener data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.mouseDownWrapper_ = null;\n\n  /**\n   * Constants associated with the source block's renderer.\n   * @type {Blockly.blockRendering.ConstantProvider}\n   * @protected\n   */\n  this.constants_ = null;\n\n  opt_config && this.configure_(opt_config);\n  this.setValue(value);\n  opt_validator && this.setValidator(opt_validator);\n};\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nBlockly.Field.prototype.DEFAULT_VALUE = null;\n\n/**\n * Name of field.  Unique within each block.\n * Static labels are usually unnamed.\n * @type {string|undefined}\n */\nBlockly.Field.prototype.name = undefined;\n\n/**\n * Has this field been disposed of?\n * @type {boolean}\n * @package\n */\nBlockly.Field.prototype.disposed = false;\n\n/**\n * Maximum characters of text to display before adding an ellipsis.\n * @type {number}\n */\nBlockly.Field.prototype.maxDisplayLength = 50;\n\n/**\n * Block this field is attached to.  Starts as null, then set in init.\n * @type {Blockly.Block}\n * @protected\n */\nBlockly.Field.prototype.sourceBlock_ = null;\n\n/**\n * Does this block need to be re-rendered?\n * @type {boolean}\n * @protected\n */\nBlockly.Field.prototype.isDirty_ = true;\n\n/**\n * Is the field visible, or hidden due to the block being collapsed?\n * @type {boolean}\n * @protected\n */\nBlockly.Field.prototype.visible_ = true;\n\n/**\n * The element the click handler is bound to.\n * @type {Element}\n * @protected\n */\nBlockly.Field.prototype.clickTarget_ = null;\n\n/**\n * A developer hook to override the returned text of this field.\n * Override if the text representation of the value of this field\n * is not just a string cast of its value.\n * Return null to resort to a string cast.\n * @return {?string} Current text. Return null to resort to a string cast.\n * @protected\n */\nBlockly.Field.prototype.getText_;\n\n/**\n * An optional method that can be defined to show an editor when the field is\n *     clicked. Blockly will automatically set the field as clickable if this\n *     method is defined.\n * @param {Event=} opt_e Optional mouse event that triggered the field to open,\n *     or undefined if triggered programmatically.\n * @return {void}\n * @protected\n */\nBlockly.Field.prototype.showEditor_;\n\n/**\n * Non-breaking space.\n * @const\n */\nBlockly.Field.NBSP = '\\u00A0';\n\n/**\n * Editable fields usually show some sort of UI indicating they are editable.\n * They will also be saved by the XML renderer.\n * @type {boolean}\n */\nBlockly.Field.prototype.EDITABLE = true;\n\n/**\n * Serializable fields are saved by the XML renderer, non-serializable fields\n * are not. Editable fields should also be serializable. This is not the\n * case by default so that SERIALIZABLE is backwards compatible.\n * @type {boolean}\n */\nBlockly.Field.prototype.SERIALIZABLE = false;\n\n/**\n * Process the configuration map passed to the field.\n * @param {!Object} config A map of options used to configure the field. See\n *    the individual field's documentation for a list of properties this\n *    parameter supports.\n * @protected\n */\nBlockly.Field.prototype.configure_ = function(config) {\n  var tooltip = config['tooltip'];\n  if (typeof tooltip == 'string') {\n    tooltip = Blockly.utils.replaceMessageReferences(\n        config['tooltip']);\n  }\n  tooltip && this.setTooltip(tooltip);\n\n  // TODO (#2884): Possibly add CSS class config option.\n  // TODO (#2885): Possibly add cursor config option.\n};\n\n/**\n * Attach this field to a block.\n * @param {!Blockly.Block} block The block containing this field.\n */\nBlockly.Field.prototype.setSourceBlock = function(block) {\n  if (this.sourceBlock_) {\n    throw Error('Field already bound to a block.');\n  }\n  this.sourceBlock_ = block;\n};\n\n/**\n * Get the renderer constant provider.\n * @return {?Blockly.blockRendering.ConstantProvider} The renderer constant\n *     provider.\n */\nBlockly.Field.prototype.getConstants = function() {\n  if (!this.constants_ && this.sourceBlock_ && this.sourceBlock_.workspace &&\n      this.sourceBlock_.workspace.rendered) {\n    this.constants_ = this.sourceBlock_.workspace.getRenderer().getConstants();\n  }\n  return this.constants_;\n};\n\n/**\n * Get the block this field is attached to.\n * @return {Blockly.Block} The block containing this field.\n */\nBlockly.Field.prototype.getSourceBlock = function() {\n  return this.sourceBlock_;\n};\n\n/**\n * Initialize everything to render this field. Override\n * methods initModel and initView rather than this method.\n * @package\n */\nBlockly.Field.prototype.init = function() {\n  if (this.fieldGroup_) {\n    // Field has already been initialized once.\n    return;\n  }\n  this.fieldGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G, {}, null);\n  if (!this.isVisible()) {\n    this.fieldGroup_.style.display = 'none';\n  }\n  var sourceBlockSvg = /** @type {!Blockly.BlockSvg} **/ (this.sourceBlock_);\n  sourceBlockSvg.getSvgRoot().appendChild(this.fieldGroup_);\n  this.initView();\n  this.updateEditable();\n  this.setTooltip(this.tooltip_);\n  this.bindEvents_();\n  this.initModel();\n};\n\n/**\n * Create the block UI for this field.\n * @package\n */\nBlockly.Field.prototype.initView = function() {\n  this.createBorderRect_();\n  this.createTextElement_();\n};\n\n/**\n * Initializes the model of the field after it has been installed on a block.\n * No-op by default.\n * @package\n */\nBlockly.Field.prototype.initModel = function() {\n};\n\n/**\n * Create a field border rect element. Not to be overridden by subclasses.\n * Instead modify the result of the function inside initView, or create a\n * separate function to call.\n * @protected\n */\nBlockly.Field.prototype.createBorderRect_ = function() {\n  this.borderRect_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT, {\n        'rx': this.getConstants().FIELD_BORDER_RECT_RADIUS,\n        'ry': this.getConstants().FIELD_BORDER_RECT_RADIUS,\n        'x': 0,\n        'y': 0,\n        'height': this.size_.height,\n        'width': this.size_.width,\n        'class': 'blocklyFieldRect'\n      }, this.fieldGroup_);\n};\n\n/**\n * Create a field text element. Not to be overridden by subclasses. Instead\n * modify the result of the function inside initView, or create a separate\n * function to call.\n * @protected\n */\nBlockly.Field.prototype.createTextElement_ = function() {\n  this.textElement_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.TEXT, {\n        'class': 'blocklyText',\n      }, this.fieldGroup_);\n  if (this.getConstants().FIELD_TEXT_BASELINE_CENTER) {\n    this.textElement_.setAttribute('dominant-baseline', 'central');\n  }\n  this.textContent_ = document.createTextNode('');\n  this.textElement_.appendChild(this.textContent_);\n};\n\n/**\n * Bind events to the field. Can be overridden by subclasses if they need to do\n * custom input handling.\n * @protected\n */\nBlockly.Field.prototype.bindEvents_ = function() {\n  Blockly.Tooltip.bindMouseEvents(this.getClickTarget_());\n  this.mouseDownWrapper_ =\n      Blockly.bindEventWithChecks_(\n          this.getClickTarget_(), 'mousedown', this, this.onMouseDown_);\n};\n\n/**\n * Sets the field's value based on the given XML element. Should only be\n * called by Blockly.Xml.\n * @param {!Element} fieldElement The element containing info about the\n *    field's state.\n * @package\n */\nBlockly.Field.prototype.fromXml = function(fieldElement) {\n  this.setValue(fieldElement.textContent);\n};\n\n/**\n * Serializes this field's value to XML. Should only be called by Blockly.Xml.\n * @param {!Element} fieldElement The element to populate with info about the\n *    field's state.\n * @return {!Element} The element containing info about the field's state.\n * @package\n */\nBlockly.Field.prototype.toXml = function(fieldElement) {\n  fieldElement.textContent = this.getValue();\n  return fieldElement;\n};\n\n/**\n * Dispose of all DOM objects and events belonging to this editable field.\n * @package\n */\nBlockly.Field.prototype.dispose = function() {\n  Blockly.DropDownDiv.hideIfOwner(this);\n  Blockly.WidgetDiv.hideIfOwner(this);\n  Blockly.Tooltip.unbindMouseEvents(this.getClickTarget_());\n\n  if (this.mouseDownWrapper_) {\n    Blockly.unbindEvent_(this.mouseDownWrapper_);\n  }\n\n  Blockly.utils.dom.removeNode(this.fieldGroup_);\n\n  this.disposed = true;\n};\n\n/**\n * Add or remove the UI indicating if this field is editable or not.\n */\nBlockly.Field.prototype.updateEditable = function() {\n  var group = this.fieldGroup_;\n  if (!this.EDITABLE || !group) {\n    return;\n  }\n  if (this.sourceBlock_.isEditable()) {\n    Blockly.utils.dom.addClass(group, 'blocklyEditableText');\n    Blockly.utils.dom.removeClass(group, 'blocklyNonEditableText');\n    group.style.cursor = this.CURSOR;\n  } else {\n    Blockly.utils.dom.addClass(group, 'blocklyNonEditableText');\n    Blockly.utils.dom.removeClass(group, 'blocklyEditableText');\n    group.style.cursor = '';\n  }\n};\n\n/**\n * Check whether this field defines the showEditor_ function.\n * @return {boolean} Whether this field is clickable.\n */\nBlockly.Field.prototype.isClickable = function() {\n  return !!this.sourceBlock_ && this.sourceBlock_.isEditable() &&\n      !!this.showEditor_ && (typeof this.showEditor_ === 'function');\n};\n\n/**\n * Check whether this field is currently editable.  Some fields are never\n * EDITABLE (e.g. text labels). Other fields may be EDITABLE but may exist on\n * non-editable blocks.\n * @return {boolean} Whether this field is editable and on an editable block\n */\nBlockly.Field.prototype.isCurrentlyEditable = function() {\n  return this.EDITABLE && !!this.sourceBlock_ && this.sourceBlock_.isEditable();\n};\n\n/**\n * Check whether this field should be serialized by the XML renderer.\n * Handles the logic for backwards compatibility and incongruous states.\n * @return {boolean} Whether this field should be serialized or not.\n */\nBlockly.Field.prototype.isSerializable = function() {\n  var isSerializable = false;\n  if (this.name) {\n    if (this.SERIALIZABLE) {\n      isSerializable = true;\n    } else if (this.EDITABLE) {\n      console.warn('Detected an editable field that was not serializable.' +\n        ' Please define SERIALIZABLE property as true on all editable custom' +\n        ' fields. Proceeding with serialization.');\n      isSerializable = true;\n    }\n  }\n  return isSerializable;\n};\n\n/**\n * Gets whether this editable field is visible or not.\n * @return {boolean} True if visible.\n */\nBlockly.Field.prototype.isVisible = function() {\n  return this.visible_;\n};\n\n/**\n * Sets whether this editable field is visible or not. Should only be called\n * by input.setVisible.\n * @param {boolean} visible True if visible.\n * @package\n */\nBlockly.Field.prototype.setVisible = function(visible) {\n  if (this.visible_ == visible) {\n    return;\n  }\n  this.visible_ = visible;\n  var root = this.getSvgRoot();\n  if (root) {\n    root.style.display = visible ? 'block' : 'none';\n  }\n};\n\n/**\n * Sets a new validation function for editable fields, or clears a previously\n * set validator.\n *\n * The validator function takes in the new field value, and returns\n * validated value. The validated value could be the input value, a modified\n * version of the input value, or null to abort the change.\n *\n * If the function does not return anything (or returns undefined) the new\n * value is accepted as valid. This is to allow for fields using the\n * validated function as a field-level change event notification.\n *\n * @param {Function} handler The validator function\n *     or null to clear a previous validator.\n */\nBlockly.Field.prototype.setValidator = function(handler) {\n  this.validator_ = handler;\n};\n\n/**\n * Gets the validation function for editable fields, or null if not set.\n * @return {Function} Validation function, or null.\n */\nBlockly.Field.prototype.getValidator = function() {\n  return this.validator_;\n};\n\n/**\n * Validates a change.  Does nothing.  Subclasses may override this.\n * @param {string} text The user's text.\n * @return {string} No change needed.\n * @deprecated May 2019. Override doClassValidation and other relevant 'do'\n *  functions instead.\n */\nBlockly.Field.prototype.classValidator = function(text) {\n  Blockly.utils.deprecation.warn(\n      'Field.prototype.classValidator',\n      'May 2019',\n      'December 2020',\n      'Blockly.Field.prototype.doClassValidation_');\n  return text;\n};\n\n/**\n * Calls the validation function for this field, as well as all the validation\n * function for the field's class and its parents.\n * @param {string} text Proposed text.\n * @return {?string} Revised text, or null if invalid.\n * @deprecated May 2019. setValue now contains all relevant logic.\n */\nBlockly.Field.prototype.callValidator = function(text) {\n  Blockly.utils.deprecation.warn(\n      'Field.prototype.callValidator',\n      'May 2019',\n      'December 2020');\n  var classResult = this.classValidator(text);\n  if (classResult === null) {\n    // Class validator rejects value.  Game over.\n    return null;\n  } else if (classResult !== undefined) {\n    text = classResult;\n  }\n  var userValidator = this.getValidator();\n  if (userValidator) {\n    var userResult = userValidator.call(this, text);\n    if (userResult === null) {\n      // User validator rejects value.  Game over.\n      return null;\n    } else if (userResult !== undefined) {\n      text = userResult;\n    }\n  }\n  return text;\n};\n\n/**\n * Gets the group element for this editable field.\n * Used for measuring the size and for positioning.\n * @return {!SVGGElement} The group element.\n */\nBlockly.Field.prototype.getSvgRoot = function() {\n  return /** @type {!SVGGElement} */ (this.fieldGroup_);\n};\n\n/**\n * Updates the field to match the colour/style of the block. Should only be\n * called by BlockSvg.applyColour().\n * @package\n */\nBlockly.Field.prototype.applyColour = function() {\n  // Non-abstract sub-classes may wish to implement this. See FieldDropdown.\n};\n\n/**\n * Used by getSize() to move/resize any DOM elements, and get the new size.\n *\n * All rendering that has an effect on the size/shape of the block should be\n * done here, and should be triggered by getSize().\n * @protected\n */\nBlockly.Field.prototype.render_ = function() {\n  if (this.textContent_) {\n    this.textContent_.nodeValue = this.getDisplayText_();\n  }\n  this.updateSize_();\n};\n\n/**\n * Show an editor when the field is clicked only if the field is clickable.\n * @param {Event=} opt_e Optional mouse event that triggered the field to open,\n *     or undefined if triggered programmatically.\n * @package\n */\nBlockly.Field.prototype.showEditor = function(opt_e) {\n  if (this.isClickable()) {\n    this.showEditor_(opt_e);\n  }\n};\n\n/**\n * Updates the width of the field. Redirects to updateSize_().\n * @deprecated May 2019  Use Blockly.Field.updateSize_() to force an update\n * to the size of the field, or Blockly.utils.dom.getTextWidth() to\n * check the size of the field.\n */\nBlockly.Field.prototype.updateWidth = function() {\n\n  Blockly.utils.deprecation.warn(\n      'Field.prototype.updateWidth',\n      'May 2019',\n      'December 2020',\n      'Blockly.Field.prototype.updateSize_ or Blockly.utils.dom.getTextWidth');\n  this.updateSize_();\n};\n\n/**\n * Updates the size of the field based on the text.\n * @param {number=} opt_margin margin to use when positioning the text element.\n * @protected\n */\nBlockly.Field.prototype.updateSize_ = function(opt_margin) {\n  var constants = this.getConstants();\n  var xOffset = opt_margin != undefined ? opt_margin :\n      (this.borderRect_ ? this.getConstants().FIELD_BORDER_RECT_X_PADDING : 0);\n  var totalWidth = xOffset * 2;\n  var totalHeight = constants.FIELD_TEXT_HEIGHT;\n\n  var contentWidth = 0;\n  if (this.textElement_) {\n    contentWidth = Blockly.utils.dom.getFastTextWidth(this.textElement_,\n        constants.FIELD_TEXT_FONTSIZE,\n        constants.FIELD_TEXT_FONTWEIGHT,\n        constants.FIELD_TEXT_FONTFAMILY);\n    totalWidth += contentWidth;\n  }\n  if (this.borderRect_) {\n    totalHeight = Math.max(totalHeight, constants.FIELD_BORDER_RECT_HEIGHT);\n  }\n\n  this.size_.height = totalHeight;\n  this.size_.width = totalWidth;\n\n  this.positionTextElement_(xOffset, contentWidth);\n  this.positionBorderRect_();\n};\n\n/**\n * Position a field's text element after a size change.  This handles both LTR\n * and RTL positioning.\n * @param {number} xOffset x offset to use when positioning the text element.\n * @param {number} contentWidth The content width.\n * @protected\n */\nBlockly.Field.prototype.positionTextElement_ = function(xOffset, contentWidth) {\n  if (!this.textElement_) {\n    return;\n  }\n  var constants = this.getConstants();\n  var halfHeight = this.size_.height / 2;\n\n  this.textElement_.setAttribute('x', this.sourceBlock_.RTL ?\n      this.size_.width - contentWidth - xOffset : xOffset);\n  this.textElement_.setAttribute('y', constants.FIELD_TEXT_BASELINE_CENTER ?\n      halfHeight : halfHeight - constants.FIELD_TEXT_HEIGHT / 2 +\n      constants.FIELD_TEXT_BASELINE);\n};\n\n/**\n * Position a field's border rect after a size change.\n * @protected\n */\nBlockly.Field.prototype.positionBorderRect_ = function() {\n  if (!this.borderRect_) {\n    return;\n  }\n  this.borderRect_.setAttribute('width', this.size_.width);\n  this.borderRect_.setAttribute('height', this.size_.height);\n  this.borderRect_.setAttribute('rx',\n      this.getConstants().FIELD_BORDER_RECT_RADIUS);\n  this.borderRect_.setAttribute('ry',\n      this.getConstants().FIELD_BORDER_RECT_RADIUS);\n};\n\n\n/**\n * Returns the height and width of the field.\n *\n * This should *in general* be the only place render_ gets called from.\n * @return {!Blockly.utils.Size} Height and width.\n */\nBlockly.Field.prototype.getSize = function() {\n  if (!this.isVisible()) {\n    return new Blockly.utils.Size(0, 0);\n  }\n\n  if (this.isDirty_) {\n    this.render_();\n    this.isDirty_ = false;\n  } else if (this.visible_ && this.size_.width == 0) {\n    // If the field is not visible the width will be 0 as well, one of the\n    // problems with the old system.\n    console.warn('Deprecated use of setting size_.width to 0 to rerender a' +\n      ' field. Set field.isDirty_ to true instead.');\n    this.render_();\n  }\n  return this.size_;\n};\n\n/**\n * Returns the bounding box of the rendered field, accounting for workspace\n * scaling.\n * @return {!Blockly.utils.Rect} An object with top, bottom, left, and right in\n *     pixels relative to the top left corner of the page (window coordinates).\n * @package\n */\nBlockly.Field.prototype.getScaledBBox = function() {\n  if (!this.borderRect_) {\n    // Browsers are inconsistent in what they return for a bounding box.\n    // - Webkit / Blink: fill-box / object bounding box\n    // - Gecko / Triden / EdgeHTML: stroke-box\n    var bBox = this.sourceBlock_.getHeightWidth();\n    var scale = this.sourceBlock_.workspace.scale;\n    var xy = this.getAbsoluteXY_();\n    var scaledWidth = bBox.width * scale;\n    var scaledHeight = bBox.height * scale;\n\n    if (Blockly.utils.userAgent.GECKO) {\n      xy.x += 1.5 * scale;\n      xy.y += 1.5 * scale;\n      scaledWidth += 1 * scale;\n      scaledHeight += 1 * scale;\n    } else {\n      if (!Blockly.utils.userAgent.EDGE && !Blockly.utils.userAgent.IE) {\n        xy.x -= 0.5 * scale;\n        xy.y -= 0.5 * scale;\n      }\n      scaledWidth += 1 * scale;\n      scaledHeight += 1 * scale;\n    }\n  } else {\n    var bBox = this.borderRect_.getBoundingClientRect();\n    var xy = Blockly.utils.style.getPageOffset(this.borderRect_);\n    var scaledWidth = bBox.width;\n    var scaledHeight = bBox.height;\n  }\n  return new Blockly.utils.Rect(\n      xy.y,\n      xy.y + scaledHeight,\n      xy.x,\n      xy.x + scaledWidth\n  );\n};\n\n/**\n * Get the text from this field to display on the block. May differ from\n * ``getText`` due to ellipsis, and other formatting.\n * @return {string} Text to display.\n * @protected\n */\nBlockly.Field.prototype.getDisplayText_ = function() {\n  var text = this.getText();\n  if (!text) {\n    // Prevent the field from disappearing if empty.\n    return Blockly.Field.NBSP;\n  }\n  if (text.length > this.maxDisplayLength) {\n    // Truncate displayed string and add an ellipsis ('...').\n    text = text.substring(0, this.maxDisplayLength - 2) + '\\u2026';\n  }\n  // Replace whitespace with non-breaking spaces so the text doesn't collapse.\n  text = text.replace(/\\s/g, Blockly.Field.NBSP);\n  if (this.sourceBlock_ && this.sourceBlock_.RTL) {\n    // The SVG is LTR, force text to be RTL.\n    text += '\\u200F';\n  }\n  return text;\n};\n\n/**\n * Get the text from this field.\n * @return {string} Current text.\n */\nBlockly.Field.prototype.getText = function() {\n  if (this.getText_) {\n    var text = this.getText_.call(this);\n    if (text !== null) {\n      return String(text);\n    }\n  }\n  return String(this.getValue());\n};\n\n/**\n * Set the text in this field.  Trigger a rerender of the source block.\n * @param {*} _newText New text.\n * @deprecated 2019 setText should not be used directly. Use setValue instead.\n */\nBlockly.Field.prototype.setText = function(_newText) {\n  Blockly.utils.deprecation.warn(\n      'Field.prototype.setText',\n      'May 2019',\n      'December 2020',\n      'Blockly.Field.prototype.setValue');\n  throw Error('setText method is deprecated');\n};\n\n/**\n * Force a rerender of the block that this field is installed on, which will\n * rerender this field and adjust for any sizing changes.\n * Other fields on the same block will not rerender, because their sizes have\n * already been recorded.\n * @package\n */\nBlockly.Field.prototype.markDirty = function() {\n  this.isDirty_ = true;\n  this.constants_ = null;\n};\n\n/**\n * Force a rerender of the block that this field is installed on, which will\n * rerender this field and adjust for any sizing changes.\n * Other fields on the same block will not rerender, because their sizes have\n * already been recorded.\n * @package\n */\nBlockly.Field.prototype.forceRerender = function() {\n  this.isDirty_ = true;\n  if (this.sourceBlock_ && this.sourceBlock_.rendered) {\n    this.sourceBlock_.render();\n    this.sourceBlock_.bumpNeighbours();\n    this.updateMarkers_();\n  }\n};\n\n/**\n * Used to change the value of the field. Handles validation and events.\n * Subclasses should override doClassValidation_ and doValueUpdate_ rather\n * than this method.\n * @param {*} newValue New value.\n */\nBlockly.Field.prototype.setValue = function(newValue) {\n  var doLogging = false;\n  if (newValue === null) {\n    doLogging && console.log('null, return');\n    // Not a valid value to check.\n    return;\n  }\n\n  var validatedValue = this.doClassValidation_(newValue);\n  // Class validators might accidentally forget to return, we'll ignore that.\n  newValue = this.processValidation_(newValue, validatedValue);\n  if (newValue instanceof Error) {\n    doLogging && console.log('invalid class validation, return');\n    return;\n  }\n\n  var localValidator = this.getValidator();\n  if (localValidator) {\n    validatedValue = localValidator.call(this, newValue);\n    // Local validators might accidentally forget to return, we'll ignore that.\n    newValue = this.processValidation_(newValue, validatedValue);\n    if (newValue instanceof Error) {\n      doLogging && console.log('invalid local validation, return');\n      return;\n    }\n  }\n  var source = this.sourceBlock_;\n  if (source && source.disposed) {\n    doLogging && console.log('source disposed, return');\n    return;\n  }\n  var oldValue = this.getValue();\n  if (oldValue === newValue) {\n    doLogging && console.log('same, return');\n    return;\n  }\n\n  if (source && Blockly.Events.isEnabled()) {\n    Blockly.Events.fire(new Blockly.Events.BlockChange(\n        source, 'field', this.name || null, oldValue, newValue));\n  }\n  this.doValueUpdate_(newValue);\n  if (this.isDirty_) {\n    this.forceRerender();\n  }\n  doLogging && console.log(this.value_);\n};\n\n/**\n * Process the result of validation.\n * @param {*} newValue New value.\n * @param {*} validatedValue Validated value.\n * @return {*} New value, or an Error object.\n * @private\n */\nBlockly.Field.prototype.processValidation_ = function(newValue,\n    validatedValue) {\n  if (validatedValue === null) {\n    this.doValueInvalid_(newValue);\n    if (this.isDirty_) {\n      this.forceRerender();\n    }\n    return Error();\n  }\n  if (validatedValue !== undefined) {\n    newValue = validatedValue;\n  }\n  return newValue;\n};\n\n/**\n * Get the current value of the field.\n * @return {*} Current value.\n */\nBlockly.Field.prototype.getValue = function() {\n  return this.value_;\n};\n\n/**\n * Used to validate a value. Returns input by default. Can be overridden by\n * subclasses, see FieldDropdown.\n * @param {*=} opt_newValue The value to be validated.\n * @return {*} The validated value, same as input by default.\n * @protected\n * @suppress {deprecated} Suppress deprecated this.classValidator call.\n */\nBlockly.Field.prototype.doClassValidation_ = function(opt_newValue) {\n  if (opt_newValue === null || opt_newValue === undefined) {\n    return null;\n  }\n  // For backwards compatibility.\n  opt_newValue = this.classValidator(/** @type {string} */ (opt_newValue));\n  return opt_newValue;\n};\n\n/**\n * Used to update the value of a field. Can be overridden by subclasses to do\n * custom storage of values/updating of external things.\n * @param {*} newValue The value to be saved.\n * @protected\n */\nBlockly.Field.prototype.doValueUpdate_ = function(newValue) {\n  this.value_ = newValue;\n  this.isDirty_ = true;\n};\n\n/**\n * Used to notify the field an invalid value was input. Can be overridden by\n * subclasses, see FieldTextInput.\n * No-op by default.\n * @param {*} _invalidValue The input value that was determined to be invalid.\n * @protected\n */\nBlockly.Field.prototype.doValueInvalid_ = function(_invalidValue) {\n  // NOP\n};\n\n/**\n * Handle a mouse down event on a field.\n * @param {!Event} e Mouse down event.\n * @protected\n */\nBlockly.Field.prototype.onMouseDown_ = function(e) {\n  if (!this.sourceBlock_ || !this.sourceBlock_.workspace) {\n    return;\n  }\n  var gesture = this.sourceBlock_.workspace.getGesture(e);\n  if (gesture) {\n    gesture.setStartField(this);\n  }\n};\n\n/**\n * Sets the tooltip for this field.\n * @param {?Blockly.Tooltip.TipInfo} newTip The\n *     text for the tooltip, a function that returns the text for the tooltip, a\n *     parent object whose tooltip will be used, or null to display the tooltip\n *     of the parent block. To not display a tooltip pass the empty string.\n */\nBlockly.Field.prototype.setTooltip = function(newTip) {\n  if (!newTip && newTip !== '') {  // If null or undefined.\n    newTip = this.sourceBlock_;\n  }\n  var clickTarget = this.getClickTarget_();\n  if (clickTarget) {\n    clickTarget.tooltip = newTip;\n  } else {\n    // Field has not been initialized yet.\n    this.tooltip_ = newTip;\n  }\n};\n\n/**\n * Returns the tooltip text for this field.\n * @returns {string} The tooltip text for this field.\n */\nBlockly.Field.prototype.getTooltip = function() {\n  var clickTarget = this.getClickTarget_();\n  if (clickTarget) {\n    return Blockly.Tooltip.getTooltipOfObject(clickTarget);\n  }\n  // Field has not been initialized yet. Return stashed this.tooltip_ value.\n  return Blockly.Tooltip.getTooltipOfObject({tooltip: this.tooltip_});\n};\n\n/**\n * The element to bind the click handler to. If not set explicitly, defaults\n * to the SVG root of the field. When this element is\n * clicked on an editable field, the editor will open.\n * @return {!Element} Element to bind click handler to.\n * @protected\n */\nBlockly.Field.prototype.getClickTarget_ = function() {\n  return this.clickTarget_ || this.getSvgRoot();\n};\n\n/**\n * Return the absolute coordinates of the top-left corner of this field.\n * The origin (0,0) is the top-left corner of the page body.\n * @return {!Blockly.utils.Coordinate} Object with .x and .y properties.\n * @protected\n */\nBlockly.Field.prototype.getAbsoluteXY_ = function() {\n  return Blockly.utils.style.getPageOffset(\n      /** @type {!SVGRectElement} */ (this.getClickTarget_()));\n};\n\n/**\n * Whether this field references any Blockly variables.  If true it may need to\n * be handled differently during serialization and deserialization.  Subclasses\n * may override this.\n * @return {boolean} True if this field has any variable references.\n * @package\n */\nBlockly.Field.prototype.referencesVariables = function() {\n  return false;\n};\n\n/**\n * Search through the list of inputs and their fields in order to find the\n * parent input of a field.\n * @return {Blockly.Input} The input that the field belongs to.\n * @package\n */\nBlockly.Field.prototype.getParentInput = function() {\n  var parentInput = null;\n  var block = this.sourceBlock_;\n  var inputs = block.inputList;\n\n  for (var idx = 0; idx < block.inputList.length; idx++) {\n    var input = inputs[idx];\n    var fieldRows = input.fieldRow;\n    for (var j = 0; j < fieldRows.length; j++) {\n      if (fieldRows[j] === this) {\n        parentInput = input;\n        break;\n      }\n    }\n  }\n  return parentInput;\n};\n\n/**\n * Returns whether or not we should flip the field in RTL.\n * @return {boolean} True if we should flip in RTL.\n */\nBlockly.Field.prototype.getFlipRtl = function() {\n  return false;\n};\n\n/**\n * Returns whether or not the field is tab navigable.\n * @return {boolean} True if the field is tab navigable.\n */\nBlockly.Field.prototype.isTabNavigable = function() {\n  return false;\n};\n\n/**\n * Handles the given action.\n * This is only triggered when keyboard accessibility mode is enabled.\n * @param {!Blockly.Action} _action The action to be handled.\n * @return {boolean} True if the field handled the action, false otherwise.\n * @package\n */\nBlockly.Field.prototype.onBlocklyAction = function(_action) {\n  return false;\n};\n\n/**\n * Add the cursor svg to this fields svg group.\n * @param {SVGElement} cursorSvg The svg root of the cursor to be added to the\n *     field group.\n * @package\n */\nBlockly.Field.prototype.setCursorSvg = function(cursorSvg) {\n  if (!cursorSvg) {\n    this.cursorSvg_ = null;\n    return;\n  }\n\n  this.fieldGroup_.appendChild(cursorSvg);\n  this.cursorSvg_ = cursorSvg;\n};\n\n/**\n * Add the marker svg to this fields svg group.\n * @param {SVGElement} markerSvg The svg root of the marker to be added to the\n *     field group.\n * @package\n */\nBlockly.Field.prototype.setMarkerSvg = function(markerSvg) {\n  if (!markerSvg) {\n    this.markerSvg_ = null;\n    return;\n  }\n\n  this.fieldGroup_.appendChild(markerSvg);\n  this.markerSvg_ = markerSvg;\n};\n\n/**\n * Redraw any attached marker or cursor svgs if needed.\n * @protected\n */\nBlockly.Field.prototype.updateMarkers_ = function() {\n  var workspace =\n    /** @type {!Blockly.WorkspaceSvg} */ (this.sourceBlock_.workspace);\n  if (workspace.keyboardAccessibilityMode && this.cursorSvg_) {\n    workspace.getCursor().draw();\n  }\n  if (workspace.keyboardAccessibilityMode && this.markerSvg_) {\n    workspace.getMarker(Blockly.navigation.MARKER_NAME).draw();\n  }\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Non-editable, non-serializable text field.  Used for titles,\n *    labels, etc.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.FieldLabel');\n\ngoog.require('Blockly.Field');\ngoog.require('Blockly.fieldRegistry');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Size');\n\n\n/**\n * Class for a non-editable, non-serializable text field.\n * @param {string=} opt_value The initial value of the field. Should cast to a\n *    string. Defaults to an empty string if null or undefined.\n * @param {string=} opt_class Optional CSS class for the field's text.\n * @param {Object=} opt_config A map of options used to configure the field.\n *    See the [field creation documentation]{@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/label#creation}\n *    for a list of properties this parameter supports.\n * @extends {Blockly.Field}\n * @constructor\n */\nBlockly.FieldLabel = function(opt_value, opt_class, opt_config) {\n  /**\n   * The html class name to use for this field.\n   * @type {?string}\n   * @private\n   */\n  this.class_ = null;\n\n  Blockly.FieldLabel.superClass_.constructor.call(\n      this, opt_value, null, opt_config);\n\n  if (!opt_config) {  // If the config was not passed use old configuration.\n    this.class_ = opt_class || null;\n  }\n};\nBlockly.utils.object.inherits(Blockly.FieldLabel, Blockly.Field);\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nBlockly.FieldLabel.prototype.DEFAULT_VALUE = '';\n\n/**\n * Construct a FieldLabel from a JSON arg object,\n * dereferencing any string table references.\n * @param {!Object} options A JSON object with options (text, and class).\n * @return {!Blockly.FieldLabel} The new field instance.\n * @package\n * @nocollapse\n */\nBlockly.FieldLabel.fromJson = function(options) {\n  var text = Blockly.utils.replaceMessageReferences(options['text']);\n  return new Blockly.FieldLabel(text, undefined, options);\n};\n\n/**\n * Editable fields usually show some sort of UI indicating they are\n * editable. This field should not.\n * @type {boolean}\n */\nBlockly.FieldLabel.prototype.EDITABLE = false;\n\n/**\n * @override\n */\nBlockly.FieldLabel.prototype.configure_ = function(config) {\n  Blockly.FieldLabel.superClass_.configure_.call(this, config);\n  this.class_ = config['class'];\n};\n\n/**\n * Create block UI for this label.\n * @package\n */\nBlockly.FieldLabel.prototype.initView = function() {\n  this.createTextElement_();\n  if (this.class_) {\n    Blockly.utils.dom.addClass(\n        /** @type {!SVGTextElement} */ (this.textElement_), this.class_);\n  }\n};\n\n/**\n * Ensure that the input value casts to a valid string.\n * @param {*=} opt_newValue The input value.\n * @return {?string} A valid string, or null if invalid.\n * @protected\n */\nBlockly.FieldLabel.prototype.doClassValidation_ = function(opt_newValue) {\n  if (opt_newValue === null || opt_newValue === undefined) {\n    return null;\n  }\n  return String(opt_newValue);\n};\n\n/**\n * Set the css class applied to the field's textElement_.\n * @param {?string} cssClass The new css class name, or null to remove.\n */\nBlockly.FieldLabel.prototype.setClass = function(cssClass) {\n  if (this.textElement_) {\n    // This check isn't necessary, but it's faster than letting removeClass\n    // figure it out.\n    if (this.class_) {\n      Blockly.utils.dom.removeClass(this.textElement_, this.class_);\n    }\n    if (cssClass) {\n      Blockly.utils.dom.addClass(this.textElement_, cssClass);\n    }\n  }\n  this.class_ = cssClass;\n};\n\nBlockly.fieldRegistry.register('field_label', Blockly.FieldLabel);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing an input (value, statement, or dummy).\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Input');\n\ngoog.require('Blockly.Connection');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.FieldLabel');\n\n\n/**\n * Class for an input with an optional field.\n * @param {number} type The type of the input.\n * @param {string} name Language-neutral identifier which may used to find this\n *     input again.\n * @param {!Blockly.Block} block The block containing this input.\n * @param {Blockly.Connection} connection Optional connection for this input.\n * @constructor\n */\nBlockly.Input = function(type, name, block, connection) {\n  if (type != Blockly.DUMMY_INPUT && !name) {\n    throw Error('Value inputs and statement inputs must have non-empty name.');\n  }\n  /** @type {number} */\n  this.type = type;\n  /** @type {string} */\n  this.name = name;\n  /**\n   * @type {!Blockly.Block}\n   * @private\n   */\n  this.sourceBlock_ = block;\n  /** @type {Blockly.Connection} */\n  this.connection = connection;\n  /** @type {!Array.<!Blockly.Field>} */\n  this.fieldRow = [];\n};\n\n/**\n * Alignment of input's fields (left, right or centre).\n * @type {number}\n */\nBlockly.Input.prototype.align = Blockly.ALIGN_LEFT;\n\n/**\n * Is the input visible?\n * @type {boolean}\n * @private\n */\nBlockly.Input.prototype.visible_ = true;\n\n/**\n * Get the source block for this input.\n * @return {Blockly.Block} The source block, or null if there is none.\n */\nBlockly.Input.prototype.getSourceBlock = function() {\n  return this.sourceBlock_;\n};\n\n/**\n * Add a field (or label from string), and all prefix and suffix fields, to the\n * end of the input's field row.\n * @param {string|!Blockly.Field} field Something to add as a field.\n * @param {string=} opt_name Language-neutral identifier which may used to find\n *     this field again.  Should be unique to the host block.\n * @return {!Blockly.Input} The input being append to (to allow chaining).\n */\nBlockly.Input.prototype.appendField = function(field, opt_name) {\n  this.insertFieldAt(this.fieldRow.length, field, opt_name);\n  return this;\n};\n\n/**\n * Inserts a field (or label from string), and all prefix and suffix fields, at\n * the location of the input's field row.\n * @param {number} index The index at which to insert field.\n * @param {string|!Blockly.Field} field Something to add as a field.\n * @param {string=} opt_name Language-neutral identifier which may used to find\n *     this field again.  Should be unique to the host block.\n * @return {number} The index following the last inserted field.\n */\nBlockly.Input.prototype.insertFieldAt = function(index, field, opt_name) {\n  if (index < 0 || index > this.fieldRow.length) {\n    throw Error('index ' + index + ' out of bounds.');\n  }\n  // Falsy field values don't generate a field, unless the field is an empty\n  // string and named.\n  if (!field && !(field == '' && opt_name)) {\n    return index;\n  }\n\n  // Generate a FieldLabel when given a plain text field.\n  if (typeof field == 'string') {\n    field = new Blockly.FieldLabel(/** @type {string} */ (field));\n  }\n\n  field.setSourceBlock(this.sourceBlock_);\n  if (this.sourceBlock_.rendered) {\n    field.init();\n    field.applyColour();\n  }\n  field.name = opt_name;\n  field.setVisible(this.isVisible());\n\n  var fieldDropdown = /** @type {Blockly.FieldDropdown} */ (field);\n  if (fieldDropdown.prefixField) {\n    // Add any prefix.\n    index = this.insertFieldAt(index, fieldDropdown.prefixField);\n  }\n  // Add the field to the field row.\n  this.fieldRow.splice(index, 0, field);\n  ++index;\n  if (fieldDropdown.suffixField) {\n    // Add any suffix.\n    index = this.insertFieldAt(index, fieldDropdown.suffixField);\n  }\n\n  if (this.sourceBlock_.rendered) {\n    this.sourceBlock_ = /** @type {!Blockly.BlockSvg} */ (this.sourceBlock_);\n    this.sourceBlock_.render();\n    // Adding a field will cause the block to change shape.\n    this.sourceBlock_.bumpNeighbours();\n  }\n  return index;\n};\n\n/**\n * Remove a field from this input.\n * @param {string} name The name of the field.\n * @param {boolean=} opt_quiet True to prevent an error if field is not present.\n * @return {boolean} True if operation succeeds, false if field is not present\n *     and opt_quiet is true.\n * @throws {Error} if the field is not present and opt_quiet is false.\n */\nBlockly.Input.prototype.removeField = function(name, opt_quiet) {\n  for (var i = 0, field; (field = this.fieldRow[i]); i++) {\n    if (field.name === name) {\n      field.dispose();\n      this.fieldRow.splice(i, 1);\n      if (this.sourceBlock_.rendered) {\n        this.sourceBlock_ = /** @type {!Blockly.BlockSvg} */ (this.sourceBlock_);\n        this.sourceBlock_.render();\n        // Removing a field will cause the block to change shape.\n        this.sourceBlock_.bumpNeighbours();\n      }\n      return true;\n    }\n  }\n  if (opt_quiet) {\n    return false;\n  } else {\n    throw Error('Field \"' + name + '\" not found.');\n  }\n};\n\n/**\n * Gets whether this input is visible or not.\n * @return {boolean} True if visible.\n */\nBlockly.Input.prototype.isVisible = function() {\n  return this.visible_;\n};\n\n/**\n * Sets whether this input is visible or not.\n * Should only be used to collapse/uncollapse a block.\n * @param {boolean} visible True if visible.\n * @return {!Array.<!Blockly.BlockSvg>} List of blocks to render.\n * @package\n */\nBlockly.Input.prototype.setVisible = function(visible) {\n  // Note: Currently there are only unit tests for block.setCollapsed()\n  // because this function is package. If this function goes back to being a\n  // public API tests (lots of tests) should be added.\n  var renderList = [];\n  if (this.visible_ == visible) {\n    return renderList;\n  }\n  this.visible_ = visible;\n\n  for (var y = 0, field; (field = this.fieldRow[y]); y++) {\n    field.setVisible(visible);\n  }\n  if (this.connection) {\n    this.connection =\n      /** @type {!Blockly.RenderedConnection} */ (this.connection);\n    // Has a connection.\n    if (visible) {\n      renderList = this.connection.startTrackingAll();\n    } else {\n      this.connection.stopTrackingAll();\n    }\n    var child = this.connection.targetBlock();\n    if (child) {\n      child.getSvgRoot().style.display = visible ? 'block' : 'none';\n    }\n  }\n  return renderList;\n};\n\n/**\n * Mark all fields on this input as dirty.\n * @package\n */\nBlockly.Input.prototype.markDirty = function() {\n  for (var y = 0, field; (field = this.fieldRow[y]); y++) {\n    field.markDirty();\n  }\n};\n\n/**\n * Change a connection's compatibility.\n * @param {string|Array.<string>|null} check Compatible value type or\n *     list of value types.  Null if all types are compatible.\n * @return {!Blockly.Input} The input being modified (to allow chaining).\n */\nBlockly.Input.prototype.setCheck = function(check) {\n  if (!this.connection) {\n    throw Error('This input does not have a connection.');\n  }\n  this.connection.setCheck(check);\n  return this;\n};\n\n/**\n * Change the alignment of the connection's field(s).\n * @param {number} align One of Blockly.ALIGN_LEFT, ALIGN_CENTRE, ALIGN_RIGHT.\n *   In RTL mode directions are reversed, and ALIGN_RIGHT aligns to the left.\n * @return {!Blockly.Input} The input being modified (to allow chaining).\n */\nBlockly.Input.prototype.setAlign = function(align) {\n  this.align = align;\n  if (this.sourceBlock_.rendered) {\n    this.sourceBlock_ = /** @type {!Blockly.BlockSvg} */ (this.sourceBlock_);\n    this.sourceBlock_.render();\n  }\n  return this;\n};\n\n/**\n * Changes the connection's shadow block.\n * @param {Element} shadow DOM representation of a block or null.\n * @return {Blockly.Input} The input being modified (to allow chaining).\n */\nBlockly.Input.prototype.setShadowDom = function(shadow) {\n  if (!this.connection) {\n    throw Error('This input does not have a connection.');\n  }\n  this.connection.setShadowDom(shadow);\n  return this;\n};\n\n/**\n * Returns the xml representation of the connection's shadow block.\n * @return {Element} Shadow DOM representation of a block or null.\n */\nBlockly.Input.prototype.getShadowDom = function() {\n  if (!this.connection) {\n    throw Error('This input does not have a connection.');\n  }\n  return this.connection.getShadowDom();\n};\n\n/**\n * Initialize the fields on this input.\n */\nBlockly.Input.prototype.init = function() {\n  if (!this.sourceBlock_.workspace.rendered) {\n    return;  // Headless blocks don't need fields initialized.\n  }\n  for (var i = 0; i < this.fieldRow.length; i++) {\n    this.fieldRow[i].init();\n  }\n};\n\n/**\n * Sever all links to this input.\n * @suppress {checkTypes}\n */\nBlockly.Input.prototype.dispose = function() {\n  for (var i = 0, field; (field = this.fieldRow[i]); i++) {\n    field.dispose();\n  }\n  if (this.connection) {\n    this.connection.dispose();\n  }\n  this.sourceBlock_ = null;\n};\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing one block.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Block');\n\ngoog.require('Blockly.ASTNode');\ngoog.require('Blockly.Blocks');\ngoog.require('Blockly.Connection');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockChange');\ngoog.require('Blockly.Events.BlockCreate');\ngoog.require('Blockly.Events.BlockDelete');\ngoog.require('Blockly.Events.BlockMove');\ngoog.require('Blockly.Extensions');\ngoog.require('Blockly.fieldRegistry');\ngoog.require('Blockly.Input');\ngoog.require('Blockly.navigation');\ngoog.require('Blockly.Tooltip');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.deprecation');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.string');\ngoog.require('Blockly.Workspace');\n\ngoog.requireType('Blockly.IASTNodeLocation');\n\n\n/**\n * Class for one block.\n * Not normally called directly, workspace.newBlock() is preferred.\n * @param {!Blockly.Workspace} workspace The block's workspace.\n * @param {!string} prototypeName Name of the language object containing\n *     type-specific functions for this block.\n * @param {string=} opt_id Optional ID.  Use this ID if provided, otherwise\n *     create a new ID.\n * @constructor\n * @implements {Blockly.IASTNodeLocation}\n * @throws When the prototypeName is not valid or not allowed.\n */\nBlockly.Block = function(workspace, prototypeName, opt_id) {\n  if (Blockly.Generator &&\n      typeof Blockly.Generator.prototype[prototypeName] != 'undefined') {\n    // Occluding Generator class members is not allowed.\n    throw Error('Block prototypeName \"' + prototypeName +\n        '\" conflicts with Blockly.Generator members.');\n  }\n\n  /** @type {string} */\n  this.id = (opt_id && !workspace.getBlockById(opt_id)) ?\n      opt_id : Blockly.utils.genUid();\n  workspace.setBlockById(this.id, this);\n  /** @type {Blockly.Connection} */\n  this.outputConnection = null;\n  /** @type {Blockly.Connection} */\n  this.nextConnection = null;\n  /** @type {Blockly.Connection} */\n  this.previousConnection = null;\n  /** @type {!Array.<!Blockly.Input>} */\n  this.inputList = [];\n  /** @type {boolean|undefined} */\n  this.inputsInline = undefined;\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.disabled = false;\n  /** @type {!Blockly.Tooltip.TipInfo} */\n  this.tooltip = '';\n  /** @type {boolean} */\n  this.contextMenu = true;\n\n  /**\n   * @type {Blockly.Block}\n   * @protected\n   */\n  this.parentBlock_ = null;\n\n  /**\n   * @type {!Array.<!Blockly.Block>}\n   * @protected\n   */\n  this.childBlocks_ = [];\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.deletable_ = true;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.movable_ = true;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.editable_ = true;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.isShadow_ = false;\n\n  /**\n   * @type {boolean}\n   * @protected\n   */\n  this.collapsed_ = false;\n\n  /**\n   * @type {?number}\n   * @protected\n   */\n  this.outputShape_ = null;\n\n  /**\n   * A string representing the comment attached to this block.\n   * @type {string|Blockly.Comment}\n   * @deprecated August 2019. Use getCommentText instead.\n   */\n  this.comment = null;\n\n  /**\n   * A model of the comment attached to this block.\n   * @type {!Blockly.Block.CommentModel}\n   * @package\n   */\n  this.commentModel = {\n    text: null,\n    pinned: false,\n    size: new Blockly.utils.Size(160, 80)\n  };\n\n  /**\n   * The block's position in workspace units.  (0, 0) is at the workspace's\n   * origin; scale does not change this value.\n   * @type {!Blockly.utils.Coordinate}\n   * @private\n   */\n  this.xy_ = new Blockly.utils.Coordinate(0, 0);\n\n  /** @type {!Blockly.Workspace} */\n  this.workspace = workspace;\n  /** @type {boolean} */\n  this.isInFlyout = workspace.isFlyout;\n  /** @type {boolean} */\n  this.isInMutator = workspace.isMutator;\n\n  /** @type {boolean} */\n  this.RTL = workspace.RTL;\n\n  /**\n   * True if this block is an insertion marker.\n   * @type {boolean}\n   * @protected\n   */\n  this.isInsertionMarker_ = false;\n\n  /**\n   * Name of the type of hat.\n   * @type {string|undefined}\n   */\n  this.hat = undefined;\n\n  /** @type {?boolean} */\n  this.rendered = null;\n\n  /**\n   * A count of statement inputs on the block.\n   * @type {number}\n   * @package\n   */\n  this.statementInputCount = 0;\n\n  // Copy the type-specific functions and data from the prototype.\n  if (prototypeName) {\n    /** @type {string} */\n    this.type = prototypeName;\n    var prototype = Blockly.Blocks[prototypeName];\n    if (!prototype || typeof prototype != 'object') {\n      throw TypeError('Unknown block type: ' + prototypeName);\n    }\n    Blockly.utils.object.mixin(this, prototype);\n  }\n\n  workspace.addTopBlock(this);\n  workspace.addTypedBlock(this);\n\n  // All events fired should be part of the same group.\n  // Any events fired during init should not be undoable,\n  // so that block creation is atomic.\n  var existingGroup = Blockly.Events.getGroup();\n  if (!existingGroup) {\n    Blockly.Events.setGroup(true);\n  }\n  var initialUndoFlag = Blockly.Events.recordUndo;\n\n  try {\n    // Call an initialization function, if it exists.\n    if (typeof this.init == 'function') {\n      Blockly.Events.recordUndo = false;\n      this.init();\n      Blockly.Events.recordUndo = initialUndoFlag;\n    }\n\n    // Fire a create event.\n    if (Blockly.Events.isEnabled()) {\n      Blockly.Events.fire(new Blockly.Events.BlockCreate(this));\n    }\n\n  } finally {\n    if (!existingGroup) {\n      Blockly.Events.setGroup(false);\n    }\n    // In case init threw, recordUndo flag should still be reset.\n    Blockly.Events.recordUndo = initialUndoFlag;\n  }\n  \n  // Record initial inline state.\n  /** @type {boolean|undefined} */\n  this.inputsInlineDefault = this.inputsInline;\n\n  // Bind an onchange function, if it exists.\n  if (typeof this.onchange == 'function') {\n    this.setOnChange(this.onchange);\n  }\n};\n\n/**\n * @typedef {{\n *            text:?string,\n *            pinned:boolean,\n *            size:Blockly.utils.Size\n *          }}\n */\nBlockly.Block.CommentModel;\n\n/**\n * The language-neutral id given to the collapsed input.\n * @const {string}\n */\nBlockly.Block.COLLAPSED_INPUT_NAME = '_TEMP_COLLAPSED_INPUT';\n/**\n * The language-neutral id given to the collapsed field.\n * @const {string}\n */\nBlockly.Block.COLLAPSED_FIELD_NAME = '_TEMP_COLLAPSED_FIELD';\n\n/**\n * Optional text data that round-trips between blocks and XML.\n * Has no effect. May be used by 3rd parties for meta information.\n * @type {?string}\n */\nBlockly.Block.prototype.data = null;\n\n/**\n * Has this block been disposed of?\n * @type {boolean}\n * @package\n */\nBlockly.Block.prototype.disposed = false;\n\n/**\n * Colour of the block as HSV hue value (0-360)\n * This may be null if the block colour was not set via a hue number.\n * @type {?number}\n * @private\n */\nBlockly.Block.prototype.hue_ = null;\n\n/**\n * Colour of the block in '#RRGGBB' format.\n * @type {string}\n * @protected\n */\nBlockly.Block.prototype.colour_ = '#000000';\n\n/**\n * Name of the block style.\n * @type {?string}\n * @protected\n */\nBlockly.Block.prototype.styleName_ = null;\n\n/**\n * An optional method called during initialization.\n * @type {?function()}\n */\nBlockly.Block.prototype.init;\n\n/**\n * An optional callback method to use whenever the block's parent workspace\n * changes. This is usually only called from the constructor, the block type\n * initializer function, or an extension initializer function.\n * @type {?function(Blockly.Events.Abstract)}\n */\nBlockly.Block.prototype.onchange;\n\n/**\n * An optional serialization method for defining how to serialize the\n * mutation state. This must be coupled with defining `domToMutation`.\n * @type {?function(...):!Element}\n */\nBlockly.Block.prototype.mutationToDom;\n\n/**\n * An optional deserialization method for defining how to deserialize the\n * mutation state. This must be coupled with defining `mutationToDom`.\n * @type {?function(!Element)}\n */\nBlockly.Block.prototype.domToMutation;\n\n/**\n * An optional property for suppressing adding STATEMENT_PREFIX and\n * STATEMENT_SUFFIX to generated code.\n * @type {?boolean}\n */\nBlockly.Block.prototype.suppressPrefixSuffix;\n\n/**\n * An optional property for declaring developer variables.  Return a list of\n * variable names for use by generators.  Developer variables are never shown to\n * the user, but are declared as global variables in the generated code.\n * @type {?function():!Array.<string>}\n */\nBlockly.Block.prototype.getDeveloperVariables;\n\n/**\n * Dispose of this block.\n * @param {boolean} healStack If true, then try to heal any gap by connecting\n *     the next statement with the previous statement.  Otherwise, dispose of\n *     all children of this block.\n * @suppress {checkTypes}\n */\nBlockly.Block.prototype.dispose = function(healStack) {\n  if (!this.workspace) {\n    // Already deleted.\n    return;\n  }\n  // Terminate onchange event calls.\n  if (this.onchangeWrapper_) {\n    this.workspace.removeChangeListener(this.onchangeWrapper_);\n  }\n\n  this.unplug(healStack);\n  if (Blockly.Events.isEnabled()) {\n    Blockly.Events.fire(new Blockly.Events.BlockDelete(this));\n  }\n  Blockly.Events.disable();\n\n  try {\n    // This block is now at the top of the workspace.\n    // Remove this block from the workspace's list of top-most blocks.\n    if (this.workspace) {\n      this.workspace.removeTopBlock(this);\n      this.workspace.removeTypedBlock(this);\n      // Remove from block database.\n      this.workspace.removeBlockById(this.id);\n      this.workspace = null;\n    }\n\n    // Just deleting this block from the DOM would result in a memory leak as\n    // well as corruption of the connection database.  Therefore we must\n    // methodically step through the blocks and carefully disassemble them.\n\n    if (Blockly.selected == this) {\n      Blockly.selected = null;\n    }\n\n    // First, dispose of all my children.\n    for (var i = this.childBlocks_.length - 1; i >= 0; i--) {\n      this.childBlocks_[i].dispose(false);\n    }\n    // Then dispose of myself.\n    // Dispose of all inputs and their fields.\n    for (var i = 0, input; (input = this.inputList[i]); i++) {\n      input.dispose();\n    }\n    this.inputList.length = 0;\n    // Dispose of any remaining connections (next/previous/output).\n    var connections = this.getConnections_(true);\n    for (var i = 0, connection; (connection = connections[i]); i++) {\n      connection.dispose();\n    }\n  } finally {\n    Blockly.Events.enable();\n    this.disposed = true;\n  }\n};\n\n/**\n * Call initModel on all fields on the block.\n * May be called more than once.\n * Either initModel or initSvg must be called after creating a block and before\n * the first interaction with it.  Interactions include UI actions\n * (e.g. clicking and dragging) and firing events (e.g. create, delete, and\n * change).\n * @public\n */\nBlockly.Block.prototype.initModel = function() {\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    for (var j = 0, field; (field = input.fieldRow[j]); j++) {\n      if (field.initModel) {\n        field.initModel();\n      }\n    }\n  }\n};\n\n/**\n * Unplug this block from its superior block.  If this block is a statement,\n * optionally reconnect the block underneath with the block on top.\n * @param {boolean=} opt_healStack Disconnect child statement and reconnect\n *   stack.  Defaults to false.\n */\nBlockly.Block.prototype.unplug = function(opt_healStack) {\n  if (this.outputConnection) {\n    this.unplugFromRow_(opt_healStack);\n  } else if (this.previousConnection) {\n    this.unplugFromStack_(opt_healStack);\n  }\n};\n\n/**\n * Unplug this block's output from an input on another block.  Optionally\n * reconnect the block's parent to the only child block, if possible.\n * @param {boolean=} opt_healStack Disconnect right-side block and connect to\n *     left-side block.  Defaults to false.\n * @private\n */\nBlockly.Block.prototype.unplugFromRow_ = function(opt_healStack) {\n  var parentConnection = null;\n  if (this.outputConnection.isConnected()) {\n    parentConnection = this.outputConnection.targetConnection;\n    // Disconnect from any superior block.\n    this.outputConnection.disconnect();\n  }\n\n  // Return early in obvious cases.\n  if (!parentConnection || !opt_healStack) {\n    return;\n  }\n\n  var thisConnection = this.getOnlyValueConnection_();\n  if (!thisConnection ||\n      !thisConnection.isConnected() ||\n      thisConnection.targetBlock().isShadow()) {\n    // Too many or too few possible connections on this block, or there's\n    // nothing on the other side of this connection.\n    return;\n  }\n\n  var childConnection = thisConnection.targetConnection;\n  // Disconnect the child block.\n  childConnection.disconnect();\n  // Connect child to the parent if possible, otherwise bump away.\n  if (this.workspace.connectionChecker.canConnect(\n      childConnection, parentConnection, false)) {\n    parentConnection.connect(childConnection);\n  } else {\n    childConnection.onFailedConnect(parentConnection);\n  }\n};\n\n/**\n * Returns the connection on the value input that is connected to another block.\n * When an insertion marker is connected to a connection with a block already\n * attached, the connected block is attached to the insertion marker.\n * Since only one block can be displaced and attached to the insertion marker\n * this should only ever return one connection.\n *\n * @return {Blockly.Connection} The connection on the value input, or null.\n * @private\n */\nBlockly.Block.prototype.getOnlyValueConnection_ = function() {\n  var connection = null;\n  for (var i = 0; i < this.inputList.length; i++) {\n    var thisConnection = this.inputList[i].connection;\n    if (thisConnection && thisConnection.type == Blockly.INPUT_VALUE &&\n        thisConnection.targetConnection) {\n      if (connection) {\n        return null; // More than one value input found.\n      }\n      connection = thisConnection;\n    }\n  }\n  return connection;\n};\n\n/**\n * Unplug this statement block from its superior block.  Optionally reconnect\n * the block underneath with the block on top.\n * @param {boolean=} opt_healStack Disconnect child statement and reconnect\n *   stack.  Defaults to false.\n * @private\n */\nBlockly.Block.prototype.unplugFromStack_ = function(opt_healStack) {\n  var previousTarget = null;\n  if (this.previousConnection.isConnected()) {\n    // Remember the connection that any next statements need to connect to.\n    previousTarget = this.previousConnection.targetConnection;\n    // Detach this block from the parent's tree.\n    this.previousConnection.disconnect();\n  }\n  var nextBlock = this.getNextBlock();\n  if (opt_healStack && nextBlock && !nextBlock.isShadow()) {\n    // Disconnect the next statement.\n    var nextTarget = this.nextConnection.targetConnection;\n    nextTarget.disconnect();\n    if (previousTarget &&\n        this.workspace.connectionChecker.canConnect(\n            previousTarget, nextTarget, false)) {\n      // Attach the next statement to the previous statement.\n      previousTarget.connect(nextTarget);\n    }\n  }\n};\n\n/**\n * Returns all connections originating from this block.\n * @param {boolean} _all If true, return all connections even hidden ones.\n * @return {!Array.<!Blockly.Connection>} Array of connections.\n * @package\n */\nBlockly.Block.prototype.getConnections_ = function(_all) {\n  var myConnections = [];\n  if (this.outputConnection) {\n    myConnections.push(this.outputConnection);\n  }\n  if (this.previousConnection) {\n    myConnections.push(this.previousConnection);\n  }\n  if (this.nextConnection) {\n    myConnections.push(this.nextConnection);\n  }\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    if (input.connection) {\n      myConnections.push(input.connection);\n    }\n  }\n  return myConnections;\n};\n\n/**\n * Walks down a stack of blocks and finds the last next connection on the stack.\n * @return {Blockly.Connection} The last next connection on the stack, or null.\n * @package\n */\nBlockly.Block.prototype.lastConnectionInStack = function() {\n  var nextConnection = this.nextConnection;\n  while (nextConnection) {\n    var nextBlock = nextConnection.targetBlock();\n    if (!nextBlock) {\n      // Found a next connection with nothing on the other side.\n      return nextConnection;\n    }\n    nextConnection = nextBlock.nextConnection;\n  }\n  // Ran out of next connections.\n  return null;\n};\n\n/**\n * Bump unconnected blocks out of alignment.  Two blocks which aren't actually\n * connected should not coincidentally line up on screen.\n */\nBlockly.Block.prototype.bumpNeighbours = function() {\n  console.warn('Not expected to reach Block.bumpNeighbours function. ' +\n      'BlockSvg.bumpNeighbours was expected to be called instead.');\n};\n\n/**\n * Return the parent block or null if this block is at the top level. The parent\n * block is either the block connected to the previous connection (for a statement\n * block) or the block connected to the output connection (for a value block).\n * @return {Blockly.Block} The block that holds the current block.\n */\nBlockly.Block.prototype.getParent = function() {\n  // Look at the DOM to see if we are nested in another block.\n  return this.parentBlock_;\n};\n\n/**\n * Return the input that connects to the specified block.\n * @param {!Blockly.Block} block A block connected to an input on this block.\n * @return {Blockly.Input} The input that connects to the specified block.\n */\nBlockly.Block.prototype.getInputWithBlock = function(block) {\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    if (input.connection && input.connection.targetBlock() == block) {\n      return input;\n    }\n  }\n  return null;\n};\n\n/**\n * Return the parent block that surrounds the current block, or null if this\n * block has no surrounding block.  A parent block might just be the previous\n * statement, whereas the surrounding block is an if statement, while loop, etc.\n * @return {Blockly.Block} The block that surrounds the current block.\n */\nBlockly.Block.prototype.getSurroundParent = function() {\n  var block = this;\n  do {\n    var prevBlock = block;\n    block = block.getParent();\n    if (!block) {\n      // Ran off the top.\n      return null;\n    }\n  } while (block.getNextBlock() == prevBlock);\n  // This block is an enclosing parent, not just a statement in a stack.\n  return block;\n};\n\n/**\n * Return the next statement block directly connected to this block.\n * @return {Blockly.Block} The next statement block or null.\n */\nBlockly.Block.prototype.getNextBlock = function() {\n  return this.nextConnection && this.nextConnection.targetBlock();\n};\n\n/**\n * Returns the block connected to the previous connection.\n * @return {Blockly.Block} The previous statement block or null.\n */\nBlockly.Block.prototype.getPreviousBlock = function() {\n  return this.previousConnection && this.previousConnection.targetBlock();\n};\n\n/**\n * Return the connection on the first statement input on this block, or null if\n * there are none.\n * @return {Blockly.Connection} The first statement connection or null.\n * @package\n */\nBlockly.Block.prototype.getFirstStatementConnection = function() {\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    if (input.connection && input.connection.type == Blockly.NEXT_STATEMENT) {\n      return input.connection;\n    }\n  }\n  return null;\n};\n\n/**\n * Return the top-most block in this block's tree.\n * This will return itself if this block is at the top level.\n * @return {!Blockly.Block} The root block.\n */\nBlockly.Block.prototype.getRootBlock = function() {\n  var rootBlock;\n  var block = this;\n  do {\n    rootBlock = block;\n    block = rootBlock.parentBlock_;\n  } while (block);\n  return rootBlock;\n};\n\n/**\n * Walk up from the given block up through the stack of blocks to find\n * the top block of the sub stack. If we are nested in a statement input only\n * find the top-most nested block. Do not go all the way to the root block.\n * @return {!Blockly.Block} The top block in a stack.\n * @package\n */\nBlockly.Block.prototype.getTopStackBlock = function() {\n  var block = this;\n  do {\n    var previous = block.getPreviousBlock();\n  } while (previous && previous.getNextBlock() == block && (block = previous));\n  return block;\n};\n\n/**\n * Find all the blocks that are directly nested inside this one.\n * Includes value and statement inputs, as well as any following statement.\n * Excludes any connection on an output tab or any preceding statement.\n * Blocks are optionally sorted by position; top to bottom.\n * @param {boolean} ordered Sort the list if true.\n * @return {!Array.<!Blockly.Block>} Array of blocks.\n */\nBlockly.Block.prototype.getChildren = function(ordered) {\n  if (!ordered) {\n    return this.childBlocks_;\n  }\n  var blocks = [];\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    if (input.connection) {\n      var child = input.connection.targetBlock();\n      if (child) {\n        blocks.push(child);\n      }\n    }\n  }\n  var next = this.getNextBlock();\n  if (next) {\n    blocks.push(next);\n  }\n  return blocks;\n};\n\n/**\n * Set parent of this block to be a new block or null.\n * @param {Blockly.Block} newParent New parent block.\n */\nBlockly.Block.prototype.setParent = function(newParent) {\n  if (newParent == this.parentBlock_) {\n    return;\n  }\n  if (this.parentBlock_) {\n    // Remove this block from the old parent's child list.\n    Blockly.utils.arrayRemove(this.parentBlock_.childBlocks_, this);\n\n    // Disconnect from superior blocks.\n    if (this.previousConnection && this.previousConnection.isConnected()) {\n      throw Error('Still connected to previous block.');\n    }\n    if (this.outputConnection && this.outputConnection.isConnected()) {\n      throw Error('Still connected to parent block.');\n    }\n    this.parentBlock_ = null;\n    // This block hasn't actually moved on-screen, so there's no need to update\n    // its connection locations.\n  } else {\n    // Remove this block from the workspace's list of top-most blocks.\n    this.workspace.removeTopBlock(this);\n  }\n\n  this.parentBlock_ = newParent;\n  if (newParent) {\n    // Add this block to the new parent's child list.\n    newParent.childBlocks_.push(this);\n  } else {\n    this.workspace.addTopBlock(this);\n  }\n};\n\n/**\n * Find all the blocks that are directly or indirectly nested inside this one.\n * Includes this block in the list.\n * Includes value and statement inputs, as well as any following statements.\n * Excludes any connection on an output tab or any preceding statements.\n * Blocks are optionally sorted by position; top to bottom.\n * @param {boolean} ordered Sort the list if true.\n * @return {!Array.<!Blockly.Block>} Flattened array of blocks.\n */\nBlockly.Block.prototype.getDescendants = function(ordered) {\n  var blocks = [this];\n  var childBlocks = this.getChildren(ordered);\n  for (var child, i = 0; (child = childBlocks[i]); i++) {\n    blocks.push.apply(blocks, child.getDescendants(ordered));\n  }\n  return blocks;\n};\n\n/**\n * Get whether this block is deletable or not.\n * @return {boolean} True if deletable.\n */\nBlockly.Block.prototype.isDeletable = function() {\n  return this.deletable_ && !this.isShadow_ &&\n      !(this.workspace && this.workspace.options.readOnly);\n};\n\n/**\n * Set whether this block is deletable or not.\n * @param {boolean} deletable True if deletable.\n */\nBlockly.Block.prototype.setDeletable = function(deletable) {\n  this.deletable_ = deletable;\n};\n\n/**\n * Get whether this block is movable or not.\n * @return {boolean} True if movable.\n */\nBlockly.Block.prototype.isMovable = function() {\n  return this.movable_ && !this.isShadow_ &&\n      !(this.workspace && this.workspace.options.readOnly);\n};\n\n/**\n * Set whether this block is movable or not.\n * @param {boolean} movable True if movable.\n */\nBlockly.Block.prototype.setMovable = function(movable) {\n  this.movable_ = movable;\n};\n\n/**\n * Get whether is block is duplicatable or not. If duplicating this block and\n * descendants will put this block over the workspace's capacity this block is\n * not duplicatable. If duplicating this block and descendants will put any\n * type over their maxInstances this block is not duplicatable.\n * @return {boolean} True if duplicatable.\n */\nBlockly.Block.prototype.isDuplicatable = function() {\n  if (!this.workspace.hasBlockLimits()) {\n    return true;\n  }\n  return this.workspace.isCapacityAvailable(\n      Blockly.utils.getBlockTypeCounts(this, true));\n};\n\n/**\n * Get whether this block is a shadow block or not.\n * @return {boolean} True if a shadow.\n */\nBlockly.Block.prototype.isShadow = function() {\n  return this.isShadow_;\n};\n\n/**\n * Set whether this block is a shadow block or not.\n * @param {boolean} shadow True if a shadow.\n */\nBlockly.Block.prototype.setShadow = function(shadow) {\n  this.isShadow_ = shadow;\n};\n\n/**\n * Get whether this block is an insertion marker block or not.\n * @return {boolean} True if an insertion marker.\n * @package\n */\nBlockly.Block.prototype.isInsertionMarker = function() {\n  return this.isInsertionMarker_;\n};\n\n/**\n * Set whether this block is an insertion marker block or not.\n * Once set this cannot be unset.\n * @param {boolean} insertionMarker True if an insertion marker.\n * @package\n */\nBlockly.Block.prototype.setInsertionMarker = function(insertionMarker) {\n  this.isInsertionMarker_ = insertionMarker;\n};\n\n/**\n * Get whether this block is editable or not.\n * @return {boolean} True if editable.\n */\nBlockly.Block.prototype.isEditable = function() {\n  return this.editable_ && !(this.workspace && this.workspace.options.readOnly);\n};\n\n/**\n * Set whether this block is editable or not.\n * @param {boolean} editable True if editable.\n */\nBlockly.Block.prototype.setEditable = function(editable) {\n  this.editable_ = editable;\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    for (var j = 0, field; (field = input.fieldRow[j]); j++) {\n      field.updateEditable();\n    }\n  }\n};\n\n/**\n * Returns if this block has been disposed of / deleted.\n * @return {boolean} True if this block has been disposed of / deleted.\n */\nBlockly.Block.prototype.isDisposed = function() {\n  return this.disposed;\n};\n\n/**\n * Find the connection on this block that corresponds to the given connection\n * on the other block.\n * Used to match connections between a block and its insertion marker.\n * @param {!Blockly.Block} otherBlock The other block to match against.\n * @param {!Blockly.Connection} conn The other connection to match.\n * @return {Blockly.Connection} The matching connection on this block, or null.\n * @package\n */\nBlockly.Block.prototype.getMatchingConnection = function(otherBlock, conn) {\n  var connections = this.getConnections_(true);\n  var otherConnections = otherBlock.getConnections_(true);\n  if (connections.length != otherConnections.length) {\n    throw Error(\"Connection lists did not match in length.\");\n  }\n  for (var i = 0; i < otherConnections.length; i++) {\n    if (otherConnections[i] == conn) {\n      return connections[i];\n    }\n  }\n  return null;\n};\n\n/**\n * Set the URL of this block's help page.\n * @param {string|Function} url URL string for block help, or function that\n *     returns a URL.  Null for no help.\n */\nBlockly.Block.prototype.setHelpUrl = function(url) {\n  this.helpUrl = url;\n};\n\n/**\n * Sets the tooltip for this block.\n * @param {!Blockly.Tooltip.TipInfo} newTip The text for the tooltip, a function\n *     that returns the text for the tooltip, or a parent object whose tooltip\n *     will be used. To not display a tooltip pass the empty string.\n */\nBlockly.Block.prototype.setTooltip = function(newTip) {\n  this.tooltip = newTip;\n};\n\n/**\n * Returns the tooltip text for this block.\n * @returns {!string} The tooltip text for this block.\n */\nBlockly.Block.prototype.getTooltip = function() {\n  return Blockly.Tooltip.getTooltipOfObject(this);\n};\n\n/**\n * Get the colour of a block.\n * @return {string} #RRGGBB string.\n */\nBlockly.Block.prototype.getColour = function() {\n  return this.colour_;\n};\n\n/**\n * Get the name of the block style.\n * @return {?string} Name of the block style.\n */\nBlockly.Block.prototype.getStyleName = function() {\n  return this.styleName_;\n};\n\n/**\n * Get the HSV hue value of a block.  Null if hue not set.\n * @return {?number} Hue value (0-360).\n */\nBlockly.Block.prototype.getHue = function() {\n  return this.hue_;\n};\n\n/**\n * Change the colour of a block.\n * @param {number|string} colour HSV hue value (0 to 360), #RRGGBB string,\n *     or a message reference string pointing to one of those two values.\n */\nBlockly.Block.prototype.setColour = function(colour) {\n  var parsed = Blockly.utils.parseBlockColour(colour);\n  this.hue_ = parsed.hue;\n  this.colour_ = parsed.hex;\n};\n\n/**\n * Set the style and colour values of a block.\n * @param {string} blockStyleName Name of the block style\n */\nBlockly.Block.prototype.setStyle = function(blockStyleName) {\n  this.styleName_ = blockStyleName;\n};\n\n/**\n * Sets a callback function to use whenever the block's parent workspace\n * changes, replacing any prior onchange handler. This is usually only called\n * from the constructor, the block type initializer function, or an extension\n * initializer function.\n * @param {function(Blockly.Events.Abstract)} onchangeFn The callback to call\n *     when the block's workspace changes.\n * @throws {Error} if onchangeFn is not falsey and not a function.\n */\nBlockly.Block.prototype.setOnChange = function(onchangeFn) {\n  if (onchangeFn && typeof onchangeFn != 'function') {\n    throw Error('onchange must be a function.');\n  }\n  if (this.onchangeWrapper_) {\n    this.workspace.removeChangeListener(this.onchangeWrapper_);\n  }\n  this.onchange = onchangeFn;\n  if (this.onchange) {\n    this.onchangeWrapper_ = onchangeFn.bind(this);\n    this.workspace.addChangeListener(this.onchangeWrapper_);\n  }\n};\n\n/**\n * Returns the named field from a block.\n * @param {string} name The name of the field.\n * @return {Blockly.Field} Named field, or null if field does not exist.\n */\nBlockly.Block.prototype.getField = function(name) {\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    for (var j = 0, field; (field = input.fieldRow[j]); j++) {\n      if (field.name == name) {\n        return field;\n      }\n    }\n  }\n  return null;\n};\n\n/**\n * Return all variables referenced by this block.\n * @return {!Array.<string>} List of variable names.\n */\nBlockly.Block.prototype.getVars = function() {\n  var vars = [];\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    for (var j = 0, field; (field = input.fieldRow[j]); j++) {\n      if (field.referencesVariables()) {\n        vars.push(field.getValue());\n      }\n    }\n  }\n  return vars;\n};\n\n/**\n * Return all variables referenced by this block.\n * @return {!Array.<!Blockly.VariableModel>} List of variable models.\n * @package\n */\nBlockly.Block.prototype.getVarModels = function() {\n  var vars = [];\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    for (var j = 0, field; (field = input.fieldRow[j]); j++) {\n      if (field.referencesVariables()) {\n        var model = this.workspace.getVariableById(\n            /** @type {string} */ (field.getValue()));\n        // Check if the variable actually exists (and isn't just a potential\n        // variable).\n        if (model) {\n          vars.push(model);\n        }\n      }\n    }\n  }\n  return vars;\n};\n\n/**\n * Notification that a variable is renaming but keeping the same ID.  If the\n * variable is in use on this block, rerender to show the new name.\n * @param {!Blockly.VariableModel} variable The variable being renamed.\n * @package\n */\nBlockly.Block.prototype.updateVarName = function(variable) {\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    for (var j = 0, field; (field = input.fieldRow[j]); j++) {\n      if (field.referencesVariables() &&\n          variable.getId() == field.getValue()) {\n        field.refreshVariableName();\n      }\n    }\n  }\n};\n\n/**\n * Notification that a variable is renaming.\n * If the ID matches one of this block's variables, rename it.\n * @param {string} oldId ID of variable to rename.\n * @param {string} newId ID of new variable.  May be the same as oldId, but with\n *     an updated name.\n */\nBlockly.Block.prototype.renameVarById = function(oldId, newId) {\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    for (var j = 0, field; (field = input.fieldRow[j]); j++) {\n      if (field.referencesVariables() &&\n          oldId == field.getValue()) {\n        field.setValue(newId);\n      }\n    }\n  }\n};\n\n/**\n * Returns the language-neutral value of the given field.\n * @param {string} name The name of the field.\n * @return {*} Value of the field or null if field does not exist.\n */\nBlockly.Block.prototype.getFieldValue = function(name) {\n  var field = this.getField(name);\n  if (field) {\n    return field.getValue();\n  }\n  return null;\n};\n\n/**\n * Sets the value of the given field for this block.\n * @param {*} newValue The value to set.\n * @param {!string} name The name of the field to set the value of.\n */\nBlockly.Block.prototype.setFieldValue = function(newValue, name) {\n  var field = this.getField(name);\n  if (!field) {\n    throw Error('Field \"' + name + '\" not found.');\n  }\n  field.setValue(newValue);\n};\n\n/**\n * Set whether this block can chain onto the bottom of another block.\n * @param {boolean} newBoolean True if there can be a previous statement.\n * @param {(string|Array.<string>|null)=} opt_check Statement type or\n *     list of statement types.  Null/undefined if any type could be connected.\n */\nBlockly.Block.prototype.setPreviousStatement = function(newBoolean, opt_check) {\n  if (newBoolean) {\n    if (opt_check === undefined) {\n      opt_check = null;\n    }\n    if (!this.previousConnection) {\n      if (this.outputConnection) {\n        throw Error('Remove output connection prior to adding previous ' +\n            'connection.');\n      }\n      this.previousConnection =\n          this.makeConnection_(Blockly.PREVIOUS_STATEMENT);\n    }\n    this.previousConnection.setCheck(opt_check);\n  } else {\n    if (this.previousConnection) {\n      if (this.previousConnection.isConnected()) {\n        throw Error('Must disconnect previous statement before removing ' +\n            'connection.');\n      }\n      this.previousConnection.dispose();\n      this.previousConnection = null;\n    }\n  }\n};\n\n/**\n * Set whether another block can chain onto the bottom of this block.\n * @param {boolean} newBoolean True if there can be a next statement.\n * @param {(string|Array.<string>|null)=} opt_check Statement type or\n *     list of statement types.  Null/undefined if any type could be connected.\n */\nBlockly.Block.prototype.setNextStatement = function(newBoolean, opt_check) {\n  if (newBoolean) {\n    if (opt_check === undefined) {\n      opt_check = null;\n    }\n    if (!this.nextConnection) {\n      this.nextConnection = this.makeConnection_(Blockly.NEXT_STATEMENT);\n    }\n    this.nextConnection.setCheck(opt_check);\n  } else {\n    if (this.nextConnection) {\n      if (this.nextConnection.isConnected()) {\n        throw Error('Must disconnect next statement before removing ' +\n            'connection.');\n      }\n      this.nextConnection.dispose();\n      this.nextConnection = null;\n    }\n  }\n};\n\n/**\n * Set whether this block returns a value.\n * @param {boolean} newBoolean True if there is an output.\n * @param {(string|Array.<string>|null)=} opt_check Returned type or list\n *     of returned types.  Null or undefined if any type could be returned\n *     (e.g. variable get).\n */\nBlockly.Block.prototype.setOutput = function(newBoolean, opt_check) {\n  if (newBoolean) {\n    if (opt_check === undefined) {\n      opt_check = null;\n    }\n    if (!this.outputConnection) {\n      if (this.previousConnection) {\n        throw Error('Remove previous connection prior to adding output ' +\n            'connection.');\n      }\n      this.outputConnection = this.makeConnection_(Blockly.OUTPUT_VALUE);\n    }\n    this.outputConnection.setCheck(opt_check);\n  } else {\n    if (this.outputConnection) {\n      if (this.outputConnection.isConnected()) {\n        throw Error('Must disconnect output value before removing connection.');\n      }\n      this.outputConnection.dispose();\n      this.outputConnection = null;\n    }\n  }\n};\n\n/**\n * Set whether value inputs are arranged horizontally or vertically.\n * @param {boolean} newBoolean True if inputs are horizontal.\n */\nBlockly.Block.prototype.setInputsInline = function(newBoolean) {\n  if (this.inputsInline != newBoolean) {\n    Blockly.Events.fire(new Blockly.Events.BlockChange(\n        this, 'inline', null, this.inputsInline, newBoolean));\n    this.inputsInline = newBoolean;\n  }\n};\n\n/**\n * Get whether value inputs are arranged horizontally or vertically.\n * @return {boolean} True if inputs are horizontal.\n */\nBlockly.Block.prototype.getInputsInline = function() {\n  if (this.inputsInline != undefined) {\n    // Set explicitly.\n    return this.inputsInline;\n  }\n  // Not defined explicitly.  Figure out what would look best.\n  for (var i = 1; i < this.inputList.length; i++) {\n    if (this.inputList[i - 1].type == Blockly.DUMMY_INPUT &&\n        this.inputList[i].type == Blockly.DUMMY_INPUT) {\n      // Two dummy inputs in a row.  Don't inline them.\n      return false;\n    }\n  }\n  for (var i = 1; i < this.inputList.length; i++) {\n    if (this.inputList[i - 1].type == Blockly.INPUT_VALUE &&\n        this.inputList[i].type == Blockly.DUMMY_INPUT) {\n      // Dummy input after a value input.  Inline them.\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * Set the block's output shape.\n * @param {?number} outputShape Value representing an output shape.\n */\nBlockly.Block.prototype.setOutputShape = function(outputShape) {\n  this.outputShape_ = outputShape;\n};\n\n/**\n * Get the block's output shape.\n * @return {?number} Value representing output shape if one exists.\n */\nBlockly.Block.prototype.getOutputShape = function() {\n  return this.outputShape_;\n};\n\n/**\n * Set whether the block is disabled or not.\n * @param {boolean} disabled True if disabled.\n * @deprecated May 2019\n */\nBlockly.Block.prototype.setDisabled = function(disabled) {\n  Blockly.utils.deprecation.warn(\n      'Block.prototype.setDisabled',\n      'May 2019',\n      'May 2020',\n      'Block.prototype.setEnabled');\n  this.setEnabled(!disabled);\n};\n\n/**\n * Get whether this block is enabled or not.\n * @return {boolean} True if enabled.\n */\nBlockly.Block.prototype.isEnabled = function() {\n  return !this.disabled;\n};\n\n/**\n * Set whether the block is enabled or not.\n * @param {boolean} enabled True if enabled.\n */\nBlockly.Block.prototype.setEnabled = function(enabled) {\n  if (this.isEnabled() != enabled) {\n    Blockly.Events.fire(new Blockly.Events.BlockChange(\n        this, 'disabled', null, this.disabled, !enabled));\n    this.disabled = !enabled;\n  }\n};\n\n/**\n * Get whether the block is disabled or not due to parents.\n * The block's own disabled property is not considered.\n * @return {boolean} True if disabled.\n */\nBlockly.Block.prototype.getInheritedDisabled = function() {\n  var ancestor = this.getSurroundParent();\n  while (ancestor) {\n    if (ancestor.disabled) {\n      return true;\n    }\n    ancestor = ancestor.getSurroundParent();\n  }\n  // Ran off the top.\n  return false;\n};\n\n/**\n * Get whether the block is collapsed or not.\n * @return {boolean} True if collapsed.\n */\nBlockly.Block.prototype.isCollapsed = function() {\n  return this.collapsed_;\n};\n\n/**\n * Set whether the block is collapsed or not.\n * @param {boolean} collapsed True if collapsed.\n */\nBlockly.Block.prototype.setCollapsed = function(collapsed) {\n  if (this.collapsed_ != collapsed) {\n    Blockly.Events.fire(new Blockly.Events.BlockChange(\n        this, 'collapsed', null, this.collapsed_, collapsed));\n    this.collapsed_ = collapsed;\n  }\n};\n\n/**\n * Create a human-readable text representation of this block and any children.\n * @param {number=} opt_maxLength Truncate the string to this length.\n * @param {string=} opt_emptyToken The placeholder string used to denote an\n *     empty field. If not specified, '?' is used.\n * @return {string} Text of block.\n */\nBlockly.Block.prototype.toString = function(opt_maxLength, opt_emptyToken) {\n  var text = [];\n  var emptyFieldPlaceholder = opt_emptyToken || '?';\n\n  // Temporarily set flag to navigate to all fields.\n  var prevNavigateFields = Blockly.ASTNode.NAVIGATE_ALL_FIELDS;\n  Blockly.ASTNode.NAVIGATE_ALL_FIELDS = true;\n\n  var node = Blockly.ASTNode.createBlockNode(this);\n  var rootNode = node;\n\n  /**\n   * Whether or not to add parentheses around an input.\n   * @param {!Blockly.Connection} connection The connection.\n   * @return {boolean} True if we should add parentheses around the input.\n   */\n  function shouldAddParentheses(connection) {\n    var checks = connection.getCheck();\n    if (!checks && connection.targetConnection) {\n      checks = connection.targetConnection.getCheck();\n    }\n    return !!checks && (checks.indexOf('Boolean') != -1 ||\n        checks.indexOf('Number') != -1);\n  }\n\n  /**\n   * Check that we haven't circled back to the original root node.\n   */\n  function checkRoot() {\n    if (node && node.getType() == rootNode.getType() &&\n        node.getLocation() == rootNode.getLocation()) {\n      node = null;\n    }\n  }\n\n  // Traverse the AST building up our text string.\n  while (node) {\n    switch (node.getType()) {\n      case Blockly.ASTNode.types.INPUT:\n        var connection = /** @type {!Blockly.Connection} */ (node.getLocation());\n        if (!node.in()) {\n          text.push(emptyFieldPlaceholder);\n        } else if (shouldAddParentheses(connection)) {\n          text.push('(');\n        }\n        break;\n      case Blockly.ASTNode.types.FIELD:\n        var field = /** @type {Blockly.Field} */ (node.getLocation());\n        if (field.name != Blockly.Block.COLLAPSED_FIELD_NAME) {\n          text.push(field.getText());\n        }\n        break;\n    }\n\n    var current = node;\n    node = current.in() || current.next();\n    if (!node) {\n      // Can't go in or next, keep going out until we can go next.\n      node = current.out();\n      checkRoot();\n      while (node && !node.next()) {\n        node = node.out();\n        checkRoot();\n        // If we hit an input on the way up, possibly close out parentheses.\n        if (node && node.getType() == Blockly.ASTNode.types.INPUT &&\n            shouldAddParentheses(\n                /** @type {!Blockly.Connection} */ (node.getLocation()))) {\n          text.push(')');\n        }\n      }\n      if (node) {\n        node = node.next();\n      }\n    }\n  }\n\n  // Restore state of NAVIGATE_ALL_FIELDS.\n  Blockly.ASTNode.NAVIGATE_ALL_FIELDS = prevNavigateFields;\n\n  // Run through our text array and simplify expression to remove parentheses\n  // around single field blocks.\n  for (var i = 2, l = text.length; i < l; i++) {\n    if (text[i - 2] == '(' && text[i] == ')') {\n      text[i - 2] = text[i - 1];\n      text.splice(i - 1, 2);\n      l -= 2;\n    }\n  }\n\n  // Join the text array, removing spaces around added paranthesis.\n  text = text.join(' ').replace(/(\\() | (\\))/gmi, '$1$2').trim() || '???';\n  if (opt_maxLength) {\n    // TODO: Improve truncation so that text from this block is given priority.\n    // E.g. \"1+2+3+4+5+6+7+8+9=0\" should be \"...6+7+8+9=0\", not \"1+2+3+4+5...\".\n    // E.g. \"1+2+3+4+5=6+7+8+9+0\" should be \"...4+5=6+7...\".\n    if (text.length > opt_maxLength) {\n      text = text.substring(0, opt_maxLength - 3) + '...';\n    }\n  }\n  return text;\n};\n\n/**\n * Shortcut for appending a value input row.\n * @param {string} name Language-neutral identifier which may used to find this\n *     input again.  Should be unique to this block.\n * @return {!Blockly.Input} The input object created.\n */\nBlockly.Block.prototype.appendValueInput = function(name) {\n  return this.appendInput_(Blockly.INPUT_VALUE, name);\n};\n\n/**\n * Shortcut for appending a statement input row.\n * @param {string} name Language-neutral identifier which may used to find this\n *     input again.  Should be unique to this block.\n * @return {!Blockly.Input} The input object created.\n */\nBlockly.Block.prototype.appendStatementInput = function(name) {\n  return this.appendInput_(Blockly.NEXT_STATEMENT, name);\n};\n\n/**\n * Shortcut for appending a dummy input row.\n * @param {string=} opt_name Language-neutral identifier which may used to find\n *     this input again.  Should be unique to this block.\n * @return {!Blockly.Input} The input object created.\n */\nBlockly.Block.prototype.appendDummyInput = function(opt_name) {\n  return this.appendInput_(Blockly.DUMMY_INPUT, opt_name || '');\n};\n\n/**\n * Initialize this block using a cross-platform, internationalization-friendly\n * JSON description.\n * @param {!Object} json Structured data describing the block.\n */\nBlockly.Block.prototype.jsonInit = function(json) {\n  var warningPrefix = json['type'] ? 'Block \"' + json['type'] + '\": ' : '';\n\n  // Validate inputs.\n  if (json['output'] && json['previousStatement']) {\n    throw Error(warningPrefix +\n        'Must not have both an output and a previousStatement.');\n  }\n\n  // Set basic properties of block.\n  // Makes styles backward compatible with old way of defining hat style.\n  if (json['style'] && json['style'].hat) {\n    this.hat = json['style'].hat;\n    // Must set to null so it doesn't error when checking for style and colour.\n    json['style'] = null;\n  }\n\n  if (json['style'] && json['colour']) {\n    throw Error(warningPrefix + 'Must not have both a colour and a style.');\n  } else if (json['style']) {\n    this.jsonInitStyle_(json, warningPrefix);\n  } else {\n    this.jsonInitColour_(json, warningPrefix);\n  }\n\n  // Interpolate the message blocks.\n  var i = 0;\n  while (json['message' + i] !== undefined) {\n    this.interpolate_(json['message' + i], json['args' + i] || [],\n        json['lastDummyAlign' + i], warningPrefix);\n    i++;\n  }\n\n  if (json['inputsInline'] !== undefined) {\n    this.setInputsInline(json['inputsInline']);\n  }\n  // Set output and previous/next connections.\n  if (json['output'] !== undefined) {\n    this.setOutput(true, json['output']);\n  }\n  if (json['outputShape'] !== undefined) {\n    this.setOutputShape(json['outputShape']);\n  }\n  if (json['previousStatement'] !== undefined) {\n    this.setPreviousStatement(true, json['previousStatement']);\n  }\n  if (json['nextStatement'] !== undefined) {\n    this.setNextStatement(true, json['nextStatement']);\n  }\n  if (json['tooltip'] !== undefined) {\n    var rawValue = json['tooltip'];\n    var localizedText = Blockly.utils.replaceMessageReferences(rawValue);\n    this.setTooltip(localizedText);\n  }\n  if (json['enableContextMenu'] !== undefined) {\n    var rawValue = json['enableContextMenu'];\n    this.contextMenu = !!rawValue;\n  }\n  if (json['helpUrl'] !== undefined) {\n    var rawValue = json['helpUrl'];\n    var localizedValue = Blockly.utils.replaceMessageReferences(rawValue);\n    this.setHelpUrl(localizedValue);\n  }\n  if (typeof json['extensions'] == 'string') {\n    console.warn(\n        warningPrefix + 'JSON attribute \\'extensions\\' should be an array of' +\n        ' strings. Found raw string in JSON for \\'' + json['type'] +\n        '\\' block.');\n    json['extensions'] = [json['extensions']];  // Correct and continue.\n  }\n\n  // Add the mutator to the block\n  if (json['mutator'] !== undefined) {\n    Blockly.Extensions.apply(json['mutator'], this, true);\n  }\n\n  if (Array.isArray(json['extensions'])) {\n    var extensionNames = json['extensions'];\n    for (var j = 0; j < extensionNames.length; ++j) {\n      var extensionName = extensionNames[j];\n      Blockly.Extensions.apply(extensionName, this, false);\n    }\n  }\n};\n\n/**\n * Initialize the colour of this block from the JSON description.\n * @param {!Object} json Structured data describing the block.\n * @param {string} warningPrefix Warning prefix string identifying block.\n * @private\n */\nBlockly.Block.prototype.jsonInitColour_ = function(json, warningPrefix) {\n  if ('colour' in json) {\n    if (json['colour'] === undefined) {\n      console.warn(warningPrefix + 'Undefined colour value.');\n    } else {\n      var rawValue = json['colour'];\n      try {\n        this.setColour(rawValue);\n      } catch (e) {\n        console.warn(warningPrefix + 'Illegal colour value: ', rawValue);\n      }\n    }\n  }\n};\n\n/**\n * Initialize the style of this block from the JSON description.\n * @param {!Object} json Structured data describing the block.\n * @param {string} warningPrefix Warning prefix string identifying block.\n * @private\n */\nBlockly.Block.prototype.jsonInitStyle_ = function(json, warningPrefix) {\n  var blockStyleName = json['style'];\n  try {\n    this.setStyle(blockStyleName);\n  } catch (styleError) {\n    console.warn(warningPrefix + 'Style does not exist: ', blockStyleName);\n  }\n};\n\n/**\n * Add key/values from mixinObj to this block object. By default, this method\n * will check that the keys in mixinObj will not overwrite existing values in\n * the block, including prototype values. This provides some insurance against\n * mixin / extension incompatibilities with future block features. This check\n * can be disabled by passing true as the second argument.\n * @param {!Object} mixinObj The key/values pairs to add to this block object.\n * @param {boolean=} opt_disableCheck Option flag to disable overwrite checks.\n */\nBlockly.Block.prototype.mixin = function(mixinObj, opt_disableCheck) {\n  if (opt_disableCheck !== undefined && typeof opt_disableCheck != 'boolean') {\n    throw Error('opt_disableCheck must be a boolean if provided');\n  }\n  if (!opt_disableCheck) {\n    var overwrites = [];\n    for (var key in mixinObj) {\n      if (this[key] !== undefined) {\n        overwrites.push(key);\n      }\n    }\n    if (overwrites.length) {\n      throw Error('Mixin will overwrite block members: ' +\n          JSON.stringify(overwrites));\n    }\n  }\n  Blockly.utils.object.mixin(this, mixinObj);\n};\n\n/**\n * Interpolate a message description onto the block.\n * @param {string} message Text contains interpolation tokens (%1, %2, ...)\n *     that match with fields or inputs defined in the args array.\n * @param {!Array} args Array of arguments to be interpolated.\n * @param {string|undefined} lastDummyAlign If a dummy input is added at the\n *     end, how should it be aligned?\n * @param {string} warningPrefix Warning prefix string identifying block.\n * @private\n */\nBlockly.Block.prototype.interpolate_ = function(message, args, lastDummyAlign,\n    warningPrefix) {\n  var tokens = Blockly.utils.tokenizeInterpolation(message);\n  // Interpolate the arguments.  Build a list of elements.\n  var indexDup = [];\n  var indexCount = 0;\n  var elements = [];\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n    if (typeof token == 'number') {\n      if (token <= 0 || token > args.length) {\n        throw Error('Block \"' + this.type + '\": ' +\n            'Message index %' + token + ' out of range.');\n      }\n      if (indexDup[token]) {\n        throw Error('Block \"' + this.type + '\": ' +\n            'Message index %' + token + ' duplicated.');\n      }\n      indexDup[token] = true;\n      indexCount++;\n      elements.push(args[token - 1]);\n    } else {\n      token = token.trim();\n      if (token) {\n        elements.push(token);\n      }\n    }\n  }\n  if (indexCount != args.length) {\n    throw Error('Block \"' + this.type + '\": ' +\n        'Message does not reference all ' + args.length + ' arg(s).');\n  }\n  // Add last dummy input if needed.\n  if (elements.length && (typeof elements[elements.length - 1] == 'string' ||\n      Blockly.utils.string.startsWith(\n          elements[elements.length - 1]['type'], 'field_'))) {\n    var dummyInput = {type: 'input_dummy'};\n    if (lastDummyAlign) {\n      dummyInput['align'] = lastDummyAlign;\n    }\n    elements.push(dummyInput);\n  }\n  // Lookup of alignment constants.\n  var alignmentLookup = {\n    'LEFT': Blockly.ALIGN_LEFT,\n    'RIGHT': Blockly.ALIGN_RIGHT,\n    'CENTRE': Blockly.ALIGN_CENTRE,\n    'CENTER': Blockly.ALIGN_CENTRE\n  };\n  // Populate block with inputs and fields.\n  var fieldStack = [];\n  for (var i = 0; i < elements.length; i++) {\n    var element = elements[i];\n    if (typeof element == 'string') {\n      fieldStack.push([element, undefined]);\n    } else {\n      var field = null;\n      var input = null;\n      do {\n        var altRepeat = false;\n        if (typeof element == 'string') {\n          field = new Blockly.FieldLabel(element);\n        } else {\n          switch (element['type']) {\n            case 'input_value':\n              input = this.appendValueInput(element['name']);\n              break;\n            case 'input_statement':\n              input = this.appendStatementInput(element['name']);\n              break;\n            case 'input_dummy':\n              input = this.appendDummyInput(element['name']);\n              break;\n            default:\n              // This should handle all field JSON parsing, including\n              // options that can be applied to any field type.\n              field = Blockly.fieldRegistry.fromJson(element);\n\n              // Unknown field.\n              if (!field && element['alt']) {\n                element = element['alt'];\n                altRepeat = true;\n              }\n          }\n        }\n      } while (altRepeat);\n      if (field) {\n        fieldStack.push([field, element['name']]);\n      } else if (input) {\n        if (element['check']) {\n          input.setCheck(element['check']);\n        }\n        if (element['align']) {\n          var alignment = alignmentLookup[element['align'].toUpperCase()];\n          if (alignment === undefined) {\n            console.warn(warningPrefix + 'Illegal align value: ',\n                element['align']);\n          } else {\n            input.setAlign(alignment);\n          }\n        }\n        for (var j = 0; j < fieldStack.length; j++) {\n          input.appendField(fieldStack[j][0], fieldStack[j][1]);\n        }\n        fieldStack.length = 0;\n      }\n    }\n  }\n};\n\n/**\n * Add a value input, statement input or local variable to this block.\n * @param {number} type Either Blockly.INPUT_VALUE or Blockly.NEXT_STATEMENT or\n *     Blockly.DUMMY_INPUT.\n * @param {string} name Language-neutral identifier which may used to find this\n *     input again.  Should be unique to this block.\n * @return {!Blockly.Input} The input object created.\n * @protected\n */\nBlockly.Block.prototype.appendInput_ = function(type, name) {\n  var connection = null;\n  if (type == Blockly.INPUT_VALUE || type == Blockly.NEXT_STATEMENT) {\n    connection = this.makeConnection_(type);\n  }\n  if (type == Blockly.NEXT_STATEMENT) {\n    this.statementInputCount++;\n  }\n  var input = new Blockly.Input(type, name, this, connection);\n  // Append input to list.\n  this.inputList.push(input);\n  return input;\n};\n\n/**\n * Move a named input to a different location on this block.\n * @param {string} name The name of the input to move.\n * @param {?string} refName Name of input that should be after the moved input,\n *   or null to be the input at the end.\n */\nBlockly.Block.prototype.moveInputBefore = function(name, refName) {\n  if (name == refName) {\n    return;\n  }\n  // Find both inputs.\n  var inputIndex = -1;\n  var refIndex = refName ? -1 : this.inputList.length;\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    if (input.name == name) {\n      inputIndex = i;\n      if (refIndex != -1) {\n        break;\n      }\n    } else if (refName && input.name == refName) {\n      refIndex = i;\n      if (inputIndex != -1) {\n        break;\n      }\n    }\n  }\n  if (inputIndex == -1) {\n    throw Error('Named input \"' + name + '\" not found.');\n  }\n  if (refIndex == -1) {\n    throw Error('Reference input \"' + refName + '\" not found.');\n  }\n  this.moveNumberedInputBefore(inputIndex, refIndex);\n};\n\n/**\n * Move a numbered input to a different location on this block.\n * @param {number} inputIndex Index of the input to move.\n * @param {number} refIndex Index of input that should be after the moved input.\n */\nBlockly.Block.prototype.moveNumberedInputBefore = function(\n    inputIndex, refIndex) {\n  // Validate arguments.\n  if (inputIndex == refIndex) {\n    throw Error('Can\\'t move input to itself.');\n  }\n  if (inputIndex >= this.inputList.length) {\n    throw RangeError('Input index ' + inputIndex + ' out of bounds.');\n  }\n  if (refIndex > this.inputList.length) {\n    throw RangeError('Reference input ' + refIndex + ' out of bounds.');\n  }\n  // Remove input.\n  var input = this.inputList[inputIndex];\n  this.inputList.splice(inputIndex, 1);\n  if (inputIndex < refIndex) {\n    refIndex--;\n  }\n  // Reinsert input.\n  this.inputList.splice(refIndex, 0, input);\n};\n\n/**\n * Remove an input from this block.\n * @param {string} name The name of the input.\n * @param {boolean=} opt_quiet True to prevent an error if input is not present.\n * @return {boolean} True if operation succeeds, false if input is not present and opt_quiet is true\n * @throws {Error} if the input is not present and opt_quiet is not true.\n */\nBlockly.Block.prototype.removeInput = function(name, opt_quiet) {\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    if (input.name == name) {\n      if (input.type == Blockly.NEXT_STATEMENT) {\n        this.statementInputCount--;\n      }\n      input.dispose();\n      this.inputList.splice(i, 1);\n      return true;\n    }\n  }\n  if (opt_quiet) {\n    return false;\n  } else {\n    throw Error('Input not found: ' + name);\n  }\n};\n\n/**\n * Fetches the named input object.\n * @param {string} name The name of the input.\n * @return {Blockly.Input} The input object, or null if input does not exist.\n */\nBlockly.Block.prototype.getInput = function(name) {\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    if (input.name == name) {\n      return input;\n    }\n  }\n  // This input does not exist.\n  return null;\n};\n\n/**\n * Fetches the block attached to the named input.\n * @param {string} name The name of the input.\n * @return {Blockly.Block} The attached value block, or null if the input is\n *     either disconnected or if the input does not exist.\n */\nBlockly.Block.prototype.getInputTargetBlock = function(name) {\n  var input = this.getInput(name);\n  return input && input.connection && input.connection.targetBlock();\n};\n\n/**\n * Returns the comment on this block (or null if there is no comment).\n * @return {?string} Block's comment.\n */\nBlockly.Block.prototype.getCommentText = function() {\n  return this.commentModel.text;\n};\n\n/**\n * Set this block's comment text.\n * @param {?string} text The text, or null to delete.\n */\nBlockly.Block.prototype.setCommentText = function(text) {\n  if (this.commentModel.text == text) {\n    return;\n  }\n  Blockly.Events.fire(new Blockly.Events.BlockChange(\n      this, 'comment', null, this.commentModel.text, text));\n  this.commentModel.text = text;\n  this.comment = text;  // For backwards compatibility.\n};\n\n/**\n * Set this block's warning text.\n * @param {?string} _text The text, or null to delete.\n * @param {string=} _opt_id An optional ID for the warning text to be able to\n *     maintain multiple warnings.\n */\nBlockly.Block.prototype.setWarningText = function(_text, _opt_id) {\n  // NOP.\n};\n\n/**\n * Give this block a mutator dialog.\n * @param {Blockly.Mutator} _mutator A mutator dialog instance or null to\n *     remove.\n */\nBlockly.Block.prototype.setMutator = function(_mutator) {\n  // NOP.\n};\n\n/**\n * Return the coordinates of the top-left corner of this block relative to the\n * drawing surface's origin (0,0), in workspace units.\n * @return {!Blockly.utils.Coordinate} Object with .x and .y properties.\n */\nBlockly.Block.prototype.getRelativeToSurfaceXY = function() {\n  return this.xy_;\n};\n\n/**\n * Move a block by a relative offset.\n * @param {number} dx Horizontal offset, in workspace units.\n * @param {number} dy Vertical offset, in workspace units.\n */\nBlockly.Block.prototype.moveBy = function(dx, dy) {\n  if (this.parentBlock_) {\n    throw Error('Block has parent.');\n  }\n  var event = new Blockly.Events.BlockMove(this);\n  this.xy_.translate(dx, dy);\n  event.recordNew();\n  Blockly.Events.fire(event);\n};\n\n/**\n * Create a connection of the specified type.\n * @param {number} type The type of the connection to create.\n * @return {!Blockly.Connection} A new connection of the specified type.\n * @protected\n */\nBlockly.Block.prototype.makeConnection_ = function(type) {\n  return new Blockly.Connection(this, type);\n};\n\n/**\n * Recursively checks whether all statement and value inputs are filled with\n * blocks. Also checks all following statement blocks in this stack.\n * @param {boolean=} opt_shadowBlocksAreFilled An optional argument controlling\n *     whether shadow blocks are counted as filled. Defaults to true.\n * @return {boolean} True if all inputs are filled, false otherwise.\n */\nBlockly.Block.prototype.allInputsFilled = function(opt_shadowBlocksAreFilled) {\n  // Account for the shadow block filledness toggle.\n  if (opt_shadowBlocksAreFilled === undefined) {\n    opt_shadowBlocksAreFilled = true;\n  }\n  if (!opt_shadowBlocksAreFilled && this.isShadow()) {\n    return false;\n  }\n\n  // Recursively check each input block of the current block.\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    if (!input.connection) {\n      continue;\n    }\n    var target = input.connection.targetBlock();\n    if (!target || !target.allInputsFilled(opt_shadowBlocksAreFilled)) {\n      return false;\n    }\n  }\n\n  // Recursively check the next block after the current block.\n  var next = this.getNextBlock();\n  if (next) {\n    return next.allInputsFilled(opt_shadowBlocksAreFilled);\n  }\n\n  return true;\n};\n\n/**\n * This method returns a string describing this Block in developer terms (type\n * name and ID; English only).\n *\n * Intended to on be used in console logs and errors. If you need a string that\n * uses the user's native language (including block text, field values, and\n * child blocks), use [toString()]{@link Blockly.Block#toString}.\n * @return {string} The description.\n */\nBlockly.Block.prototype.toDevString = function() {\n  var msg = this.type ? '\"' + this.type + '\" block' : 'Block';\n  if (this.id) {\n    msg += ' (id=\"' + this.id + '\")';\n  }\n  return msg;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The interface for an object that owns a block's rendering SVG\n * elements.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n\n'use strict';\n\ngoog.provide('Blockly.blockRendering.IPathObject');\n\ngoog.requireType('Blockly.blockRendering.ConstantProvider');\ngoog.requireType('Blockly.Theme');\n\n\n/**\n * An interface for a block's path object.\n * @param {!SVGElement} _root The root SVG element.\n * @param {!Blockly.blockRendering.ConstantProvider} _constants The renderer's\n *     constants.\n * @interface\n */\nBlockly.blockRendering.IPathObject = function(_root, _constants) {};\n\n/**\n * The primary path of the block.\n * @type {!SVGElement}\n */\nBlockly.blockRendering.IPathObject.prototype.svgPath;\n\n/**\n * The renderer's constant provider.\n * @type {!Blockly.blockRendering.ConstantProvider}\n */\nBlockly.blockRendering.IPathObject.prototype.constants;\n\n/**\n * The primary path of the block.\n * @type {!Blockly.Theme.BlockStyle}\n */\nBlockly.blockRendering.IPathObject.prototype.style;\n\n/**\n * Holds the cursors svg element when the cursor is attached to the block.\n * This is null if there is no cursor on the block.\n * @type {SVGElement}\n */\nBlockly.blockRendering.IPathObject.prototype.cursorSvg;\n\n/**\n * Holds the markers svg element when the marker is attached to the block.\n * This is null if there is no marker on the block.\n * @type {SVGElement}\n */\nBlockly.blockRendering.IPathObject.prototype.markerSvg;\n\n/**\n * Set the path generated by the renderer onto the respective SVG element.\n * @param {string} pathString The path.\n * @package\n */\nBlockly.blockRendering.IPathObject.prototype.setPath;\n\n/**\n * Apply the stored colours to the block's path, taking into account whether\n * the paths belong to a shadow block.\n * @param {!Blockly.Block} block The source block.\n * @package\n */\nBlockly.blockRendering.IPathObject.prototype.applyColour;\n\n/**\n * Update the style.\n * @param {!Blockly.Theme.BlockStyle} blockStyle The block style to use.\n * @package\n */\nBlockly.blockRendering.IPathObject.prototype.setStyle;\n\n/**\n * Flip the SVG paths in RTL.\n * @package\n */\nBlockly.blockRendering.IPathObject.prototype.flipRTL;\n\n/**\n * Add the cursor svg to this block's svg group.\n * @param {SVGElement} cursorSvg The svg root of the cursor to be added to the\n *     block svg group.\n * @package\n */\nBlockly.blockRendering.IPathObject.prototype.setCursorSvg;\n\n/**\n * Add the marker svg to this block's svg group.\n * @param {SVGElement} markerSvg The svg root of the marker to be added to the\n *     block svg group.\n * @package\n */\nBlockly.blockRendering.IPathObject.prototype.setMarkerSvg;\n\n/**\n * Set whether the block shows a highlight or not.  Block highlighting is\n * often used to visually mark blocks currently being executed.\n * @param {boolean} highlighted True if highlighted.\n * @package\n */\nBlockly.blockRendering.IPathObject.prototype.updateHighlighted;\n\n/**\n * Add or remove styling showing that a block is selected.\n * @param {boolean} enable True if selection is enabled, false otherwise.\n * @package\n */\nBlockly.blockRendering.IPathObject.prototype.updateSelected;\n\n/**\n * Add or remove styling showing that a block is dragged over a delete area.\n * @param {boolean} enable True if the block is being dragged over a delete\n *     area, false otherwise.\n * @package\n */\nBlockly.blockRendering.IPathObject.prototype.updateDraggingDelete;\n\n/**\n * Add or remove styling showing that a block is an insertion marker.\n * @param {boolean} enable True if the block is an insertion marker, false\n *     otherwise.\n * @package\n */\nBlockly.blockRendering.IPathObject.prototype.updateInsertionMarker;\n\n/**\n * Add or remove styling showing that a block is movable.\n * @param {boolean} enable True if the block is movable, false otherwise.\n * @package\n */\nBlockly.blockRendering.IPathObject.prototype.updateMovable;\n\n/**\n * Add or remove styling that shows that if the dragging block is dropped, this\n * block will be replaced.  If a shadow block, it will disappear.  Otherwise it\n * will bump.\n * @param {boolean} enable True if styling should be added.\n * @package\n */\nBlockly.blockRendering.IPathObject.prototype.updateReplacementFade;\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Constant declarations for common key codes.\n * These methods are not specific to Blockly, and could be factored out into\n * a JavaScript framework such as Closure.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.utils.aria');\n\n\n/**\n * ARIA states/properties prefix.\n * @private\n */\nBlockly.utils.aria.ARIA_PREFIX_ = 'aria-';\n\n/**\n * ARIA role attribute.\n * @private\n */\nBlockly.utils.aria.ROLE_ATTRIBUTE_ = 'role';\n\n/**\n * ARIA role values.\n * Copied from Closure's goog.a11y.aria.Role\n * @enum {string}\n */\nBlockly.utils.aria.Role = {\n  // ARIA role for an interactive control of tabular data.\n  GRID: 'grid',\n\n  // ARIA role for a cell in a grid.\n  GRIDCELL: 'gridcell',\n\n  // ARIA role for a group of related elements like tree item siblings.\n  GROUP: 'group',\n\n  // ARIA role for a listbox.\n  LISTBOX: 'listbox',\n\n  // ARIA role for a popup menu.\n  MENU: 'menu',\n\n  // ARIA role for menu item elements.\n  MENUITEM: 'menuitem',\n\n  // ARIA role for a checkbox box element inside a menu.\n  MENUITEMCHECKBOX: 'menuitemcheckbox',\n\n  // ARIA role for option items that are  children of combobox, listbox, menu,\n  // radiogroup, or tree elements.\n  OPTION: 'option',\n\n  // ARIA role for ignorable cosmetic elements with no semantic significance.\n  PRESENTATION: 'presentation',\n\n  // ARIA role for a row of cells in a grid.\n  ROW: 'row',\n\n  // ARIA role for a tree.\n  TREE: 'tree',\n\n  // ARIA role for a tree item that sometimes may be expanded or collapsed.\n  TREEITEM: 'treeitem'\n};\n\n/**\n * ARIA states and properties.\n * Copied from Closure's goog.a11y.aria.State\n * @enum {string}\n */\nBlockly.utils.aria.State = {\n  // ARIA property for setting the currently active descendant of an element,\n  // for example the selected item in a list box. Value: ID of an element.\n  ACTIVEDESCENDANT: 'activedescendant',\n\n  // ARIA property defines the total number of columns in a table, grid, or\n  // treegrid.\n  // Value: integer.\n  COLCOUNT: 'colcount',\n\n  // ARIA state for a disabled item. Value: one of {true, false}.\n  DISABLED: 'disabled',\n\n  // ARIA state for setting whether the element like a tree node is expanded.\n  // Value: one of {true, false, undefined}.\n  EXPANDED: 'expanded',\n\n  // ARIA state indicating that the entered value does not conform. Value:\n  // one of {false, true, 'grammar', 'spelling'}\n  INVALID: 'invalid',\n\n  // ARIA property that provides a label to override any other text, value, or\n  // contents used to describe this element. Value: string.\n  LABEL: 'label',\n\n  // ARIA property for setting the element which labels another element.\n  // Value: space-separated IDs of elements.\n  LABELLEDBY: 'labelledby',\n\n  // ARIA property for setting the level of an element in the hierarchy.\n  // Value: integer.\n  LEVEL: 'level',\n\n  // ARIA property indicating if the element is horizontal or vertical.\n  // Value: one of {'vertical', 'horizontal'}.\n  ORIENTATION: 'orientation',\n\n  // ARIA property that defines an element's number of position in a list.\n  // Value: integer.\n  POSINSET: 'posinset',\n\n  // ARIA property defines the total number of rows in a table, grid, or\n  // treegrid.\n  // Value: integer.\n  ROWCOUNT: 'rowcount',\n\n  // ARIA state for setting the currently selected item in the list.\n  // Value: one of {true, false, undefined}.\n  SELECTED: 'selected',\n\n  // ARIA property defining the number of items in a list. Value: integer.\n  SETSIZE: 'setsize',\n\n  // ARIA property for slider maximum value. Value: number.\n  VALUEMAX: 'valuemax',\n\n  // ARIA property for slider minimum value. Value: number.\n  VALUEMIN: 'valuemin'\n};\n\n/**\n * Sets the role of an element.\n *\n * Similar to Closure's goog.a11y.aria\n *\n * @param {!Element} element DOM node to set role of.\n * @param {!Blockly.utils.aria.Role} roleName Role name.\n */\nBlockly.utils.aria.setRole = function(element, roleName) {\n  element.setAttribute(Blockly.utils.aria.ROLE_ATTRIBUTE_, roleName);\n};\n\n/**\n * Sets the state or property of an element.\n * Copied from Closure's goog.a11y.aria\n * @param {!Element} element DOM node where we set state.\n * @param {!Blockly.utils.aria.State} stateName State attribute being set.\n *     Automatically adds prefix 'aria-' to the state name if the attribute is\n *     not an extra attribute.\n * @param {string|boolean|number|!Array.<string>} value Value\n * for the state attribute.\n */\nBlockly.utils.aria.setState = function(element, stateName, value) {\n  if (Array.isArray(value)) {\n    value = value.join(' ');\n  }\n  var attrStateName = Blockly.utils.aria.ARIA_PREFIX_ + stateName;\n  element.setAttribute(attrStateName, value);\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly menu similar to Closure's goog.ui.Menu\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.Menu');\n\ngoog.require('Blockly.utils.aria');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.KeyCodes');\ngoog.require('Blockly.utils.style');\n\n\n/**\n * A basic menu class.\n * @constructor\n */\nBlockly.Menu = function() {\n  /**\n   * Array of menu items.\n   * (Nulls are never in the array, but typing the array as nullable prevents\n   * the compiler from objecting to .indexOf(null))\n   * @type {!Array.<Blockly.MenuItem>}\n   * @private\n   */\n  this.menuItems_ = [];\n\n  /**\n   * Coordinates of the mousedown event that caused this menu to open. Used to\n   * prevent the consequent mouseup event due to a simple click from activating\n   * a menu item immediately.\n   * @type {?Blockly.utils.Coordinate}\n   * @package\n   */\n  this.openingCoords = null;\n\n  /**\n   * This is the element that we will listen to the real focus events on.\n   * A value of null means no menu item is highlighted.\n   * @type {Blockly.MenuItem}\n   * @private\n   */\n  this.highlightedItem_ = null;\n\n  /**\n   * Mouse over event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.mouseOverHandler_ = null;\n\n  /**\n   * Click event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.clickHandler_ = null;\n\n  /**\n   * Mouse enter event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.mouseEnterHandler_ = null;\n\n  /**\n   * Mouse leave event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.mouseLeaveHandler_ = null;\n\n  /**\n   * Key down event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onKeyDownHandler_ = null;\n\n  /**\n   * The menu's root DOM element.\n   * @type {Element}\n   * @private\n   */\n  this.element_ = null;\n\n  /**\n   * ARIA name for this menu.\n   * @type {?Blockly.utils.aria.Role}\n   * @private\n   */\n  this.roleName_ = null;\n};\n\n\n/**\n * Add a new menu item to the bottom of this menu.\n * @param {!Blockly.MenuItem} menuItem Menu item to append.\n */\nBlockly.Menu.prototype.addChild = function(menuItem) {\n  this.menuItems_.push(menuItem);\n};\n\n/**\n * Creates the menu DOM.\n * @param {!Element} container Element upon which to append this menu.\n */\nBlockly.Menu.prototype.render = function(container) {\n  var element = /** @type {!HTMLDivElement} */ (document.createElement('div'));\n  // goog-menu is deprecated, use blocklyMenu.  May 2020.\n  element.className = 'blocklyMenu goog-menu blocklyNonSelectable';\n  element.tabIndex = 0;\n  if (this.roleName_) {\n    Blockly.utils.aria.setRole(element, this.roleName_);\n  }\n  this.element_ = element;\n\n  // Add menu items.\n  for (var i = 0, menuItem; (menuItem = this.menuItems_[i]); i++) {\n    element.appendChild(menuItem.createDom());\n  }\n\n  // Add event handlers.\n  this.mouseOverHandler_ = Blockly.bindEventWithChecks_(element,\n      'mouseover', this, this.handleMouseOver_, true);\n  this.clickHandler_ = Blockly.bindEventWithChecks_(element,\n      'click', this, this.handleClick_, true);\n  this.mouseEnterHandler_ = Blockly.bindEventWithChecks_(element,\n      'mouseenter', this, this.handleMouseEnter_, true);\n  this.mouseLeaveHandler_ = Blockly.bindEventWithChecks_(element,\n      'mouseleave', this, this.handleMouseLeave_, true);\n  this.onKeyDownHandler_ = Blockly.bindEventWithChecks_(element,\n      'keydown', this, this.handleKeyEvent_);\n\n  container.appendChild(element);\n};\n\n/**\n * Gets the menu's element.\n * @return {Element} The DOM element.\n * @package\n */\nBlockly.Menu.prototype.getElement = function() {\n  return this.element_;\n};\n\n/**\n * Focus the menu element.\n * @package\n */\nBlockly.Menu.prototype.focus = function() {\n  var el = this.getElement();\n  if (el) {\n    el.focus({preventScroll:true});\n    Blockly.utils.dom.addClass(el, 'blocklyFocused');\n  }\n};\n\n/**\n * Blur the menu element.\n * @private\n */\nBlockly.Menu.prototype.blur_ = function() {\n  var el = this.getElement();\n  if (el) {\n    el.blur();\n    Blockly.utils.dom.removeClass(el, 'blocklyFocused');\n  }\n};\n\n/**\n * Set the menu accessibility role.\n * @param {!Blockly.utils.aria.Role} roleName role name.\n * @package\n */\nBlockly.Menu.prototype.setRole = function(roleName) {\n  this.roleName_ = roleName;\n};\n\n/**\n * Dispose of this menu.\n */\nBlockly.Menu.prototype.dispose = function() {\n  // Remove event handlers.\n  if (this.mouseOverHandler_) {\n    Blockly.unbindEvent_(this.mouseOverHandler_);\n    this.mouseOverHandler_ = null;\n  }\n  if (this.clickHandler_) {\n    Blockly.unbindEvent_(this.clickHandler_);\n    this.clickHandler_ = null;\n  }\n  if (this.mouseEnterHandler_) {\n    Blockly.unbindEvent_(this.mouseEnterHandler_);\n    this.mouseEnterHandler_ = null;\n  }\n  if (this.mouseLeaveHandler_) {\n    Blockly.unbindEvent_(this.mouseLeaveHandler_);\n    this.mouseLeaveHandler_ = null;\n  }\n  if (this.onKeyDownHandler_) {\n    Blockly.unbindEvent_(this.onKeyDownHandler_);\n    this.onKeyDownHandler_ = null;\n  }\n\n  // Remove menu items.\n  for (var i = 0, menuItem; (menuItem = this.menuItems_[i]); i++) {\n    menuItem.dispose();\n  }\n  this.element_ = null;\n};\n\n// Child component management.\n\n/**\n * Returns the child menu item that owns the given DOM element,\n * or null if no such menu item is found.\n * @param {Element} elem DOM element whose owner is to be returned.\n * @return {?Blockly.MenuItem} Menu item for which the DOM element belongs to.\n * @private\n */\nBlockly.Menu.prototype.getMenuItem_ = function(elem) {\n  var menuElem = this.getElement();\n  // Node might be the menu border (resulting in no associated menu item), or\n  // a menu item's div, or some element within the menu item.\n  // Walk up parents until one meets either the menu's root element, or\n  // a menu item's div.\n  while (elem && elem != menuElem) {\n    if (Blockly.utils.dom.hasClass(elem, 'blocklyMenuItem')) {\n      // Having found a menu item's div, locate that menu item in this menu.\n      for (var i = 0, menuItem; (menuItem = this.menuItems_[i]); i++) {\n        if (menuItem.getElement() == elem) {\n          return menuItem;\n        }\n      }\n    }\n    elem = elem.parentElement;\n  }\n  return null;\n};\n\n// Highlight management.\n\n/**\n * Highlights the given menu item, or clears highlighting if null.\n * @param {Blockly.MenuItem} item Item to highlight, or null.\n * @package\n */\nBlockly.Menu.prototype.setHighlighted = function(item) {\n  var currentHighlighted = this.highlightedItem_;\n  if (currentHighlighted) {\n    currentHighlighted.setHighlighted(false);\n    this.highlightedItem_ = null;\n  }\n  if (item) {\n    item.setHighlighted(true);\n    this.highlightedItem_ = item;\n    // Bring the highlighted item into view. This has no effect if the menu is\n    // not scrollable.\n    var el = /** @type {!Element} */ (this.getElement());\n    Blockly.utils.style.scrollIntoContainerView(\n        /** @type {!Element} */ (item.getElement()), el);\n\n    Blockly.utils.aria.setState(el, Blockly.utils.aria.State.ACTIVEDESCENDANT,\n        item.getId());\n  }\n};\n\n/**\n * Highlights the next highlightable item (or the first if nothing is currently\n * highlighted).\n * @package\n */\nBlockly.Menu.prototype.highlightNext = function() {\n  var index = this.menuItems_.indexOf(this.highlightedItem_);\n  this.highlightHelper_(index, 1);\n};\n\n/**\n * Highlights the previous highlightable item (or the last if nothing is\n * currently highlighted).\n * @package\n */\nBlockly.Menu.prototype.highlightPrevious = function() {\n  var index = this.menuItems_.indexOf(this.highlightedItem_);\n  this.highlightHelper_(index < 0 ? this.menuItems_.length : index, -1);\n};\n\n/**\n * Highlights the first highlightable item.\n * @private\n */\nBlockly.Menu.prototype.highlightFirst_ = function() {\n  this.highlightHelper_(-1, 1);\n};\n\n/**\n * Highlights the last highlightable item.\n * @private\n */\nBlockly.Menu.prototype.highlightLast_ = function() {\n  this.highlightHelper_(this.menuItems_.length, -1);\n};\n\n/**\n * Helper function that manages the details of moving the highlight among\n * child menuitems in response to keyboard events.\n * @param {number} startIndex Start index.\n * @param {number} delta Step direction: 1 to go down, -1 to go up.\n * @private\n */\nBlockly.Menu.prototype.highlightHelper_ = function(startIndex, delta) {\n  var index = startIndex + delta;\n  var menuItem;\n  while ((menuItem = this.menuItems_[index])) {\n    if (menuItem.isEnabled()) {\n      this.setHighlighted(menuItem);\n      break;\n    }\n    index += delta;\n  }\n};\n\n// Mouse events.\n\n/**\n * Handles mouseover events. Highlight menuitems as the user hovers over them.\n * @param {!Event} e Mouse event to handle.\n * @private\n */\nBlockly.Menu.prototype.handleMouseOver_ = function(e) {\n  var menuItem = this.getMenuItem_(/** @type {Element} */ (e.target));\n\n  if (menuItem) {\n    if (menuItem.isEnabled()) {\n      if (this.highlightedItem_ != menuItem) {\n        this.setHighlighted(menuItem);\n      }\n    } else {\n      this.setHighlighted(null);\n    }\n  }\n};\n\n/**\n * Handles click events. Pass the event onto the child menuitem to handle.\n * @param {!Event} e Click event to handle.\n * @private\n */\nBlockly.Menu.prototype.handleClick_ = function(e) {\n  var oldCoords = this.openingCoords;\n  // Clear out the saved opening coords immediately so they're not used twice.\n  this.openingCoords = null;\n  if (oldCoords && typeof e.clientX == 'number') {\n    var newCoords = new Blockly.utils.Coordinate(e.clientX, e.clientY);\n    if (Blockly.utils.Coordinate.distance(oldCoords, newCoords) < 1) {\n      // This menu was opened by a mousedown and we're handling the consequent\n      // click event. The coords haven't changed, meaning this was the same\n      // opening event. Don't do the usual behavior because the menu just popped\n      // up under the mouse and the user didn't mean to activate this item.\n      return;\n    }\n  }\n\n  var menuItem = this.getMenuItem_(/** @type {Element} */ (e.target));\n  if (menuItem) {\n    menuItem.performAction();\n  }\n};\n\n/**\n * Handles mouse enter events. Focus the element.\n * @param {Event} _e Mouse event to handle.\n * @private\n */\nBlockly.Menu.prototype.handleMouseEnter_ = function(_e) {\n  this.focus();\n};\n\n/**\n * Handles mouse leave events. Blur and clear highlight.\n * @param {Event} _e Mouse event to handle.\n * @private\n */\nBlockly.Menu.prototype.handleMouseLeave_ = function(_e) {\n  if (this.getElement()) {\n    this.blur_();\n    this.setHighlighted(null);\n  }\n};\n\n// Keyboard events.\n\n/**\n * Attempts to handle a keyboard event, if the menu item is enabled, by calling\n * {@link handleKeyEventInternal_}.\n * @param {!Event} e Key event to handle.\n * @private\n */\nBlockly.Menu.prototype.handleKeyEvent_ = function(e) {\n  if (!this.menuItems_.length) {\n    // Empty menu.\n    return;\n  }\n  if (e.shiftKey || e.ctrlKey || e.metaKey || e.altKey) {\n    // Do not handle the key event if any modifier key is pressed.\n    return;\n  }\n\n  var highlighted = this.highlightedItem_;\n  switch (e.keyCode) {\n    case Blockly.utils.KeyCodes.ENTER:\n    case Blockly.utils.KeyCodes.SPACE:\n      if (highlighted) {\n        highlighted.performAction();\n      }\n      break;\n\n    case Blockly.utils.KeyCodes.UP:\n      this.highlightPrevious();\n      break;\n\n    case Blockly.utils.KeyCodes.DOWN:\n      this.highlightNext();\n      break;\n\n    case Blockly.utils.KeyCodes.PAGE_UP:\n    case Blockly.utils.KeyCodes.HOME:\n      this.highlightFirst_();\n      break;\n\n    case Blockly.utils.KeyCodes.PAGE_DOWN:\n    case Blockly.utils.KeyCodes.END:\n      this.highlightLast_();\n      break;\n\n    default:\n      // Not a key the menu is interested in.\n      return;\n  }\n  // The menu used this key, don't let it have secondary effects.\n  e.preventDefault();\n  e.stopPropagation();\n};\n\n/**\n * Get the size of a rendered menu.\n * @return {!Blockly.utils.Size} Object with width and height properties.\n * @package\n */\nBlockly.Menu.prototype.getSize = function() {\n  var menuDom = this.getElement();\n  var menuSize = Blockly.utils.style.getSize(/** @type {!Element} */ (menuDom));\n  // Recalculate height for the total content, not only box height.\n  menuSize.height = menuDom.scrollHeight;\n  return menuSize;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly menu item similar to Closure's goog.ui.MenuItem\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.MenuItem');\n\ngoog.require('Blockly.utils.aria');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.IdGenerator');\n\n\n/**\n * Class representing an item in a menu.\n *\n * @param {string|!HTMLElement} content Text caption to display as the content\n *     of the item, or a HTML element to display.\n * @param {string=} opt_value Data/model associated with the menu item.\n * @constructor\n */\nBlockly.MenuItem = function(content, opt_value) {\n  /**\n   * Human-readable text of this menu item, or the HTML element to display.\n   * @type {string|!HTMLElement}\n   * @private\n   */\n  this.content_ = content;\n\n  /**\n   * Machine-readable value of this menu item.\n   * @type {string|undefined}\n   * @private\n   */\n  this.value_ = opt_value;\n\n  /**\n   * Is the menu item clickable, as opposed to greyed-out.\n   * @type {boolean}\n   * @private\n   */\n  this.enabled_ = true;\n\n  /**\n   * The DOM element for the menu item.\n   * @type {?Element}\n   * @private\n   */\n  this.element_ = null;\n\n  /**\n   * Whether the menu item is rendered right-to-left.\n   * @type {boolean}\n   * @private\n   */\n  this.rightToLeft_ = false;\n\n  /**\n   * ARIA name for this menu.\n   * @type {?Blockly.utils.aria.Role}\n   * @private\n   */\n  this.roleName_ = null;\n\n  /**\n   * Is this menu item checkable.\n   * @type {boolean}\n   * @private\n   */\n  this.checkable_ = false;\n\n  /**\n   * Is this menu item currently checked.\n   * @type {boolean}\n   * @private\n   */\n  this.checked_ = false;\n\n  /**\n   * Is this menu item currently highlighted.\n   * @type {boolean}\n   * @private\n   */\n  this.highlight_ = false;\n\n  /**\n   * Bound function to call when this menu item is clicked.\n   * @type {Function}\n   * @private\n   */\n  this.actionHandler_ = null;\n};\n\n\n/**\n * Creates the menuitem's DOM.\n * @return {!Element} Completed DOM.\n */\nBlockly.MenuItem.prototype.createDom = function() {\n  var element = document.createElement('div');\n  element.id = Blockly.utils.IdGenerator.getNextUniqueId();\n  this.element_ = element;\n\n  // Set class and style\n  // goog-menuitem* is deprecated, use blocklyMenuItem*.  May 2020.\n  element.className = 'blocklyMenuItem goog-menuitem ' +\n      (this.enabled_ ? '' : 'blocklyMenuItemDisabled goog-menuitem-disabled ') +\n      (this.checked_ ? 'blocklyMenuItemSelected goog-option-selected ' : '') +\n      (this.highlight_ ?\n        'blocklyMenuItemHighlight goog-menuitem-highlight ' : '') +\n      (this.rightToLeft_ ? 'blocklyMenuItemRtl goog-menuitem-rtl ' : '');\n\n  var content = document.createElement('div');\n  content.className = 'blocklyMenuItemContent goog-menuitem-content';\n  // Add a checkbox for checkable menu items.\n  if (this.checkable_) {\n    var checkbox = document.createElement('div');\n    checkbox.className = 'blocklyMenuItemCheckbox goog-menuitem-checkbox';\n    content.appendChild(checkbox);\n  }\n\n  var contentDom = /** @type {!HTMLElement} */ (this.content_);\n  if (typeof this.content_ == 'string') {\n    contentDom = document.createTextNode(this.content_);\n  }\n  content.appendChild(contentDom);\n  element.appendChild(content);\n\n  // Initialize ARIA role and state.\n  if (this.roleName_) {\n    Blockly.utils.aria.setRole(element, this.roleName_);\n  }\n  Blockly.utils.aria.setState(element, Blockly.utils.aria.State.SELECTED,\n      (this.checkable_ && this.checked_) || false);\n  Blockly.utils.aria.setState(element, Blockly.utils.aria.State.DISABLED,\n      !this.enabled_);\n\n  return element;\n};\n\n/**\n * Dispose of this menu item.\n */\nBlockly.MenuItem.prototype.dispose = function() {\n  this.element_ = null;\n};\n\n/**\n * Gets the menu item's element.\n * @return {Element} The DOM element.\n * @package\n */\nBlockly.MenuItem.prototype.getElement = function() {\n  return this.element_;\n};\n\n/**\n * Gets the unique ID for this menu item.\n * @return {string} Unique component ID.\n * @package\n */\nBlockly.MenuItem.prototype.getId = function() {\n  return this.element_.id;\n};\n\n/**\n * Gets the value associated with the menu item.\n * @return {*} value Value associated with the menu item.\n * @package\n */\nBlockly.MenuItem.prototype.getValue = function() {\n  return this.value_;\n};\n\n/**\n * Set menu item's rendering direction.\n * @param {boolean} rtl True if RTL, false if LTR.\n * @package\n */\nBlockly.MenuItem.prototype.setRightToLeft = function(rtl) {\n  this.rightToLeft_ = rtl;\n};\n\n/**\n * Set the menu item's accessibility role.\n * @param {!Blockly.utils.aria.Role} roleName Role name.\n * @package\n */\nBlockly.MenuItem.prototype.setRole = function(roleName) {\n  this.roleName_ = roleName;\n};\n\n/**\n * Sets the menu item to be checkable or not. Set to true for menu items\n * that represent checkable options.\n * @param {boolean} checkable Whether the menu item is checkable.\n * @package\n */\nBlockly.MenuItem.prototype.setCheckable = function(checkable) {\n  this.checkable_ = checkable;\n};\n\n/**\n * Checks or unchecks the component.\n * @param {boolean} checked Whether to check or uncheck the component.\n * @package\n */\nBlockly.MenuItem.prototype.setChecked = function(checked) {\n  this.checked_ = checked;\n};\n\n/**\n * Highlights or unhighlights the component.\n * @param {boolean} highlight Whether to highlight or unhighlight the component.\n * @package\n */\nBlockly.MenuItem.prototype.setHighlighted = function(highlight) {\n  this.highlight_ = highlight;\n\n  var el = this.getElement();\n  if (el && this.isEnabled()) {\n    // goog-menuitem-highlight is deprecated, use blocklyMenuItemHighlight.\n    // May 2020.\n    var name = 'blocklyMenuItemHighlight';\n    var nameDep = 'goog-menuitem-highlight';\n    if (highlight) {\n      Blockly.utils.dom.addClass(el, name);\n      Blockly.utils.dom.addClass(el, nameDep);\n    } else {\n      Blockly.utils.dom.removeClass(el, name);\n      Blockly.utils.dom.removeClass(el, nameDep);\n    }\n  }\n};\n\n/**\n * Returns true if the menu item is enabled, false otherwise.\n * @return {boolean} Whether the menu item is enabled.\n * @package\n */\nBlockly.MenuItem.prototype.isEnabled = function() {\n  return this.enabled_;\n};\n\n/**\n * Enables or disables the menu item.\n * @param {boolean} enabled Whether to enable or disable the menu item.\n * @package\n */\nBlockly.MenuItem.prototype.setEnabled = function(enabled) {\n  this.enabled_ = enabled;\n};\n\n/**\n * Performs the appropriate action when the menu item is activated\n * by the user.\n * @package\n */\nBlockly.MenuItem.prototype.performAction = function() {\n  if (this.isEnabled() && this.actionHandler_) {\n    this.actionHandler_(this);\n  }\n};\n\n/**\n * Set the handler that's called when the menu item is activated by the user.\n * `obj` will be used as the 'this' object in the function when called.\n * @param {function(!Blockly.MenuItem)} fn The handler.\n * @param {!Object} obj Used as the 'this' object in fn when called.\n * @package\n */\nBlockly.MenuItem.prototype.onAction = function(fn, obj) {\n  this.actionHandler_ = fn.bind(obj);\n};\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Functionality for the right-click context menus.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.ContextMenu\n * @namespace\n */\ngoog.provide('Blockly.ContextMenu');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockCreate');\ngoog.require('Blockly.Menu');\ngoog.require('Blockly.MenuItem');\ngoog.require('Blockly.Msg');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Rect');\ngoog.require('Blockly.utils.userAgent');\ngoog.require('Blockly.Xml');\n\n\n/**\n * Which block is the context menu attached to?\n * @type {Blockly.Block}\n */\nBlockly.ContextMenu.currentBlock = null;\n\n/**\n * Menu object.\n * @type {Blockly.Menu}\n * @private\n */\nBlockly.ContextMenu.menu_ = null;\n\n/**\n * Construct the menu based on the list of options and show the menu.\n * @param {!Event} e Mouse event.\n * @param {!Array.<!Object>} options Array of menu options.\n * @param {boolean} rtl True if RTL, false if LTR.\n */\nBlockly.ContextMenu.show = function(e, options, rtl) {\n  Blockly.WidgetDiv.show(Blockly.ContextMenu, rtl, Blockly.ContextMenu.dispose);\n  if (!options.length) {\n    Blockly.ContextMenu.hide();\n    return;\n  }\n  var menu = Blockly.ContextMenu.populate_(options, rtl);\n  Blockly.ContextMenu.menu_ = menu;\n\n  Blockly.ContextMenu.position_(menu, e, rtl);\n  // 1ms delay is required for focusing on context menus because some other\n  // mouse event is still waiting in the queue and clears focus.\n  setTimeout(function() {menu.focus();}, 1);\n  Blockly.ContextMenu.currentBlock = null;  // May be set by Blockly.Block.\n};\n\n/**\n * Create the context menu object and populate it with the given options.\n * @param {!Array.<!Object>} options Array of menu options.\n * @param {boolean} rtl True if RTL, false if LTR.\n * @return {!Blockly.Menu} The menu that will be shown on right click.\n * @private\n */\nBlockly.ContextMenu.populate_ = function(options, rtl) {\n  /* Here's what one option object looks like:\n    {text: 'Make It So',\n     enabled: true,\n     callback: Blockly.MakeItSo}\n  */\n  var menu = new Blockly.Menu();\n  menu.setRole(Blockly.utils.aria.Role.MENU);\n  for (var i = 0, option; (option = options[i]); i++) {\n    var menuItem = new Blockly.MenuItem(option.text);\n    menuItem.setRightToLeft(rtl);\n    menuItem.setRole(Blockly.utils.aria.Role.MENUITEM);\n    menu.addChild(menuItem);\n    menuItem.setEnabled(option.enabled);\n    if (option.enabled) {\n      var actionHandler = function(_menuItem) {\n        var option = this;\n        Blockly.ContextMenu.hide();\n        option.callback(option.scope);\n      };\n      menuItem.onAction(actionHandler, option);\n    }\n  }\n  return menu;\n};\n\n/**\n * Add the menu to the page and position it correctly.\n * @param {!Blockly.Menu} menu The menu to add and position.\n * @param {!Event} e Mouse event for the right click that is making the context\n *     menu appear.\n * @param {boolean} rtl True if RTL, false if LTR.\n * @private\n */\nBlockly.ContextMenu.position_ = function(menu, e, rtl) {\n  // Record windowSize and scrollOffset before adding menu.\n  var viewportBBox = Blockly.utils.getViewportBBox();\n  // This one is just a point, but we'll pretend that it's a rect so we can use\n  // some helper functions.\n  var anchorBBox = new Blockly.utils.Rect(\n      e.clientY + viewportBBox.top,\n      e.clientY + viewportBBox.top,\n      e.clientX + viewportBBox.left,\n      e.clientX + viewportBBox.left\n  );\n\n  Blockly.ContextMenu.createWidget_(menu);\n  var menuSize = menu.getSize();\n\n  if (rtl) {\n    anchorBBox.left += menuSize.width;\n    anchorBBox.right += menuSize.width;\n    viewportBBox.left += menuSize.width;\n    viewportBBox.right += menuSize.width;\n  }\n\n  Blockly.WidgetDiv.positionWithAnchor(viewportBBox, anchorBBox, menuSize, rtl);\n  // Calling menuDom.focus() has to wait until after the menu has been placed\n  // correctly.  Otherwise it will cause a page scroll to get the misplaced menu\n  // in view.  See issue #1329.\n  menu.focus();\n};\n\n/**\n * Create and render the menu widget inside Blockly's widget div.\n * @param {!Blockly.Menu} menu The menu to add to the widget div.\n * @private\n */\nBlockly.ContextMenu.createWidget_ = function(menu) {\n  var div = Blockly.WidgetDiv.DIV;\n  menu.render(div);\n  var menuDom = menu.getElement();\n  Blockly.utils.dom.addClass(\n      /** @type {!Element} */ (menuDom), 'blocklyContextMenu');\n  // Prevent system context menu when right-clicking a Blockly context menu.\n  Blockly.bindEventWithChecks_(/** @type {!EventTarget} */ (menuDom),\n      'contextmenu', null, Blockly.utils.noEvent);\n  // Focus only after the initial render to avoid issue #1329.\n  menu.focus();\n};\n\n/**\n * Hide the context menu.\n */\nBlockly.ContextMenu.hide = function() {\n  Blockly.WidgetDiv.hideIfOwner(Blockly.ContextMenu);\n  Blockly.ContextMenu.currentBlock = null;\n};\n\n/**\n * Dispose of the menu.\n */\nBlockly.ContextMenu.dispose = function() {\n  if (Blockly.ContextMenu.menu_) {\n    Blockly.ContextMenu.menu_.dispose();\n    Blockly.ContextMenu.menu_ = null;\n  }\n};\n\n/**\n * Create a callback function that creates and configures a block,\n *   then places the new block next to the original.\n * @param {!Blockly.Block} block Original block.\n * @param {!Element} xml XML representation of new block.\n * @return {!Function} Function that creates a block.\n */\nBlockly.ContextMenu.callbackFactory = function(block, xml) {\n  return function() {\n    Blockly.Events.disable();\n    try {\n      var newBlock = Blockly.Xml.domToBlock(xml, block.workspace);\n      // Move the new block next to the old block.\n      var xy = block.getRelativeToSurfaceXY();\n      if (block.RTL) {\n        xy.x -= Blockly.SNAP_RADIUS;\n      } else {\n        xy.x += Blockly.SNAP_RADIUS;\n      }\n      xy.y += Blockly.SNAP_RADIUS * 2;\n      newBlock.moveBy(xy.x, xy.y);\n    } finally {\n      Blockly.Events.enable();\n    }\n    if (Blockly.Events.isEnabled() && !newBlock.isShadow()) {\n      Blockly.Events.fire(new Blockly.Events.BlockCreate(newBlock));\n    }\n    newBlock.select();\n  };\n};\n\n// Helper functions for creating context menu options.\n\n/**\n * Make a context menu option for deleting the current workspace comment.\n * @param {!Blockly.WorkspaceCommentSvg} comment The workspace comment where the\n *     right-click originated.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.commentDeleteOption = function(comment) {\n  var deleteOption = {\n    text: Blockly.Msg['REMOVE_COMMENT'],\n    enabled: true,\n    callback: function() {\n      Blockly.Events.setGroup(true);\n      comment.dispose(true, true);\n      Blockly.Events.setGroup(false);\n    }\n  };\n  return deleteOption;\n};\n\n/**\n * Make a context menu option for duplicating the current workspace comment.\n * @param {!Blockly.WorkspaceCommentSvg} comment The workspace comment where the\n *     right-click originated.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.commentDuplicateOption = function(comment) {\n  var duplicateOption = {\n    text: Blockly.Msg['DUPLICATE_COMMENT'],\n    enabled: true,\n    callback: function() {\n      Blockly.duplicate(comment);\n    }\n  };\n  return duplicateOption;\n};\n\n/**\n * Make a context menu option for adding a comment on the workspace.\n * @param {!Blockly.WorkspaceSvg} ws The workspace where the right-click\n *     originated.\n * @param {!Event} e The right-click mouse event.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n * @suppress {strictModuleDepCheck,checkTypes} Suppress checks while workspace\n *     comments are not bundled in.\n */\nBlockly.ContextMenu.workspaceCommentOption = function(ws, e) {\n  if (!Blockly.WorkspaceCommentSvg) {\n    throw Error('Missing require for Blockly.WorkspaceCommentSvg');\n  }\n  // Helper function to create and position a comment correctly based on the\n  // location of the mouse event.\n  var addWsComment = function() {\n    var comment = new Blockly.WorkspaceCommentSvg(\n        ws, Blockly.Msg['WORKSPACE_COMMENT_DEFAULT_TEXT'],\n        Blockly.WorkspaceCommentSvg.DEFAULT_SIZE,\n        Blockly.WorkspaceCommentSvg.DEFAULT_SIZE);\n\n    var injectionDiv = ws.getInjectionDiv();\n    // Bounding rect coordinates are in client coordinates, meaning that they\n    // are in pixels relative to the upper left corner of the visible browser\n    // window.  These coordinates change when you scroll the browser window.\n    var boundingRect = injectionDiv.getBoundingClientRect();\n\n    // The client coordinates offset by the injection div's upper left corner.\n    var clientOffsetPixels = new Blockly.utils.Coordinate(\n        e.clientX - boundingRect.left, e.clientY - boundingRect.top);\n\n    // The offset in pixels between the main workspace's origin and the upper\n    // left corner of the injection div.\n    var mainOffsetPixels = ws.getOriginOffsetInPixels();\n\n    // The position of the new comment in pixels relative to the origin of the\n    // main workspace.\n    var finalOffset = Blockly.utils.Coordinate.difference(clientOffsetPixels,\n        mainOffsetPixels);\n    // The position of the new comment in main workspace coordinates.\n    finalOffset.scale(1 / ws.scale);\n\n    var commentX = finalOffset.x;\n    var commentY = finalOffset.y;\n    comment.moveBy(commentX, commentY);\n    if (ws.rendered) {\n      comment.initSvg();\n      comment.render();\n      comment.select();\n    }\n  };\n\n  var wsCommentOption = {\n    // Foreign objects don't work in IE.  Don't let the user create comments\n    // that they won't be able to edit.\n    enabled: !Blockly.utils.userAgent.IE\n  };\n  wsCommentOption.text = Blockly.Msg['ADD_COMMENT'];\n  wsCommentOption.callback = function() {\n    addWsComment();\n  };\n  return wsCommentOption;\n};\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Registers default context menu items.\n * @author maribethb@google.com (Maribeth Bottorff)\n */\n'use strict';\n\n/**\n * @name Blockly.ContextMenuItems\n * @namespace\n */\ngoog.provide('Blockly.ContextMenuItems');\n\ngoog.require('Blockly.constants');\n\ngoog.requireType('Blockly.BlockSvg');\n\n/** Option to undo previous action. */\nBlockly.ContextMenuItems.registerUndo = function() {\n  /** @type {!Blockly.ContextMenuRegistry.RegistryItem} */\n  var undoOption = {\n    displayText: function() {\n      return Blockly.Msg['UNDO'];\n    },\n    preconditionFn: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      if (scope.workspace.getUndoStack().length > 0) {\n        return 'enabled';\n      }\n      return 'disabled';\n    },\n    callback: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      scope.workspace.undo(false);\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,\n    id: 'undoWorkspace',\n    weight: 0,\n  };\n  Blockly.ContextMenuRegistry.registry.register(undoOption);\n};\n\n/** Option to redo previous action. */\nBlockly.ContextMenuItems.registerRedo = function() {\n  /** @type {!Blockly.ContextMenuRegistry.RegistryItem} */\n  var redoOption = {\n    displayText: function() { return Blockly.Msg['REDO']; },\n    preconditionFn: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      if (scope.workspace.getRedoStack().length > 0) {\n        return 'enabled';\n      }\n      return 'disabled';\n    },\n    callback: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      scope.workspace.undo(true);\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,\n    id: 'redoWorkspace',\n    weight: 0,\n  };\n  Blockly.ContextMenuRegistry.registry.register(redoOption);\n};\n    \n/** Option to clean up blocks. */\nBlockly.ContextMenuItems.registerCleanup = function() {\n  /** @type {!Blockly.ContextMenuRegistry.RegistryItem} */\n  var cleanOption = {\n    displayText: function() {\n      return Blockly.Msg['CLEAN_UP'];\n    },\n    preconditionFn: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      if (scope.workspace.isMovable()) {\n        if (scope.workspace.getTopBlocks(false).length > 1) {\n          return 'enabled';\n        }\n        return 'disabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      scope.workspace.cleanUp();\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,\n    id: 'cleanWorkspace',\n    weight: 0,\n  };\n  Blockly.ContextMenuRegistry.registry.register(cleanOption);\n};\n  \n/**\n * Creates a callback to collapse or expand top blocks.\n * @param {boolean} shouldCollapse Whether a block should collapse.\n * @param {!Array<Blockly.BlockSvg>} topBlocks Top blocks in the workspace.\n * @private\n */\nBlockly.ContextMenuItems.toggleOption_ = function(shouldCollapse, topBlocks) {\n  var DELAY = 10;\n  var ms = 0;\n  for (var i = 0; i < topBlocks.length; i++) {\n    var block = topBlocks[i];\n    while (block) {\n      setTimeout(block.setCollapsed.bind(block, shouldCollapse), ms);\n      block = block.getNextBlock();\n      ms += DELAY;\n    }\n  }\n};\n\n/** Option to collapse all blocks. */\nBlockly.ContextMenuItems.registerCollapse = function() {\n  /** @type {!Blockly.ContextMenuRegistry.RegistryItem} */\n  var collapseOption = {\n    displayText:  function() {\n      return Blockly.Msg['COLLAPSE_ALL'];\n    },\n    preconditionFn:  function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      if (scope.workspace.options.collapse) {\n        var topBlocks = scope.workspace.getTopBlocks(false);\n        for (var i = 0; i < topBlocks.length; i++) {\n          var block = topBlocks[i];\n          while (block) {\n            if (!block.isCollapsed()) {\n              return 'enabled';\n            }\n            block = block.getNextBlock();\n          }\n        }\n        return 'disabled';\n      }\n      return 'hidden';\n    },\n    callback:  function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      Blockly.ContextMenuItems.toggleOption_(true, scope.workspace.getTopBlocks(true));\n    },\n    scopeType:  Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,\n    id:  'collapseWorkspace',\n    weight:  0,\n  };\n  Blockly.ContextMenuRegistry.registry.register(collapseOption);\n};\n  \n/** Option to expand all blocks. */\nBlockly.ContextMenuItems.registerExpand = function() {\n  /** @type {!Blockly.ContextMenuRegistry.RegistryItem} */\n  var expandOption = {\n    displayText: function() {\n      return Blockly.Msg['EXPAND_ALL'];\n    },\n    preconditionFn: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      if (scope.workspace.options.collapse) {\n        var topBlocks = scope.workspace.getTopBlocks(false);\n        for (var i = 0; i < topBlocks.length; i++) {\n          var block = topBlocks[i];\n          while (block) {\n            if (block.isCollapsed()) {\n              return 'enabled';\n            }\n            block = block.getNextBlock();\n          }\n        }\n        return 'disabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      Blockly.ContextMenuItems.toggleOption_(false, scope.workspace.getTopBlocks(true));\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,\n    id: 'expandWorkspace',\n    weight: 0,\n  };\n  Blockly.ContextMenuRegistry.registry.register(expandOption);\n};\n  \n/**\n * Adds a block and its children to a list of deletable blocks.\n * @param {!Blockly.BlockSvg} block to delete.\n * @param {!Array.<!Blockly.BlockSvg>} deleteList list of blocks that can be deleted. This will be\n *    modifed in place with the given block and its descendants.\n * @private\n */\nBlockly.ContextMenuItems.addDeletableBlocks_ = function(block, deleteList) {\n  if (block.isDeletable()) {\n    Array.prototype.push.apply(deleteList, block.getDescendants(false));\n  } else {\n    var children = /** @type !Array.<!Blockly.BlockSvg> */ (block.getChildren(false));\n    for (var i = 0; i < children.length; i++) {\n      Blockly.ContextMenuItems.addDeletableBlocks_(children[i], deleteList);\n    }\n  }\n};\n  \n/**\n * Constructs a list of blocks that can be deleted in the given workspace.\n * @param {!Blockly.WorkspaceSvg} workspace to delete all blocks from.\n * @return {!Array.<!Blockly.BlockSvg>} list of blocks to delete.\n * @private\n */\nBlockly.ContextMenuItems.getDeletableBlocks_ = function(workspace) {\n  var deleteList = [];\n  var topBlocks = workspace.getTopBlocks(true);\n  for (var i = 0; i < topBlocks.length; i++) {\n    Blockly.ContextMenuItems.addDeletableBlocks_(topBlocks[i], deleteList);\n  }\n  return deleteList;\n};\n    \n/** Deletes the given blocks. Used to delete all blocks in the workspace.\n * @param {!Array.<!Blockly.BlockSvg>} deleteList list of blocks to delete.\n * @param {string} eventGroup event group id with which all delete events should be associated.\n * @private\n */\nBlockly.ContextMenuItems.deleteNext_ = function(deleteList, eventGroup) {\n  var DELAY = 10;\n  Blockly.Events.setGroup(eventGroup);\n  var block = deleteList.shift();\n  if (block) {\n    if (block.workspace) {\n      block.dispose(false, true);\n      setTimeout(Blockly.ContextMenuItems.deleteNext_, DELAY, deleteList, eventGroup);\n    } else {\n      Blockly.ContextMenuItems.deleteNext_(deleteList, eventGroup);\n    }\n  }\n  Blockly.Events.setGroup(false);\n};\n  \n/** Option to delete all blocks. */\nBlockly.ContextMenuItems.registerDeleteAll = function() {\n  /** @type {!Blockly.ContextMenuRegistry.RegistryItem} */\n  var deleteOption = {\n    displayText: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      if (!scope.workspace) {\n        return;\n      }\n      var deletableBlocksLength =\n          Blockly.ContextMenuItems.getDeletableBlocks_(scope.workspace).length;\n      if (deletableBlocksLength == 1) {\n        return Blockly.Msg['DELETE_BLOCK'];\n      } else {\n        return Blockly.Msg['DELETE_X_BLOCKS'].replace('%1', String(deletableBlocksLength));\n      }\n    },\n    preconditionFn: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      if (!scope.workspace) {\n        return;\n      }\n      var deletableBlocksLength =\n         Blockly.ContextMenuItems.getDeletableBlocks_(scope.workspace).length;\n      return deletableBlocksLength > 0 ? 'enabled' : 'disabled';\n    },\n    callback: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      if (!scope.workspace) {\n        return;\n      }\n      scope.workspace.cancelCurrentGesture();\n      var deletableBlocks = Blockly.ContextMenuItems.getDeletableBlocks_(scope.workspace);\n      var eventGroup = Blockly.utils.genUid();\n      if (deletableBlocks.length < 2) {\n        Blockly.ContextMenuItems.deleteNext_(deletableBlocks, eventGroup);\n      } else {\n        Blockly.confirm(\n            Blockly.Msg['DELETE_ALL_BLOCKS'].replace('%1', deletableBlocks.length),\n            function(ok) {\n              if (ok) {\n                Blockly.ContextMenuItems.deleteNext_(deletableBlocks, eventGroup);\n              }\n            });\n      }\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,\n    id: 'workspaceDelete',\n    weight: 0,\n  };\n  Blockly.ContextMenuRegistry.registry.register(deleteOption);\n};\n\n/**\n * Registers all workspace-scoped context menu items.\n * @private\n */\nBlockly.ContextMenuItems.registerWorkspaceOptions_ = function() {\n  Blockly.ContextMenuItems.registerUndo();\n  Blockly.ContextMenuItems.registerRedo();\n  Blockly.ContextMenuItems.registerCleanup();\n  Blockly.ContextMenuItems.registerCollapse();\n  Blockly.ContextMenuItems.registerExpand();\n  Blockly.ContextMenuItems.registerDeleteAll();\n};\n\n/** Option to duplicate a block. */\nBlockly.ContextMenuItems.registerDuplicate = function() {\n  /** @type {!Blockly.ContextMenuRegistry.RegistryItem} */\n  var duplicateOption = {\n    displayText: function() {\n      return Blockly.Msg['DUPLICATE_BLOCK'];\n    },\n    preconditionFn: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      var block = scope.block;\n      if (!block.isInFlyout && block.isDeletable() && block.isMovable()) {\n        if (block.isDuplicatable()) {\n          return 'enabled';\n        }\n        return 'disabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      if (scope.block) {\n        Blockly.duplicate(scope.block);\n      }\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'blockDuplicate',\n    weight: 0,\n  };\n  Blockly.ContextMenuRegistry.registry.register(duplicateOption);\n};\n\n/** Option to add or remove block-level comment. */\nBlockly.ContextMenuItems.registerComment = function() {\n  /** @type {!Blockly.ContextMenuRegistry.RegistryItem} */\n  var commentOption = {\n    displayText: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      if (scope.block.getCommentIcon()) {\n        // If there's already a comment,  option is to remove.\n        return Blockly.Msg['REMOVE_COMMENT'];\n      }\n      // If there's no comment yet, option is to add.\n      return Blockly.Msg['ADD_COMMENT'];\n    },\n    preconditionFn: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      var block = scope.block;\n      // IE doesn't support necessary features for comment editing.\n      if (!Blockly.utils.userAgent.IE && !block.isInFlyout && block.workspace.options.comments &&\n        !block.isCollapsed() && block.isEditable()) {\n        return 'enabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      var block = scope.block;\n      if (block.getCommentIcon()) {\n        block.setCommentText(null);\n      } else {\n        block.setCommentText('');\n      }\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'blockComment',\n    weight: 0,\n  };\n  Blockly.ContextMenuRegistry.registry.register(commentOption);\n};\n\n/** Option to inline variables. */\nBlockly.ContextMenuItems.registerInline = function() {\n  /** @type {!Blockly.ContextMenuRegistry.RegistryItem} */\n  var inlineOption = {\n    displayText: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      return (scope.block.getInputsInline()) ?\n          Blockly.Msg['EXTERNAL_INPUTS'] : Blockly.Msg['INLINE_INPUTS'];\n    },\n    preconditionFn: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      var block = scope.block;\n      if (!block.isInFlyout && block.isMovable() && !block.isCollapsed()) {\n        for (var i = 1; i < block.inputList.length; i++) {\n          // Only display this option if there are two value or dummy inputs next to each other.\n          if (block.inputList[i - 1].type != Blockly.NEXT_STATEMENT &&\n              block.inputList[i].type != Blockly.NEXT_STATEMENT) {\n            return 'enabled';\n          }\n        }\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      scope.block.setInputsInline(!scope.block.getInputsInline());\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'blockInline',\n    weight: 0,\n  };\n  Blockly.ContextMenuRegistry.registry.register(inlineOption);\n};\n\n/** Option to collapse or expand a block. */\nBlockly.ContextMenuItems.registerCollapseExpandBlock = function() {\n  /** @type {!Blockly.ContextMenuRegistry.RegistryItem} */\n  var collapseExpandOption = {\n    displayText: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      if (scope.block.isCollapsed()) {\n        return Blockly.Msg['EXPAND_BLOCK'];\n      }\n      return Blockly.Msg['COLLAPSE_BLOCK'];\n    },\n    preconditionFn: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      var block = scope.block;\n      if (!block.isInFlyout && block.isMovable()) {\n        return 'enabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      scope.block.setCollapsed(!scope.block.isCollapsed());\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'blockCollapseExpand',\n    weight: 0,\n  };\n  Blockly.ContextMenuRegistry.registry.register(collapseExpandOption);\n};\n\n/** Option to disable or enable a block. */\nBlockly.ContextMenuItems.registerDisable = function() {\n  /** @type {!Blockly.ContextMenuRegistry.RegistryItem} */\n  var disableOption = {\n    displayText: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      return (scope.block.isEnabled()) ?\n          Blockly.Msg['DISABLE_BLOCK'] : Blockly.Msg['ENABLE_BLOCK'];\n    },\n    preconditionFn: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      var block = scope.block;\n      if (!block.isInFlyout && block.workspace.options.disable && block.isEditable()) {\n        if (block.getInheritedDisabled()) {\n          return 'disabled';\n        }\n        return 'enabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      var block = scope.block;\n      var group = Blockly.Events.getGroup();\n      if (!group) {\n        Blockly.Events.setGroup(true);\n      }\n      block.setEnabled(!block.isEnabled());\n      if (!group) {\n        Blockly.Events.setGroup(false);\n      }\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'blockDisable',\n    weight: 0,\n  };\n  Blockly.ContextMenuRegistry.registry.register(disableOption);\n};\n\n/** Option to delete a block. */\nBlockly.ContextMenuItems.registerDelete = function() {\n  /** @type {!Blockly.ContextMenuRegistry.RegistryItem} */\n  var deleteOption = {\n    displayText: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      var block = scope.block;\n      // Count the number of blocks that are nested in this block.\n      var descendantCount = block.getDescendants(false).length;\n      var nextBlock = block.getNextBlock();\n      if (nextBlock) {\n        // Blocks in the current stack would survive this block's deletion.\n        descendantCount -= nextBlock.getDescendants(false).length;\n      }\n      return (descendantCount == 1) ? Blockly.Msg['DELETE_BLOCK'] :\n          Blockly.Msg['DELETE_X_BLOCKS'].replace('%1', String(descendantCount));\n    },\n    preconditionFn: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      if (!scope.block.isInFlyout && scope.block.isDeletable()) {\n        return 'enabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      Blockly.Events.setGroup(true);\n      scope.block.dispose(true, true);\n      Blockly.Events.setGroup(false);\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'blockDelete',\n    weight: 0,\n  };\n  Blockly.ContextMenuRegistry.registry.register(deleteOption);\n};\n\n/** Option to open help for a block. */\nBlockly.ContextMenuItems.registerHelp = function() {\n  /** @type {!Blockly.ContextMenuRegistry.RegistryItem} */\n  var helpOption = {\n    displayText: function() {\n      return Blockly.Msg['HELP'];\n    },\n    preconditionFn: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      var block = scope.block;\n      var url = (typeof block.helpUrl == 'function') ?\n          block.helpUrl() : block.helpUrl;\n      if (url) {\n        return 'enabled';\n      }\n      return 'hidden';\n    },\n    callback: function(/** @type {!Blockly.ContextMenuRegistry.Scope} */ scope) {\n      scope.block.showHelp();\n    },\n    scopeType: Blockly.ContextMenuRegistry.ScopeType.BLOCK,\n    id: 'blockHelp',\n    weight: 0,\n  };\n  Blockly.ContextMenuRegistry.registry.register(helpOption);\n};\n\n/**\n * Registers all block-scoped context menu items.\n * @private\n */\nBlockly.ContextMenuItems.registerBlockOptions_ = function() {\n  Blockly.ContextMenuItems.registerDuplicate();\n  Blockly.ContextMenuItems.registerComment();\n  Blockly.ContextMenuItems.registerInline();\n  Blockly.ContextMenuItems.registerCollapseExpandBlock();\n  Blockly.ContextMenuItems.registerDisable();\n  Blockly.ContextMenuItems.registerDelete();\n  Blockly.ContextMenuItems.registerHelp();\n};\n\n/**\n * Registers all default context menu items. This should be called once per instance of\n * ContextMenuRegistry.\n * @package\n */\nBlockly.ContextMenuItems.registerDefaultOptions = function() {\n  Blockly.ContextMenuItems.registerWorkspaceOptions_();\n  Blockly.ContextMenuItems.registerBlockOptions_();\n};\n  \n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Registry for context menu option items.\n * @author maribethb@google.com (Maribeth Bottorff)\n */\n'use strict';\n\n/**\n * @name Blockly.ContextMenuRegistry\n * @namespace\n */\ngoog.provide('Blockly.ContextMenuRegistry');\n\ngoog.require('Blockly.ContextMenuItems');\n\n/**\n * Class for the registry of context menu items. This is intended to be a singleton. You should\n * not create a new instance, and only access this class from Blockly.ContextMenuRegistry.registry.\n * @constructor\n */\nBlockly.ContextMenuRegistry = function() {\n\n  // Singleton instance should be registered once.\n  Blockly.ContextMenuRegistry.registry = this;\n\n  /**\n   * Registry of all registered RegistryItems, keyed by id.\n   * @type {!Object<string, Blockly.ContextMenuRegistry.RegistryItem>}\n   * @private\n   */\n  this.registry_ = {};\n  Blockly.ContextMenuItems.registerDefaultOptions();\n};\n\n/**\n * Where this menu item should be rendered. If the menu item should be rendered in multiple\n * scopes, e.g. on both a block and a workspace, it should be registered for each scope.\n * @enum {string}\n */\nBlockly.ContextMenuRegistry.ScopeType = {\n  BLOCK: 'block',\n  WORKSPACE: 'workspace',\n};\n\n/**\n * The actual workspace/block where the menu is being rendered. This is passed to callback and\n * displayText functions that depend on this information.\n * @typedef {{\n *    block: (Blockly.BlockSvg|undefined),\n *    workspace: (Blockly.WorkspaceSvg|undefined)\n * }}\n */\nBlockly.ContextMenuRegistry.Scope;\n\n/**\n * A menu item as entered in the registry.\n * @typedef {{\n *    callback: function(!Blockly.ContextMenuRegistry.Scope),\n *    scopeType: !Blockly.ContextMenuRegistry.ScopeType,\n *    displayText: ((function(!Blockly.ContextMenuRegistry.Scope):string)|string),\n *    preconditionFn: function(!Blockly.ContextMenuRegistry.Scope):string,\n *    weight: number,\n *    id: string\n * }}\n*/\nBlockly.ContextMenuRegistry.RegistryItem;\n\n/**\n * A menu item as presented to contextmenu.js.\n * @typedef {{\n *    text: string,\n *    enabled: boolean,\n *    callback: function(!Blockly.ContextMenuRegistry.Scope),\n *    scope: !Blockly.ContextMenuRegistry.Scope,\n *    weight: number\n * }}\n */\nBlockly.ContextMenuRegistry.ContextMenuOption;\n\n/**\n * Singleton instance of this class. All interactions with this class should be done on this object.\n * @type {?Blockly.ContextMenuRegistry}\n */\nBlockly.ContextMenuRegistry.registry = null;\n\n/**\n * Registers a RegistryItem.\n * @param {!Blockly.ContextMenuRegistry.RegistryItem} item Context menu item to register.\n * @throws {Error} if an item with the given id already exists.\n */\nBlockly.ContextMenuRegistry.prototype.register = function(item) {\n  if (this.registry_[item.id]) {\n    throw Error('Menu item with id \"' + item.id + '\" is already registered.');\n  }\n  this.registry_[item.id] = item;\n};\n\n/**\n * Unregisters a RegistryItem with the given id.\n * @param {string} id The id of the RegistryItem to remove.\n * @throws {Error} if an item with the given id does not exist.\n */\nBlockly.ContextMenuRegistry.prototype.unregister = function(id) {\n  if (this.registry_[id]) {\n    delete this.registry_[id];\n  } else {\n    throw new Error('Menu item with id \"' + id + '\" not found.');\n  }\n};\n\n/**\n * @param {string} id The id of the RegistryItem to get.\n * @returns {?Blockly.ContextMenuRegistry.RegistryItem} RegistryItem or null if not found\n */\nBlockly.ContextMenuRegistry.prototype.getItem = function(id) {\n  if (this.registry_[id]) {\n    return this.registry_[id];\n  }\n  return null;\n};\n\n/**\n * Gets the valid context menu options for the given scope type (e.g. block or workspace) and scope.\n * Blocks are only shown if the preconditionFn shows they should not be hidden.\n * @param {!Blockly.ContextMenuRegistry.ScopeType} scopeType Type of scope where menu should be\n *     shown (e.g. on a block or on a workspace)\n * @param {!Blockly.ContextMenuRegistry.Scope} scope Current scope of context menu\n *     (i.e., the exact workspace or block being clicked on)\n * @returns {!Array.<!Blockly.ContextMenuRegistry.ContextMenuOption>} the list of ContextMenuOptions\n */\nBlockly.ContextMenuRegistry.prototype.getContextMenuOptions = function(scopeType, scope) {\n  var menuOptions = [];\n  var registry = this.registry_;\n  Object.keys(registry).forEach(function(id) {\n    var item = registry[id];\n    if (scopeType == item.scopeType) {\n      var precondition = item.preconditionFn(scope);\n      if (precondition != 'hidden') {\n        var displayText = typeof item.displayText == 'function' ?\n                            item.displayText(scope) : item.displayText;\n        /** @type {!Blockly.ContextMenuRegistry.ContextMenuOption} */\n        var menuOption = {\n          text: displayText,\n          enabled: (precondition == 'enabled'),\n          callback: item.callback,\n          scope: scope,\n          weight: item.weight,\n        };\n        menuOptions.push(menuOption);\n      }\n    }\n  });\n  menuOptions.sort(function(a, b) {\n    return a.weight - b.weight;\n  });\n  return menuOptions;\n};\n\n// Creates and assigns the singleton instance.\nnew Blockly.ContextMenuRegistry();\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Components for creating connections between blocks.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.RenderedConnection');\n\ngoog.require('Blockly.Connection');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.deprecation');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for a connection between blocks that may be rendered on screen.\n * @param {!Blockly.BlockSvg} source The block establishing this connection.\n * @param {number} type The type of the connection.\n * @extends {Blockly.Connection}\n * @constructor\n */\nBlockly.RenderedConnection = function(source, type) {\n  Blockly.RenderedConnection.superClass_.constructor.call(this, source, type);\n\n  /**\n   * Connection database for connections of this type on the current workspace.\n   * @const {!Blockly.ConnectionDB}\n   * @private\n   */\n  this.db_ = source.workspace.connectionDBList[type];\n\n  /**\n   * Connection database for connections compatible with this type on the\n   * current workspace.\n   * @const {!Blockly.ConnectionDB}\n   * @private\n   */\n  this.dbOpposite_ = source.workspace\n      .connectionDBList[Blockly.OPPOSITE_TYPE[type]];\n\n  /**\n   * Workspace units, (0, 0) is top left of block.\n   * @type {!Blockly.utils.Coordinate}\n   * @private\n   */\n  this.offsetInBlock_ = new Blockly.utils.Coordinate(0, 0);\n\n  /**\n   * Describes the state of this connection's tracked-ness.\n   * @type {Blockly.RenderedConnection.TrackedState}\n   * @private\n   */\n  this.trackedState_ = Blockly.RenderedConnection.TrackedState.WILL_TRACK;\n\n  /**\n   * Connection this connection connects to.  Null if not connected.\n   * @type {Blockly.RenderedConnection}\n   */\n  this.targetConnection = null;\n};\nBlockly.utils.object.inherits(Blockly.RenderedConnection, Blockly.Connection);\n\n/**\n * Enum for different kinds of tracked states.\n *\n * WILL_TRACK means that this connection will add itself to\n * the db on the next moveTo call it receives.\n *\n * UNTRACKED means that this connection will not add\n * itself to the database until setTracking(true) is explicitly called.\n *\n * TRACKED means that this connection is currently being tracked.\n * @enum {number}\n */\nBlockly.RenderedConnection.TrackedState = {\n  WILL_TRACK: -1,\n  UNTRACKED: 0,\n  TRACKED: 1\n};\n\n/**\n * Dispose of this connection. Remove it from the database (if it is\n * tracked) and call the super-function to deal with connected blocks.\n * @override\n * @package\n */\nBlockly.RenderedConnection.prototype.dispose = function() {\n  Blockly.RenderedConnection.superClass_.dispose.call(this);\n  if (this.trackedState_ == Blockly.RenderedConnection.TrackedState.TRACKED) {\n    this.db_.removeConnection(this, this.y);\n  }\n};\n\n/**\n * Get the source block for this connection.\n * @return {!Blockly.BlockSvg} The source block.\n * @override\n */\nBlockly.RenderedConnection.prototype.getSourceBlock = function() {\n  return /** @type {!Blockly.BlockSvg} */ (\n    Blockly.RenderedConnection.superClass_.getSourceBlock.call(this));\n};\n\n/**\n * Returns the block that this connection connects to.\n * @return {Blockly.BlockSvg} The connected block or null if none is connected.\n * @override\n */\nBlockly.RenderedConnection.prototype.targetBlock = function() {\n  return /** @type {Blockly.BlockSvg} */ (\n    Blockly.RenderedConnection.superClass_.targetBlock.call(this));\n};\n\n/**\n * Returns the distance between this connection and another connection in\n * workspace units.\n * @param {!Blockly.Connection} otherConnection The other connection to measure\n *     the distance to.\n * @return {number} The distance between connections, in workspace units.\n */\nBlockly.RenderedConnection.prototype.distanceFrom = function(otherConnection) {\n  var xDiff = this.x - otherConnection.x;\n  var yDiff = this.y - otherConnection.y;\n  return Math.sqrt(xDiff * xDiff + yDiff * yDiff);\n};\n\n/**\n * Move the block(s) belonging to the connection to a point where they don't\n * visually interfere with the specified connection.\n * @param {!Blockly.Connection} staticConnection The connection to move away\n *     from.\n * @package\n */\nBlockly.RenderedConnection.prototype.bumpAwayFrom = function(staticConnection) {\n  if (this.sourceBlock_.workspace.isDragging()) {\n    // Don't move blocks around while the user is doing the same.\n    return;\n  }\n  // Move the root block.\n  var rootBlock = this.sourceBlock_.getRootBlock();\n  if (rootBlock.isInFlyout) {\n    // Don't move blocks around in a flyout.\n    return;\n  }\n  var reverse = false;\n  if (!rootBlock.isMovable()) {\n    // Can't bump an uneditable block away.\n    // Check to see if the other block is movable.\n    rootBlock = staticConnection.getSourceBlock().getRootBlock();\n    if (!rootBlock.isMovable()) {\n      return;\n    }\n    // Swap the connections and move the 'static' connection instead.\n    staticConnection = this;\n    reverse = true;\n  }\n  // Raise it to the top for extra visibility.\n  var selected = Blockly.selected == rootBlock;\n  selected || rootBlock.addSelect();\n  var dx = (staticConnection.x + Blockly.SNAP_RADIUS +\n      Math.floor(Math.random() * Blockly.BUMP_RANDOMNESS)) - this.x;\n  var dy = (staticConnection.y + Blockly.SNAP_RADIUS +\n      Math.floor(Math.random() * Blockly.BUMP_RANDOMNESS)) - this.y;\n  if (reverse) {\n    // When reversing a bump due to an uneditable block, bump up.\n    dy = -dy;\n  }\n  if (rootBlock.RTL) {\n    dx = (staticConnection.x - Blockly.SNAP_RADIUS -\n      Math.floor(Math.random() * Blockly.BUMP_RANDOMNESS)) - this.x;\n  }\n  rootBlock.moveBy(dx, dy);\n  selected || rootBlock.removeSelect();\n};\n\n/**\n * Change the connection's coordinates.\n * @param {number} x New absolute x coordinate, in workspace coordinates.\n * @param {number} y New absolute y coordinate, in workspace coordinates.\n */\nBlockly.RenderedConnection.prototype.moveTo = function(x, y) {\n  if (this.trackedState_ == Blockly.RenderedConnection.TrackedState.WILL_TRACK) {\n    this.db_.addConnection(this, y);\n    this.trackedState_ = Blockly.RenderedConnection.TrackedState.TRACKED;\n  } else if (this.trackedState_ == Blockly.RenderedConnection\n      .TrackedState.TRACKED) {\n    this.db_.removeConnection(this, this.y);\n    this.db_.addConnection(this, y);\n  }\n  this.x = x;\n  this.y = y;\n};\n\n/**\n * Change the connection's coordinates.\n * @param {number} dx Change to x coordinate, in workspace units.\n * @param {number} dy Change to y coordinate, in workspace units.\n */\nBlockly.RenderedConnection.prototype.moveBy = function(dx, dy) {\n  this.moveTo(this.x + dx, this.y + dy);\n};\n\n/**\n * Move this connection to the location given by its offset within the block and\n * the location of the block's top left corner.\n * @param {!Blockly.utils.Coordinate} blockTL The location of the top left\n *     corner of the block, in workspace coordinates.\n */\nBlockly.RenderedConnection.prototype.moveToOffset = function(blockTL) {\n  this.moveTo(blockTL.x + this.offsetInBlock_.x,\n      blockTL.y + this.offsetInBlock_.y);\n};\n\n/**\n * Set the offset of this connection relative to the top left of its block.\n * @param {number} x The new relative x, in workspace units.\n * @param {number} y The new relative y, in workspace units.\n */\nBlockly.RenderedConnection.prototype.setOffsetInBlock = function(x, y) {\n  this.offsetInBlock_.x = x;\n  this.offsetInBlock_.y = y;\n};\n\n/**\n * Get the offset of this connection relative to the top left of its block.\n * @return {!Blockly.utils.Coordinate} The offset of the connection.\n * @package\n */\nBlockly.RenderedConnection.prototype.getOffsetInBlock = function() {\n  return this.offsetInBlock_;\n};\n\n/**\n * Move the blocks on either side of this connection right next to each other.\n * @package\n */\nBlockly.RenderedConnection.prototype.tighten = function() {\n  var dx = this.targetConnection.x - this.x;\n  var dy = this.targetConnection.y - this.y;\n  if (dx != 0 || dy != 0) {\n    var block = this.targetBlock();\n    var svgRoot = block.getSvgRoot();\n    if (!svgRoot) {\n      throw Error('block is not rendered.');\n    }\n    // Workspace coordinates.\n    var xy = Blockly.utils.getRelativeXY(svgRoot);\n    block.getSvgRoot().setAttribute('transform',\n        'translate(' + (xy.x - dx) + ',' + (xy.y - dy) + ')');\n    block.moveConnections(-dx, -dy);\n  }\n};\n\n/**\n * Find the closest compatible connection to this connection.\n * All parameters are in workspace units.\n * @param {number} maxLimit The maximum radius to another connection.\n * @param {!Blockly.utils.Coordinate} dxy Offset between this connection's location\n *     in the database and the current location (as a result of dragging).\n * @return {!{connection: ?Blockly.Connection, radius: number}} Contains two\n *     properties: 'connection' which is either another connection or null,\n *     and 'radius' which is the distance.\n */\nBlockly.RenderedConnection.prototype.closest = function(maxLimit, dxy) {\n  return this.dbOpposite_.searchForClosest(this, maxLimit, dxy);\n};\n\n/**\n * Add highlighting around this connection.\n */\nBlockly.RenderedConnection.prototype.highlight = function() {\n  var steps;\n  var sourceBlockSvg = /** @type {!Blockly.BlockSvg} */ (this.sourceBlock_);\n  var renderConstants = sourceBlockSvg.workspace.getRenderer().getConstants();\n  var shape = renderConstants.shapeFor(this);\n  if (this.type == Blockly.INPUT_VALUE || this.type == Blockly.OUTPUT_VALUE) {\n    // Vertical line, puzzle tab, vertical line.\n    var yLen = renderConstants.TAB_OFFSET_FROM_TOP;\n    steps = Blockly.utils.svgPaths.moveBy(0, -yLen) +\n        Blockly.utils.svgPaths.lineOnAxis('v', yLen) +\n        shape.pathDown +\n        Blockly.utils.svgPaths.lineOnAxis('v', yLen);\n  } else {\n    var xLen =\n        renderConstants.NOTCH_OFFSET_LEFT - renderConstants.CORNER_RADIUS;\n    // Horizontal line, notch, horizontal line.\n    steps = Blockly.utils.svgPaths.moveBy(-xLen, 0) +\n        Blockly.utils.svgPaths.lineOnAxis('h', xLen) +\n        shape.pathLeft +\n        Blockly.utils.svgPaths.lineOnAxis('h', xLen);\n  }\n  var xy = this.sourceBlock_.getRelativeToSurfaceXY();\n  var x = this.x - xy.x;\n  var y = this.y - xy.y;\n  Blockly.Connection.highlightedPath_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH,\n      {\n        'class': 'blocklyHighlightedConnectionPath',\n        'd': steps,\n        transform: 'translate(' + x + ',' + y + ')' +\n            (this.sourceBlock_.RTL ? ' scale(-1 1)' : '')\n      },\n      this.sourceBlock_.getSvgRoot());\n};\n\n/**\n * Remove the highlighting around this connection.\n */\nBlockly.RenderedConnection.prototype.unhighlight = function() {\n  Blockly.utils.dom.removeNode(Blockly.Connection.highlightedPath_);\n  delete Blockly.Connection.highlightedPath_;\n};\n\n/**\n * Set whether this connections is tracked in the database or not.\n * @param {boolean} doTracking If true, start tracking. If false, stop tracking.\n * @package\n */\nBlockly.RenderedConnection.prototype.setTracking = function(doTracking) {\n  if ((doTracking && this.trackedState_ ==\n      Blockly.RenderedConnection.TrackedState.TRACKED) ||\n      (!doTracking && this.trackedState_ ==\n      Blockly.RenderedConnection.TrackedState.UNTRACKED)) {\n    return;\n  }\n  if (this.sourceBlock_.isInFlyout) {\n    // Don't bother maintaining a database of connections in a flyout.\n    return;\n  }\n  if (doTracking) {\n    this.db_.addConnection(this, this.y);\n    this.trackedState_ = Blockly.RenderedConnection.TrackedState.TRACKED;\n    return;\n  }\n  if (this.trackedState_ == Blockly.RenderedConnection.TrackedState.TRACKED) {\n    this.db_.removeConnection(this, this.y);\n  }\n  this.trackedState_ = Blockly.RenderedConnection.TrackedState.UNTRACKED;\n};\n\n/**\n * Stop tracking this connection, as well as all down-stream connections on\n * any block attached to this connection. This happens when a block is\n * collapsed.\n *\n * Also closes down-stream icons/bubbles.\n * @package\n */\nBlockly.RenderedConnection.prototype.stopTrackingAll = function() {\n  this.setTracking(false);\n  if (this.targetConnection) {\n    var blocks = this.targetBlock().getDescendants(false);\n    for (var i = 0; i < blocks.length; i++) {\n      var block = blocks[i];\n      // Stop tracking connections of all children.\n      var connections = block.getConnections_(true);\n      for (var j = 0; j < connections.length; j++) {\n        connections[j].setTracking(false);\n      }\n      // Close all bubbles of all children.\n      var icons = block.getIcons();\n      for (var j = 0; j < icons.length; j++) {\n        icons[j].setVisible(false);\n      }\n    }\n  }\n};\n\n/**\n * Start tracking this connection, as well as all down-stream connections on\n * any block attached to this connection. This happens when a block is expanded.\n * @return {!Array.<!Blockly.Block>} List of blocks to render.\n */\nBlockly.RenderedConnection.prototype.startTrackingAll = function() {\n  this.setTracking(true);\n  // All blocks that are not tracked must start tracking before any\n  // rendering takes place, since rendering requires knowing the dimensions\n  // of lower blocks. Also, since rendering a block renders all its parents,\n  // we only need to render the leaf nodes.\n  var renderList = [];\n  if (this.type != Blockly.INPUT_VALUE && this.type != Blockly.NEXT_STATEMENT) {\n    // Only spider down.\n    return renderList;\n  }\n  var block = this.targetBlock();\n  if (block) {\n    var connections;\n    if (block.isCollapsed()) {\n      // This block should only be partially revealed since it is collapsed.\n      connections = [];\n      block.outputConnection && connections.push(block.outputConnection);\n      block.nextConnection && connections.push(block.nextConnection);\n      block.previousConnection && connections.push(block.previousConnection);\n    } else {\n      // Show all connections of this block.\n      connections = block.getConnections_(true);\n    }\n    for (var i = 0; i < connections.length; i++) {\n      renderList.push.apply(renderList, connections[i].startTrackingAll());\n    }\n    if (!renderList.length) {\n      // Leaf block.\n      renderList[0] = block;\n    }\n  }\n  return renderList;\n};\n\n/**\n * Check if the two connections can be dragged to connect to each other.\n * @param {!Blockly.Connection} candidate A nearby connection to check.\n * @param {number=} maxRadius The maximum radius allowed for connections, in\n *     workspace units.\n * @return {boolean} True if the connection is allowed, false otherwise.\n * @deprecated July 2020\n */\nBlockly.RenderedConnection.prototype.isConnectionAllowed = function(candidate,\n    maxRadius) {\n  Blockly.utils.deprecation.warn(\n      'RenderedConnection.prototype.isConnectionAllowed',\n      'July 2020',\n      'July 2021',\n      'Blockly.Workspace.prototype.getConnectionChecker().canConnect');\n  if (this.distanceFrom(candidate) > maxRadius) {\n    return false;\n  }\n\n  return Blockly.RenderedConnection.superClass_.isConnectionAllowed.call(this,\n      candidate);\n};\n\n/**\n * Behavior after a connection attempt fails.\n * @param {!Blockly.Connection} otherConnection Connection that this connection\n *     failed to connect to.\n * @package\n */\nBlockly.RenderedConnection.prototype.onFailedConnect = function(\n    otherConnection) {\n  this.bumpAwayFrom(otherConnection);\n};\n\n\n/**\n * Disconnect two blocks that are connected by this connection.\n * @param {!Blockly.Block} parentBlock The superior block.\n * @param {!Blockly.Block} childBlock The inferior block.\n * @private\n */\nBlockly.RenderedConnection.prototype.disconnectInternal_ = function(parentBlock,\n    childBlock) {\n  Blockly.RenderedConnection.superClass_.disconnectInternal_.call(this,\n      parentBlock, childBlock);\n  // Rerender the parent so that it may reflow.\n  if (parentBlock.rendered) {\n    parentBlock.render();\n  }\n  if (childBlock.rendered) {\n    childBlock.updateDisabled();\n    childBlock.render();\n    // Reset visibility, since the child is now a top block.\n    childBlock.getSvgRoot().style.display = 'block';\n  }\n};\n\n/**\n * Respawn the shadow block if there was one connected to the this connection.\n * Render/rerender blocks as needed.\n * @private\n */\nBlockly.RenderedConnection.prototype.respawnShadow_ = function() {\n  Blockly.RenderedConnection.superClass_.respawnShadow_.call(this);\n  var blockShadow = this.targetBlock();\n  if (!blockShadow) {\n    // This connection must not have a shadowDom_.\n    return;\n  }\n  blockShadow.initSvg();\n  blockShadow.render(false);\n\n  var parentBlock = this.getSourceBlock();\n  if (parentBlock.rendered) {\n    parentBlock.render();\n  }\n};\n\n/**\n * Find all nearby compatible connections to this connection.\n * Type checking does not apply, since this function is used for bumping.\n * @param {number} maxLimit The maximum radius to another connection, in\n *     workspace units.\n * @return {!Array.<!Blockly.Connection>} List of connections.\n * @package\n */\nBlockly.RenderedConnection.prototype.neighbours = function(maxLimit) {\n  return this.dbOpposite_.getNeighbours(this, maxLimit);\n};\n\n/**\n * Connect two connections together.  This is the connection on the superior\n * block.  Rerender blocks as needed.\n * @param {!Blockly.Connection} childConnection Connection on inferior block.\n * @protected\n */\nBlockly.RenderedConnection.prototype.connect_ = function(childConnection) {\n  Blockly.RenderedConnection.superClass_.connect_.call(this, childConnection);\n\n  var parentConnection = this;\n  var parentBlock = parentConnection.getSourceBlock();\n  var childBlock = childConnection.getSourceBlock();\n  var parentRendered = parentBlock.rendered;\n  var childRendered = childBlock.rendered;\n\n  if (parentRendered) {\n    parentBlock.updateDisabled();\n  }\n  if (childRendered) {\n    childBlock.updateDisabled();\n  }\n  if (parentRendered && childRendered) {\n    if (parentConnection.type == Blockly.NEXT_STATEMENT ||\n        parentConnection.type == Blockly.PREVIOUS_STATEMENT) {\n      // Child block may need to square off its corners if it is in a stack.\n      // Rendering a child will render its parent.\n      childBlock.render();\n    } else {\n      // Child block does not change shape.  Rendering the parent node will\n      // move its connected children into position.\n      parentBlock.render();\n    }\n  }\n\n  // The input the child block is connected to (if any).\n  var parentInput = parentBlock.getInputWithBlock(childBlock);\n  if (parentInput) {\n    var visible = parentInput.isVisible();\n    childBlock.getSvgRoot().style.display = visible ? 'block' : 'none';\n  }\n};\n\n/**\n * Function to be called when this connection's compatible types have changed.\n * @protected\n */\nBlockly.RenderedConnection.prototype.onCheckChanged_ = function() {\n  // The new value type may not be compatible with the existing connection.\n  if (this.isConnected() && (!this.targetConnection ||\n      !this.getConnectionChecker().canConnect(\n          this, this.targetConnection, false))) {\n    var child = this.isSuperior() ? this.targetBlock() : this.sourceBlock_;\n    child.unplug();\n    // Bump away.\n    this.sourceBlock_.bumpNeighbours();\n  }\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing a marker.\n * Used primarily for keyboard navigation to show a marked location.\n * @author aschmiedt@google.com (Abby Schmiedt)\n */\n'use strict';\n\ngoog.provide('Blockly.Marker');\n\ngoog.require('Blockly.ASTNode');\ngoog.require('Blockly.navigation');\n\n\n/**\n * Class for a marker.\n * This is used in keyboard navigation to save a location in the Blockly AST.\n * @constructor\n */\nBlockly.Marker = function() {\n  /**\n   * The colour of the marker.\n   * @type {?string}\n   */\n  this.colour = null;\n\n  /**\n   * The current location of the marker.\n   * @type {Blockly.ASTNode}\n   * @private\n   */\n  this.curNode_ = null;\n\n  /**\n   * The object in charge of drawing the visual representation of the current node.\n   * @type {Blockly.blockRendering.MarkerSvg}\n   * @private\n   */\n  this.drawer_ = null;\n\n  /**\n   * The type of the marker.\n   * @type {string}\n   */\n  this.type = 'marker';\n};\n\n/**\n * Sets the object in charge of drawing the marker.\n * @param {Blockly.blockRendering.MarkerSvg} drawer The object in charge of\n *     drawing the marker.\n */\nBlockly.Marker.prototype.setDrawer = function(drawer) {\n  this.drawer_ = drawer;\n};\n\n/**\n * Get the current drawer for the marker.\n * @return {Blockly.blockRendering.MarkerSvg} The object in charge of drawing\n *     the marker.\n */\nBlockly.Marker.prototype.getDrawer = function() {\n  return this.drawer_;\n};\n\n/**\n * Gets the current location of the marker.\n * @return {Blockly.ASTNode} The current field, connection, or block the marker\n *     is on.\n */\nBlockly.Marker.prototype.getCurNode = function() {\n  return this.curNode_;\n};\n\n/**\n * Set the location of the marker and call the update method.\n * Setting isStack to true will only work if the newLocation is the top most\n * output or previous connection on a stack.\n * @param {Blockly.ASTNode} newNode The new location of the marker.\n */\nBlockly.Marker.prototype.setCurNode = function(newNode) {\n  var oldNode = this.curNode_;\n  this.curNode_ = newNode;\n  if (this.drawer_) {\n    this.drawer_.draw(oldNode, this.curNode_);\n  }\n};\n\n/**\n * Redraw the current marker.\n * @package\n */\nBlockly.Marker.prototype.draw = function() {\n  if (this.drawer_) {\n    this.drawer_.draw(this.curNode_, this.curNode_);\n  }\n};\n\n/**\n * Hide the marker SVG.\n */\nBlockly.Marker.prototype.hide = function() {\n  if (this.drawer_) {\n    this.drawer_.hide();\n  }\n};\n\n/**\n * Dispose of this marker.\n */\nBlockly.Marker.prototype.dispose = function() {\n  if (this.getDrawer()) {\n    this.getDrawer().dispose();\n  }\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing a cursor.\n * Used primarily for keyboard navigation.\n * @author aschmiedt@google.com (Abby Schmiedt)\n */\n'use strict';\n\ngoog.provide('Blockly.Cursor');\n\ngoog.require('Blockly.Action');\ngoog.require('Blockly.ASTNode');\ngoog.require('Blockly.Marker');\ngoog.require('Blockly.navigation');\ngoog.require('Blockly.utils.object');\n\ngoog.requireType('Blockly.IBlocklyActionable');\n\n\n/**\n * Class for a cursor.\n * A cursor controls how a user navigates the Blockly AST.\n * @constructor\n * @extends {Blockly.Marker}\n * @implements {Blockly.IBlocklyActionable}\n */\nBlockly.Cursor = function() {\n  Blockly.Cursor.superClass_.constructor.call(this);\n\n  /**\n   * @override\n   */\n  this.type = 'cursor';\n};\nBlockly.utils.object.inherits(Blockly.Cursor, Blockly.Marker);\n\n/**\n * Find the next connection, field, or block.\n * @return {Blockly.ASTNode} The next element, or null if the current node is\n *     not set or there is no next value.\n * @protected\n */\nBlockly.Cursor.prototype.next = function() {\n  var curNode = this.getCurNode();\n  if (!curNode) {\n    return null;\n  }\n\n  var newNode = curNode.next();\n  while (newNode && newNode.next() &&\n    (newNode.getType() == Blockly.ASTNode.types.NEXT ||\n    newNode.getType() == Blockly.ASTNode.types.BLOCK)) {\n    newNode = newNode.next();\n  }\n\n  if (newNode) {\n    this.setCurNode(newNode);\n  }\n  return newNode;\n};\n\n/**\n * Find the in connection or field.\n * @return {Blockly.ASTNode} The in element, or null if the current node is\n *     not set or there is no in value.\n * @protected\n */\nBlockly.Cursor.prototype.in = function() {\n  var curNode = this.getCurNode();\n  if (!curNode) {\n    return null;\n  }\n  // If we are on a previous or output connection, go to the block level before\n  // performing next operation.\n  if (curNode.getType() == Blockly.ASTNode.types.PREVIOUS ||\n    curNode.getType() == Blockly.ASTNode.types.OUTPUT) {\n    curNode = curNode.next();\n  }\n  var newNode = curNode.in();\n\n  if (newNode) {\n    this.setCurNode(newNode);\n  }\n  return newNode;\n};\n\n/**\n * Find the previous connection, field, or block.\n * @return {Blockly.ASTNode} The previous element, or null if the current node\n *     is not set or there is no previous value.\n * @protected\n */\nBlockly.Cursor.prototype.prev = function() {\n  var curNode = this.getCurNode();\n  if (!curNode) {\n    return null;\n  }\n  var newNode = curNode.prev();\n\n  while (newNode && newNode.prev() &&\n    (newNode.getType() == Blockly.ASTNode.types.NEXT ||\n    newNode.getType() == Blockly.ASTNode.types.BLOCK)) {\n    newNode = newNode.prev();\n  }\n\n  if (newNode) {\n    this.setCurNode(newNode);\n  }\n  return newNode;\n};\n\n/**\n * Find the out connection, field, or block.\n * @return {Blockly.ASTNode} The out element, or null if the current node is\n *     not set or there is no out value.\n * @protected\n */\nBlockly.Cursor.prototype.out = function() {\n  var curNode = this.getCurNode();\n  if (!curNode) {\n    return null;\n  }\n  var newNode = curNode.out();\n\n  if (newNode && newNode.getType() == Blockly.ASTNode.types.BLOCK) {\n    newNode = newNode.prev() || newNode;\n  }\n\n  if (newNode) {\n    this.setCurNode(newNode);\n  }\n  return newNode;\n};\n\n/**\n * Handles the given action.\n * This is only triggered when keyboard navigation is enabled.\n * @param {!Blockly.Action} action The action to be handled.\n * @return {boolean} True if the action has been handled, false otherwise.\n */\nBlockly.Cursor.prototype.onBlocklyAction = function(action) {\n  // If we are on a field give it the option to handle the action\n  if (this.getCurNode() &&\n      this.getCurNode().getType() === Blockly.ASTNode.types.FIELD &&\n      (/** @type {!Blockly.Field} */ (this.getCurNode().getLocation()))\n          .onBlocklyAction(action)) {\n    return true;\n  }\n  switch (action.name) {\n    case Blockly.navigation.actionNames.PREVIOUS:\n      this.prev();\n      return true;\n    case Blockly.navigation.actionNames.OUT:\n      this.out();\n      return true;\n    case Blockly.navigation.actionNames.NEXT:\n      this.next();\n      return true;\n    case Blockly.navigation.actionNames.IN:\n      this.in();\n      return true;\n    default:\n      return false;\n  }\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing a basic cursor.\n * Used to demo switching between different cursors.\n * @author aschmiedt@google.com (Abby Schmiedt)\n */\n'use strict';\n\ngoog.provide('Blockly.BasicCursor');\n\ngoog.require('Blockly.ASTNode');\ngoog.require('Blockly.Cursor');\n\n\n/**\n * Class for a basic cursor.\n * This will allow the user to get to all nodes in the AST by hitting next or\n * previous.\n * @constructor\n * @extends {Blockly.Cursor}\n */\nBlockly.BasicCursor = function() {\n  Blockly.BasicCursor.superClass_.constructor.call(this);\n};\nBlockly.utils.object.inherits(Blockly.BasicCursor, Blockly.Cursor);\n\n/**\n * Find the next node in the pre order traversal.\n * @return {Blockly.ASTNode} The next node, or null if the current node is\n *     not set or there is no next value.\n * @override\n */\nBlockly.BasicCursor.prototype.next = function() {\n  var curNode = this.getCurNode();\n  if (!curNode) {\n    return null;\n  }\n  var newNode = this.getNextNode_(curNode, this.validNode_);\n\n  if (newNode) {\n    this.setCurNode(newNode);\n  }\n  return newNode;\n};\n\n/**\n * For a basic cursor we only have the ability to go next and previous, so\n * in will also allow the user to get to the next node in the pre order traversal.\n * @return {Blockly.ASTNode} The next node, or null if the current node is\n *     not set or there is no next value.\n * @override\n */\nBlockly.BasicCursor.prototype.in = function() {\n  return this.next();\n};\n\n/**\n * Find the previous node in the pre order traversal.\n * @return {Blockly.ASTNode} The previous node, or null if the current node\n *     is not set or there is no previous value.\n * @override\n */\nBlockly.BasicCursor.prototype.prev = function() {\n  var curNode = this.getCurNode();\n  if (!curNode) {\n    return null;\n  }\n  var newNode = this.getPreviousNode_(curNode, this.validNode_);\n\n  if (newNode) {\n    this.setCurNode(newNode);\n  }\n  return newNode;\n};\n\n/**\n * For a basic cursor we only have the ability to go next and previous, so\n * out will allow the user to get to the previous node in the pre order traversal.\n * @return {Blockly.ASTNode} The previous node, or null if the current node is\n *     not set or there is no previous value.\n * @override\n */\nBlockly.BasicCursor.prototype.out = function() {\n  return this.prev();\n};\n\n/**\n * Uses pre order traversal to navigate the Blockly AST. This will allow\n * a user to easily navigate the entire Blockly AST without having to go in\n * and out levels on the tree.\n * @param {Blockly.ASTNode} node The current position in the AST.\n * @param {!function(Blockly.ASTNode) : boolean} isValid A function true/false\n *     depending on whether the given node should be traversed.\n * @return {Blockly.ASTNode} The next node in the traversal.\n * @protected\n */\nBlockly.BasicCursor.prototype.getNextNode_ = function(node, isValid) {\n  if (!node) {\n    return null;\n  }\n  var newNode = node.in() || node.next();\n  if (isValid(newNode)) {\n    return newNode;\n  } else if (newNode) {\n    return this.getNextNode_(newNode, isValid);\n  }\n  var siblingOrParent = this.findSiblingOrParent_(node.out());\n  if (isValid(siblingOrParent)) {\n    return siblingOrParent;\n  } else if (siblingOrParent) {\n    return this.getNextNode_(siblingOrParent, isValid);\n  }\n  return null;\n};\n\n/**\n * Reverses the pre order traversal in order to find the previous node. This will\n * allow a user to easily navigate the entire Blockly AST without having to go in\n * and out levels on the tree.\n * @param {Blockly.ASTNode} node The current position in the AST.\n * @param {!function(Blockly.ASTNode) : boolean} isValid A function true/false\n *     depending on whether the given node should be traversed.\n * @return {Blockly.ASTNode} The previous node in the traversal or null if no\n *     previous node exists.\n * @protected\n */\nBlockly.BasicCursor.prototype.getPreviousNode_ = function(node, isValid) {\n  if (!node) {\n    return null;\n  }\n  var newNode = node.prev();\n\n  if (newNode) {\n    newNode = this.getRightMostChild_(newNode);\n  } else {\n    newNode = node.out();\n  }\n  if (isValid(newNode)) {\n    return newNode;\n  } else if (newNode) {\n    return this.getPreviousNode_(newNode, isValid);\n  }\n  return null;\n};\n\n/**\n * Decides what nodes to traverse and which ones to skip. Currently, it\n * skips output, stack and workspace nodes.\n * @param {Blockly.ASTNode} node The AST node to check whether it is valid.\n * @return {boolean} True if the node should be visited, false otherwise.\n * @protected\n */\nBlockly.BasicCursor.prototype.validNode_ = function(node) {\n  var isValid = false;\n  var type = node && node.getType();\n  if (type == Blockly.ASTNode.types.OUTPUT ||\n      type == Blockly.ASTNode.types.INPUT ||\n      type == Blockly.ASTNode.types.FIELD ||\n      type == Blockly.ASTNode.types.NEXT ||\n      type == Blockly.ASTNode.types.PREVIOUS ||\n      type == Blockly.ASTNode.types.WORKSPACE) {\n    isValid = true;\n  }\n  return isValid;\n};\n\n/**\n * From the given node find either the next valid sibling or parent.\n * @param {Blockly.ASTNode} node The current position in the AST.\n * @return {Blockly.ASTNode} The parent AST node or null if there are no\n *     valid parents.\n * @private\n */\nBlockly.BasicCursor.prototype.findSiblingOrParent_ = function(node) {\n  if (!node) {\n    return null;\n  }\n  var nextNode = node.next();\n  if (nextNode) {\n    return nextNode;\n  }\n  return this.findSiblingOrParent_(node.out());\n};\n\n\n/**\n * Get the right most child of a node.\n * @param {Blockly.ASTNode} node The node to find the right most child of.\n * @return {Blockly.ASTNode} The right most child of the given node, or the node\n *     if no child exists.\n * @private\n */\nBlockly.BasicCursor.prototype.getRightMostChild_ = function(node) {\n  if (!node.in()) {\n    return node;\n  }\n  var newNode = node.in();\n  while (newNode.next()) {\n    newNode = newNode.next();\n  }\n  return this.getRightMostChild_(newNode);\n\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing a cursor that is used to navigate\n * between tab navigable fields.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.TabNavigateCursor');\n\ngoog.require('Blockly.ASTNode');\ngoog.require('Blockly.BasicCursor');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * A cursor for navigating between tab navigable fields.\n * @constructor\n * @extends {Blockly.BasicCursor}\n */\nBlockly.TabNavigateCursor = function() {\n  Blockly.TabNavigateCursor.superClass_.constructor.call(this);\n};\nBlockly.utils.object.inherits(Blockly.TabNavigateCursor, Blockly.BasicCursor);\n\n/**\n * Skip all nodes except for tab navigable fields.\n * @param {Blockly.ASTNode} node The AST node to check whether it is valid.\n * @return {boolean} True if the node should be visited, false otherwise.\n * @override\n */\nBlockly.TabNavigateCursor.prototype.validNode_ = function(node) {\n  var isValid = false;\n  var type = node && node.getType();\n  if (node) {\n    var location = /** @type {Blockly.Field} */ (node.getLocation());\n    if (type == Blockly.ASTNode.types.FIELD &&\n        location && location.isTabNavigable() && location.isClickable()) {\n      isValid = true;\n    }\n  }\n  return isValid;\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for graphically rendering a block as SVG.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.BlockSvg');\n\ngoog.require('Blockly.ASTNode');\ngoog.require('Blockly.Block');\ngoog.require('Blockly.blockAnimations');\ngoog.require('Blockly.blockRendering.IPathObject');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.ContextMenu');\ngoog.require('Blockly.ContextMenuRegistry');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.Ui');\ngoog.require('Blockly.Events.BlockMove');\ngoog.require('Blockly.Msg');\ngoog.require('Blockly.navigation');\ngoog.require('Blockly.RenderedConnection');\ngoog.require('Blockly.TabNavigateCursor');\ngoog.require('Blockly.Tooltip');\ngoog.require('Blockly.Touch');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.deprecation');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Rect');\n\ngoog.requireType('Blockly.IASTNodeLocationSvg');\ngoog.requireType('Blockly.IBoundedElement');\ngoog.requireType('Blockly.ICopyable');\n\n\n/**\n * Class for a block's SVG representation.\n * Not normally called directly, workspace.newBlock() is preferred.\n * @param {!Blockly.WorkspaceSvg} workspace The block's workspace.\n * @param {?string} prototypeName Name of the language object containing\n *     type-specific functions for this block.\n * @param {string=} opt_id Optional ID.  Use this ID if provided, otherwise\n *     create a new ID.\n * @extends {Blockly.Block}\n * @implements {Blockly.IASTNodeLocationSvg}\n * @implements {Blockly.IBoundedElement}\n * @implements {Blockly.ICopyable}\n * @constructor\n */\nBlockly.BlockSvg = function(workspace, prototypeName, opt_id) {\n  // Create core elements for the block.\n  /**\n   * @type {!SVGGElement}\n   * @private\n   */\n  this.svgGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G, {}, null);\n  this.svgGroup_.translate_ = '';\n\n  /**\n   * A block style object.\n   * @type {!Blockly.Theme.BlockStyle}\n   */\n  this.style = workspace.getRenderer().getConstants().getBlockStyle(null);\n\n  /**\n   * The renderer's path object.\n   * @type {Blockly.blockRendering.IPathObject}\n   * @package\n   */\n  this.pathObject = workspace.getRenderer().makePathObject(\n      this.svgGroup_, this.style);\n\n  /** @type {boolean} */\n  this.rendered = false;\n  /**\n   * Is this block currently rendering? Used to stop recursive render calls\n   * from actually triggering a re-render.\n   * @type {boolean}\n   * @private\n   */\n  this.renderIsInProgress_ = false;\n\n\n  /** @type {!Blockly.WorkspaceSvg} */\n  this.workspace = workspace;\n\n  /** @type {Blockly.RenderedConnection} */\n  this.outputConnection = null;\n  /** @type {Blockly.RenderedConnection} */\n  this.nextConnection = null;\n  /** @type {Blockly.RenderedConnection} */\n  this.previousConnection = null;\n\n  /**\n   * Whether to move the block to the drag surface when it is dragged.\n   * True if it should move, false if it should be translated directly.\n   * @type {boolean}\n   * @private\n   */\n  this.useDragSurface_ =\n      Blockly.utils.is3dSupported() && !!workspace.getBlockDragSurface();\n\n  var svgPath = this.pathObject.svgPath;\n  svgPath.tooltip = this;\n  Blockly.Tooltip.bindMouseEvents(svgPath);\n  Blockly.BlockSvg.superClass_.constructor.call(this,\n      workspace, prototypeName, opt_id);\n\n  // Expose this block's ID on its top-level SVG group.\n  if (this.svgGroup_.dataset) {\n    this.svgGroup_.dataset['id'] = this.id;\n  }\n};\nBlockly.utils.object.inherits(Blockly.BlockSvg, Blockly.Block);\n\n/**\n * Height of this block, not including any statement blocks above or below.\n * Height is in workspace units.\n */\nBlockly.BlockSvg.prototype.height = 0;\n\n/**\n * Width of this block, including any connected value blocks.\n * Width is in workspace units.\n */\nBlockly.BlockSvg.prototype.width = 0;\n\n/**\n * Map from IDs for warnings text to PIDs of functions to apply them.\n * Used to be able to maintain multiple warnings.\n * @type {Object.<string, number>}\n * @private\n */\nBlockly.BlockSvg.prototype.warningTextDb_ = null;\n\n/**\n * Constant for identifying rows that are to be rendered inline.\n * Don't collide with Blockly.INPUT_VALUE and friends.\n * @const\n */\nBlockly.BlockSvg.INLINE = -1;\n\n/**\n * ID to give the \"collapsed warnings\" warning. Allows us to remove the\n * \"collapsed warnings\" warning without removing any warnings that belong to\n * the block.\n * @type {string}\n * @const\n */\nBlockly.BlockSvg.COLLAPSED_WARNING_ID = 'TEMP_COLLAPSED_WARNING_';\n\n/**\n * An optional method called when a mutator dialog is first opened.\n * This function must create and initialize a top-level block for the mutator\n * dialog, and return it. This function should also populate this top-level\n * block with any sub-blocks which are appropriate. This method must also be\n * coupled with defining a `compose` method for the default mutation dialog\n * button and UI to appear.\n * @type {?function(Blockly.WorkspaceSvg):!Blockly.BlockSvg}\n */\nBlockly.BlockSvg.prototype.decompose;\n\n/**\n * An optional method called when a mutator dialog saves its content.\n * This function is called to modify the original block according to new\n * settings. This method must also be coupled with defining a `decompose`\n * method for the default mutation dialog button and UI to appear.\n * @type {?function(!Blockly.BlockSvg)}\n */\nBlockly.BlockSvg.prototype.compose;\n\n/**\n * An optional method for defining custom block context menu items.\n * @type {?function(!Array.<!Object>)}\n */\nBlockly.BlockSvg.prototype.customContextMenu;\n\n/**\n * An property used internally to reference the block's rendering debugger.\n * @type {?Blockly.blockRendering.Debug}\n * @package\n */\nBlockly.BlockSvg.prototype.renderingDebugger;\n\n/**\n * Create and initialize the SVG representation of the block.\n * May be called more than once.\n */\nBlockly.BlockSvg.prototype.initSvg = function() {\n  if (!this.workspace.rendered) {\n    throw TypeError('Workspace is headless.');\n  }\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    input.init();\n  }\n  var icons = this.getIcons();\n  for (var i = 0; i < icons.length; i++) {\n    icons[i].createIcon();\n  }\n  this.applyColour();\n  this.pathObject.updateMovable(this.isMovable());\n  var svg = this.getSvgRoot();\n  if (!this.workspace.options.readOnly && !this.eventsInit_ && svg) {\n    Blockly.bindEventWithChecks_(\n        svg, 'mousedown', this, this.onMouseDown_);\n  }\n  this.eventsInit_ = true;\n\n  if (!svg.parentNode) {\n    this.workspace.getCanvas().appendChild(svg);\n  }\n};\n\n/**\n * Get the secondary colour of a block.\n * @return {?string} #RRGGBB string.\n */\nBlockly.BlockSvg.prototype.getColourSecondary = function() {\n  return this.style.colourSecondary;\n};\n\n/**\n * Get the tertiary colour of a block.\n * @return {?string} #RRGGBB string.\n */\nBlockly.BlockSvg.prototype.getColourTertiary = function() {\n  return this.style.colourTertiary;\n};\n\n/**\n * Get the shadow colour of a block.\n * @return {?string} #RRGGBB string.\n * @deprecated Use style.colourSecondary. (2020 January 21)\n */\nBlockly.BlockSvg.prototype.getColourShadow = function() {\n  Blockly.utils.deprecation.warn(\n      'BlockSvg.prototype.getColourShadow',\n      'January 2020',\n      'January 2021',\n      'style.colourSecondary');\n  return this.getColourSecondary();\n};\n\n/**\n * Get the border colour(s) of a block.\n * @return {{colourDark, colourLight, colourBorder}} An object containing\n *     colour values for the border(s) of the block. If the block is using a\n *     style the colourBorder will be defined and equal to the tertiary colour\n *     of the style (#RRGGBB string). Otherwise the colourDark and colourLight\n *     attributes will be defined (#RRGGBB strings).\n * @deprecated Use style.colourTertiary. (2020 January 21)\n */\nBlockly.BlockSvg.prototype.getColourBorder = function() {\n  Blockly.utils.deprecation.warn(\n      'BlockSvg.prototype.getColourBorder',\n      'January 2020',\n      'January 2021',\n      'style.colourTertiary');\n  var colourTertiary = this.getColourTertiary();\n  return {\n    colourBorder: colourTertiary,\n    colourLight: null,\n    colourDark: null\n  };\n};\n\n/**\n * Select this block.  Highlight it visually.\n */\nBlockly.BlockSvg.prototype.select = function() {\n  if (this.isShadow() && this.getParent()) {\n    // Shadow blocks should not be selected.\n    this.getParent().select();\n    return;\n  }\n  if (Blockly.selected == this) {\n    return;\n  }\n  var oldId = null;\n  if (Blockly.selected) {\n    oldId = Blockly.selected.id;\n    // Unselect any previously selected block.\n    Blockly.Events.disable();\n    try {\n      Blockly.selected.unselect();\n    } finally {\n      Blockly.Events.enable();\n    }\n  }\n  var event = new Blockly.Events.Ui(null, 'selected', oldId, this.id);\n  event.workspaceId = this.workspace.id;\n  Blockly.Events.fire(event);\n  Blockly.selected = this;\n  this.addSelect();\n};\n\n/**\n * Unselect this block.  Remove its highlighting.\n */\nBlockly.BlockSvg.prototype.unselect = function() {\n  if (Blockly.selected != this) {\n    return;\n  }\n  var event = new Blockly.Events.Ui(null, 'selected', this.id, null);\n  event.workspaceId = this.workspace.id;\n  Blockly.Events.fire(event);\n  Blockly.selected = null;\n  this.removeSelect();\n};\n\n/**\n * Block's mutator icon (if any).\n * @type {Blockly.Mutator}\n */\nBlockly.BlockSvg.prototype.mutator = null;\n\n/**\n * Block's comment icon (if any).\n * @type {Blockly.Comment}\n * @deprecated August 2019. Use getCommentIcon instead.\n */\nBlockly.BlockSvg.prototype.comment = null;\n\n/**\n * Block's comment icon (if any).\n * @type {Blockly.Comment}\n * @private\n */\nBlockly.BlockSvg.prototype.commentIcon_ = null;\n\n/**\n * Block's warning icon (if any).\n * @type {Blockly.Warning}\n */\nBlockly.BlockSvg.prototype.warning = null;\n\n/**\n * Returns a list of mutator, comment, and warning icons.\n * @return {!Array} List of icons.\n */\nBlockly.BlockSvg.prototype.getIcons = function() {\n  var icons = [];\n  if (this.mutator) {\n    icons.push(this.mutator);\n  }\n  if (this.commentIcon_) {\n    icons.push(this.commentIcon_);\n  }\n  if (this.warning) {\n    icons.push(this.warning);\n  }\n  return icons;\n};\n\n/**\n * Set parent of this block to be a new block or null.\n * @param {Blockly.Block} newParent New parent block.\n * @override\n */\nBlockly.BlockSvg.prototype.setParent = function(newParent) {\n  var oldParent = this.parentBlock_;\n  if (newParent == oldParent) {\n    return;\n  }\n\n  Blockly.utils.dom.startTextWidthCache();\n  Blockly.BlockSvg.superClass_.setParent.call(this, newParent);\n  Blockly.utils.dom.stopTextWidthCache();\n\n  var svgRoot = this.getSvgRoot();\n\n  // Bail early if workspace is clearing, or we aren't rendered.\n  // We won't need to reattach ourselves anywhere.\n  if (this.workspace.isClearing || !svgRoot) {\n    return;\n  }\n\n  var oldXY = this.getRelativeToSurfaceXY();\n  if (newParent) {\n    newParent.getSvgRoot().appendChild(svgRoot);\n    var newXY = this.getRelativeToSurfaceXY();\n    // Move the connections to match the child's new position.\n    this.moveConnections(newXY.x - oldXY.x, newXY.y - oldXY.y);\n  }\n  // If we are losing a parent, we want to move our DOM element to the\n  // root of the workspace.\n  else if (oldParent) {\n    this.workspace.getCanvas().appendChild(svgRoot);\n    this.translate(oldXY.x, oldXY.y);\n  }\n\n  this.applyColour();\n};\n\n/**\n * Return the coordinates of the top-left corner of this block relative to the\n * drawing surface's origin (0,0), in workspace units.\n * If the block is on the workspace, (0, 0) is the origin of the workspace\n * coordinate system.\n * This does not change with workspace scale.\n * @return {!Blockly.utils.Coordinate} Object with .x and .y properties in\n *     workspace coordinates.\n */\nBlockly.BlockSvg.prototype.getRelativeToSurfaceXY = function() {\n  var x = 0;\n  var y = 0;\n\n  var dragSurfaceGroup = this.useDragSurface_ ?\n      this.workspace.getBlockDragSurface().getGroup() : null;\n\n  var element = this.getSvgRoot();\n  if (element) {\n    do {\n      // Loop through this block and every parent.\n      var xy = Blockly.utils.getRelativeXY(element);\n      x += xy.x;\n      y += xy.y;\n      // If this element is the current element on the drag surface, include\n      // the translation of the drag surface itself.\n      if (this.useDragSurface_ &&\n          this.workspace.getBlockDragSurface().getCurrentBlock() == element) {\n        var surfaceTranslation =\n            this.workspace.getBlockDragSurface().getSurfaceTranslation();\n        x += surfaceTranslation.x;\n        y += surfaceTranslation.y;\n      }\n      element = /** @type {!SVGElement} */ (element.parentNode);\n    } while (element && element != this.workspace.getCanvas() &&\n        element != dragSurfaceGroup);\n  }\n  return new Blockly.utils.Coordinate(x, y);\n};\n\n/**\n * Move a block by a relative offset.\n * @param {number} dx Horizontal offset in workspace units.\n * @param {number} dy Vertical offset in workspace units.\n */\nBlockly.BlockSvg.prototype.moveBy = function(dx, dy) {\n  if (this.parentBlock_) {\n    throw Error('Block has parent.');\n  }\n  var eventsEnabled = Blockly.Events.isEnabled();\n  if (eventsEnabled) {\n    var event = new Blockly.Events.BlockMove(this);\n  }\n  var xy = this.getRelativeToSurfaceXY();\n  this.translate(xy.x + dx, xy.y + dy);\n  this.moveConnections(dx, dy);\n  if (eventsEnabled) {\n    event.recordNew();\n    Blockly.Events.fire(event);\n  }\n  this.workspace.resizeContents();\n};\n\n/**\n * Transforms a block by setting the translation on the transform attribute\n * of the block's SVG.\n * @param {number} x The x coordinate of the translation in workspace units.\n * @param {number} y The y coordinate of the translation in workspace units.\n */\nBlockly.BlockSvg.prototype.translate = function(x, y) {\n  this.getSvgRoot().setAttribute('transform',\n      'translate(' + x + ',' + y + ')');\n};\n\n/**\n * Move this block to its workspace's drag surface, accounting for positioning.\n * Generally should be called at the same time as setDragging_(true).\n * Does nothing if useDragSurface_ is false.\n * @package\n */\nBlockly.BlockSvg.prototype.moveToDragSurface = function() {\n  if (!this.useDragSurface_) {\n    return;\n  }\n  // The translation for drag surface blocks,\n  // is equal to the current relative-to-surface position,\n  // to keep the position in sync as it move on/off the surface.\n  // This is in workspace coordinates.\n  var xy = this.getRelativeToSurfaceXY();\n  this.clearTransformAttributes_();\n  this.workspace.getBlockDragSurface().translateSurface(xy.x, xy.y);\n  // Execute the move on the top-level SVG component\n  var svg = this.getSvgRoot();\n  if (svg) {\n    this.workspace.getBlockDragSurface().setBlocksAndShow(svg);\n  }\n};\n\n/**\n * Move a block to a position.\n * @param {Blockly.utils.Coordinate} xy The position to move to in workspace units.\n */\nBlockly.BlockSvg.prototype.moveTo = function(xy) {\n  var curXY = this.getRelativeToSurfaceXY();\n  this.moveBy(xy.x - curXY.x, xy.y - curXY.y);\n};\n\n/**\n * Move this block back to the workspace block canvas.\n * Generally should be called at the same time as setDragging_(false).\n * Does nothing if useDragSurface_ is false.\n * @param {!Blockly.utils.Coordinate} newXY The position the block should take on\n *     on the workspace canvas, in workspace coordinates.\n * @package\n */\nBlockly.BlockSvg.prototype.moveOffDragSurface = function(newXY) {\n  if (!this.useDragSurface_) {\n    return;\n  }\n  // Translate to current position, turning off 3d.\n  this.translate(newXY.x, newXY.y);\n  this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas());\n};\n\n/**\n * Move this block during a drag, taking into account whether we are using a\n * drag surface to translate blocks.\n * This block must be a top-level block.\n * @param {!Blockly.utils.Coordinate} newLoc The location to translate to, in\n *     workspace coordinates.\n * @package\n */\nBlockly.BlockSvg.prototype.moveDuringDrag = function(newLoc) {\n  if (this.useDragSurface_) {\n    this.workspace.getBlockDragSurface().translateSurface(newLoc.x, newLoc.y);\n  } else {\n    this.svgGroup_.translate_ = 'translate(' + newLoc.x + ',' + newLoc.y + ')';\n    this.svgGroup_.setAttribute('transform',\n        this.svgGroup_.translate_ + this.svgGroup_.skew_);\n  }\n};\n\n/**\n * Clear the block of transform=\"...\" attributes.\n * Used when the block is switching from 3d to 2d transform or vice versa.\n * @private\n */\nBlockly.BlockSvg.prototype.clearTransformAttributes_ = function() {\n  this.getSvgRoot().removeAttribute('transform');\n};\n\n/**\n * Snap this block to the nearest grid point.\n */\nBlockly.BlockSvg.prototype.snapToGrid = function() {\n  if (!this.workspace) {\n    return;  // Deleted block.\n  }\n  if (this.workspace.isDragging()) {\n    return;  // Don't bump blocks during a drag.\n  }\n  if (this.getParent()) {\n    return;  // Only snap top-level blocks.\n  }\n  if (this.isInFlyout) {\n    return;  // Don't move blocks around in a flyout.\n  }\n  var grid = this.workspace.getGrid();\n  if (!grid || !grid.shouldSnap()) {\n    return;  // Config says no snapping.\n  }\n  var spacing = grid.getSpacing();\n  var half = spacing / 2;\n  var xy = this.getRelativeToSurfaceXY();\n  var dx = Math.round((xy.x - half) / spacing) * spacing + half - xy.x;\n  var dy = Math.round((xy.y - half) / spacing) * spacing + half - xy.y;\n  dx = Math.round(dx);\n  dy = Math.round(dy);\n  if (dx != 0 || dy != 0) {\n    this.moveBy(dx, dy);\n  }\n};\n\n/**\n * Returns the coordinates of a bounding box describing the dimensions of this\n * block and any blocks stacked below it.\n * Coordinate system: workspace coordinates.\n * @return {!Blockly.utils.Rect} Object with coordinates of the bounding box.\n */\nBlockly.BlockSvg.prototype.getBoundingRectangle = function() {\n  var blockXY = this.getRelativeToSurfaceXY();\n  var blockBounds = this.getHeightWidth();\n  var left, right;\n  if (this.RTL) {\n    left = blockXY.x - blockBounds.width;\n    right = blockXY.x;\n  } else {\n    left = blockXY.x;\n    right = blockXY.x + blockBounds.width;\n  }\n  return new Blockly.utils.Rect(\n      blockXY.y, blockXY.y + blockBounds.height, left, right);\n};\n\n/**\n * Notify every input on this block to mark its fields as dirty.\n * A dirty field is a field that needs to be re-rendered.\n */\nBlockly.BlockSvg.prototype.markDirty = function() {\n  this.pathObject.constants =\n    (/** @type {!Blockly.WorkspaceSvg} */ (this.workspace))\n        .getRenderer().getConstants();\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    input.markDirty();\n  }\n};\n\n/**\n * Set whether the block is collapsed or not.\n * @param {boolean} collapsed True if collapsed.\n */\nBlockly.BlockSvg.prototype.setCollapsed = function(collapsed) {\n  if (this.collapsed_ == collapsed) {\n    return;\n  }\n  Blockly.BlockSvg.superClass_.setCollapsed.call(this, collapsed);\n  if (!collapsed) {\n    this.updateCollapsed_();\n  } else if (this.rendered) {\n    this.render();\n    // Don't bump neighbours. Users like to store collapsed functions together\n    // and bumping makes them go out of alignment.\n  }\n};\n\n/**\n * Makes sure that when the block is collapsed, it is rendered correctly\n * for that state.\n * @private\n */\nBlockly.BlockSvg.prototype.updateCollapsed_ = function() {\n  var collapsed = this.isCollapsed();\n  var collapsedInputName = Blockly.Block.COLLAPSED_INPUT_NAME;\n  var collapsedFieldName = Blockly.Block.COLLAPSED_FIELD_NAME;\n\n  for (var i = 0, input; (input = this.inputList[i]); i++) {\n    if (input.name != collapsedInputName) {\n      input.setVisible(!collapsed);\n    }\n  }\n\n  if (!collapsed) {\n    this.removeInput(collapsedInputName);\n    return;\n  }\n\n  var icons = this.getIcons();\n  for (var i = 0, icon; (icon = icons[i]); i++) {\n    icon.setVisible(false);\n  }\n\n  var text = this.toString(Blockly.COLLAPSE_CHARS);\n  var field = this.getField(collapsedFieldName);\n  if (field) {\n    field.setValue(text);\n    return;\n  }\n  var input = this.getInput(collapsedInputName) ||\n      this.appendDummyInput(collapsedInputName);\n  input.appendField(new Blockly.FieldLabel(text), collapsedFieldName);\n};\n\n/**\n * Open the next (or previous) FieldTextInput.\n * @param {!Blockly.Field} start Current field.\n * @param {boolean} forward If true go forward, otherwise backward.\n */\nBlockly.BlockSvg.prototype.tab = function(start, forward) {\n  var tabCursor = new Blockly.TabNavigateCursor();\n  tabCursor.setCurNode(Blockly.ASTNode.createFieldNode(start));\n  var currentNode = tabCursor.getCurNode();\n  var action = forward ?\n      Blockly.navigation.ACTION_NEXT : Blockly.navigation.ACTION_PREVIOUS;\n\n  tabCursor.onBlocklyAction(action);\n\n  var nextNode = tabCursor.getCurNode();\n  if (nextNode && nextNode !== currentNode) {\n    var nextField = /** @type {!Blockly.Field} */ (nextNode.getLocation());\n    nextField.showEditor();\n\n    // Also move the cursor if we're in keyboard nav mode.\n    if (this.workspace.keyboardAccessibilityMode) {\n      this.workspace.getCursor().setCurNode(nextNode);\n    }\n  }\n};\n\n/**\n * Handle a mouse-down on an SVG block.\n * @param {!Event} e Mouse down event or touch start event.\n * @private\n */\nBlockly.BlockSvg.prototype.onMouseDown_ = function(e) {\n  var gesture = this.workspace && this.workspace.getGesture(e);\n  if (gesture) {\n    gesture.handleBlockStart(e, this);\n  }\n};\n\n/**\n * Load the block's help page in a new window.\n * @package\n */\nBlockly.BlockSvg.prototype.showHelp = function() {\n  var url = (typeof this.helpUrl == 'function') ? this.helpUrl() : this.helpUrl;\n  if (url) {\n    window.open(url);\n  }\n};\n\n/**\n * Generate the context menu for this block.\n * @protected\n * @return {Array.<!Object>} Context menu options\n */\nBlockly.BlockSvg.prototype.generateContextMenu = function() {\n  if (this.workspace.options.readOnly || !this.contextMenu) {\n    return null;\n  }\n  var menuOptions = Blockly.ContextMenuRegistry.registry.getContextMenuOptions(\n      Blockly.ContextMenuRegistry.ScopeType.BLOCK, {block: this});\n\n  // Allow the block to add or modify menuOptions.\n  if (this.customContextMenu) {\n    this.customContextMenu(menuOptions);\n  }\n\n  return menuOptions;\n};\n\n/**\n * Show the context menu for this block.\n * @param {!Event} e Mouse event.\n * @package\n */\nBlockly.BlockSvg.prototype.showContextMenu = function(e) {\n  var menuOptions = this.generateContextMenu();\n\n  if (menuOptions && menuOptions.length) {\n    Blockly.ContextMenu.show(e, menuOptions, this.RTL);\n    Blockly.ContextMenu.currentBlock = this;\n  }\n};\n\n/**\n * Move the connections for this block and all blocks attached under it.\n * Also update any attached bubbles.\n * @param {number} dx Horizontal offset from current location, in workspace\n *     units.\n * @param {number} dy Vertical offset from current location, in workspace\n *     units.\n * @package\n */\nBlockly.BlockSvg.prototype.moveConnections = function(dx, dy) {\n  if (!this.rendered) {\n    // Rendering is required to lay out the blocks.\n    // This is probably an invisible block attached to a collapsed block.\n    return;\n  }\n  var myConnections = this.getConnections_(false);\n  for (var i = 0; i < myConnections.length; i++) {\n    myConnections[i].moveBy(dx, dy);\n  }\n  var icons = this.getIcons();\n  for (var i = 0; i < icons.length; i++) {\n    icons[i].computeIconLocation();\n  }\n\n  // Recurse through all blocks attached under this one.\n  for (var i = 0; i < this.childBlocks_.length; i++) {\n    this.childBlocks_[i].moveConnections(dx, dy);\n  }\n};\n\n/**\n * Recursively adds or removes the dragging class to this node and its children.\n * @param {boolean} adding True if adding, false if removing.\n * @package\n */\nBlockly.BlockSvg.prototype.setDragging = function(adding) {\n  if (adding) {\n    var group = this.getSvgRoot();\n    group.translate_ = '';\n    group.skew_ = '';\n    Blockly.draggingConnections =\n        Blockly.draggingConnections.concat(this.getConnections_(true));\n    Blockly.utils.dom.addClass(\n        /** @type {!Element} */ (this.svgGroup_), 'blocklyDragging');\n  } else {\n    Blockly.draggingConnections = [];\n    Blockly.utils.dom.removeClass(\n        /** @type {!Element} */ (this.svgGroup_), 'blocklyDragging');\n  }\n  // Recurse through all blocks attached under this one.\n  for (var i = 0; i < this.childBlocks_.length; i++) {\n    this.childBlocks_[i].setDragging(adding);\n  }\n};\n\n/**\n * Set whether this block is movable or not.\n * @param {boolean} movable True if movable.\n */\nBlockly.BlockSvg.prototype.setMovable = function(movable) {\n  Blockly.BlockSvg.superClass_.setMovable.call(this, movable);\n  this.pathObject.updateMovable(movable);\n};\n\n/**\n * Set whether this block is editable or not.\n * @param {boolean} editable True if editable.\n */\nBlockly.BlockSvg.prototype.setEditable = function(editable) {\n  Blockly.BlockSvg.superClass_.setEditable.call(this, editable);\n  var icons = this.getIcons();\n  for (var i = 0; i < icons.length; i++) {\n    icons[i].updateEditable();\n  }\n};\n\n/**\n * Set whether this block is a shadow block or not.\n * @param {boolean} shadow True if a shadow.\n */\nBlockly.BlockSvg.prototype.setShadow = function(shadow) {\n  Blockly.BlockSvg.superClass_.setShadow.call(this, shadow);\n  this.applyColour();\n};\n\n/**\n * Set whether this block is an insertion marker block or not.\n * Once set this cannot be unset.\n * @param {boolean} insertionMarker True if an insertion marker.\n * @package\n */\nBlockly.BlockSvg.prototype.setInsertionMarker = function(insertionMarker) {\n  if (this.isInsertionMarker_ == insertionMarker) {\n    return;  // No change.\n  }\n  this.isInsertionMarker_ = insertionMarker;\n  if (this.isInsertionMarker_) {\n    this.setColour(this.workspace.getRenderer().getConstants().\n        INSERTION_MARKER_COLOUR);\n    this.pathObject.updateInsertionMarker(true);\n  }\n};\n\n/**\n * Return the root node of the SVG or null if none exists.\n * @return {!SVGGElement} The root SVG node (probably a group).\n */\nBlockly.BlockSvg.prototype.getSvgRoot = function() {\n  return this.svgGroup_;\n};\n\n/**\n * Dispose of this block.\n * @param {boolean=} healStack If true, then try to heal any gap by connecting\n *     the next statement with the previous statement.  Otherwise, dispose of\n *     all children of this block.\n * @param {boolean=} animate If true, show a disposal animation and sound.\n * @suppress {checkTypes}\n */\nBlockly.BlockSvg.prototype.dispose = function(healStack, animate) {\n  if (!this.workspace) {\n    // The block has already been deleted.\n    return;\n  }\n  Blockly.Tooltip.dispose();\n  Blockly.Tooltip.unbindMouseEvents(this.pathObject.svgPath);\n  Blockly.utils.dom.startTextWidthCache();\n  // Save the block's workspace temporarily so we can resize the\n  // contents once the block is disposed.\n  var blockWorkspace = this.workspace;\n  // If this block is being dragged, unlink the mouse events.\n  if (Blockly.selected == this) {\n    this.unselect();\n    this.workspace.cancelCurrentGesture();\n  }\n  // If this block has a context menu open, close it.\n  if (Blockly.ContextMenu.currentBlock == this) {\n    Blockly.ContextMenu.hide();\n  }\n\n  if (this.workspace.keyboardAccessibilityMode) {\n    Blockly.navigation.moveCursorOnBlockDelete(this);\n  }\n\n  if (animate && this.rendered) {\n    this.unplug(healStack);\n    Blockly.blockAnimations.disposeUiEffect(this);\n  }\n  // Stop rerendering.\n  this.rendered = false;\n\n  // Clear pending warnings.\n  if (this.warningTextDb_) {\n    for (var n in this.warningTextDb_) {\n      clearTimeout(this.warningTextDb_[n]);\n    }\n    this.warningTextDb_ = null;\n  }\n\n  var icons = this.getIcons();\n  for (var i = 0; i < icons.length; i++) {\n    icons[i].dispose();\n  }\n  Blockly.BlockSvg.superClass_.dispose.call(this, !!healStack);\n\n  Blockly.utils.dom.removeNode(this.svgGroup_);\n  blockWorkspace.resizeContents();\n  // Sever JavaScript to DOM connections.\n  this.svgGroup_ = null;\n  Blockly.utils.dom.stopTextWidthCache();\n};\n\n/**\n * Encode a block for copying.\n * @return {?Blockly.ICopyable.CopyData} Copy metadata, or null if the block is\n *     an insertion marker.\n * @package\n */\nBlockly.BlockSvg.prototype.toCopyData = function() {\n  if (this.isInsertionMarker_) {\n    return null;\n  }\n  var xml = /** @type {!Element} */ (Blockly.Xml.blockToDom(this, true));\n  // Copy only the selected block and internal blocks.\n  Blockly.Xml.deleteNext(xml);\n  // Encode start position in XML.\n  var xy = this.getRelativeToSurfaceXY();\n  xml.setAttribute('x', this.RTL ? -xy.x : xy.x);\n  xml.setAttribute('y', xy.y);\n  return {\n    xml: xml,\n    source: this.workspace,\n    typeCounts: Blockly.utils.getBlockTypeCounts(this, true)\n  };\n};\n\n/**\n * Change the colour of a block.\n * @package\n */\nBlockly.BlockSvg.prototype.applyColour = function() {\n  this.pathObject.applyColour(this);\n\n  var icons = this.getIcons();\n  for (var i = 0; i < icons.length; i++) {\n    icons[i].applyColour();\n  }\n\n  for (var x = 0, input; (input = this.inputList[x]); x++) {\n    for (var y = 0, field; (field = input.fieldRow[y]); y++) {\n      field.applyColour();\n    }\n  }\n};\n\n/**\n * Enable or disable a block.\n */\nBlockly.BlockSvg.prototype.updateDisabled = function() {\n  var children = this.getChildren(false);\n  this.applyColour();\n  if (this.isCollapsed()) {\n    return;\n  }\n  for (var i = 0, child; (child = children[i]); i++) {\n    if (child.rendered) {\n      child.updateDisabled();\n    }\n  }\n};\n\n/**\n * Get the comment icon attached to this block, or null if the block has no\n * comment.\n * @return {Blockly.Comment} The comment icon attached to this block, or null.\n */\nBlockly.BlockSvg.prototype.getCommentIcon = function() {\n  return this.commentIcon_;\n};\n\n/**\n * Set this block's comment text.\n * @param {?string} text The text, or null to delete.\n */\nBlockly.BlockSvg.prototype.setCommentText = function(text) {\n  if (!Blockly.Comment) {\n    throw Error('Missing require for Blockly.Comment');\n  }\n  if (this.commentModel.text == text) {\n    return;\n  }\n  Blockly.BlockSvg.superClass_.setCommentText.call(this, text);\n\n  var shouldHaveComment = text != null;\n  if (!!this.commentIcon_ == shouldHaveComment) {\n    // If the comment's state of existence is correct, but the text is new\n    // that means we're just updating a comment.\n    this.commentIcon_.updateText();\n    return;\n  }\n  if (shouldHaveComment) {\n    this.commentIcon_ = new Blockly.Comment(this);\n    this.comment = this.commentIcon_;  // For backwards compatibility.\n  } else {\n    this.commentIcon_.dispose();\n    this.commentIcon_ = null;\n    this.comment = null;  // For backwards compatibility.\n  }\n  if (this.rendered) {\n    this.render();\n    // Adding or removing a comment icon will cause the block to change shape.\n    this.bumpNeighbours();\n  }\n};\n\n/**\n * Set this block's warning text.\n * @param {?string} text The text, or null to delete.\n * @param {string=} opt_id An optional ID for the warning text to be able to\n *     maintain multiple warnings.\n */\nBlockly.BlockSvg.prototype.setWarningText = function(text, opt_id) {\n  if (!Blockly.Warning) {\n    throw Error('Missing require for Blockly.Warning');\n  }\n  if (!this.warningTextDb_) {\n    // Create a database of warning PIDs.\n    // Only runs once per block (and only those with warnings).\n    this.warningTextDb_ = Object.create(null);\n  }\n  var id = opt_id || '';\n  if (!id) {\n    // Kill all previous pending processes, this edit supersedes them all.\n    for (var n in this.warningTextDb_) {\n      clearTimeout(this.warningTextDb_[n]);\n      delete this.warningTextDb_[n];\n    }\n  } else if (this.warningTextDb_[id]) {\n    // Only queue up the latest change.  Kill any earlier pending process.\n    clearTimeout(this.warningTextDb_[id]);\n    delete this.warningTextDb_[id];\n  }\n  if (this.workspace.isDragging()) {\n    // Don't change the warning text during a drag.\n    // Wait until the drag finishes.\n    var thisBlock = this;\n    this.warningTextDb_[id] = setTimeout(function() {\n      if (thisBlock.workspace) {  // Check block wasn't deleted.\n        delete thisBlock.warningTextDb_[id];\n        thisBlock.setWarningText(text, id);\n      }\n    }, 100);\n    return;\n  }\n  if (this.isInFlyout) {\n    text = null;\n  }\n\n  var changedState = false;\n  if (typeof text == 'string') {\n    // Bubble up to add a warning on top-most collapsed block.\n    var parent = this.getSurroundParent();\n    var collapsedParent = null;\n    while (parent) {\n      if (parent.isCollapsed()) {\n        collapsedParent = parent;\n      }\n      parent = parent.getSurroundParent();\n    }\n    if (collapsedParent) {\n      collapsedParent.setWarningText(Blockly.Msg['COLLAPSED_WARNINGS_WARNING'],\n          Blockly.BlockSvg.COLLAPSED_WARNING_ID);\n    }\n\n    if (!this.warning) {\n      this.warning = new Blockly.Warning(this);\n      changedState = true;\n    }\n    this.warning.setText(/** @type {string} */ (text), id);\n  } else {\n    // Dispose all warnings if no ID is given.\n    if (this.warning && !id) {\n      this.warning.dispose();\n      changedState = true;\n    } else if (this.warning) {\n      var oldText = this.warning.getText();\n      this.warning.setText('', id);\n      var newText = this.warning.getText();\n      if (!newText) {\n        this.warning.dispose();\n      }\n      changedState = oldText != newText;\n    }\n  }\n  if (changedState && this.rendered) {\n    this.render();\n    // Adding or removing a warning icon will cause the block to change shape.\n    this.bumpNeighbours();\n  }\n};\n\n/**\n * Give this block a mutator dialog.\n * @param {Blockly.Mutator} mutator A mutator dialog instance or null to remove.\n */\nBlockly.BlockSvg.prototype.setMutator = function(mutator) {\n  if (this.mutator && this.mutator !== mutator) {\n    this.mutator.dispose();\n  }\n  if (mutator) {\n    mutator.setBlock(this);\n    this.mutator = mutator;\n    mutator.createIcon();\n  }\n  if (this.rendered) {\n    this.render();\n    // Adding or removing a mutator icon will cause the block to change shape.\n    this.bumpNeighbours();\n  }\n};\n\n/**\n * Set whether the block is disabled or not.\n * @param {boolean} disabled True if disabled.\n * @deprecated May 2019\n */\nBlockly.BlockSvg.prototype.setDisabled = function(disabled) {\n  Blockly.utils.deprecation.warn(\n      'BlockSvg.prototype.setDisabled',\n      'May 2019',\n      'May 2020',\n      'BlockSvg.prototype.setEnabled');\n  this.setEnabled(!disabled);\n};\n\n/**\n * Set whether the block is enabled or not.\n * @param {boolean} enabled True if enabled.\n */\nBlockly.BlockSvg.prototype.setEnabled = function(enabled) {\n  if (this.isEnabled() != enabled) {\n    Blockly.BlockSvg.superClass_.setEnabled.call(this, enabled);\n    if (this.rendered && !this.getInheritedDisabled()) {\n      this.updateDisabled();\n    }\n  }\n};\n\n/**\n * Set whether the block is highlighted or not.  Block highlighting is\n * often used to visually mark blocks currently being executed.\n * @param {boolean} highlighted True if highlighted.\n */\nBlockly.BlockSvg.prototype.setHighlighted = function(highlighted) {\n  if (!this.rendered) {\n    return;\n  }\n  this.pathObject.updateHighlighted(highlighted);\n};\n\n/**\n * Select this block.  Highlight it visually.\n */\nBlockly.BlockSvg.prototype.addSelect = function() {\n  this.pathObject.updateSelected(true);\n};\n\n/**\n * Unselect this block.  Remove its highlighting.\n */\nBlockly.BlockSvg.prototype.removeSelect = function() {\n  this.pathObject.updateSelected(false);\n};\n\n/**\n * Update the cursor over this block by adding or removing a class.\n * @param {boolean} enable True if the delete cursor should be shown, false\n *     otherwise.\n * @package\n */\nBlockly.BlockSvg.prototype.setDeleteStyle = function(enable) {\n  this.pathObject.updateDraggingDelete(enable);\n};\n\n\n// Overrides of functions on Blockly.Block that take into account whether the\n// block has been rendered.\n/**\n * Get the colour of a block.\n * @return {string} #RRGGBB string.\n */\nBlockly.BlockSvg.prototype.getColour = function() {\n  return this.style.colourPrimary;\n};\n\n/**\n * Change the colour of a block.\n * @param {number|string} colour HSV hue value, or #RRGGBB string.\n */\nBlockly.BlockSvg.prototype.setColour = function(colour) {\n  Blockly.BlockSvg.superClass_.setColour.call(this, colour);\n  var styleObj = this.workspace.getRenderer().getConstants()\n      .getBlockStyleForColour(this.colour_);\n\n  this.pathObject.setStyle(styleObj.style);\n  this.style = styleObj.style;\n  this.styleName_ = styleObj.name;\n\n  this.applyColour();\n};\n\n/**\n * Set the style and colour values of a block.\n * @param {string} blockStyleName Name of the block style\n * @throws {Error} if the block style does not exist.\n */\nBlockly.BlockSvg.prototype.setStyle = function(blockStyleName) {\n  var blockStyle = this.workspace.getRenderer()\n      .getConstants().getBlockStyle(blockStyleName);\n  this.styleName_ = blockStyleName;\n\n  if (blockStyle) {\n    this.hat = blockStyle.hat;\n    this.pathObject.setStyle(blockStyle);\n    // Set colour to match Block.\n    this.colour_ = blockStyle.colourPrimary;\n    this.style = blockStyle;\n\n    this.applyColour();\n  } else {\n    throw Error('Invalid style name: ' + blockStyleName);\n  }\n};\n\n/**\n * Move this block to the front of the visible workspace.\n * <g> tags do not respect z-index so SVG renders them in the\n * order that they are in the DOM.  By placing this block first within the\n * block group's <g>, it will render on top of any other blocks.\n * @package\n */\nBlockly.BlockSvg.prototype.bringToFront = function() {\n  var block = this;\n  do {\n    var root = block.getSvgRoot();\n    var parent = root.parentNode;\n    var childNodes = parent.childNodes;\n    // Avoid moving the block if it's already at the bottom.\n    if (childNodes[childNodes.length - 1] !== root) {\n      parent.appendChild(root);\n    }\n    block = block.getParent();\n  } while (block);\n};\n\n/**\n * Set whether this block can chain onto the bottom of another block.\n * @param {boolean} newBoolean True if there can be a previous statement.\n * @param {(string|Array.<string>|null)=} opt_check Statement type or\n *     list of statement types.  Null/undefined if any type could be connected.\n */\nBlockly.BlockSvg.prototype.setPreviousStatement = function(newBoolean,\n    opt_check) {\n  Blockly.BlockSvg.superClass_.setPreviousStatement.call(this, newBoolean,\n      opt_check);\n\n  if (this.rendered) {\n    this.render();\n    this.bumpNeighbours();\n  }\n};\n\n/**\n * Set whether another block can chain onto the bottom of this block.\n * @param {boolean} newBoolean True if there can be a next statement.\n * @param {(string|Array.<string>|null)=} opt_check Statement type or\n *     list of statement types.  Null/undefined if any type could be connected.\n */\nBlockly.BlockSvg.prototype.setNextStatement = function(newBoolean, opt_check) {\n  Blockly.BlockSvg.superClass_.setNextStatement.call(this, newBoolean,\n      opt_check);\n\n  if (this.rendered) {\n    this.render();\n    this.bumpNeighbours();\n  }\n};\n\n/**\n * Set whether this block returns a value.\n * @param {boolean} newBoolean True if there is an output.\n * @param {(string|Array.<string>|null)=} opt_check Returned type or list\n *     of returned types.  Null or undefined if any type could be returned\n *     (e.g. variable get).\n */\nBlockly.BlockSvg.prototype.setOutput = function(newBoolean, opt_check) {\n  Blockly.BlockSvg.superClass_.setOutput.call(this, newBoolean, opt_check);\n\n  if (this.rendered) {\n    this.render();\n    this.bumpNeighbours();\n  }\n};\n\n/**\n * Set whether value inputs are arranged horizontally or vertically.\n * @param {boolean} newBoolean True if inputs are horizontal.\n */\nBlockly.BlockSvg.prototype.setInputsInline = function(newBoolean) {\n  Blockly.BlockSvg.superClass_.setInputsInline.call(this, newBoolean);\n\n  if (this.rendered) {\n    this.render();\n    this.bumpNeighbours();\n  }\n};\n\n/**\n * Remove an input from this block.\n * @param {string} name The name of the input.\n * @param {boolean=} opt_quiet True to prevent error if input is not present.\n * @return {boolean} True if operation succeeds, false if input is not present and opt_quiet is true\n * @throws {Error} if the input is not present and\n *     opt_quiet is not true.\n */\nBlockly.BlockSvg.prototype.removeInput = function(name, opt_quiet) {\n  var removed = Blockly.BlockSvg.superClass_.removeInput.call(this, name, opt_quiet);\n\n  if (this.rendered) {\n    this.render();\n    // Removing an input will cause the block to change shape.\n    this.bumpNeighbours();\n  }\n\n  return removed;\n};\n\n/**\n * Move a numbered input to a different location on this block.\n * @param {number} inputIndex Index of the input to move.\n * @param {number} refIndex Index of input that should be after the moved input.\n */\nBlockly.BlockSvg.prototype.moveNumberedInputBefore = function(\n    inputIndex, refIndex) {\n  Blockly.BlockSvg.superClass_.moveNumberedInputBefore.call(this, inputIndex,\n      refIndex);\n\n  if (this.rendered) {\n    this.render();\n    // Moving an input will cause the block to change shape.\n    this.bumpNeighbours();\n  }\n};\n\n/**\n * Add a value input, statement input or local variable to this block.\n * @param {number} type Either Blockly.INPUT_VALUE or Blockly.NEXT_STATEMENT or\n *     Blockly.DUMMY_INPUT.\n * @param {string} name Language-neutral identifier which may used to find this\n *     input again.  Should be unique to this block.\n * @return {!Blockly.Input} The input object created.\n * @private\n */\nBlockly.BlockSvg.prototype.appendInput_ = function(type, name) {\n  var input = Blockly.BlockSvg.superClass_.appendInput_.call(this, type, name);\n\n  if (this.rendered) {\n    this.render();\n    // Adding an input will cause the block to change shape.\n    this.bumpNeighbours();\n  }\n  return input;\n};\n\n/**\n * Sets whether this block's connections are tracked in the database or not.\n *\n * Used by the deserializer to be more efficient. Setting a connection's\n * tracked_ value to false keeps it from adding itself to the db when it\n * gets its first moveTo call, saving expensive ops for later.\n * @param {boolean} track If true, start tracking. If false, stop tracking.\n * @package\n */\nBlockly.BlockSvg.prototype.setConnectionTracking = function(track) {\n  if (this.previousConnection) {\n    this.previousConnection.setTracking(track);\n  }\n  if (this.outputConnection) {\n    this.outputConnection.setTracking(track);\n  }\n  if (this.nextConnection) {\n    this.nextConnection.setTracking(track);\n    var child = this.nextConnection.targetBlock();\n    if (child) {\n      child.setConnectionTracking(track);\n    }\n  }\n\n  if (this.collapsed_) {\n    // When track is true, we don't want to start tracking collapsed\n    // connections. When track is false, we're already not tracking\n    // collapsed connections, so no need to update.\n    return;\n  }\n\n  for (var i = 0; i < this.inputList.length; i++) {\n    var conn = this.inputList[i].connection;\n    if (conn) {\n      conn.setTracking(track);\n\n      // Pass tracking on down the chain.\n      var block = conn.targetBlock();\n      if (block) {\n        block.setConnectionTracking(track);\n      }\n    }\n  }\n};\n\n/**\n * Returns connections originating from this block.\n * @param {boolean} all If true, return all connections even hidden ones.\n *     Otherwise, for a non-rendered block return an empty list, and for a\n *     collapsed block don't return inputs connections.\n * @return {!Array.<!Blockly.RenderedConnection>} Array of connections.\n * @package\n */\nBlockly.BlockSvg.prototype.getConnections_ = function(all) {\n  var myConnections = [];\n  if (all || this.rendered) {\n    if (this.outputConnection) {\n      myConnections.push(this.outputConnection);\n    }\n    if (this.previousConnection) {\n      myConnections.push(this.previousConnection);\n    }\n    if (this.nextConnection) {\n      myConnections.push(this.nextConnection);\n    }\n    if (all || !this.collapsed_) {\n      for (var i = 0, input; (input = this.inputList[i]); i++) {\n        if (input.connection) {\n          myConnections.push(input.connection);\n        }\n      }\n    }\n  }\n  return myConnections;\n};\n\n/**\n * Walks down a stack of blocks and finds the last next connection on the stack.\n * @return {Blockly.RenderedConnection} The last next connection on the stack,\n *     or null.\n * @package\n * @override\n */\nBlockly.BlockSvg.prototype.lastConnectionInStack = function() {\n  return /** @type {Blockly.RenderedConnection} */ (\n    Blockly.BlockSvg.superClass_.lastConnectionInStack.call(this));\n};\n\n/**\n * Find the connection on this block that corresponds to the given connection\n * on the other block.\n * Used to match connections between a block and its insertion marker.\n * @param {!Blockly.Block} otherBlock The other block to match against.\n * @param {!Blockly.Connection} conn The other connection to match.\n * @return {Blockly.RenderedConnection} The matching connection on this block,\n *     or null.\n * @package\n * @override\n */\nBlockly.BlockSvg.prototype.getMatchingConnection = function(otherBlock, conn) {\n  return /** @type {Blockly.RenderedConnection} */ (\n    Blockly.BlockSvg.superClass_.getMatchingConnection.call(this,\n        otherBlock, conn));\n};\n\n/**\n * Create a connection of the specified type.\n * @param {number} type The type of the connection to create.\n * @return {!Blockly.RenderedConnection} A new connection of the specified type.\n * @protected\n */\nBlockly.BlockSvg.prototype.makeConnection_ = function(type) {\n  return new Blockly.RenderedConnection(this, type);\n};\n\n/**\n * Bump unconnected blocks out of alignment.  Two blocks which aren't actually\n * connected should not coincidentally line up on screen.\n */\nBlockly.BlockSvg.prototype.bumpNeighbours = function() {\n  if (!this.workspace) {\n    return;  // Deleted block.\n  }\n  if (this.workspace.isDragging()) {\n    return;  // Don't bump blocks during a drag.\n  }\n  var rootBlock = this.getRootBlock();\n  if (rootBlock.isInFlyout) {\n    return;  // Don't move blocks around in a flyout.\n  }\n  // Loop through every connection on this block.\n  var myConnections = this.getConnections_(false);\n  for (var i = 0, connection; (connection = myConnections[i]); i++) {\n\n    // Spider down from this block bumping all sub-blocks.\n    if (connection.isConnected() && connection.isSuperior()) {\n      connection.targetBlock().bumpNeighbours();\n    }\n\n    var neighbours = connection.neighbours(Blockly.SNAP_RADIUS);\n    for (var j = 0, otherConnection; (otherConnection = neighbours[j]); j++) {\n\n      // If both connections are connected, that's probably fine.  But if\n      // either one of them is unconnected, then there could be confusion.\n      if (!connection.isConnected() || !otherConnection.isConnected()) {\n        // Only bump blocks if they are from different tree structures.\n        if (otherConnection.getSourceBlock().getRootBlock() != rootBlock) {\n\n          // Always bump the inferior block.\n          if (connection.isSuperior()) {\n            otherConnection.bumpAwayFrom(connection);\n          } else {\n            connection.bumpAwayFrom(otherConnection);\n          }\n        }\n      }\n    }\n  }\n};\n\n/**\n * Schedule snapping to grid and bumping neighbours to occur after a brief\n * delay.\n * @package\n */\nBlockly.BlockSvg.prototype.scheduleSnapAndBump = function() {\n  var block = this;\n  // Ensure that any snap and bump are part of this move's event group.\n  var group = Blockly.Events.getGroup();\n\n  setTimeout(function() {\n    Blockly.Events.setGroup(group);\n    block.snapToGrid();\n    Blockly.Events.setGroup(false);\n  }, Blockly.BUMP_DELAY / 2);\n\n  setTimeout(function() {\n    Blockly.Events.setGroup(group);\n    block.bumpNeighbours();\n    Blockly.Events.setGroup(false);\n  }, Blockly.BUMP_DELAY);\n};\n\n/**\n * Position a block so that it doesn't move the target block when connected.\n * The block to position is usually either the first block in a dragged stack or\n * an insertion marker.\n * @param {!Blockly.RenderedConnection} sourceConnection The connection on the\n *     moving block's stack.\n * @param {!Blockly.RenderedConnection} targetConnection The connection that\n *     should stay stationary as this block is positioned.\n * @package\n */\nBlockly.BlockSvg.prototype.positionNearConnection = function(sourceConnection,\n    targetConnection) {\n  // We only need to position the new block if it's before the existing one,\n  // otherwise its position is set by the previous block.\n  if (sourceConnection.type == Blockly.NEXT_STATEMENT ||\n      sourceConnection.type == Blockly.INPUT_VALUE) {\n    var dx = targetConnection.x - sourceConnection.x;\n    var dy = targetConnection.y - sourceConnection.y;\n\n    this.moveBy(dx, dy);\n  }\n};\n\n/**\n * Return the parent block or null if this block is at the top level.\n * @return {Blockly.BlockSvg} The block that holds the current block.\n * @override\n */\nBlockly.BlockSvg.prototype.getParent = function() {\n  return /** @type {!Blockly.BlockSvg} */ (\n    Blockly.BlockSvg.superClass_.getParent.call(this));\n};\n\n/**\n * Return the top-most block in this block's tree.\n * This will return itself if this block is at the top level.\n * @return {!Blockly.BlockSvg} The root block.\n * @override\n */\nBlockly.BlockSvg.prototype.getRootBlock = function() {\n  return /** @type {!Blockly.BlockSvg} */ (\n    Blockly.BlockSvg.superClass_.getRootBlock.call(this));\n};\n\n/**\n * Lays out and reflows a block based on its contents and settings.\n * @param {boolean=} opt_bubble If false, just render this block.\n *   If true, also render block's parent, grandparent, etc.  Defaults to true.\n */\nBlockly.BlockSvg.prototype.render = function(opt_bubble) {\n  if (this.renderIsInProgress_) {\n    return;  // Don't allow recursive renders.\n  }\n  this.renderIsInProgress_ = true;\n  try {\n    this.rendered = true;\n    Blockly.utils.dom.startTextWidthCache();\n\n    if (this.isCollapsed()) {\n      this.updateCollapsed_();\n    }\n    this.workspace.getRenderer().render(this);\n    this.updateConnectionLocations_();\n\n    if (opt_bubble !== false) {\n      var parentBlock = this.getParent();\n      if (parentBlock) {\n        parentBlock.render(true);\n      } else {\n        // Top-most block. Fire an event to allow scrollbars to resize.\n        this.workspace.resizeContents();\n      }\n    }\n\n    Blockly.utils.dom.stopTextWidthCache();\n    this.updateMarkers_();\n  } finally {\n    this.renderIsInProgress_ = false;\n  }\n};\n\n/**\n * Redraw any attached marker or cursor svgs if needed.\n * @protected\n */\nBlockly.BlockSvg.prototype.updateMarkers_ = function() {\n  if (this.workspace.keyboardAccessibilityMode && this.pathObject.cursorSvg) {\n    this.workspace.getCursor().draw();\n  }\n  if (this.workspace.keyboardAccessibilityMode && this.pathObject.markerSvg) {\n    this.workspace.getMarker(Blockly.navigation.MARKER_NAME).draw();\n  }\n};\n\n/**\n * Update all of the connections on this block with the new locations calculated\n * during rendering.  Also move all of the connected blocks based on the new\n * connection locations.\n * @private\n */\nBlockly.BlockSvg.prototype.updateConnectionLocations_ = function() {\n  var blockTL = this.getRelativeToSurfaceXY();\n  // Don't tighten previous or output connections because they are inferior\n  // connections.\n  if (this.previousConnection) {\n    this.previousConnection.moveToOffset(blockTL);\n  }\n  if (this.outputConnection) {\n    this.outputConnection.moveToOffset(blockTL);\n  }\n\n  for (var i = 0; i < this.inputList.length; i++) {\n    var conn = this.inputList[i].connection;\n    if (conn) {\n      conn.moveToOffset(blockTL);\n      if (conn.isConnected()) {\n        conn.tighten();\n      }\n    }\n  }\n\n  if (this.nextConnection) {\n    this.nextConnection.moveToOffset(blockTL);\n    if (this.nextConnection.isConnected()) {\n      this.nextConnection.tighten();\n    }\n  }\n};\n\n/**\n * Add the cursor svg to this block's svg group.\n * @param {SVGElement} cursorSvg The svg root of the cursor to be added to the\n *     block svg group.\n * @package\n */\nBlockly.BlockSvg.prototype.setCursorSvg = function(cursorSvg) {\n  this.pathObject.setCursorSvg(cursorSvg);\n};\n\n/**\n * Add the marker svg to this block's svg group.\n * @param {SVGElement} markerSvg The svg root of the marker to be added to the\n *     block svg group.\n * @package\n */\nBlockly.BlockSvg.prototype.setMarkerSvg = function(markerSvg) {\n  this.pathObject.setMarkerSvg(markerSvg);\n};\n\n/**\n * Returns a bounding box describing the dimensions of this block\n * and any blocks stacked below it.\n * @return {!{height: number, width: number}} Object with height and width\n *    properties in workspace units.\n * @package\n */\nBlockly.BlockSvg.prototype.getHeightWidth = function() {\n  var height = this.height;\n  var width = this.width;\n  // Recursively add size of subsequent blocks.\n  var nextBlock = this.getNextBlock();\n  if (nextBlock) {\n    var nextHeightWidth = nextBlock.getHeightWidth();\n    var workspace = /** @type {!Blockly.WorkspaceSvg} */ (this.workspace);\n    var tabHeight = workspace.getRenderer().getConstants().NOTCH_HEIGHT;\n    height += nextHeightWidth.height - tabHeight;\n    width = Math.max(width, nextHeightWidth.width);\n  }\n  return {height: height, width: width};\n};\n\n/**\n * Visual effect to show that if the dragging block is dropped, this block will\n * be replaced.  If a shadow block, it will disappear.  Otherwise it will bump.\n * @param {boolean} add True if highlighting should be added.\n * @package\n */\nBlockly.BlockSvg.prototype.fadeForReplacement = function(add) {\n  this.pathObject.updateReplacementFade(add);\n};\n\n/**\n * Visual effect to show that if the dragging block is dropped it will connect\n * to this input.\n * @param {Blockly.Connection} conn The connection on the input to highlight.\n * @param {boolean} add True if highlighting should be added.\n * @package\n */\nBlockly.BlockSvg.prototype.highlightShapeForInput = function(conn, add) {\n  this.pathObject.updateShapeForInputHighlight(conn, add);\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Namespace for block rendering functionality.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\n/**\n * The top level namespace for block rendering.\n * @namespace Blockly.blockRendering\n */\ngoog.provide('Blockly.blockRendering');\n\ngoog.require('Blockly.registry');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * Whether or not the debugger is turned on.\n * @type {boolean}\n * @package\n */\nBlockly.blockRendering.useDebugger = false;\n\n/**\n * Registers a new renderer.\n * @param {string} name The name of the renderer.\n * @param {!Function} rendererClass The new renderer class\n *     to register.\n * @throws {Error} if a renderer with the same name has already been registered.\n */\nBlockly.blockRendering.register = function(name, rendererClass) {\n  Blockly.registry.register(Blockly.registry.Type.RENDERER, name,\n      rendererClass);\n};\n\n/**\n * Unregisters the renderer registered with the given name.\n * @param {string} name The name of the renderer.\n */\nBlockly.blockRendering.unregister = function(name) {\n  Blockly.registry.unregister(Blockly.registry.Type.RENDERER, name);\n};\n/**\n * Turn on the blocks debugger.\n * @package\n */\nBlockly.blockRendering.startDebugger = function() {\n  Blockly.blockRendering.useDebugger = true;\n};\n\n/**\n * Turn off the blocks debugger.\n * @package\n */\nBlockly.blockRendering.stopDebugger = function() {\n  Blockly.blockRendering.useDebugger = false;\n};\n\n/**\n * Initialize anything needed for rendering (constants, etc).\n * @param {!string} name Name of the renderer to initialize.\n * @param {!Blockly.Theme} theme The workspace theme object.\n * @param {Object=} opt_rendererOverrides Rendering constant overrides.\n * @return {!Blockly.blockRendering.Renderer} The new instance of a renderer.\n *     Already initialized.\n * @package\n */\n\nBlockly.blockRendering.init = function(name, theme, opt_rendererOverrides) {\n  var rendererClass = Blockly.registry.getClass(\n      Blockly.registry.Type.RENDERER, name);\n  var renderer = new rendererClass(name);\n  renderer.init(theme, opt_rendererOverrides);\n  return renderer;\n};\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A database of all the rendered connections that could\n *    possibly be connected to (i.e. not collapsed, etc).\n *    Sorted by y coordinate.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.ConnectionDB');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.RenderedConnection');\n\ngoog.requireType('Blockly.IConnectionChecker');\n\n\n/**\n * Database of connections.\n * Connections are stored in order of their vertical component.  This way\n * connections in an area may be looked up quickly using a binary search.\n * @param {!Blockly.IConnectionChecker} checker The workspace's\n *     connection type checker, used to decide if connections are valid during a\n *     drag.\n * @constructor\n */\nBlockly.ConnectionDB = function(checker) {\n  /**\n   * Array of connections sorted by y position in workspace units.\n   * @type {!Array.<!Blockly.RenderedConnection>}\n   * @private\n   */\n  this.connections_ = [];\n  /**\n   * The workspace's connection type checker, used to decide if connections are\n   * valid during a drag.\n   * @type {!Blockly.IConnectionChecker}\n   * @private\n   */\n  this.connectionChecker_ = checker;\n};\n\n/**\n * Add a connection to the database. Should not already exist in the database.\n * @param {!Blockly.RenderedConnection} connection The connection to be added.\n * @param {number} yPos The y position used to decide where to insert the\n *    connection.\n * @package\n */\nBlockly.ConnectionDB.prototype.addConnection = function(connection, yPos) {\n  var index = this.calculateIndexForYPos_(yPos);\n  this.connections_.splice(index, 0, connection);\n};\n\n/**\n * Finds the index of the given connection.\n *\n * Starts by doing a binary search to find the approximate location, then\n * linearly searches nearby for the exact connection.\n * @param {!Blockly.RenderedConnection} conn The connection to find.\n * @param {number} yPos The y position used to find the index of the connection.\n * @return {number} The index of the connection, or -1 if the connection was\n *     not found.\n * @private\n */\nBlockly.ConnectionDB.prototype.findIndexOfConnection_ = function(conn, yPos) {\n  if (!this.connections_.length) {\n    return -1;\n  }\n\n  var bestGuess = this.calculateIndexForYPos_(yPos);\n  if (bestGuess >= this.connections_.length) {\n    // Not in list\n    return -1;\n  }\n\n  yPos = conn.y;\n  // Walk forward and back on the y axis looking for the connection.\n  var pointerMin = bestGuess;\n  var pointerMax = bestGuess;\n  while (pointerMin >= 0 && this.connections_[pointerMin].y == yPos) {\n    if (this.connections_[pointerMin] == conn) {\n      return pointerMin;\n    }\n    pointerMin--;\n  }\n\n  while (pointerMax < this.connections_.length &&\n         this.connections_[pointerMax].y == yPos) {\n    if (this.connections_[pointerMax] == conn) {\n      return pointerMax;\n    }\n    pointerMax++;\n  }\n  return -1;\n};\n\n/**\n * Finds the correct index for the given y position.\n * @param {number} yPos The y position used to decide where to\n *    insert the connection.\n * @return {number} The candidate index.\n * @private\n */\nBlockly.ConnectionDB.prototype.calculateIndexForYPos_ = function(yPos) {\n  if (!this.connections_.length) {\n    return 0;\n  }\n  var pointerMin = 0;\n  var pointerMax = this.connections_.length;\n  while (pointerMin < pointerMax) {\n    var pointerMid = Math.floor((pointerMin + pointerMax) / 2);\n    if (this.connections_[pointerMid].y < yPos) {\n      pointerMin = pointerMid + 1;\n    } else if (this.connections_[pointerMid].y > yPos) {\n      pointerMax = pointerMid;\n    } else {\n      pointerMin = pointerMid;\n      break;\n    }\n  }\n  return pointerMin;\n};\n\n/**\n * Remove a connection from the database.  Must already exist in DB.\n * @param {!Blockly.RenderedConnection} connection The connection to be removed.\n * @param {number} yPos The y position used to find the index of the connection.\n * @throws {Error} If the connection cannot be found in the database.\n */\nBlockly.ConnectionDB.prototype.removeConnection = function(connection, yPos) {\n  var index = this.findIndexOfConnection_(connection, yPos);\n  if (index == -1) {\n    throw Error('Unable to find connection in connectionDB.');\n  }\n  this.connections_.splice(index, 1);\n};\n\n/**\n * Find all nearby connections to the given connection.\n * Type checking does not apply, since this function is used for bumping.\n * @param {!Blockly.RenderedConnection} connection The connection whose\n *     neighbours should be returned.\n * @param {number} maxRadius The maximum radius to another connection.\n * @return {!Array.<!Blockly.RenderedConnection>} List of connections.\n */\nBlockly.ConnectionDB.prototype.getNeighbours = function(connection, maxRadius) {\n  var db = this.connections_;\n  var currentX = connection.x;\n  var currentY = connection.y;\n\n  // Binary search to find the closest y location.\n  var pointerMin = 0;\n  var pointerMax = db.length - 2;\n  var pointerMid = pointerMax;\n  while (pointerMin < pointerMid) {\n    if (db[pointerMid].y < currentY) {\n      pointerMin = pointerMid;\n    } else {\n      pointerMax = pointerMid;\n    }\n    pointerMid = Math.floor((pointerMin + pointerMax) / 2);\n  }\n\n  var neighbours = [];\n  /**\n   * Computes if the current connection is within the allowed radius of another\n   * connection.\n   * This function is a closure and has access to outside variables.\n   * @param {number} yIndex The other connection's index in the database.\n   * @return {boolean} True if the current connection's vertical distance from\n   *     the other connection is less than the allowed radius.\n   */\n  function checkConnection_(yIndex) {\n    var dx = currentX - db[yIndex].x;\n    var dy = currentY - db[yIndex].y;\n    var r = Math.sqrt(dx * dx + dy * dy);\n    if (r <= maxRadius) {\n      neighbours.push(db[yIndex]);\n    }\n    return dy < maxRadius;\n  }\n\n  // Walk forward and back on the y axis looking for the closest x,y point.\n  pointerMin = pointerMid;\n  pointerMax = pointerMid;\n  if (db.length) {\n    while (pointerMin >= 0 && checkConnection_(pointerMin)) {\n      pointerMin--;\n    }\n    do {\n      pointerMax++;\n    } while (pointerMax < db.length && checkConnection_(pointerMax));\n  }\n\n  return neighbours;\n};\n\n/**\n * Is the candidate connection close to the reference connection.\n * Extremely fast; only looks at Y distance.\n * @param {number} index Index in database of candidate connection.\n * @param {number} baseY Reference connection's Y value.\n * @param {number} maxRadius The maximum radius to another connection.\n * @return {boolean} True if connection is in range.\n * @private\n */\nBlockly.ConnectionDB.prototype.isInYRange_ = function(index, baseY, maxRadius) {\n  return (Math.abs(this.connections_[index].y - baseY) <= maxRadius);\n};\n\n/**\n * Find the closest compatible connection to this connection.\n * @param {!Blockly.RenderedConnection} conn The connection searching for a compatible\n *     mate.\n * @param {number} maxRadius The maximum radius to another connection.\n * @param {!Blockly.utils.Coordinate} dxy Offset between this connection's\n *     location in the database and the current location (as a result of\n *     dragging).\n * @return {!{connection: Blockly.RenderedConnection, radius: number}}\n *     Contains two properties: 'connection' which is either another\n *     connection or null, and 'radius' which is the distance.\n */\nBlockly.ConnectionDB.prototype.searchForClosest = function(conn, maxRadius,\n    dxy) {\n  if (!this.connections_.length) {\n    // Don't bother.\n    return {connection: null, radius: maxRadius};\n  }\n\n  // Stash the values of x and y from before the drag.\n  var baseY = conn.y;\n  var baseX = conn.x;\n\n  conn.x = baseX + dxy.x;\n  conn.y = baseY + dxy.y;\n\n  // calculateIndexForYPos_ finds an index for insertion, which is always\n  // after any block with the same y index.  We want to search both forward\n  // and back, so search on both sides of the index.\n  var closestIndex = this.calculateIndexForYPos_(conn.y);\n\n  var bestConnection = null;\n  var bestRadius = maxRadius;\n  var temp;\n\n  // Walk forward and back on the y axis looking for the closest x,y point.\n  var pointerMin = closestIndex - 1;\n  while (pointerMin >= 0 && this.isInYRange_(pointerMin, conn.y, maxRadius)) {\n    temp = this.connections_[pointerMin];\n    if (this.connectionChecker_.canConnect(conn, temp, true, bestRadius)) {\n      bestConnection = temp;\n      bestRadius = temp.distanceFrom(conn);\n    }\n    pointerMin--;\n  }\n\n  var pointerMax = closestIndex;\n  while (pointerMax < this.connections_.length &&\n      this.isInYRange_(pointerMax, conn.y, maxRadius)) {\n    temp = this.connections_[pointerMax];\n    if (this.connectionChecker_.canConnect(conn, temp, true, bestRadius)) {\n      bestConnection = temp;\n      bestRadius = temp.distanceFrom(conn);\n    }\n    pointerMax++;\n  }\n\n  // Reset the values of x and y.\n  conn.x = baseX;\n  conn.y = baseY;\n\n  // If there were no valid connections, bestConnection will be null.\n  return {connection: bestConnection, radius: bestRadius};\n};\n\n/**\n * Initialize a set of connection DBs for a workspace.\n * @param {!Blockly.IConnectionChecker} checker The workspace's\n *     connection checker, used to decide if connections are valid during a drag.\n * @return {!Array.<!Blockly.ConnectionDB>} Array of databases.\n */\nBlockly.ConnectionDB.init = function(checker) {\n  // Create four databases, one for each connection type.\n  var dbList = [];\n  dbList[Blockly.INPUT_VALUE] = new Blockly.ConnectionDB(checker);\n  dbList[Blockly.OUTPUT_VALUE] = new Blockly.ConnectionDB(checker);\n  dbList[Blockly.NEXT_STATEMENT] = new Blockly.ConnectionDB(checker);\n  dbList[Blockly.PREVIOUS_STATEMENT] = new Blockly.ConnectionDB(checker);\n  return dbList;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object in charge of managing markers and the cursor.\n * @author aschmiedt@google.com (Abby Schmiedt)\n */\n'use strict';\n\ngoog.provide('Blockly.MarkerManager');\n\ngoog.require('Blockly.Cursor');\ngoog.require('Blockly.Marker');\n\n\n/**\n * Class to manage the multiple markers and the cursor on a workspace.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace for the marker manager.\n * @constructor\n * @package\n */\nBlockly.MarkerManager = function(workspace){\n  /**\n   * The cursor.\n   * @type {Blockly.Cursor}\n   * @private\n   */\n  this.cursor_ = null;\n\n  /**\n   * The cursor's svg element.\n   * @type {SVGElement}\n   * @private\n   */\n  this.cursorSvg_ = null;\n\n  /**\n   * The map of markers for the workspace.\n   * @type {!Object<string, !Blockly.Marker>}\n   * @private\n   */\n  this.markers_ = {};\n\n  /**\n   * The workspace this marker manager is associated with.\n   * @type {!Blockly.WorkspaceSvg}\n   * @private\n   */\n  this.workspace_ = workspace;\n};\n\n/**\n * Register the marker by adding it to the map of markers.\n * @param {string} id A unique identifier for the marker.\n * @param {!Blockly.Marker} marker The marker to register.\n */\nBlockly.MarkerManager.prototype.registerMarker = function(id, marker) {\n  if (this.markers_[id]) {\n    this.unregisterMarker(id);\n  }\n  marker.setDrawer(this.workspace_.getRenderer()\n      .makeMarkerDrawer(this.workspace_, marker));\n  this.setMarkerSvg(marker.getDrawer().createDom());\n  this.markers_[id] = marker;\n};\n\n/**\n * Unregister the marker by removing it from the map of markers.\n * @param {string} id The id of the marker to unregister.\n */\nBlockly.MarkerManager.prototype.unregisterMarker = function(id) {\n  var marker = this.markers_[id];\n  if (marker) {\n    marker.dispose();\n    delete this.markers_[id];\n  } else {\n    throw Error('Marker with id ' + id + ' does not exist. Can only unregister' +\n        'markers that exist.');\n  }\n};\n\n/**\n * Get the cursor for the workspace.\n * @return {Blockly.Cursor} The cursor for this workspace.\n */\nBlockly.MarkerManager.prototype.getCursor = function() {\n  return this.cursor_;\n};\n\n/**\n * Get a single marker that corresponds to the given id.\n * @param {string} id A unique identifier for the marker.\n * @return {Blockly.Marker} The marker that corresponds to the given id, or null\n *     if none exists.\n */\nBlockly.MarkerManager.prototype.getMarker = function(id) {\n  return this.markers_[id];\n};\n\n/**\n * Sets the cursor and initializes the drawer for use with keyboard navigation.\n * @param {Blockly.Cursor} cursor The cursor used to move around this workspace.\n */\nBlockly.MarkerManager.prototype.setCursor = function(cursor) {\n  if (this.cursor_ && this.cursor_.getDrawer()) {\n    this.cursor_.getDrawer().dispose();\n  }\n  this.cursor_ = cursor;\n  if (this.cursor_) {\n    var drawer = this.workspace_.getRenderer()\n        .makeMarkerDrawer(this.workspace_, this.cursor_);\n    this.cursor_.setDrawer(drawer);\n    this.setCursorSvg(this.cursor_.getDrawer().createDom());\n  }\n};\n\n/**\n * Add the cursor svg to this workspace svg group.\n * @param {SVGElement} cursorSvg The svg root of the cursor to be added to the\n *     workspace svg group.\n * @package\n */\nBlockly.MarkerManager.prototype.setCursorSvg = function(cursorSvg) {\n  if (!cursorSvg) {\n    this.cursorSvg_ = null;\n    return;\n  }\n\n  this.workspace_.getBlockCanvas().appendChild(cursorSvg);\n  this.cursorSvg_ = cursorSvg;\n};\n\n/**\n * Add the marker svg to this workspaces svg group.\n * @param {SVGElement} markerSvg The svg root of the marker to be added to the\n *     workspace svg group.\n * @package\n */\nBlockly.MarkerManager.prototype.setMarkerSvg = function(markerSvg) {\n  if (!markerSvg) {\n    this.markerSvg_ = null;\n    return;\n  }\n\n  if (this.workspace_.getBlockCanvas()) {\n    if (this.cursorSvg_) {\n      this.workspace_.getBlockCanvas().insertBefore(markerSvg, this.cursorSvg_);\n    } else {\n      this.workspace_.getBlockCanvas().appendChild(markerSvg);\n    }\n  }\n};\n\n/**\n * Redraw the attached cursor svg if needed.\n * @package\n */\nBlockly.MarkerManager.prototype.updateMarkers = function() {\n  if (this.workspace_.keyboardAccessibilityMode && this.cursorSvg_) {\n    this.workspace_.getCursor().draw();\n  }\n};\n\n/**\n * Dispose of the marker manager.\n * Go through and delete all markers associated with this marker manager.\n * @suppress {checkTypes}\n * @package\n */\nBlockly.MarkerManager.prototype.dispose = function() {\n  var markerIds = Object.keys(this.markers_);\n  for (var i = 0, markerId; (markerId = markerIds[i]); i++) {\n    this.unregisterMarker(markerId);\n  }\n  this.markers_ = null;\n  if (this.cursor_) {\n    this.cursor_.dispose();\n    this.cursor_ = null;\n  }\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object in charge of storing and updating a workspace theme\n *     and UI components.\n * @author aschmiedt@google.com (Abby Schmiedt)\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.ThemeManager');\n\ngoog.require('Blockly.Theme');\n\n\n/**\n * Class for storing and updating a workspace's theme and UI components.\n * @param {!Blockly.WorkspaceSvg} workspace The main workspace.\n * @param {!Blockly.Theme} theme The workspace theme.\n * @constructor\n * @package\n */\nBlockly.ThemeManager = function(workspace, theme) {\n\n  /**\n   * The main workspace.\n   * @type {!Blockly.WorkspaceSvg}\n   * @private\n   */\n  this.workspace_ = workspace;\n\n  /**\n   * The Blockly theme to use.\n   * @type {!Blockly.Theme}\n   * @private\n   */\n  this.theme_ = theme;\n\n  /**\n   * A list of workspaces that are subscribed to this theme.\n   * @type {!Array.<Blockly.Workspace>}\n   * @private\n   */\n  this.subscribedWorkspaces_ = [];\n\n  /**\n   * A map of subscribed UI components, keyed by component name.\n   * @type {!Object.<string, !Array.<!Blockly.ThemeManager.Component>>}\n   * @private\n   */\n  this.componentDB_ = Object.create(null);\n};\n\n/**\n * A Blockly UI component type.\n * @typedef {{\n  *            element:!Element,\n  *            propertyName:string\n  *          }}\n  */\nBlockly.ThemeManager.Component;\n\n/**\n * Get the workspace theme.\n * @return {!Blockly.Theme} The workspace theme.\n * @package\n */\nBlockly.ThemeManager.prototype.getTheme = function() {\n  return this.theme_;\n};\n\n/**\n * Set the workspace theme, and refresh the workspace and all components.\n * @param {!Blockly.Theme} theme The workspace theme.\n * @package\n */\nBlockly.ThemeManager.prototype.setTheme = function(theme) {\n  var prevTheme = this.theme_;\n  this.theme_ = theme;\n\n  // Set the theme name onto the injection div.\n  var injectionDiv = this.workspace_.getInjectionDiv();\n  if (injectionDiv) {\n    if (prevTheme) {\n      Blockly.utils.dom.removeClass(injectionDiv, prevTheme.getClassName());\n    }\n    Blockly.utils.dom.addClass(injectionDiv, this.theme_.getClassName());\n  }\n\n  // Refresh all subscribed workspaces.\n  for (var i = 0, workspace; (workspace = this.subscribedWorkspaces_[i]); i++) {\n    workspace.refreshTheme();\n  }\n\n  // Refresh all registered Blockly UI components.\n  for (var i = 0, keys = Object.keys(this.componentDB_),\n    key; (key = keys[i]); i++) {\n    for (var j = 0, component; (component = this.componentDB_[key][j]); j++) {\n      var element = component.element;\n      var propertyName = component.propertyName;\n      var style = this.theme_ && this.theme_.getComponentStyle(key);\n      element.style[propertyName] = style || '';\n    }\n  }\n\n  Blockly.hideChaff();\n};\n\n/**\n * Subscribe a workspace to changes to the selected theme.  If a new theme is\n * set, the workspace is called to refresh its blocks.\n * @param {!Blockly.Workspace} workspace The workspace to subscribe.\n * @package\n */\nBlockly.ThemeManager.prototype.subscribeWorkspace = function(workspace) {\n  this.subscribedWorkspaces_.push(workspace);\n};\n\n/**\n * Unsubscribe a workspace to changes to the selected theme.\n * @param {!Blockly.Workspace} workspace The workspace to unsubscribe.\n * @package\n */\nBlockly.ThemeManager.prototype.unsubscribeWorkspace = function(workspace) {\n  var index = this.subscribedWorkspaces_.indexOf(workspace);\n  if (index < 0) {\n    throw Error('Cannot unsubscribe a workspace that hasn\\'t been subscribed.');\n  }\n  this.subscribedWorkspaces_.splice(index, 1);\n};\n\n/**\n * Subscribe an element to changes to the selected theme.  If a new theme is\n * selected, the element's style is refreshed with the new theme's style.\n * @param {!Element} element The element to subscribe.\n * @param {string} componentName The name used to identify the component. This\n *     must be the same name used to configure the style in the Theme object.\n * @param {string} propertyName The inline style property name to update.\n * @package\n */\nBlockly.ThemeManager.prototype.subscribe = function(element, componentName,\n    propertyName) {\n  if (!this.componentDB_[componentName]) {\n    this.componentDB_[componentName] = [];\n  }\n\n  // Add the element to our component map.\n  this.componentDB_[componentName].push({\n    element: element,\n    propertyName: propertyName\n  });\n\n  // Initialize the element with its corresponding theme style.\n  var style = this.theme_ && this.theme_.getComponentStyle(componentName);\n  element.style[propertyName] = style || '';\n};\n\n/**\n * Unsubscribe an element to changes to the selected theme.\n * @param {Element} element The element to unsubscribe.\n * @package\n */\nBlockly.ThemeManager.prototype.unsubscribe = function(element) {\n  if (!element) {\n    return;\n  }\n  // Go through all component, and remove any references to this element.\n  var componentNames = Object.keys(this.componentDB_);\n  for (var c = 0, componentName; (componentName = componentNames[c]); c++) {\n    var elements = this.componentDB_[componentName];\n    for (var i = elements.length - 1; i >= 0; i--) {\n      if (elements[i].element === element) {\n        elements.splice(i, 1);\n      }\n    }\n    // Clean up the component map entry if the list is empty.\n    if (!this.componentDB_[componentName].length) {\n      delete this.componentDB_[componentName];\n    }\n  }\n};\n\n/**\n * Dispose of this theme manager.\n * @package\n * @suppress {checkTypes}\n */\nBlockly.ThemeManager.prototype.dispose = function() {\n  this.owner_ = null;\n  this.theme_ = null;\n  this.subscribedWorkspaces_ = null;\n  this.componentDB_ = null;\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class extends Blockly.Gesture to support pinch to zoom\n * for both pointer and touch events.\n * @author samelh@microsoft.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.TouchGesture');\n\ngoog.require('Blockly.Gesture');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.object');\n\n\n/*\n * Note: In this file \"start\" refers to touchstart, mousedown, and pointerstart\n * events.  \"End\" refers to touchend, mouseup, and pointerend events.\n */\n\n/**\n * Class for one gesture.\n * @param {!Event} e The event that kicked off this gesture.\n * @param {!Blockly.WorkspaceSvg} creatorWorkspace The workspace that created\n *     this gesture and has a reference to it.\n * @extends {Blockly.Gesture}\n * @constructor\n */\nBlockly.TouchGesture = function(e, creatorWorkspace) {\n  Blockly.TouchGesture.superClass_.constructor.call(this, e, creatorWorkspace);\n\n  /**\n   * Boolean for whether or not this gesture is a multi-touch gesture.\n   * @type {boolean}\n   * @private\n   */\n  this.isMultiTouch_ = false;\n\n  /**\n   * A map of cached points used for tracking multi-touch gestures.\n   * @type {!Object<number|string, Blockly.utils.Coordinate>}\n   * @private\n   */\n  this.cachedPoints_ = Object.create(null);\n\n  /**\n   * This is the ratio between the starting distance between the touch points\n   * and the most recent distance between the touch points.\n   * Scales between 0 and 1 mean the most recent zoom was a zoom out.\n   * Scales above 1.0 mean the most recent zoom was a zoom in.\n   * @type {number}\n   * @private\n   */\n  this.previousScale_ = 0;\n\n  /**\n   * The starting distance between two touch points.\n   * @type {number}\n   * @private\n   */\n  this.startDistance_ = 0;\n\n  /**\n   * A handle to use to unbind the second touch start or pointer down listener\n   * at the end of a drag.\n   * Opaque data returned from Blockly.bindEventWithChecks_.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onStartWrapper_ = null;\n\n  /**\n   * Boolean for whether or not the workspace supports pinch-zoom.\n   * @type {?boolean}\n   * @private\n   */\n  this.isPinchZoomEnabled_ = null;\n};\nBlockly.utils.object.inherits(Blockly.TouchGesture, Blockly.Gesture);\n\n/**\n * A multiplier used to convert the gesture scale to a zoom in delta.\n * @const\n */\nBlockly.TouchGesture.ZOOM_IN_MULTIPLIER = 5;\n\n/**\n * A multiplier used to convert the gesture scale to a zoom out delta.\n * @const\n */\nBlockly.TouchGesture.ZOOM_OUT_MULTIPLIER = 6;\n\n/**\n * Start a gesture: update the workspace to indicate that a gesture is in\n * progress and bind mousemove and mouseup handlers.\n * @param {!Event} e A mouse down, touch start or pointer down event.\n * @package\n */\nBlockly.TouchGesture.prototype.doStart = function(e) {\n  this.isPinchZoomEnabled_ = this.startWorkspace_.options.zoomOptions &&\n      this.startWorkspace_.options.zoomOptions.pinch;\n  Blockly.TouchGesture.superClass_.doStart.call(this, e);\n  if (!this.isEnding_ && Blockly.Touch.isTouchEvent(e)) {\n    this.handleTouchStart(e);\n  }\n};\n\n/**\n * Bind gesture events.\n * Overriding the gesture definition of this function, binding the same\n * functions for onMoveWrapper_ and onUpWrapper_ but passing\n * opt_noCaptureIdentifier.\n * In addition, binding a second mouse down event to detect multi-touch events.\n * @param {!Event} e A mouse down or touch start event.\n * @package\n */\nBlockly.TouchGesture.prototype.bindMouseEvents = function(e) {\n  this.onStartWrapper_ = Blockly.bindEventWithChecks_(\n      document, 'mousedown', null, this.handleStart.bind(this),\n      /* opt_noCaptureIdentifier */ true);\n  this.onMoveWrapper_ = Blockly.bindEventWithChecks_(\n      document, 'mousemove', null, this.handleMove.bind(this),\n      /* opt_noCaptureIdentifier */ true);\n  this.onUpWrapper_ = Blockly.bindEventWithChecks_(\n      document, 'mouseup', null, this.handleUp.bind(this),\n      /* opt_noCaptureIdentifier */ true);\n\n  e.preventDefault();\n  e.stopPropagation();\n};\n\n/**\n * Handle a mouse down, touch start, or pointer down event.\n * @param {!Event} e A mouse down, touch start, or pointer down event.\n * @package\n */\nBlockly.TouchGesture.prototype.handleStart = function(e) {\n  if (this.isDragging()) {\n    // A drag has already started, so this can no longer be a pinch-zoom.\n    return;\n  }\n  if (Blockly.Touch.isTouchEvent(e)) {\n    this.handleTouchStart(e);\n\n    if (this.isMultiTouch()) {\n      Blockly.longStop_();\n    }\n  }\n};\n\n/**\n * Handle a mouse move, touch move, or pointer move event.\n * @param {!Event} e A mouse move, touch move, or pointer move event.\n * @package\n */\nBlockly.TouchGesture.prototype.handleMove = function(e) {\n  if (this.isDragging()) {\n    // We are in the middle of a drag, only handle the relevant events\n    if (Blockly.Touch.shouldHandleEvent(e)) {\n      Blockly.TouchGesture.superClass_.handleMove.call(this, e);\n    }\n    return;\n  }\n  if (this.isMultiTouch()) {\n    if (Blockly.Touch.isTouchEvent(e)) {\n      this.handleTouchMove(e);\n    }\n    Blockly.longStop_();\n  } else {\n    Blockly.TouchGesture.superClass_.handleMove.call(this, e);\n  }\n};\n\n/**\n * Handle a mouse up, touch end, or pointer up event.\n * @param {!Event} e A mouse up, touch end, or pointer up event.\n * @package\n */\nBlockly.TouchGesture.prototype.handleUp = function(e) {\n  if (Blockly.Touch.isTouchEvent(e) && !this.isDragging()) {\n    this.handleTouchEnd(e);\n  }\n  if (!this.isMultiTouch() || this.isDragging()) {\n    if (!Blockly.Touch.shouldHandleEvent(e)) {\n      return;\n    }\n    Blockly.TouchGesture.superClass_.handleUp.call(this, e);\n  } else {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.dispose();\n  }\n};\n\n/**\n * Whether this gesture is part of a multi-touch gesture.\n * @return {boolean} Whether this gesture is part of a multi-touch gesture.\n * @package\n */\nBlockly.TouchGesture.prototype.isMultiTouch = function() {\n  return this.isMultiTouch_;\n};\n\n/**\n * Sever all links from this object.\n * @package\n */\nBlockly.TouchGesture.prototype.dispose = function() {\n  Blockly.TouchGesture.superClass_.dispose.call(this);\n\n  if (this.onStartWrapper_) {\n    Blockly.unbindEvent_(this.onStartWrapper_);\n  }\n};\n\n/**\n * Handle a touch start or pointer down event and keep track of current\n * pointers.\n * @param {!Event} e A touch start, or pointer down event.\n * @package\n */\nBlockly.TouchGesture.prototype.handleTouchStart = function(e) {\n  var pointerId = Blockly.Touch.getTouchIdentifierFromEvent(e);\n  // store the pointerId in the current list of pointers\n  this.cachedPoints_[pointerId] = this.getTouchPoint(e);\n  var pointers = Object.keys(this.cachedPoints_);\n  // If two pointers are down, store info\n  if (pointers.length == 2) {\n    var point0 = /** @type {!Blockly.utils.Coordinate} */ (\n      this.cachedPoints_[pointers[0]]);\n    var point1 = /** @type {!Blockly.utils.Coordinate} */ (\n      this.cachedPoints_[pointers[1]]);\n    this.startDistance_ = Blockly.utils.Coordinate.distance(point0, point1);\n    this.isMultiTouch_ = true;\n    e.preventDefault();\n  }\n};\n\n/**\n * Handle a touch move or pointer move event and zoom in/out if two pointers\n * are on the screen.\n * @param {!Event} e A touch move, or pointer move event.\n * @package\n */\nBlockly.TouchGesture.prototype.handleTouchMove = function(e) {\n  var pointerId = Blockly.Touch.getTouchIdentifierFromEvent(e);\n  // Update the cache\n  this.cachedPoints_[pointerId] = this.getTouchPoint(e);\n\n  var pointers = Object.keys(this.cachedPoints_);\n  if (this.isPinchZoomEnabled_ && pointers.length === 2) {\n    this.handlePinch_(e);\n  } else {\n    Blockly.TouchGesture.superClass_.handleMove.call(this, e);\n  }\n};\n\n/**\n* Handle pinch zoom gesture.\n* @param {!Event} e A touch move, or pointer move event.\n* @private\n*/\nBlockly.TouchGesture.prototype.handlePinch_ = function(e) {\n  var pointers = Object.keys(this.cachedPoints_);\n  // Calculate the distance between the two pointers\n  var point0 = /** @type {!Blockly.utils.Coordinate} */ (\n    this.cachedPoints_[pointers[0]]);\n  var point1 = /** @type {!Blockly.utils.Coordinate} */ (\n    this.cachedPoints_[pointers[1]]);\n  var moveDistance = Blockly.utils.Coordinate.distance(point0, point1);\n  var scale = moveDistance / this.startDistance_;\n\n  if (this.previousScale_ > 0 && this.previousScale_ < Infinity) {\n    var gestureScale = scale - this.previousScale_;\n    var delta = gestureScale > 0 ?\n        gestureScale * Blockly.TouchGesture.ZOOM_IN_MULTIPLIER :\n        gestureScale * Blockly.TouchGesture.ZOOM_OUT_MULTIPLIER;\n    var workspace = this.startWorkspace_;\n    var position = Blockly.utils.mouseToSvg(\n        e, workspace.getParentSvg(), workspace.getInverseScreenCTM());\n    workspace.zoom(position.x, position.y, delta);\n  }\n  this.previousScale_ = scale;\n  e.preventDefault();\n};\n\n\n/**\n * Handle a touch end or pointer end event and end the gesture.\n * @param {!Event} e A touch end, or pointer end event.\n * @package\n */\nBlockly.TouchGesture.prototype.handleTouchEnd = function(e) {\n  var pointerId = Blockly.Touch.getTouchIdentifierFromEvent(e);\n  if (this.cachedPoints_[pointerId]) {\n    delete this.cachedPoints_[pointerId];\n  }\n  if (Object.keys(this.cachedPoints_).length < 2) {\n    this.cachedPoints_ = Object.create(null);\n    this.previousScale_ = 0;\n  }\n};\n\n/**\n * Helper function returning the current touch point coordinate.\n * @param {!Event} e A touch or pointer event.\n * @return {Blockly.utils.Coordinate} The current touch point coordinate\n * @package\n */\nBlockly.TouchGesture.prototype.getTouchPoint = function(e) {\n  if (!this.startWorkspace_) {\n    return null;\n  }\n  return new Blockly.utils.Coordinate(\n      (e.pageX ? e.pageX : e.changedTouches[0].pageX),\n      (e.pageY ? e.pageY : e.changedTouches[0].pageY)\n  );\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object in charge of loading, storing, and playing audio for a\n *     workspace.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.WorkspaceAudio');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.global');\ngoog.require('Blockly.utils.userAgent');\n\n\n/**\n * Class for loading, storing, and playing audio for a workspace.\n * @param {Blockly.WorkspaceSvg} parentWorkspace The parent of the workspace\n *     this audio object belongs to, or null.\n * @constructor\n */\nBlockly.WorkspaceAudio = function(parentWorkspace) {\n\n  /**\n   * The parent of the workspace this object belongs to, or null.  May be\n   * checked for sounds that this object can't find.\n   * @type {Blockly.WorkspaceSvg}\n   * @private\n   */\n  this.parentWorkspace_ = parentWorkspace;\n\n  /**\n   * Database of pre-loaded sounds.\n   * @private\n   */\n  this.SOUNDS_ = Object.create(null);\n};\n\n/**\n * Time that the last sound was played.\n * @type {Date}\n * @private\n */\nBlockly.WorkspaceAudio.prototype.lastSound_ = null;\n\n/**\n * Dispose of this audio manager.\n * @package\n */\nBlockly.WorkspaceAudio.prototype.dispose = function() {\n  this.parentWorkspace_ = null;\n  this.SOUNDS_ = null;\n};\n\n/**\n * Load an audio file.  Cache it, ready for instantaneous playing.\n * @param {!Array.<string>} filenames List of file types in decreasing order of\n *   preference (i.e. increasing size).  E.g. ['media/go.mp3', 'media/go.wav']\n *   Filenames include path from Blockly's root.  File extensions matter.\n * @param {string} name Name of sound.\n */\nBlockly.WorkspaceAudio.prototype.load = function(filenames, name) {\n  if (!filenames.length) {\n    return;\n  }\n  try {\n    var audioTest = new Blockly.utils.global['Audio']();\n  } catch (e) {\n    // No browser support for Audio.\n    // IE can throw an error even if the Audio object exists.\n    return;\n  }\n  var sound;\n  for (var i = 0; i < filenames.length; i++) {\n    var filename = filenames[i];\n    var ext = filename.match(/\\.(\\w+)$/);\n    if (ext && audioTest.canPlayType('audio/' + ext[1])) {\n      // Found an audio format we can play.\n      sound = new Blockly.utils.global['Audio'](filename);\n      break;\n    }\n  }\n  if (sound && sound.play) {\n    this.SOUNDS_[name] = sound;\n  }\n};\n\n/**\n * Preload all the audio files so that they play quickly when asked for.\n * @package\n */\nBlockly.WorkspaceAudio.prototype.preload = function() {\n  for (var name in this.SOUNDS_) {\n    var sound = this.SOUNDS_[name];\n    sound.volume = 0.01;\n    var playPromise = sound.play();\n    // Edge does not return a promise, so we need to check.\n    if (playPromise !== undefined) {\n      // If we don't wait for the play request to complete before calling pause()\n      // we will get an exception: (DOMException: The play() request was interrupted)\n      // See more: https://developers.google.com/web/updates/2017/06/play-request-was-interrupted\n      playPromise.then(sound.pause).catch(function() {\n        // Play without user interaction was prevented.\n      });\n    } else {\n      sound.pause();\n    }\n\n    // iOS can only process one sound at a time.  Trying to load more than one\n    // corrupts the earlier ones.  Just load one and leave the others uncached.\n    if (Blockly.utils.userAgent.IPAD || Blockly.utils.userAgent.IPHONE) {\n      break;\n    }\n  }\n};\n\n/**\n * Play a named sound at specified volume.  If volume is not specified,\n * use full volume (1).\n * @param {string} name Name of sound.\n * @param {number=} opt_volume Volume of sound (0-1).\n */\nBlockly.WorkspaceAudio.prototype.play = function(name, opt_volume) {\n  var sound = this.SOUNDS_[name];\n  if (sound) {\n    // Don't play one sound on top of another.\n    var now = new Date;\n    if (this.lastSound_ != null &&\n        now - this.lastSound_ < Blockly.SOUND_LIMIT) {\n      return;\n    }\n    this.lastSound_ = now;\n    var mySound;\n    if (Blockly.utils.userAgent.IPAD || Blockly.utils.userAgent.ANDROID) {\n      // Creating a new audio node causes lag in Android and iPad.  Android\n      // refetches the file from the server, iPad uses a singleton audio\n      // node which must be deleted and recreated for each new audio tag.\n      mySound = sound;\n    } else {\n      mySound = sound.cloneNode();\n    }\n    mySound.volume = (opt_volume === undefined ? 1 : opt_volume);\n    mySound.play();\n  } else if (this.parentWorkspace_) {\n    // Maybe a workspace on a lower level knows about this sound.\n    this.parentWorkspace_.getAudioManager().play(name, opt_volume);\n  }\n};\n","/**\n * @license\n * Copyright 2014 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a workspace rendered as SVG.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.WorkspaceSvg');\n\ngoog.require('Blockly.BlockSvg');\ngoog.require('Blockly.blockRendering');\ngoog.require('Blockly.ConnectionDB');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.ContextMenuRegistry');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockCreate');\ngoog.require('Blockly.Gesture');\ngoog.require('Blockly.Grid');\ngoog.require('Blockly.MarkerManager');\ngoog.require('Blockly.Msg');\ngoog.require('Blockly.navigation');\ngoog.require('Blockly.Options');\ngoog.require('Blockly.registry');\ngoog.require('Blockly.ThemeManager');\ngoog.require('Blockly.Themes.Classic');\ngoog.require('Blockly.TouchGesture');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Metrics');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Rect');\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.toolbox');\ngoog.require('Blockly.Workspace');\ngoog.require('Blockly.WorkspaceAudio');\ngoog.require('Blockly.WorkspaceDragSurfaceSvg');\ngoog.require('Blockly.Xml');\n\ngoog.requireType('Blockly.blockRendering.Renderer');\ngoog.requireType('Blockly.IASTNodeLocationSvg');\ngoog.requireType('Blockly.IBoundedElement');\ngoog.requireType('Blockly.IFlyout');\n\n\n/**\n * Class for a workspace.  This is an onscreen area with optional trashcan,\n * scrollbars, bubbles, and dragging.\n * @param {!Blockly.Options} options Dictionary of options.\n * @param {Blockly.BlockDragSurfaceSvg=} opt_blockDragSurface Drag surface for\n *     blocks.\n * @param {Blockly.WorkspaceDragSurfaceSvg=} opt_wsDragSurface Drag surface for\n *     the workspace.\n * @extends {Blockly.Workspace}\n * @implements {Blockly.IASTNodeLocationSvg}\n * @constructor\n */\nBlockly.WorkspaceSvg = function(options,\n    opt_blockDragSurface, opt_wsDragSurface) {\n  Blockly.WorkspaceSvg.superClass_.constructor.call(this, options);\n  /** @type {function():!Blockly.utils.Metrics} */\n  this.getMetrics =\n      options.getMetrics || Blockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_;\n  /** @type {function(!{x:number, y:number}):void} */\n  this.setMetrics =\n      options.setMetrics || Blockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_;\n\n\n  this.connectionDBList = Blockly.ConnectionDB.init(this.connectionChecker);\n\n  if (opt_blockDragSurface) {\n    this.blockDragSurface_ = opt_blockDragSurface;\n  }\n\n  if (opt_wsDragSurface) {\n    this.workspaceDragSurface_ = opt_wsDragSurface;\n  }\n\n  this.useWorkspaceDragSurface_ =\n      !!this.workspaceDragSurface_ && Blockly.utils.is3dSupported();\n\n  /**\n   * List of currently highlighted blocks.  Block highlighting is often used to\n   * visually mark blocks currently being executed.\n   * @type {!Array.<!Blockly.BlockSvg>}\n   * @private\n   */\n  this.highlightedBlocks_ = [];\n\n  /**\n   * Object in charge of loading, storing, and playing audio for a workspace.\n   * @type {!Blockly.WorkspaceAudio}\n   * @private\n   */\n  this.audioManager_ = new Blockly.WorkspaceAudio(\n      /** @type {Blockly.WorkspaceSvg} */ (options.parentWorkspace));\n\n  /**\n   * This workspace's grid object or null.\n   * @type {Blockly.Grid}\n   * @private\n   */\n  this.grid_ = this.options.gridPattern ?\n      new Blockly.Grid(this.options.gridPattern, options.gridOptions) : null;\n\n  /**\n   * Manager in charge of markers and cursors.\n   * @type {!Blockly.MarkerManager}\n   * @private\n   */\n  this.markerManager_ = new Blockly.MarkerManager(this);\n\n  /**\n  * Map from function names to callbacks, for deciding what to do when a custom\n  * toolbox category is opened.\n  * @type {!Object.<string, ?function(!Blockly.Workspace):!Array.<!Element>>}\n  * @private\n  */\n  this.toolboxCategoryCallbacks_ = {};\n\n  /**\n  * Map from function names to callbacks, for deciding what to do when a button\n  * is clicked.\n  * @type {!Object.<string, ?function(!Blockly.FlyoutButton)>}\n  * @private\n  */\n  this.flyoutButtonCallbacks_ = {};\n\n  if (Blockly.Variables && Blockly.Variables.flyoutCategory) {\n    this.registerToolboxCategoryCallback(Blockly.VARIABLE_CATEGORY_NAME,\n        Blockly.Variables.flyoutCategory);\n  }\n  if (Blockly.VariablesDynamic && Blockly.VariablesDynamic.flyoutCategory) {\n    this.registerToolboxCategoryCallback(Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME,\n        Blockly.VariablesDynamic.flyoutCategory);\n  }\n  if (Blockly.Procedures && Blockly.Procedures.flyoutCategory) {\n    this.registerToolboxCategoryCallback(Blockly.PROCEDURE_CATEGORY_NAME,\n        Blockly.Procedures.flyoutCategory);\n    this.addChangeListener(Blockly.Procedures.mutatorOpenListener);\n  }\n\n  /**\n   * Object in charge of storing and updating the workspace theme.\n   * @type {!Blockly.ThemeManager}\n   * @protected\n   */\n  this.themeManager_ = this.options.parentWorkspace ?\n      this.options.parentWorkspace.getThemeManager() :\n      new Blockly.ThemeManager(this,\n          this.options.theme || Blockly.Themes.Classic);\n  this.themeManager_.subscribeWorkspace(this);\n\n  /**\n   * The block renderer used for rendering blocks on this workspace.\n   * @type {!Blockly.blockRendering.Renderer}\n   * @private\n   */\n  this.renderer_ = Blockly.blockRendering.init(this.options.renderer || 'geras',\n      this.getTheme(), this.options.rendererOverrides);\n\n  /**\n   * Cached parent SVG.\n   * @type {SVGElement}\n   * @private\n   */\n  this.cachedParentSvg_ = null;\n\n  /**\n   * True if keyboard accessibility mode is on, false otherwise.\n   * @type {boolean}\n   */\n  this.keyboardAccessibilityMode = false;\n\n  /**\n   * The list of top-level bounded elements on the workspace.\n   * @type {!Array.<!Blockly.IBoundedElement>}\n   * @private\n   */\n  this.topBoundedElements_ = [];\n};\nBlockly.utils.object.inherits(Blockly.WorkspaceSvg, Blockly.Workspace);\n\n/**\n * A wrapper function called when a resize event occurs.\n * You can pass the result to `unbindEvent_`.\n * @type {Array.<!Array>}\n * @private\n */\nBlockly.WorkspaceSvg.prototype.resizeHandlerWrapper_ = null;\n\n/**\n * The render status of an SVG workspace.\n * Returns `false` for headless workspaces and true for instances of\n * `Blockly.WorkspaceSvg`.\n * @type {boolean}\n */\nBlockly.WorkspaceSvg.prototype.rendered = true;\n\n/**\n * Whether the workspace is visible.  False if the workspace has been hidden\n * by calling `setVisible(false)`.\n * @type {boolean}\n * @private\n */\nBlockly.WorkspaceSvg.prototype.isVisible_ = true;\n\n/**\n * Is this workspace the surface for a flyout?\n * @type {boolean}\n */\nBlockly.WorkspaceSvg.prototype.isFlyout = false;\n\n/**\n * Is this workspace the surface for a mutator?\n * @type {boolean}\n * @package\n */\nBlockly.WorkspaceSvg.prototype.isMutator = false;\n\n/**\n * Whether this workspace has resizes enabled.\n * Disable during batch operations for a performance improvement.\n * @type {boolean}\n * @private\n */\nBlockly.WorkspaceSvg.prototype.resizesEnabled_ = true;\n\n/**\n * Current horizontal scrolling offset in pixel units, relative to the\n * workspace origin.\n *\n * It is useful to think about a view, and a canvas moving beneath that\n * view. As the canvas moves right, this value becomes more positive, and\n * the view is now \"seeing\" the left side of the canvas. As the canvas moves\n * left, this value becomes more negative, and the view is now \"seeing\" the\n * right side of the canvas.\n *\n * The confusing thing about this value is that it does not, and must not\n * include the absoluteLeft offset. This is because it is used to calculate\n * the viewLeft value.\n *\n * The viewLeft is relative to the workspace origin (although in pixel\n * units). The workspace origin is the top-left corner of the workspace (at\n * least when it is enabled). It is shifted from the top-left of the blocklyDiv\n * so as not to be beneath the toolbox.\n *\n * When the workspace is enabled the viewLeft and workspace origin are at\n * the same X location. As the canvas slides towards the right beneath the view\n * this value (scrollX) becomes more positive, and the viewLeft becomes more\n * negative relative to the workspace origin (imagine the workspace origin\n * as a dot on the canvas sliding to the right as the canvas moves).\n *\n * So if the scrollX were to include the absoluteLeft this would in a way\n * \"unshift\" the workspace origin. This means that the viewLeft would be\n * representing the left edge of the blocklyDiv, rather than the left edge\n * of the workspace.\n *\n * @type {number}\n */\nBlockly.WorkspaceSvg.prototype.scrollX = 0;\n\n/**\n * Current vertical scrolling offset in pixel units, relative to the\n * workspace origin.\n *\n * It is useful to think about a view, and a canvas moving beneath that\n * view. As the canvas moves down, this value becomes more positive, and the\n * view is now \"seeing\" the upper part of the canvas. As the canvas moves\n * up, this value becomes more negative, and the view is \"seeing\" the lower\n * part of the canvas.\n *\n * This confusing thing about this value is that it does not, and must not\n * include the absoluteTop offset. This is because it is used to calculate\n * the viewTop value.\n *\n * The viewTop is relative to the workspace origin (although in pixel\n * units). The workspace origin is the top-left corner of the workspace (at\n * least when it is enabled). It is shifted from the top-left of the\n * blocklyDiv so as not to be beneath the toolbox.\n *\n * When the workspace is enabled the viewTop and workspace origin are at the\n * same Y location. As the canvas slides towards the bottom this value\n * (scrollY) becomes more positive, and the viewTop becomes more negative\n * relative to the workspace origin (image in the workspace origin as a dot\n * on the canvas sliding downwards as the canvas moves).\n *\n * So if the scrollY were to include the absoluteTop this would in a way\n * \"unshift\" the workspace origin. This means that the viewTop would be\n * representing the top edge of the blocklyDiv, rather than the top edge of\n * the workspace.\n *\n * @type {number}\n */\nBlockly.WorkspaceSvg.prototype.scrollY = 0;\n\n/**\n * Horizontal scroll value when scrolling started in pixel units.\n * @type {number}\n */\nBlockly.WorkspaceSvg.prototype.startScrollX = 0;\n\n/**\n * Vertical scroll value when scrolling started in pixel units.\n * @type {number}\n */\nBlockly.WorkspaceSvg.prototype.startScrollY = 0;\n\n/**\n * Distance from mouse to object being dragged.\n * @type {Blockly.utils.Coordinate}\n * @private\n */\nBlockly.WorkspaceSvg.prototype.dragDeltaXY_ = null;\n\n/**\n * Current scale.\n * @type {number}\n */\nBlockly.WorkspaceSvg.prototype.scale = 1;\n\n// TODO(#4203) Enable viewport events after ui events refactor.\n// /**\n//  * Cached scale value. Used to detect changes in viewport.\n//  * @type {number}\n//  * @private\n//  */\n// Blockly.WorkspaceSvg.prototype.oldScale_ = 1;\n//\n// /**\n//  * Cached viewport top value. Used to detect changes in viewport.\n//  * @type {number}\n//  * @private\n//  */\n// Blockly.WorkspaceSvg.prototype.oldTop_ = 0;\n//\n// /**\n//  * Cached viewport left value. Used to detect changes in viewport.\n//  * @type {number}\n//  * @private\n//  */\n// Blockly.WorkspaceSvg.prototype.oldLeft_ = 0;\n\n/**\n * The workspace's trashcan (if any).\n * @type {Blockly.Trashcan}\n */\nBlockly.WorkspaceSvg.prototype.trashcan = null;\n\n/**\n * This workspace's scrollbars, if they exist.\n * @type {Blockly.ScrollbarPair}\n */\nBlockly.WorkspaceSvg.prototype.scrollbar = null;\n\n/**\n * Fixed flyout providing blocks which may be dragged into this workspace.\n * @type {Blockly.IFlyout}\n * @private\n */\nBlockly.WorkspaceSvg.prototype.flyout_ = null;\n\n/**\n * Category-based toolbox providing blocks which may be dragged into this\n * workspace.\n * @type {Blockly.IToolbox}\n * @private\n */\nBlockly.WorkspaceSvg.prototype.toolbox_ = null;\n\n/**\n * The current gesture in progress on this workspace, if any.\n * @type {Blockly.TouchGesture}\n * @private\n */\nBlockly.WorkspaceSvg.prototype.currentGesture_ = null;\n\n/**\n * This workspace's surface for dragging blocks, if it exists.\n * @type {Blockly.BlockDragSurfaceSvg}\n * @private\n */\nBlockly.WorkspaceSvg.prototype.blockDragSurface_ = null;\n\n/**\n * This workspace's drag surface, if it exists.\n * @type {Blockly.WorkspaceDragSurfaceSvg}\n * @private\n */\nBlockly.WorkspaceSvg.prototype.workspaceDragSurface_ = null;\n\n/**\n  * Whether to move workspace to the drag surface when it is dragged.\n  * True if it should move, false if it should be translated directly.\n  * @type {boolean}\n  * @private\n  */\nBlockly.WorkspaceSvg.prototype.useWorkspaceDragSurface_ = false;\n\n/**\n * Whether the drag surface is actively in use. When true, calls to\n * translate will translate the drag surface instead of the translating the\n * workspace directly.\n * This is set to true in setupDragSurface and to false in resetDragSurface.\n * @type {boolean}\n * @private\n */\nBlockly.WorkspaceSvg.prototype.isDragSurfaceActive_ = false;\n\n/**\n * The first parent div with 'injectionDiv' in the name, or null if not set.\n * Access this with getInjectionDiv.\n * @type {Element}\n * @private\n */\nBlockly.WorkspaceSvg.prototype.injectionDiv_ = null;\n\n/**\n * Last known position of the page scroll.\n * This is used to determine whether we have recalculated screen coordinate\n * stuff since the page scrolled.\n * @type {Blockly.utils.Coordinate}\n * @private\n */\nBlockly.WorkspaceSvg.prototype.lastRecordedPageScroll_ = null;\n\n/**\n * Developers may define this function to add custom menu options to the\n * workspace's context menu or edit the workspace-created set of menu options.\n * @param {!Array.<!Object>} options List of menu options to add to.\n * @param {!Event} e The right-click event that triggered the context menu.\n */\nBlockly.WorkspaceSvg.prototype.configureContextMenu;\n\n/**\n * In a flyout, the target workspace where blocks should be placed after a drag.\n * Otherwise null.\n * @type {Blockly.WorkspaceSvg}\n * @package\n */\nBlockly.WorkspaceSvg.prototype.targetWorkspace = null;\n\n/**\n * Inverted screen CTM, for use in mouseToSvg.\n * @type {SVGMatrix}\n * @private\n */\nBlockly.WorkspaceSvg.prototype.inverseScreenCTM_ = null;\n\n/**\n * Inverted screen CTM is dirty, recalculate it.\n * @type {boolean}\n * @private\n */\nBlockly.WorkspaceSvg.prototype.inverseScreenCTMDirty_ = true;\n\n/**\n * Get the marker manager for this workspace.\n * @return {Blockly.MarkerManager} The marker manager.\n */\nBlockly.WorkspaceSvg.prototype.getMarkerManager = function() {\n  return this.markerManager_;\n};\n\n/**\n * Add the cursor svg to this workspaces svg group.\n * @param {SVGElement} cursorSvg The svg root of the cursor to be added to the\n *     workspace svg group.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.setCursorSvg = function(cursorSvg) {\n  this.markerManager_.setCursorSvg(cursorSvg);\n};\n\n/**\n * Add the marker svg to this workspaces svg group.\n * @param {SVGElement} markerSvg The svg root of the marker to be added to the\n *     workspace svg group.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.setMarkerSvg = function(markerSvg) {\n  this.markerManager_.setMarkerSvg(markerSvg);\n};\n\n/**\n * Get the marker with the given id.\n * @param {string} id The id of the marker.\n * @return {Blockly.Marker} The marker with the given id or null if no marker\n *     with the given id exists.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.getMarker = function(id) {\n  if (this.markerManager_) {\n    return this.markerManager_.getMarker(id);\n  }\n  return null;\n};\n\n/**\n * The cursor for this workspace.\n * @return {Blockly.Cursor} The cursor for the workspace.\n */\nBlockly.WorkspaceSvg.prototype.getCursor = function() {\n  if (this.markerManager_) {\n    return this.markerManager_.getCursor();\n  }\n  return null;\n};\n\n/**\n * Get the block renderer attached to this workspace.\n * @return {!Blockly.blockRendering.Renderer} The renderer attached to this workspace.\n */\nBlockly.WorkspaceSvg.prototype.getRenderer = function() {\n  return this.renderer_;\n};\n\n/**\n * Get the theme manager for this workspace.\n * @return {!Blockly.ThemeManager} The theme manager for this workspace.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.getThemeManager = function() {\n  return this.themeManager_;\n};\n\n/**\n * Get the workspace theme object.\n * @return {!Blockly.Theme} The workspace theme object.\n */\nBlockly.WorkspaceSvg.prototype.getTheme = function() {\n  return this.themeManager_.getTheme();\n};\n\n/**\n * Set the workspace theme object.\n * If no theme is passed, default to the `Blockly.Themes.Classic` theme.\n * @param {Blockly.Theme} theme The workspace theme object.\n */\nBlockly.WorkspaceSvg.prototype.setTheme = function(theme) {\n  if (!theme) {\n    theme = /** @type {!Blockly.Theme} */ (Blockly.Themes.Classic);\n  }\n  this.themeManager_.setTheme(theme);\n};\n\n/**\n * Refresh all blocks on the workspace after a theme update.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.refreshTheme = function() {\n  if (this.svgGroup_) {\n    this.renderer_.refreshDom(this.svgGroup_, this.getTheme());\n  }\n\n  // Update all blocks in workspace that have a style name.\n  this.updateBlockStyles_(this.getAllBlocks(false).filter(\n      function(block) {\n        return block.getStyleName() !== undefined;\n      }\n  ));\n\n  // Update current toolbox selection.\n  this.refreshToolboxSelection();\n  if (this.toolbox_) {\n    this.toolbox_.refreshTheme();\n  }\n\n  // Re-render if workspace is visible\n  if (this.isVisible()) {\n    this.setVisible(true);\n  }\n\n  var event = new Blockly.Events.Ui(null, 'theme', null, null);\n  event.workspaceId = this.id;\n  Blockly.Events.fire(event);\n};\n\n/**\n * Updates all the blocks with new style.\n * @param {!Array.<!Blockly.Block>} blocks List of blocks to update the style\n *     on.\n * @private\n */\nBlockly.WorkspaceSvg.prototype.updateBlockStyles_ = function(blocks) {\n  for (var i = 0, block; (block = blocks[i]); i++) {\n    var blockStyleName = block.getStyleName();\n    if (blockStyleName) {\n      block.setStyle(blockStyleName);\n      if (block.mutator) {\n        block.mutator.updateBlockStyle();\n      }\n    }\n  }\n};\n\n/**\n * Getter for the inverted screen CTM.\n * @return {SVGMatrix} The matrix to use in mouseToSvg\n */\nBlockly.WorkspaceSvg.prototype.getInverseScreenCTM = function() {\n\n  // Defer getting the screen CTM until we actually need it, this should\n  // avoid forced reflows from any calls to updateInverseScreenCTM.\n  if (this.inverseScreenCTMDirty_) {\n    var ctm = this.getParentSvg().getScreenCTM();\n    if (ctm) {\n      this.inverseScreenCTM_ = ctm.inverse();\n      this.inverseScreenCTMDirty_ = false;\n    }\n  }\n\n  return this.inverseScreenCTM_;\n};\n\n/**\n * Mark the inverse screen CTM as dirty.\n */\nBlockly.WorkspaceSvg.prototype.updateInverseScreenCTM = function() {\n  this.inverseScreenCTMDirty_ = true;\n};\n\n/**\n * Getter for isVisible\n * @return {boolean} Whether the workspace is visible.\n *     False if the workspace has been hidden by calling `setVisible(false)`.\n */\nBlockly.WorkspaceSvg.prototype.isVisible = function() {\n  return this.isVisible_;\n};\n\n/**\n * Return the absolute coordinates of the top-left corner of this element,\n * scales that after canvas SVG element, if it's a descendant.\n * The origin (0,0) is the top-left corner of the Blockly SVG.\n * @param {!SVGElement} element SVG element to find the coordinates of.\n * @return {!Blockly.utils.Coordinate} Object with .x and .y properties.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.getSvgXY = function(element) {\n  var x = 0;\n  var y = 0;\n  var scale = 1;\n  if (Blockly.utils.dom.containsNode(this.getCanvas(), element) ||\n      Blockly.utils.dom.containsNode(this.getBubbleCanvas(), element)) {\n    // Before the SVG canvas, scale the coordinates.\n    scale = this.scale;\n  }\n  do {\n    // Loop through this block and every parent.\n    var xy = Blockly.utils.getRelativeXY(element);\n    if (element == this.getCanvas() ||\n        element == this.getBubbleCanvas()) {\n      // After the SVG canvas, don't scale the coordinates.\n      scale = 1;\n    }\n    x += xy.x * scale;\n    y += xy.y * scale;\n    element = /** @type {!SVGElement} */ (element.parentNode);\n  } while (element && element != this.getParentSvg());\n  return new Blockly.utils.Coordinate(x, y);\n};\n\n/**\n * Return the position of the workspace origin relative to the injection div\n * origin in pixels.\n * The workspace origin is where a block would render at position (0, 0).\n * It is not the upper left corner of the workspace SVG.\n * @return {!Blockly.utils.Coordinate} Offset in pixels.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.getOriginOffsetInPixels = function() {\n  return Blockly.utils.getInjectionDivXY_(this.getCanvas());\n};\n\n/**\n * Return the injection div that is a parent of this workspace.\n * Walks the DOM the first time it's called, then returns a cached value.\n * Note: We assume this is only called after the workspace has been injected\n * into the DOM.\n * @return {!Element} The first parent div with 'injectionDiv' in the name.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.getInjectionDiv = function() {\n  // NB: it would be better to pass this in at createDom, but is more likely to\n  // break existing uses of Blockly.\n  if (!this.injectionDiv_) {\n    var element = this.svgGroup_;\n    while (element) {\n      var classes = element.getAttribute('class') || '';\n      if ((' ' + classes + ' ').indexOf(' injectionDiv ') != -1) {\n        this.injectionDiv_ = element;\n        break;\n      }\n      element = /** @type {!Element} */ (element.parentNode);\n    }\n  }\n  return /** @type {!Element} */ (this.injectionDiv_);\n};\n\n/**\n * Get the svg block canvas for the workspace.\n * @return {SVGElement} The svg group for the workspace.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.getBlockCanvas = function() {\n  return this.svgBlockCanvas_;\n};\n\n/**\n * Save resize handler data so we can delete it later in dispose.\n * @param {!Array.<!Array>} handler Data that can be passed to unbindEvent_.\n */\nBlockly.WorkspaceSvg.prototype.setResizeHandlerWrapper = function(handler) {\n  this.resizeHandlerWrapper_ = handler;\n};\n\n/**\n * Create the workspace DOM elements.\n * @param {string=} opt_backgroundClass Either 'blocklyMainBackground' or\n *     'blocklyMutatorBackground'.\n * @return {!Element} The workspace's SVG group.\n */\nBlockly.WorkspaceSvg.prototype.createDom = function(opt_backgroundClass) {\n  /**\n   * <g class=\"blocklyWorkspace\">\n   *   <rect class=\"blocklyMainBackground\" height=\"100%\" width=\"100%\"></rect>\n   *   [Trashcan and/or flyout may go here]\n   *   <g class=\"blocklyBlockCanvas\"></g>\n   *   <g class=\"blocklyBubbleCanvas\"></g>\n   * </g>\n   * @type {SVGElement}\n   */\n  this.svgGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G,\n      {'class': 'blocklyWorkspace'}, null);\n\n  // Note that a <g> alone does not receive mouse events--it must have a\n  // valid target inside it.  If no background class is specified, as in the\n  // flyout, the workspace will not receive mouse events.\n  if (opt_backgroundClass) {\n    /** @type {SVGElement} */\n    this.svgBackground_ = Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.RECT,\n        {'height': '100%', 'width': '100%', 'class': opt_backgroundClass},\n        this.svgGroup_);\n\n    if (opt_backgroundClass == 'blocklyMainBackground' && this.grid_) {\n      this.svgBackground_.style.fill =\n          'url(#' + this.grid_.getPatternId() + ')';\n    } else {\n      this.themeManager_.subscribe(this.svgBackground_,\n          'workspaceBackgroundColour', 'fill');\n    }\n  }\n  /** @type {SVGElement} */\n  this.svgBlockCanvas_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G,\n      {'class': 'blocklyBlockCanvas'}, this.svgGroup_);\n  /** @type {SVGElement} */\n  this.svgBubbleCanvas_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G,\n      {'class': 'blocklyBubbleCanvas'}, this.svgGroup_);\n\n  if (!this.isFlyout) {\n    Blockly.bindEventWithChecks_(this.svgGroup_, 'mousedown', this,\n        this.onMouseDown_, false, true);\n    Blockly.bindEventWithChecks_(this.svgGroup_, 'wheel', this,\n        this.onMouseWheel_);\n  }\n\n  // Determine if there needs to be a category tree, or a simple list of\n  // blocks.  This cannot be changed later, since the UI is very different.\n  if (this.options.hasCategories) {\n    if (!Blockly.Toolbox) {\n      throw Error('Missing require for Blockly.Toolbox');\n    }\n    var ToolboxClass = Blockly.registry.getClassFromOptions(\n        Blockly.registry.Type.TOOLBOX, this.options);\n    this.toolbox_ = new ToolboxClass(this);\n  }\n  if (this.grid_) {\n    this.grid_.update(this.scale);\n  }\n  this.recordDeleteAreas();\n\n  this.markerManager_.setCursor(new Blockly.Cursor());\n  this.markerManager_.registerMarker(Blockly.navigation.MARKER_NAME,\n      new Blockly.Marker());\n\n  this.renderer_.createDom(this.svgGroup_, this.getTheme());\n  return this.svgGroup_;\n};\n\n/**\n * Dispose of this workspace.\n * Unlink from all DOM elements to prevent memory leaks.\n * @suppress {checkTypes}\n */\nBlockly.WorkspaceSvg.prototype.dispose = function() {\n  // Stop rerendering.\n  this.rendered = false;\n  if (this.currentGesture_) {\n    this.currentGesture_.cancel();\n  }\n  if (this.svgGroup_) {\n    Blockly.utils.dom.removeNode(this.svgGroup_);\n    this.svgGroup_ = null;\n  }\n  this.svgBlockCanvas_ = null;\n  this.svgBubbleCanvas_ = null;\n  if (this.toolbox_) {\n    this.toolbox_.dispose();\n    this.toolbox_ = null;\n  }\n  if (this.flyout_) {\n    this.flyout_.dispose();\n    this.flyout_ = null;\n  }\n  if (this.trashcan) {\n    this.trashcan.dispose();\n    this.trashcan = null;\n  }\n  if (this.scrollbar) {\n    this.scrollbar.dispose();\n    this.scrollbar = null;\n  }\n  if (this.zoomControls_) {\n    this.zoomControls_.dispose();\n    this.zoomControls_ = null;\n  }\n\n  if (this.audioManager_) {\n    this.audioManager_.dispose();\n    this.audioManager_ = null;\n  }\n\n  if (this.grid_) {\n    this.grid_.dispose();\n    this.grid_ = null;\n  }\n\n  this.renderer_.dispose();\n\n  if (this.markerManager_) {\n    this.markerManager_.dispose();\n    this.markerManager_ = null;\n  }\n\n  Blockly.WorkspaceSvg.superClass_.dispose.call(this);\n\n  // Dispose of theme manager after all blocks and mutators are disposed of.\n  if (this.themeManager_) {\n    this.themeManager_.unsubscribeWorkspace(this);\n    this.themeManager_.unsubscribe(this.svgBackground_);\n    if (!this.options.parentWorkspace) {\n      this.themeManager_.dispose();\n      this.themeManager_ = null;\n    }\n  }\n\n  this.connectionDBList = null;\n\n  this.toolboxCategoryCallbacks_ = null;\n  this.flyoutButtonCallbacks_ = null;\n\n  if (!this.options.parentWorkspace) {\n    // Top-most workspace.  Dispose of the div that the\n    // SVG is injected into (i.e. injectionDiv).\n    var parentSvg = this.getParentSvg();\n    if (parentSvg && parentSvg.parentNode) {\n      Blockly.utils.dom.removeNode(parentSvg.parentNode);\n    }\n  }\n  if (this.resizeHandlerWrapper_) {\n    Blockly.unbindEvent_(this.resizeHandlerWrapper_);\n    this.resizeHandlerWrapper_ = null;\n  }\n};\n\n/**\n * Obtain a newly created block.\n *\n * This block's svg must still be initialized\n * ([initSvg]{@link Blockly.BlockSvg#initSvg}) and it must be rendered\n * ([render]{@link Blockly.BlockSvg#render}) before the block will be visible.\n * @param {!string} prototypeName Name of the language object containing\n *     type-specific functions for this block.\n * @param {string=} opt_id Optional ID.  Use this ID if provided, otherwise\n *     create a new ID.\n * @return {!Blockly.BlockSvg} The created block.\n * @override\n */\nBlockly.WorkspaceSvg.prototype.newBlock = function(prototypeName, opt_id) {\n  return new Blockly.BlockSvg(this, prototypeName, opt_id);\n};\n\n/**\n * Add a trashcan.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.addTrashcan = function() {\n  if (!Blockly.Trashcan) {\n    throw Error('Missing require for Blockly.Trashcan');\n  }\n  /** @type {Blockly.Trashcan} */\n  this.trashcan = new Blockly.Trashcan(this);\n  var svgTrashcan = this.trashcan.createDom();\n  this.svgGroup_.insertBefore(svgTrashcan, this.svgBlockCanvas_);\n};\n\n/**\n * Add zoom controls.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.addZoomControls = function() {\n  if (!Blockly.ZoomControls) {\n    throw Error('Missing require for Blockly.ZoomControls');\n  }\n  /** @type {Blockly.ZoomControls} */\n  this.zoomControls_ = new Blockly.ZoomControls(this);\n  var svgZoomControls = this.zoomControls_.createDom();\n  this.svgGroup_.appendChild(svgZoomControls);\n};\n\n/**\n * Add a flyout element in an element with the given tag name.\n * @param {string|\n * !Blockly.utils.Svg<!SVGSVGElement>|\n * !Blockly.utils.Svg<!SVGGElement>} tagName What type of tag the\n *     flyout belongs in.\n * @return {!Element} The element containing the flyout DOM.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.addFlyout = function(tagName) {\n  var workspaceOptions = new Blockly.Options(\n      /** @type {!Blockly.BlocklyOptions} */\n      ({\n        'parentWorkspace': this,\n        'rtl': this.RTL,\n        'oneBasedIndex': this.options.oneBasedIndex,\n        'horizontalLayout': this.horizontalLayout,\n        'renderer': this.options.renderer,\n        'rendererOverrides': this.options.rendererOverrides\n      }));\n  workspaceOptions.toolboxPosition = this.options.toolboxPosition;\n  if (this.horizontalLayout) {\n    if (!Blockly.HorizontalFlyout) {\n      throw Error('Missing require for Blockly.HorizontalFlyout');\n    }\n    this.flyout_ = new Blockly.HorizontalFlyout(workspaceOptions);\n  } else {\n    if (!Blockly.VerticalFlyout) {\n      throw Error('Missing require for Blockly.VerticalFlyout');\n    }\n    this.flyout_ = new Blockly.VerticalFlyout(workspaceOptions);\n  }\n  this.flyout_.autoClose = false;\n  this.flyout_.getWorkspace().setVisible(true);\n\n  // Return the element so that callers can place it in their desired\n  // spot in the DOM.  For example, mutator flyouts do not go in the same place\n  // as main workspace flyouts.\n  return this.flyout_.createDom(tagName);\n};\n\n/**\n * Getter for the flyout associated with this workspace.  This flyout may be\n * owned by either the toolbox or the workspace, depending on toolbox\n * configuration.  It will be null if there is no flyout.\n * @param {boolean=} opt_own Only return the workspace's own flyout if True.\n * @return {Blockly.IFlyout} The flyout on this workspace.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.getFlyout = function(opt_own) {\n  if (this.flyout_ || opt_own) {\n    return this.flyout_;\n  }\n  if (this.toolbox_) {\n    return this.toolbox_.getFlyout();\n  }\n  return null;\n};\n\n/**\n * Getter for the toolbox associated with this workspace, if one exists.\n * @return {Blockly.IToolbox} The toolbox on this workspace.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.getToolbox = function() {\n  return this.toolbox_;\n};\n\n/**\n * Update items that use screen coordinate calculations\n * because something has changed (e.g. scroll position, window size).\n * @private\n */\nBlockly.WorkspaceSvg.prototype.updateScreenCalculations_ = function() {\n  this.updateInverseScreenCTM();\n  this.recordDeleteAreas();\n};\n\n/**\n * If enabled, resize the parts of the workspace that change when the workspace\n * contents (e.g. block positions) change.  This will also scroll the\n * workspace contents if needed.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.resizeContents = function() {\n  if (!this.resizesEnabled_ || !this.rendered) {\n    return;\n  }\n  if (this.scrollbar) {\n    this.scrollbar.resize();\n  }\n  this.updateInverseScreenCTM();\n};\n\n/**\n * Resize and reposition all of the workspace chrome (toolbox,\n * trash, scrollbars etc.)\n * This should be called when something changes that\n * requires recalculating dimensions and positions of the\n * trash, zoom, toolbox, etc. (e.g. window resize).\n */\nBlockly.WorkspaceSvg.prototype.resize = function() {\n  if (this.toolbox_) {\n    this.toolbox_.position();\n  }\n  if (this.flyout_) {\n    this.flyout_.position();\n  }\n  if (this.trashcan) {\n    this.trashcan.position();\n  }\n  if (this.zoomControls_) {\n    this.zoomControls_.position();\n  }\n  if (this.scrollbar) {\n    this.scrollbar.resize();\n  }\n  this.updateScreenCalculations_();\n};\n\n/**\n * Resizes and repositions workspace chrome if the page has a new\n * scroll position.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled =\n    function() {\n    /* eslint-disable indent */\n  var currScroll = Blockly.utils.getDocumentScroll();\n  if (!Blockly.utils.Coordinate.equals(\n      this.lastRecordedPageScroll_, currScroll)) {\n    this.lastRecordedPageScroll_ = currScroll;\n    this.updateScreenCalculations_();\n  }\n}; /* eslint-enable indent */\n\n/**\n * Get the SVG element that forms the drawing surface.\n * @return {!SVGGElement} SVG group element.\n */\nBlockly.WorkspaceSvg.prototype.getCanvas = function() {\n  return /** @type {!SVGGElement} */ (this.svgBlockCanvas_);\n};\n\n/**\n * Get the SVG element that forms the bubble surface.\n * @return {!SVGGElement} SVG group element.\n */\nBlockly.WorkspaceSvg.prototype.getBubbleCanvas = function() {\n  return /** @type {!SVGGElement} */ (this.svgBubbleCanvas_);\n};\n\n/**\n * Get the SVG element that contains this workspace.\n * Note: We assume this is only called after the workspace has been injected\n * into the DOM.\n * @return {!SVGElement} SVG element.\n */\nBlockly.WorkspaceSvg.prototype.getParentSvg = function() {\n  if (!this.cachedParentSvg_) {\n    var element = this.svgGroup_;\n    while (element) {\n      if (element.tagName == 'svg') {\n        this.cachedParentSvg_ = element;\n        break;\n      }\n      element = /** @type {!SVGElement} */ (element.parentNode);\n    }\n  }\n  return /** @type {!SVGElement} */ (this.cachedParentSvg_);\n};\n\n/**\n * Fires a viewport event if events are enabled and there is a change in\n * viewport values.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.maybeFireViewportChangeEvent = function() {\n  // TODO(#4203) Enable viewport events after ui events refactor.\n  // if (!Blockly.Events.isEnabled()) {\n  //   return;\n  // }\n  // var scale = this.scale;\n  // var top = -this.scrollY;\n  // var left = -this.scrollX;\n  // if (scale == this.oldScale_ && top == this.oldTop_ && left == this.oldLeft_) {\n  //   return;\n  // }\n  // this.oldScale_ = scale;\n  // this.oldTop_ = top;\n  // this.oldLeft_ = left;\n  // var event = new Blockly.Events.Ui(null, 'viewport', null,\n  //     { scale: scale, top: top, left: left });\n  // event.workspaceId = this.id;\n  // Blockly.Events.fire(event);\n};\n\n/**\n * Translate this workspace to new coordinates.\n * @param {number} x Horizontal translation, in pixel units relative to the\n *    top left of the Blockly div.\n * @param {number} y Vertical translation, in pixel units relative to the\n *    top left of the Blockly div.\n */\nBlockly.WorkspaceSvg.prototype.translate = function(x, y) {\n  if (this.useWorkspaceDragSurface_ && this.isDragSurfaceActive_) {\n    this.workspaceDragSurface_.translateSurface(x,y);\n  } else {\n    var translation = 'translate(' + x + ',' + y + ') ' +\n        'scale(' + this.scale + ')';\n    this.svgBlockCanvas_.setAttribute('transform', translation);\n    this.svgBubbleCanvas_.setAttribute('transform', translation);\n  }\n  // Now update the block drag surface if we're using one.\n  if (this.blockDragSurface_) {\n    this.blockDragSurface_.translateAndScaleGroup(x, y, this.scale);\n  }\n  // And update the grid if we're using one.\n  if (this.grid_) {\n    this.grid_.moveTo(x, y);\n  }\n\n  this.maybeFireViewportChangeEvent();\n};\n\n/**\n * Called at the end of a workspace drag to take the contents\n * out of the drag surface and put them back into the workspace SVG.\n * Does nothing if the workspace drag surface is not enabled.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.resetDragSurface = function() {\n  // Don't do anything if we aren't using a drag surface.\n  if (!this.useWorkspaceDragSurface_) {\n    return;\n  }\n\n  this.isDragSurfaceActive_ = false;\n\n  var trans = this.workspaceDragSurface_.getSurfaceTranslation();\n  this.workspaceDragSurface_.clearAndHide(this.svgGroup_);\n  var translation = 'translate(' + trans.x + ',' + trans.y + ') ' +\n      'scale(' + this.scale + ')';\n  this.svgBlockCanvas_.setAttribute('transform', translation);\n  this.svgBubbleCanvas_.setAttribute('transform', translation);\n};\n\n/**\n * Called at the beginning of a workspace drag to move contents of\n * the workspace to the drag surface.\n * Does nothing if the drag surface is not enabled.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.setupDragSurface = function() {\n  // Don't do anything if we aren't using a drag surface.\n  if (!this.useWorkspaceDragSurface_) {\n    return;\n  }\n\n  // This can happen if the user starts a drag, mouses up outside of the\n  // document where the mouseup listener is registered (e.g. outside of an\n  // iframe) and then moves the mouse back in the workspace.  On mobile and ff,\n  // we get the mouseup outside the frame. On chrome and safari desktop we do\n  // not.\n  if (this.isDragSurfaceActive_) {\n    return;\n  }\n\n  this.isDragSurfaceActive_ = true;\n\n  // Figure out where we want to put the canvas back.  The order\n  // in the is important because things are layered.\n  var previousElement =\n    /** @type {Element} */ (this.svgBlockCanvas_.previousSibling);\n  var width = parseInt(this.getParentSvg().getAttribute('width'), 10);\n  var height = parseInt(this.getParentSvg().getAttribute('height'), 10);\n  var coord = Blockly.utils.getRelativeXY(this.getCanvas());\n  this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),\n      this.getBubbleCanvas(), previousElement, width, height, this.scale);\n  this.workspaceDragSurface_.translateSurface(coord.x, coord.y);\n};\n\n/**\n * @return {Blockly.BlockDragSurfaceSvg} This workspace's block drag surface,\n *     if one is in use.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.getBlockDragSurface = function() {\n  return this.blockDragSurface_;\n};\n\n/**\n * Returns the horizontal offset of the workspace.\n * Intended for LTR/RTL compatibility in XML.\n * @return {number} Width.\n */\nBlockly.WorkspaceSvg.prototype.getWidth = function() {\n  var metrics = this.getMetrics();\n  return metrics ? metrics.viewWidth / this.scale : 0;\n};\n\n/**\n * Toggles the visibility of the workspace.\n * Currently only intended for main workspace.\n * @param {boolean} isVisible True if workspace should be visible.\n */\nBlockly.WorkspaceSvg.prototype.setVisible = function(isVisible) {\n  this.isVisible_ = isVisible;\n  if (!this.svgGroup_) {\n    return;\n  }\n\n  // Tell the scrollbar whether its container is visible so it can\n  // tell when to hide itself.\n  if (this.scrollbar) {\n    this.scrollbar.setContainerVisible(isVisible);\n  }\n\n  // Tell the flyout whether its container is visible so it can\n  // tell when to hide itself.\n  if (this.getFlyout()) {\n    this.getFlyout().setContainerVisible(isVisible);\n  }\n\n  this.getParentSvg().style.display = isVisible ? 'block' : 'none';\n  if (this.toolbox_) {\n    // Currently does not support toolboxes in mutators.\n    this.toolbox_.setVisible(isVisible);\n  }\n  if (isVisible) {\n    var blocks = this.getAllBlocks(false);\n    // Tell each block on the workspace to mark its fields as dirty.\n    for (var i = blocks.length - 1; i >= 0; i--) {\n      blocks[i].markDirty();\n    }\n\n    this.render();\n    if (this.toolbox_) {\n      this.toolbox_.position();\n    }\n  } else {\n    Blockly.hideChaff(true);\n  }\n};\n\n/**\n * Render all blocks in workspace.\n */\nBlockly.WorkspaceSvg.prototype.render = function() {\n  // Generate list of all blocks.\n  var blocks = this.getAllBlocks(false);\n  // Render each block.\n  for (var i = blocks.length - 1; i >= 0; i--) {\n    blocks[i].render(false);\n  }\n\n  if (this.currentGesture_) {\n    var imList = this.currentGesture_.getInsertionMarkers();\n    for (var i = 0; i < imList.length; i++) {\n      imList[i].render(false);\n    }\n  }\n\n  this.markerManager_.updateMarkers();\n};\n\n/**\n * Highlight or unhighlight a block in the workspace.  Block highlighting is\n * often used to visually mark blocks currently being executed.\n * @param {?string} id ID of block to highlight/unhighlight,\n *   or null for no block (used to unhighlight all blocks).\n * @param {boolean=} opt_state If undefined, highlight specified block and\n * automatically unhighlight all others.  If true or false, manually\n * highlight/unhighlight the specified block.\n */\nBlockly.WorkspaceSvg.prototype.highlightBlock = function(id, opt_state) {\n  if (opt_state === undefined) {\n    // Unhighlight all blocks.\n    for (var i = 0, block; (block = this.highlightedBlocks_[i]); i++) {\n      block.setHighlighted(false);\n    }\n    this.highlightedBlocks_.length = 0;\n  }\n  // Highlight/unhighlight the specified block.\n  var block = id ? this.getBlockById(id) : null;\n  if (block) {\n    var state = (opt_state === undefined) || opt_state;\n    // Using Set here would be great, but at the cost of IE10 support.\n    if (!state) {\n      Blockly.utils.arrayRemove(this.highlightedBlocks_, block);\n    } else if (this.highlightedBlocks_.indexOf(block) == -1) {\n      this.highlightedBlocks_.push(block);\n    }\n    block.setHighlighted(state);\n  }\n};\n\n/**\n * Paste the provided block onto the workspace.\n * @param {!Element|!DocumentFragment} xmlBlock XML block element or an empty\n *     DocumentFragment if the block was an insertion marker.\n */\nBlockly.WorkspaceSvg.prototype.paste = function(xmlBlock) {\n  if (!this.rendered || !xmlBlock.tagName || xmlBlock.getElementsByTagName('block').length >=\n      this.remainingCapacity()) {\n    return;\n  }\n  // The check above for tagName rules out the possibility of this being a DocumentFragment.\n  xmlBlock = /** @type {!Element} */ (xmlBlock);\n  if (this.currentGesture_) {\n    this.currentGesture_.cancel();  // Dragging while pasting?  No.\n  }\n  if (xmlBlock.tagName.toLowerCase() == 'comment') {\n    this.pasteWorkspaceComment_(xmlBlock);\n  } else {\n    this.pasteBlock_(xmlBlock);\n  }\n};\n\n/**\n * Paste the provided block onto the workspace.\n * @param {!Element} xmlBlock XML block element.\n * @private\n */\nBlockly.WorkspaceSvg.prototype.pasteBlock_ = function(xmlBlock) {\n  Blockly.Events.disable();\n  try {\n    var block = Blockly.Xml.domToBlock(xmlBlock, this);\n\n    // Handle paste for keyboard navigation\n    var markedNode = this.getMarker(Blockly.navigation.MARKER_NAME).getCurNode();\n    if (this.keyboardAccessibilityMode && markedNode &&\n        markedNode.isConnection()) {\n      var markedLocation =\n        /** @type {!Blockly.RenderedConnection} */ (markedNode.getLocation());\n      Blockly.navigation.insertBlock(/** @type {!Blockly.BlockSvg} */ (block),\n          markedLocation);\n      return;\n    }\n\n    // Move the duplicate to original position.\n    var blockX = parseInt(xmlBlock.getAttribute('x'), 10);\n    var blockY = parseInt(xmlBlock.getAttribute('y'), 10);\n    if (!isNaN(blockX) && !isNaN(blockY)) {\n      if (this.RTL) {\n        blockX = -blockX;\n      }\n      // Offset block until not clobbering another block and not in connection\n      // distance with neighbouring blocks.\n      do {\n        var collide = false;\n        var allBlocks = this.getAllBlocks(false);\n        for (var i = 0, otherBlock; (otherBlock = allBlocks[i]); i++) {\n          var otherXY = otherBlock.getRelativeToSurfaceXY();\n          if (Math.abs(blockX - otherXY.x) <= 1 &&\n              Math.abs(blockY - otherXY.y) <= 1) {\n            collide = true;\n            break;\n          }\n        }\n        if (!collide) {\n          // Check for blocks in snap range to any of its connections.\n          var connections = block.getConnections_(false);\n          for (var i = 0, connection; (connection = connections[i]); i++) {\n            var neighbour = connection.closest(Blockly.SNAP_RADIUS,\n                new Blockly.utils.Coordinate(blockX, blockY));\n            if (neighbour.connection) {\n              collide = true;\n              break;\n            }\n          }\n        }\n        if (collide) {\n          if (this.RTL) {\n            blockX -= Blockly.SNAP_RADIUS;\n          } else {\n            blockX += Blockly.SNAP_RADIUS;\n          }\n          blockY += Blockly.SNAP_RADIUS * 2;\n        }\n      } while (collide);\n      block.moveBy(blockX, blockY);\n    }\n  } finally {\n    Blockly.Events.enable();\n  }\n  if (Blockly.Events.isEnabled() && !block.isShadow()) {\n    Blockly.Events.fire(new Blockly.Events.BlockCreate(block));\n  }\n  block.select();\n};\n\n/**\n * Paste the provided comment onto the workspace.\n * @param {!Element} xmlComment XML workspace comment element.\n * @private\n * @suppress {checkTypes} Suppress checks while workspace comments are not\n *     bundled in.\n */\nBlockly.WorkspaceSvg.prototype.pasteWorkspaceComment_ = function(xmlComment) {\n  Blockly.Events.disable();\n  try {\n    var comment = Blockly.WorkspaceCommentSvg.fromXml(xmlComment, this);\n    // Move the duplicate to original position.\n    var commentX = parseInt(xmlComment.getAttribute('x'), 10);\n    var commentY = parseInt(xmlComment.getAttribute('y'), 10);\n    if (!isNaN(commentX) && !isNaN(commentY)) {\n      if (this.RTL) {\n        commentX = -commentX;\n      }\n      // Offset workspace comment.\n      // TODO (#1719): Properly offset comment such that it's not interfering\n      // with any blocks.\n      commentX += 50;\n      commentY += 50;\n      comment.moveBy(commentX, commentY);\n    }\n  } finally {\n    Blockly.Events.enable();\n  }\n  if (Blockly.Events.isEnabled()) {\n    // TODO: Fire a Workspace Comment Create event.\n  }\n  comment.select();\n};\n\n/**\n * Refresh the toolbox unless there's a drag in progress.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.refreshToolboxSelection = function() {\n  var ws = this.isFlyout ? this.targetWorkspace : this;\n  if (ws && !ws.currentGesture_ && ws.toolbox_ && ws.toolbox_.getFlyout()) {\n    ws.toolbox_.refreshSelection();\n  }\n};\n\n/**\n * Rename a variable by updating its name in the variable map.  Update the\n *     flyout to show the renamed variable immediately.\n * @param {string} id ID of the variable to rename.\n * @param {string} newName New variable name.\n */\nBlockly.WorkspaceSvg.prototype.renameVariableById = function(id, newName) {\n  Blockly.WorkspaceSvg.superClass_.renameVariableById.call(this, id, newName);\n  this.refreshToolboxSelection();\n};\n\n/**\n * Delete a variable by the passed in ID.   Update the flyout to show\n *     immediately that the variable is deleted.\n * @param {string} id ID of variable to delete.\n */\nBlockly.WorkspaceSvg.prototype.deleteVariableById = function(id) {\n  Blockly.WorkspaceSvg.superClass_.deleteVariableById.call(this, id);\n  this.refreshToolboxSelection();\n};\n\n/**\n * Create a new variable with the given name.  Update the flyout to show the\n *     new variable immediately.\n * @param {string} name The new variable's name.\n * @param {?string=} opt_type The type of the variable like 'int' or 'string'.\n *     Does not need to be unique. Field_variable can filter variables based on\n *     their type. This will default to '' which is a specific type.\n * @param {?string=} opt_id The unique ID of the variable. This will default to\n *     a UUID.\n * @return {!Blockly.VariableModel} The newly created variable.\n */\nBlockly.WorkspaceSvg.prototype.createVariable = function(name,\n    opt_type, opt_id) {\n  var newVar = Blockly.WorkspaceSvg.superClass_.createVariable.call(\n      this, name, opt_type, opt_id);\n  this.refreshToolboxSelection();\n  return newVar;\n};\n\n/**\n * Make a list of all the delete areas for this workspace.\n */\nBlockly.WorkspaceSvg.prototype.recordDeleteAreas = function() {\n  if (this.trashcan && this.svgGroup_.parentNode) {\n    this.deleteAreaTrash_ = this.trashcan.getClientRect();\n  } else {\n    this.deleteAreaTrash_ = null;\n  }\n  if (this.flyout_) {\n    this.deleteAreaToolbox_ = this.flyout_.getClientRect();\n  } else if (this.toolbox_ && typeof this.toolbox_.getClientRect == 'function') {\n    this.deleteAreaToolbox_ = this.toolbox_.getClientRect();\n  } else {\n    this.deleteAreaToolbox_ = null;\n  }\n};\n\n/**\n * Is the mouse event over a delete area (toolbox or non-closing flyout)?\n * @param {!Event} e Mouse move event.\n * @return {?number} Null if not over a delete area, or an enum representing\n *     which delete area the event is over.\n */\nBlockly.WorkspaceSvg.prototype.isDeleteArea = function(e) {\n  if (this.deleteAreaTrash_ &&\n      this.deleteAreaTrash_.contains(e.clientX, e.clientY)) {\n    return Blockly.DELETE_AREA_TRASH;\n  }\n  if (this.deleteAreaToolbox_ &&\n      this.deleteAreaToolbox_.contains(e.clientX, e.clientY)) {\n    return Blockly.DELETE_AREA_TOOLBOX;\n  }\n  return Blockly.DELETE_AREA_NONE;\n};\n\n/**\n * Handle a mouse-down on SVG drawing surface.\n * @param {!Event} e Mouse down event.\n * @private\n */\nBlockly.WorkspaceSvg.prototype.onMouseDown_ = function(e) {\n  var gesture = this.getGesture(e);\n  if (gesture) {\n    gesture.handleWsStart(e, this);\n  }\n};\n\n/**\n * Start tracking a drag of an object on this workspace.\n * @param {!Event} e Mouse down event.\n * @param {!Blockly.utils.Coordinate} xy Starting location of object.\n */\nBlockly.WorkspaceSvg.prototype.startDrag = function(e, xy) {\n  // Record the starting offset between the bubble's location and the mouse.\n  var point = Blockly.utils.mouseToSvg(e, this.getParentSvg(),\n      this.getInverseScreenCTM());\n  // Fix scale of mouse event.\n  point.x /= this.scale;\n  point.y /= this.scale;\n  this.dragDeltaXY_ = Blockly.utils.Coordinate.difference(xy, point);\n};\n\n/**\n * Track a drag of an object on this workspace.\n * @param {!Event} e Mouse move event.\n * @return {!Blockly.utils.Coordinate} New location of object.\n */\nBlockly.WorkspaceSvg.prototype.moveDrag = function(e) {\n  var point = Blockly.utils.mouseToSvg(e, this.getParentSvg(),\n      this.getInverseScreenCTM());\n  // Fix scale of mouse event.\n  point.x /= this.scale;\n  point.y /= this.scale;\n  return Blockly.utils.Coordinate.sum(\n      /** @type {!Blockly.utils.Coordinate} */ (this.dragDeltaXY_), point);\n};\n\n/**\n * Is the user currently dragging a block or scrolling the flyout/workspace?\n * @return {boolean} True if currently dragging or scrolling.\n */\nBlockly.WorkspaceSvg.prototype.isDragging = function() {\n  return this.currentGesture_ != null && this.currentGesture_.isDragging();\n};\n\n/**\n * Is this workspace draggable?\n * @return {boolean} True if this workspace may be dragged.\n */\nBlockly.WorkspaceSvg.prototype.isDraggable = function() {\n  return this.options.moveOptions && this.options.moveOptions.drag;\n};\n\n/**\n * Should the workspace have bounded content? Used to tell if the\n * workspace's content should be sized so that it can move (bounded) or not\n * (exact sizing).\n * @return {boolean} True if the workspace should be bounded, false otherwise.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.isContentBounded = function() {\n  return (this.options.moveOptions && this.options.moveOptions.scrollbars) ||\n      (this.options.moveOptions && this.options.moveOptions.wheel) ||\n      (this.options.moveOptions && this.options.moveOptions.drag) ||\n      (this.options.zoomOptions && this.options.zoomOptions.controls) ||\n      (this.options.zoomOptions && this.options.zoomOptions.wheel) ||\n      (this.options.zoomOptions && this.options.zoomOptions.pinch);\n};\n\n/**\n * Is this workspace movable?\n *\n * This means the user can reposition the X Y coordinates of the workspace\n * through input. This can be through scrollbars, scroll wheel, dragging, or\n * through zooming with the scroll wheel or pinch (since the zoom is centered on\n * the mouse position). This does not include zooming with the zoom controls\n * since the X Y coordinates are decided programmatically.\n * @return {boolean} True if the workspace is movable, false otherwise.\n */\nBlockly.WorkspaceSvg.prototype.isMovable = function() {\n  return (this.options.moveOptions && this.options.moveOptions.scrollbars) ||\n      (this.options.moveOptions && this.options.moveOptions.wheel) ||\n      (this.options.moveOptions && this.options.moveOptions.drag) ||\n      (this.options.zoomOptions && this.options.zoomOptions.wheel) ||\n      (this.options.zoomOptions && this.options.zoomOptions.pinch);\n};\n\n/**\n * Handle a mouse-wheel on SVG drawing surface.\n * @param {!Event} e Mouse wheel event.\n * @private\n */\nBlockly.WorkspaceSvg.prototype.onMouseWheel_ = function(e) {\n  // Don't scroll or zoom anything if drag is in progress.\n  if (Blockly.Gesture.inProgress()) {\n    e.preventDefault();\n    e.stopPropagation();\n    return;\n  }\n  var canWheelZoom = this.options.zoomOptions && this.options.zoomOptions.wheel;\n  var canWheelMove = this.options.moveOptions && this.options.moveOptions.wheel;\n  if (!canWheelZoom && !canWheelMove) {\n    return;\n  }\n\n  var scrollDelta = Blockly.utils.getScrollDeltaPixels(e);\n  if (canWheelZoom && (e.ctrlKey || !canWheelMove)) {\n    // Zoom.\n    // The vertical scroll distance that corresponds to a click of a zoom\n    // button.\n    var PIXELS_PER_ZOOM_STEP = 50;\n    var delta = -scrollDelta.y / PIXELS_PER_ZOOM_STEP;\n    var position = Blockly.utils.mouseToSvg(e, this.getParentSvg(),\n        this.getInverseScreenCTM());\n    this.zoom(position.x, position.y, delta);\n  } else {\n    // Scroll.\n    var x = this.scrollX - scrollDelta.x;\n    var y = this.scrollY - scrollDelta.y;\n\n    if (e.shiftKey && !scrollDelta.x) {\n      // Scroll horizontally (based on vertical scroll delta).\n      // This is needed as for some browser/system combinations which do not\n      // set deltaX.\n      x = this.scrollX - scrollDelta.y;\n      y = this.scrollY; // Don't scroll vertically\n    }\n    this.scroll(x, y);\n  }\n  e.preventDefault();\n};\n\n/**\n * Calculate the bounding box for the blocks on the workspace.\n * Coordinate system: workspace coordinates.\n *\n * @return {!Blockly.utils.Rect} Contains the position and size of the\n *   bounding box containing the blocks on the workspace.\n */\nBlockly.WorkspaceSvg.prototype.getBlocksBoundingBox = function() {\n  var topElements = this.getTopBoundedElements();\n  // There are no blocks, return empty rectangle.\n  if (!topElements.length) {\n    return new Blockly.utils.Rect(0, 0, 0, 0);\n  }\n\n  // Initialize boundary using the first block.\n  var boundary = topElements[0].getBoundingRectangle();\n\n  // Start at 1 since the 0th block was used for initialization.\n  for (var i = 1; i < topElements.length; i++) {\n    var blockBoundary = topElements[i].getBoundingRectangle();\n    if (blockBoundary.top < boundary.top) {\n      boundary.top = blockBoundary.top;\n    }\n    if (blockBoundary.bottom > boundary.bottom) {\n      boundary.bottom = blockBoundary.bottom;\n    }\n    if (blockBoundary.left < boundary.left) {\n      boundary.left = blockBoundary.left;\n    }\n    if (blockBoundary.right > boundary.right) {\n      boundary.right = blockBoundary.right;\n    }\n  }\n  return boundary;\n};\n\n/**\n * Clean up the workspace by ordering all the blocks in a column.\n */\nBlockly.WorkspaceSvg.prototype.cleanUp = function() {\n  this.setResizesEnabled(false);\n  Blockly.Events.setGroup(true);\n  var topBlocks = this.getTopBlocks(true);\n  var cursorY = 0;\n  for (var i = 0, block; (block = topBlocks[i]); i++) {\n    if (!block.isMovable()) {\n      continue;\n    }\n    var xy = block.getRelativeToSurfaceXY();\n    block.moveBy(-xy.x, cursorY - xy.y);\n    block.snapToGrid();\n    cursorY = block.getRelativeToSurfaceXY().y +\n        block.getHeightWidth().height +\n        this.renderer_.getConstants().MIN_BLOCK_HEIGHT;\n  }\n  Blockly.Events.setGroup(false);\n  this.setResizesEnabled(true);\n};\n\n/**\n * Show the context menu for the workspace.\n * @param {!Event} e Mouse event.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.showContextMenu = function(e) {\n  if (this.options.readOnly || this.isFlyout) {\n    return;\n  }\n  var menuOptions = Blockly.ContextMenuRegistry.registry.getContextMenuOptions(\n      Blockly.ContextMenuRegistry.ScopeType.WORKSPACE, {workspace: this});\n\n  // Allow the developer to add or modify menuOptions.\n  if (this.configureContextMenu) {\n    this.configureContextMenu(menuOptions, e);\n  }\n\n  Blockly.ContextMenu.show(e, menuOptions, this.RTL);\n};\n\n/**\n * Modify the block tree on the existing toolbox.\n * @param {?Blockly.utils.toolbox.ToolboxDefinition} toolboxDef\n *    DOM tree of toolbox contents, string of toolbox contents, or JSON\n *    representing toolbox definition.\n */\nBlockly.WorkspaceSvg.prototype.updateToolbox = function(toolboxDef) {\n  var parsedToolboxDef = Blockly.utils.toolbox.convertToolboxDefToJson(toolboxDef);\n\n  if (!parsedToolboxDef) {\n    if (this.options.languageTree) {\n      throw Error('Can\\'t nullify an existing toolbox.');\n    }\n    return;  // No change (null to null).\n  }\n  if (!this.options.languageTree) {\n    throw Error('Existing toolbox is null.  Can\\'t create new toolbox.');\n  }\n\n  if (Blockly.utils.toolbox.hasCategories(parsedToolboxDef)) {\n    if (!this.toolbox_) {\n      throw Error('Existing toolbox has no categories.  Can\\'t change mode.');\n    }\n    this.options.languageTree = parsedToolboxDef;\n    this.toolbox_.render(parsedToolboxDef);\n  } else {\n    if (!this.flyout_) {\n      throw Error('Existing toolbox has categories.  Can\\'t change mode.');\n    }\n    this.options.languageTree = parsedToolboxDef;\n    this.flyout_.show(parsedToolboxDef);\n  }\n};\n\n/**\n * Mark this workspace as the currently focused main workspace.\n */\nBlockly.WorkspaceSvg.prototype.markFocused = function() {\n  if (this.options.parentWorkspace) {\n    this.options.parentWorkspace.markFocused();\n  } else {\n    Blockly.mainWorkspace = this;\n    // We call e.preventDefault in many event handlers which means we\n    // need to explicitly grab focus (e.g from a textarea) because\n    // the browser will not do it for us.  How to do this is browser dependent.\n    this.setBrowserFocus();\n  }\n};\n\n/**\n * Set the workspace to have focus in the browser.\n * @private\n */\nBlockly.WorkspaceSvg.prototype.setBrowserFocus = function() {\n  // Blur whatever was focused since explicitly grabbing focus below does not\n  // work in Edge.\n  if (document.activeElement) {\n    document.activeElement.blur();\n  }\n  try {\n    // Focus the workspace SVG - this is for Chrome and Firefox.\n    this.getParentSvg().focus({preventScroll:true});\n  } catch (e) {\n    // IE and Edge do not support focus on SVG elements. When that fails\n    // above, get the injectionDiv (the workspace's parent) and focus that\n    // instead.  This doesn't work in Chrome.\n    try {\n      // In IE11, use setActive (which is IE only) so the page doesn't scroll\n      // to the workspace gaining focus.\n      this.getParentSvg().parentNode.setActive();\n    } catch (e) {\n      // setActive support was discontinued in Edge so when that fails, call\n      // focus instead.\n      this.getParentSvg().parentNode.focus({preventScroll:true});\n    }\n  }\n};\n\n/**\n * Zooms the workspace in or out relative to/centered on the given (x, y)\n * coordinate.\n * @param {number} x X coordinate of center, in pixel units relative to the\n *     top-left corner of the parentSVG.\n * @param {number} y Y coordinate of center, in pixel units relative to the\n *     top-left corner of the parentSVG.\n * @param {number} amount Amount of zooming. The formula for the new scale\n *     is newScale = currentScale * (scaleSpeed^amount). scaleSpeed is set in\n *     the workspace options. Negative amount values zoom out, and positive\n *     amount values zoom in.\n */\nBlockly.WorkspaceSvg.prototype.zoom = function(x, y, amount) {\n  // Scale factor.\n  var speed = this.options.zoomOptions.scaleSpeed;\n  var scaleChange = Math.pow(speed, amount);\n  var newScale = this.scale * scaleChange;\n  if (this.scale == newScale) {\n    return;  // No change in zoom.\n  }\n\n  // Clamp scale within valid range.\n  if (newScale > this.options.zoomOptions.maxScale) {\n    scaleChange = this.options.zoomOptions.maxScale / this.scale;\n  } else if (newScale < this.options.zoomOptions.minScale) {\n    scaleChange = this.options.zoomOptions.minScale / this.scale;\n  }\n\n  // Transform the x/y coordinates from the parentSVG's space into the\n  // canvas' space, so that they are in workspace units relative to the top\n  // left of the visible portion of the workspace.\n  var matrix = this.getCanvas().getCTM();\n  var center = this.getParentSvg().createSVGPoint();\n  center.x = x;\n  center.y = y;\n  center = center.matrixTransform(matrix.inverse());\n  x = center.x;\n  y = center.y;\n\n  // Find the new scrollX/scrollY so that the center remains in the same\n  // position (relative to the center) after we zoom.\n  // newScale and matrix.a should be identical (within a rounding error).\n  matrix = matrix.translate(x * (1 - scaleChange), y * (1 - scaleChange))\n      .scale(scaleChange);\n  // scrollX and scrollY are in pixels.\n  // The scrollX and scrollY still need to have absoluteLeft and absoluteTop\n  // subtracted from them, but we'll leave that for setScale so that they're\n  // correctly updated for the new flyout size if we have a simple toolbox.\n  this.scrollX = matrix.e;\n  this.scrollY = matrix.f;\n  this.setScale(newScale);\n};\n\n/**\n * Zooming the blocks centered in the center of view with zooming in or out.\n * @param {number} type Type of zooming (-1 zooming out and 1 zooming in).\n */\nBlockly.WorkspaceSvg.prototype.zoomCenter = function(type) {\n  var metrics = this.getMetrics();\n  if (this.flyout_) {\n    // If you want blocks in the center of the view (visible portion of the\n    // workspace) to stay centered when the size of the view decreases (i.e.\n    // when the size of the flyout increases) you need the center of the\n    // *blockly div* to stay in the same pixel-position.\n    // Note: This only works because of how scrollCenter positions blocks.\n    var x = metrics.svgWidth ? metrics.svgWidth / 2 : 0;\n    var y = metrics.svgHeight ? metrics.svgHeight / 2 : 0;\n  } else {\n    var x = (metrics.viewWidth / 2) + metrics.absoluteLeft;\n    var y = (metrics.viewHeight / 2) + metrics.absoluteTop;\n  }\n  this.zoom(x, y, type);\n};\n\n/**\n * Zoom the blocks to fit in the workspace if possible.\n */\nBlockly.WorkspaceSvg.prototype.zoomToFit = function() {\n  if (!this.isMovable()) {\n    console.warn('Tried to move a non-movable workspace. This could result' +\n        ' in blocks becoming inaccessible.');\n    return;\n  }\n\n  var metrics = this.getMetrics();\n  var workspaceWidth = metrics.viewWidth;\n  var workspaceHeight = metrics.viewHeight;\n  var blocksBox = this.getBlocksBoundingBox();\n  var blocksWidth = blocksBox.right - blocksBox.left;\n  var blocksHeight = blocksBox.bottom - blocksBox.top;\n  if (!blocksWidth) {\n    return;  // Prevents zooming to infinity.\n  }\n  if (this.flyout_) {\n    // We have to add the flyout size to both the workspace size and the\n    // block size because the blocks we want to resize include the blocks in\n    // the flyout, and the area we want to fit them includes the portion of\n    // the workspace that is behind the flyout.\n    if (this.horizontalLayout) {\n      workspaceHeight += this.flyout_.getHeight();\n      // Convert from pixels to workspace coordinates.\n      blocksHeight += this.flyout_.getHeight() / this.scale;\n    } else {\n      workspaceWidth += this.flyout_.getWidth();\n      // Convert from pixels to workspace coordinates.\n      blocksWidth += this.flyout_.getWidth() / this.scale;\n    }\n  }\n\n  // Scale Units: (pixels / workspaceUnit)\n  var ratioX = workspaceWidth / blocksWidth;\n  var ratioY = workspaceHeight / blocksHeight;\n  Blockly.Events.disable();\n  try {\n    this.setScale(Math.min(ratioX, ratioY));\n    this.scrollCenter();\n  } finally {\n    Blockly.Events.enable();\n  }\n  this.maybeFireViewportChangeEvent();\n};\n\n/**\n * Add a transition class to the block and bubble canvas, to animate any\n * transform changes.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.beginCanvasTransition = function() {\n  Blockly.utils.dom.addClass(\n      /** @type {!SVGElement} */ (this.svgBlockCanvas_),\n      'blocklyCanvasTransitioning');\n  Blockly.utils.dom.addClass(\n      /** @type {!SVGElement} */ (this.svgBubbleCanvas_),\n      'blocklyCanvasTransitioning');\n};\n\n/**\n * Remove transition class from the block and bubble canvas.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.endCanvasTransition = function() {\n  Blockly.utils.dom.removeClass(\n      /** @type {!SVGElement} */ (this.svgBlockCanvas_),\n      'blocklyCanvasTransitioning');\n  Blockly.utils.dom.removeClass(\n      /** @type {!SVGElement} */ (this.svgBubbleCanvas_),\n      'blocklyCanvasTransitioning');\n};\n\n/**\n * Center the workspace.\n */\nBlockly.WorkspaceSvg.prototype.scrollCenter = function() {\n  if (!this.isMovable()) {\n    console.warn('Tried to move a non-movable workspace. This could result' +\n        ' in blocks becoming inaccessible.');\n    return;\n  }\n\n  var metrics = this.getMetrics();\n  var x = (metrics.contentWidth - metrics.viewWidth) / 2;\n  var y = (metrics.contentHeight - metrics.viewHeight) / 2;\n\n  // Convert from workspace directions to canvas directions.\n  x = -x - metrics.contentLeft;\n  y = -y - metrics.contentTop;\n  this.scroll(x, y);\n};\n\n/**\n * Scroll the workspace to center on the given block.\n * @param {?string} id ID of block center on.\n * @public\n */\nBlockly.WorkspaceSvg.prototype.centerOnBlock = function(id) {\n  if (!this.isMovable()) {\n    console.warn('Tried to move a non-movable workspace. This could result' +\n        ' in blocks becoming inaccessible.');\n    return;\n  }\n\n  var block = id ? this.getBlockById(id) : null;\n  if (!block) {\n    return;\n  }\n\n  // XY is in workspace coordinates.\n  var xy = block.getRelativeToSurfaceXY();\n  // Height/width is in workspace units.\n  var heightWidth = block.getHeightWidth();\n\n  // Find the enter of the block in workspace units.\n  var blockCenterY = xy.y + heightWidth.height / 2;\n\n  // In RTL the block's position is the top right of the block, not top left.\n  var multiplier = this.RTL ? -1 : 1;\n  var blockCenterX = xy.x + (multiplier * heightWidth.width / 2);\n\n  // Workspace scale, used to convert from workspace coordinates to pixels.\n  var scale = this.scale;\n\n  // Center of block in pixels, relative to workspace origin (center 0,0).\n  // Scrolling to here would put the block in the top-left corner of the\n  // visible workspace.\n  var pixelX = blockCenterX * scale;\n  var pixelY = blockCenterY * scale;\n\n  var metrics = this.getMetrics();\n\n  // viewHeight and viewWidth are in pixels.\n  var halfViewWidth = metrics.viewWidth / 2;\n  var halfViewHeight = metrics.viewHeight / 2;\n\n  // Put the block in the center of the visible workspace instead.\n  var scrollToCenterX = pixelX - halfViewWidth;\n  var scrollToCenterY = pixelY - halfViewHeight;\n\n  // Convert from workspace directions to canvas directions.\n  var x = -scrollToCenterX;\n  var y = -scrollToCenterY;\n\n  this.scroll(x, y);\n};\n\n/**\n * Set the workspace's zoom factor.\n * @param {number} newScale Zoom factor. Units: (pixels / workspaceUnit).\n */\nBlockly.WorkspaceSvg.prototype.setScale = function(newScale) {\n  if (this.options.zoomOptions.maxScale &&\n      newScale > this.options.zoomOptions.maxScale) {\n    newScale = this.options.zoomOptions.maxScale;\n  } else if (this.options.zoomOptions.minScale &&\n      newScale < this.options.zoomOptions.minScale) {\n    newScale = this.options.zoomOptions.minScale;\n  }\n  this.scale = newScale;\n\n  Blockly.hideChaff(false);\n  if (this.flyout_) {\n    // No toolbox, resize flyout.\n    this.flyout_.reflow();\n    this.recordDeleteAreas();\n  }\n  if (this.grid_) {\n    this.grid_.update(this.scale);\n  }\n\n  // We call scroll instead of scrollbar.resize() so that we can center the\n  // zoom correctly without scrollbars, but scroll does not resize the\n  // scrollbars so we have to call resizeView/resizeContent as well.\n  var metrics = this.getMetrics();\n  // The scroll values and the view values are additive inverses of\n  // each other, so when we subtract from one we have to add to the other.\n  this.scrollX -= metrics.absoluteLeft;\n  this.scrollY -= metrics.absoluteTop;\n  metrics.viewLeft += metrics.absoluteLeft;\n  metrics.viewTop += metrics.absoluteTop;\n\n  this.scroll(this.scrollX, this.scrollY);\n  if (this.scrollbar) {\n    if (this.flyout_) {\n      this.scrollbar.hScroll.resizeViewHorizontal(metrics);\n      this.scrollbar.vScroll.resizeViewVertical(metrics);\n    } else {\n      this.scrollbar.hScroll.resizeContentHorizontal(metrics);\n      this.scrollbar.vScroll.resizeContentVertical(metrics);\n    }\n  }\n};\n\n\n/**\n * Get the workspace's zoom factor.  If the workspace has a parent, we call into\n * the parent to get the workspace scale.\n * @return {number} The workspace zoom factor. Units: (pixels / workspaceUnit).\n */\nBlockly.WorkspaceSvg.prototype.getScale = function() {\n  if (this.options.parentWorkspace) {\n    return this.options.parentWorkspace.getScale();\n  }\n  return this.scale;\n};\n\n/**\n * Scroll the workspace to a specified offset (in pixels), keeping in the\n * workspace bounds. See comment on workspaceSvg.scrollX for more detail on\n * the meaning of these values.\n * @param {number} x Target X to scroll to.\n * @param {number} y Target Y to scroll to.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.scroll = function(x, y) {\n  Blockly.hideChaff(/* opt_allowToolbox */ true);\n\n  // Keep scrolling within the bounds of the content.\n  var metrics = this.getMetrics();\n  // This is the offset of the top-left corner of the view from the\n  // workspace origin when the view is \"seeing\" the bottom-right corner of\n  // the content.\n  var maxOffsetOfViewFromOriginX = metrics.contentWidth + metrics.contentLeft -\n      metrics.viewWidth;\n  var maxOffsetOfViewFromOriginY = metrics.contentHeight + metrics.contentTop -\n      metrics.viewHeight;\n  // Canvas coordinates (aka scroll coordinates) have inverse directionality\n  // to workspace coordinates so we have to inverse them.\n  x = Math.min(x, -metrics.contentLeft);\n  y = Math.min(y, -metrics.contentTop);\n  x = Math.max(x, -maxOffsetOfViewFromOriginX);\n  y = Math.max(y, -maxOffsetOfViewFromOriginY);\n\n  this.scrollX = x;\n  this.scrollY = y;\n  if (this.scrollbar) {\n    // The content position (displacement from the content's top-left to the\n    // origin) plus the scroll position (displacement from the view's top-left\n    // to the origin) gives us the distance from the view's top-left to the\n    // content's top-left. Then we negate this so we get the displacement from\n    // the content's top-left to the view's top-left, matching the\n    // directionality of the scrollbars.\n\n    this.scrollbar.hScroll.setHandlePosition(-(x + metrics.contentLeft) *\n        this.scrollbar.hScroll.ratio);\n    this.scrollbar.vScroll.setHandlePosition(-(y + metrics.contentTop) *\n        this.scrollbar.vScroll.ratio);\n  }\n  // We have to shift the translation so that when the canvas is at 0, 0 the\n  // workspace origin is not underneath the toolbox.\n  x += metrics.absoluteLeft;\n  y += metrics.absoluteTop;\n  this.translate(x, y);\n};\n\n/**\n * Get the dimensions of the given workspace component, in pixels.\n * @param {Blockly.IToolbox|Blockly.IFlyout} elem The element to get the\n *     dimensions of, or null.  It should be a toolbox or flyout, and should\n *     implement getWidth() and getHeight().\n * @return {!Blockly.utils.Size} An object containing width and height\n *     attributes, which will both be zero if elem did not exist.\n * @private\n */\nBlockly.WorkspaceSvg.getDimensionsPx_ = function(elem) {\n  var width = 0;\n  var height = 0;\n  if (elem) {\n    width = elem.getWidth();\n    height = elem.getHeight();\n  }\n  return new Blockly.utils.Size(width, height);\n};\n\n/**\n * Get the content dimensions of the given workspace, taking into account\n * whether or not it is scrollable and what size the workspace div is on screen.\n * @param {!Blockly.WorkspaceSvg} ws The workspace to measure.\n * @param {!Object} svgSize An object containing height and width attributes in\n *     CSS pixels.  Together they specify the size of the visible workspace, not\n *     including areas covered up by the toolbox.\n * @return {!Object} The dimensions of the contents of the given workspace, as\n *     an object containing at least\n *     - height and width in pixels\n *     - left and top in pixels relative to the workspace origin.\n * @private\n */\nBlockly.WorkspaceSvg.getContentDimensions_ = function(ws, svgSize) {\n  if (ws.isContentBounded()) {\n    return Blockly.WorkspaceSvg.getContentDimensionsBounded_(ws, svgSize);\n  } else {\n    return Blockly.WorkspaceSvg.getContentDimensionsExact_(ws);\n  }\n};\n\n/**\n * Get the bounding box for all workspace contents, in pixels.\n * @param {!Blockly.WorkspaceSvg} ws The workspace to inspect.\n * @return {!Object} The dimensions of the contents of the given workspace, as\n *     an object containing\n *     - height and width in pixels\n *     - left, right, top and bottom in pixels relative to the workspace origin.\n * @private\n */\nBlockly.WorkspaceSvg.getContentDimensionsExact_ = function(ws) {\n  // Block bounding box is in workspace coordinates.\n  var blockBox = ws.getBlocksBoundingBox();\n  var scale = ws.scale;\n\n  // Convert to pixels.\n  var top = blockBox.top * scale;\n  var bottom = blockBox.bottom * scale;\n  var left = blockBox.left * scale;\n  var right = blockBox.right * scale;\n\n  return {\n    top: top,\n    bottom: bottom,\n    left: left,\n    right: right,\n    width: right - left,\n    height: bottom - top\n  };\n};\n\n/**\n * Calculate the size of a scrollable workspace, which should include room for a\n * half screen border around the workspace contents.\n * @param {!Blockly.WorkspaceSvg} ws The workspace to measure.\n * @param {!Object} svgSize An object containing height and width attributes in\n *     CSS pixels.  Together they specify the size of the visible workspace, not\n *     including areas covered up by the toolbox.\n * @return {!Object} The dimensions of the contents of the given workspace, as\n *     an object containing\n *     - height and width in pixels\n *     - left and top in pixels relative to the workspace origin.\n * @private\n */\nBlockly.WorkspaceSvg.getContentDimensionsBounded_ = function(ws, svgSize) {\n  var content = Blockly.WorkspaceSvg.getContentDimensionsExact_(ws);\n\n  // View height and width are both in pixels, and are the same as the SVG size.\n  var viewWidth = svgSize.width;\n  var viewHeight = svgSize.height;\n  var halfWidth = viewWidth / 2;\n  var halfHeight = viewHeight / 2;\n\n  // Add a border around the content that is at least half a screen wide.\n  // Ensure border is wide enough that blocks can scroll over entire screen.\n  var left = Math.min(content.left - halfWidth, content.right - viewWidth);\n  var right = Math.max(content.right + halfWidth, content.left + viewWidth);\n\n  var top = Math.min(content.top - halfHeight, content.bottom - viewHeight);\n  var bottom = Math.max(content.bottom + halfHeight, content.top + viewHeight);\n\n  var dimensions = {\n    left: left,\n    top: top,\n    height: bottom - top,\n    width: right - left\n  };\n  return dimensions;\n};\n\n/**\n * Return an object with all the metrics required to size scrollbars for a\n * top level workspace.  The following properties are computed:\n * Coordinate system: pixel coordinates, -left, -up, +right, +down\n * .viewHeight: Height of the visible portion of the workspace.\n * .viewWidth: Width of the visible portion of the workspace.\n * .contentHeight: Height of the content.\n * .contentWidth: Width of the content.\n * .svgHeight: Height of the Blockly div (the view + the toolbox,\n *    simple or otherwise),\n * .svgWidth: Width of the Blockly div (the view + the toolbox,\n *    simple or otherwise),\n * .viewTop: Top-edge of the visible portion of the workspace, relative to\n *     the workspace origin.\n * .viewLeft: Left-edge of the visible portion of the workspace, relative to\n *     the workspace origin.\n * .contentTop: Top-edge of the content, relative to the workspace origin.\n * .contentLeft: Left-edge of the content relative to the workspace origin.\n * .absoluteTop: Top-edge of the visible portion of the workspace, relative\n *     to the blocklyDiv.\n * .absoluteLeft: Left-edge of the visible portion of the workspace, relative\n *     to the blocklyDiv.\n * .toolboxWidth: Width of the toolbox, if it exists.  Otherwise zero.\n * .toolboxHeight: Height of the toolbox, if it exists.  Otherwise zero.\n * .flyoutWidth: Width of the flyout if it is always open.  Otherwise zero.\n * .flyoutHeight: Height of the flyout if it is always open.  Otherwise zero.\n * .toolboxPosition: Top, bottom, left or right. Use TOOLBOX_AT constants to\n *     compare.\n * @return {!Blockly.utils.Metrics} Contains size and position metrics of a top\n *     level workspace.\n * @private\n * @this {Blockly.WorkspaceSvg}\n */\nBlockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_ = function() {\n\n  var toolboxDimensions =\n      Blockly.WorkspaceSvg.getDimensionsPx_(this.toolbox_);\n  var flyoutDimensions =\n      Blockly.WorkspaceSvg.getDimensionsPx_(this.flyout_);\n\n  // Contains height and width in CSS pixels.\n  // svgSize is equivalent to the size of the injectionDiv at this point.\n  var svgSize = Blockly.svgSize(this.getParentSvg());\n  var viewSize = {height: svgSize.height, width: svgSize.width};\n  if (this.toolbox_) {\n    if (this.toolboxPosition == Blockly.TOOLBOX_AT_TOP ||\n        this.toolboxPosition == Blockly.TOOLBOX_AT_BOTTOM) {\n      viewSize.height -= toolboxDimensions.height;\n    } else if (this.toolboxPosition == Blockly.TOOLBOX_AT_LEFT ||\n        this.toolboxPosition == Blockly.TOOLBOX_AT_RIGHT) {\n      viewSize.width -= toolboxDimensions.width;\n    }\n  } else if (this.flyout_) {\n    if (this.toolboxPosition == Blockly.TOOLBOX_AT_TOP ||\n      this.toolboxPosition == Blockly.TOOLBOX_AT_BOTTOM) {\n      viewSize.height -= flyoutDimensions.height;\n    } else if (this.toolboxPosition == Blockly.TOOLBOX_AT_LEFT ||\n      this.toolboxPosition == Blockly.TOOLBOX_AT_RIGHT) {\n      viewSize.width -= flyoutDimensions.width;\n    }\n  }\n\n  // svgSize is now the space taken up by the Blockly workspace, not including\n  // the toolbox.\n  var contentDimensions =\n      Blockly.WorkspaceSvg.getContentDimensions_(this, viewSize);\n\n  var absoluteLeft = 0;\n  if (this.toolbox_ && this.toolboxPosition == Blockly.TOOLBOX_AT_LEFT) {\n    absoluteLeft = toolboxDimensions.width;\n  } else if (this.flyout_ && this.toolboxPosition == Blockly.TOOLBOX_AT_LEFT) {\n    absoluteLeft = flyoutDimensions.width;\n  }\n  var absoluteTop = 0;\n  if (this.toolbox_ && this.toolboxPosition == Blockly.TOOLBOX_AT_TOP) {\n    absoluteTop = toolboxDimensions.height;\n  } else if (this.flyout_ && this.toolboxPosition == Blockly.TOOLBOX_AT_TOP) {\n    absoluteTop = flyoutDimensions.height;\n  }\n\n  var metrics = {\n    contentHeight: contentDimensions.height,\n    contentWidth: contentDimensions.width,\n    contentTop: contentDimensions.top,\n    contentLeft: contentDimensions.left,\n\n    viewHeight: viewSize.height,\n    viewWidth: viewSize.width,\n    viewTop: -this.scrollY,\n    viewLeft: -this.scrollX,\n\n    absoluteTop: absoluteTop,\n    absoluteLeft: absoluteLeft,\n\n    svgHeight: svgSize.height,\n    svgWidth: svgSize.width,\n\n    toolboxWidth: toolboxDimensions.width,\n    toolboxHeight: toolboxDimensions.height,\n    toolboxPosition: this.toolboxPosition,\n\n    flyoutWidth: flyoutDimensions.width,\n    flyoutHeight: flyoutDimensions.height\n  };\n  return metrics;\n};\n\n/**\n * Sets the X/Y translations of a top level workspace.\n * @param {!Object} xyRatio Contains an x and/or y property which is a float\n *     between 0 and 1 specifying the degree of scrolling.\n * @private\n * @this {Blockly.WorkspaceSvg}\n */\nBlockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_ = function(xyRatio) {\n  var metrics = this.getMetrics();\n  if (typeof xyRatio.x == 'number') {\n    this.scrollX = -metrics.contentWidth * xyRatio.x - metrics.contentLeft;\n  }\n  if (typeof xyRatio.y == 'number') {\n    this.scrollY = -metrics.contentHeight * xyRatio.y - metrics.contentTop;\n  }\n  // We have to shift the translation so that when the canvas is at 0, 0 the\n  // workspace origin is not underneath the toolbox.\n  var x = this.scrollX + metrics.absoluteLeft;\n  var y = this.scrollY + metrics.absoluteTop;\n  // We could call scroll here, but that has extra checks we don't need to do.\n  this.translate(x, y);\n};\n\n/**\n * Find the block on this workspace with the specified ID.\n * @param {string} id ID of block to find.\n * @return {Blockly.BlockSvg} The sought after block, or null if not found.\n * @override\n */\nBlockly.WorkspaceSvg.prototype.getBlockById = function(id) {\n  return /** @type {Blockly.BlockSvg} */ (\n    Blockly.WorkspaceSvg.superClass_.getBlockById.call(this, id));\n};\n\n/**\n * Finds the top-level blocks and returns them.  Blocks are optionally sorted\n * by position; top to bottom (with slight LTR or RTL bias).\n * @param {boolean} ordered Sort the list if true.\n * @return {!Array.<!Blockly.BlockSvg>} The top-level block objects.\n * @override\n */\nBlockly.WorkspaceSvg.prototype.getTopBlocks = function(ordered) {\n  return Blockly.WorkspaceSvg.superClass_.getTopBlocks.call(this, ordered);\n};\n\n/**\n * Adds a block to the list of top blocks.\n * @param {!Blockly.Block} block Block to add.\n */\nBlockly.WorkspaceSvg.prototype.addTopBlock = function(block) {\n  this.addTopBoundedElement(/** @type {!Blockly.BlockSvg} */ (block));\n  Blockly.WorkspaceSvg.superClass_.addTopBlock.call(this, block);\n};\n\n/**\n * Removes a block from the list of top blocks.\n * @param {!Blockly.Block} block Block to remove.\n */\nBlockly.WorkspaceSvg.prototype.removeTopBlock = function(block) {\n  this.removeTopBoundedElement(/** @type {!Blockly.BlockSvg} */ (block));\n  Blockly.WorkspaceSvg.superClass_.removeTopBlock.call(this, block);\n};\n\n/**\n * Adds a comment to the list of top comments.\n * @param {!Blockly.WorkspaceComment} comment comment to add.\n */\nBlockly.WorkspaceSvg.prototype.addTopComment = function(comment) {\n  this.addTopBoundedElement(\n      /** @type {!Blockly.WorkspaceCommentSvg} */ (comment));\n  Blockly.WorkspaceSvg.superClass_.addTopComment.call(this, comment);\n};\n\n/**\n * Removes a comment from the list of top comments.\n * @param {!Blockly.WorkspaceComment} comment comment to remove.\n */\nBlockly.WorkspaceSvg.prototype.removeTopComment = function(comment) {\n  this.removeTopBoundedElement(\n      /** @type {!Blockly.WorkspaceCommentSvg} */ (comment));\n  Blockly.WorkspaceSvg.superClass_.removeTopComment.call(this, comment);\n};\n\n/**\n * Adds a bounded element to the list of top bounded elements.\n * @param {!Blockly.IBoundedElement} element Bounded element to add.\n */\nBlockly.WorkspaceSvg.prototype.addTopBoundedElement = function(element) {\n  this.topBoundedElements_.push(element);\n};\n\n/**\n * Removes a bounded element from the list of top bounded elements.\n * @param {!Blockly.IBoundedElement} element Bounded element to remove.\n */\nBlockly.WorkspaceSvg.prototype.removeTopBoundedElement = function(element) {\n  Blockly.utils.arrayRemove(this.topBoundedElements_, element);\n};\n\n/**\n * Finds the top-level bounded elements and returns them.\n * @return {!Array.<!Blockly.IBoundedElement>} The top-level bounded elements.\n */\nBlockly.WorkspaceSvg.prototype.getTopBoundedElements = function() {\n  return [].concat(this.topBoundedElements_);\n};\n\n/**\n * Update whether this workspace has resizes enabled.\n * If enabled, workspace will resize when appropriate.\n * If disabled, workspace will not resize until re-enabled.\n * Use to avoid resizing during a batch operation, for performance.\n * @param {boolean} enabled Whether resizes should be enabled.\n */\nBlockly.WorkspaceSvg.prototype.setResizesEnabled = function(enabled) {\n  var reenabled = (!this.resizesEnabled_ && enabled);\n  this.resizesEnabled_ = enabled;\n  if (reenabled) {\n    // Newly enabled.  Trigger a resize.\n    this.resizeContents();\n  }\n};\n\n/**\n * Dispose of all blocks in workspace, with an optimization to prevent resizes.\n */\nBlockly.WorkspaceSvg.prototype.clear = function() {\n  this.setResizesEnabled(false);\n  Blockly.WorkspaceSvg.superClass_.clear.call(this);\n  this.topBoundedElements_ = [];\n  this.setResizesEnabled(true);\n};\n\n/**\n * Register a callback function associated with a given key, for clicks on\n * buttons and labels in the flyout.\n * For instance, a button specified by the XML\n * <button text=\"create variable\" callbackKey=\"CREATE_VARIABLE\"></button>\n * should be matched by a call to\n * registerButtonCallback(\"CREATE_VARIABLE\", yourCallbackFunction).\n * @param {string} key The name to use to look up this function.\n * @param {function(!Blockly.FlyoutButton)} func The function to call when the\n *     given button is clicked.\n */\nBlockly.WorkspaceSvg.prototype.registerButtonCallback = function(key, func) {\n  if (typeof func != 'function') {\n    throw TypeError('Button callbacks must be functions.');\n  }\n  this.flyoutButtonCallbacks_[key] = func;\n};\n\n/**\n * Get the callback function associated with a given key, for clicks on buttons\n * and labels in the flyout.\n * @param {string} key The name to use to look up the function.\n * @return {?function(!Blockly.FlyoutButton)} The function corresponding to the\n *     given key for this workspace; null if no callback is registered.\n */\nBlockly.WorkspaceSvg.prototype.getButtonCallback = function(key) {\n  var result = this.flyoutButtonCallbacks_[key];\n  return result ? result : null;\n};\n\n/**\n * Remove a callback for a click on a button in the flyout.\n * @param {string} key The name associated with the callback function.\n */\nBlockly.WorkspaceSvg.prototype.removeButtonCallback = function(key) {\n  this.flyoutButtonCallbacks_[key] = null;\n};\n\n/**\n * Register a callback function associated with a given key, for populating\n * custom toolbox categories in this workspace.  See the variable and procedure\n * categories as an example.\n * @param {string} key The name to use to look up this function.\n * @param {function(!Blockly.Workspace):!Array.<!Element>} func The function to\n *     call when the given toolbox category is opened.\n */\nBlockly.WorkspaceSvg.prototype.registerToolboxCategoryCallback = function(key,\n    func) {\n  if (typeof func != 'function') {\n    throw TypeError('Toolbox category callbacks must be functions.');\n  }\n  this.toolboxCategoryCallbacks_[key] = func;\n};\n\n/**\n * Get the callback function associated with a given key, for populating\n * custom toolbox categories in this workspace.\n * @param {string} key The name to use to look up the function.\n * @return {?function(!Blockly.Workspace):!Array.<!Element>} The function\n *     corresponding to the given key for this workspace, or null if no function\n *     is registered.\n */\nBlockly.WorkspaceSvg.prototype.getToolboxCategoryCallback = function(key) {\n  return this.toolboxCategoryCallbacks_[key] || null;\n};\n\n/**\n * Remove a callback for a click on a custom category's name in the toolbox.\n * @param {string} key The name associated with the callback function.\n */\nBlockly.WorkspaceSvg.prototype.removeToolboxCategoryCallback = function(key) {\n  this.toolboxCategoryCallbacks_[key] = null;\n};\n\n/**\n * Look up the gesture that is tracking this touch stream on this workspace.\n * May create a new gesture.\n * @param {!Event} e Mouse event or touch event.\n * @return {Blockly.TouchGesture} The gesture that is tracking this touch\n *     stream, or null if no valid gesture exists.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.getGesture = function(e) {\n  var isStart = (e.type == 'mousedown' || e.type == 'touchstart' ||\n      e.type == 'pointerdown');\n\n  var gesture = this.currentGesture_;\n  if (gesture) {\n    if (isStart && gesture.hasStarted()) {\n      console.warn('Tried to start the same gesture twice.');\n      // That's funny.  We must have missed a mouse up.\n      // Cancel it, rather than try to retrieve all of the state we need.\n      gesture.cancel();\n      return null;\n    }\n    return gesture;\n  }\n\n  // No gesture existed on this workspace, but this looks like the start of a\n  // new gesture.\n  if (isStart) {\n    this.currentGesture_ = new Blockly.TouchGesture(e, this);\n    return this.currentGesture_;\n  }\n  // No gesture existed and this event couldn't be the start of a new gesture.\n  return null;\n};\n\n/**\n * Clear the reference to the current gesture.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.clearGesture = function() {\n  this.currentGesture_ = null;\n};\n\n/**\n * Cancel the current gesture, if one exists.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.cancelCurrentGesture = function() {\n  if (this.currentGesture_) {\n    this.currentGesture_.cancel();\n  }\n};\n\n/**\n * Get the audio manager for this workspace.\n * @return {!Blockly.WorkspaceAudio} The audio manager for this workspace.\n */\nBlockly.WorkspaceSvg.prototype.getAudioManager = function() {\n  return this.audioManager_;\n};\n\n/**\n * Get the grid object for this workspace, or null if there is none.\n * @return {Blockly.Grid} The grid object for this workspace.\n * @package\n */\nBlockly.WorkspaceSvg.prototype.getGrid = function() {\n  return this.grid_;\n};\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Functions for injecting Blockly into a web page.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.inject');\n\ngoog.require('Blockly.BlockDragSurfaceSvg');\ngoog.require('Blockly.Component');\ngoog.require('Blockly.Css');\ngoog.require('Blockly.DropDownDiv');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Grid');\ngoog.require('Blockly.Msg');\ngoog.require('Blockly.Options');\ngoog.require('Blockly.ScrollbarPair');\ngoog.require('Blockly.Tooltip');\ngoog.require('Blockly.user.keyMap');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.userAgent');\ngoog.require('Blockly.WorkspaceDragSurfaceSvg');\ngoog.require('Blockly.WorkspaceSvg');\n\ngoog.requireType('Blockly.utils.Metrics');\n\n\n/**\n * Inject a Blockly editor into the specified container element (usually a div).\n * @param {Element|string} container Containing element, or its ID,\n *     or a CSS selector.\n * @param {Blockly.BlocklyOptions=} opt_options Optional dictionary of options.\n * @return {!Blockly.WorkspaceSvg} Newly created main workspace.\n */\nBlockly.inject = function(container, opt_options) {\n  Blockly.checkBlockColourConstants();\n\n  if (typeof container == 'string') {\n    container = document.getElementById(container) ||\n        document.querySelector(container);\n  }\n  // Verify that the container is in document.\n  if (!container || !Blockly.utils.dom.containsNode(document, container)) {\n    throw Error('Error: container is not in current document.');\n  }\n  var options = new Blockly.Options(opt_options ||\n    (/** @type {!Blockly.BlocklyOptions} */ ({})));\n  var subContainer = document.createElement('div');\n  subContainer.className = 'injectionDiv';\n  subContainer.tabIndex = 0;\n  Blockly.utils.aria.setState(subContainer,\n      Blockly.utils.aria.State.LABEL, Blockly.Msg['WORKSPACE_ARIA_LABEL']);\n\n  container.appendChild(subContainer);\n  var svg = Blockly.createDom_(subContainer, options);\n\n  // Create surfaces for dragging things. These are optimizations\n  // so that the browser does not repaint during the drag.\n  var blockDragSurface = new Blockly.BlockDragSurfaceSvg(subContainer);\n  var workspaceDragSurface = new Blockly.WorkspaceDragSurfaceSvg(subContainer);\n\n  var workspace = Blockly.createMainWorkspace_(svg, options, blockDragSurface,\n      workspaceDragSurface);\n  Blockly.user.keyMap.setKeyMap(options.keyMap);\n\n  Blockly.init_(workspace);\n\n  // Keep focus on the first workspace so entering keyboard navigation looks correct.\n  Blockly.mainWorkspace = workspace;\n\n  Blockly.svgResize(workspace);\n\n  subContainer.addEventListener('focusin', function() {\n    Blockly.mainWorkspace = workspace;\n  });\n\n  return workspace;\n};\n\n/**\n * Create the SVG image.\n * @param {!Element} container Containing element.\n * @param {!Blockly.Options} options Dictionary of options.\n * @return {!Element} Newly created SVG image.\n * @private\n */\nBlockly.createDom_ = function(container, options) {\n  // Sadly browsers (Chrome vs Firefox) are currently inconsistent in laying\n  // out content in RTL mode.  Therefore Blockly forces the use of LTR,\n  // then manually positions content in RTL as needed.\n  container.setAttribute('dir', 'LTR');\n  // Set the default direction for Components to use.\n  Blockly.Component.defaultRightToLeft = options.RTL;\n\n  // Load CSS.\n  Blockly.Css.inject(options.hasCss, options.pathToMedia);\n\n  // Build the SVG DOM.\n  /*\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    xmlns:html=\"http://www.w3.org/1999/xhtml\"\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n    version=\"1.1\"\n    class=\"blocklySvg\">\n    ...\n  </svg>\n  */\n  var svg = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.SVG, {\n        'xmlns': Blockly.utils.dom.SVG_NS,\n        'xmlns:html': Blockly.utils.dom.HTML_NS,\n        'xmlns:xlink': Blockly.utils.dom.XLINK_NS,\n        'version': '1.1',\n        'class': 'blocklySvg',\n        'tabindex': '0'\n      }, container);\n  /*\n  <defs>\n    ... filters go here ...\n  </defs>\n  */\n  var defs = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.DEFS, {}, svg);\n  // Each filter/pattern needs a unique ID for the case of multiple Blockly\n  // instances on a page.  Browser behaviour becomes undefined otherwise.\n  // https://neil.fraser.name/news/2015/11/01/\n  var rnd = String(Math.random()).substring(2);\n\n  options.gridPattern = Blockly.Grid.createDom(rnd, options.gridOptions, defs);\n  return svg;\n};\n\n/**\n * Create a main workspace and add it to the SVG.\n * @param {!Element} svg SVG element with pattern defined.\n * @param {!Blockly.Options} options Dictionary of options.\n * @param {!Blockly.BlockDragSurfaceSvg} blockDragSurface Drag surface SVG\n *     for the blocks.\n * @param {!Blockly.WorkspaceDragSurfaceSvg} workspaceDragSurface Drag surface\n *     SVG for the workspace.\n * @return {!Blockly.WorkspaceSvg} Newly created main workspace.\n * @private\n */\nBlockly.createMainWorkspace_ = function(svg, options, blockDragSurface,\n    workspaceDragSurface) {\n  options.parentWorkspace = null;\n  var mainWorkspace =\n      new Blockly.WorkspaceSvg(options, blockDragSurface, workspaceDragSurface);\n  var wsOptions = mainWorkspace.options;\n  mainWorkspace.scale = wsOptions.zoomOptions.startScale;\n  svg.appendChild(mainWorkspace.createDom('blocklyMainBackground'));\n\n  // Set the theme name and renderer name onto the injection div.\n  Blockly.utils.dom.addClass(mainWorkspace.getInjectionDiv(),\n      mainWorkspace.getRenderer().getClassName());\n  Blockly.utils.dom.addClass(mainWorkspace.getInjectionDiv(),\n      mainWorkspace.getTheme().getClassName());\n\n  if (!wsOptions.hasCategories && wsOptions.languageTree) {\n    // Add flyout as an <svg> that is a sibling of the workspace svg.\n    var flyout = mainWorkspace.addFlyout(Blockly.utils.Svg.SVG);\n    Blockly.utils.dom.insertAfter(flyout, svg);\n  }\n  if (wsOptions.hasTrashcan) {\n    mainWorkspace.addTrashcan();\n  }\n  if (wsOptions.zoomOptions && wsOptions.zoomOptions.controls) {\n    mainWorkspace.addZoomControls();\n  }\n  // Register the workspace svg as a UI component.\n  mainWorkspace.getThemeManager().subscribe(svg, 'workspaceBackgroundColour',\n      'background-color');\n\n  // A null translation will also apply the correct initial scale.\n  mainWorkspace.translate(0, 0);\n\n  if (!wsOptions.readOnly && !mainWorkspace.isMovable()) {\n    // Helper function for the workspaceChanged callback.\n    // TODO (#2300): Move metrics math back to the WorkspaceSvg.\n    var getWorkspaceMetrics = function() {\n      var workspaceMetrics = Object.create(null);\n      var defaultMetrics = mainWorkspace.getMetrics();\n      var scale = mainWorkspace.scale;\n\n      workspaceMetrics.RTL = mainWorkspace.RTL;\n\n      // Get the view metrics in workspace units.\n      workspaceMetrics.viewLeft = defaultMetrics.viewLeft / scale;\n      workspaceMetrics.viewTop = defaultMetrics.viewTop / scale;\n      workspaceMetrics.viewRight =\n          (defaultMetrics.viewLeft + defaultMetrics.viewWidth) / scale;\n      workspaceMetrics.viewBottom =\n          (defaultMetrics.viewTop + defaultMetrics.viewHeight) / scale;\n\n      // Get the exact content metrics (in workspace units), even if the\n      // content is bounded.\n      if (mainWorkspace.isContentBounded()) {\n        // Already in workspace units, no need to divide by scale.\n        var blocksBoundingBox = mainWorkspace.getBlocksBoundingBox();\n        workspaceMetrics.contentLeft = blocksBoundingBox.left;\n        workspaceMetrics.contentTop = blocksBoundingBox.top;\n        workspaceMetrics.contentRight = blocksBoundingBox.right;\n        workspaceMetrics.contentBottom = blocksBoundingBox.bottom;\n      } else {\n        workspaceMetrics.contentLeft = defaultMetrics.contentLeft / scale;\n        workspaceMetrics.contentTop = defaultMetrics.contentTop / scale;\n        workspaceMetrics.contentRight =\n            (defaultMetrics.contentLeft + defaultMetrics.contentWidth) / scale;\n        workspaceMetrics.contentBottom =\n            (defaultMetrics.contentTop + defaultMetrics.contentHeight) / scale;\n      }\n\n      return workspaceMetrics;\n    };\n\n    var getObjectMetrics = function(object) {\n      var objectMetrics = object.getBoundingRectangle();\n      objectMetrics.height = objectMetrics.bottom - objectMetrics.top;\n      objectMetrics.width = objectMetrics.right - objectMetrics.left;\n      return objectMetrics;\n    };\n\n    var bumpObjects = function(e) {\n      // We always check isMovable_ again because the original\n      // \"not movable\" state of isMovable_ could have been changed.\n      if (!mainWorkspace.isDragging() && !mainWorkspace.isMovable() &&\n          (Blockly.Events.BUMP_EVENTS.indexOf(e.type) != -1)) {\n        var metrics = getWorkspaceMetrics();\n        if (metrics.contentTop < metrics.viewTop ||\n            metrics.contentBottom > metrics.viewBottom ||\n            metrics.contentLeft < metrics.viewLeft ||\n            metrics.contentRight > metrics.viewRight) {\n\n          // Handle undo.\n          var oldGroup = null;\n          if (e) {\n            oldGroup = Blockly.Events.getGroup();\n            Blockly.Events.setGroup(e.group);\n          }\n\n          switch (e.type) {\n            case Blockly.Events.BLOCK_CREATE:\n            case Blockly.Events.BLOCK_MOVE:\n              var object = mainWorkspace.getBlockById(e.blockId);\n              if (object) {\n                object = object.getRootBlock();\n              }\n              break;\n            case Blockly.Events.COMMENT_CREATE:\n            case Blockly.Events.COMMENT_MOVE:\n              var object = mainWorkspace.getCommentById(e.commentId);\n              break;\n          }\n          if (object) {\n            var objectMetrics = getObjectMetrics(object);\n\n            // The idea is to find the region of valid coordinates for the top\n            // left corner of the object, and then clamp the object's\n            // top left corner within that region.\n\n            // The top of the object should always be at or below the top of\n            // the workspace.\n            var topClamp = metrics.viewTop;\n            // The top of the object should ideally be positioned so that\n            // the bottom of the object is not below the bottom of the\n            // workspace.\n            var bottomClamp = metrics.viewBottom - objectMetrics.height;\n            // If the object is taller than the workspace we want to\n            // top-align the block, which means setting the bottom clamp to\n            // match.\n            bottomClamp = Math.max(topClamp, bottomClamp);\n\n            var newYPosition = Blockly.utils.math.clamp(\n                topClamp, objectMetrics.top, bottomClamp);\n            var deltaY = newYPosition - objectMetrics.top;\n\n            // Note: Even in RTL mode the \"anchor\" of the object is the\n            // top-left corner of the object.\n\n            // The left edge of the object should ideally be positioned at\n            // or to the right of the left edge of the workspace.\n            var leftClamp = metrics.viewLeft;\n            // The left edge of the object should ideally be positioned so\n            // that the right of the object is not outside the workspace bounds.\n            var rightClamp = metrics.viewRight - objectMetrics.width;\n            if (metrics.RTL) {\n              // If the object is wider than the workspace and we're in RTL\n              // mode we want to right-align the block, which means setting\n              // the left clamp to match.\n              leftClamp = Math.min(rightClamp, leftClamp);\n            } else {\n              // If the object is wider than the workspace and we're in LTR\n              // mode we want to left-align the block, which means setting\n              // the right clamp to match.\n              rightClamp = Math.max(leftClamp, rightClamp);\n            }\n\n            var newXPosition = Blockly.utils.math.clamp(\n                leftClamp, objectMetrics.left, rightClamp);\n            var deltaX = newXPosition - objectMetrics.left;\n\n            object.moveBy(deltaX, deltaY);\n          }\n          if (e) {\n            if (!e.group && object) {\n              console.warn('Moved object in bounds but there was no' +\n                  ' event group. This may break undo.');\n            }\n            if (oldGroup !== null) {\n              Blockly.Events.setGroup(oldGroup);\n            }\n          }\n        }\n      }\n    };\n    mainWorkspace.addChangeListener(bumpObjects);\n  }\n\n  // The SVG is now fully assembled.\n  Blockly.svgResize(mainWorkspace);\n  Blockly.WidgetDiv.createDom();\n  Blockly.DropDownDiv.createDom();\n  Blockly.Tooltip.createDom();\n  return mainWorkspace;\n};\n\n/**\n * Initialize Blockly with various handlers.\n * @param {!Blockly.WorkspaceSvg} mainWorkspace Newly created main workspace.\n * @private\n */\nBlockly.init_ = function(mainWorkspace) {\n  var options = mainWorkspace.options;\n  var svg = mainWorkspace.getParentSvg();\n\n  // Suppress the browser's context menu.\n  Blockly.bindEventWithChecks_(\n      /** @type {!Element} */ (svg.parentNode), 'contextmenu', null,\n      function(e) {\n        if (!Blockly.utils.isTargetInput(e)) {\n          e.preventDefault();\n        }\n      });\n\n  var workspaceResizeHandler = Blockly.bindEventWithChecks_(window, 'resize',\n      null,\n      function() {\n        Blockly.hideChaff(true);\n        Blockly.svgResize(mainWorkspace);\n      });\n  mainWorkspace.setResizeHandlerWrapper(workspaceResizeHandler);\n\n  Blockly.inject.bindDocumentEvents_();\n\n  if (options.languageTree) {\n    var toolbox = mainWorkspace.getToolbox();\n    var flyout = mainWorkspace.getFlyout(true);\n    if (toolbox) {\n      toolbox.init();\n    } else if (flyout) {\n      // Build a fixed flyout with the root blocks.\n      flyout.init(mainWorkspace);\n      flyout.show(options.languageTree);\n      if (typeof flyout.scrollToStart == 'function') {\n        flyout.scrollToStart();\n      }\n    }\n  }\n\n  var verticalSpacing = Blockly.Scrollbar.scrollbarThickness;\n  if (options.hasTrashcan) {\n    verticalSpacing = mainWorkspace.trashcan.init(verticalSpacing);\n  }\n  if (options.zoomOptions && options.zoomOptions.controls) {\n    mainWorkspace.zoomControls_.init(verticalSpacing);\n  }\n\n  if (options.moveOptions && options.moveOptions.scrollbars) {\n    mainWorkspace.scrollbar = new Blockly.ScrollbarPair(mainWorkspace);\n    mainWorkspace.scrollbar.resize();\n  } else {\n    mainWorkspace.setMetrics({x: 0.5, y: 0.5});\n  }\n\n  // Load the sounds.\n  if (options.hasSounds) {\n    Blockly.inject.loadSounds_(options.pathToMedia, mainWorkspace);\n  }\n};\n\n/**\n * Bind document events, but only once.  Destroying and reinjecting Blockly\n * should not bind again.\n * Bind events for scrolling the workspace.\n * Most of these events should be bound to the SVG's surface.\n * However, 'mouseup' has to be on the whole document so that a block dragged\n * out of bounds and released will know that it has been released.\n * Also, 'keydown' has to be on the whole document since the browser doesn't\n * understand a concept of focus on the SVG image.\n * @private\n */\nBlockly.inject.bindDocumentEvents_ = function() {\n  if (!Blockly.documentEventsBound_) {\n    Blockly.bindEventWithChecks_(document, 'scroll', null, function() {\n      var workspaces = Blockly.Workspace.getAll();\n      for (var i = 0, workspace; (workspace = workspaces[i]); i++) {\n        if (workspace.updateInverseScreenCTM) {\n          workspace.updateInverseScreenCTM();\n        }\n      }\n    });\n    Blockly.bindEventWithChecks_(document, 'keydown', null, Blockly.onKeyDown);\n    // longStop needs to run to stop the context menu from showing up.  It\n    // should run regardless of what other touch event handlers have run.\n    Blockly.bindEvent_(document, 'touchend', null, Blockly.longStop_);\n    Blockly.bindEvent_(document, 'touchcancel', null, Blockly.longStop_);\n    // Some iPad versions don't fire resize after portrait to landscape change.\n    if (Blockly.utils.userAgent.IPAD) {\n      Blockly.bindEventWithChecks_(window, 'orientationchange', document,\n          function() {\n            // TODO (#397): Fix for multiple Blockly workspaces.\n            Blockly.svgResize(/** @type {!Blockly.WorkspaceSvg} */\n                (Blockly.getMainWorkspace()));\n          });\n    }\n  }\n  Blockly.documentEventsBound_ = true;\n};\n\n/**\n * Load sounds for the given workspace.\n * @param {string} pathToMedia The path to the media directory.\n * @param {!Blockly.Workspace} workspace The workspace to load sounds for.\n * @private\n */\nBlockly.inject.loadSounds_ = function(pathToMedia, workspace) {\n  var audioMgr = workspace.getAudioManager();\n  audioMgr.load(\n      [\n        pathToMedia + 'click.mp3',\n        pathToMedia + 'click.wav',\n        pathToMedia + 'click.ogg'\n      ], 'click');\n  audioMgr.load(\n      [\n        pathToMedia + 'disconnect.wav',\n        pathToMedia + 'disconnect.mp3',\n        pathToMedia + 'disconnect.ogg'\n      ], 'disconnect');\n  audioMgr.load(\n      [\n        pathToMedia + 'delete.mp3',\n        pathToMedia + 'delete.ogg',\n        pathToMedia + 'delete.wav'\n      ], 'delete');\n\n  // Bind temporary hooks that preload the sounds.\n  var soundBinds = [];\n  var unbindSounds = function() {\n    while (soundBinds.length) {\n      Blockly.unbindEvent_(soundBinds.pop());\n    }\n    audioMgr.preload();\n  };\n\n  // These are bound on mouse/touch events with Blockly.bindEventWithChecks_, so\n  // they restrict the touch identifier that will be recognized.  But this is\n  // really something that happens on a click, not a drag, so that's not\n  // necessary.\n\n  // Android ignores any sound not loaded as a result of a user action.\n  soundBinds.push(\n      Blockly.bindEventWithChecks_(document, 'mousemove', null, unbindSounds,\n          true));\n  soundBinds.push(\n      Blockly.bindEventWithChecks_(document, 'touchstart', null, unbindSounds,\n          true));\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility functions for handling variables and procedure names.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Names');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Msg');\n\n\n/**\n * Class for a database of entity names (variables, functions, etc).\n * @param {string} reservedWords A comma-separated string of words that are\n *     illegal for use as names in a language (e.g. 'new,if,this,...').\n * @param {string=} opt_variablePrefix Some languages need a '$' or a namespace\n *     before all variable names.\n * @constructor\n */\nBlockly.Names = function(reservedWords, opt_variablePrefix) {\n  this.variablePrefix_ = opt_variablePrefix || '';\n  this.reservedDict_ = Object.create(null);\n  if (reservedWords) {\n    var splitWords = reservedWords.split(',');\n    for (var i = 0; i < splitWords.length; i++) {\n      this.reservedDict_[splitWords[i]] = true;\n    }\n  }\n  this.reset();\n};\n\n/**\n * Constant to separate developer variable names from user-defined variable\n * names when running generators.\n * A developer variable will be declared as a global in the generated code, but\n * will never be shown to the user in the workspace or stored in the variable\n * map.\n */\nBlockly.Names.DEVELOPER_VARIABLE_TYPE = 'DEVELOPER_VARIABLE';\n\n/**\n * When JavaScript (or most other languages) is generated, variable 'foo' and\n * procedure 'foo' would collide.  However, Blockly has no such problems since\n * variable get 'foo' and procedure call 'foo' are unambiguous.\n * Therefore, Blockly keeps a separate type name to disambiguate.\n * getName('foo', 'variable') -> 'foo'\n * getName('foo', 'procedure') -> 'foo2'\n */\n\n/**\n * Empty the database and start from scratch.  The reserved words are kept.\n */\nBlockly.Names.prototype.reset = function() {\n  this.db_ = Object.create(null);\n  this.dbReverse_ = Object.create(null);\n  this.variableMap_ = null;\n};\n\n/**\n * Set the variable map that maps from variable name to variable object.\n * @param {!Blockly.VariableMap} map The map to track.\n */\nBlockly.Names.prototype.setVariableMap = function(map) {\n  this.variableMap_ = map;\n};\n\n/**\n * Get the name for a user-defined variable, based on its ID.\n * This should only be used for variables of type\n * Blockly.VARIABLE_CATEGORY_NAME.\n * @param {string} id The ID to look up in the variable map.\n * @return {?string} The name of the referenced variable, or null if there was\n *     no variable map or the variable was not found in the map.\n * @private\n */\nBlockly.Names.prototype.getNameForUserVariable_ = function(id) {\n  if (!this.variableMap_) {\n    console.log('Deprecated call to Blockly.Names.prototype.getName without ' +\n        'defining a variable map. To fix, add the following code in your ' +\n        'generator\\'s init() function:\\n' +\n        'Blockly.YourGeneratorName.variableDB_.setVariableMap(' +\n        'workspace.getVariableMap());');\n    return null;\n  }\n  var variable = this.variableMap_.getVariableById(id);\n  if (variable) {\n    return variable.name;\n  } else {\n    return null;\n  }\n};\n\n/**\n * Convert a Blockly entity name to a legal exportable entity name.\n * @param {string} name The Blockly entity name (no constraints).\n * @param {string} type The type of entity in Blockly\n *     ('VARIABLE', 'PROCEDURE', 'BUILTIN', etc...).\n * @return {string} An entity name that is legal in the exported language.\n */\nBlockly.Names.prototype.getName = function(name, type) {\n  if (type == Blockly.VARIABLE_CATEGORY_NAME) {\n    var varName = this.getNameForUserVariable_(name);\n    if (varName) {\n      name = varName;\n    }\n  }\n  var normalized = name.toLowerCase() + '_' + type;\n\n  var isVarType = type == Blockly.VARIABLE_CATEGORY_NAME ||\n      type == Blockly.Names.DEVELOPER_VARIABLE_TYPE;\n\n  var prefix = isVarType ? this.variablePrefix_ : '';\n  if (normalized in this.db_) {\n    return prefix + this.db_[normalized];\n  }\n  var safeName = this.getDistinctName(name, type);\n  this.db_[normalized] = safeName.substr(prefix.length);\n  return safeName;\n};\n\n/**\n * Convert a Blockly entity name to a legal exportable entity name.\n * Ensure that this is a new name not overlapping any previously defined name.\n * Also check against list of reserved words for the current language and\n * ensure name doesn't collide.\n * @param {string} name The Blockly entity name (no constraints).\n * @param {string} type The type of entity in Blockly\n *     ('VARIABLE', 'PROCEDURE', 'BUILTIN', etc...).\n * @return {string} An entity name that is legal in the exported language.\n */\nBlockly.Names.prototype.getDistinctName = function(name, type) {\n  var safeName = this.safeName_(name);\n  var i = '';\n  while (this.dbReverse_[safeName + i] ||\n         (safeName + i) in this.reservedDict_) {\n    // Collision with existing name.  Create a unique name.\n    i = i ? i + 1 : 2;\n  }\n  safeName += i;\n  this.dbReverse_[safeName] = true;\n  var isVarType = type == Blockly.VARIABLE_CATEGORY_NAME ||\n      type == Blockly.Names.DEVELOPER_VARIABLE_TYPE;\n  var prefix = isVarType ? this.variablePrefix_ : '';\n  return prefix + safeName;\n};\n\n/**\n * Given a proposed entity name, generate a name that conforms to the\n * [_A-Za-z][_A-Za-z0-9]* format that most languages consider legal for\n * variables.\n * @param {string} name Potentially illegal entity name.\n * @return {string} Safe entity name.\n * @private\n */\nBlockly.Names.prototype.safeName_ = function(name) {\n  if (!name) {\n    name = Blockly.Msg['UNNAMED_KEY'] || 'unnamed';\n  } else {\n    // Unfortunately names in non-latin characters will look like\n    // _E9_9F_B3_E4_B9_90 which is pretty meaningless.\n    // https://github.com/google/blockly/issues/1654\n    name = encodeURI(name.replace(/ /g, '_')).replace(/[^\\w]/g, '_');\n    // Most languages don't allow names with leading numbers.\n    if ('0123456789'.indexOf(name[0]) != -1) {\n      name = 'my_' + name;\n    }\n  }\n  return name;\n};\n\n/**\n * Do the given two entity names refer to the same entity?\n * Blockly names are case-insensitive.\n * @param {string} name1 First name.\n * @param {string} name2 Second name.\n * @return {boolean} True if names are the same.\n */\nBlockly.Names.equals = function(name1, name2) {\n  return name1.toLowerCase() == name2.toLowerCase();\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility functions for handling procedures.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.Procedures\n * @namespace\n */\ngoog.provide('Blockly.Procedures');\n\ngoog.require('Blockly.Blocks');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockChange');\ngoog.require('Blockly.Field');\ngoog.require('Blockly.Msg');\ngoog.require('Blockly.Names');\ngoog.require('Blockly.utils.xml');\ngoog.require('Blockly.Workspace');\ngoog.require('Blockly.Xml');\n\n\n/**\n * Constant to separate procedure names from variables and generated functions\n * when running generators.\n * @deprecated Use Blockly.PROCEDURE_CATEGORY_NAME\n */\nBlockly.Procedures.NAME_TYPE = Blockly.PROCEDURE_CATEGORY_NAME;\n\n/**\n * The default argument for a procedures_mutatorarg block.\n * @type {string}\n */\nBlockly.Procedures.DEFAULT_ARG = 'x';\n\n/**\n * Procedure block type.\n * @typedef {{\n *    getProcedureCall: function():string,\n *    renameProcedure: function(string,string),\n *    getProcedureDef: function():!Array\n * }}\n */\nBlockly.Procedures.ProcedureBlock;\n\n/**\n * Find all user-created procedure definitions in a workspace.\n * @param {!Blockly.Workspace} root Root workspace.\n * @return {!Array.<!Array.<!Array>>} Pair of arrays, the\n *     first contains procedures without return variables, the second with.\n *     Each procedure is defined by a three-element list of name, parameter\n *     list, and return value boolean.\n */\nBlockly.Procedures.allProcedures = function(root) {\n  var proceduresNoReturn = root.getBlocksByType('procedures_defnoreturn', false)\n      .map(function(block) {\n        return /** @type {!Blockly.Procedures.ProcedureBlock} */ (block).getProcedureDef();\n      });\n  var proceduresReturn = root.getBlocksByType('procedures_defreturn', false).map(function(block) {\n    return /** @type {!Blockly.Procedures.ProcedureBlock} */ (block).getProcedureDef();\n  });\n  proceduresNoReturn.sort(Blockly.Procedures.procTupleComparator_);\n  proceduresReturn.sort(Blockly.Procedures.procTupleComparator_);\n  return [proceduresNoReturn, proceduresReturn];\n};\n\n/**\n * Comparison function for case-insensitive sorting of the first element of\n * a tuple.\n * @param {!Array} ta First tuple.\n * @param {!Array} tb Second tuple.\n * @return {number} -1, 0, or 1 to signify greater than, equality, or less than.\n * @private\n */\nBlockly.Procedures.procTupleComparator_ = function(ta, tb) {\n  return ta[0].toLowerCase().localeCompare(tb[0].toLowerCase());\n};\n\n/**\n * Ensure two identically-named procedures don't exist.\n * Take the proposed procedure name, and return a legal name i.e. one that\n * is not empty and doesn't collide with other procedures.\n * @param {string} name Proposed procedure name.\n * @param {!Blockly.Block} block Block to disambiguate.\n * @return {string} Non-colliding name.\n */\nBlockly.Procedures.findLegalName = function(name, block) {\n  if (block.isInFlyout) {\n    // Flyouts can have multiple procedures called 'do something'.\n    return name;\n  }\n  name = name || Blockly.Msg['UNNAMED_KEY'] || 'unnamed';\n  while (!Blockly.Procedures.isLegalName_(name, block.workspace, block)) {\n    // Collision with another procedure.\n    var r = name.match(/^(.*?)(\\d+)$/);\n    if (!r) {\n      name += '2';\n    } else {\n      name = r[1] + (parseInt(r[2], 10) + 1);\n    }\n  }\n  return name;\n};\n\n/**\n * Does this procedure have a legal name?  Illegal names include names of\n * procedures already defined.\n * @param {string} name The questionable name.\n * @param {!Blockly.Workspace} workspace The workspace to scan for collisions.\n * @param {Blockly.Block=} opt_exclude Optional block to exclude from\n *     comparisons (one doesn't want to collide with oneself).\n * @return {boolean} True if the name is legal.\n * @private\n */\nBlockly.Procedures.isLegalName_ = function(name, workspace, opt_exclude) {\n  return !Blockly.Procedures.isNameUsed(name, workspace, opt_exclude);\n};\n\n/**\n * Return if the given name is already a procedure name.\n * @param {string} name The questionable name.\n * @param {!Blockly.Workspace} workspace The workspace to scan for collisions.\n * @param {Blockly.Block=} opt_exclude Optional block to exclude from\n *     comparisons (one doesn't want to collide with oneself).\n * @return {boolean} True if the name is used, otherwise return false.\n */\nBlockly.Procedures.isNameUsed = function(name, workspace, opt_exclude) {\n  var blocks = workspace.getAllBlocks(false);\n  // Iterate through every block and check the name.\n  for (var i = 0; i < blocks.length; i++) {\n    if (blocks[i] == opt_exclude) {\n      continue;\n    }\n    if (blocks[i].getProcedureDef) {\n      var procedureBlock = /** @type {!Blockly.Procedures.ProcedureBlock} */ (\n        blocks[i]);\n      var procName = procedureBlock.getProcedureDef();\n      if (Blockly.Names.equals(procName[0], name)) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\n/**\n * Rename a procedure.  Called by the editable field.\n * @param {string} name The proposed new name.\n * @return {string} The accepted name.\n * @this {Blockly.Field}\n */\nBlockly.Procedures.rename = function(name) {\n  // Strip leading and trailing whitespace.  Beyond this, all names are legal.\n  name = name.trim();\n\n  var legalName = Blockly.Procedures.findLegalName(name,\n      /** @type {!Blockly.Block} */ (this.getSourceBlock()));\n  var oldName = this.getValue();\n  if (oldName != name && oldName != legalName) {\n    // Rename any callers.\n    var blocks = this.getSourceBlock().workspace.getAllBlocks(false);\n    for (var i = 0; i < blocks.length; i++) {\n      if (blocks[i].renameProcedure) {\n        var procedureBlock = /** @type {!Blockly.Procedures.ProcedureBlock} */ (\n          blocks[i]);\n        procedureBlock.renameProcedure(\n            /** @type {string} */ (oldName), legalName);\n      }\n    }\n  }\n  return legalName;\n};\n\n/**\n * Construct the blocks required by the flyout for the procedure category.\n * @param {!Blockly.Workspace} workspace The workspace containing procedures.\n * @return {!Array.<!Element>} Array of XML block elements.\n */\nBlockly.Procedures.flyoutCategory = function(workspace) {\n  var xmlList = [];\n  if (Blockly.Blocks['procedures_defnoreturn']) {\n    // <block type=\"procedures_defnoreturn\" gap=\"16\">\n    //     <field name=\"NAME\">do something</field>\n    // </block>\n    var block = Blockly.utils.xml.createElement('block');\n    block.setAttribute('type', 'procedures_defnoreturn');\n    block.setAttribute('gap', 16);\n    var nameField = Blockly.utils.xml.createElement('field');\n    nameField.setAttribute('name', 'NAME');\n    nameField.appendChild(Blockly.utils.xml.createTextNode(\n        Blockly.Msg['PROCEDURES_DEFNORETURN_PROCEDURE']));\n    block.appendChild(nameField);\n    xmlList.push(block);\n  }\n  if (Blockly.Blocks['procedures_defreturn']) {\n    // <block type=\"procedures_defreturn\" gap=\"16\">\n    //     <field name=\"NAME\">do something</field>\n    // </block>\n    var block = Blockly.utils.xml.createElement('block');\n    block.setAttribute('type', 'procedures_defreturn');\n    block.setAttribute('gap', 16);\n    var nameField = Blockly.utils.xml.createElement('field');\n    nameField.setAttribute('name', 'NAME');\n    nameField.appendChild(Blockly.utils.xml.createTextNode(\n        Blockly.Msg['PROCEDURES_DEFRETURN_PROCEDURE']));\n    block.appendChild(nameField);\n    xmlList.push(block);\n  }\n  if (Blockly.Blocks['procedures_ifreturn']) {\n    // <block type=\"procedures_ifreturn\" gap=\"16\"></block>\n    var block = Blockly.utils.xml.createElement('block');\n    block.setAttribute('type', 'procedures_ifreturn');\n    block.setAttribute('gap', 16);\n    xmlList.push(block);\n  }\n  if (xmlList.length) {\n    // Add slightly larger gap between system blocks and user calls.\n    xmlList[xmlList.length - 1].setAttribute('gap', 24);\n  }\n\n  function populateProcedures(procedureList, templateName) {\n    for (var i = 0; i < procedureList.length; i++) {\n      var name = procedureList[i][0];\n      var args = procedureList[i][1];\n      // <block type=\"procedures_callnoreturn\" gap=\"16\">\n      //   <mutation name=\"do something\">\n      //     <arg name=\"x\"></arg>\n      //   </mutation>\n      // </block>\n      var block = Blockly.utils.xml.createElement('block');\n      block.setAttribute('type', templateName);\n      block.setAttribute('gap', 16);\n      var mutation = Blockly.utils.xml.createElement('mutation');\n      mutation.setAttribute('name', name);\n      block.appendChild(mutation);\n      for (var j = 0; j < args.length; j++) {\n        var arg = Blockly.utils.xml.createElement('arg');\n        arg.setAttribute('name', args[j]);\n        mutation.appendChild(arg);\n      }\n      xmlList.push(block);\n    }\n  }\n\n  var tuple = Blockly.Procedures.allProcedures(workspace);\n  populateProcedures(tuple[0], 'procedures_callnoreturn');\n  populateProcedures(tuple[1], 'procedures_callreturn');\n  return xmlList;\n};\n\n/**\n * Updates the procedure mutator's flyout so that the arg block is not a\n * duplicate of another arg.\n * @param {!Blockly.Workspace} workspace The procedure mutator's workspace. This\n *     workspace's flyout is what is being updated.\n * @private\n */\nBlockly.Procedures.updateMutatorFlyout_ = function(workspace) {\n  var usedNames = [];\n  var blocks = workspace.getBlocksByType('procedures_mutatorarg', false);\n  for (var i = 0, block; (block = blocks[i]); i++) {\n    usedNames.push(block.getFieldValue('NAME'));\n  }\n\n  var xml = Blockly.utils.xml.createElement('xml');\n  var argBlock = Blockly.utils.xml.createElement('block');\n  argBlock.setAttribute('type', 'procedures_mutatorarg');\n  var nameField = Blockly.utils.xml.createElement('field');\n  nameField.setAttribute('name', 'NAME');\n  var argValue = Blockly.Variables.generateUniqueNameFromOptions(\n      Blockly.Procedures.DEFAULT_ARG, usedNames);\n  var fieldContent = Blockly.utils.xml.createTextNode(argValue);\n\n  nameField.appendChild(fieldContent);\n  argBlock.appendChild(nameField);\n  xml.appendChild(argBlock);\n\n  workspace.updateToolbox(xml);\n};\n\n/**\n * Listens for when a procedure mutator is opened. Then it triggers a flyout\n * update and adds a mutator change listener to the mutator workspace.\n * @param {!Blockly.Events.Abstract} e The event that triggered this listener.\n * @package\n */\nBlockly.Procedures.mutatorOpenListener = function(e) {\n  if (e.type != Blockly.Events.UI || e.element != 'mutatorOpen' ||\n      !e.newValue) {\n    return;\n  }\n  var workspaceId = /** @type {string} */ (e.workspaceId);\n  var block = Blockly.Workspace.getById(workspaceId)\n      .getBlockById(e.blockId);\n  var type = block.type;\n  if (type != 'procedures_defnoreturn' && type != 'procedures_defreturn') {\n    return;\n  }\n  var workspace = block.mutator.getWorkspace();\n  Blockly.Procedures.updateMutatorFlyout_(workspace);\n  workspace.addChangeListener(Blockly.Procedures.mutatorChangeListener_);\n};\n\n/**\n * Listens for changes in a procedure mutator and triggers flyout updates when\n * necessary.\n * @param {!Blockly.Events.Abstract} e The event that triggered this listener.\n * @private\n */\nBlockly.Procedures.mutatorChangeListener_ = function(e) {\n  if (e.type != Blockly.Events.BLOCK_CREATE &&\n      e.type != Blockly.Events.BLOCK_DELETE &&\n      e.type != Blockly.Events.BLOCK_CHANGE) {\n    return;\n  }\n  var workspaceId = /** @type {string} */ (e.workspaceId);\n  var workspace = /** @type {!Blockly.WorkspaceSvg} */\n      (Blockly.Workspace.getById(workspaceId));\n  Blockly.Procedures.updateMutatorFlyout_(workspace);\n};\n\n/**\n * Find all the callers of a named procedure.\n * @param {string} name Name of procedure.\n * @param {!Blockly.Workspace} workspace The workspace to find callers in.\n * @return {!Array.<!Blockly.Block>} Array of caller blocks.\n */\nBlockly.Procedures.getCallers = function(name, workspace) {\n  var callers = [];\n  var blocks = workspace.getAllBlocks(false);\n  // Iterate through every block and check the name.\n  for (var i = 0; i < blocks.length; i++) {\n    if (blocks[i].getProcedureCall) {\n      var procedureBlock = /** @type {!Blockly.Procedures.ProcedureBlock} */ (\n        blocks[i]);\n      var procName = procedureBlock.getProcedureCall();\n      // Procedure name may be null if the block is only half-built.\n      if (procName && Blockly.Names.equals(procName, name)) {\n        callers.push(blocks[i]);\n      }\n    }\n  }\n  return callers;\n};\n\n/**\n * When a procedure definition changes its parameters, find and edit all its\n * callers.\n * @param {!Blockly.Block} defBlock Procedure definition block.\n */\nBlockly.Procedures.mutateCallers = function(defBlock) {\n  var oldRecordUndo = Blockly.Events.recordUndo;\n  var procedureBlock = /** @type {!Blockly.Procedures.ProcedureBlock} */ (\n    defBlock);\n  var name = procedureBlock.getProcedureDef()[0];\n  var xmlElement = defBlock.mutationToDom(true);\n  var callers = Blockly.Procedures.getCallers(name, defBlock.workspace);\n  for (var i = 0, caller; (caller = callers[i]); i++) {\n    var oldMutationDom = caller.mutationToDom();\n    var oldMutation = oldMutationDom && Blockly.Xml.domToText(oldMutationDom);\n    caller.domToMutation(xmlElement);\n    var newMutationDom = caller.mutationToDom();\n    var newMutation = newMutationDom && Blockly.Xml.domToText(newMutationDom);\n    if (oldMutation != newMutation) {\n      // Fire a mutation on every caller block.  But don't record this as an\n      // undo action since it is deterministically tied to the procedure's\n      // definition mutation.\n      Blockly.Events.recordUndo = false;\n      Blockly.Events.fire(new Blockly.Events.BlockChange(\n          caller, 'mutation', null, oldMutation, newMutation));\n      Blockly.Events.recordUndo = oldRecordUndo;\n    }\n  }\n};\n\n/**\n * Find the definition block for the named procedure.\n * @param {string} name Name of procedure.\n * @param {!Blockly.Workspace} workspace The workspace to search.\n * @return {Blockly.Block} The procedure definition block, or null not found.\n */\nBlockly.Procedures.getDefinition = function(name, workspace) {\n  // Assume that a procedure definition is a top block.\n  var blocks = workspace.getTopBlocks(false);\n  for (var i = 0; i < blocks.length; i++) {\n    if (blocks[i].getProcedureDef) {\n      var procedureBlock = /** @type {!Blockly.Procedures.ProcedureBlock} */ (\n        blocks[i]);\n      var tuple = procedureBlock.getProcedureDef();\n      if (tuple && Blockly.Names.equals(tuple[0], name)) {\n        return blocks[i];\n      }\n    }\n  }\n  return null;\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Components for the variable model.\n * @author marisaleung@google.com (Marisa Leung)\n */\n'use strict';\n\ngoog.provide('Blockly.VariableModel');\n\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.VarCreate');\ngoog.require('Blockly.utils');\n\n\n/**\n * Class for a variable model.\n * Holds information for the variable including name, ID, and type.\n * @param {!Blockly.Workspace} workspace The variable's workspace.\n * @param {string} name The name of the variable. This must be unique across\n *     variables and procedures.\n * @param {string=} opt_type The type of the variable like 'int' or 'string'.\n *     Does not need to be unique. Field_variable can filter variables based on\n *     their type. This will default to '' which is a specific type.\n * @param {string=} opt_id The unique ID of the variable. This will default to\n *     a UUID.\n * @see {Blockly.FieldVariable}\n * @constructor\n */\nBlockly.VariableModel = function(workspace, name, opt_type, opt_id) {\n  /**\n   * The workspace the variable is in.\n   * @type {!Blockly.Workspace}\n   */\n  this.workspace = workspace;\n\n  /**\n   * The name of the variable, typically defined by the user. It must be\n   * unique across all names used for procedures and variables. It may be\n   * changed by the user.\n   * @type {string}\n   */\n  this.name = name;\n\n  /**\n   * The type of the variable, such as 'int' or 'sound_effect'. This may be\n   * used to build a list of variables of a specific type. By default this is\n   * the empty string '', which is a specific type.\n   * @see {Blockly.FieldVariable}\n   * @type {string}\n   */\n  this.type = opt_type || '';\n\n  /**\n   * A unique id for the variable. This should be defined at creation and\n   * not change, even if the name changes. In most cases this should be a\n   * UUID.\n   * @type {string}\n   * @private\n   */\n  this.id_ = opt_id || Blockly.utils.genUid();\n\n  Blockly.Events.fire(new Blockly.Events.VarCreate(this));\n};\n\n/**\n * @return {string} The ID for the variable.\n */\nBlockly.VariableModel.prototype.getId = function() {\n  return this.id_;\n};\n\n/**\n * A custom compare function for the VariableModel objects.\n * @param {Blockly.VariableModel} var1 First variable to compare.\n * @param {Blockly.VariableModel} var2 Second variable to compare.\n * @return {number} -1 if name of var1 is less than name of var2, 0 if equal,\n *     and 1 if greater.\n * @package\n */\nBlockly.VariableModel.compareByName = function(var1, var2) {\n  var name1 = var1.name.toLowerCase();\n  var name2 = var2.name.toLowerCase();\n  if (name1 < name2) {\n    return -1;\n  } else if (name1 == name2) {\n    return 0;\n  } else {\n    return 1;\n  }\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility functions for handling variables.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.Variables\n * @namespace\n */\ngoog.provide('Blockly.Variables');\n\ngoog.require('Blockly.Blocks');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Msg');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.xml');\ngoog.require('Blockly.VariableModel');\ngoog.require('Blockly.Xml');\n\n\n/**\n * Constant to separate variable names from procedures and generated functions\n * when running generators.\n * @deprecated Use Blockly.VARIABLE_CATEGORY_NAME\n */\nBlockly.Variables.NAME_TYPE = Blockly.VARIABLE_CATEGORY_NAME;\n\n/**\n * Find all user-created variables that are in use in the workspace.\n * For use by generators.\n * To get a list of all variables on a workspace, including unused variables,\n * call Workspace.getAllVariables.\n * @param {!Blockly.Workspace} ws The workspace to search for variables.\n * @return {!Array.<!Blockly.VariableModel>} Array of variable models.\n */\nBlockly.Variables.allUsedVarModels = function(ws) {\n  var blocks = ws.getAllBlocks(false);\n  var variableHash = Object.create(null);\n  // Iterate through every block and add each variable to the hash.\n  for (var i = 0; i < blocks.length; i++) {\n    var blockVariables = blocks[i].getVarModels();\n    if (blockVariables) {\n      for (var j = 0; j < blockVariables.length; j++) {\n        var variable = blockVariables[j];\n        var id = variable.getId();\n        if (id) {\n          variableHash[id] = variable;\n        }\n      }\n    }\n  }\n  // Flatten the hash into a list.\n  var variableList = [];\n  for (var id in variableHash) {\n    variableList.push(variableHash[id]);\n  }\n  return variableList;\n};\n\n/**\n * @private\n * @type {Object<string,boolean>}\n */\nBlockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_ = {};\n\n/**\n * Find all developer variables used by blocks in the workspace.\n * Developer variables are never shown to the user, but are declared as global\n * variables in the generated code.\n * To declare developer variables, define the getDeveloperVariables function on\n * your block and return a list of variable names.\n * For use by generators.\n * @param {!Blockly.Workspace} workspace The workspace to search.\n * @return {!Array.<string>} A list of non-duplicated variable names.\n */\nBlockly.Variables.allDeveloperVariables = function(workspace) {\n  var blocks = workspace.getAllBlocks(false);\n  var variableHash = Object.create(null);\n  for (var i = 0, block; (block = blocks[i]); i++) {\n    var getDeveloperVariables = block.getDeveloperVariables;\n    if (!getDeveloperVariables && block.getDeveloperVars) {\n      // August 2018: getDeveloperVars() was deprecated and renamed\n      // getDeveloperVariables().\n      getDeveloperVariables = block.getDeveloperVars;\n      if (!Blockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[\n          block.type]) {\n        console.warn('Function getDeveloperVars() deprecated. Use ' +\n            'getDeveloperVariables() (block type \\'' + block.type + '\\')');\n        Blockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[\n            block.type] = true;\n      }\n    }\n    if (getDeveloperVariables) {\n      var devVars = getDeveloperVariables();\n      for (var j = 0; j < devVars.length; j++) {\n        variableHash[devVars[j]] = true;\n      }\n    }\n  }\n\n  // Flatten the hash into a list.\n  return Object.keys(variableHash);\n};\n\n/**\n * Construct the elements (blocks and button) required by the flyout for the\n * variable category.\n * @param {!Blockly.Workspace} workspace The workspace containing variables.\n * @return {!Array.<!Element>} Array of XML elements.\n */\nBlockly.Variables.flyoutCategory = function(workspace) {\n  var xmlList = [];\n  var button = document.createElement('button');\n  button.setAttribute('text', '%{BKY_NEW_VARIABLE}');\n  button.setAttribute('callbackKey', 'CREATE_VARIABLE');\n\n  workspace.registerButtonCallback('CREATE_VARIABLE', function(button) {\n    Blockly.Variables.createVariableButtonHandler(button.getTargetWorkspace());\n  });\n\n  xmlList.push(button);\n\n  var blockList = Blockly.Variables.flyoutCategoryBlocks(workspace);\n  xmlList = xmlList.concat(blockList);\n  return xmlList;\n};\n\n/**\n * Construct the blocks required by the flyout for the variable category.\n * @param {!Blockly.Workspace} workspace The workspace containing variables.\n * @return {!Array.<!Element>} Array of XML block elements.\n */\nBlockly.Variables.flyoutCategoryBlocks = function(workspace) {\n  var variableModelList = workspace.getVariablesOfType('');\n\n  var xmlList = [];\n  if (variableModelList.length > 0) {\n    // New variables are added to the end of the variableModelList.\n    var mostRecentVariable = variableModelList[variableModelList.length - 1];\n    if (Blockly.Blocks['variables_set']) {\n      var block = Blockly.utils.xml.createElement('block');\n      block.setAttribute('type', 'variables_set');\n      block.setAttribute('gap', Blockly.Blocks['math_change'] ? 8 : 24);\n      block.appendChild(\n          Blockly.Variables.generateVariableFieldDom(mostRecentVariable));\n      xmlList.push(block);\n    }\n    if (Blockly.Blocks['math_change']) {\n      var block = Blockly.utils.xml.createElement('block');\n      block.setAttribute('type', 'math_change');\n      block.setAttribute('gap', Blockly.Blocks['variables_get'] ? 20 : 8);\n      block.appendChild(\n          Blockly.Variables.generateVariableFieldDom(mostRecentVariable));\n      var value = Blockly.Xml.textToDom(\n          '<value name=\"DELTA\">' +\n          '<shadow type=\"math_number\">' +\n          '<field name=\"NUM\">1</field>' +\n          '</shadow>' +\n          '</value>');\n      block.appendChild(value);\n      xmlList.push(block);\n    }\n\n    if (Blockly.Blocks['variables_get']) {\n      variableModelList.sort(Blockly.VariableModel.compareByName);\n      for (var i = 0, variable; (variable = variableModelList[i]); i++) {\n        var block = Blockly.utils.xml.createElement('block');\n        block.setAttribute('type', 'variables_get');\n        block.setAttribute('gap', 8);\n        block.appendChild(Blockly.Variables.generateVariableFieldDom(variable));\n        xmlList.push(block);\n      }\n    }\n  }\n  return xmlList;\n};\n\nBlockly.Variables.VAR_LETTER_OPTIONS = 'ijkmnopqrstuvwxyzabcdefgh';  // No 'l'.\n\n/**\n * Return a new variable name that is not yet being used. This will try to\n * generate single letter variable names in the range 'i' to 'z' to start with.\n * If no unique name is located it will try 'i' to 'z', 'a' to 'h',\n * then 'i2' to 'z2' etc.  Skip 'l'.\n * @param {!Blockly.Workspace} workspace The workspace to be unique in.\n * @return {string} New variable name.\n */\nBlockly.Variables.generateUniqueName = function(workspace) {\n  return Blockly.Variables.generateUniqueNameFromOptions(\n      Blockly.Variables.VAR_LETTER_OPTIONS.charAt(0),\n      workspace.getAllVariableNames()\n  );\n};\n\n/**\n * Returns a unique name that is not present in the usedNames array. This\n * will try to generate single letter names in the range a -> z (skip l). It\n * will start with the character passed to startChar.\n * @param {string} startChar The character to start the search at.\n * @param {!Array.<string>} usedNames A list of all of the used names.\n * @return {string} A unique name that is not present in the usedNames array.\n */\nBlockly.Variables.generateUniqueNameFromOptions = function(startChar, usedNames) {\n  if (!usedNames.length) {\n    return startChar;\n  }\n\n  var letters = Blockly.Variables.VAR_LETTER_OPTIONS;\n  var suffix = '';\n  var letterIndex = letters.indexOf(startChar);\n  var potName = startChar;\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    var inUse = false;\n    for (var i = 0; i < usedNames.length; i++) {\n      if (usedNames[i].toLowerCase() == potName) {\n        inUse = true;\n        break;\n      }\n    }\n    if (!inUse) {\n      return potName;\n    }\n\n    letterIndex++;\n    if (letterIndex == letters.length) {\n      // Reached the end of the character sequence so back to 'i'.\n      letterIndex = 0;\n      suffix = Number(suffix) + 1;\n    }\n    potName = letters.charAt(letterIndex) + suffix;\n  }\n};\n\n/**\n * Handles \"Create Variable\" button in the default variables toolbox category.\n * It will prompt the user for a variable name, including re-prompts if a name\n * is already in use among the workspace's variables.\n *\n * Custom button handlers can delegate to this function, allowing variables\n * types and after-creation processing. More complex customization (e.g.,\n * prompting for variable type) is beyond the scope of this function.\n *\n * @param {!Blockly.Workspace} workspace The workspace on which to create the\n *     variable.\n * @param {function(?string=)=} opt_callback A callback. It will be passed an\n *     acceptable new variable name, or null if change is to be aborted (cancel\n *     button), or undefined if an existing variable was chosen.\n * @param {string=} opt_type The type of the variable like 'int', 'string', or\n *     ''. This will default to '', which is a specific type.\n */\nBlockly.Variables.createVariableButtonHandler = function(\n    workspace, opt_callback, opt_type) {\n  var type = opt_type || '';\n  // This function needs to be named so it can be called recursively.\n  var promptAndCheckWithAlert = function(defaultName) {\n    Blockly.Variables.promptName(Blockly.Msg['NEW_VARIABLE_TITLE'], defaultName,\n        function(text) {\n          if (text) {\n            var existing =\n                Blockly.Variables.nameUsedWithAnyType(text, workspace);\n            if (existing) {\n              if (existing.type == type) {\n                var msg = Blockly.Msg['VARIABLE_ALREADY_EXISTS'].replace(\n                    '%1', existing.name);\n              } else {\n                var msg =\n                    Blockly.Msg['VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE'];\n                msg = msg.replace('%1', existing.name).replace('%2', existing.type);\n              }\n              Blockly.alert(msg,\n                  function() {\n                    promptAndCheckWithAlert(text);  // Recurse\n                  });\n            } else {\n              // No conflict\n              workspace.createVariable(text, type);\n              if (opt_callback) {\n                opt_callback(text);\n              }\n            }\n          } else {\n            // User canceled prompt.\n            if (opt_callback) {\n              opt_callback(null);\n            }\n          }\n        });\n  };\n  promptAndCheckWithAlert('');\n};\n\n/**\n * Original name of Blockly.Variables.createVariableButtonHandler(..).\n * @deprecated Use Blockly.Variables.createVariableButtonHandler(..).\n *\n * @param {!Blockly.Workspace} workspace The workspace on which to create the\n *     variable.\n * @param {function(?string=)=} opt_callback A callback. It will be passed an\n *     acceptable new variable name, or null if change is to be aborted (cancel\n *     button), or undefined if an existing variable was chosen.\n * @param {string=} opt_type The type of the variable like 'int', 'string', or\n *     ''. This will default to '', which is a specific type.\n */\nBlockly.Variables.createVariable =\n    Blockly.Variables.createVariableButtonHandler;\n\n/**\n * Opens a prompt that allows the user to enter a new name for a variable.\n * Triggers a rename if the new name is valid. Or re-prompts if there is a\n * collision.\n * @param {!Blockly.Workspace} workspace The workspace on which to rename the\n *     variable.\n * @param {Blockly.VariableModel} variable Variable to rename.\n * @param {function(?string=)=} opt_callback A callback. It will\n *     be passed an acceptable new variable name, or null if change is to be\n *     aborted (cancel button), or undefined if an existing variable was chosen.\n */\nBlockly.Variables.renameVariable = function(workspace, variable,\n    opt_callback) {\n  // This function needs to be named so it can be called recursively.\n  var promptAndCheckWithAlert = function(defaultName) {\n    var promptText =\n        Blockly.Msg['RENAME_VARIABLE_TITLE'].replace('%1', variable.name);\n    Blockly.Variables.promptName(promptText, defaultName,\n        function(newName) {\n          if (newName) {\n            var existing = Blockly.Variables.nameUsedWithOtherType_(newName,\n                variable.type, workspace);\n            if (existing) {\n              var msg = Blockly.Msg['VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE']\n                  .replace('%1', existing.name)\n                  .replace('%2', existing.type);\n              Blockly.alert(msg,\n                  function() {\n                    promptAndCheckWithAlert(newName);  // Recurse\n                  });\n            } else {\n              workspace.renameVariableById(variable.getId(), newName);\n              if (opt_callback) {\n                opt_callback(newName);\n              }\n            }\n          } else {\n            // User canceled prompt.\n            if (opt_callback) {\n              opt_callback(null);\n            }\n          }\n        });\n  };\n  promptAndCheckWithAlert('');\n};\n\n/**\n * Prompt the user for a new variable name.\n * @param {string} promptText The string of the prompt.\n * @param {string} defaultText The default value to show in the prompt's field.\n * @param {function(?string)} callback A callback. It will return the new\n *     variable name, or null if the user picked something illegal.\n */\nBlockly.Variables.promptName = function(promptText, defaultText, callback) {\n  Blockly.prompt(promptText, defaultText, function(newVar) {\n    // Merge runs of whitespace.  Strip leading and trailing whitespace.\n    // Beyond this, all names are legal.\n    if (newVar) {\n      newVar = newVar.replace(/[\\s\\xa0]+/g, ' ').trim();\n      if (newVar == Blockly.Msg['RENAME_VARIABLE'] ||\n          newVar == Blockly.Msg['NEW_VARIABLE']) {\n        // Ok, not ALL names are legal...\n        newVar = null;\n      }\n    }\n    callback(newVar);\n  });\n};\n\n/**\n * Check whether there exists a variable with the given name but a different\n * type.\n * @param {string} name The name to search for.\n * @param {string} type The type to exclude from the search.\n * @param {!Blockly.Workspace} workspace The workspace to search for the\n *     variable.\n * @return {Blockly.VariableModel} The variable with the given name and a\n *     different type, or null if none was found.\n * @private\n */\nBlockly.Variables.nameUsedWithOtherType_ = function(name, type, workspace) {\n  var allVariables = workspace.getVariableMap().getAllVariables();\n\n  name = name.toLowerCase();\n  for (var i = 0, variable; (variable = allVariables[i]); i++) {\n    if (variable.name.toLowerCase() == name && variable.type != type) {\n      return variable;\n    }\n  }\n  return null;\n};\n\n/**\n * Check whether there exists a variable with the given name of any type.\n * @param {string} name The name to search for.\n * @param {!Blockly.Workspace} workspace The workspace to search for the\n *     variable.\n * @return {Blockly.VariableModel} The variable with the given name,\n *     or null if none was found.\n */\nBlockly.Variables.nameUsedWithAnyType = function(name, workspace) {\n  var allVariables = workspace.getVariableMap().getAllVariables();\n\n  name = name.toLowerCase();\n  for (var i = 0, variable; (variable = allVariables[i]); i++) {\n    if (variable.name.toLowerCase() == name) {\n      return variable;\n    }\n  }\n  return null;\n};\n\n/**\n * Generate DOM objects representing a variable field.\n * @param {!Blockly.VariableModel} variableModel The variable model to\n *     represent.\n * @return {Element} The generated DOM.\n * @public\n */\nBlockly.Variables.generateVariableFieldDom = function(variableModel) {\n  /* Generates the following XML:\n   * <field name=\"VAR\" id=\"goKTKmYJ8DhVHpruv\" variabletype=\"int\">foo</field>\n   */\n  var field = Blockly.utils.xml.createElement('field');\n  field.setAttribute('name', 'VAR');\n  field.setAttribute('id', variableModel.getId());\n  field.setAttribute('variabletype', variableModel.type);\n  var name = Blockly.utils.xml.createTextNode(variableModel.name);\n  field.appendChild(name);\n  return field;\n};\n\n/**\n * Helper function to look up or create a variable on the given workspace.\n * If no variable exists, creates and returns it.\n * @param {!Blockly.Workspace} workspace The workspace to search for the\n *     variable.  It may be a flyout workspace or main workspace.\n * @param {?string} id The ID to use to look up or create the variable, or null.\n * @param {string=} opt_name The string to use to look up or create the\n *     variable.\n * @param {string=} opt_type The type to use to look up or create the variable.\n * @return {!Blockly.VariableModel} The variable corresponding to the given ID\n *     or name + type combination.\n */\nBlockly.Variables.getOrCreateVariablePackage = function(workspace, id, opt_name,\n    opt_type) {\n  var variable = Blockly.Variables.getVariable(workspace, id, opt_name,\n      opt_type);\n  if (!variable) {\n    variable = Blockly.Variables.createVariable_(workspace, id, opt_name,\n        opt_type);\n  }\n  return variable;\n};\n\n/**\n * Look up  a variable on the given workspace.\n * Always looks in the main workspace before looking in the flyout workspace.\n * Always prefers lookup by ID to lookup by name + type.\n * @param {!Blockly.Workspace} workspace The workspace to search for the\n *     variable.  It may be a flyout workspace or main workspace.\n * @param {?string} id The ID to use to look up the variable, or null.\n * @param {string=} opt_name The string to use to look up the variable.\n *     Only used if lookup by ID fails.\n * @param {string=} opt_type The type to use to look up the variable.\n *     Only used if lookup by ID fails.\n * @return {Blockly.VariableModel} The variable corresponding to the given ID\n *     or name + type combination, or null if not found.\n * @public\n */\nBlockly.Variables.getVariable = function(workspace, id, opt_name, opt_type) {\n  var potentialVariableMap = workspace.getPotentialVariableMap();\n  var variable = null;\n  // Try to just get the variable, by ID if possible.\n  if (id) {\n    // Look in the real variable map before checking the potential variable map.\n    variable = workspace.getVariableById(id);\n    if (!variable && potentialVariableMap) {\n      variable = potentialVariableMap.getVariableById(id);\n    }\n    if (variable) {\n      return variable;\n    }\n  }\n  // If there was no ID, or there was an ID but it didn't match any variables,\n  // look up by name and type.\n  if (opt_name) {\n    if (opt_type == undefined) {\n      throw Error('Tried to look up a variable by name without a type');\n    }\n    // Otherwise look up by name and type.\n    variable = workspace.getVariable(opt_name, opt_type);\n    if (!variable && potentialVariableMap) {\n      variable = potentialVariableMap.getVariable(opt_name, opt_type);\n    }\n  }\n  return variable;\n};\n\n/**\n * Helper function to create a variable on the given workspace.\n * @param {!Blockly.Workspace} workspace The workspace in which to create the\n * variable.  It may be a flyout workspace or main workspace.\n * @param {?string} id The ID to use to create the variable, or null.\n * @param {string=} opt_name The string to use to create the variable.\n * @param {string=} opt_type The type to use to create the variable.\n * @return {!Blockly.VariableModel} The variable corresponding to the given ID\n *     or name + type combination.\n * @private\n */\nBlockly.Variables.createVariable_ = function(workspace, id, opt_name,\n    opt_type) {\n  var potentialVariableMap = workspace.getPotentialVariableMap();\n  // Variables without names get uniquely named for this workspace.\n  if (!opt_name) {\n    var ws = workspace.isFlyout ? workspace.targetWorkspace : workspace;\n    opt_name = Blockly.Variables.generateUniqueName(ws);\n  }\n\n  // Create a potential variable if in the flyout.\n  var variable = null;\n  if (potentialVariableMap) {\n    variable = potentialVariableMap.createVariable(opt_name, opt_type, id);\n  } else {  // In the main workspace, create a real variable.\n    variable = workspace.createVariable(opt_name, opt_type, id);\n  }\n  return variable;\n};\n\n/**\n * Helper function to get the list of variables that have been added to the\n * workspace after adding a new block, using the given list of variables that\n * were in the workspace before the new block was added.\n * @param {!Blockly.Workspace} workspace The workspace to inspect.\n * @param {!Array.<!Blockly.VariableModel>} originalVariables The array of\n *     variables that existed in the workspace before adding the new block.\n * @return {!Array.<!Blockly.VariableModel>} The new array of variables that\n *     were freshly added to the workspace after creating the new block,\n *     or [] if no new variables were added to the workspace.\n * @package\n */\nBlockly.Variables.getAddedVariables = function(workspace, originalVariables) {\n  var allCurrentVariables = workspace.getAllVariables();\n  var addedVariables = [];\n  if (originalVariables.length != allCurrentVariables.length) {\n    for (var i = 0; i < allCurrentVariables.length; i++) {\n      var variable = allCurrentVariables[i];\n      // For any variable that is present in allCurrentVariables but not\n      // present in originalVariables, add the variable to addedVariables.\n      if (originalVariables.indexOf(variable) == -1) {\n        addedVariables.push(variable);\n      }\n    }\n  }\n  return addedVariables;\n};\n","/**\n * @license\n * Copyright 2013 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A div that floats on top of Blockly.  This singleton contains\n *     temporary HTML UI widgets that the user is currently interacting with.\n *     E.g. text input areas, colour pickers, context menus.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * @name Blockly.WidgetDiv\n * @namespace\n */\ngoog.provide('Blockly.WidgetDiv');\n\ngoog.require('Blockly.utils.style');\n\ngoog.requireType('Blockly.utils.Rect');\ngoog.requireType('Blockly.utils.Size');\n\n\n/**\n * The object currently using this container.\n * @type {Object}\n * @private\n */\nBlockly.WidgetDiv.owner_ = null;\n\n/**\n * Optional cleanup function set by whichever object uses the widget.\n * @type {Function}\n * @private\n */\nBlockly.WidgetDiv.dispose_ = null;\n\n/**\n * A class name representing the current owner's workspace renderer.\n * @type {string}\n * @private\n */\nBlockly.WidgetDiv.rendererClassName_ = '';\n\n/**\n * A class name representing the current owner's workspace theme.\n * @type {string}\n * @private\n */\nBlockly.WidgetDiv.themeClassName_ = '';\n\n/**\n * Create the widget div and inject it onto the page.\n */\nBlockly.WidgetDiv.createDom = function() {\n  if (Blockly.WidgetDiv.DIV) {\n    return;  // Already created.\n  }\n  /**\n   * The HTML container for popup overlays (e.g. editor widgets).\n   * @type {!Element}\n   */\n  Blockly.WidgetDiv.DIV = document.createElement('div');\n  Blockly.WidgetDiv.DIV.className = 'blocklyWidgetDiv';\n  var container = Blockly.parentContainer || document.body;\n  container.appendChild(Blockly.WidgetDiv.DIV);\n};\n\n/**\n * Initialize and display the widget div.  Close the old one if needed.\n * @param {!Object} newOwner The object that will be using this container.\n * @param {boolean} rtl Right-to-left (true) or left-to-right (false).\n * @param {Function} dispose Optional cleanup function to be run when the\n *     widget is closed.\n */\nBlockly.WidgetDiv.show = function(newOwner, rtl, dispose) {\n  Blockly.WidgetDiv.hide();\n  Blockly.WidgetDiv.owner_ = newOwner;\n  Blockly.WidgetDiv.dispose_ = dispose;\n  var div = Blockly.WidgetDiv.DIV;\n  div.style.direction = rtl ? 'rtl' : 'ltr';\n  div.style.display = 'block';\n  var mainWorkspace =\n    /** @type {!Blockly.WorkspaceSvg} */ (Blockly.getMainWorkspace());\n  Blockly.WidgetDiv.rendererClassName_ =\n      mainWorkspace.getRenderer().getClassName();\n  Blockly.WidgetDiv.themeClassName_ = mainWorkspace.getTheme().getClassName();\n  Blockly.utils.dom.addClass(div, Blockly.WidgetDiv.rendererClassName_);\n  Blockly.utils.dom.addClass(div, Blockly.WidgetDiv.themeClassName_);\n};\n\n/**\n * Destroy the widget and hide the div.\n */\nBlockly.WidgetDiv.hide = function() {\n  if (!Blockly.WidgetDiv.isVisible()) {\n    return;\n  }\n  Blockly.WidgetDiv.owner_ = null;\n\n  var div = Blockly.WidgetDiv.DIV;\n  div.style.display = 'none';\n  div.style.left = '';\n  div.style.top = '';\n  Blockly.WidgetDiv.dispose_ && Blockly.WidgetDiv.dispose_();\n  Blockly.WidgetDiv.dispose_ = null;\n  div.textContent = '';\n\n  if (Blockly.WidgetDiv.rendererClassName_) {\n    Blockly.utils.dom.removeClass(div, Blockly.WidgetDiv.rendererClassName_);\n    Blockly.WidgetDiv.rendererClassName_ = '';\n  }\n  if (Blockly.WidgetDiv.themeClassName_) {\n    Blockly.utils.dom.removeClass(div, Blockly.WidgetDiv.themeClassName_);\n    Blockly.WidgetDiv.themeClassName_ = '';\n  }\n  (/** @type {!Blockly.WorkspaceSvg} */ (\n    Blockly.getMainWorkspace())).markFocused();\n};\n\n/**\n * Is the container visible?\n * @return {boolean} True if visible.\n */\nBlockly.WidgetDiv.isVisible = function() {\n  return !!Blockly.WidgetDiv.owner_;\n};\n\n/**\n * Destroy the widget and hide the div if it is being used by the specified\n * object.\n * @param {!Object} oldOwner The object that was using this container.\n */\nBlockly.WidgetDiv.hideIfOwner = function(oldOwner) {\n  if (Blockly.WidgetDiv.owner_ == oldOwner) {\n    Blockly.WidgetDiv.hide();\n  }\n};\n\n/**\n * Set the widget div's position and height.  This function does nothing clever:\n * it will not ensure that your widget div ends up in the visible window.\n * @param {number} x Horizontal location (window coordinates, not body).\n * @param {number} y Vertical location (window coordinates, not body).\n * @param {number} height The height of the widget div (pixels).\n * @private\n */\nBlockly.WidgetDiv.positionInternal_ = function(x, y, height) {\n  Blockly.WidgetDiv.DIV.style.left = x + 'px';\n  Blockly.WidgetDiv.DIV.style.top = y + 'px';\n  Blockly.WidgetDiv.DIV.style.height = height + 'px';\n};\n\n/**\n * Position the widget div based on an anchor rectangle.\n * The widget should be placed adjacent to but not overlapping the anchor\n * rectangle.  The preferred position is directly below and aligned to the left\n * (LTR) or right (RTL) side of the anchor.\n * @param {!Blockly.utils.Rect} viewportBBox The bounding rectangle of the\n *     current viewport, in window coordinates.\n * @param {!Blockly.utils.Rect} anchorBBox The bounding rectangle of the anchor,\n *     in window coordinates.\n * @param {!Blockly.utils.Size} widgetSize The size of the widget that is inside\n *     the widget div, in window coordinates.\n * @param {boolean} rtl Whether the workspace is in RTL mode.  This determines\n *     horizontal alignment.\n * @package\n */\nBlockly.WidgetDiv.positionWithAnchor = function(viewportBBox, anchorBBox,\n    widgetSize, rtl) {\n  var y = Blockly.WidgetDiv.calculateY_(viewportBBox, anchorBBox, widgetSize);\n  var x = Blockly.WidgetDiv.calculateX_(viewportBBox, anchorBBox, widgetSize,\n      rtl);\n\n  if (y < 0) {\n    Blockly.WidgetDiv.positionInternal_(x, 0, widgetSize.height + y);\n  } else {\n    Blockly.WidgetDiv.positionInternal_(x, y, widgetSize.height);\n  }\n};\n\n/**\n * Calculate an x position (in window coordinates) such that the widget will not\n * be offscreen on the right or left.\n * @param {!Blockly.utils.Rect} viewportBBox The bounding rectangle of the\n *     current viewport, in window coordinates.\n * @param {!Blockly.utils.Rect} anchorBBox The bounding rectangle of the anchor,\n *     in window coordinates.\n * @param {Blockly.utils.Size} widgetSize The dimensions of the widget inside the\n *     widget div.\n * @param {boolean} rtl Whether the Blockly workspace is in RTL mode.\n * @return {number} A valid x-coordinate for the top left corner of the widget\n *     div, in window coordinates.\n * @private\n */\nBlockly.WidgetDiv.calculateX_ = function(viewportBBox, anchorBBox, widgetSize,\n    rtl) {\n  if (rtl) {\n    // Try to align the right side of the field and the right side of widget.\n    var widgetLeft = anchorBBox.right - widgetSize.width;\n    // Don't go offscreen left.\n    var x = Math.max(widgetLeft, viewportBBox.left);\n    // But really don't go offscreen right:\n    return Math.min(x, viewportBBox.right - widgetSize.width);\n  } else {\n    // Try to align the left side of the field and the left side of widget.\n    // Don't go offscreen right.\n    var x = Math.min(anchorBBox.left, viewportBBox.right - widgetSize.width);\n    // But left is more important, because that's where the text is.\n    return Math.max(x, viewportBBox.left);\n  }\n};\n\n/**\n * Calculate a y position (in window coordinates) such that the widget will not\n * be offscreen on the top or bottom.\n * @param {!Blockly.utils.Rect} viewportBBox The bounding rectangle of the\n *     current viewport, in window coordinates.\n * @param {!Blockly.utils.Rect} anchorBBox The bounding rectangle of the anchor,\n *     in window coordinates.\n * @param {Blockly.utils.Size} widgetSize The dimensions of the widget inside the\n *     widget div.\n * @return {number} A valid y-coordinate for the top left corner of the widget\n *     div, in window coordinates.\n * @private\n */\nBlockly.WidgetDiv.calculateY_ = function(viewportBBox, anchorBBox, widgetSize) {\n  // Flip the widget vertically if off the bottom.\n  if (anchorBBox.bottom + widgetSize.height >= viewportBBox.bottom) {\n    // The bottom of the widget is at the top of the field.\n    return anchorBBox.top - widgetSize.height;\n    // The widget could go off the top of the window, but it would also go off\n    // the bottom.  The window is just too small.\n  } else {\n    // The top of the widget is at the bottom of the field.\n    return anchorBBox.bottom;\n  }\n};\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Core JavaScript library for Blockly.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\n/**\n * The top level namespace used to access the Blockly library.\n * @namespace Blockly\n */\ngoog.provide('Blockly');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.Ui');\ngoog.require('Blockly.inject');\ngoog.require('Blockly.navigation');\ngoog.require('Blockly.Procedures');\ngoog.require('Blockly.Tooltip');\ngoog.require('Blockly.Touch');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.colour');\ngoog.require('Blockly.utils.Size');\ngoog.require('Blockly.Variables');\ngoog.require('Blockly.WidgetDiv');\ngoog.require('Blockly.WorkspaceSvg');\ngoog.require('Blockly.Xml');\n\n\n/**\n * Blockly core version.\n * This constant is overridden by the build script (build.py) to the value of the version\n * in package.json. This is done during the gen_core build step.\n * For local builds, you can pass --define='Blockly.VERSION=X.Y.Z' to the compiler\n * to override this constant.\n * @define {string}\n */\nBlockly.VERSION = 'uncompiled';\n\n/**\n * The main workspace most recently used.\n * Set by Blockly.WorkspaceSvg.prototype.markFocused\n * @type {Blockly.Workspace}\n */\nBlockly.mainWorkspace = null;\n\n/**\n * Currently selected block.\n * @type {?Blockly.ICopyable}\n */\nBlockly.selected = null;\n\n/**\n * All of the connections on blocks that are currently being dragged.\n * @type {!Array.<!Blockly.Connection>}\n * @package\n */\nBlockly.draggingConnections = [];\n\n/**\n * Contents of the local clipboard.\n * @type {Element}\n * @private\n */\nBlockly.clipboardXml_ = null;\n\n/**\n * Source of the local clipboard.\n * @type {Blockly.WorkspaceSvg}\n * @private\n */\nBlockly.clipboardSource_ = null;\n\n/**\n * Map of types to type counts for the clipboard object and descendants.\n * @type {Object}\n * @private\n */\nBlockly.clipboardTypeCounts_ = null;\n\n/**\n * Cached value for whether 3D is supported.\n * @type {?boolean}\n * @private\n */\nBlockly.cache3dSupported_ = null;\n\n/**\n * Container element to render the WidgetDiv, DropDownDiv and Tooltip.\n * @type {?Element}\n * @package\n */\nBlockly.parentContainer = null;\n\n/**\n * Blockly opaque event data used to unbind events when using\n * `Blockly.bindEvent_` and `Blockly.bindEventWithChecks_`.\n * @typedef {!Array.<!Array>}\n */\nBlockly.EventData;\n\n/**\n * Returns the dimensions of the specified SVG image.\n * @param {!SVGElement} svg SVG image.\n * @return {!Blockly.utils.Size} Contains width and height properties.\n */\nBlockly.svgSize = function(svg) {\n  svg = /** @type {?} */ (svg);\n  return new Blockly.utils.Size(svg.cachedWidth_, svg.cachedHeight_);\n};\n\n/**\n * Size the workspace when the contents change.  This also updates\n * scrollbars accordingly.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace to resize.\n */\nBlockly.resizeSvgContents = function(workspace) {\n  workspace.resizeContents();\n};\n\n/**\n * Size the SVG image to completely fill its container. Call this when the view\n * actually changes sizes (e.g. on a window resize/device orientation change).\n * See Blockly.resizeSvgContents to resize the workspace when the contents\n * change (e.g. when a block is added or removed).\n * Record the height/width of the SVG image.\n * @param {!Blockly.WorkspaceSvg} workspace Any workspace in the SVG.\n */\nBlockly.svgResize = function(workspace) {\n  var mainWorkspace = workspace;\n  while (mainWorkspace.options.parentWorkspace) {\n    mainWorkspace = mainWorkspace.options.parentWorkspace;\n  }\n  var svg = mainWorkspace.getParentSvg();\n  var div = svg.parentNode;\n  if (!div) {\n    // Workspace deleted, or something.\n    return;\n  }\n  var width = div.offsetWidth;\n  var height = div.offsetHeight;\n  if (svg.cachedWidth_ != width) {\n    svg.setAttribute('width', width + 'px');\n    svg.cachedWidth_ = width;\n  }\n  if (svg.cachedHeight_ != height) {\n    svg.setAttribute('height', height + 'px');\n    svg.cachedHeight_ = height;\n  }\n  mainWorkspace.resize();\n};\n\n/**\n * Handle a key-down on SVG drawing surface. Does nothing if the main workspace\n * is not visible.\n * @param {!KeyboardEvent} e Key down event.\n * @package\n */\n// TODO (https://github.com/google/blockly/issues/1998) handle cases where there\n// are multiple workspaces and non-main workspaces are able to accept input.\nBlockly.onKeyDown = function(e) {\n  var mainWorkspace = Blockly.mainWorkspace;\n  if (!mainWorkspace) {\n    return;\n  }\n\n  if (Blockly.utils.isTargetInput(e) ||\n      (mainWorkspace.rendered && !mainWorkspace.isVisible())) {\n    // When focused on an HTML text input widget, don't trap any keys.\n    // Ignore keypresses on rendered workspaces that have been explicitly\n    // hidden.\n    return;\n  }\n\n  if (mainWorkspace.options.readOnly) {\n    // When in read only mode handle key actions for keyboard navigation.\n    Blockly.navigation.onKeyPress(e);\n    return;\n  }\n\n  var deleteBlock = false;\n  if (e.keyCode == Blockly.utils.KeyCodes.ESC) {\n    // Pressing esc closes the context menu.\n    Blockly.hideChaff();\n    Blockly.navigation.onBlocklyAction(Blockly.navigation.ACTION_EXIT);\n  } else if (!Blockly.Gesture.inProgress() && Blockly.navigation.onKeyPress(e)) {\n    // If the keyboard or field handled the key press return.\n    return;\n  } else if (e.keyCode == Blockly.utils.KeyCodes.BACKSPACE ||\n      e.keyCode == Blockly.utils.KeyCodes.DELETE) {\n    // Delete or backspace.\n    // Stop the browser from going back to the previous page.\n    // Do this first to prevent an error in the delete code from resulting in\n    // data loss.\n    e.preventDefault();\n    // Don't delete while dragging.  Jeez.\n    if (Blockly.Gesture.inProgress()) {\n      return;\n    }\n    if (Blockly.selected && Blockly.selected.isDeletable()) {\n      deleteBlock = true;\n    }\n  } else if (e.altKey || e.ctrlKey || e.metaKey) {\n    // Don't use meta keys during drags.\n    if (Blockly.Gesture.inProgress()) {\n      return;\n    }\n    if (Blockly.selected &&\n        Blockly.selected.isDeletable() && Blockly.selected.isMovable()) {\n      // Don't allow copying immovable or undeletable blocks. The next step\n      // would be to paste, which would create additional undeletable/immovable\n      // blocks on the workspace.\n      if (e.keyCode == Blockly.utils.KeyCodes.C) {\n        // 'c' for copy.\n        Blockly.hideChaff();\n        Blockly.copy_(Blockly.selected);\n      } else if (e.keyCode == Blockly.utils.KeyCodes.X &&\n          !Blockly.selected.workspace.isFlyout) {\n        // 'x' for cut, but not in a flyout.\n        // Don't even copy the selected item in the flyout.\n        Blockly.copy_(Blockly.selected);\n        deleteBlock = true;\n      }\n    }\n    if (e.keyCode == Blockly.utils.KeyCodes.V) {\n      // 'v' for paste.\n      if (Blockly.clipboardXml_) {\n        // Pasting always pastes to the main workspace, even if the copy\n        // started in a flyout workspace.\n        var workspace = Blockly.clipboardSource_;\n        if (workspace.isFlyout) {\n          workspace = workspace.targetWorkspace;\n        }\n        if (Blockly.clipboardTypeCounts_ &&\n            workspace.isCapacityAvailable(Blockly.clipboardTypeCounts_)) {\n          Blockly.Events.setGroup(true);\n          workspace.paste(Blockly.clipboardXml_);\n          Blockly.Events.setGroup(false);\n        }\n      }\n    } else if (e.keyCode == Blockly.utils.KeyCodes.Z) {\n      // 'z' for undo 'Z' is for redo.\n      Blockly.hideChaff();\n      mainWorkspace.undo(e.shiftKey);\n    } else if (e.ctrlKey && e.keyCode == Blockly.utils.KeyCodes.Y) {\n      // Ctrl-y is redo in Windows.  Command-y is never valid on Macs.\n      Blockly.hideChaff();\n      mainWorkspace.undo(true);\n    }\n  }\n  // Common code for delete and cut.\n  // Don't delete in the flyout.\n  if (deleteBlock && !Blockly.selected.workspace.isFlyout) {\n    Blockly.Events.setGroup(true);\n    Blockly.hideChaff();\n    var selected = /** @type {!Blockly.BlockSvg} */ (Blockly.selected);\n    selected.dispose(/* heal */ true, true);\n    Blockly.Events.setGroup(false);\n  }\n};\n\n/**\n * Copy a block or workspace comment onto the local clipboard.\n * @param {!Blockly.ICopyable} toCopy Block or Workspace Comment to be copied.\n * @private\n */\nBlockly.copy_ = function(toCopy) {\n  var data = toCopy.toCopyData();\n  if (data) {\n    Blockly.clipboardXml_ = data.xml;\n    Blockly.clipboardSource_ = data.source;\n    Blockly.clipboardTypeCounts_ = data.typeCounts;\n  }\n};\n\n/**\n * Duplicate this block and its children, or a workspace comment.\n * @param {!Blockly.ICopyable} toDuplicate Block or Workspace Comment to be\n *     copied.\n * @package\n */\nBlockly.duplicate = function(toDuplicate) {\n  // Save the clipboard.\n  var clipboardXml = Blockly.clipboardXml_;\n  var clipboardSource = Blockly.clipboardSource_;\n\n  // Create a duplicate via a copy/paste operation.\n  Blockly.copy_(toDuplicate);\n  toDuplicate.workspace.paste(Blockly.clipboardXml_);\n\n  // Restore the clipboard.\n  Blockly.clipboardXml_ = clipboardXml;\n  Blockly.clipboardSource_ = clipboardSource;\n};\n\n/**\n * Cancel the native context menu, unless the focus is on an HTML input widget.\n * @param {!Event} e Mouse down event.\n * @private\n */\nBlockly.onContextMenu_ = function(e) {\n  if (!Blockly.utils.isTargetInput(e)) {\n    // When focused on an HTML text input widget, don't cancel the context menu.\n    e.preventDefault();\n  }\n};\n\n/**\n * Close tooltips, context menus, dropdown selections, etc.\n * @param {boolean=} opt_allowToolbox If true, don't close the toolbox.\n */\nBlockly.hideChaff = function(opt_allowToolbox) {\n  Blockly.Tooltip.hide();\n  Blockly.WidgetDiv.hide();\n  Blockly.DropDownDiv.hideWithoutAnimation();\n  if (!opt_allowToolbox) {\n    var workspace = Blockly.getMainWorkspace();\n    // For now the trashcan flyout always autocloses because it overlays the\n    // trashcan UI (no trashcan to click to close it).\n    if (workspace.trashcan &&\n      workspace.trashcan.flyout) {\n      workspace.trashcan.closeFlyout();\n    }\n    var toolbox = workspace.getToolbox();\n    if (toolbox &&\n        toolbox.getFlyout() &&\n        toolbox.getFlyout().autoClose) {\n      toolbox.clearSelection();\n    }\n  }\n};\n\n/**\n * Returns the main workspace.  Returns the last used main workspace (based on\n * focus).  Try not to use this function, particularly if there are multiple\n * Blockly instances on a page.\n * @return {!Blockly.Workspace} The main workspace.\n */\nBlockly.getMainWorkspace = function() {\n  return /** @type {!Blockly.Workspace} */ (Blockly.mainWorkspace);\n};\n\n/**\n * Wrapper to window.alert() that app developers may override to\n * provide alternatives to the modal browser window.\n * @param {string} message The message to display to the user.\n * @param {function()=} opt_callback The callback when the alert is dismissed.\n */\nBlockly.alert = function(message, opt_callback) {\n  alert(message);\n  if (opt_callback) {\n    opt_callback();\n  }\n};\n\n/**\n * Wrapper to window.confirm() that app developers may override to\n * provide alternatives to the modal browser window.\n * @param {string} message The message to display to the user.\n * @param {!function(boolean)} callback The callback for handling user response.\n */\nBlockly.confirm = function(message, callback) {\n  callback(confirm(message));\n};\n\n/**\n * Wrapper to window.prompt() that app developers may override to provide\n * alternatives to the modal browser window. Built-in browser prompts are\n * often used for better text input experience on mobile device. We strongly\n * recommend testing mobile when overriding this.\n * @param {string} message The message to display to the user.\n * @param {string} defaultValue The value to initialize the prompt with.\n * @param {!function(?string)} callback The callback for handling user response.\n */\nBlockly.prompt = function(message, defaultValue, callback) {\n  callback(prompt(message, defaultValue));\n};\n\n/**\n * Helper function for defining a block from JSON.  The resulting function has\n * the correct value of jsonDef at the point in code where jsonInit is called.\n * @param {!Object} jsonDef The JSON definition of a block.\n * @return {function()} A function that calls jsonInit with the correct value\n *     of jsonDef.\n * @private\n */\nBlockly.jsonInitFactory_ = function(jsonDef) {\n  return function() {\n    this.jsonInit(jsonDef);\n  };\n};\n\n/**\n * Define blocks from an array of JSON block definitions, as might be generated\n * by the Blockly Developer Tools.\n * @param {!Array.<!Object>} jsonArray An array of JSON block definitions.\n */\nBlockly.defineBlocksWithJsonArray = function(jsonArray) {\n  for (var i = 0; i < jsonArray.length; i++) {\n    var elem = jsonArray[i];\n    if (!elem) {\n      console.warn(\n          'Block definition #' + i + ' in JSON array is ' + elem + '. ' +\n          'Skipping.');\n    } else {\n      var typename = elem.type;\n      if (typename == null || typename === '') {\n        console.warn(\n            'Block definition #' + i +\n            ' in JSON array is missing a type attribute. Skipping.');\n      } else {\n        if (Blockly.Blocks[typename]) {\n          console.warn(\n              'Block definition #' + i + ' in JSON array' +\n              ' overwrites prior definition of \"' + typename + '\".');\n        }\n        Blockly.Blocks[typename] = {\n          init: Blockly.jsonInitFactory_(elem)\n        };\n      }\n    }\n  }\n};\n\n/**\n * Bind an event to a function call.  When calling the function, verifies that\n * it belongs to the touch stream that is currently being processed, and splits\n * multitouch events into multiple events as needed.\n * @param {!EventTarget} node Node upon which to listen.\n * @param {string} name Event name to listen to (e.g. 'mousedown').\n * @param {Object} thisObject The value of 'this' in the function.\n * @param {!Function} func Function to call when event is triggered.\n * @param {boolean=} opt_noCaptureIdentifier True if triggering on this event\n *     should not block execution of other event handlers on this touch or\n *     other simultaneous touches.  False by default.\n * @param {boolean=} opt_noPreventDefault True if triggering on this event\n *     should prevent the default handler.  False by default.  If\n *     opt_noPreventDefault is provided, opt_noCaptureIdentifier must also be\n *     provided.\n * @return {!Blockly.EventData} Opaque data that can be passed to unbindEvent_.\n */\nBlockly.bindEventWithChecks_ = function(node, name, thisObject, func,\n    opt_noCaptureIdentifier, opt_noPreventDefault) {\n  var handled = false;\n  var wrapFunc = function(e) {\n    var captureIdentifier = !opt_noCaptureIdentifier;\n    // Handle each touch point separately.  If the event was a mouse event, this\n    // will hand back an array with one element, which we're fine handling.\n    var events = Blockly.Touch.splitEventByTouches(e);\n    for (var i = 0, event; (event = events[i]); i++) {\n      if (captureIdentifier && !Blockly.Touch.shouldHandleEvent(event)) {\n        continue;\n      }\n      Blockly.Touch.setClientFromTouch(event);\n      if (thisObject) {\n        func.call(thisObject, event);\n      } else {\n        func(event);\n      }\n      handled = true;\n    }\n  };\n\n  var bindData = [];\n  if (Blockly.utils.global['PointerEvent'] &&\n      (name in Blockly.Touch.TOUCH_MAP)) {\n    for (var i = 0, type; (type = Blockly.Touch.TOUCH_MAP[name][i]); i++) {\n      node.addEventListener(type, wrapFunc, false);\n      bindData.push([node, type, wrapFunc]);\n    }\n  } else {\n    node.addEventListener(name, wrapFunc, false);\n    bindData.push([node, name, wrapFunc]);\n\n    // Add equivalent touch event.\n    if (name in Blockly.Touch.TOUCH_MAP) {\n      var touchWrapFunc = function(e) {\n        wrapFunc(e);\n        // Calling preventDefault stops the browser from scrolling/zooming the\n        // page.\n        var preventDef = !opt_noPreventDefault;\n        if (handled && preventDef) {\n          e.preventDefault();\n        }\n      };\n      for (var i = 0, type; (type = Blockly.Touch.TOUCH_MAP[name][i]); i++) {\n        node.addEventListener(type, touchWrapFunc, false);\n        bindData.push([node, type, touchWrapFunc]);\n      }\n    }\n  }\n  return bindData;\n};\n\n\n/**\n * Bind an event to a function call.  Handles multitouch events by using the\n * coordinates of the first changed touch, and doesn't do any safety checks for\n * simultaneous event processing.  In most cases prefer is to use\n * `Blockly.bindEventWithChecks_`.\n * @param {!EventTarget} node Node upon which to listen.\n * @param {string} name Event name to listen to (e.g. 'mousedown').\n * @param {Object} thisObject The value of 'this' in the function.\n * @param {!Function} func Function to call when event is triggered.\n * @return {!Blockly.EventData} Opaque data that can be passed to unbindEvent_.\n */\nBlockly.bindEvent_ = function(node, name, thisObject, func) {\n  var wrapFunc = function(e) {\n    if (thisObject) {\n      func.call(thisObject, e);\n    } else {\n      func(e);\n    }\n  };\n\n  var bindData = [];\n  if (Blockly.utils.global['PointerEvent'] &&\n      (name in Blockly.Touch.TOUCH_MAP)) {\n    for (var i = 0, type; (type = Blockly.Touch.TOUCH_MAP[name][i]); i++) {\n      node.addEventListener(type, wrapFunc, false);\n      bindData.push([node, type, wrapFunc]);\n    }\n  } else {\n    node.addEventListener(name, wrapFunc, false);\n    bindData.push([node, name, wrapFunc]);\n\n    // Add equivalent touch event.\n    if (name in Blockly.Touch.TOUCH_MAP) {\n      var touchWrapFunc = function(e) {\n        // Punt on multitouch events.\n        if (e.changedTouches && e.changedTouches.length == 1) {\n          // Map the touch event's properties to the event.\n          var touchPoint = e.changedTouches[0];\n          e.clientX = touchPoint.clientX;\n          e.clientY = touchPoint.clientY;\n        }\n        wrapFunc(e);\n\n        // Stop the browser from scrolling/zooming the page.\n        e.preventDefault();\n      };\n      for (var i = 0, type; (type = Blockly.Touch.TOUCH_MAP[name][i]); i++) {\n        node.addEventListener(type, touchWrapFunc, false);\n        bindData.push([node, type, touchWrapFunc]);\n      }\n    }\n  }\n  return bindData;\n};\n\n/**\n * Unbind one or more events event from a function call.\n * @param {!Array.<!Array>} bindData Opaque data from bindEvent_.\n *     This list is emptied during the course of calling this function.\n * @return {!Function} The function call.\n */\nBlockly.unbindEvent_ = function(bindData) {\n  while (bindData.length) {\n    var bindDatum = bindData.pop();\n    var node = bindDatum[0];\n    var name = bindDatum[1];\n    var func = bindDatum[2];\n    node.removeEventListener(name, func, false);\n  }\n  return func;\n};\n\n/**\n * Is the given string a number (includes negative and decimals).\n * @param {string} str Input string.\n * @return {boolean} True if number, false otherwise.\n */\nBlockly.isNumber = function(str) {\n  return /^\\s*-?\\d+(\\.\\d+)?\\s*$/.test(str);\n};\n\n/**\n * Convert a hue (HSV model) into an RGB hex triplet.\n * @param {number} hue Hue on a colour wheel (0-360).\n * @return {string} RGB code, e.g. '#5ba65b'.\n */\nBlockly.hueToHex = function(hue) {\n  return Blockly.utils.colour.hsvToHex(hue, Blockly.HSV_SATURATION,\n      Blockly.HSV_VALUE * 255);\n};\n\n/**\n * Checks old colour constants are not overwritten by the host application.\n * If a constant is overwritten, it prints a console warning directing the\n * developer to use the equivalent Msg constant.\n * @package\n */\nBlockly.checkBlockColourConstants = function() {\n  Blockly.checkBlockColourConstant_(\n      'LOGIC_HUE', ['Blocks', 'logic', 'HUE'], undefined);\n  Blockly.checkBlockColourConstant_(\n      'LOGIC_HUE', ['Constants', 'Logic', 'HUE'], 210);\n  Blockly.checkBlockColourConstant_(\n      'LOOPS_HUE', ['Blocks', 'loops', 'HUE'], undefined);\n  Blockly.checkBlockColourConstant_(\n      'LOOPS_HUE', ['Constants', 'Loops', 'HUE'], 120);\n  Blockly.checkBlockColourConstant_(\n      'MATH_HUE', ['Blocks', 'math', 'HUE'], undefined);\n  Blockly.checkBlockColourConstant_(\n      'MATH_HUE', ['Constants', 'Math', 'HUE'], 230);\n  Blockly.checkBlockColourConstant_(\n      'TEXTS_HUE', ['Blocks', 'texts', 'HUE'], undefined);\n  Blockly.checkBlockColourConstant_(\n      'TEXTS_HUE', ['Constants', 'Text', 'HUE'], 160);\n  Blockly.checkBlockColourConstant_(\n      'LISTS_HUE', ['Blocks', 'lists', 'HUE'], undefined);\n  Blockly.checkBlockColourConstant_(\n      'LISTS_HUE', ['Constants', 'Lists', 'HUE'], 260);\n  Blockly.checkBlockColourConstant_(\n      'COLOUR_HUE', ['Blocks', 'colour', 'HUE'], undefined);\n  Blockly.checkBlockColourConstant_(\n      'COLOUR_HUE', ['Constants', 'Colour', 'HUE'], 20);\n  Blockly.checkBlockColourConstant_(\n      'VARIABLES_HUE', ['Blocks', 'variables', 'HUE'], undefined);\n  Blockly.checkBlockColourConstant_(\n      'VARIABLES_HUE', ['Constants', 'Variables', 'HUE'], 330);\n  // Blockly.Blocks.variables_dynamic.HUE never existed.\n  Blockly.checkBlockColourConstant_(\n      'VARIABLES_DYNAMIC_HUE', ['Constants', 'VariablesDynamic', 'HUE'], 310);\n  Blockly.checkBlockColourConstant_(\n      'PROCEDURES_HUE', ['Blocks', 'procedures', 'HUE'], undefined);\n  // Blockly.Constants.Procedures.HUE never existed.\n};\n\n/**\n * Checks for a constant in the Blockly namespace, verifying it is undefined or\n * has the old/original value. Prints a warning if this is not true.\n * @param {string} msgName The Msg constant identifier.\n * @param {Array.<string>} blocklyNamePath The name parts of the tested\n *     constant.\n * @param {number|undefined} expectedValue The expected value of the constant.\n * @private\n */\nBlockly.checkBlockColourConstant_ = function(\n    msgName, blocklyNamePath, expectedValue) {\n  var namePath = 'Blockly';\n  var value = Blockly;\n  for (var i = 0; i < blocklyNamePath.length; ++i) {\n    namePath += '.' + blocklyNamePath[i];\n    if (value) {\n      value = value[blocklyNamePath[i]];\n    }\n  }\n\n  if (value && value !== expectedValue) {\n    var warningPattern = (expectedValue === undefined) ?\n        '%1 has been removed. Use Blockly.Msg[\"%2\"].' :\n        '%1 is deprecated and unused. Override Blockly.Msg[\"%2\"].';\n    var warning = warningPattern.replace('%1', namePath).replace('%2', msgName);\n    console.warn(warning);\n  }\n};\n\n/**\n * Set the parent container.  This is the container element that the WidgetDiv,\n * DropDownDiv, and Tooltip are rendered into the first time `Blockly.inject`\n * is called.\n * This method is a NOP if called after the first ``Blockly.inject``.\n * @param {!Element} container The container element.\n */\nBlockly.setParentContainer = function(container) {\n  Blockly.parentContainer = container;\n};\n","/**\n * @license\n * Copyright 2013 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing an icon on a block.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Icon');\n\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Size');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for an icon.\n * @param {Blockly.BlockSvg} block The block associated with this icon.\n * @constructor\n * @abstract\n */\nBlockly.Icon = function(block) {\n  /**\n   * The block this icon is attached to.\n   * @type {Blockly.BlockSvg}\n   * @protected\n   */\n  this.block_ = block;\n\n  /**\n   * The icon SVG group.\n   * @type {?SVGGElement}\n   */\n  this.iconGroup_ = null;\n};\n\n/**\n * Does this icon get hidden when the block is collapsed.\n */\nBlockly.Icon.prototype.collapseHidden = true;\n\n/**\n * Height and width of icons.\n */\nBlockly.Icon.prototype.SIZE = 17;\n\n/**\n * Bubble UI (if visible).\n * @type {Blockly.Bubble}\n * @protected\n */\nBlockly.Icon.prototype.bubble_ = null;\n\n/**\n * Absolute coordinate of icon's center.\n * @type {Blockly.utils.Coordinate}\n * @protected\n */\nBlockly.Icon.prototype.iconXY_ = null;\n\n/**\n * Create the icon on the block.\n */\nBlockly.Icon.prototype.createIcon = function() {\n  if (this.iconGroup_) {\n    // Icon already exists.\n    return;\n  }\n  /* Here's the markup that will be generated:\n  <g class=\"blocklyIconGroup\">\n    ...\n  </g>\n  */\n  this.iconGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G,\n      {'class': 'blocklyIconGroup'}, null);\n  if (this.block_.isInFlyout) {\n    Blockly.utils.dom.addClass(\n        /** @type {!Element} */ (this.iconGroup_), 'blocklyIconGroupReadonly');\n  }\n  this.drawIcon_(this.iconGroup_);\n\n  this.block_.getSvgRoot().appendChild(this.iconGroup_);\n  Blockly.bindEventWithChecks_(\n      this.iconGroup_, 'mouseup', this, this.iconClick_);\n  this.updateEditable();\n};\n\n/**\n * Dispose of this icon.\n */\nBlockly.Icon.prototype.dispose = function() {\n  // Dispose of and unlink the icon.\n  Blockly.utils.dom.removeNode(this.iconGroup_);\n  this.iconGroup_ = null;\n  // Dispose of and unlink the bubble.\n  this.setVisible(false);\n  this.block_ = null;\n};\n\n/**\n * Add or remove the UI indicating if this icon may be clicked or not.\n */\nBlockly.Icon.prototype.updateEditable = function() {\n  // No-op on the base class.\n};\n\n/**\n * Is the associated bubble visible?\n * @return {boolean} True if the bubble is visible.\n */\nBlockly.Icon.prototype.isVisible = function() {\n  return !!this.bubble_;\n};\n\n/**\n * Clicking on the icon toggles if the bubble is visible.\n * @param {!Event} e Mouse click event.\n * @protected\n */\nBlockly.Icon.prototype.iconClick_ = function(e) {\n  if (this.block_.workspace.isDragging()) {\n    // Drag operation is concluding.  Don't open the editor.\n    return;\n  }\n  if (!this.block_.isInFlyout && !Blockly.utils.isRightButton(e)) {\n    this.setVisible(!this.isVisible());\n  }\n};\n\n/**\n * Change the colour of the associated bubble to match its block.\n */\nBlockly.Icon.prototype.applyColour = function() {\n  if (this.isVisible()) {\n    this.bubble_.setColour(this.block_.style.colourPrimary);\n  }\n};\n\n/**\n * Notification that the icon has moved.  Update the arrow accordingly.\n * @param {!Blockly.utils.Coordinate} xy Absolute location in workspace coordinates.\n */\nBlockly.Icon.prototype.setIconLocation = function(xy) {\n  this.iconXY_ = xy;\n  if (this.isVisible()) {\n    this.bubble_.setAnchorLocation(xy);\n  }\n};\n\n/**\n * Notification that the icon has moved, but we don't really know where.\n * Recompute the icon's location from scratch.\n */\nBlockly.Icon.prototype.computeIconLocation = function() {\n  // Find coordinates for the centre of the icon and update the arrow.\n  var blockXY = this.block_.getRelativeToSurfaceXY();\n  var iconXY = Blockly.utils.getRelativeXY(\n      /** @type {!SVGElement} */ (this.iconGroup_));\n  var newXY = new Blockly.utils.Coordinate(\n      blockXY.x + iconXY.x + this.SIZE / 2,\n      blockXY.y + iconXY.y + this.SIZE / 2);\n  if (!Blockly.utils.Coordinate.equals(this.getIconLocation(), newXY)) {\n    this.setIconLocation(newXY);\n  }\n};\n\n/**\n * Returns the center of the block's icon relative to the surface.\n * @return {Blockly.utils.Coordinate} Object with x and y properties in\n *     workspace coordinates.\n */\nBlockly.Icon.prototype.getIconLocation = function() {\n  return this.iconXY_;\n};\n\n/**\n * Get the size of the icon as used for rendering.\n * This differs from the actual size of the icon, because it bulges slightly\n * out of its row rather than increasing the height of its row.\n * @return {!Blockly.utils.Size} Height and width.\n */\n// TODO (#2562): Remove getCorrectedSize.\nBlockly.Icon.prototype.getCorrectedSize = function() {\n  return new Blockly.utils.Size(\n      Blockly.Icon.prototype.SIZE, Blockly.Icon.prototype.SIZE - 2);\n};\n\n/**\n * Draw the icon.\n * @param {!Element} group The icon group.\n * @protected\n */\nBlockly.Icon.prototype.drawIcon_;\n\n/**\n * Show or hide the icon.\n * @param {boolean} visible True if the icon should be visible.\n */\nBlockly.Icon.prototype.setVisible;\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a warning.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Warning');\n\ngoog.require('Blockly.Bubble');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.Ui');\ngoog.require('Blockly.Icon');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for a warning.\n * @param {!Blockly.Block} block The block associated with this warning.\n * @extends {Blockly.Icon}\n * @constructor\n */\nBlockly.Warning = function(block) {\n  Blockly.Warning.superClass_.constructor.call(this, block);\n  this.createIcon();\n  // The text_ object can contain multiple warnings.\n  this.text_ = {};\n};\nBlockly.utils.object.inherits(Blockly.Warning, Blockly.Icon);\n\n/**\n * Does this icon get hidden when the block is collapsed.\n */\nBlockly.Warning.prototype.collapseHidden = false;\n\n/**\n * Draw the warning icon.\n * @param {!Element} group The icon group.\n * @protected\n */\nBlockly.Warning.prototype.drawIcon_ = function(group) {\n  // Triangle with rounded corners.\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH,\n      {\n        'class': 'blocklyIconShape',\n        'd': 'M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z'\n      },\n      group);\n  // Can't use a real '!' text character since different browsers and operating\n  // systems render it differently.\n  // Body of exclamation point.\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH,\n      {\n        'class': 'blocklyIconSymbol',\n        'd': 'm7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z'\n      },\n      group);\n  // Dot of exclamation point.\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {\n        'class': 'blocklyIconSymbol',\n        'x': '7', 'y': '11', 'height': '2', 'width': '2'\n      },\n      group);\n};\n\n/**\n * Create the text for the warning's bubble.\n * @param {string} text The text to display.\n * @return {!SVGTextElement} The top-level node of the text.\n * @private\n */\nBlockly.Warning.textToDom_ = function(text) {\n  var paragraph = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.TEXT,\n      {\n        'class': 'blocklyText blocklyBubbleText blocklyNoPointerEvents',\n        'y': Blockly.Bubble.BORDER_WIDTH\n      },\n      null);\n  var lines = text.split('\\n');\n  for (var i = 0; i < lines.length; i++) {\n    var tspanElement = Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.TSPAN,\n        {'dy': '1em', 'x': Blockly.Bubble.BORDER_WIDTH}, paragraph);\n    var textNode = document.createTextNode(lines[i]);\n    tspanElement.appendChild(textNode);\n  }\n  return paragraph;\n};\n\n/**\n * Show or hide the warning bubble.\n * @param {boolean} visible True if the bubble should be visible.\n */\nBlockly.Warning.prototype.setVisible = function(visible) {\n  if (visible == this.isVisible()) {\n    return;\n  }\n  Blockly.Events.fire(\n      new Blockly.Events.Ui(this.block_, 'warningOpen', !visible, visible));\n  if (visible) {\n    this.createBubble();\n  } else {\n    this.disposeBubble();\n  }\n};\n\n/**\n * Show the bubble.\n * @package\n */\nBlockly.Warning.prototype.createBubble = function() {\n  // TODO (#2943): This is package because comments steal this UI for\n  //  non-editable comments, but really this should be private.\n  this.paragraphElement_ = Blockly.Warning.textToDom_(this.getText());\n  this.bubble_ = new Blockly.Bubble(\n      /** @type {!Blockly.WorkspaceSvg} */ (this.block_.workspace),\n      this.paragraphElement_, this.block_.pathObject.svgPath,\n      /** @type {!Blockly.utils.Coordinate} */ (this.iconXY_), null, null);\n  // Expose this warning's block's ID on its top-level SVG group.\n  this.bubble_.setSvgId(this.block_.id);\n  if (this.block_.RTL) {\n    // Right-align the paragraph.\n    // This cannot be done until the bubble is rendered on screen.\n    var maxWidth = this.paragraphElement_.getBBox().width;\n    for (var i = 0, textElement;\n      (textElement = this.paragraphElement_.childNodes[i]); i++) {\n\n      textElement.setAttribute('text-anchor', 'end');\n      textElement.setAttribute('x', maxWidth + Blockly.Bubble.BORDER_WIDTH);\n    }\n  }\n  this.applyColour();\n};\n\n/**\n * Dispose of the bubble and references to it.\n * @package\n */\nBlockly.Warning.prototype.disposeBubble = function() {\n  // TODO (#2943): This is package because comments steal this UI for\n  //  non-editable comments, but really this should be private.\n  this.bubble_.dispose();\n  this.bubble_ = null;\n  this.body_ = null;\n  this.paragraphElement_ = null;\n};\n\n/**\n * Set this warning's text.\n * @param {string} text Warning text (or '' to delete). This supports\n *    linebreaks.\n * @param {string} id An ID for this text entry to be able to maintain\n *     multiple warnings.\n */\nBlockly.Warning.prototype.setText = function(text, id) {\n  if (this.text_[id] == text) {\n    return;\n  }\n  if (text) {\n    this.text_[id] = text;\n  } else {\n    delete this.text_[id];\n  }\n  if (this.isVisible()) {\n    this.setVisible(false);\n    this.setVisible(true);\n  }\n};\n\n/**\n * Get this warning's texts.\n * @return {string} All texts concatenated into one string.\n */\nBlockly.Warning.prototype.getText = function() {\n  var allWarnings = [];\n  for (var id in this.text_) {\n    allWarnings.push(this.text_[id]);\n  }\n  return allWarnings.join('\\n');\n};\n\n/**\n * Dispose of this warning.\n */\nBlockly.Warning.prototype.dispose = function() {\n  this.block_.warning = null;\n  Blockly.Icon.prototype.dispose.call(this);\n};\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a code comment.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Comment');\n\ngoog.require('Blockly.Bubble');\ngoog.require('Blockly.Css');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockChange');\ngoog.require('Blockly.Events.Ui');\ngoog.require('Blockly.Icon');\ngoog.require('Blockly.utils.deprecation');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.userAgent');\ngoog.require('Blockly.Warning');\n\n\n/**\n * Class for a comment.\n * @param {!Blockly.Block} block The block associated with this comment.\n * @extends {Blockly.Icon}\n * @constructor\n */\nBlockly.Comment = function(block) {\n  Blockly.Comment.superClass_.constructor.call(this, block);\n\n  /**\n   * The model for this comment.\n   * @type {!Blockly.Block.CommentModel}\n   * @private\n   */\n  this.model_ = block.commentModel;\n  // If someone creates the comment directly instead of calling\n  // block.setCommentText we want to make sure the text is non-null;\n  this.model_.text = this.model_.text || '';\n\n  /**\n   * The model's text value at the start of an edit.\n   * Used to tell if an event should be fired at the end of an edit.\n   * @type {?string}\n   * @private\n   */\n  this.cachedText_ = '';\n\n  /**\n   * Mouse up event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onMouseUpWrapper_ = null;\n\n  /**\n   * Wheel event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onWheelWrapper_ = null;\n\n  /**\n   * Change event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onChangeWrapper_ = null;\n\n  /**\n   * Input event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onInputWrapper_ = null;\n\n  this.createIcon();\n};\nBlockly.utils.object.inherits(Blockly.Comment, Blockly.Icon);\n\n/**\n * Draw the comment icon.\n * @param {!Element} group The icon group.\n * @protected\n */\nBlockly.Comment.prototype.drawIcon_ = function(group) {\n  // Circle.\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.CIRCLE,\n      {'class': 'blocklyIconShape', 'r': '8', 'cx': '8', 'cy': '8'},\n      group);\n  // Can't use a real '?' text character since different browsers and operating\n  // systems render it differently.\n  // Body of question mark.\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH,\n      {\n        'class': 'blocklyIconSymbol',\n        'd': 'm6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.405' +\n          '0.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25' +\n          '-1.201,0.998 -1.201,1.528 -1.204,2.19z'},\n      group);\n  // Dot of question mark.\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {\n        'class': 'blocklyIconSymbol',\n        'x': '6.8',\n        'y': '10.78',\n        'height': '2',\n        'width': '2'\n      },\n      group);\n};\n\n/**\n * Create the editor for the comment's bubble.\n * @return {!SVGElement} The top-level node of the editor.\n * @private\n */\nBlockly.Comment.prototype.createEditor_ = function() {\n  /* Create the editor.  Here's the markup that will be generated in\n   * editable mode:\n    <foreignObject x=\"8\" y=\"8\" width=\"164\" height=\"164\">\n      <body xmlns=\"http://www.w3.org/1999/xhtml\" class=\"blocklyMinimalBody\">\n        <textarea xmlns=\"http://www.w3.org/1999/xhtml\"\n            class=\"blocklyCommentTextarea\"\n            style=\"height: 164px; width: 164px;\"></textarea>\n      </body>\n    </foreignObject>\n   * For non-editable mode see Warning.textToDom_.\n   */\n\n  this.foreignObject_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FOREIGNOBJECT,\n      {'x': Blockly.Bubble.BORDER_WIDTH, 'y': Blockly.Bubble.BORDER_WIDTH},\n      null);\n\n  var body = document.createElementNS(Blockly.utils.dom.HTML_NS, 'body');\n  body.setAttribute('xmlns', Blockly.utils.dom.HTML_NS);\n  body.className = 'blocklyMinimalBody';\n\n  this.textarea_ = document.createElementNS(\n      Blockly.utils.dom.HTML_NS, 'textarea');\n  var textarea = this.textarea_;\n  textarea.className = 'blocklyCommentTextarea';\n  textarea.setAttribute('dir', this.block_.RTL ? 'RTL' : 'LTR');\n  textarea.value = this.model_.text;\n  this.resizeTextarea_();\n\n  body.appendChild(textarea);\n  this.foreignObject_.appendChild(body);\n\n  // Ideally this would be hooked to the focus event for the comment.\n  // However doing so in Firefox swallows the cursor for unknown reasons.\n  // So this is hooked to mouseup instead.  No big deal.\n  this.onMouseUpWrapper_ = Blockly.bindEventWithChecks_(\n      textarea, 'mouseup', this, this.startEdit_, true, true);\n  // Don't zoom with mousewheel.\n  this.onWheelWrapper_ = Blockly.bindEventWithChecks_(\n      textarea, 'wheel', this, function(e) {\n        e.stopPropagation();\n      });\n  this.onChangeWrapper_ = Blockly.bindEventWithChecks_(\n      textarea, 'change', this, function(_e) {\n        if (this.cachedText_ != this.model_.text) {\n          Blockly.Events.fire(new Blockly.Events.BlockChange(\n              this.block_, 'comment', null, this.cachedText_, this.model_.text));\n        }\n      });\n  this.onInputWrapper_ = Blockly.bindEventWithChecks_(\n      textarea, 'input', this, function(_e) {\n        this.model_.text = textarea.value;\n      });\n\n  setTimeout(textarea.focus.bind(textarea), 0);\n\n  return this.foreignObject_;\n};\n\n/**\n * Add or remove editability of the comment.\n * @override\n */\nBlockly.Comment.prototype.updateEditable = function() {\n  Blockly.Comment.superClass_.updateEditable.call(this);\n  if (this.isVisible()) {\n    // Recreate the bubble with the correct UI.\n    this.disposeBubble_();\n    this.createBubble_();\n  }\n};\n\n/**\n * Callback function triggered when the bubble has resized.\n * Resize the text area accordingly.\n * @private\n */\nBlockly.Comment.prototype.onBubbleResize_ = function() {\n  if (!this.isVisible()) {\n    return;\n  }\n  this.model_.size = this.bubble_.getBubbleSize();\n  this.resizeTextarea_();\n};\n\n/**\n * Resizes the text area to match the size defined on the model (which is\n * the size of the bubble).\n * @private\n */\nBlockly.Comment.prototype.resizeTextarea_ = function() {\n  var size = this.model_.size;\n  var doubleBorderWidth = 2 * Blockly.Bubble.BORDER_WIDTH;\n  var widthMinusBorder = size.width - doubleBorderWidth;\n  var heightMinusBorder = size.height - doubleBorderWidth;\n  this.foreignObject_.setAttribute('width', widthMinusBorder);\n  this.foreignObject_.setAttribute('height', heightMinusBorder);\n  this.textarea_.style.width = (widthMinusBorder - 4) + 'px';\n  this.textarea_.style.height = (heightMinusBorder - 4) + 'px';\n};\n\n/**\n * Show or hide the comment bubble.\n * @param {boolean} visible True if the bubble should be visible.\n */\nBlockly.Comment.prototype.setVisible = function(visible) {\n  if (visible == this.isVisible()) {\n    return;\n  }\n  Blockly.Events.fire(\n      new Blockly.Events.Ui(this.block_, 'commentOpen', !visible, visible));\n  this.model_.pinned = visible;\n  if (visible) {\n    this.createBubble_();\n  } else {\n    this.disposeBubble_();\n  }\n};\n\n/**\n * Show the bubble. Handles deciding if it should be editable or not.\n * @private\n */\nBlockly.Comment.prototype.createBubble_ = function() {\n  if (!this.block_.isEditable() || Blockly.utils.userAgent.IE) {\n    // Steal the code from warnings to make an uneditable text bubble.\n    // MSIE does not support foreignobject; textareas are impossible.\n    // https://docs.microsoft.com/en-us/openspecs/ie_standards/ms-svg/56e6e04c-7c8c-44dd-8100-bd745ee42034\n    // Always treat comments in IE as uneditable.\n    this.createNonEditableBubble_();\n  } else {\n    this.createEditableBubble_();\n  }\n};\n\n/**\n * Show an editable bubble.\n * @private\n */\nBlockly.Comment.prototype.createEditableBubble_ = function() {\n  this.bubble_ = new Blockly.Bubble(\n      /** @type {!Blockly.WorkspaceSvg} */ (this.block_.workspace),\n      this.createEditor_(), this.block_.pathObject.svgPath,\n      /** @type {!Blockly.utils.Coordinate} */ (this.iconXY_),\n      this.model_.size.width, this.model_.size.height);\n  // Expose this comment's block's ID on its top-level SVG group.\n  this.bubble_.setSvgId(this.block_.id);\n  this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this));\n  this.applyColour();\n};\n\n/**\n * Show a non-editable bubble.\n * @private\n * @suppress {checkTypes} Suppress `this` type mismatch.\n */\nBlockly.Comment.prototype.createNonEditableBubble_ = function() {\n  // TODO (#2917): It would be great if the comment could support line breaks.\n  Blockly.Warning.prototype.createBubble.call(this);\n};\n\n/**\n * Dispose of the bubble.\n * @private\n * @suppress {checkTypes} Suppress `this` type mismatch.\n */\nBlockly.Comment.prototype.disposeBubble_ = function() {\n  if (this.paragraphElement_) {\n    // We're using the warning UI so we have to let it dispose.\n    Blockly.Warning.prototype.disposeBubble.call(this);\n    return;\n  }\n  if (this.onMouseUpWrapper_) {\n    Blockly.unbindEvent_(this.onMouseUpWrapper_);\n    this.onMouseUpWrapper_ = null;\n  }\n  if (this.onWheelWrapper_) {\n    Blockly.unbindEvent_(this.onWheelWrapper_);\n    this.onWheelWrapper_ = null;\n  }\n  if (this.onChangeWrapper_) {\n    Blockly.unbindEvent_(this.onChangeWrapper_);\n    this.onChangeWrapper_ = null;\n  }\n  if (this.onInputWrapper_) {\n    Blockly.unbindEvent_(this.onInputWrapper_);\n    this.onInputWrapper_ = null;\n  }\n  this.bubble_.dispose();\n  this.bubble_ = null;\n  this.textarea_ = null;\n  this.foreignObject_ = null;\n};\n\n/**\n * Callback fired when an edit starts.\n *\n * Bring the comment to the top of the stack when clicked on. Also cache the\n * current text so it can be used to fire a change event.\n * @param {!Event} _e Mouse up event.\n * @private\n */\nBlockly.Comment.prototype.startEdit_ = function(_e) {\n  if (this.bubble_.promote()) {\n    // Since the act of moving this node within the DOM causes a loss of focus,\n    // we need to reapply the focus.\n    this.textarea_.focus();\n  }\n\n  this.cachedText_ = this.model_.text;\n};\n\n/**\n * Get the dimensions of this comment's bubble.\n * @return {Blockly.utils.Size} Object with width and height properties.\n */\nBlockly.Comment.prototype.getBubbleSize = function() {\n  return this.model_.size;\n};\n\n/**\n * Size this comment's bubble.\n * @param {number} width Width of the bubble.\n * @param {number} height Height of the bubble.\n */\nBlockly.Comment.prototype.setBubbleSize = function(width, height) {\n  if (this.bubble_) {\n    this.bubble_.setBubbleSize(width, height);\n  } else {\n    this.model_.size.width = width;\n    this.model_.size.height = height;\n  }\n};\n\n/**\n * Returns this comment's text.\n * @return {string} Comment text.\n * @deprecated August 2019 Use block.getCommentText() instead.\n */\nBlockly.Comment.prototype.getText = function() {\n  Blockly.utils.deprecation.warn(\n      'Comment.prototype.getText',\n      'August 2019',\n      'December 2020',\n      'block.getCommentText');\n  return this.model_.text || '';\n};\n\n/**\n * Set this comment's text.\n *\n * If you want to receive a comment change event, then this should not be called\n * directly. Instead call block.setCommentText();\n * @param {string} text Comment text.\n * @deprecated August 2019 Use block.setCommentText() instead.\n */\nBlockly.Comment.prototype.setText = function(text) {\n  Blockly.utils.deprecation.warn(\n      'Comment.prototype.setText',\n      'August 2019',\n      'December 2020',\n      'block.setCommentText');\n  if (this.model_.text == text) {\n    return;\n  }\n  this.model_.text = text;\n  this.updateText();\n};\n\n/**\n * Update the comment's view to match the model.\n * @package\n */\nBlockly.Comment.prototype.updateText = function() {\n  if (this.textarea_) {\n    this.textarea_.value = this.model_.text;\n  } else if (this.paragraphElement_) {\n    // Non-Editable mode.\n    // TODO (#2917): If 2917 gets added this will probably need to be updated.\n    this.paragraphElement_.firstChild.textContent = this.model_.text;\n  }\n};\n\n/**\n * Dispose of this comment.\n *\n * If you want to receive a comment \"delete\" event (newValue: null), then this\n * should not be called directly. Instead call block.setCommentText(null);\n */\nBlockly.Comment.prototype.dispose = function() {\n  this.block_.comment = null;\n  Blockly.Icon.prototype.dispose.call(this);\n};\n\n/**\n * CSS for block comment.  See css.js for use.\n */\nBlockly.Css.register([\n  /* eslint-disable indent */\n  '.blocklyCommentTextarea {',\n    'background-color: #fef49c;',\n    'border: 0;',\n    'outline: 0;',\n    'margin: 0;',\n    'padding: 3px;',\n    'resize: none;',\n    'display: block;',\n    'overflow: hidden;',\n  '}'\n  /* eslint-enable indent */\n]);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing a cursor used to navigate the flyout.\n * Used primarily for keyboard navigation.\n * @author aschmiedt@google.com (Abby Schmiedt)\n */\n'use strict';\n\ngoog.provide('Blockly.FlyoutCursor');\n\ngoog.require('Blockly.Cursor');\ngoog.require('Blockly.navigation');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * Class for a flyout cursor.\n * This controls how a user navigates blocks in the flyout.\n * @constructor\n * @extends {Blockly.Cursor}\n */\nBlockly.FlyoutCursor = function() {\n  Blockly.FlyoutCursor.superClass_.constructor.call(this);\n};\nBlockly.utils.object.inherits(Blockly.FlyoutCursor, Blockly.Cursor);\n\n/**\n * Handles the given action.\n * This is only triggered when keyboard navigation is enabled.\n * @param {!Blockly.Action} action The action to be handled.\n * @return {boolean} True if the action has been handled, false otherwise.\n * @override\n */\nBlockly.FlyoutCursor.prototype.onBlocklyAction = function(action) {\n  switch (action.name) {\n    case Blockly.navigation.actionNames.PREVIOUS:\n      this.prev();\n      return true;\n    case Blockly.navigation.actionNames.NEXT:\n      this.next();\n      return true;\n    default:\n      return false;\n  }\n};\n\n/**\n * Find the next connection, field, or block.\n * @return {Blockly.ASTNode} The next element, or null if the current node is\n *     not set or there is no next value.\n * @override\n */\nBlockly.FlyoutCursor.prototype.next = function() {\n  var curNode = this.getCurNode();\n  if (!curNode) {\n    return null;\n  }\n  var newNode = curNode.next();\n\n  if (newNode) {\n    this.setCurNode(newNode);\n  }\n  return newNode;\n};\n\n/**\n * This is a  no-op since a flyout cursor can not go in.\n * @return {null} Always null.\n * @override\n */\nBlockly.FlyoutCursor.prototype.in = function() {\n  return null;\n};\n\n/**\n * Find the previous connection, field, or block.\n * @return {Blockly.ASTNode} The previous element, or null if the current node\n *     is not set or there is no previous value.\n * @override\n */\nBlockly.FlyoutCursor.prototype.prev = function() {\n  var curNode = this.getCurNode();\n  if (!curNode) {\n    return null;\n  }\n  var newNode = curNode.prev();\n\n  if (newNode) {\n    this.setCurNode(newNode);\n  }\n  return newNode;\n};\n\n/**\n * This is a  no-op since a flyout cursor can not go out.\n * @return {null} Always null.\n * @override\n */\nBlockly.FlyoutCursor.prototype.out = function() {\n  return null;\n};\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Flyout tray containing blocks which may be created.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Flyout');\n\ngoog.require('Blockly.Block');\ngoog.require('Blockly.blockRendering');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockCreate');\ngoog.require('Blockly.Events.VarCreate');\ngoog.require('Blockly.FlyoutCursor');\ngoog.require('Blockly.Gesture');\ngoog.require('Blockly.Marker');\ngoog.require('Blockly.Scrollbar');\ngoog.require('Blockly.Tooltip');\ngoog.require('Blockly.Touch');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.toolbox');\ngoog.require('Blockly.WorkspaceSvg');\ngoog.require('Blockly.Xml');\n\ngoog.requireType('Blockly.IBlocklyActionable');\ngoog.requireType('Blockly.IDeleteArea');\ngoog.requireType('Blockly.IFlyout');\ngoog.requireType('Blockly.utils.Metrics');\n\n\n/**\n * Class for a flyout.\n * @param {!Blockly.Options} workspaceOptions Dictionary of options for the\n *     workspace.\n * @constructor\n * @abstract\n * @implements {Blockly.IBlocklyActionable}\n * @implements {Blockly.IDeleteArea}\n * @implements {Blockly.IFlyout}\n */\nBlockly.Flyout = function(workspaceOptions) {\n  workspaceOptions.getMetrics =\n    /** @type {function():!Blockly.utils.Metrics} */ (\n      this.getMetrics_.bind(this));\n  workspaceOptions.setMetrics = this.setMetrics_.bind(this);\n\n  /**\n   * @type {!Blockly.WorkspaceSvg}\n   * @protected\n   */\n  this.workspace_ = new Blockly.WorkspaceSvg(workspaceOptions);\n  this.workspace_.isFlyout = true;\n  // Keep the workspace visibility consistent with the flyout's visibility.\n  this.workspace_.setVisible(this.isVisible_);\n\n  /**\n   * Is RTL vs LTR.\n   * @type {boolean}\n   */\n  this.RTL = !!workspaceOptions.RTL;\n\n  /**\n   * Whether the flyout should be laid out horizontally or not.\n   * @type {boolean}\n   * @package\n   */\n  this.horizontalLayout = false;\n\n  /**\n   * Position of the toolbox and flyout relative to the workspace.\n   * @type {number}\n   * @protected\n   */\n  this.toolboxPosition_ = workspaceOptions.toolboxPosition;\n\n  /**\n   * Opaque data that can be passed to Blockly.unbindEvent_.\n   * @type {!Array.<!Array>}\n   * @private\n   */\n  this.eventWrappers_ = [];\n\n  /**\n   * List of background mats that lurk behind each block to catch clicks\n   * landing in the blocks' lakes and bays.\n   * @type {!Array.<!SVGElement>}\n   * @private\n   */\n  this.mats_ = [];\n\n  /**\n   * List of visible buttons.\n   * @type {!Array.<!Blockly.FlyoutButton>}\n   * @protected\n   */\n  this.buttons_ = [];\n\n  /**\n   * List of event listeners.\n   * @type {!Array.<!Array>}\n   * @private\n   */\n  this.listeners_ = [];\n\n  /**\n   * List of blocks that should always be disabled.\n   * @type {!Array.<!Blockly.Block>}\n   * @private\n   */\n  this.permanentlyDisabled_ = [];\n\n  /**\n   * Width of output tab.\n   * @type {number}\n   * @protected\n   * @const\n   */\n  this.tabWidth_ = this.workspace_.getRenderer().getConstants().TAB_WIDTH;\n\n  /**\n   * The target workspace\n   * @type {?Blockly.WorkspaceSvg}\n   * @package\n   */\n  this.targetWorkspace = null;\n};\n\n/**\n * Does the flyout automatically close when a block is created?\n * @type {boolean}\n */\nBlockly.Flyout.prototype.autoClose = true;\n\n/**\n * Whether the flyout is visible.\n * @type {boolean}\n * @private\n */\nBlockly.Flyout.prototype.isVisible_ = false;\n\n/**\n * Whether the workspace containing this flyout is visible.\n * @type {boolean}\n * @private\n */\nBlockly.Flyout.prototype.containerVisible_ = true;\n\n/**\n * Corner radius of the flyout background.\n * @type {number}\n * @const\n */\nBlockly.Flyout.prototype.CORNER_RADIUS = 8;\n\n/**\n * Margin around the edges of the blocks in the flyout.\n * @type {number}\n * @const\n */\nBlockly.Flyout.prototype.MARGIN = Blockly.Flyout.prototype.CORNER_RADIUS;\n\n// TODO: Move GAP_X and GAP_Y to their appropriate files.\n\n/**\n * Gap between items in horizontal flyouts. Can be overridden with the \"sep\"\n * element.\n * @const {number}\n */\nBlockly.Flyout.prototype.GAP_X = Blockly.Flyout.prototype.MARGIN * 3;\n\n/**\n * Gap between items in vertical flyouts. Can be overridden with the \"sep\"\n * element.\n * @const {number}\n */\nBlockly.Flyout.prototype.GAP_Y = Blockly.Flyout.prototype.MARGIN * 3;\n\n/**\n * Top/bottom padding between scrollbar and edge of flyout background.\n * @type {number}\n * @const\n */\nBlockly.Flyout.prototype.SCROLLBAR_PADDING = 2;\n\n/**\n * Width of flyout.\n * @type {number}\n * @protected\n */\nBlockly.Flyout.prototype.width_ = 0;\n\n/**\n * Height of flyout.\n * @type {number}\n * @protected\n */\nBlockly.Flyout.prototype.height_ = 0;\n\n/**\n * Range of a drag angle from a flyout considered \"dragging toward workspace\".\n * Drags that are within the bounds of this many degrees from the orthogonal\n * line to the flyout edge are considered to be \"drags toward the workspace\".\n * Example:\n * Flyout                                                  Edge   Workspace\n * [block] /  <-within this angle, drags \"toward workspace\" |\n * [block] ---- orthogonal to flyout boundary ----          |\n * [block] \\                                                |\n * The angle is given in degrees from the orthogonal.\n *\n * This is used to know when to create a new block and when to scroll the\n * flyout. Setting it to 360 means that all drags create a new block.\n * @type {number}\n * @protected\n*/\nBlockly.Flyout.prototype.dragAngleRange_ = 70;\n\n/**\n * Creates the flyout's DOM.  Only needs to be called once.  The flyout can\n * either exist as its own svg element or be a g element nested inside a\n * separate svg element.\n * @param {string|\n * !Blockly.utils.Svg<!SVGSVGElement>|\n * !Blockly.utils.Svg<!SVGGElement>} tagName The type of tag to\n *     put the flyout in. This should be <svg> or <g>.\n * @return {!SVGElement} The flyout's SVG group.\n */\nBlockly.Flyout.prototype.createDom = function(tagName) {\n  /*\n  <svg | g>\n    <path class=\"blocklyFlyoutBackground\"/>\n    <g class=\"blocklyFlyout\"></g>\n  </ svg | g>\n  */\n  // Setting style to display:none to start. The toolbox and flyout\n  // hide/show code will set up proper visibility and size later.\n  this.svgGroup_ = Blockly.utils.dom.createSvgElement(tagName,\n      {'class': 'blocklyFlyout', 'style': 'display: none'}, null);\n  this.svgBackground_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH,\n      {'class': 'blocklyFlyoutBackground'}, this.svgGroup_);\n  this.svgGroup_.appendChild(this.workspace_.createDom());\n  this.workspace_.getThemeManager().subscribe(\n      this.svgBackground_, 'flyoutBackgroundColour', 'fill');\n  this.workspace_.getThemeManager().subscribe(\n      this.svgBackground_, 'flyoutOpacity', 'fill-opacity');\n  this.workspace_.getMarkerManager().setCursor(new Blockly.FlyoutCursor());\n  return this.svgGroup_;\n};\n\n/**\n * Initializes the flyout.\n * @param {!Blockly.WorkspaceSvg} targetWorkspace The workspace in which to\n *     create new blocks.\n */\nBlockly.Flyout.prototype.init = function(targetWorkspace) {\n  this.targetWorkspace = targetWorkspace;\n  this.workspace_.targetWorkspace = targetWorkspace;\n\n  /**\n   * @type {!Blockly.Scrollbar}\n   * @package\n   */\n  this.scrollbar = new Blockly.Scrollbar(this.workspace_,\n      this.horizontalLayout, false, 'blocklyFlyoutScrollbar');\n\n  this.hide();\n\n  Array.prototype.push.apply(this.eventWrappers_,\n      Blockly.bindEventWithChecks_(this.svgGroup_, 'wheel', this, this.wheel_));\n  if (!this.autoClose) {\n    this.filterWrapper_ = this.filterForCapacity_.bind(this);\n    this.targetWorkspace.addChangeListener(this.filterWrapper_);\n  }\n\n  // Dragging the flyout up and down.\n  Array.prototype.push.apply(this.eventWrappers_,\n      Blockly.bindEventWithChecks_(\n          this.svgBackground_, 'mousedown', this, this.onMouseDown_));\n\n  // A flyout connected to a workspace doesn't have its own current gesture.\n  this.workspace_.getGesture =\n      this.targetWorkspace.getGesture.bind(this.targetWorkspace);\n\n  // Get variables from the main workspace rather than the target workspace.\n  this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap());\n\n  this.workspace_.createPotentialVariableMap();\n};\n\n/**\n * Dispose of this flyout.\n * Unlink from all DOM elements to prevent memory leaks.\n * @suppress {checkTypes}\n */\nBlockly.Flyout.prototype.dispose = function() {\n  this.hide();\n  Blockly.unbindEvent_(this.eventWrappers_);\n  if (this.filterWrapper_) {\n    this.targetWorkspace.removeChangeListener(this.filterWrapper_);\n    this.filterWrapper_ = null;\n  }\n  if (this.scrollbar) {\n    this.scrollbar.dispose();\n    this.scrollbar = null;\n  }\n  if (this.workspace_) {\n    this.workspace_.getThemeManager().unsubscribe(this.svgBackground_);\n    this.workspace_.targetWorkspace = null;\n    this.workspace_.dispose();\n    this.workspace_ = null;\n  }\n  if (this.svgGroup_) {\n    Blockly.utils.dom.removeNode(this.svgGroup_);\n    this.svgGroup_ = null;\n  }\n  this.svgBackground_ = null;\n  this.targetWorkspace = null;\n};\n\n/**\n * Get the width of the flyout.\n * @return {number} The width of the flyout.\n */\nBlockly.Flyout.prototype.getWidth = function() {\n  return this.width_;\n};\n\n/**\n * Get the height of the flyout.\n * @return {number} The width of the flyout.\n */\nBlockly.Flyout.prototype.getHeight = function() {\n  return this.height_;\n};\n\n/**\n * Get the workspace inside the flyout.\n * @return {!Blockly.WorkspaceSvg} The workspace inside the flyout.\n * @package\n */\nBlockly.Flyout.prototype.getWorkspace = function() {\n  return this.workspace_;\n};\n\n/**\n * Is the flyout visible?\n * @return {boolean} True if visible.\n */\nBlockly.Flyout.prototype.isVisible = function() {\n  return this.isVisible_;\n};\n\n/**\n * Set whether the flyout is visible. A value of true does not necessarily mean\n * that the flyout is shown. It could be hidden because its container is hidden.\n * @param {boolean} visible True if visible.\n */\nBlockly.Flyout.prototype.setVisible = function(visible) {\n  var visibilityChanged = (visible != this.isVisible());\n\n  this.isVisible_ = visible;\n  if (visibilityChanged) {\n    this.updateDisplay_();\n  }\n};\n\n/**\n * Set whether this flyout's container is visible.\n * @param {boolean} visible Whether the container is visible.\n */\nBlockly.Flyout.prototype.setContainerVisible = function(visible) {\n  var visibilityChanged = (visible != this.containerVisible_);\n  this.containerVisible_ = visible;\n  if (visibilityChanged) {\n    this.updateDisplay_();\n  }\n};\n\n/**\n * Update the display property of the flyout based whether it thinks it should\n * be visible and whether its containing workspace is visible.\n * @private\n */\nBlockly.Flyout.prototype.updateDisplay_ = function() {\n  var show = true;\n  if (!this.containerVisible_) {\n    show = false;\n  } else {\n    show = this.isVisible();\n  }\n  this.svgGroup_.style.display = show ? 'block' : 'none';\n  // Update the scrollbar's visibility too since it should mimic the\n  // flyout's visibility.\n  this.scrollbar.setContainerVisible(show);\n};\n\n/**\n * Update the view based on coordinates calculated in position().\n * @param {number} width The computed width of the flyout's SVG group\n * @param {number} height The computed height of the flyout's SVG group.\n * @param {number} x The computed x origin of the flyout's SVG group.\n * @param {number} y The computed y origin of the flyout's SVG group.\n * @protected\n */\nBlockly.Flyout.prototype.positionAt_ = function(width, height, x, y) {\n  this.svgGroup_.setAttribute(\"width\", width);\n  this.svgGroup_.setAttribute(\"height\", height);\n  if (this.svgGroup_.tagName == 'svg') {\n    var transform = 'translate(' + x + 'px,' + y + 'px)';\n    Blockly.utils.dom.setCssTransform(this.svgGroup_, transform);\n  } else {\n    // IE and Edge don't support CSS transforms on SVG elements so\n    // it's important to set the transform on the SVG element itself\n    var transform = 'translate(' + x + ',' + y + ')';\n    this.svgGroup_.setAttribute(\"transform\", transform);\n  }\n\n  // Update the scrollbar (if one exists).\n  if (this.scrollbar) {\n    // Set the scrollbars origin to be the top left of the flyout.\n    this.scrollbar.setOrigin(x, y);\n    this.scrollbar.resize();\n    // Set the position again so that if the metrics were the same (and the\n    // resize failed) our position is still updated.\n    this.scrollbar.setPosition(\n        this.scrollbar.position.x, this.scrollbar.position.y);\n  }\n};\n\n/**\n * Hide and empty the flyout.\n */\nBlockly.Flyout.prototype.hide = function() {\n  if (!this.isVisible()) {\n    return;\n  }\n  this.setVisible(false);\n  // Delete all the event listeners.\n  for (var i = 0, listen; (listen = this.listeners_[i]); i++) {\n    Blockly.unbindEvent_(listen);\n  }\n  this.listeners_.length = 0;\n  if (this.reflowWrapper_) {\n    this.workspace_.removeChangeListener(this.reflowWrapper_);\n    this.reflowWrapper_ = null;\n  }\n  // Do NOT delete the blocks here.  Wait until Flyout.show.\n  // https://neil.fraser.name/news/2014/08/09/\n};\n\n/**\n * Show and populate the flyout.\n * @param {!Blockly.utils.toolbox.FlyoutDefinition|string} flyoutDef Contents to display\n *     in the flyout. This is either an array of Nodes, a NodeList, a\n *     toolbox definition, or a string with the name of the dynamic category.\n */\nBlockly.Flyout.prototype.show = function(flyoutDef) {\n  this.workspace_.setResizesEnabled(false);\n  this.hide();\n  this.clearOldBlocks_();\n\n  // Handle dynamic categories, represented by a name instead of a list.\n  if (typeof flyoutDef == 'string') {\n    flyoutDef = this.getDynamicCategoryContents_(flyoutDef);\n  }\n  this.setVisible(true);\n\n  // Parse the Array, Node or NodeList into a a list of flyout items.\n  var parsedContent = Blockly.utils.toolbox.convertFlyoutDefToJsonArray(flyoutDef);\n  var flyoutInfo =\n    /** @type {{contents:!Array.<!Object>, gaps:!Array.<number>}} */ (\n      this.createFlyoutInfo_(parsedContent));\n\n  this.layout_(flyoutInfo.contents, flyoutInfo.gaps);\n\n  // IE 11 is an incompetent browser that fails to fire mouseout events.\n  // When the mouse is over the background, deselect all blocks.\n  var deselectAll = function() {\n    var topBlocks = this.workspace_.getTopBlocks(false);\n    for (var i = 0, block; (block = topBlocks[i]); i++) {\n      block.removeSelect();\n    }\n  };\n\n  this.listeners_.push(Blockly.bindEventWithChecks_(this.svgBackground_,\n      'mouseover', this, deselectAll));\n\n  if (this.horizontalLayout) {\n    this.height_ = 0;\n  } else {\n    this.width_ = 0;\n  }\n  this.workspace_.setResizesEnabled(true);\n  this.reflow();\n\n  this.filterForCapacity_();\n\n  // Correctly position the flyout's scrollbar when it opens.\n  this.position();\n\n  this.reflowWrapper_ = this.reflow.bind(this);\n  this.workspace_.addChangeListener(this.reflowWrapper_);\n};\n\n/**\n * Create the contents array and gaps array necessary to create the layout for\n * the flyout.\n * @param {!Blockly.utils.toolbox.FlyoutItemInfoArray} parsedContent The array\n *     of objects to show in the flyout.\n * @return {{contents:Array.<Object>, gaps:Array.<number>}} The list of contents\n *     and gaps needed to lay out the flyout.\n * @private\n */\nBlockly.Flyout.prototype.createFlyoutInfo_ = function(parsedContent) {\n  var contents = [];\n  var gaps = [];\n  this.permanentlyDisabled_.length = 0;\n  var defaultGap = this.horizontalLayout ? this.GAP_X : this.GAP_Y;\n  for (var i = 0, contentInfo; (contentInfo = parsedContent[i]); i++) {\n\n    if (contentInfo['custom']) {\n      var customInfo = /** @type {!Blockly.utils.toolbox.DynamicCategoryInfo} */ (contentInfo);\n      var categoryName = customInfo['custom'];\n      var flyoutDef = this.getDynamicCategoryContents_(categoryName);\n      var parsedDynamicContent = /** @type {!Blockly.utils.toolbox.FlyoutItemInfoArray} */\n        (Blockly.utils.toolbox.convertFlyoutDefToJsonArray(flyoutDef));\n      parsedContent.splice.apply(parsedContent, [i, 1].concat(parsedDynamicContent));\n      contentInfo = parsedContent[i];\n    }\n\n    switch (contentInfo['kind'].toUpperCase()) {\n      case 'BLOCK':\n        var blockInfo = /** @type {!Blockly.utils.toolbox.BlockInfo} */ (contentInfo);\n        var blockXml = this.getBlockXml_(blockInfo);\n        var block = this.createBlock_(blockXml);\n        // This is a deprecated method for adding gap to a block.\n        // <block type=\"math_arithmetic\" gap=\"8\"></block>\n        var gap = parseInt(blockInfo['gap'] || blockXml.getAttribute('gap'), 10);\n        gaps.push(isNaN(gap) ? defaultGap : gap);\n        contents.push({type: 'block', block: block});\n        break;\n      case 'SEP':\n        var sepInfo = /** @type {!Blockly.utils.toolbox.SeparatorInfo} */ (contentInfo);\n        this.addSeparatorGap_(sepInfo, gaps, defaultGap);\n        break;\n      case 'LABEL':\n        var labelInfo = /** @type {!Blockly.utils.toolbox.LabelInfo} */ (contentInfo);\n        // A label is a button with different styling.\n        var label = this.createButton_(labelInfo, /** isLabel */ true);\n        contents.push({type: 'button', button: label});\n        gaps.push(defaultGap);\n        break;\n      case 'BUTTON':\n        var buttonInfo = /** @type {!Blockly.utils.toolbox.ButtonInfo} */ (contentInfo);\n        var button = this.createButton_(buttonInfo, /** isLabel */ false);\n        contents.push({type: 'button', button: button});\n        gaps.push(defaultGap);\n        break;\n    }\n  }\n  return {contents: contents, gaps: gaps};\n};\n\n/**\n * Gets the flyout definition for the dynamic category.\n * @param {string} categoryName The name of the dynamic category.\n * @return {!Array.<!Element>} The array of flyout items.\n * @private\n */\nBlockly.Flyout.prototype.getDynamicCategoryContents_ = function(categoryName) {\n  // Look up the correct category generation function and call that to get a\n  // valid XML list.\n  var fnToApply = this.workspace_.targetWorkspace.getToolboxCategoryCallback(\n      categoryName);\n  if (typeof fnToApply != 'function') {\n    throw TypeError('Couldn\\'t find a callback function when opening' +\n        ' a toolbox category.');\n  }\n  var flyoutDef = fnToApply(this.workspace_.targetWorkspace);\n  if (!Array.isArray(flyoutDef)) {\n    throw new TypeError('Result of toolbox category callback must be an array.');\n  }\n  return flyoutDef;\n};\n\n/**\n * Creates a flyout button or a flyout label.\n * @param {!Blockly.utils.toolbox.ButtonOrLabelInfo} btnInfo\n *    The object holding information about a button or a label.\n * @param {boolean} isLabel True if the button is a label, false otherwise.\n * @return {!Blockly.FlyoutButton} The object used to display the button in the\n *    flyout.\n * @private\n */\nBlockly.Flyout.prototype.createButton_ = function(btnInfo, isLabel) {\n  if (!Blockly.FlyoutButton) {\n    throw Error('Missing require for Blockly.FlyoutButton');\n  }\n  var curButton = new Blockly.FlyoutButton(this.workspace_,\n      /** @type {!Blockly.WorkspaceSvg} */ (this.targetWorkspace), btnInfo,\n      isLabel);\n  return curButton;\n};\n\n/**\n * Create a block from the xml and permanently disable any blocks that were\n * defined as disabled.\n * @param {!Element} blockXml The xml of the block.\n * @return {!Blockly.BlockSvg} The block created from the blockXml.\n * @private\n */\nBlockly.Flyout.prototype.createBlock_ = function(blockXml) {\n  var curBlock = /** @type {!Blockly.BlockSvg} */ (\n    Blockly.Xml.domToBlock(blockXml, this.workspace_));\n  if (!curBlock.isEnabled()) {\n    // Record blocks that were initially disabled.\n    // Do not enable these blocks as a result of capacity filtering.\n    this.permanentlyDisabled_.push(curBlock);\n  }\n  return curBlock;\n};\n\n/**\n * Get the xml from the block info object.\n * @param {!Blockly.utils.toolbox.BlockInfo}  blockInfo The object holding\n *    information about a block.\n * @return {!Element} The xml for the block.\n * @throws {Error} if the xml is not a valid block definition.\n * @private\n */\nBlockly.Flyout.prototype.getBlockXml_ = function(blockInfo) {\n  var blockElement = null;\n  var blockXml = blockInfo['blockxml'];\n\n  if (blockXml && typeof blockXml != 'string') {\n    blockElement = blockXml;\n  } else if (blockXml && typeof blockXml == 'string') {\n    blockElement = Blockly.Xml.textToDom(blockXml);\n    blockInfo['blockxml'] = blockElement;\n  } else if (blockInfo['type']) {\n    blockElement = Blockly.utils.xml.createElement('xml');\n    blockElement.setAttribute('type', blockInfo['type']);\n    blockElement.setAttribute('disabled', blockInfo['disabled']);\n    blockInfo['blockxml'] = blockElement;\n  }\n\n  if (!blockElement) {\n    throw Error('Error: Invalid block definition. Block definition must have blockxml or type.');\n  }\n  return blockElement;\n};\n\n/**\n * Add the necessary gap in the flyout for a separator.\n * @param {!Blockly.utils.toolbox.SeparatorInfo} sepInfo The object holding\n *    information about a separator.\n * @param {!Array.<number>} gaps The list gaps between items in the flyout.\n * @param {number} defaultGap The default gap between the button and next element.\n * @private\n */\nBlockly.Flyout.prototype.addSeparatorGap_ = function(sepInfo, gaps, defaultGap) {\n  // Change the gap between two toolbox elements.\n  // <sep gap=\"36\"></sep>\n  // The default gap is 24, can be set larger or smaller.\n  // This overwrites the gap attribute on the previous element.\n  var newGap = parseInt(sepInfo['gap'], 10);\n  // Ignore gaps before the first block.\n  if (!isNaN(newGap) && gaps.length > 0) {\n    gaps[gaps.length - 1] = newGap;\n  } else {\n    gaps.push(defaultGap);\n  }\n};\n\n/**\n * Delete blocks, mats and buttons from a previous showing of the flyout.\n * @private\n */\nBlockly.Flyout.prototype.clearOldBlocks_ = function() {\n  // Delete any blocks from a previous showing.\n  var oldBlocks = this.workspace_.getTopBlocks(false);\n  for (var i = 0, block; (block = oldBlocks[i]); i++) {\n    if (block.workspace == this.workspace_) {\n      block.dispose(false, false);\n    }\n  }\n  // Delete any mats from a previous showing.\n  for (var j = 0; j < this.mats_.length; j++) {\n    var rect = this.mats_[j];\n    if (rect) {\n      Blockly.Tooltip.unbindMouseEvents(rect);\n      Blockly.utils.dom.removeNode(rect);\n    }\n  }\n  this.mats_.length = 0;\n  // Delete any buttons from a previous showing.\n  for (var i = 0, button; (button = this.buttons_[i]); i++) {\n    button.dispose();\n  }\n  this.buttons_.length = 0;\n\n  // Clear potential variables from the previous showing.\n  this.workspace_.getPotentialVariableMap().clear();\n};\n\n/**\n * Add listeners to a block that has been added to the flyout.\n * @param {!SVGElement} root The root node of the SVG group the block is in.\n * @param {!Blockly.BlockSvg} block The block to add listeners for.\n * @param {!SVGElement} rect The invisible rectangle under the block that acts\n *     as a mat for that block.\n * @protected\n */\nBlockly.Flyout.prototype.addBlockListeners_ = function(root, block, rect) {\n  this.listeners_.push(Blockly.bindEventWithChecks_(root, 'mousedown', null,\n      this.blockMouseDown_(block)));\n  this.listeners_.push(Blockly.bindEventWithChecks_(rect, 'mousedown', null,\n      this.blockMouseDown_(block)));\n  this.listeners_.push(Blockly.bindEvent_(root, 'mouseenter', block,\n      block.addSelect));\n  this.listeners_.push(Blockly.bindEvent_(root, 'mouseleave', block,\n      block.removeSelect));\n  this.listeners_.push(Blockly.bindEvent_(rect, 'mouseenter', block,\n      block.addSelect));\n  this.listeners_.push(Blockly.bindEvent_(rect, 'mouseleave', block,\n      block.removeSelect));\n};\n\n/**\n * Handle a mouse-down on an SVG block in a non-closing flyout.\n * @param {!Blockly.BlockSvg} block The flyout block to copy.\n * @return {!Function} Function to call when block is clicked.\n * @private\n */\nBlockly.Flyout.prototype.blockMouseDown_ = function(block) {\n  var flyout = this;\n  return function(e) {\n    var gesture = flyout.targetWorkspace.getGesture(e);\n    if (gesture) {\n      gesture.setStartBlock(block);\n      gesture.handleFlyoutStart(e, flyout);\n    }\n  };\n};\n\n/**\n * Mouse down on the flyout background.  Start a vertical scroll drag.\n * @param {!Event} e Mouse down event.\n * @private\n */\nBlockly.Flyout.prototype.onMouseDown_ = function(e) {\n  var gesture = this.targetWorkspace.getGesture(e);\n  if (gesture) {\n    gesture.handleFlyoutStart(e, this);\n  }\n};\n\n/**\n * Does this flyout allow you to create a new instance of the given block?\n * Used for deciding if a block can be \"dragged out of\" the flyout.\n * @param {!Blockly.BlockSvg} block The block to copy from the flyout.\n * @return {boolean} True if you can create a new instance of the block, false\n *    otherwise.\n * @package\n */\nBlockly.Flyout.prototype.isBlockCreatable_ = function(block) {\n  return block.isEnabled();\n};\n\n/**\n * Create a copy of this block on the workspace.\n * @param {!Blockly.BlockSvg} originalBlock The block to copy from the flyout.\n * @return {!Blockly.BlockSvg} The newly created block.\n * @throws {Error} if something went wrong with deserialization.\n * @package\n */\nBlockly.Flyout.prototype.createBlock = function(originalBlock) {\n  var newBlock = null;\n  Blockly.Events.disable();\n  var variablesBeforeCreation = this.targetWorkspace.getAllVariables();\n  this.targetWorkspace.setResizesEnabled(false);\n  try {\n    newBlock = this.placeNewBlock_(originalBlock);\n  } finally {\n    Blockly.Events.enable();\n  }\n\n  // Close the flyout.\n  Blockly.hideChaff();\n\n  var newVariables = Blockly.Variables.getAddedVariables(this.targetWorkspace,\n      variablesBeforeCreation);\n\n  if (Blockly.Events.isEnabled()) {\n    Blockly.Events.setGroup(true);\n    // Fire a VarCreate event for each (if any) new variable created.\n    for (var i = 0; i < newVariables.length; i++) {\n      var thisVariable = newVariables[i];\n      Blockly.Events.fire(new Blockly.Events.VarCreate(thisVariable));\n    }\n\n    // Block events come after var events, in case they refer to newly created\n    // variables.\n    Blockly.Events.fire(new Blockly.Events.Create(newBlock));\n  }\n  if (this.autoClose) {\n    this.hide();\n  } else {\n    this.filterForCapacity_();\n  }\n  return newBlock;\n};\n\n/**\n * Initialize the given button: move it to the correct location,\n * add listeners, etc.\n * @param {!Blockly.FlyoutButton} button The button to initialize and place.\n * @param {number} x The x position of the cursor during this layout pass.\n * @param {number} y The y position of the cursor during this layout pass.\n * @protected\n */\nBlockly.Flyout.prototype.initFlyoutButton_ = function(button, x, y) {\n  var buttonSvg = button.createDom();\n  button.moveTo(x, y);\n  button.show();\n  // Clicking on a flyout button or label is a lot like clicking on the\n  // flyout background.\n  this.listeners_.push(\n      Blockly.bindEventWithChecks_(\n          buttonSvg, 'mousedown', this, this.onMouseDown_));\n\n  this.buttons_.push(button);\n};\n\n/**\n * Create and place a rectangle corresponding to the given block.\n * @param {!Blockly.BlockSvg} block The block to associate the rect to.\n * @param {number} x The x position of the cursor during this layout pass.\n * @param {number} y The y position of the cursor during this layout pass.\n * @param {!{height: number, width: number}} blockHW The height and width of the\n *     block.\n * @param {number} index The index into the mats list where this rect should be\n *     placed.\n * @return {!SVGElement} Newly created SVG element for the rectangle behind the\n *     block.\n * @protected\n */\nBlockly.Flyout.prototype.createRect_ = function(block, x, y, blockHW, index) {\n  // Create an invisible rectangle under the block to act as a button.  Just\n  // using the block as a button is poor, since blocks have holes in them.\n  var rect = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {\n        'fill-opacity': 0,\n        'x': x,\n        'y': y,\n        'height': blockHW.height,\n        'width': blockHW.width\n      }, null);\n  rect.tooltip = block;\n  Blockly.Tooltip.bindMouseEvents(rect);\n  // Add the rectangles under the blocks, so that the blocks' tooltips work.\n  this.workspace_.getCanvas().insertBefore(rect, block.getSvgRoot());\n\n  block.flyoutRect_ = rect;\n  this.mats_[index] = rect;\n  return rect;\n};\n\n/**\n * Move a rectangle to sit exactly behind a block, taking into account tabs,\n * hats, and any other protrusions we invent.\n * @param {!SVGElement} rect The rectangle to move directly behind the block.\n * @param {!Blockly.BlockSvg} block The block the rectangle should be behind.\n * @protected\n */\nBlockly.Flyout.prototype.moveRectToBlock_ = function(rect, block) {\n  var blockHW = block.getHeightWidth();\n  rect.setAttribute('width', blockHW.width);\n  rect.setAttribute('height', blockHW.height);\n\n  var blockXY = block.getRelativeToSurfaceXY();\n  rect.setAttribute('y', blockXY.y);\n  rect.setAttribute('x', this.RTL ? blockXY.x - blockHW.width : blockXY.x);\n};\n\n/**\n * Filter the blocks on the flyout to disable the ones that are above the\n * capacity limit.  For instance, if the user may only place two more blocks on\n * the workspace, an \"a + b\" block that has two shadow blocks would be disabled.\n * @private\n */\nBlockly.Flyout.prototype.filterForCapacity_ = function() {\n  var blocks = this.workspace_.getTopBlocks(false);\n  for (var i = 0, block; (block = blocks[i]); i++) {\n    if (this.permanentlyDisabled_.indexOf(block) == -1) {\n      var enable = this.targetWorkspace\n          .isCapacityAvailable(Blockly.utils.getBlockTypeCounts(block));\n      while (block) {\n        block.setEnabled(enable);\n        block = block.getNextBlock();\n      }\n    }\n  }\n};\n\n/**\n * Reflow blocks and their mats.\n */\nBlockly.Flyout.prototype.reflow = function() {\n  if (this.reflowWrapper_) {\n    this.workspace_.removeChangeListener(this.reflowWrapper_);\n  }\n  this.reflowInternal_();\n  if (this.reflowWrapper_) {\n    this.workspace_.addChangeListener(this.reflowWrapper_);\n  }\n};\n\n/**\n * @return {boolean} True if this flyout may be scrolled with a scrollbar or by\n *     dragging.\n * @package\n */\nBlockly.Flyout.prototype.isScrollable = function() {\n  return this.scrollbar ? this.scrollbar.isVisible() : false;\n};\n\n/**\n * Copy a block from the flyout to the workspace and position it correctly.\n * @param {!Blockly.BlockSvg} oldBlock The flyout block to copy.\n * @return {!Blockly.BlockSvg} The new block in the main workspace.\n * @private\n */\nBlockly.Flyout.prototype.placeNewBlock_ = function(oldBlock) {\n  var targetWorkspace = this.targetWorkspace;\n  var svgRootOld = oldBlock.getSvgRoot();\n  if (!svgRootOld) {\n    throw Error('oldBlock is not rendered.');\n  }\n\n  // Create the new block by cloning the block in the flyout (via XML).\n  // This cast assumes that the oldBlock can not be an insertion marker.\n  var xml = /** @type {!Element} */ (Blockly.Xml.blockToDom(oldBlock, true));\n  // The target workspace would normally resize during domToBlock, which will\n  // lead to weird jumps.  Save it for terminateDrag.\n  targetWorkspace.setResizesEnabled(false);\n\n  // Using domToBlock instead of domToWorkspace means that the new block will be\n  // placed at position (0, 0) in main workspace units.\n  var block = /** @type {!Blockly.BlockSvg} */\n      (Blockly.Xml.domToBlock(xml, targetWorkspace));\n  var svgRootNew = block.getSvgRoot();\n  if (!svgRootNew) {\n    throw Error('block is not rendered.');\n  }\n\n  // The offset in pixels between the main workspace's origin and the upper left\n  // corner of the injection div.\n  var mainOffsetPixels = targetWorkspace.getOriginOffsetInPixels();\n\n  // The offset in pixels between the flyout workspace's origin and the upper\n  // left corner of the injection div.\n  var flyoutOffsetPixels = this.workspace_.getOriginOffsetInPixels();\n\n  // The position of the old block in flyout workspace coordinates.\n  var oldBlockPos = oldBlock.getRelativeToSurfaceXY();\n  // The position of the old block in pixels relative to the flyout\n  // workspace's origin.\n  oldBlockPos.scale(this.workspace_.scale);\n\n  // The position of the old block in pixels relative to the upper left corner\n  // of the injection div.\n  var oldBlockOffsetPixels = Blockly.utils.Coordinate.sum(flyoutOffsetPixels,\n      oldBlockPos);\n\n  // The position of the old block in pixels relative to the origin of the\n  // main workspace.\n  var finalOffset = Blockly.utils.Coordinate.difference(oldBlockOffsetPixels,\n      mainOffsetPixels);\n  // The position of the old block in main workspace coordinates.\n  finalOffset.scale(1 / targetWorkspace.scale);\n\n  block.moveBy(finalOffset.x, finalOffset.y);\n  return block;\n};\n\n/**\n * Handles the given action.\n * This is only triggered when keyboard accessibility mode is enabled.\n * @param {!Blockly.Action} action The action to be handled.\n * @return {boolean} True if the flyout handled the action, false otherwise.\n * @package\n */\nBlockly.Flyout.prototype.onBlocklyAction = function(action) {\n  var cursor = this.workspace_.getCursor();\n  return cursor.onBlocklyAction(action);\n};\n\n/**\n * Return the deletion rectangle for this flyout in viewport coordinates.\n * @return {Blockly.utils.Rect} Rectangle in which to delete.\n */\nBlockly.Flyout.prototype.getClientRect;\n\n/**\n * Position the flyout.\n * @return {void}\n */\nBlockly.Flyout.prototype.position;\n\n/**\n * Determine if a drag delta is toward the workspace, based on the position\n * and orientation of the flyout. This is used in determineDragIntention_ to\n * determine if a new block should be created or if the flyout should scroll.\n * @param {!Blockly.utils.Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at mouse down, in pixel units.\n * @return {boolean} True if the drag is toward the workspace.\n * @package\n */\nBlockly.Flyout.prototype.isDragTowardWorkspace;\n\n/**\n * Return an object with all the metrics required to size scrollbars for the\n * flyout.\n * @return {Blockly.utils.Metrics} Contains size and position metrics of the\n *     flyout.\n * @protected\n */\nBlockly.Flyout.prototype.getMetrics_;\n\n/**\n * Sets the translation of the flyout to match the scrollbars.\n * @param {!{x:number,y:number}} xyRatio Contains a y property which is a float\n *     between 0 and 1 specifying the degree of scrolling and a\n *     similar x property.\n * @protected\n */\nBlockly.Flyout.prototype.setMetrics_;\n\n/**\n * Lay out the blocks in the flyout.\n * @param {!Array.<!Object>} contents The blocks and buttons to lay out.\n * @param {!Array.<number>} gaps The visible gaps between blocks.\n * @protected\n */\nBlockly.Flyout.prototype.layout_;\n\n/**\n * Scroll the flyout.\n * @param {!Event} e Mouse wheel scroll event.\n * @protected\n */\nBlockly.Flyout.prototype.wheel_;\n\n/**\n * Compute height of flyout.  Position mat under each block.\n * For RTL: Lay out the blocks right-aligned.\n * @return {void}\n * @protected\n */\nBlockly.Flyout.prototype.reflowInternal_;\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Horizontal flyout tray containing blocks which may be created.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.HorizontalFlyout');\n\ngoog.require('Blockly.Block');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Flyout');\ngoog.require('Blockly.registry');\ngoog.require('Blockly.Scrollbar');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Rect');\ngoog.require('Blockly.WidgetDiv');\n\ngoog.requireType('Blockly.utils.Metrics');\n\n\n/**\n * Class for a flyout.\n * @param {!Blockly.Options} workspaceOptions Dictionary of options for the\n *     workspace.\n * @extends {Blockly.Flyout}\n * @constructor\n */\nBlockly.HorizontalFlyout = function(workspaceOptions) {\n  Blockly.HorizontalFlyout.superClass_.constructor.call(this, workspaceOptions);\n  this.horizontalLayout = true;\n};\nBlockly.utils.object.inherits(Blockly.HorizontalFlyout, Blockly.Flyout);\n\n/**\n * Return an object with all the metrics required to size scrollbars for the\n * flyout.  The following properties are computed:\n * .viewHeight: Height of the visible rectangle,\n * .viewWidth: Width of the visible rectangle,\n * .contentHeight: Height of the contents,\n * .contentWidth: Width of the contents,\n * .viewTop: Offset of top edge of visible rectangle from parent,\n * .contentTop: Offset of the top-most content from the y=0 coordinate,\n * .absoluteTop: Top-edge of view.\n * .viewLeft: Offset of the left edge of visible rectangle from parent,\n * .contentLeft: Offset of the left-most content from the x=0 coordinate,\n * .absoluteLeft: Left-edge of view.\n * @return {Blockly.utils.Metrics} Contains size and position metrics of the\n *     flyout.\n * @protected\n */\nBlockly.HorizontalFlyout.prototype.getMetrics_ = function() {\n  if (!this.isVisible()) {\n    // Flyout is hidden.\n    return null;\n  }\n\n  try {\n    var optionBox = this.workspace_.getCanvas().getBBox();\n  } catch (e) {\n    // Firefox has trouble with hidden elements (Bug 528969).\n    var optionBox = {height: 0, y: 0, width: 0, x: 0};\n  }\n\n  var absoluteTop = this.SCROLLBAR_PADDING;\n  var absoluteLeft = this.SCROLLBAR_PADDING;\n  if (this.toolboxPosition_ == Blockly.TOOLBOX_AT_BOTTOM) {\n    absoluteTop = 0;\n  }\n  var viewHeight = this.height_;\n  if (this.toolboxPosition_ == Blockly.TOOLBOX_AT_TOP) {\n    viewHeight -= this.SCROLLBAR_PADDING;\n  }\n  var viewWidth = this.width_ - 2 * this.SCROLLBAR_PADDING;\n\n  var metrics = {\n    contentHeight: (optionBox.height + 2 * this.MARGIN) * this.workspace_.scale,\n    contentWidth: (optionBox.width + 2 * this.MARGIN) * this.workspace_.scale,\n    contentTop: 0,\n    contentLeft: 0,\n\n    viewHeight: viewHeight,\n    viewWidth: viewWidth,\n    viewTop: -this.workspace_.scrollY,\n    viewLeft: -this.workspace_.scrollX,\n\n    absoluteTop: absoluteTop,\n    absoluteLeft: absoluteLeft\n  };\n  return metrics;\n};\n\n/**\n * Sets the translation of the flyout to match the scrollbars.\n * @param {!{x:number,y:number}} xyRatio Contains a y property which is a float\n *     between 0 and 1 specifying the degree of scrolling and a\n *     similar x property.\n * @protected\n */\nBlockly.HorizontalFlyout.prototype.setMetrics_ = function(xyRatio) {\n  var metrics = this.getMetrics_();\n  // This is a fix to an apparent race condition.\n  if (!metrics) {\n    return;\n  }\n\n  if (typeof xyRatio.x == 'number') {\n    this.workspace_.scrollX = -metrics.contentWidth * xyRatio.x;\n  }\n\n  this.workspace_.translate(this.workspace_.scrollX + metrics.absoluteLeft,\n      this.workspace_.scrollY + metrics.absoluteTop);\n};\n\n/**\n * Move the flyout to the edge of the workspace.\n */\nBlockly.HorizontalFlyout.prototype.position = function() {\n  if (!this.isVisible()) {\n    return;\n  }\n  var targetWorkspaceMetrics = this.targetWorkspace.getMetrics();\n  if (!targetWorkspaceMetrics) {\n    // Hidden components will return null.\n    return;\n  }\n  // Record the width for Blockly.Flyout.getMetrics_.\n  this.width_ = targetWorkspaceMetrics.viewWidth;\n\n  var edgeWidth = targetWorkspaceMetrics.viewWidth - 2 * this.CORNER_RADIUS;\n  var edgeHeight = this.height_ - this.CORNER_RADIUS;\n  this.setBackgroundPath_(edgeWidth, edgeHeight);\n\n  // X is always 0 since this is a horizontal flyout.\n  var x = 0;\n  // If this flyout is the toolbox flyout.\n  if (this.targetWorkspace.toolboxPosition == this.toolboxPosition_) {\n    // If there is a toolbox.\n    if (targetWorkspaceMetrics.toolboxHeight) {\n      if (this.toolboxPosition_ == Blockly.TOOLBOX_AT_TOP) {\n        var y = targetWorkspaceMetrics.toolboxHeight;\n      } else {\n        var y = targetWorkspaceMetrics.viewHeight - this.height_;\n      }\n    } else {\n      if (this.toolboxPosition_ == Blockly.TOOLBOX_AT_TOP) {\n        var y = 0;\n      } else {\n        var y = targetWorkspaceMetrics.viewHeight;\n      }\n    }\n  } else {\n    if (this.toolboxPosition_ == Blockly.TOOLBOX_AT_TOP) {\n      var y = 0;\n    } else {\n      // Because the anchor point of the flyout is on the top, but we want\n      // to align the bottom edge of the flyout with the bottom edge of the\n      // blocklyDiv, we calculate the full height of the div minus the height\n      // of the flyout.\n      var y = targetWorkspaceMetrics.viewHeight +\n          targetWorkspaceMetrics.absoluteTop - this.height_;\n    }\n  }\n  this.positionAt_(this.width_, this.height_, x, y);\n};\n\n/**\n * Create and set the path for the visible boundaries of the flyout.\n * @param {number} width The width of the flyout, not including the\n *     rounded corners.\n * @param {number} height The height of the flyout, not including\n *     rounded corners.\n * @private\n */\nBlockly.HorizontalFlyout.prototype.setBackgroundPath_ = function(width,\n    height) {\n  var atTop = this.toolboxPosition_ == Blockly.TOOLBOX_AT_TOP;\n  // Start at top left.\n  var path = ['M 0,' + (atTop ? 0 : this.CORNER_RADIUS)];\n\n  if (atTop) {\n    // Top.\n    path.push('h', width + 2 * this.CORNER_RADIUS);\n    // Right.\n    path.push('v', height);\n    // Bottom.\n    path.push('a', this.CORNER_RADIUS, this.CORNER_RADIUS, 0, 0, 1,\n        -this.CORNER_RADIUS, this.CORNER_RADIUS);\n    path.push('h', -width);\n    // Left.\n    path.push('a', this.CORNER_RADIUS, this.CORNER_RADIUS, 0, 0, 1,\n        -this.CORNER_RADIUS, -this.CORNER_RADIUS);\n    path.push('z');\n  } else {\n    // Top.\n    path.push('a', this.CORNER_RADIUS, this.CORNER_RADIUS, 0, 0, 1,\n        this.CORNER_RADIUS, -this.CORNER_RADIUS);\n    path.push('h', width);\n    // Right.\n    path.push('a', this.CORNER_RADIUS, this.CORNER_RADIUS, 0, 0, 1,\n        this.CORNER_RADIUS, this.CORNER_RADIUS);\n    path.push('v', height);\n    // Bottom.\n    path.push('h', -width - 2 * this.CORNER_RADIUS);\n    // Left.\n    path.push('z');\n  }\n  this.svgBackground_.setAttribute('d', path.join(' '));\n};\n\n/**\n * Scroll the flyout to the top.\n */\nBlockly.HorizontalFlyout.prototype.scrollToStart = function() {\n  this.scrollbar.set(this.RTL ? Infinity : 0);\n};\n\n/**\n * Scroll the flyout.\n * @param {!Event} e Mouse wheel scroll event.\n * @protected\n */\nBlockly.HorizontalFlyout.prototype.wheel_ = function(e) {\n  var scrollDelta = Blockly.utils.getScrollDeltaPixels(e);\n  var delta = scrollDelta.x || scrollDelta.y;\n\n  if (delta) {\n    var metrics = this.getMetrics_();\n    var pos = metrics.viewLeft + delta;\n    var limit = metrics.contentWidth - metrics.viewWidth;\n    pos = Math.min(pos, limit);\n    pos = Math.max(pos, 0);\n    this.scrollbar.set(pos);\n    // When the flyout moves from a wheel event, hide WidgetDiv and DropDownDiv.\n    Blockly.WidgetDiv.hide();\n    Blockly.DropDownDiv.hideWithoutAnimation();\n  }\n\n  // Don't scroll the page.\n  e.preventDefault();\n  // Don't propagate mousewheel event (zooming).\n  e.stopPropagation();\n};\n\n/**\n * Lay out the blocks in the flyout.\n * @param {!Array.<!Object>} contents The blocks and buttons to lay out.\n * @param {!Array.<number>} gaps The visible gaps between blocks.\n * @protected\n */\nBlockly.HorizontalFlyout.prototype.layout_ = function(contents, gaps) {\n  this.workspace_.scale = this.targetWorkspace.scale;\n  var margin = this.MARGIN;\n  var cursorX = margin + this.tabWidth_;\n  var cursorY = margin;\n  if (this.RTL) {\n    contents = contents.reverse();\n  }\n\n  for (var i = 0, item; (item = contents[i]); i++) {\n    if (item.type == 'block') {\n      var block = item.block;\n      var allBlocks = block.getDescendants(false);\n      for (var j = 0, child; (child = allBlocks[j]); j++) {\n        // Mark blocks as being inside a flyout.  This is used to detect and\n        // prevent the closure of the flyout if the user right-clicks on such a\n        // block.\n        child.isInFlyout = true;\n      }\n      block.render();\n      var root = block.getSvgRoot();\n      var blockHW = block.getHeightWidth();\n\n      // Figure out where to place the block.\n      var tab = block.outputConnection ? this.tabWidth_ : 0;\n      if (this.RTL) {\n        var moveX = cursorX + blockHW.width;\n      } else {\n        var moveX = cursorX - tab;\n      }\n      block.moveBy(moveX, cursorY);\n\n      var rect = this.createRect_(block, moveX, cursorY, blockHW, i);\n      cursorX += (blockHW.width + gaps[i]);\n\n      this.addBlockListeners_(root, block, rect);\n    } else if (item.type == 'button') {\n      this.initFlyoutButton_(item.button, cursorX, cursorY);\n      cursorX += (item.button.width + gaps[i]);\n    }\n  }\n};\n\n/**\n * Determine if a drag delta is toward the workspace, based on the position\n * and orientation of the flyout. This is used in determineDragIntention_ to\n * determine if a new block should be created or if the flyout should scroll.\n * @param {!Blockly.utils.Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at mouse down, in pixel units.\n * @return {boolean} True if the drag is toward the workspace.\n * @package\n */\nBlockly.HorizontalFlyout.prototype.isDragTowardWorkspace = function(\n    currentDragDeltaXY) {\n  var dx = currentDragDeltaXY.x;\n  var dy = currentDragDeltaXY.y;\n  // Direction goes from -180 to 180, with 0 toward the right and 90 on top.\n  var dragDirection = Math.atan2(dy, dx) / Math.PI * 180;\n\n  var range = this.dragAngleRange_;\n  // Check for up or down dragging.\n  if ((dragDirection < 90 + range && dragDirection > 90 - range) ||\n      (dragDirection > -90 - range && dragDirection < -90 + range)) {\n    return true;\n  }\n  return false;\n};\n\n/**\n * Return the deletion rectangle for this flyout in viewport coordinates.\n * @return {Blockly.utils.Rect} Rectangle in which to delete.\n */\nBlockly.HorizontalFlyout.prototype.getClientRect = function() {\n  if (!this.svgGroup_) {\n    return null;\n  }\n\n  var flyoutRect = this.svgGroup_.getBoundingClientRect();\n  // BIG_NUM is offscreen padding so that blocks dragged beyond the shown flyout\n  // area are still deleted.  Must be larger than the largest screen size,\n  // but be smaller than half Number.MAX_SAFE_INTEGER (not available on IE).\n  var BIG_NUM = 1000000000;\n  var top = flyoutRect.top;\n\n  if (this.toolboxPosition_ == Blockly.TOOLBOX_AT_TOP) {\n    var height = flyoutRect.height;\n    return new Blockly.utils.Rect(-BIG_NUM, top + height, -BIG_NUM, BIG_NUM);\n  } else {  // Bottom.\n    return new Blockly.utils.Rect(top, BIG_NUM, -BIG_NUM, BIG_NUM);\n  }\n};\n\n/**\n * Compute height of flyout.  Position mat under each block.\n * For RTL: Lay out the blocks right-aligned.\n * @protected\n */\nBlockly.HorizontalFlyout.prototype.reflowInternal_ = function() {\n  this.workspace_.scale = this.targetWorkspace.scale;\n  var flyoutHeight = 0;\n  var blocks = this.workspace_.getTopBlocks(false);\n  for (var i = 0, block; (block = blocks[i]); i++) {\n    flyoutHeight = Math.max(flyoutHeight, block.getHeightWidth().height);\n  }\n  flyoutHeight += this.MARGIN * 1.5;\n  flyoutHeight *= this.workspace_.scale;\n  flyoutHeight += Blockly.Scrollbar.scrollbarThickness;\n\n  if (this.height_ != flyoutHeight) {\n    for (var i = 0, block; (block = blocks[i]); i++) {\n      if (block.flyoutRect_) {\n        this.moveRectToBlock_(block.flyoutRect_, block);\n      }\n    }\n\n    if (this.targetWorkspace.toolboxPosition == this.toolboxPosition_ &&\n        this.toolboxPosition_ == Blockly.TOOLBOX_AT_TOP &&\n        !this.targetWorkspace.getToolbox()) {\n      // This flyout is a simple toolbox. Reposition the workspace so that (0,0)\n      // is in the correct position relative to the new absolute edge (ie\n      // toolbox edge).\n      this.targetWorkspace.translate(\n          this.targetWorkspace.scrollX, this.targetWorkspace.scrollY + flyoutHeight);\n    }\n\n    // Record the height for .getMetrics_ and .position.\n    this.height_ = flyoutHeight;\n    this.position();\n  }\n};\n\nBlockly.registry.register(Blockly.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,\n    Blockly.registry.DEFAULT, Blockly.HorizontalFlyout);\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Layout code for a vertical variant of the flyout.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.VerticalFlyout');\n\ngoog.require('Blockly.Block');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Flyout');\ngoog.require('Blockly.registry');\ngoog.require('Blockly.Scrollbar');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Rect');\ngoog.require('Blockly.utils.userAgent');\ngoog.require('Blockly.WidgetDiv');\n\ngoog.requireType('Blockly.utils.Metrics');\n\n\n/**\n * Class for a flyout.\n * @param {!Blockly.Options} workspaceOptions Dictionary of options for the\n *     workspace.\n * @extends {Blockly.Flyout}\n * @constructor\n */\nBlockly.VerticalFlyout = function(workspaceOptions) {\n  Blockly.VerticalFlyout.superClass_.constructor.call(this, workspaceOptions);\n};\nBlockly.utils.object.inherits(Blockly.VerticalFlyout, Blockly.Flyout);\n\n/**\n * The name of the vertical flyout in the registry.\n * @type {string}\n */\nBlockly.VerticalFlyout.registryName = 'verticalFlyout';\n\n/**\n * Return an object with all the metrics required to size scrollbars for the\n * flyout.  The following properties are computed:\n * .viewHeight: Height of the visible rectangle,\n * .viewWidth: Width of the visible rectangle,\n * .contentHeight: Height of the contents,\n * .contentWidth: Width of the contents,\n * .viewTop: Offset of top edge of visible rectangle from parent,\n * .contentTop: Offset of the top-most content from the y=0 coordinate,\n * .absoluteTop: Top-edge of view.\n * .viewLeft: Offset of the left edge of visible rectangle from parent,\n * .contentLeft: Offset of the left-most content from the x=0 coordinate,\n * .absoluteLeft: Left-edge of view.\n * @return {Blockly.utils.Metrics} Contains size and position metrics of the\n *     flyout.\n * @protected\n */\nBlockly.VerticalFlyout.prototype.getMetrics_ = function() {\n  if (!this.isVisible()) {\n    // Flyout is hidden.\n    return null;\n  }\n\n  try {\n    var optionBox = this.workspace_.getCanvas().getBBox();\n  } catch (e) {\n    // Firefox has trouble with hidden elements (Bug 528969).\n    var optionBox = {height: 0, y: 0, width: 0, x: 0};\n  }\n\n  // Padding for the end of the scrollbar.\n  var absoluteTop = this.SCROLLBAR_PADDING;\n  var absoluteLeft = 0;\n\n  var viewHeight = this.height_ - 2 * this.SCROLLBAR_PADDING;\n  var viewWidth = this.width_;\n  if (!this.RTL) {\n    viewWidth -= this.SCROLLBAR_PADDING;\n  }\n\n  var metrics = {\n    contentHeight: optionBox.height * this.workspace_.scale + 2 * this.MARGIN,\n    contentWidth: optionBox.width * this.workspace_.scale + 2 * this.MARGIN,\n    contentTop: optionBox.y,\n    contentLeft: optionBox.x,\n\n    viewHeight: viewHeight,\n    viewWidth: viewWidth,\n    viewTop: -this.workspace_.scrollY + optionBox.y,\n    viewLeft: -this.workspace_.scrollX,\n\n    absoluteTop: absoluteTop,\n    absoluteLeft: absoluteLeft\n  };\n  return metrics;\n};\n\n/**\n * Sets the translation of the flyout to match the scrollbars.\n * @param {!{x:number,y:number}} xyRatio Contains a y property which is a float\n *     between 0 and 1 specifying the degree of scrolling and a\n *     similar x property.\n * @protected\n */\nBlockly.VerticalFlyout.prototype.setMetrics_ = function(xyRatio) {\n  var metrics = this.getMetrics_();\n  // This is a fix to an apparent race condition.\n  if (!metrics) {\n    return;\n  }\n  if (typeof xyRatio.y == 'number') {\n    this.workspace_.scrollY = -metrics.contentHeight * xyRatio.y;\n  }\n  this.workspace_.translate(this.workspace_.scrollX + metrics.absoluteLeft,\n      this.workspace_.scrollY + metrics.absoluteTop);\n};\n\n/**\n * Move the flyout to the edge of the workspace.\n */\nBlockly.VerticalFlyout.prototype.position = function() {\n  if (!this.isVisible()) {\n    return;\n  }\n  var targetWorkspaceMetrics = this.targetWorkspace.getMetrics();\n  if (!targetWorkspaceMetrics) {\n    // Hidden components will return null.\n    return;\n  }\n  // Record the height for Blockly.Flyout.getMetrics_\n  this.height_ = targetWorkspaceMetrics.viewHeight;\n\n  var edgeWidth = this.width_ - this.CORNER_RADIUS;\n  var edgeHeight = targetWorkspaceMetrics.viewHeight - 2 * this.CORNER_RADIUS;\n  this.setBackgroundPath_(edgeWidth, edgeHeight);\n\n  // Y is always 0 since this is a vertical flyout.\n  var y = 0;\n  // If this flyout is the toolbox flyout.\n  if (this.targetWorkspace.toolboxPosition == this.toolboxPosition_) {\n    // If there is a category toolbox.\n    if (targetWorkspaceMetrics.toolboxWidth) {\n      if (this.toolboxPosition_ == Blockly.TOOLBOX_AT_LEFT) {\n        var x = targetWorkspaceMetrics.toolboxWidth;\n      } else {\n        var x = targetWorkspaceMetrics.viewWidth - this.width_;\n      }\n    } else {\n      if (this.toolboxPosition_ == Blockly.TOOLBOX_AT_LEFT) {\n        var x = 0;\n      } else {\n        var x = targetWorkspaceMetrics.viewWidth;\n      }\n    }\n  } else {\n    if (this.toolboxPosition_ == Blockly.TOOLBOX_AT_LEFT) {\n      var x = 0;\n    } else {\n      // Because the anchor point of the flyout is on the left, but we want\n      // to align the right edge of the flyout with the right edge of the\n      // blocklyDiv, we calculate the full width of the div minus the width\n      // of the flyout.\n      var x = targetWorkspaceMetrics.viewWidth +\n          targetWorkspaceMetrics.absoluteLeft - this.width_;\n    }\n  }\n  this.positionAt_(this.width_, this.height_, x, y);\n};\n\n/**\n * Create and set the path for the visible boundaries of the flyout.\n * @param {number} width The width of the flyout, not including the\n *     rounded corners.\n * @param {number} height The height of the flyout, not including\n *     rounded corners.\n * @private\n */\nBlockly.VerticalFlyout.prototype.setBackgroundPath_ = function(width, height) {\n  var atRight = this.toolboxPosition_ == Blockly.TOOLBOX_AT_RIGHT;\n  var totalWidth = width + this.CORNER_RADIUS;\n\n  // Decide whether to start on the left or right.\n  var path = ['M ' + (atRight ? totalWidth : 0) + ',0'];\n  // Top.\n  path.push('h', atRight ? -width : width);\n  // Rounded corner.\n  path.push('a', this.CORNER_RADIUS, this.CORNER_RADIUS, 0, 0,\n      atRight ? 0 : 1,\n      atRight ? -this.CORNER_RADIUS : this.CORNER_RADIUS,\n      this.CORNER_RADIUS);\n  // Side closest to workspace.\n  path.push('v', Math.max(0, height));\n  // Rounded corner.\n  path.push('a', this.CORNER_RADIUS, this.CORNER_RADIUS, 0, 0,\n      atRight ? 0 : 1,\n      atRight ? this.CORNER_RADIUS : -this.CORNER_RADIUS,\n      this.CORNER_RADIUS);\n  // Bottom.\n  path.push('h', atRight ? width : -width);\n  path.push('z');\n  this.svgBackground_.setAttribute('d', path.join(' '));\n};\n\n/**\n * Scroll the flyout to the top.\n */\nBlockly.VerticalFlyout.prototype.scrollToStart = function() {\n  this.scrollbar.set(0);\n};\n\n/**\n * Scroll the flyout.\n * @param {!Event} e Mouse wheel scroll event.\n * @protected\n */\nBlockly.VerticalFlyout.prototype.wheel_ = function(e) {\n  var scrollDelta = Blockly.utils.getScrollDeltaPixels(e);\n\n  if (scrollDelta.y) {\n    var metrics = this.getMetrics_();\n    var pos = (metrics.viewTop - metrics.contentTop) + scrollDelta.y;\n    var limit = metrics.contentHeight - metrics.viewHeight;\n    pos = Math.min(pos, limit);\n    pos = Math.max(pos, 0);\n    this.scrollbar.set(pos);\n    // When the flyout moves from a wheel event, hide WidgetDiv and DropDownDiv.\n    Blockly.WidgetDiv.hide();\n    Blockly.DropDownDiv.hideWithoutAnimation();\n  }\n\n  // Don't scroll the page.\n  e.preventDefault();\n  // Don't propagate mousewheel event (zooming).\n  e.stopPropagation();\n};\n\n/**\n * Lay out the blocks in the flyout.\n * @param {!Array.<!Object>} contents The blocks and buttons to lay out.\n * @param {!Array.<number>} gaps The visible gaps between blocks.\n * @protected\n */\nBlockly.VerticalFlyout.prototype.layout_ = function(contents, gaps) {\n  this.workspace_.scale = this.targetWorkspace.scale;\n  var margin = this.MARGIN;\n  var cursorX = this.RTL ? margin : margin + this.tabWidth_;\n  var cursorY = margin;\n\n  for (var i = 0, item; (item = contents[i]); i++) {\n    if (item.type == 'block') {\n      var block = item.block;\n      var allBlocks = block.getDescendants(false);\n      for (var j = 0, child; (child = allBlocks[j]); j++) {\n        // Mark blocks as being inside a flyout.  This is used to detect and\n        // prevent the closure of the flyout if the user right-clicks on such a\n        // block.\n        child.isInFlyout = true;\n      }\n      block.render();\n      var root = block.getSvgRoot();\n      var blockHW = block.getHeightWidth();\n      var moveX = block.outputConnection ? cursorX - this.tabWidth_ : cursorX;\n      block.moveBy(moveX, cursorY);\n\n      var rect = this.createRect_(block,\n          this.RTL ? moveX - blockHW.width : moveX, cursorY, blockHW, i);\n\n      this.addBlockListeners_(root, block, rect);\n\n      cursorY += blockHW.height + gaps[i];\n    } else if (item.type == 'button') {\n      this.initFlyoutButton_(item.button, cursorX, cursorY);\n      cursorY += item.button.height + gaps[i];\n    }\n  }\n};\n\n/**\n * Determine if a drag delta is toward the workspace, based on the position\n * and orientation of the flyout. This is used in determineDragIntention_ to\n * determine if a new block should be created or if the flyout should scroll.\n * @param {!Blockly.utils.Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at mouse down, in pixel units.\n * @return {boolean} True if the drag is toward the workspace.\n * @package\n */\nBlockly.VerticalFlyout.prototype.isDragTowardWorkspace = function(\n    currentDragDeltaXY) {\n  var dx = currentDragDeltaXY.x;\n  var dy = currentDragDeltaXY.y;\n  // Direction goes from -180 to 180, with 0 toward the right and 90 on top.\n  var dragDirection = Math.atan2(dy, dx) / Math.PI * 180;\n\n  var range = this.dragAngleRange_;\n  // Check for left or right dragging.\n  if ((dragDirection < range && dragDirection > -range) ||\n      (dragDirection < -180 + range || dragDirection > 180 - range)) {\n    return true;\n  }\n  return false;\n};\n\n/**\n * Return the deletion rectangle for this flyout in viewport coordinates.\n * @return {Blockly.utils.Rect} Rectangle in which to delete.\n */\nBlockly.VerticalFlyout.prototype.getClientRect = function() {\n  if (!this.svgGroup_) {\n    return null;\n  }\n\n  var flyoutRect = this.svgGroup_.getBoundingClientRect();\n  // BIG_NUM is offscreen padding so that blocks dragged beyond the shown flyout\n  // area are still deleted.  Must be larger than the largest screen size,\n  // but be smaller than half Number.MAX_SAFE_INTEGER (not available on IE).\n  var BIG_NUM = 1000000000;\n  var left = flyoutRect.left;\n\n  if (this.toolboxPosition_ == Blockly.TOOLBOX_AT_LEFT) {\n    var width = flyoutRect.width;\n    return new Blockly.utils.Rect(-BIG_NUM, BIG_NUM, -BIG_NUM, left + width);\n  } else {  // Right\n    return new Blockly.utils.Rect(-BIG_NUM, BIG_NUM, left, BIG_NUM);\n  }\n};\n\n/**\n * Compute width of flyout.  Position mat under each block.\n * For RTL: Lay out the blocks and buttons to be right-aligned.\n * @protected\n */\nBlockly.VerticalFlyout.prototype.reflowInternal_ = function() {\n  this.workspace_.scale = this.targetWorkspace.scale;\n  var flyoutWidth = 0;\n  var blocks = this.workspace_.getTopBlocks(false);\n  for (var i = 0, block; (block = blocks[i]); i++) {\n    var width = block.getHeightWidth().width;\n    if (block.outputConnection) {\n      width -= this.tabWidth_;\n    }\n    flyoutWidth = Math.max(flyoutWidth, width);\n  }\n  for (var i = 0, button; (button = this.buttons_[i]); i++) {\n    flyoutWidth = Math.max(flyoutWidth, button.width);\n  }\n  flyoutWidth += this.MARGIN * 1.5 + this.tabWidth_;\n  flyoutWidth *= this.workspace_.scale;\n  flyoutWidth += Blockly.Scrollbar.scrollbarThickness;\n\n  if (this.width_ != flyoutWidth) {\n    for (var i = 0, block; (block = blocks[i]); i++) {\n      if (this.RTL) {\n        // With the flyoutWidth known, right-align the blocks.\n        var oldX = block.getRelativeToSurfaceXY().x;\n        var newX = flyoutWidth / this.workspace_.scale - this.MARGIN;\n        if (!block.outputConnection) {\n          newX -= this.tabWidth_;\n        }\n        block.moveBy(newX - oldX, 0);\n      }\n      if (block.flyoutRect_) {\n        this.moveRectToBlock_(block.flyoutRect_, block);\n      }\n    }\n    if (this.RTL) {\n      // With the flyoutWidth known, right-align the buttons.\n      for (var i = 0, button; (button = this.buttons_[i]); i++) {\n        var y = button.getPosition().y;\n        var x = flyoutWidth / this.workspace_.scale - button.width -\n            this.MARGIN - this.tabWidth_;\n        button.moveTo(x, y);\n      }\n    }\n\n    if (this.targetWorkspace.toolboxPosition == this.toolboxPosition_ &&\n        this.toolboxPosition_ == Blockly.TOOLBOX_AT_LEFT &&\n        !this.targetWorkspace.getToolbox()) {\n      // This flyout is a simple toolbox. Reposition the workspace so that (0,0)\n      // is in the correct position relative to the new absolute edge (ie\n      // toolbox edge).\n      this.targetWorkspace.translate(\n          this.targetWorkspace.scrollX + flyoutWidth, this.targetWorkspace.scrollY);\n    }\n\n    // Record the width for .getMetrics_ and .position.\n    this.width_ = flyoutWidth;\n    this.position();\n  }\n};\n\nBlockly.registry.register(Blockly.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,\n    Blockly.registry.DEFAULT, Blockly.VerticalFlyout);\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class for a button in the flyout.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.FlyoutButton');\n\ngoog.require('Blockly.Css');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for a button in the flyout.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace in which to place this\n *     button.\n * @param {!Blockly.WorkspaceSvg} targetWorkspace The flyout's target workspace.\n * @param {!Blockly.utils.toolbox.ButtonOrLabelInfo} json\n *    The JSON specifying the label/button.\n * @param {boolean} isLabel Whether this button should be styled as a label.\n * @constructor\n * @package\n */\nBlockly.FlyoutButton = function(workspace, targetWorkspace, json, isLabel) {\n  // Labels behave the same as buttons, but are styled differently.\n\n  /**\n   * @type {!Blockly.WorkspaceSvg}\n   * @private\n   */\n  this.workspace_ = workspace;\n\n  /**\n   * @type {!Blockly.WorkspaceSvg}\n   * @private\n   */\n  this.targetWorkspace_ = targetWorkspace;\n\n  /**\n   * @type {string}\n   * @private\n   */\n  this.text_ = json['text'];\n\n  /**\n   * @type {!Blockly.utils.Coordinate}\n   * @private\n   */\n  this.position_ = new Blockly.utils.Coordinate(0, 0);\n\n  /**\n   * Whether this button should be styled as a label.\n   * @type {boolean}\n   * @private\n   */\n  this.isLabel_ = isLabel;\n\n  /**\n   * The key to the function called when this button is clicked.\n   * @type {string}\n   * @private\n   */\n  this.callbackKey_ = json['callbackKey'] ||\n  /* Check the lower case version too to satisfy IE */\n                      json['callbackkey'];\n\n  /**\n   * If specified, a CSS class to add to this button.\n   * @type {?string}\n   * @private\n   */\n  this.cssClass_ = json['web-class'] || null;\n\n  /**\n   * Mouse up event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onMouseUpWrapper_ = null;\n\n  /**\n   * The JSON specifying the label / button.\n   * @type {!Blockly.utils.toolbox.ButtonOrLabelInfo}\n   */\n  this.info = json;\n};\n\n/**\n * The horizontal margin around the text in the button.\n */\nBlockly.FlyoutButton.MARGIN_X = 5;\n\n/**\n * The vertical margin around the text in the button.\n */\nBlockly.FlyoutButton.MARGIN_Y = 2;\n\n/**\n * The width of the button's rect.\n * @type {number}\n */\nBlockly.FlyoutButton.prototype.width = 0;\n\n/**\n * The height of the button's rect.\n * @type {number}\n */\nBlockly.FlyoutButton.prototype.height = 0;\n\n/**\n * Create the button elements.\n * @return {!SVGElement} The button's SVG group.\n */\nBlockly.FlyoutButton.prototype.createDom = function() {\n  var cssClass = this.isLabel_ ? 'blocklyFlyoutLabel' : 'blocklyFlyoutButton';\n  if (this.cssClass_) {\n    cssClass += ' ' + this.cssClass_;\n  }\n\n  this.svgGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G, {'class': cssClass},\n      this.workspace_.getCanvas());\n\n  if (!this.isLabel_) {\n    // Shadow rectangle (light source does not mirror in RTL).\n    var shadow = Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.RECT,\n        {\n          'class': 'blocklyFlyoutButtonShadow',\n          'rx': 4, 'ry': 4, 'x': 1, 'y': 1\n        },\n        this.svgGroup_);\n  }\n  // Background rectangle.\n  var rect = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {\n        'class': this.isLabel_ ?\n            'blocklyFlyoutLabelBackground' : 'blocklyFlyoutButtonBackground',\n        'rx': 4, 'ry': 4\n      },\n      this.svgGroup_);\n\n  var svgText = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.TEXT,\n      {\n        'class': this.isLabel_ ? 'blocklyFlyoutLabelText' : 'blocklyText',\n        'x': 0,\n        'y': 0,\n        'text-anchor': 'middle'\n      },\n      this.svgGroup_);\n  var text = Blockly.utils.replaceMessageReferences(this.text_);\n  if (this.workspace_.RTL) {\n    // Force text to be RTL by adding an RLM.\n    text += '\\u200F';\n  }\n  svgText.textContent = text;\n  if (this.isLabel_) {\n    this.svgText_ = svgText;\n    this.workspace_.getThemeManager().subscribe(this.svgText_,\n        'flyoutForegroundColour', 'fill');\n  }\n\n  var fontSize = Blockly.utils.style.getComputedStyle(svgText, 'fontSize');\n  var fontWeight = Blockly.utils.style.getComputedStyle(svgText, 'fontWeight');\n  var fontFamily = Blockly.utils.style.getComputedStyle(svgText, 'fontFamily');\n  this.width = Blockly.utils.dom.getFastTextWidthWithSizeString(svgText,\n      fontSize, fontWeight, fontFamily);\n  var fontMetrics = Blockly.utils.dom.measureFontMetrics(text, fontSize,\n      fontWeight, fontFamily);\n  this.height = fontMetrics.height;\n\n  if (!this.isLabel_) {\n    this.width += 2 * Blockly.FlyoutButton.MARGIN_X;\n    this.height += 2 * Blockly.FlyoutButton.MARGIN_Y;\n    shadow.setAttribute('width', this.width);\n    shadow.setAttribute('height', this.height);\n  }\n  rect.setAttribute('width', this.width);\n  rect.setAttribute('height', this.height);\n\n  svgText.setAttribute('x', this.width / 2);\n  svgText.setAttribute('y', this.height / 2 - fontMetrics.height / 2 +\n      fontMetrics.baseline);\n\n  this.updateTransform_();\n\n  this.onMouseUpWrapper_ = Blockly.bindEventWithChecks_(\n      this.svgGroup_, 'mouseup', this, this.onMouseUp_);\n  return this.svgGroup_;\n};\n\n/**\n * Correctly position the flyout button and make it visible.\n */\nBlockly.FlyoutButton.prototype.show = function() {\n  this.updateTransform_();\n  this.svgGroup_.setAttribute('display', 'block');\n};\n\n/**\n * Update SVG attributes to match internal state.\n * @private\n */\nBlockly.FlyoutButton.prototype.updateTransform_ = function() {\n  this.svgGroup_.setAttribute('transform',\n      'translate(' + this.position_.x + ',' + this.position_.y + ')');\n};\n\n/**\n * Move the button to the given x, y coordinates.\n * @param {number} x The new x coordinate.\n * @param {number} y The new y coordinate.\n */\nBlockly.FlyoutButton.prototype.moveTo = function(x, y) {\n  this.position_.x = x;\n  this.position_.y = y;\n  this.updateTransform_();\n};\n\n/**\n * @return {boolean} Whether or not the button is a label.\n */\nBlockly.FlyoutButton.prototype.isLabel = function() {\n  return this.isLabel_;\n};\n\n/**\n * Location of the button.\n * @return {!Blockly.utils.Coordinate} x, y coordinates.\n * @package\n */\nBlockly.FlyoutButton.prototype.getPosition = function() {\n  return this.position_;\n};\n\n/**\n * @return {string} Text of the button.\n */\nBlockly.FlyoutButton.prototype.getButtonText = function() {\n  return this.text_;\n};\n\n/**\n * Get the button's target workspace.\n * @return {!Blockly.WorkspaceSvg} The target workspace of the flyout where this\n *     button resides.\n */\nBlockly.FlyoutButton.prototype.getTargetWorkspace = function() {\n  return this.targetWorkspace_;\n};\n\n/**\n * Dispose of this button.\n */\nBlockly.FlyoutButton.prototype.dispose = function() {\n  if (this.onMouseUpWrapper_) {\n    Blockly.unbindEvent_(this.onMouseUpWrapper_);\n  }\n  if (this.svgGroup_) {\n    Blockly.utils.dom.removeNode(this.svgGroup_);\n  }\n  if (this.svgText_) {\n    this.workspace_.getThemeManager().unsubscribe(this.svgText_);\n  }\n};\n\n/**\n * Do something when the button is clicked.\n * @param {!Event} e Mouse up event.\n * @private\n */\nBlockly.FlyoutButton.prototype.onMouseUp_ = function(e) {\n  var gesture = this.targetWorkspace_.getGesture(e);\n  if (gesture) {\n    gesture.cancel();\n  }\n\n  if (this.isLabel_ && this.callbackKey_) {\n    console.warn('Labels should not have callbacks. Label text: ' + this.text_);\n  } else if (!this.isLabel_ && !(this.callbackKey_ &&\n      this.targetWorkspace_.getButtonCallback(this.callbackKey_))) {\n    console.warn('Buttons should have callbacks. Button text: ' + this.text_);\n  } else if (!this.isLabel_) {\n    this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this);\n  }\n};\n\n/**\n * CSS for buttons and labels.  See css.js for use.\n */\nBlockly.Css.register([\n  /* eslint-disable indent */\n  '.blocklyFlyoutButton {',\n    'fill: #888;',\n    'cursor: default;',\n  '}',\n\n  '.blocklyFlyoutButtonShadow {',\n    'fill: #666;',\n  '}',\n\n  '.blocklyFlyoutButton:hover {',\n    'fill: #aaa;',\n  '}',\n\n  '.blocklyFlyoutLabel {',\n    'cursor: default;',\n  '}',\n\n  '.blocklyFlyoutLabelBackground {',\n    'opacity: 0;',\n  '}',\n  /* eslint-enable indent */\n]);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility functions for generating executable code from\n * Blockly code.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Generator');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Block');\n\n\n/**\n * Class for a code generator that translates the blocks into a language.\n * @param {string} name Language name of this generator.\n * @constructor\n */\nBlockly.Generator = function(name) {\n  this.name_ = name;\n  this.FUNCTION_NAME_PLACEHOLDER_REGEXP_ =\n      new RegExp(this.FUNCTION_NAME_PLACEHOLDER_, 'g');\n};\n\n/**\n * Category to separate generated function names from variables and procedures.\n */\nBlockly.Generator.NAME_TYPE = 'generated_function';\n\n/**\n * Arbitrary code to inject into locations that risk causing infinite loops.\n * Any instances of '%1' will be replaced by the block ID that failed.\n * E.g. '  checkTimeout(%1);\\n'\n * @type {?string}\n */\nBlockly.Generator.prototype.INFINITE_LOOP_TRAP = null;\n\n/**\n * Arbitrary code to inject before every statement.\n * Any instances of '%1' will be replaced by the block ID of the statement.\n * E.g. 'highlight(%1);\\n'\n * @type {?string}\n */\nBlockly.Generator.prototype.STATEMENT_PREFIX = null;\n\n/**\n * Arbitrary code to inject after every statement.\n * Any instances of '%1' will be replaced by the block ID of the statement.\n * E.g. 'highlight(%1);\\n'\n * @type {?string}\n */\nBlockly.Generator.prototype.STATEMENT_SUFFIX = null;\n\n/**\n * The method of indenting.  Defaults to two spaces, but language generators\n * may override this to increase indent or change to tabs.\n * @type {string}\n */\nBlockly.Generator.prototype.INDENT = '  ';\n\n/**\n * Maximum length for a comment before wrapping.  Does not account for\n * indenting level.\n * @type {number}\n */\nBlockly.Generator.prototype.COMMENT_WRAP = 60;\n\n/**\n * List of outer-inner pairings that do NOT require parentheses.\n * @type {!Array.<!Array.<number>>}\n */\nBlockly.Generator.prototype.ORDER_OVERRIDES = [];\n\n/**\n * Generate code for all blocks in the workspace to the specified language.\n * @param {Blockly.Workspace} workspace Workspace to generate code from.\n * @return {string} Generated code.\n */\nBlockly.Generator.prototype.workspaceToCode = function(workspace) {\n  if (!workspace) {\n    // Backwards compatibility from before there could be multiple workspaces.\n    console.warn('No workspace specified in workspaceToCode call.  Guessing.');\n    workspace = Blockly.getMainWorkspace();\n  }\n  var code = [];\n  this.init(workspace);\n  var blocks = workspace.getTopBlocks(true);\n  for (var i = 0, block; (block = blocks[i]); i++) {\n    var line = this.blockToCode(block);\n    if (Array.isArray(line)) {\n      // Value blocks return tuples of code and operator order.\n      // Top-level blocks don't care about operator order.\n      line = line[0];\n    }\n    if (line) {\n      if (block.outputConnection) {\n        // This block is a naked value.  Ask the language's code generator if\n        // it wants to append a semicolon, or something.\n        line = this.scrubNakedValue(line);\n        if (this.STATEMENT_PREFIX && !block.suppressPrefixSuffix) {\n          line = this.injectId(this.STATEMENT_PREFIX, block) + line;\n        }\n        if (this.STATEMENT_SUFFIX && !block.suppressPrefixSuffix) {\n          line = line + this.injectId(this.STATEMENT_SUFFIX, block);\n        }\n      }\n      code.push(line);\n    }\n  }\n  code = code.join('\\n');  // Blank line between each section.\n  code = this.finish(code);\n  // Final scrubbing of whitespace.\n  code = code.replace(/^\\s+\\n/, '');\n  code = code.replace(/\\n\\s+$/, '\\n');\n  code = code.replace(/[ \\t]+\\n/g, '\\n');\n  return code;\n};\n\n// The following are some helpful functions which can be used by multiple\n// languages.\n\n/**\n * Prepend a common prefix onto each line of code.\n * Intended for indenting code or adding comment markers.\n * @param {string} text The lines of code.\n * @param {string} prefix The common prefix.\n * @return {string} The prefixed lines of code.\n */\nBlockly.Generator.prototype.prefixLines = function(text, prefix) {\n  return prefix + text.replace(/(?!\\n$)\\n/g, '\\n' + prefix);\n};\n\n/**\n * Recursively spider a tree of blocks, returning all their comments.\n * @param {!Blockly.Block} block The block from which to start spidering.\n * @return {string} Concatenated list of comments.\n */\nBlockly.Generator.prototype.allNestedComments = function(block) {\n  var comments = [];\n  var blocks = block.getDescendants(true);\n  for (var i = 0; i < blocks.length; i++) {\n    var comment = blocks[i].getCommentText();\n    if (comment) {\n      comments.push(comment);\n    }\n  }\n  // Append an empty string to create a trailing line break when joined.\n  if (comments.length) {\n    comments.push('');\n  }\n  return comments.join('\\n');\n};\n\n/**\n * Generate code for the specified block (and attached blocks).\n * @param {Blockly.Block} block The block to generate code for.\n * @param {boolean=} opt_thisOnly True to generate code for only this statement.\n * @return {string|!Array} For statement blocks, the generated code.\n *     For value blocks, an array containing the generated code and an\n *     operator order value.  Returns '' if block is null.\n */\nBlockly.Generator.prototype.blockToCode = function(block, opt_thisOnly) {\n  if (!block) {\n    return '';\n  }\n  if (!block.isEnabled()) {\n    // Skip past this block if it is disabled.\n    return opt_thisOnly ? '' : this.blockToCode(block.getNextBlock());\n  }\n  if (block.isInsertionMarker()) {\n    // Skip past insertion markers.\n    return opt_thisOnly ? '' : this.blockToCode(block.getChildren(false)[0]);\n  }\n\n  var func = this[block.type];\n  if (typeof func != 'function') {\n    throw Error('Language \"' + this.name_ + '\" does not know how to generate ' +\n        ' code for block type \"' + block.type + '\".');\n  }\n  // First argument to func.call is the value of 'this' in the generator.\n  // Prior to 24 September 2013 'this' was the only way to access the block.\n  // The current preferred method of accessing the block is through the second\n  // argument to func.call, which becomes the first parameter to the generator.\n  var code = func.call(block, block);\n  if (Array.isArray(code)) {\n    // Value blocks return tuples of code and operator order.\n    if (!block.outputConnection) {\n      throw TypeError('Expecting string from statement block: ' + block.type);\n    }\n    return [this.scrub_(block, code[0], opt_thisOnly), code[1]];\n  } else if (typeof code == 'string') {\n    if (this.STATEMENT_PREFIX && !block.suppressPrefixSuffix) {\n      code = this.injectId(this.STATEMENT_PREFIX, block) + code;\n    }\n    if (this.STATEMENT_SUFFIX && !block.suppressPrefixSuffix) {\n      code = code + this.injectId(this.STATEMENT_SUFFIX, block);\n    }\n    return this.scrub_(block, code, opt_thisOnly);\n  } else if (code === null) {\n    // Block has handled code generation itself.\n    return '';\n  } else {\n    throw SyntaxError('Invalid code generated: ' + code);\n  }\n};\n\n/**\n * Generate code representing the specified value input.\n * @param {!Blockly.Block} block The block containing the input.\n * @param {string} name The name of the input.\n * @param {number} outerOrder The maximum binding strength (minimum order value)\n *     of any operators adjacent to \"block\".\n * @return {string} Generated code or '' if no blocks are connected or the\n *     specified input does not exist.\n */\nBlockly.Generator.prototype.valueToCode = function(block, name, outerOrder) {\n  if (isNaN(outerOrder)) {\n    throw TypeError('Expecting valid order from block: ' + block.type);\n  }\n  var targetBlock = block.getInputTargetBlock(name);\n  if (!targetBlock) {\n    return '';\n  }\n  var tuple = this.blockToCode(targetBlock);\n  if (tuple === '') {\n    // Disabled block.\n    return '';\n  }\n  // Value blocks must return code and order of operations info.\n  // Statement blocks must only return code.\n  if (!Array.isArray(tuple)) {\n    throw TypeError('Expecting tuple from value block: ' + targetBlock.type);\n  }\n  var code = tuple[0];\n  var innerOrder = tuple[1];\n  if (isNaN(innerOrder)) {\n    throw TypeError('Expecting valid order from value block: ' +\n        targetBlock.type);\n  }\n  if (!code) {\n    return '';\n  }\n\n  // Add parentheses if needed.\n  var parensNeeded = false;\n  var outerOrderClass = Math.floor(outerOrder);\n  var innerOrderClass = Math.floor(innerOrder);\n  if (outerOrderClass <= innerOrderClass) {\n    if (outerOrderClass == innerOrderClass &&\n        (outerOrderClass == 0 || outerOrderClass == 99)) {\n      // Don't generate parens around NONE-NONE and ATOMIC-ATOMIC pairs.\n      // 0 is the atomic order, 99 is the none order.  No parentheses needed.\n      // In all known languages multiple such code blocks are not order\n      // sensitive.  In fact in Python ('a' 'b') 'c' would fail.\n    } else {\n      // The operators outside this code are stronger than the operators\n      // inside this code.  To prevent the code from being pulled apart,\n      // wrap the code in parentheses.\n      parensNeeded = true;\n      // Check for special exceptions.\n      for (var i = 0; i < this.ORDER_OVERRIDES.length; i++) {\n        if (this.ORDER_OVERRIDES[i][0] == outerOrder &&\n            this.ORDER_OVERRIDES[i][1] == innerOrder) {\n          parensNeeded = false;\n          break;\n        }\n      }\n    }\n  }\n  if (parensNeeded) {\n    // Technically, this should be handled on a language-by-language basis.\n    // However all known (sane) languages use parentheses for grouping.\n    code = '(' + code + ')';\n  }\n  return code;\n};\n\n/**\n * Generate a code string representing the blocks attached to the named\n * statement input. Indent the code.\n * This is mainly used in generators. When trying to generate code to evaluate\n * look at using workspaceToCode or blockToCode.\n * @param {!Blockly.Block} block The block containing the input.\n * @param {string} name The name of the input.\n * @return {string} Generated code or '' if no blocks are connected.\n */\nBlockly.Generator.prototype.statementToCode = function(block, name) {\n  var targetBlock = block.getInputTargetBlock(name);\n  var code = this.blockToCode(targetBlock);\n  // Value blocks must return code and order of operations info.\n  // Statement blocks must only return code.\n  if (typeof code != 'string') {\n    throw TypeError('Expecting code from statement block: ' +\n        (targetBlock && targetBlock.type));\n  }\n  if (code) {\n    code = this.prefixLines(/** @type {string} */ (code), this.INDENT);\n  }\n  return code;\n};\n\n/**\n * Add an infinite loop trap to the contents of a loop.\n * Add statement suffix at the start of the loop block (right after the loop\n * statement executes), and a statement prefix to the end of the loop block\n * (right before the loop statement executes).\n * @param {string} branch Code for loop contents.\n * @param {!Blockly.Block} block Enclosing block.\n * @return {string} Loop contents, with infinite loop trap added.\n */\nBlockly.Generator.prototype.addLoopTrap = function(branch, block) {\n  if (this.INFINITE_LOOP_TRAP) {\n    branch = this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP, block),\n        this.INDENT) + branch;\n  }\n  if (this.STATEMENT_SUFFIX && !block.suppressPrefixSuffix) {\n    branch = this.prefixLines(this.injectId(this.STATEMENT_SUFFIX, block),\n        this.INDENT) + branch;\n  }\n  if (this.STATEMENT_PREFIX && !block.suppressPrefixSuffix) {\n    branch = branch + this.prefixLines(this.injectId(this.STATEMENT_PREFIX,\n        block), this.INDENT);\n  }\n  return branch;\n};\n\n/**\n * Inject a block ID into a message to replace '%1'.\n * Used for STATEMENT_PREFIX, STATEMENT_SUFFIX, and INFINITE_LOOP_TRAP.\n * @param {string} msg Code snippet with '%1'.\n * @param {!Blockly.Block} block Block which has an ID.\n * @return {string} Code snippet with ID.\n */\nBlockly.Generator.prototype.injectId = function(msg, block) {\n  var id = block.id.replace(/\\$/g, '$$$$');  // Issue 251.\n  return msg.replace(/%1/g, '\\'' + id + '\\'');\n};\n\n/**\n * Comma-separated list of reserved words.\n * @type {string}\n * @protected\n */\nBlockly.Generator.prototype.RESERVED_WORDS_ = '';\n\n/**\n * Add one or more words to the list of reserved words for this language.\n * @param {string} words Comma-separated list of words to add to the list.\n *     No spaces.  Duplicates are ok.\n */\nBlockly.Generator.prototype.addReservedWords = function(words) {\n  this.RESERVED_WORDS_ += words + ',';\n};\n\n/**\n * This is used as a placeholder in functions defined using\n * Blockly.Generator.provideFunction_.  It must not be legal code that could\n * legitimately appear in a function definition (or comment), and it must\n * not confuse the regular expression parser.\n * @type {string}\n * @protected\n */\nBlockly.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_ = '{leCUI8hutHZI4480Dc}';\n\n/**\n * A dictionary of definitions to be printed before the code.\n * @type {Object}\n * @protected\n */\nBlockly.Generator.prototype.definitions_;\n\n/**\n * A dictionary mapping desired function names in definitions_ to actual\n * function names (to avoid collisions with user functions).\n * @type {Object}\n * @protected\n */\nBlockly.Generator.prototype.functionNames_;\n\n/**\n * A database of variable names.\n * @type {Blockly.Names}\n * @protected\n */\nBlockly.Generator.prototype.variableDB_;\n\n/**\n * Define a function to be included in the generated code.\n * The first time this is called with a given desiredName, the code is\n * saved and an actual name is generated.  Subsequent calls with the\n * same desiredName have no effect but have the same return value.\n *\n * It is up to the caller to make sure the same desiredName is not\n * used for different code values.\n *\n * The code gets output when Blockly.Generator.finish() is called.\n *\n * @param {string} desiredName The desired name of the function (e.g., isPrime).\n * @param {!Array.<string>} code A list of statements.  Use '  ' for indents.\n * @return {string} The actual name of the new function.  This may differ\n *     from desiredName if the former has already been taken by the user.\n * @protected\n */\nBlockly.Generator.prototype.provideFunction_ = function(desiredName, code) {\n  if (!this.definitions_[desiredName]) {\n    var functionName = this.variableDB_.getDistinctName(desiredName,\n        Blockly.PROCEDURE_CATEGORY_NAME);\n    this.functionNames_[desiredName] = functionName;\n    var codeText = code.join('\\n').replace(\n        this.FUNCTION_NAME_PLACEHOLDER_REGEXP_, functionName);\n    // Change all '  ' indents into the desired indent.\n    // To avoid an infinite loop of replacements, change all indents to '\\0'\n    // character first, then replace them all with the indent.\n    // We are assuming that no provided functions contain a literal null char.\n    var oldCodeText;\n    while (oldCodeText != codeText) {\n      oldCodeText = codeText;\n      codeText = codeText.replace(/^(( {2})*) {2}/gm, '$1\\0');\n    }\n    codeText = codeText.replace(/\\0/g, this.INDENT);\n    this.definitions_[desiredName] = codeText;\n  }\n  return this.functionNames_[desiredName];\n};\n\n/**\n * Hook for code to run before code generation starts.\n * Subclasses may override this, e.g. to initialise the database of variable\n * names.\n * @param {!Blockly.Workspace} _workspace Workspace to generate code from.\n */\nBlockly.Generator.prototype.init = function(_workspace) {\n  // Optionally override\n};\n\n/**\n * Common tasks for generating code from blocks.  This is called from\n * blockToCode and is called on every block, not just top level blocks.\n * Subclasses may override this, e.g. to generate code for statements following\n * the block, or to handle comments for the specified block and any connected\n * value blocks.\n * @param {!Blockly.Block} _block The current block.\n * @param {string} code The code created for this block.\n * @param {boolean=} _opt_thisOnly True to generate code for only this\n *     statement.\n * @return {string} Code with comments and subsequent blocks added.\n * @protected\n */\nBlockly.Generator.prototype.scrub_ = function(_block, code, _opt_thisOnly) {\n  // Optionally override\n  return code;\n};\n\n/**\n * Hook for code to run at end of code generation.\n * Subclasses may override this, e.g. to prepend the generated code with the\n * variable definitions.\n * @param {string} code Generated code.\n * @return {string} Completed code.\n */\nBlockly.Generator.prototype.finish = function(code) {\n  // Optionally override\n  return code;\n};\n\n/**\n * Naked values are top-level blocks with outputs that aren't plugged into\n * anything.\n * Subclasses may override this, e.g. if their language does not allow\n * naked values.\n * @param {string} line Line of generated code.\n * @return {string} Legal line of code.\n */\nBlockly.Generator.prototype.scrubNakedValue = function(line) {\n  // Optionally override\n  return line;\n};\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An item in the toolbox.\n * @author aschmiedt@google.com (Abby Schmiedt)\n */\n'use strict';\n\ngoog.provide('Blockly.ToolboxItem');\n\ngoog.requireType('Blockly.IToolbox');\ngoog.requireType('Blockly.IToolboxItem');\ngoog.requireType('Blockly.utils.toolbox');\ngoog.requireType('Blockly.WorkspaceSvg');\n\n/**\n * Class for an item in the toolbox.\n * @param {!Blockly.utils.toolbox.ToolboxItemInfo} toolboxItemDef The JSON defining the\n *     toolbox item.\n * @param {!Blockly.IToolbox} toolbox The toolbox that holds the toolbox item.\n * @param {Blockly.ICollapsibleToolboxItem=} opt_parent The parent toolbox item\n *     or null if the category does not have a parent.\n * @constructor\n * @implements {Blockly.IToolboxItem}\n */\nBlockly.ToolboxItem = function(toolboxItemDef, toolbox, opt_parent) {\n\n  /**\n   * The id for the category.\n   * @type {string}\n   * @protected\n   */\n  this.id_ = toolboxItemDef['toolboxitemid'] || Blockly.utils.IdGenerator.getNextUniqueId();\n\n  /**\n   * The parent of the category.\n   * @type {?Blockly.ICollapsibleToolboxItem}\n   * @protected\n   */\n  this.parent_ = opt_parent || null;\n\n  /**\n   * The level that the category is nested at.\n   * @type {number}\n   * @protected\n   */\n  this.level_ = this.parent_ ? this.parent_.getLevel() + 1 : 0;\n\n  /**\n   * The JSON definition of the toolbox item.\n   * @type {!Blockly.utils.toolbox.ToolboxItemInfo}\n   * @protected\n   */\n  this.toolboxItemDef_ = toolboxItemDef;\n\n  /**\n   * The toolbox this category belongs to.\n   * @type {!Blockly.IToolbox}\n   * @protected\n   */\n  this.parentToolbox_ = toolbox;\n\n  /**\n   * The workspace of the parent toolbox.\n   * @type {!Blockly.WorkspaceSvg}\n   * @protected\n   */\n  this.workspace_ = this.parentToolbox_.getWorkspace();\n};\n\n/**\n * Initializes the toolbox item.\n * This includes creating the dom and updating the state of any items based\n * on the info object.\n * @public\n */\nBlockly.ToolboxItem.prototype.init = function() {\n  // No-op by default.\n};\n\n/**\n * Gets the div for the toolbox item.\n * @return {?Element} The div for the toolbox item.\n * @public\n */\nBlockly.ToolboxItem.prototype.getDiv = function() {\n  return null;\n};\n\n/**\n * Gets a unique identifier for this toolbox item.\n * @return {string} The id for the toolbox item.\n * @public\n */\nBlockly.ToolboxItem.prototype.getId = function() {\n  return this.id_;\n};\n\n/**\n * Gets the parent if the toolbox item is nested.\n * @return {?Blockly.IToolboxItem} The parent toolbox item, or null if\n *     this toolbox item is not nested.\n * @public\n */\nBlockly.ToolboxItem.prototype.getParent = function() {\n  return null;\n};\n\n/**\n * Gets the nested level of the category.\n * @return {number} The nested level of the category.\n * @package\n */\nBlockly.ToolboxItem.prototype.getLevel = function() {\n  return this.level_;\n};\n\n/**\n * Whether the toolbox item is selectable.\n * @return {boolean} True if the toolbox item can be selected.\n * @public\n */\nBlockly.ToolboxItem.prototype.isSelectable = function() {\n  return false;\n};\n\n/**\n * Whether the toolbox item is collapsible.\n * @return {boolean} True if the toolbox item is collapsible.\n * @public\n */\nBlockly.ToolboxItem.prototype.isCollapsible = function() {\n  return false;\n};\n\n/**\n * Dispose of this toolbox item. No-op by default.\n * @public\n */\nBlockly.ToolboxItem.prototype.dispose = function() {\n};\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A toolbox category used to organize blocks in the toolbox.\n * @author aschmiedt@google.com (Abby Schmiedt)\n */\n'use strict';\n\ngoog.provide('Blockly.ToolboxCategory');\n\ngoog.require('Blockly.registry');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.aria');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.toolbox');\ngoog.require('Blockly.ToolboxItem');\n\ngoog.requireType('Blockly.ICollapsibleToolboxItem');\ngoog.requireType('Blockly.IToolbox');\ngoog.requireType('Blockly.IToolboxItem');\n\n\n/**\n * Class for a category in a toolbox.\n * @param {!Blockly.utils.toolbox.CategoryInfo} categoryDef The information needed\n *     to create a category in the toolbox.\n * @param {!Blockly.IToolbox} toolbox The parent toolbox for the category.\n * @param {Blockly.ICollapsibleToolboxItem=} opt_parent The parent category or null if\n *     the category does not have a parent.\n * @constructor\n * @extends {Blockly.ToolboxItem}\n * @implements {Blockly.ISelectableToolboxItem}\n */\nBlockly.ToolboxCategory = function(categoryDef, toolbox, opt_parent) {\n  Blockly.ToolboxCategory.superClass_.constructor.call(\n      this, categoryDef, toolbox, opt_parent);\n\n  /**\n   * The name that will be displayed on the category.\n   * @type {string}\n   * @protected\n   */\n  this.name_ = Blockly.utils.replaceMessageReferences(categoryDef['name']);\n\n  /**\n   * The colour of the category.\n   * @type {string}\n   * @protected\n   */\n  this.colour_ = this.getColour_(categoryDef);\n\n  /**\n   * The html container for the category.\n   * @type {?Element}\n   * @protected\n   */\n  this.htmlDiv_ = null;\n\n  /**\n   * The html element for the category row.\n   * @type {?Element}\n   * @protected\n   */\n  this.rowDiv_ = null;\n\n  /**\n   * The html element that holds children elements of the category row.\n   * @type {?Element}\n   * @protected\n   */\n  this.rowContents_ = null;\n\n  /**\n   * The html element for the toolbox icon.\n   * @type {?Element}\n   * @protected\n   */\n  this.iconDom_ = null;\n\n  /**\n   * All the css class names that are used to create a category.\n   * @type {!Blockly.ToolboxCategory.CssConfig}\n   * @protected\n   */\n  this.cssConfig_ = this.makeDefaultCssConfig_();\n\n  var cssConfig = categoryDef['cssconfig'] || categoryDef['cssConfig'];\n  Blockly.utils.object.mixin(this.cssConfig_, cssConfig);\n\n  /**\n   * True if the category is meant to be hidden, false otherwise.\n   * @type {boolean}\n   * @protected\n   */\n  this.isHidden_ = false;\n\n  /**\n   * True if this category is disabled, false otherwise.\n   * @type {boolean}\n   * @protected\n   */\n  this.isDisabled_ = false;\n\n  /**\n   * The flyout items for this category.\n   * @type {string|!Blockly.utils.toolbox.FlyoutItemInfoArray}\n   * @protected\n   */\n  this.flyoutItems_ = [];\n\n  this.parseContents_(categoryDef);\n};\n\nBlockly.utils.object.inherits(Blockly.ToolboxCategory, Blockly.ToolboxItem);\n\n/**\n * All the css class names that are used to create a category.\n * @typedef {{\n *            container:?string,\n *            row:?string,\n *            rowcontentcontainer:?string,\n *            icon:?string,\n *            label:?string,\n *            selected:?string,\n *            openicon:?string,\n *            closedicon:?string\n *          }}\n */\nBlockly.ToolboxCategory.CssConfig;\n\n/**\n * Name used for registering a toolbox category.\n * @const {string}\n */\nBlockly.ToolboxCategory.registrationName = 'category';\n\n/**\n * The number of pixels to move the category over at each nested level.\n * @type {number}\n */\nBlockly.ToolboxCategory.nestedPadding = 19;\n\n/**\n * The width in pixels of the strip of colour next to each category.\n * @type {number}\n */\nBlockly.ToolboxCategory.borderWidth = 8;\n\n/**\n * The default colour of the category. This is used as the background colour of\n * the category when it is selected.\n * @type {string}\n */\nBlockly.ToolboxCategory.defaultBackgroundColour = '#57e';\n\n/**\n * Creates an object holding the default classes for a category.\n * @return {!Blockly.ToolboxCategory.CssConfig} The configuration object holding\n *    all the CSS classes for a category.\n * @protected\n */\nBlockly.ToolboxCategory.prototype.makeDefaultCssConfig_ = function() {\n  return {\n    'container': 'blocklyToolboxCategory',\n    'row': 'blocklyTreeRow',\n    'rowcontentcontainer': 'blocklyTreeRowContentContainer',\n    'icon': 'blocklyTreeIcon',\n    'label': 'blocklyTreeLabel',\n    'contents': 'blocklyToolboxContents',\n    'selected': 'blocklyTreeSelected',\n    'openicon': 'blocklyTreeIconOpen',\n    'closedicon': 'blocklyTreeIconClosed',\n  };\n};\n\n/**\n * Parses the contents array depending on if the category is a dynamic category,\n * or if its contents are meant to be shown in the flyout.\n * @param {!Blockly.utils.toolbox.CategoryInfo} categoryDef The information needed\n *     to create a category.\n * @protected\n */\nBlockly.ToolboxCategory.prototype.parseContents_ = function(categoryDef) {\n  var contents = categoryDef['contents'];\n\n  if (categoryDef['custom']) {\n    this.flyoutItems_ = categoryDef['custom'];\n  } else if (contents) {\n    for (var i = 0, itemDef; (itemDef = contents[i]); i++) {\n      var flyoutItem = /** @type {Blockly.utils.toolbox.FlyoutItemInfo} */ (itemDef);\n      this.flyoutItems_.push(flyoutItem);\n    }\n  }\n};\n\n/**\n * @override\n */\nBlockly.ToolboxCategory.prototype.init = function() {\n  this.createDom_();\n  if (this.toolboxItemDef_['hidden'] == 'true') {\n    this.hide();\n  }\n};\n\n/**\n * Creates the dom for the category.\n * @return {!Element} The parent element for the category.\n * @protected\n */\nBlockly.ToolboxCategory.prototype.createDom_ = function() {\n  this.htmlDiv_ = this.createContainer_();\n  Blockly.utils.aria.setRole(this.htmlDiv_, Blockly.utils.aria.Role.TREEITEM);\n  Blockly.utils.aria.setState(/** @type {!Element} */ (this.htmlDiv_),\n      Blockly.utils.aria.State.SELECTED,false);\n  Blockly.utils.aria.setState(/** @type {!Element} */ (this.htmlDiv_),\n      Blockly.utils.aria.State.LEVEL, this.level_);\n\n  this.rowDiv_ = this.createRowContainer_();\n  this.rowDiv_.setAttribute('id', this.id_);\n  this.rowDiv_.style.pointerEvents = 'auto';\n  this.htmlDiv_.appendChild(this.rowDiv_);\n\n  this.rowContents_ = this.createRowContentsContainer_();\n  this.rowContents_.style.pointerEvents = 'none';\n  this.rowDiv_.appendChild(this.rowContents_);\n\n  this.iconDom_ = this.createIconDom_();\n  Blockly.utils.aria.setRole(this.iconDom_, Blockly.utils.aria.Role.PRESENTATION);\n  this.rowContents_.appendChild(this.iconDom_);\n\n  var labelDom = this.createLabelDom_(this.name_);\n  this.rowContents_.appendChild(labelDom);\n  Blockly.utils.aria.setState(/** @type {!Element} */ (this.htmlDiv_),\n      Blockly.utils.aria.State.LABELLEDBY, labelDom.getAttribute('id'));\n\n  this.addColourBorder_(this.colour_);\n\n  return this.htmlDiv_;\n};\n\n/**\n * Creates the container that holds the row and any subcategories.\n * @return {!Element} The div that holds the icon and the label.\n * @protected\n */\nBlockly.ToolboxCategory.prototype.createContainer_ = function() {\n  var container = document.createElement('div');\n  Blockly.utils.dom.addClass(container, this.cssConfig_['container']);\n  return container;\n};\n\n/**\n * Creates the parent of the contents container. All clicks will happen on this\n * div.\n * @return {!Element} The div that holds the contents container.\n * @protected\n */\nBlockly.ToolboxCategory.prototype.createRowContainer_ = function() {\n  var rowDiv = document.createElement('div');\n  Blockly.utils.dom.addClass(rowDiv, this.cssConfig_['row']);\n  var nestedPadding = Blockly.ToolboxCategory.nestedPadding * this.getLevel();\n  nestedPadding = nestedPadding.toString() + 'px';\n  this.workspace_.RTL ? rowDiv.style.paddingRight = nestedPadding :\n      rowDiv.style.paddingLeft = nestedPadding;\n  return rowDiv;\n};\n\n/**\n * Creates the container for the label and icon.\n * This is necessary so we can set all subcategory pointer events to none.\n * @return {!Element} The div that holds the icon and the label.\n * @protected\n */\nBlockly.ToolboxCategory.prototype.createRowContentsContainer_ = function() {\n  var contentsContainer = document.createElement('div');\n  Blockly.utils.dom.addClass(contentsContainer, this.cssConfig_['rowcontentcontainer']);\n  return contentsContainer;\n};\n\n/**\n * Creates the span that holds the category icon.\n * @return {!Element} The span that holds the category icon.\n * @protected\n */\nBlockly.ToolboxCategory.prototype.createIconDom_ = function() {\n  var toolboxIcon = document.createElement('span');\n  if (!this.parentToolbox_.isHorizontal()) {\n    Blockly.utils.dom.addClass(toolboxIcon, this.cssConfig_['icon']);\n  }\n\n  toolboxIcon.style.display = 'inline-block';\n  return toolboxIcon;\n};\n\n/**\n * Creates the span that holds the category label.\n * This should have an id for accessibility purposes.\n * @param {string} name The name of the category.\n * @return {!Element} The span that holds the category label.\n * @protected\n */\nBlockly.ToolboxCategory.prototype.createLabelDom_ = function(name) {\n  var toolboxLabel = document.createElement('span');\n  toolboxLabel.setAttribute('id', this.getId() + '.label');\n  toolboxLabel.textContent = name;\n  Blockly.utils.dom.addClass(toolboxLabel, this.cssConfig_['label']);\n  return toolboxLabel;\n};\n\n/**\n * Updates the colour for this category.\n * @public\n */\nBlockly.ToolboxCategory.prototype.refreshTheme = function() {\n  this.colour_ = this.getColour_(/** @type {Blockly.utils.toolbox.CategoryInfo} **/\n      (this.toolboxItemDef_));\n  this.addColourBorder_(this.colour_);\n};\n\n/**\n * Add the strip of colour to the toolbox category.\n * @param {string} colour The category colour.\n * @protected\n */\nBlockly.ToolboxCategory.prototype.addColourBorder_ = function(colour) {\n  if (colour) {\n    var border = Blockly.ToolboxCategory.borderWidth + 'px solid ' +\n        (colour || '#ddd');\n    if (this.workspace_.RTL) {\n      this.rowDiv_.style.borderRight = border;\n    } else {\n      this.rowDiv_.style.borderLeft = border;\n    }\n  }\n};\n\n/**\n * Gets either the colour or the style for a category.\n * @param {!Blockly.utils.toolbox.CategoryInfo} categoryDef The object holding\n *    information on the category.\n * @return {string} The hex colour for the category.\n * @protected\n */\nBlockly.ToolboxCategory.prototype.getColour_ = function(categoryDef) {\n  var styleName = categoryDef['categorystyle'] || categoryDef['categoryStyle'];\n  var colour = categoryDef['colour'];\n\n  if (colour && styleName) {\n    console.warn('Toolbox category \"' + this.name_ +\n        '\" must not have both a style and a colour');\n  } else if (styleName) {\n    return this.getColourfromStyle_(styleName);\n  } else {\n    return this.parseColour_(colour);\n  }\n  return '';\n};\n\n/**\n * Sets the colour for the category using the style name and returns the new\n * colour as a hex string.\n * @param {string} styleName Name of the style.\n * @return {string} The hex colour for the category.\n * @private\n */\nBlockly.ToolboxCategory.prototype.getColourfromStyle_ = function(styleName) {\n  var theme = this.workspace_.getTheme();\n  if (styleName && theme) {\n    var style = theme.categoryStyles[styleName];\n    if (style && style.colour) {\n      return this.parseColour_(style.colour);\n    } else {\n      console.warn('Style \"' + styleName +\n          '\" must exist and contain a colour value');\n    }\n  }\n  return '';\n};\n\n/**\n * Parses the colour on the category.\n * @param {number|string} colourValue HSV hue value (0 to 360), #RRGGBB string,\n *     or a message reference string pointing to one of those two values.\n * @return {string} The hex colour for the category.\n * @private\n */\nBlockly.ToolboxCategory.prototype.parseColour_ = function(colourValue) {\n  // Decode the colour for any potential message references\n  // (eg. `%{BKY_MATH_HUE}`).\n  var colour = Blockly.utils.replaceMessageReferences(colourValue);\n  if (colour == null || colour === '') {\n    // No attribute. No colour.\n    return '';\n  } else {\n    var hue = Number(colour);\n    if (!isNaN(hue)) {\n      return Blockly.hueToHex(hue);\n    } else {\n      var hex = Blockly.utils.colour.parse(colour);\n      if (hex) {\n        return hex;\n      } else {\n        console.warn('Toolbox category \"' + this.name_ +\n            '\" has unrecognized colour attribute: ' + colour);\n        return '';\n      }\n    }\n  }\n};\n\n/**\n * Adds appropriate classes to display an open icon.\n * @param {?Element} iconDiv The div that holds the icon.\n * @protected\n */\nBlockly.ToolboxCategory.prototype.openIcon_ = function(iconDiv) {\n  if (!iconDiv) {\n    return;\n  }\n  Blockly.utils.dom.removeClasses(iconDiv, this.cssConfig_['closedicon']);\n  Blockly.utils.dom.addClass(iconDiv, this.cssConfig_['openicon']);\n};\n\n/**\n * Adds appropriate classes to display a closed icon.\n * @param {?Element} iconDiv The div that holds the icon.\n * @protected\n */\nBlockly.ToolboxCategory.prototype.closeIcon_ = function(iconDiv) {\n  if (!iconDiv) {\n    return;\n  }\n  Blockly.utils.dom.removeClasses(iconDiv, this.cssConfig_['openicon']);\n  Blockly.utils.dom.addClass(iconDiv, this.cssConfig_['closedicon']);\n};\n\n/**\n * Sets whether the category is visible or not.\n * For a category to be visible its parent category must also be expanded.\n * @param {boolean} isVisible True if category should be visible.\n * @protected\n */\nBlockly.ToolboxCategory.prototype.setVisible_ = function(isVisible) {\n  this.htmlDiv_.style.display = isVisible ? 'block' : 'none';\n  this.isHidden_ = !isVisible;\n\n  if (this.parentToolbox_.getSelectedItem() == this) {\n    this.parentToolbox_.clearSelection();\n  }\n};\n\n/**\n * Hide the category.\n */\nBlockly.ToolboxCategory.prototype.hide = function() {\n  this.setVisible_(false);\n};\n\n/**\n * Show the category. Category will only appear if its parent category is also\n * expanded.\n */\nBlockly.ToolboxCategory.prototype.show = function() {\n  this.setVisible_(true);\n};\n\n/**\n * Whether the category is visible.\n * A category is only visible if all of its ancestors are expanded and isHidden_ is false.\n * @return {boolean} True if the category is visible, false otherwise.\n * @public\n */\nBlockly.ToolboxCategory.prototype.isVisible = function() {\n  return !this.isHidden_ && this.allAncestorsExpanded_();\n};\n\n/**\n * Whether all ancestors of a category (parent and parent's parent, etc.) are expanded.\n * @return {boolean} True only if every ancestor is expanded\n * @protected\n */\nBlockly.ToolboxCategory.prototype.allAncestorsExpanded_ = function() {\n  var category = this;\n  while (category.getParent()) {\n    category = category.getParent();\n    if (!category.isExpanded()) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * @override\n */\nBlockly.ToolboxCategory.prototype.isSelectable = function() {\n  return this.isVisible() && !this.isDisabled_;\n};\n\n/**\n * Handles when the toolbox item is clicked.\n * @param {!Event} _e Click event to handle.\n * @public\n */\nBlockly.ToolboxCategory.prototype.onClick = function(_e) {\n  // No-op\n};\n\n/**\n * Sets the current category as selected.\n * @param {boolean} isSelected True if this category is selected, false\n *     otherwise.\n * @public\n */\nBlockly.ToolboxCategory.prototype.setSelected = function(isSelected) {\n  if (isSelected) {\n    var defaultColour = this.parseColour_(\n        Blockly.ToolboxCategory.defaultBackgroundColour);\n    this.rowDiv_.style.backgroundColor = this.colour_ || defaultColour;\n    Blockly.utils.dom.addClass(this.rowDiv_, this.cssConfig_['selected']);\n  } else {\n    this.rowDiv_.style.backgroundColor = '';\n    Blockly.utils.dom.removeClass(this.rowDiv_, this.cssConfig_['selected']);\n  }\n  Blockly.utils.aria.setState(/** @type {!Element} */ (this.htmlDiv_),\n      Blockly.utils.aria.State.SELECTED, isSelected);\n};\n\n/**\n * Sets whether the category is disabled.\n * @param {boolean} isDisabled True to disable the category, false otherwise.\n */\nBlockly.ToolboxCategory.prototype.setDisabled = function(isDisabled) {\n  this.isDisabled_ = isDisabled;\n  this.getDiv().setAttribute('disabled', isDisabled);\n  isDisabled ? this.getDiv().setAttribute('disabled', 'true') :\n      this.getDiv().removeAttribute('disabled');\n};\n\n/**\n * Gets the name of the category. Used for emitting events.\n * @return {string} The name of the toolbox item.\n * @public\n */\nBlockly.ToolboxCategory.prototype.getName = function() {\n  return this.name_;\n};\n\n/**\n * @override\n */\nBlockly.ToolboxCategory.prototype.getParent = function() {\n  return this.parent_;\n};\n\n/**\n * @override\n */\nBlockly.ToolboxCategory.prototype.getDiv = function() {\n  return this.htmlDiv_;\n};\n\n/**\n * Gets the contents of the category. These are items that are meant to be\n * displayed in the flyout.\n * @return {!Blockly.utils.toolbox.FlyoutItemInfoArray|string} The definition\n *     of items to be displayed in the flyout.\n * @public\n */\nBlockly.ToolboxCategory.prototype.getContents = function() {\n  return this.flyoutItems_;\n};\n\n/**\n * Updates the contents to be displayed in the flyout.\n * If the flyout is open when the contents are updated, refreshSelection on the\n * toolbox must also be called.\n * @param {!Blockly.utils.toolbox.FlyoutDefinition|string} contents The contents\n *     to be displayed in the flyout. A string can be supplied to create a\n *     dynamic category.\n * @public\n */\nBlockly.ToolboxCategory.prototype.updateFlyoutContents = function(contents) {\n  this.flyoutItems_ = [];\n\n  if (typeof contents == 'string') {\n    this.toolboxItemDef_['custom'] = contents;\n  } else {\n    // Removes old custom field when contents is updated.\n    delete this.toolboxItemDef_['custom'];\n    this.toolboxItemDef_['contents'] =\n        Blockly.utils.toolbox.convertFlyoutDefToJsonArray(contents);\n  }\n  this.parseContents_(\n      /** @type {Blockly.utils.toolbox.CategoryInfo} */ (this.toolboxItemDef_));\n};\n\n/**\n * @override\n */\nBlockly.ToolboxCategory.prototype.dispose = function() {\n  Blockly.utils.dom.removeNode(this.htmlDiv_);\n};\n\n/**\n * CSS for Toolbox.  See css.js for use.\n */\nBlockly.Css.register([\n  /* eslint-disable indent */\n  '.blocklyTreeRow:not(.blocklyTreeSelected):hover {',\n    'background-color: rgba(255, 255, 255, 0.2);',\n  '}',\n\n  '.blocklyToolboxDiv[layout=\"h\"] .blocklyToolboxCategory {',\n    'margin: 1px 5px 1px 0;',\n  '}',\n\n  '.blocklyToolboxDiv[dir=\"RTL\"][layout=\"h\"] .blocklyToolboxCategory {',\n    'margin: 1px 0 1px 5px;',\n  '}',\n\n  '.blocklyTreeRow {',\n    'height: 22px;',\n    'line-height: 22px;',\n    'margin-bottom: 3px;',\n    'padding-right: 8px;',\n    'white-space: nowrap;',\n  '}',\n\n  '.blocklyToolboxDiv[dir=\"RTL\"] .blocklyTreeRow {',\n    'margin-left: 8px;',\n    'padding-right: 0px',\n  '}',\n\n  '.blocklyTreeIcon {',\n    'background-image: url(<<<PATH>>>/sprites.png);',\n    'height: 16px;',\n    'vertical-align: middle;',\n    'visibility: hidden;',\n    'width: 16px;',\n  '}',\n\n  '.blocklyTreeIconClosed {',\n    'background-position: -32px -1px;',\n  '}',\n\n  '.blocklyToolboxDiv[dir=\"RTL\"] .blocklyTreeIconClosed {',\n    'background-position: 0 -1px;',\n  '}',\n\n  '.blocklyTreeSelected>.blocklyTreeIconClosed {',\n    'background-position: -32px -17px;',\n  '}',\n\n  '.blocklyToolboxDiv[dir=\"RTL\"] .blocklyTreeSelected>.blocklyTreeIconClosed {',\n    'background-position: 0 -17px;',\n  '}',\n\n  '.blocklyTreeIconOpen {',\n    'background-position: -16px -1px;',\n  '}',\n\n  '.blocklyTreeSelected>.blocklyTreeIconOpen {',\n    'background-position: -16px -17px;',\n  '}',\n\n  '.blocklyTreeLabel {',\n    'cursor: default;',\n    'font: 16px sans-serif;',\n    'padding: 0 3px;',\n    'vertical-align: middle;',\n  '}',\n\n  '.blocklyToolboxDelete .blocklyTreeLabel {',\n    'cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;',\n  '}',\n\n  '.blocklyTreeSelected .blocklyTreeLabel {',\n    'color: #fff;',\n  '}'\n  /* eslint-enable indent */\n]);\n\nBlockly.registry.register(Blockly.registry.Type.TOOLBOX_ITEM,\n    Blockly.ToolboxCategory.registrationName, Blockly.ToolboxCategory);\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A separator used for separating toolbox categories.\n * @author aschmiedt@google.com (Abby Schmiedt)\n * @author maribethb@google.com (Maribeth Bottorff)\n */\n'use strict';\n\ngoog.provide('Blockly.ToolboxSeparator');\n\ngoog.require('Blockly.registry');\ngoog.require('Blockly.ToolboxItem');\ngoog.require('Blockly.utils.dom');\n\ngoog.requireType('Blockly.IToolbox');\ngoog.requireType('Blockly.IToolboxItem');\ngoog.requireType('Blockly.utils.toolbox');\n\n\n/**\n * Class for a toolbox separator. This is the thin visual line that appears on\n * the toolbox. This item is not interactable.\n * @param {!Blockly.utils.toolbox.SeparatorInfo} separatorDef The information\n *     needed to create a separator.\n * @param {!Blockly.IToolbox} toolbox The parent toolbox for the separator.\n * @constructor\n * @extends {Blockly.ToolboxItem}\n * @implements {Blockly.IToolboxItem}\n */\nBlockly.ToolboxSeparator = function(separatorDef, toolbox) {\n\n  Blockly.ToolboxSeparator.superClass_.constructor.call(\n      this, separatorDef, toolbox);\n  /**\n   * All the css class names that are used to create a separator.\n   * @type {!Blockly.ToolboxSeparator.CssConfig}\n   * @protected\n   */\n  this.cssConfig_ = {\n    'container': 'blocklyTreeSeparator'\n  };\n\n  var cssConfig = separatorDef['cssconfig'] || separatorDef['cssConfig'];\n  Blockly.utils.object.mixin(this.cssConfig_, cssConfig);\n};\nBlockly.utils.object.inherits(Blockly.ToolboxSeparator, Blockly.ToolboxItem);\n\n/**\n * All the css class names that are used to create a separator.\n * @typedef {{\n *            container:?string\n *          }}\n */\nBlockly.ToolboxSeparator.CssConfig;\n\n/**\n * Name used for registering a toolbox separator.\n * @const {string}\n */\nBlockly.ToolboxSeparator.registrationName = 'sep';\n\n/**\n * @override\n */\nBlockly.ToolboxSeparator.prototype.init = function() {\n  this.createDom_();\n};\n\n/**\n * Creates the dom for a separator.\n * @return {!Element} The parent element for the separator.\n * @protected\n */\nBlockly.ToolboxSeparator.prototype.createDom_ = function() {\n  var container = document.createElement('div');\n  Blockly.utils.dom.addClass(container, this.cssConfig_['container']);\n  this.htmlDiv_ = container;\n  return container;\n};\n\n/**\n * @override\n */\nBlockly.ToolboxSeparator.prototype.getDiv = function() {\n  return this.htmlDiv_;\n};\n\n/**\n * @override\n */\nBlockly.ToolboxSeparator.prototype.dispose = function() {\n  Blockly.utils.dom.removeNode(this.htmlDiv_);\n};\n\n/**\n * CSS for Toolbox.  See css.js for use.\n */\nBlockly.Css.register([\n  /* eslint-disable indent */\n  '.blocklyTreeSeparator {',\n    'border-bottom: solid #e5e5e5 1px;',\n    'height: 0;',\n    'margin: 5px 0;',\n  '}',\n\n  '.blocklyToolboxDiv[layout=\"h\"] .blocklyTreeSeparator {',\n    'border-right: solid #e5e5e5 1px;',\n    'border-bottom: none;',\n    'height: auto;',\n    'margin: 0 5px 0 5px;',\n    'padding: 5px 0;',\n    'width: 0;',\n  '}',\n  /* eslint-enable indent */\n]);\n\nBlockly.registry.register(Blockly.registry.Type.TOOLBOX_ITEM,\n    Blockly.ToolboxSeparator.registrationName, Blockly.ToolboxSeparator);\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A toolbox category used to organize blocks in the toolbox.\n * @author aschmiedt@google.com (Abby Schmiedt)\n */\n'use strict';\n\ngoog.provide('Blockly.CollapsibleToolboxCategory');\n\ngoog.require('Blockly.registry');\ngoog.require('Blockly.ToolboxCategory');\ngoog.require('Blockly.ToolboxSeparator');\ngoog.require('Blockly.utils.aria');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.toolbox');\ngoog.require('Blockly.ToolboxItem');\n\ngoog.requireType('Blockly.ICollapsibleToolboxItem');\ngoog.requireType('Blockly.IToolbox');\ngoog.requireType('Blockly.IToolboxItem');\n\n\n/**\n * Class for a category in a toolbox that can be collapsed.\n * @param {!Blockly.utils.toolbox.CategoryInfo} categoryDef The information needed\n *     to create a category in the toolbox.\n * @param {!Blockly.IToolbox} toolbox The parent toolbox for the category.\n * @param {Blockly.ICollapsibleToolboxItem=} opt_parent The parent category or null if\n *     the category does not have a parent.\n * @constructor\n * @extends {Blockly.ToolboxCategory}\n * @implements {Blockly.ICollapsibleToolboxItem}\n */\nBlockly.CollapsibleToolboxCategory = function(categoryDef, toolbox, opt_parent) {\n  /**\n   * Container for any child categories.\n   * @type {?Element}\n   * @protected\n   */\n  this.subcategoriesDiv_ = null;\n\n  /**\n   * Whether or not the category should display its subcategories.\n   * @type {boolean}\n   * @protected\n   */\n  this.expanded_ = false;\n\n  /**\n   * The child toolbox items for this category.\n   * @type {!Array<!Blockly.ToolboxItem>}\n   * @protected\n   */\n  this.toolboxItems_ = [];\n\n  Blockly.CollapsibleToolboxCategory.superClass_.constructor.call(\n      this, categoryDef, toolbox, opt_parent);\n};\n\nBlockly.utils.object.inherits(Blockly.CollapsibleToolboxCategory, Blockly.ToolboxCategory);\n\n/**\n * All the css class names that are used to create a collapsible\n * category. This is all the properties from the regular category plus contents.\n * @typedef {{\n *            container:?string,\n *            row:?string,\n *            rowcontentcontainer:?string,\n *            icon:?string,\n *            label:?string,\n *            selected:?string,\n *            openicon:?string,\n *            closedicon:?string,\n *            contents:?string\n *          }}\n */\nBlockly.CollapsibleToolboxCategory.CssConfig;\n\n/**\n * Name used for registering a collapsible toolbox category.\n * @const {string}\n */\nBlockly.CollapsibleToolboxCategory.registrationName = 'collapsibleCategory';\n\n/**\n * @override\n */\nBlockly.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_ = function() {\n  var cssConfig = Blockly.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);\n  cssConfig['contents'] = 'blocklyToolboxContents';\n  return cssConfig;\n};\n\n/**\n * @override\n */\nBlockly.CollapsibleToolboxCategory.prototype.parseContents_ = function(categoryDef) {\n  var contents = categoryDef['contents'];\n  var prevIsFlyoutItem = true;\n\n  if (categoryDef['custom']) {\n    this.flyoutItems_ = categoryDef['custom'];\n  } else if (contents) {\n    for (var i = 0, itemDef; (itemDef = contents[i]); i++) {\n      // Separators can exist as either a flyout item or a toolbox item so\n      // decide where it goes based on the type of the previous item.\n      if (!Blockly.registry.hasItem(Blockly.registry.Type.TOOLBOX_ITEM, itemDef['kind']) ||\n          (itemDef['kind'].toLowerCase() == Blockly.ToolboxSeparator.registrationName &&\n          prevIsFlyoutItem)) {\n        var flyoutItem = /** @type {Blockly.utils.toolbox.FlyoutItemInfo} */ (itemDef);\n        this.flyoutItems_.push(flyoutItem);\n        prevIsFlyoutItem = true;\n      } else {\n        this.createToolboxItem_(itemDef);\n        prevIsFlyoutItem = false;\n      }\n    }\n  }\n};\n\n/**\n * Creates a toolbox item and adds it to the list of toolbox items.\n * @param {!Blockly.utils.toolbox.ToolboxItemInfo} itemDef The information needed\n *     to create a toolbox item.\n * @private\n */\nBlockly.CollapsibleToolboxCategory.prototype.createToolboxItem_ = function(itemDef) {\n  var registryName = itemDef['kind'];\n  var categoryDef = /** @type {!Blockly.utils.toolbox.CategoryInfo} */ (itemDef);\n\n  // Categories that are collapsible are created using a class registered under\n  // a diffferent name.\n  if (registryName.toUpperCase() == 'CATEGORY' &&\n      Blockly.utils.toolbox.isCategoryCollapsible(categoryDef)) {\n    registryName = Blockly.CollapsibleToolboxCategory.registrationName;\n  }\n  var ToolboxItemClass = Blockly.registry.getClass(\n      Blockly.registry.Type.TOOLBOX_ITEM, registryName);\n  var toolboxItem = new ToolboxItemClass(itemDef, this.parentToolbox_, this);\n  this.toolboxItems_.push(toolboxItem);\n};\n\n/**\n * @override\n */\nBlockly.CollapsibleToolboxCategory.prototype.init = function() {\n  Blockly.CollapsibleToolboxCategory.superClass_.init.call(this);\n\n  this.setExpanded(this.toolboxItemDef_['expanded'] == 'true' ||\n      this.toolboxItemDef_['expanded']);\n};\n\n/**\n * @override\n */\nBlockly.CollapsibleToolboxCategory.prototype.createDom_ = function() {\n  Blockly.CollapsibleToolboxCategory.superClass_.createDom_.call(this);\n\n  var subCategories = this.getChildToolboxItems();\n  this.subcategoriesDiv_ = this.createSubCategoriesDom_(subCategories);\n  Blockly.utils.aria.setRole(this.subcategoriesDiv_,\n      Blockly.utils.aria.Role.GROUP);\n  this.htmlDiv_.appendChild(this.subcategoriesDiv_);\n\n  return this.htmlDiv_;\n};\n\n/**\n * @override\n */\nBlockly.CollapsibleToolboxCategory.prototype.createIconDom_ = function() {\n  var toolboxIcon = document.createElement('span');\n  if (!this.parentToolbox_.isHorizontal()) {\n    Blockly.utils.dom.addClass(toolboxIcon, this.cssConfig_['icon']);\n    toolboxIcon.style.visibility = 'visible';\n  }\n\n  toolboxIcon.style.display = 'inline-block';\n  return toolboxIcon;\n};\n\n/**\n * Create the dom for all subcategories.\n * @param {!Array<!Blockly.ToolboxItem>} subcategories The subcategories.\n * @return {!Element} The div holding all the subcategories.\n * @protected\n */\nBlockly.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_ = function(subcategories) {\n  var contentsContainer = document.createElement('div');\n  Blockly.utils.dom.addClass(contentsContainer, this.cssConfig_['contents']);\n\n  for (var i = 0; i < subcategories.length; i++) {\n    var newCategory = subcategories[i];\n    newCategory.init();\n    var newCategoryDiv = newCategory.getDiv();\n    contentsContainer.appendChild(newCategoryDiv);\n  }\n  return contentsContainer;\n};\n\n\n/**\n * Opens or closes the current category.\n * @param {boolean} isExpanded True to expand the category, false to close.\n * @public\n */\nBlockly.CollapsibleToolboxCategory.prototype.setExpanded = function(isExpanded) {\n  if (this.expanded_ == isExpanded) {\n    return;\n  }\n  this.expanded_ = isExpanded;\n  if (isExpanded) {\n    this.subcategoriesDiv_.style.display = 'block';\n    this.openIcon_(this.iconDom_);\n  } else {\n    this.subcategoriesDiv_.style.display = 'none';\n    this.closeIcon_(this.iconDom_);\n  }\n  Blockly.utils.aria.setState(/** @type {!Element} */ (this.htmlDiv_),\n      Blockly.utils.aria.State.EXPANDED, isExpanded);\n\n  this.parentToolbox_.handleToolboxItemResize();\n};\n\n/**\n * @override\n */\nBlockly.CollapsibleToolboxCategory.prototype.setVisible_ = function(isVisible) {\n  this.htmlDiv_.style.display = isVisible ? 'block' : 'none';\n  for (var i = 0, child; (child = this.getChildToolboxItems()[i]); i++) {\n    child.setVisible_(isVisible);\n  }\n  this.isHidden_ = !isVisible;\n\n  if (this.parentToolbox_.getSelectedItem() == this) {\n    this.parentToolbox_.clearSelection();\n  }\n};\n\n/**\n * Whether the category is expanded to show its child subcategories.\n * @return {boolean} True if the toolbox item shows its children, false if it\n *     is collapsed.\n * @public\n */\nBlockly.CollapsibleToolboxCategory.prototype.isExpanded = function() {\n  return this.expanded_;\n};\n\n/**\n * @override\n */\nBlockly.CollapsibleToolboxCategory.prototype.isCollapsible = function() {\n  return true;\n};\n\n/**\n * @override\n */\nBlockly.CollapsibleToolboxCategory.prototype.onClick = function(_e) {\n  this.toggleExpanded();\n};\n\n/**\n * Toggles whether or not the category is expanded.\n * @public\n */\nBlockly.CollapsibleToolboxCategory.prototype.toggleExpanded = function() {\n  this.setExpanded(!this.expanded_);\n};\n\n/**\n * @override\n */\nBlockly.CollapsibleToolboxCategory.prototype.getDiv = function() {\n  return this.htmlDiv_;\n};\n\n/**\n * Gets any children toolbox items. (ex. Gets the subcategories)\n * @return {!Array<!Blockly.IToolboxItem>} The child toolbox items.\n */\nBlockly.CollapsibleToolboxCategory.prototype.getChildToolboxItems = function() {\n  return this.toolboxItems_;\n};\n\n\nBlockly.registry.register(Blockly.registry.Type.TOOLBOX_ITEM,\n    Blockly.CollapsibleToolboxCategory.registrationName, Blockly.CollapsibleToolboxCategory);\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Toolbox from whence to create blocks.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Toolbox');\n\ngoog.require('Blockly.CollapsibleToolboxCategory');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Css');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.Ui');\ngoog.require('Blockly.navigation');\ngoog.require('Blockly.registry');\ngoog.require('Blockly.Touch');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.aria');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Rect');\ngoog.require('Blockly.utils.toolbox');\n\ngoog.requireType('Blockly.Action');\ngoog.requireType('Blockly.IBlocklyActionable');\ngoog.requireType('Blockly.ICollapsibleToolboxItem');\ngoog.requireType('Blockly.IDeleteArea');\ngoog.requireType('Blockly.IFlyout');\ngoog.requireType('Blockly.ISelectableToolboxItem');\ngoog.requireType('Blockly.IStyleable');\ngoog.requireType('Blockly.IToolbox');\ngoog.requireType('Blockly.IToolboxItem');\ngoog.requireType('Blockly.WorkspaceSvg');\n\n\n/**\n * Class for a Toolbox.\n * Creates the toolbox's DOM.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace in which to create new\n *     blocks.\n * @constructor\n * @implements {Blockly.IBlocklyActionable}\n * @implements {Blockly.IDeleteArea}\n * @implements {Blockly.IStyleable}\n * @implements {Blockly.IToolbox}\n */\nBlockly.Toolbox = function(workspace) {\n  /**\n   * The workspace this toolbox is on.\n   * @type {!Blockly.WorkspaceSvg}\n   * @protected\n   */\n  this.workspace_ = workspace;\n\n  /**\n   * The JSON describing the contents of this toolbox.\n   * @type {!Blockly.utils.toolbox.ToolboxInfo}\n   * @protected\n   */\n  this.toolboxDef_ = workspace.options.languageTree || {'contents': []};\n\n  /**\n   * Whether the toolbox should be laid out horizontally.\n   * @type {boolean}\n   * @private\n   */\n  this.horizontalLayout_ = workspace.options.horizontalLayout;\n\n  /**\n   * The html container for the toolbox.\n   * @type {?Element}\n   */\n  this.HtmlDiv = null;\n\n  /**\n   * The html container for the contents of a toolbox.\n   * @type {?Element}\n   * @protected\n   */\n  this.contentsDiv_ = null;\n\n  /**\n   * The list of items in the toolbox.\n   * @type {!Array<!Blockly.IToolboxItem>}\n   * @protected\n   */\n  this.contents_ = [];\n\n  /**\n   * The width of the toolbox.\n   * @type {number}\n   * @protected\n   */\n  this.width_ = 0;\n\n  /**\n   * The height of the toolbox.\n   * @type {number}\n   * @protected\n   */\n  this.height_ = 0;\n\n  /**\n   * Is RTL vs LTR.\n   * @type {boolean}\n   */\n  this.RTL = workspace.options.RTL;\n\n  /**\n   * The flyout for the toolbox.\n   * @type {?Blockly.IFlyout}\n   * @private\n   */\n  this.flyout_ = null;\n\n  /**\n   * A map from toolbox item IDs to toolbox items.\n   * @type {!Object<string, Blockly.IToolboxItem>}\n   * @protected\n   */\n  this.contentMap_ = {};\n\n  /**\n   * Position of the toolbox and flyout relative to the workspace.\n   * @type {!Blockly.utils.toolbox.Position}\n   */\n  this.toolboxPosition = workspace.options.toolboxPosition;\n\n  /**\n   * The currently selected item.\n   * @type {?Blockly.ISelectableToolboxItem}\n   * @protected\n   */\n  this.selectedItem_ = null;\n\n  /**\n   * The previously selected item.\n   * @type {?Blockly.ISelectableToolboxItem}\n   * @protected\n   */\n  this.previouslySelectedItem_ = null;\n\n  /**\n   * Array holding info needed to unbind event handlers.\n   * Used for disposing.\n   * Ex: [[node, name, func], [node, name, func]].\n   * @type {!Array<!Blockly.EventData>}\n   * @protected\n   */\n  this.boundEvents_ = [];\n};\n\n/**\n * Initializes the toolbox\n * @public\n */\nBlockly.Toolbox.prototype.init = function() {\n  var workspace = this.workspace_;\n  var svg = workspace.getParentSvg();\n\n  this.flyout_ = this.createFlyout_();\n\n  this.HtmlDiv = this.createDom_(this.workspace_);\n  Blockly.utils.dom.insertAfter(this.flyout_.createDom('svg'), svg);\n  this.flyout_.init(workspace);\n\n  this.render(this.toolboxDef_);\n  var themeManager = workspace.getThemeManager();\n  themeManager.subscribe(this.HtmlDiv, 'toolboxBackgroundColour',\n      'background-color');\n  themeManager.subscribe(this.HtmlDiv, 'toolboxForegroundColour', 'color');\n};\n\n/**\n * Creates the dom for the toolbox.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace this toolbox is on.\n * @return {!Element} The html container for the toolbox.\n * @protected\n */\nBlockly.Toolbox.prototype.createDom_ = function(workspace) {\n  var svg = workspace.getParentSvg();\n\n  var container = this.createContainer_();\n\n  this.contentsDiv_ = this.createContentsContainer_();\n  this.contentsDiv_.tabIndex = 0;\n  Blockly.utils.aria.setRole(this.contentsDiv_, Blockly.utils.aria.Role.TREE);\n  container.appendChild(this.contentsDiv_);\n\n  svg.parentNode.insertBefore(container, svg);\n\n  this.attachEvents_(container, this.contentsDiv_);\n  return container;\n};\n\n/**\n * Creates the container div for the toolbox.\n * @return {!Element} The html container for the toolbox.\n * @protected\n */\nBlockly.Toolbox.prototype.createContainer_ = function() {\n  var toolboxContainer = document.createElement('div');\n  toolboxContainer.setAttribute('layout', this.isHorizontal() ? 'h' : 'v');\n  Blockly.utils.dom.addClass(toolboxContainer, 'blocklyToolboxDiv');\n  Blockly.utils.dom.addClass(toolboxContainer, 'blocklyNonSelectable');\n  toolboxContainer.setAttribute('dir', this.RTL ? 'RTL' : 'LTR');\n  return toolboxContainer;\n};\n\n/**\n * Creates the container for all the contents in the toolbox.\n * @return {!Element} The html container for the toolbox contents.\n * @protected\n */\nBlockly.Toolbox.prototype.createContentsContainer_ = function() {\n  var contentsContainer = document.createElement('div');\n  Blockly.utils.dom.addClass(contentsContainer, 'blocklyToolboxContents');\n  if (this.isHorizontal()) {\n    contentsContainer.style.flexDirection = 'row';\n  }\n  return contentsContainer;\n};\n\n/**\n * Adds event listeners to the toolbox container div.\n * @param {!Element} container The html container for the toolbox.\n * @param {!Element} contentsContainer The html container for the contents\n *     of the toolbox.\n * @protected\n */\nBlockly.Toolbox.prototype.attachEvents_ = function(container,\n    contentsContainer) {\n  // Clicking on toolbox closes popups.\n  var clickEvent = Blockly.bindEventWithChecks_(container, 'mousedown', this,\n      this.onClick_, /* opt_noCaptureIdentifier */ false,\n      /* opt_noPreventDefault */ true);\n  this.boundEvents_.push(clickEvent);\n\n  var keyDownEvent = Blockly.bindEventWithChecks_(contentsContainer, 'keydown',\n      this, this.onKeyDown_, /* opt_noCaptureIdentifier */ false,\n      /* opt_noPreventDefault */ true);\n  this.boundEvents_.push(keyDownEvent);\n};\n\n/**\n * Handles on click events for when the toolbox or toolbox items are clicked.\n * @param {!Event} e Click event to handle.\n * @protected\n */\nBlockly.Toolbox.prototype.onClick_ = function(e) {\n  if (Blockly.utils.isRightButton(e) || e.target == this.HtmlDiv) {\n    // Close flyout.\n    Blockly.hideChaff(false);\n  } else {\n    var srcElement = e.srcElement;\n    var itemId = srcElement.getAttribute('id');\n    if (itemId) {\n      var item = this.getToolboxItemById(itemId);\n      if (item.isSelectable()) {\n        this.setSelectedItem(item);\n        item.onClick(e);\n      }\n    }\n    // Just close popups.\n    Blockly.hideChaff(true);\n  }\n  Blockly.Touch.clearTouchIdentifier();  // Don't block future drags.\n};\n\n/**\n * Handles key down events for the toolbox.\n * @param {!KeyboardEvent} e The key down event.\n * @protected\n */\nBlockly.Toolbox.prototype.onKeyDown_ = function(e) {\n  var handled = false;\n  switch (e.keyCode) {\n    case Blockly.utils.KeyCodes.DOWN:\n      handled = this.selectNext_();\n      break;\n    case Blockly.utils.KeyCodes.UP:\n      handled = this.selectPrevious_();\n      break;\n    case Blockly.utils.KeyCodes.LEFT:\n      handled = this.selectParent_();\n      break;\n    case Blockly.utils.KeyCodes.RIGHT:\n      handled = this.selectChild_();\n      break;\n    case Blockly.utils.KeyCodes.ENTER:\n    case Blockly.utils.KeyCodes.SPACE:\n      if (this.selectedItem_ && this.selectedItem_.isCollapsible()) {\n        var collapsibleItem = /** @type {!Blockly.ICollapsibleToolboxItem} */ (this.selectedItem_);\n        collapsibleItem.toggleExpanded();\n        handled = true;\n      }\n      break;\n    default:\n      handled = false;\n      break;\n  }\n\n  if (handled) {\n    e.preventDefault();\n  }\n};\n\n/**\n * Creates the flyout based on the toolbox layout.\n * @return {!Blockly.IFlyout} The flyout for the toolbox.\n * @throws {Error} If missing a require for `Blockly.HorizontalFlyout`,\n *     `Blockly.VerticalFlyout`, and no flyout plugin is specified.\n * @protected\n */\nBlockly.Toolbox.prototype.createFlyout_ = function() {\n  var workspace = this.workspace_;\n  // TODO (#4247): Look into adding a makeFlyout method to Blockly Options.\n  var workspaceOptions = new Blockly.Options(\n      /** @type {!Blockly.BlocklyOptions} */\n      ({\n        'parentWorkspace': workspace,\n        'rtl': workspace.RTL,\n        'oneBasedIndex': workspace.options.oneBasedIndex,\n        'horizontalLayout': workspace.horizontalLayout,\n        'renderer': workspace.options.renderer,\n        'rendererOverrides': workspace.options.rendererOverrides\n      }));\n  // Options takes in either 'end' or 'start'. This has already been parsed to\n  // be either 0 or 1, so set it after.\n  workspaceOptions.toolboxPosition = workspace.options.toolboxPosition;\n  var FlyoutClass = null;\n  if (workspace.horizontalLayout) {\n    FlyoutClass = Blockly.registry.getClassFromOptions(\n        Blockly.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX, workspace.options);\n  } else {\n    FlyoutClass = Blockly.registry.getClassFromOptions(\n        Blockly.registry.Type.FLYOUTS_VERTICAL_TOOLBOX, workspace.options);\n  }\n\n  if (!FlyoutClass) {\n    throw new Error('Blockly.VerticalFlyout, Blockly.HorizontalFlyout or your own' +\n        ' custom flyout must be required.');\n  }\n  return new FlyoutClass(workspaceOptions);\n};\n\n/**\n * Fills the toolbox with new toolbox items and removes any old contents.\n * @param {!Blockly.utils.toolbox.ToolboxInfo} toolboxDef Object holding information\n *     for creating a toolbox.\n * @package\n */\nBlockly.Toolbox.prototype.render = function(toolboxDef) {\n  this.toolboxDef_ = toolboxDef;\n  for (var i = 0; i < this.contents_.length; i++) {\n    var toolboxItem = this.contents_[i];\n    if (toolboxItem) {\n      toolboxItem.dispose();\n    }\n  }\n  this.contents_ = [];\n  this.contentMap_ = {};\n  this.renderContents_(toolboxDef['contents']);\n  this.position();\n};\n\n/**\n * Adds all the toolbox items to the toolbox.\n * @param {!Array<!Blockly.utils.toolbox.ToolboxItemInfo>} toolboxDef Array\n *     holding objects containing information on the contents of the toolbox.\n * @protected\n */\nBlockly.Toolbox.prototype.renderContents_ = function(toolboxDef) {\n  // This is for performance reasons. By using document fragment we only have to\n  // add to the dom once.\n  var fragment = document.createDocumentFragment();\n  for (var i = 0, toolboxItemDef; (toolboxItemDef = toolboxDef[i]); i++) {\n    this.createToolboxItem_(toolboxItemDef, fragment);\n  }\n  this.contentsDiv_.appendChild(fragment);\n};\n\n/**\n * Creates and renders the toolbox item.\n * @param {Blockly.utils.toolbox.ToolboxItemInfo} toolboxItemDef Any information\n *    that can be used to create an item in the toolbox.\n * @param {!DocumentFragment} fragment The document fragment to add the child\n *     toolbox elements to.\n * @private\n */\nBlockly.Toolbox.prototype.createToolboxItem_ = function(toolboxItemDef, fragment) {\n  var registryName = toolboxItemDef['kind'];\n\n  // Categories that are collapsible are created using a class registered under\n  // a diffferent name.\n  if (registryName.toUpperCase() == 'CATEGORY' &&\n      Blockly.utils.toolbox.isCategoryCollapsible(\n      /** @type {!Blockly.utils.toolbox.CategoryInfo} */(toolboxItemDef))) {\n    registryName = Blockly.CollapsibleToolboxCategory.registrationName;\n  }\n\n  var ToolboxItemClass = Blockly.registry.getClass(\n      Blockly.registry.Type.TOOLBOX_ITEM, registryName.toLowerCase());\n  if (ToolboxItemClass) {\n    var toolboxItem = new ToolboxItemClass(toolboxItemDef, this);\n    this.addToolboxItem_(toolboxItem);\n    toolboxItem.init();\n    var toolboxItemDom = toolboxItem.getDiv();\n    if (toolboxItemDom) {\n      fragment.appendChild(toolboxItemDom);\n    }\n  }\n};\n\n/**\n * Adds an item to the toolbox.\n * @param {!Blockly.IToolboxItem} toolboxItem The item in the toolbox.\n * @protected\n */\nBlockly.Toolbox.prototype.addToolboxItem_ = function(toolboxItem) {\n  this.contents_.push(toolboxItem);\n  this.contentMap_[toolboxItem.getId()] = toolboxItem;\n  if (toolboxItem.isCollapsible()) {\n    var collapsibleItem = /** @type {Blockly.ICollapsibleToolboxItem} */\n        (toolboxItem);\n    for (var i = 0, child; (child = collapsibleItem.getChildToolboxItems()[i]); i++) {\n      this.addToolboxItem_(child);\n    }\n  }\n};\n\n/**\n * Gets the items in the toolbox.\n * @return {!Array<!Blockly.IToolboxItem>} The list of items in the toolbox.\n * @public\n */\nBlockly.Toolbox.prototype.getToolboxItems = function() {\n  return this.contents_;\n};\n\n/**\n * Adds a style on the toolbox. Usually used to change the cursor.\n * @param {string} style The name of the class to add.\n * @package\n */\nBlockly.Toolbox.prototype.addStyle = function(style) {\n  Blockly.utils.dom.addClass(/** @type {!Element} */ (this.HtmlDiv), style);\n};\n\n/**\n * Removes a style from the toolbox. Usually used to change the cursor.\n * @param {string} style The name of the class to remove.\n * @package\n */\nBlockly.Toolbox.prototype.removeStyle = function(style) {\n  Blockly.utils.dom.removeClass(/** @type {!Element} */ (this.HtmlDiv), style);\n};\n\n/**\n * Return the deletion rectangle for this toolbox.\n * @return {?Blockly.utils.Rect} Rectangle in which to delete.\n * @public\n */\nBlockly.Toolbox.prototype.getClientRect = function() {\n  if (!this.HtmlDiv) {\n    return null;\n  }\n\n  // BIG_NUM is offscreen padding so that blocks dragged beyond the toolbox\n  // area are still deleted.  Must be smaller than Infinity, but larger than\n  // the largest screen size.\n  var BIG_NUM = 10000000;\n  var toolboxRect = this.HtmlDiv.getBoundingClientRect();\n\n  var top = toolboxRect.top;\n  var bottom = top + toolboxRect.height;\n  var left = toolboxRect.left;\n  var right = left + toolboxRect.width;\n\n  // Assumes that the toolbox is on the SVG edge.  If this changes\n  // (e.g. toolboxes in mutators) then this code will need to be more complex.\n  if (this.toolboxPosition == Blockly.utils.toolbox.Position.TOP) {\n    return new Blockly.utils.Rect(-BIG_NUM, bottom, -BIG_NUM, BIG_NUM);\n  } else if (this.toolboxPosition == Blockly.utils.toolbox.Position.BOTTOM) {\n    return new Blockly.utils.Rect(top, BIG_NUM, -BIG_NUM, BIG_NUM);\n  } else if (this.toolboxPosition == Blockly.utils.toolbox.Position.LEFT) {\n    return new Blockly.utils.Rect(-BIG_NUM, BIG_NUM, -BIG_NUM, right);\n  } else {  // Right\n    return new Blockly.utils.Rect(-BIG_NUM, BIG_NUM, left, BIG_NUM);\n  }\n};\n\n/**\n * Gets the toolbox item with the given id.\n * @param {string} id The id of the toolbox item.\n * @return {?Blockly.IToolboxItem} The toolbox item with the given id, or null if\n *     no item exists.\n * @public\n */\nBlockly.Toolbox.prototype.getToolboxItemById = function(id) {\n  return this.contentMap_[id];\n};\n\n/**\n * Gets the width of the toolbox.\n * @return {number} The width of the toolbox.\n * @public\n */\nBlockly.Toolbox.prototype.getWidth = function() {\n  return this.width_;\n};\n\n/**\n * Gets the height of the toolbox.\n * @return {number} The width of the toolbox.\n * @public\n */\nBlockly.Toolbox.prototype.getHeight = function() {\n  return this.height_;\n};\n\n/**\n * Gets the toolbox flyout.\n * @return {?Blockly.IFlyout} The toolbox flyout.\n * @public\n */\nBlockly.Toolbox.prototype.getFlyout = function() {\n  return this.flyout_;\n};\n\n/**\n * Gets the workspace for the toolbox.\n * @return {!Blockly.WorkspaceSvg} The parent workspace for the toolbox.\n * @public\n */\nBlockly.Toolbox.prototype.getWorkspace = function() {\n  return this.workspace_;\n};\n\n/**\n * Gets the selected item.\n * @return {?Blockly.ISelectableToolboxItem} The selected item, or null if no item is\n *     currently selected.\n * @public\n */\nBlockly.Toolbox.prototype.getSelectedItem = function() {\n  return this.selectedItem_;\n};\n\n/**\n * Gets the previously selected item.\n * @return {?Blockly.ISelectableToolboxItem} The previously selected item, or null if no\n *     item was previously selected.\n * @public\n */\nBlockly.Toolbox.prototype.getPreviouslySelectedItem = function() {\n  return this.previouslySelectedItem_;\n};\n\n/**\n * Gets whether or not the toolbox is horizontal.\n * @return {boolean} True if the toolbox is horizontal, false if the toolbox is\n *     vertical.\n * @public\n */\nBlockly.Toolbox.prototype.isHorizontal = function() {\n  return this.horizontalLayout_;\n};\n\n/**\n * Positions the toolbox based on whether it is a horizontal toolbox and whether\n * the workspace is in rtl.\n * @public\n */\nBlockly.Toolbox.prototype.position = function() {\n  var toolboxDiv = this.HtmlDiv;\n  if (!toolboxDiv) {\n    // Not initialized yet.\n    return;\n  }\n\n  if (this.horizontalLayout_) {\n    toolboxDiv.style.left = '0';\n    toolboxDiv.style.height = 'auto';\n    toolboxDiv.style.width = '100%';\n    this.height_ = toolboxDiv.offsetHeight;\n    if (this.toolboxPosition == Blockly.TOOLBOX_AT_TOP) {  // Top\n      toolboxDiv.style.top = '0';\n    } else {  // Bottom\n      toolboxDiv.style.bottom = '0';\n    }\n  } else {\n    if (this.toolboxPosition == Blockly.TOOLBOX_AT_RIGHT) {  // Right\n      toolboxDiv.style.right = '0';\n    } else {  // Left\n      toolboxDiv.style.left = '0';\n    }\n    toolboxDiv.style.height = '100%';\n    this.width_ = toolboxDiv.offsetWidth;\n  }\n  this.flyout_.position();\n};\n/**\n * Handles resizing the toolbox when a toolbox item resizes.\n * @package\n */\nBlockly.Toolbox.prototype.handleToolboxItemResize = function() {\n  // Reposition the workspace so that (0,0) is in the correct position relative\n  // to the new absolute edge (ie toolbox edge).\n  var workspace = this.workspace_;\n  var rect = this.HtmlDiv.getBoundingClientRect();\n  var newX = this.toolboxPosition == Blockly.TOOLBOX_AT_LEFT ?\n      workspace.scrollX + rect.width : workspace.scrollX;\n  var newY = this.toolboxPosition == Blockly.TOOLBOX_AT_TOP ?\n      workspace.scrollY + rect.height : workspace.scrollY;\n  workspace.translate(newX, newY);\n\n  // Even though the div hasn't changed size, the visible workspace\n  // surface of the workspace has, so we may need to reposition everything.\n  Blockly.svgResize(workspace);\n};\n\n/**\n * Unhighlights any previously selected item.\n * @public\n */\nBlockly.Toolbox.prototype.clearSelection = function() {\n  this.setSelectedItem(null);\n};\n\n/**\n * Updates the category colours and background colour of selected categories.\n * @package\n */\nBlockly.Toolbox.prototype.refreshTheme = function() {\n  for (var i = 0; i < this.contents_.length; i++) {\n    var child = this.contents_[i];\n    if (child.refreshTheme) {\n      child.refreshTheme();\n    }\n  }\n};\n\n/**\n * Updates the flyout's content without closing it.  Should be used in response\n * to a change in one of the dynamic categories, such as variables or\n * procedures.\n * @public\n */\nBlockly.Toolbox.prototype.refreshSelection = function() {\n  if (this.selectedItem_ && this.selectedItem_.isSelectable() &&\n      this.selectedItem_.getContents().length) {\n    this.flyout_.show(this.selectedItem_.getContents());\n  }\n};\n\n/**\n * Shows or hides the toolbox.\n * @param {boolean} isVisible True if toolbox should be visible.\n * @public\n */\nBlockly.Toolbox.prototype.setVisible = function(isVisible) {\n  this.HtmlDiv.style.display = isVisible ? 'block' : 'none';\n};\n\n/**\n * Sets the given item as selected.\n * No-op if the item is not selectable.\n * @param {?Blockly.IToolboxItem} newItem The toolbox item to select.\n * @public\n */\nBlockly.Toolbox.prototype.setSelectedItem = function(newItem) {\n  var oldItem = this.selectedItem_;\n\n  if ((!newItem && !oldItem) || (newItem && !newItem.isSelectable())) {\n    return;\n  }\n  newItem = /** @type {Blockly.ISelectableToolboxItem} */ (newItem);\n\n  if (this.shouldDeselectItem_(oldItem, newItem) && oldItem != null) {\n    this.deselectItem_(oldItem);\n  }\n\n  if (this.shouldSelectItem_(oldItem, newItem) && newItem != null) {\n    this.selectItem_(oldItem, newItem);\n  }\n\n  this.updateFlyout_(oldItem, newItem);\n  this.fireSelectEvent_(oldItem, newItem);\n};\n\n/**\n * Decides whether the old item should be deselected.\n * @param {?Blockly.ISelectableToolboxItem} oldItem The previously selected\n *     toolbox item.\n * @param {?Blockly.ISelectableToolboxItem} newItem The newly selected toolbox\n *     item.\n * @return {boolean} True if the old item should be deselected, false otherwise.\n * @protected\n */\nBlockly.Toolbox.prototype.shouldDeselectItem_ = function(oldItem, newItem) {\n  // Deselect the old item unless the old item is collapsible and has been\n  // previously clicked on.\n  return oldItem != null && (!oldItem.isCollapsible() || oldItem != newItem);\n};\n\n/**\n * Decides whether the new item should be selected.\n * @param {?Blockly.ISelectableToolboxItem} oldItem The previously selected\n *     toolbox item.\n * @param {?Blockly.ISelectableToolboxItem} newItem The newly selected toolbox\n *     item.\n * @return {boolean} True if the new item should be selected, false otherwise.\n * @protected\n */\nBlockly.Toolbox.prototype.shouldSelectItem_ = function(oldItem, newItem) {\n  // Select the new item unless the old item equals the new item.\n  return newItem != null && newItem != oldItem;\n};\n\n/**\n * Deselects the given item, marks it as unselected, and updates aria state.\n * @param {!Blockly.ISelectableToolboxItem} item The previously selected\n *     toolbox item which should be deselected.\n * @protected\n */\nBlockly.Toolbox.prototype.deselectItem_ = function(item) {\n  this.selectedItem_ = null;\n  this.previouslySelectedItem_ = item;\n  item.setSelected(false);\n  Blockly.utils.aria.setState(/** @type {!Element} */ (this.contentsDiv_),\n      Blockly.utils.aria.State.ACTIVEDESCENDANT, '');\n};\n\n/**\n * Selects the given item, marks it selected, and updates aria state.\n * @param {?Blockly.ISelectableToolboxItem} oldItem The previously selected\n *     toolbox item.\n * @param {!Blockly.ISelectableToolboxItem} newItem The newly selected toolbox\n *     item.\n * @protected\n */\nBlockly.Toolbox.prototype.selectItem_ = function(oldItem, newItem) {\n  this.selectedItem_ = newItem;\n  this.previouslySelectedItem_ = oldItem;\n  newItem.setSelected(true);\n  Blockly.utils.aria.setState(/** @type {!Element} */ (this.contentsDiv_),\n      Blockly.utils.aria.State.ACTIVEDESCENDANT, newItem.getId());\n};\n\n/**\n * Selects the toolbox item by its position in the list of toolbox items.\n * @param {number} position The position of the item to select.\n * @public\n */\nBlockly.Toolbox.prototype.selectItemByPosition = function(position) {\n  if (position > -1 && position < this.contents_.length) {\n    var item = this.contents_[position];\n    if (item.isSelectable()) {\n      this.setSelectedItem(item);\n    }\n  }\n};\n\n/**\n * Decides whether to hide or show the flyout depending on the selected item.\n * @param {?Blockly.ISelectableToolboxItem} oldItem The previously selected toolbox item.\n * @param {?Blockly.ISelectableToolboxItem} newItem The newly selected toolbox item.\n * @protected\n */\nBlockly.Toolbox.prototype.updateFlyout_ = function(oldItem, newItem) {\n  if ((oldItem == newItem && !newItem.isCollapsible()) || !newItem ||\n      !newItem.getContents().length) {\n    this.flyout_.hide();\n  } else {\n    this.flyout_.show(newItem.getContents());\n    this.flyout_.scrollToStart();\n  }\n};\n\n/**\n * Emits an event when a new toolbox item is selected.\n * @param {?Blockly.ISelectableToolboxItem} oldItem The previously selected\n *     toolbox item.\n * @param {?Blockly.ISelectableToolboxItem} newItem The newly selected toolbox\n *     item.\n * @private\n */\nBlockly.Toolbox.prototype.fireSelectEvent_ = function(oldItem, newItem) {\n  var oldElement = oldItem && oldItem.getName();\n  var newElement = newItem && newItem.getName();\n  // In this case the toolbox closes, so the newElement should be null.\n  if (oldItem == newItem) {\n    newElement = null;\n  }\n  // TODO (#4187): Update Toolbox Events.\n  var event = new Blockly.Events.Ui(null, 'category',\n      oldElement, newElement);\n  event.workspaceId = this.workspace_.id;\n  Blockly.Events.fire(event);\n};\n\n/**\n * Handles the given Blockly action on a toolbox.\n * This is only triggered when keyboard accessibility mode is enabled.\n * @param {!Blockly.Action} action The action to be handled.\n * @return {boolean} True if the field handled the action, false otherwise.\n * @package\n */\nBlockly.Toolbox.prototype.onBlocklyAction = function(action) {\n  var selected = this.selectedItem_;\n  if (!selected) {\n    return false;\n  }\n  switch (action.name) {\n    case Blockly.navigation.actionNames.PREVIOUS:\n      return this.selectPrevious_();\n    case Blockly.navigation.actionNames.OUT:\n      return this.selectParent_();\n    case Blockly.navigation.actionNames.NEXT:\n      return this.selectNext_();\n    case Blockly.navigation.actionNames.IN:\n      return this.selectChild_();\n    default:\n      return false;\n  }\n};\n\n/**\n * Closes the current item if it is expanded, or selects the parent.\n * @return {boolean} True if a parent category was selected, false otherwise.\n * @private\n */\nBlockly.Toolbox.prototype.selectParent_ = function() {\n  if (!this.selectedItem_) {\n    return false;\n  }\n\n  if (this.selectedItem_.isCollapsible() && this.selectedItem_.isExpanded()) {\n    var collapsibleItem = /** @type {!Blockly.ICollapsibleToolboxItem} */ (this.selectedItem_);\n    collapsibleItem.setExpanded(false);\n    return true;\n  } else if (this.selectedItem_.getParent() &&\n      this.selectedItem_.getParent().isSelectable()) {\n    this.setSelectedItem(this.selectedItem_.getParent());\n    return true;\n  }\n  return false;\n};\n\n/**\n * Selects the first child of the currently selected item, or nothing if the\n * toolbox item has no children.\n * @return {boolean} True if a child category was selected, false otherwise.\n * @private\n */\nBlockly.Toolbox.prototype.selectChild_ = function() {\n  if (!this.selectedItem_ || !this.selectedItem_.isCollapsible()) {\n    return false;\n  }\n  var collapsibleItem = /** @type {Blockly.ICollapsibleToolboxItem} */\n      (this.selectedItem_);\n  if (!collapsibleItem.isExpanded()) {\n    collapsibleItem.setExpanded(true);\n    return true;\n  } else {\n    this.selectNext_();\n    return true;\n  }\n};\n\n/**\n * Selects the next visible toolbox item.\n * @return {boolean} True if a next category was selected, false otherwise.\n * @private\n */\nBlockly.Toolbox.prototype.selectNext_ = function() {\n  if (!this.selectedItem_) {\n    return false;\n  }\n\n  var nextItemIdx = this.contents_.indexOf(this.selectedItem_) + 1;\n  if (nextItemIdx > -1 && nextItemIdx < this.contents_.length) {\n    var nextItem = this.contents_[nextItemIdx];\n    while (nextItem && !nextItem.isSelectable()) {\n      nextItem = this.contents_[++nextItemIdx];\n    }\n    if (nextItem && nextItem.isSelectable()) {\n      this.setSelectedItem(nextItem);\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * Selects the previous visible toolbox item.\n * @return {boolean} True if a previous category was selected, false otherwise.\n * @private\n */\nBlockly.Toolbox.prototype.selectPrevious_ = function() {\n  if (!this.selectedItem_) {\n    return false;\n  }\n\n  var prevItemIdx = this.contents_.indexOf(this.selectedItem_) - 1;\n  if (prevItemIdx > -1 && prevItemIdx < this.contents_.length) {\n    var prevItem = this.contents_[prevItemIdx];\n    while (prevItem && !prevItem.isSelectable()) {\n      prevItem = this.contents_[--prevItemIdx];\n    }\n    if (prevItem && prevItem.isSelectable()) {\n      this.setSelectedItem(prevItem);\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * Disposes of this toolbox.\n * @public\n */\nBlockly.Toolbox.prototype.dispose = function() {\n  this.flyout_.dispose();\n  for (var i = 0; i < this.contents_.length; i++) {\n    var toolboxItem = this.contents_[i];\n    toolboxItem.dispose();\n  }\n\n  for (var j = 0; j < this.boundEvents_.length; j++) {\n    Blockly.unbindEvent_(this.boundEvents_[j]);\n  }\n  this.boundEvents_ = [];\n  this.contents_ = [];\n\n  this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv);\n  Blockly.utils.dom.removeNode(this.HtmlDiv);\n};\n\n/**\n * CSS for Toolbox.  See css.js for use.\n */\nBlockly.Css.register([\n  /* eslint-disable indent */\n  '.blocklyToolboxDelete {',\n    'cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;',\n  '}',\n\n  '.blocklyToolboxGrab {',\n    'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\n    'cursor: grabbing;',\n    'cursor: -webkit-grabbing;',\n  '}',\n\n  /* Category tree in Toolbox. */\n  '.blocklyToolboxDiv {',\n    'background-color: #ddd;',\n    'overflow-x: visible;',\n    'overflow-y: auto;',\n    'padding: 4px 0 4px 0;',\n    'position: absolute;',\n    'z-index: 70;', /* so blocks go under toolbox when dragging */\n    '-webkit-tap-highlight-color: transparent;', /* issue #1345 */\n  '}',\n\n  '.blocklyToolboxContents {',\n    'display: flex;',\n    'flex-wrap: wrap;',\n    'flex-direction: column;',\n  '}',\n\n  '.blocklyToolboxContents:focus {',\n    'outline: none;',\n  '}',\n  /* eslint-enable indent */\n]);\n\nBlockly.registry.register(Blockly.registry.Type.TOOLBOX,\n    Blockly.registry.DEFAULT, Blockly.Toolbox);\n","/**\n * @license\n * Copyright 2011 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a trash can icon.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Trashcan');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Scrollbar');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Rect');\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.toolbox');\ngoog.require('Blockly.Xml');\n\ngoog.requireType('Blockly.IDeleteArea');\ngoog.requireType('Blockly.IFlyout');\n\n\n/**\n * Class for a trash can.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace to sit in.\n * @constructor\n * @implements {Blockly.IDeleteArea}\n */\nBlockly.Trashcan = function(workspace) {\n  /**\n   * The workspace the trashcan sits in.\n   * @type {!Blockly.WorkspaceSvg}\n   * @private\n   */\n  this.workspace_ = workspace;\n\n  /**\n   * A list of XML (stored as strings) representing blocks in the trashcan.\n   * @type {!Array.<string>}\n   * @private\n   */\n  this.contents_ = [];\n\n  /**\n   * The trashcan flyout.\n   * @type {Blockly.IFlyout}\n   * @package\n   */\n  this.flyout = null;\n\n  if (this.workspace_.options.maxTrashcanContents <= 0) {\n    return;\n  }\n  // Create flyout options.\n  var flyoutWorkspaceOptions = new Blockly.Options(\n      /** @type {!Blockly.BlocklyOptions} */\n      ({\n        'scrollbars': true,\n        'parentWorkspace': this.workspace_,\n        'rtl': this.workspace_.RTL,\n        'oneBasedIndex': this.workspace_.options.oneBasedIndex,\n        'renderer': this.workspace_.options.renderer,\n        'rendererOverrides': this.workspace_.options.rendererOverrides\n      }));\n  // Create vertical or horizontal flyout.\n  if (this.workspace_.horizontalLayout) {\n    flyoutWorkspaceOptions.toolboxPosition =\n        this.workspace_.toolboxPosition == Blockly.utils.toolbox.Position.TOP ?\n        Blockly.utils.toolbox.Position.BOTTOM : Blockly.utils.toolbox.Position.TOP;\n    if (!Blockly.HorizontalFlyout) {\n      throw Error('Missing require for Blockly.HorizontalFlyout');\n    }\n    this.flyout = new Blockly.HorizontalFlyout(flyoutWorkspaceOptions);\n  } else {\n    flyoutWorkspaceOptions.toolboxPosition =\n      this.workspace_.toolboxPosition == Blockly.utils.toolbox.Position.RIGHT ?\n        Blockly.utils.toolbox.Position.LEFT : Blockly.utils.toolbox.Position.RIGHT;\n    if (!Blockly.VerticalFlyout) {\n      throw Error('Missing require for Blockly.VerticalFlyout');\n    }\n    this.flyout = new Blockly.VerticalFlyout(flyoutWorkspaceOptions);\n  }\n  this.workspace_.addChangeListener(this.onDelete_.bind(this));\n};\n\n/**\n * Width of both the trash can and lid images.\n * @const {number}\n * @private\n */\nBlockly.Trashcan.prototype.WIDTH_ = 47;\n\n/**\n * Height of the trashcan image (minus lid).\n * @const {number}\n * @private\n */\nBlockly.Trashcan.prototype.BODY_HEIGHT_ = 44;\n\n/**\n * Height of the lid image.\n * @const {number}\n * @private\n */\nBlockly.Trashcan.prototype.LID_HEIGHT_ = 16;\n\n/**\n * Distance between trashcan and bottom edge of workspace.\n * @const {number}\n * @private\n */\nBlockly.Trashcan.prototype.MARGIN_BOTTOM_ = 20;\n\n/**\n * Distance between trashcan and right edge of workspace.\n * @const {number}\n * @private\n */\nBlockly.Trashcan.prototype.MARGIN_SIDE_ = 20;\n\n/**\n * Extent of hotspot on all sides beyond the size of the image.\n * @const {number}\n * @private\n */\nBlockly.Trashcan.prototype.MARGIN_HOTSPOT_ = 10;\n\n/**\n * Location of trashcan in sprite image.\n * @const {number}\n * @private\n */\nBlockly.Trashcan.prototype.SPRITE_LEFT_ = 0;\n\n/**\n * Location of trashcan in sprite image.\n * @const {number}\n * @private\n */\nBlockly.Trashcan.prototype.SPRITE_TOP_ = 32;\n\n/**\n * The openness of the lid when the trashcan contains blocks.\n *    (0.0 = closed, 1.0 = open)\n * @const {number}\n * @private\n */\nBlockly.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_ = 0.1;\n\n/**\n * The length of the lid open/close animation in milliseconds.\n * @const {number}\n * @private\n */\nBlockly.Trashcan.ANIMATION_LENGTH_ = 80;\n\n/**\n * The number of frames in the animation.\n * @const {number}\n * @private\n */\nBlockly.Trashcan.ANIMATION_FRAMES_ = 4;\n\n/**\n * The minimum (resting) opacity of the trashcan and lid.\n * @const {number}\n * @private\n */\nBlockly.Trashcan.OPACITY_MIN_ = 0.4;\n\n/**\n * The maximum (hovered) opacity of the trashcan and lid.\n * @const {number}\n * @private\n */\nBlockly.Trashcan.OPACITY_MAX_ = 0.8;\n\n/**\n * The maximum angle the trashcan lid can opens to. At the end of the open\n * animation the lid will be open to this angle.\n * @const {number}\n * @private\n */\nBlockly.Trashcan.MAX_LID_ANGLE_ = 45;\n\n/**\n * Current open/close state of the lid.\n * @type {boolean}\n */\nBlockly.Trashcan.prototype.isLidOpen = false;\n\n/**\n * The minimum openness of the lid. Used to indicate if the trashcan contains\n *  blocks.\n * @type {number}\n * @private\n */\nBlockly.Trashcan.prototype.minOpenness_ = 0;\n\n/**\n * The SVG group containing the trash can.\n * @type {SVGElement}\n * @private\n */\nBlockly.Trashcan.prototype.svgGroup_ = null;\n\n/**\n * The SVG image element of the trash can lid.\n * @type {SVGElement}\n * @private\n */\nBlockly.Trashcan.prototype.svgLid_ = null;\n\n/**\n * Task ID of opening/closing animation.\n * @type {number}\n * @private\n */\nBlockly.Trashcan.prototype.lidTask_ = 0;\n\n/**\n * Current state of lid opening (0.0 = closed, 1.0 = open).\n * @type {number}\n * @private\n */\nBlockly.Trashcan.prototype.lidOpen_ = 0;\n\n/**\n * Left coordinate of the trash can.\n * @type {number}\n * @private\n */\nBlockly.Trashcan.prototype.left_ = 0;\n\n/**\n * Top coordinate of the trash can.\n * @type {number}\n * @private\n */\nBlockly.Trashcan.prototype.top_ = 0;\n\n/**\n * Create the trash can elements.\n * @return {!SVGElement} The trash can's SVG group.\n */\nBlockly.Trashcan.prototype.createDom = function() {\n  /* Here's the markup that will be generated:\n  <g class=\"blocklyTrash\">\n    <clippath id=\"blocklyTrashBodyClipPath837493\">\n      <rect width=\"47\" height=\"45\" y=\"15\"></rect>\n    </clippath>\n    <image width=\"64\" height=\"92\" y=\"-32\" xlink:href=\"media/sprites.png\"\n        clip-path=\"url(#blocklyTrashBodyClipPath837493)\"></image>\n    <clippath id=\"blocklyTrashLidClipPath837493\">\n      <rect width=\"47\" height=\"15\"></rect>\n    </clippath>\n    <image width=\"84\" height=\"92\" y=\"-32\" xlink:href=\"media/sprites.png\"\n        clip-path=\"url(#blocklyTrashLidClipPath837493)\"></image>\n  </g>\n  */\n  this.svgGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G,\n      {'class': 'blocklyTrash'}, null);\n  var clip;\n  var rnd = String(Math.random()).substring(2);\n  clip = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.CLIPPATH,\n      {'id': 'blocklyTrashBodyClipPath' + rnd},\n      this.svgGroup_);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {\n        'width': this.WIDTH_,\n        'height': this.BODY_HEIGHT_,\n        'y': this.LID_HEIGHT_\n      },\n      clip);\n  var body = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.IMAGE,\n      {\n        'width': Blockly.SPRITE.width,\n        'x': -this.SPRITE_LEFT_,\n        'height': Blockly.SPRITE.height,\n        'y': -this.SPRITE_TOP_,\n        'clip-path': 'url(#blocklyTrashBodyClipPath' + rnd + ')'\n      },\n      this.svgGroup_);\n  body.setAttributeNS(Blockly.utils.dom.XLINK_NS, 'xlink:href',\n      this.workspace_.options.pathToMedia + Blockly.SPRITE.url);\n\n  clip = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.CLIPPATH,\n      {'id': 'blocklyTrashLidClipPath' + rnd},\n      this.svgGroup_);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {'width': this.WIDTH_, 'height': this.LID_HEIGHT_}, clip);\n  this.svgLid_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.IMAGE,\n      {\n        'width': Blockly.SPRITE.width,\n        'x': -this.SPRITE_LEFT_,\n        'height': Blockly.SPRITE.height,\n        'y': -this.SPRITE_TOP_,\n        'clip-path': 'url(#blocklyTrashLidClipPath' + rnd + ')'\n      },\n      this.svgGroup_);\n  this.svgLid_.setAttributeNS(Blockly.utils.dom.XLINK_NS, 'xlink:href',\n      this.workspace_.options.pathToMedia + Blockly.SPRITE.url);\n\n  Blockly.bindEventWithChecks_(this.svgGroup_, 'mouseup', this, this.click);\n  // bindEventWithChecks_ quashes events too aggressively. See:\n  // https://groups.google.com/forum/#!topic/blockly/QF4yB9Wx00s\n  // Bind to body instead of this.svgGroup_ so that we don't get lid jitters\n  Blockly.bindEvent_(body, 'mouseover', this, this.mouseOver_);\n  Blockly.bindEvent_(body, 'mouseout', this, this.mouseOut_);\n  this.animateLid_();\n  return this.svgGroup_;\n};\n\n/**\n * Initialize the trash can.\n * @param {number} verticalSpacing Vertical distance from workspace edge to the\n *    same edge of the trashcan.\n * @return {number} Vertical distance from workspace edge to the opposite\n *    edge of the trashcan.\n */\nBlockly.Trashcan.prototype.init = function(verticalSpacing) {\n  if (this.workspace_.options.maxTrashcanContents > 0) {\n    Blockly.utils.dom.insertAfter(\n        this.flyout.createDom(Blockly.utils.Svg.SVG),\n        this.workspace_.getParentSvg());\n    this.flyout.init(this.workspace_);\n  }\n\n  this.verticalSpacing_ = this.MARGIN_BOTTOM_ + verticalSpacing;\n  this.setLidOpen(false);\n  return this.verticalSpacing_ + this.BODY_HEIGHT_ + this.LID_HEIGHT_;\n};\n\n/**\n * Dispose of this trash can.\n * Unlink from all DOM elements to prevent memory leaks.\n * @suppress {checkTypes}\n */\nBlockly.Trashcan.prototype.dispose = function() {\n  if (this.svgGroup_) {\n    Blockly.utils.dom.removeNode(this.svgGroup_);\n    this.svgGroup_ = null;\n  }\n  this.svgLid_ = null;\n  this.workspace_ = null;\n  clearTimeout(this.lidTask_);\n};\n\n/**\n * Whether the trashcan has contents.\n * @return {boolean} True if the trashcan has contents.\n * @private\n */\nBlockly.Trashcan.prototype.hasContents_ = function() {\n  return !!this.contents_.length;\n};\n\n/**\n * Returns true if the trashcan contents-flyout is currently open.\n * @return {boolean} True if the trashcan contents-flyout is currently open.\n */\nBlockly.Trashcan.prototype.contentsIsOpen = function() {\n  return this.flyout.isVisible();\n};\n\n/**\n * Opens the trashcan flyout.\n */\nBlockly.Trashcan.prototype.openFlyout = function() {\n  if (this.contentsIsOpen()) {\n    return;\n  }\n\n  var xml = [];\n  for (var i = 0, text; (text = this.contents_[i]); i++) {\n    xml[i] = Blockly.Xml.textToDom(text);\n  }\n  this.flyout.show(xml);\n  this.fireUiEvent_(true);\n};\n\n/**\n * Closes the trashcan flyout.\n */\nBlockly.Trashcan.prototype.closeFlyout = function() {\n  if (!this.contentsIsOpen()) {\n    return;\n  }\n\n  this.flyout.hide();\n  this.fireUiEvent_(false);\n};\n\n/**\n * Empties the trashcan's contents. If the contents-flyout is currently open\n * it will be closed.\n */\nBlockly.Trashcan.prototype.emptyContents = function() {\n  if (!this.hasContents_()) {\n    return;\n  }\n  this.contents_.length = 0;\n  this.setMinOpenness_(0);\n  this.closeFlyout();\n};\n\n/**\n * Position the trashcan.\n * It is positioned in the opposite corner to the corner the\n * categories/toolbox starts at.\n */\nBlockly.Trashcan.prototype.position = function() {\n  // Not yet initialized.\n  if (!this.verticalSpacing_) {\n    return;\n  }\n  var metrics = this.workspace_.getMetrics();\n  if (!metrics) {\n    // There are no metrics available (workspace is probably not visible).\n    return;\n  }\n  if (metrics.toolboxPosition == Blockly.TOOLBOX_AT_LEFT ||\n      (this.workspace_.horizontalLayout && !this.workspace_.RTL)) {\n    // Toolbox starts in the left corner.\n    this.left_ = metrics.viewWidth + metrics.absoluteLeft -\n        this.WIDTH_ - this.MARGIN_SIDE_ - Blockly.Scrollbar.scrollbarThickness;\n  } else {\n    // Toolbox starts in the right corner.\n    this.left_ = this.MARGIN_SIDE_ + Blockly.Scrollbar.scrollbarThickness;\n  }\n\n  if (metrics.toolboxPosition == Blockly.TOOLBOX_AT_BOTTOM) {\n    this.top_ = this.verticalSpacing_;\n  } else {\n    this.top_ = metrics.viewHeight + metrics.absoluteTop -\n        (this.BODY_HEIGHT_ + this.LID_HEIGHT_) - this.verticalSpacing_;\n  }\n\n  this.svgGroup_.setAttribute('transform',\n      'translate(' + this.left_ + ',' + this.top_ + ')');\n};\n\n/**\n * Return the deletion rectangle for this trash can.\n * @return {Blockly.utils.Rect} Rectangle in which to delete.\n */\nBlockly.Trashcan.prototype.getClientRect = function() {\n  if (!this.svgGroup_) {\n    return null;\n  }\n\n  var trashRect = this.svgGroup_.getBoundingClientRect();\n  var top = trashRect.top + this.SPRITE_TOP_ - this.MARGIN_HOTSPOT_;\n  var bottom = top + this.LID_HEIGHT_ + this.BODY_HEIGHT_ +\n      2 * this.MARGIN_HOTSPOT_;\n  var left = trashRect.left + this.SPRITE_LEFT_ - this.MARGIN_HOTSPOT_;\n  var right = left + this.WIDTH_ + 2 * this.MARGIN_HOTSPOT_;\n  return new Blockly.utils.Rect(top, bottom, left, right);\n};\n\n/**\n * Flip the lid open or shut.\n * @param {boolean} state True if open.\n * @package\n */\nBlockly.Trashcan.prototype.setLidOpen = function(state) {\n  if (this.isLidOpen == state) {\n    return;\n  }\n  clearTimeout(this.lidTask_);\n  this.isLidOpen = state;\n  this.animateLid_();\n};\n\n/**\n * Rotate the lid open or closed by one step.  Then wait and recurse.\n * @private\n */\nBlockly.Trashcan.prototype.animateLid_ = function() {\n  var frames = Blockly.Trashcan.ANIMATION_FRAMES_;\n\n  var delta = 1 / (frames + 1);\n  this.lidOpen_ += this.isLidOpen ? delta : -delta;\n  this.lidOpen_ = Math.min(Math.max(this.lidOpen_, this.minOpenness_), 1);\n\n  this.setLidAngle_(this.lidOpen_ * Blockly.Trashcan.MAX_LID_ANGLE_);\n\n  var minOpacity = Blockly.Trashcan.OPACITY_MIN_;\n  var maxOpacity = Blockly.Trashcan.OPACITY_MAX_;\n  // Linear interpolation between min and max.\n  var opacity = minOpacity + this.lidOpen_ * (maxOpacity - minOpacity);\n  this.svgGroup_.style.opacity = opacity;\n\n  if (this.lidOpen_ > this.minOpenness_ && this.lidOpen_ < 1) {\n    this.lidTask_ = setTimeout(this.animateLid_.bind(this),\n        Blockly.Trashcan.ANIMATION_LENGTH_ / frames);\n  }\n};\n\n/**\n * Set the angle of the trashcan's lid.\n * @param {number} lidAngle The angle at which to set the lid.\n * @private\n */\nBlockly.Trashcan.prototype.setLidAngle_ = function(lidAngle) {\n  var openAtRight = this.workspace_.toolboxPosition == Blockly.TOOLBOX_AT_RIGHT ||\n      (this.workspace_.horizontalLayout && this.workspace_.RTL);\n  this.svgLid_.setAttribute('transform', 'rotate(' +\n      (openAtRight ? -lidAngle : lidAngle) + ',' +\n      (openAtRight ? 4 : this.WIDTH_ - 4) + ',' +\n      (this.LID_HEIGHT_ - 2) + ')');\n};\n\n/**\n * Sets the minimum openness of the trashcan lid. If the lid is currently\n * closed, this will update lid's position.\n * @param {number} newMin The new minimum openness of the lid. Should be between\n *     0 and 1.\n * @private\n */\nBlockly.Trashcan.prototype.setMinOpenness_ = function(newMin) {\n  this.minOpenness_ = newMin;\n  if (!this.isLidOpen) {\n    this.setLidAngle_(newMin * Blockly.Trashcan.MAX_LID_ANGLE_);\n  }\n};\n\n/**\n * Flip the lid shut.\n * Called externally after a drag.\n */\nBlockly.Trashcan.prototype.closeLid = function() {\n  this.setLidOpen(false);\n};\n\n/**\n * Inspect the contents of the trash.\n */\nBlockly.Trashcan.prototype.click = function() {\n  if (!this.hasContents_()) {\n    return;\n  }\n  this.openFlyout();\n};\n\n/**\n * Fires a ui event for trashcan flyout open or close.\n * @param {boolean} trashcanOpen Whether the flyout is opening.\n * @private\n */\nBlockly.Trashcan.prototype.fireUiEvent_ = function(trashcanOpen) {\n  var uiEvent = new Blockly.Events.Ui(null, 'trashcanOpen', null, trashcanOpen);\n  uiEvent.workspaceId = this.workspace_.id;\n  Blockly.Events.fire(uiEvent);\n};\n\n/**\n * Indicate that the trashcan can be clicked (by opening it) if it has blocks.\n * @private\n */\nBlockly.Trashcan.prototype.mouseOver_ = function() {\n  if (this.hasContents_()) {\n    this.setLidOpen(true);\n  }\n};\n\n/**\n * Close the lid of the trashcan if it was open (Vis. it was indicating it had\n *    blocks).\n * @private\n */\nBlockly.Trashcan.prototype.mouseOut_ = function() {\n  // No need to do a .hasBlocks check here because if it doesn't the trashcan\n  // won't be open in the first place, and setOpen won't run.\n  this.setLidOpen(false);\n};\n\n/**\n * Handle a BLOCK_DELETE event. Adds deleted blocks oldXml to the content array.\n * @param {!Blockly.Events.Abstract} event Workspace event.\n * @private\n */\nBlockly.Trashcan.prototype.onDelete_ = function(event) {\n  if (this.workspace_.options.maxTrashcanContents <= 0) {\n    return;\n  }\n  // Must check that the tagName exists since oldXml can be a DocumentFragment.\n  if (event.type == Blockly.Events.BLOCK_DELETE && event.oldXml.tagName &&\n      event.oldXml.tagName.toLowerCase() != 'shadow') {\n    var cleanedXML = this.cleanBlockXML_(event.oldXml);\n    if (this.contents_.indexOf(cleanedXML) != -1) {\n      return;\n    }\n    this.contents_.unshift(cleanedXML);\n    while (this.contents_.length >\n        this.workspace_.options.maxTrashcanContents) {\n      this.contents_.pop();\n    }\n\n    this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_);\n  }\n};\n\n/**\n * Converts XML representing a block into text that can be stored in the\n *    content array.\n * @param {!Element} xml An XML tree defining the block and any\n *    connected child blocks.\n * @return {string} Text representing the XML tree, cleaned of all unnecessary\n * attributes.\n * @private\n */\nBlockly.Trashcan.prototype.cleanBlockXML_ = function(xml) {\n  var xmlBlock = xml.cloneNode(true);\n  var node = xmlBlock;\n  while (node) {\n    // Things like text inside tags are still treated as nodes, but they\n    // don't have attributes (or the removeAttribute function) so we can\n    // skip removing attributes from them.\n    if (node.removeAttribute) {\n      node.removeAttribute('x');\n      node.removeAttribute('y');\n      node.removeAttribute('id');\n      node.removeAttribute('disabled');\n      if (node.nodeName == 'comment') {  // Future proof just in case.\n        node.removeAttribute('h');\n        node.removeAttribute('w');\n        node.removeAttribute('pinned');\n      }\n    }\n\n    // Try to go down the tree\n    var nextNode = node.firstChild || node.nextSibling;\n    // If we can't go down, try to go back up the tree.\n    if (!nextNode) {\n      nextNode = node.parentNode;\n      while (nextNode) {\n        // We are valid again!\n        if (nextNode.nextSibling) {\n          nextNode = nextNode.nextSibling;\n          break;\n        }\n        // Try going up again. If parentNode is null that means we have\n        // reached the top, and we will break out of both loops.\n        nextNode = nextNode.parentNode;\n      }\n    }\n    node = nextNode;\n  }\n  return Blockly.Xml.domToText(xmlBlock);\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Utility functions for handling typed variables.\n *\n * @author duzc2dtw@gmail.com (Du Tian Wei)\n */\n'use strict';\n\ngoog.provide('Blockly.VariablesDynamic');\n\ngoog.require('Blockly.Variables');\ngoog.require('Blockly.Blocks');\ngoog.require('Blockly.Msg');\ngoog.require('Blockly.utils.xml');\ngoog.require('Blockly.VariableModel');\n\n\nBlockly.VariablesDynamic.onCreateVariableButtonClick_String = function(button) {\n  Blockly.Variables.createVariableButtonHandler(button.getTargetWorkspace(),\n      undefined, 'String');\n};\nBlockly.VariablesDynamic.onCreateVariableButtonClick_Number = function(button) {\n  Blockly.Variables.createVariableButtonHandler(button.getTargetWorkspace(),\n      undefined, 'Number');\n};\nBlockly.VariablesDynamic.onCreateVariableButtonClick_Colour = function(button) {\n  Blockly.Variables.createVariableButtonHandler(button.getTargetWorkspace(),\n      undefined, 'Colour');\n};\n/**\n * Construct the elements (blocks and button) required by the flyout for the\n * variable category.\n * @param {!Blockly.Workspace} workspace The workspace containing variables.\n * @return {!Array.<!Element>} Array of XML elements.\n */\nBlockly.VariablesDynamic.flyoutCategory = function(workspace) {\n  var xmlList = [];\n  var button = document.createElement('button');\n  button.setAttribute('text', Blockly.Msg['NEW_STRING_VARIABLE']);\n  button.setAttribute('callbackKey', 'CREATE_VARIABLE_STRING');\n  xmlList.push(button);\n  button = document.createElement('button');\n  button.setAttribute('text', Blockly.Msg['NEW_NUMBER_VARIABLE']);\n  button.setAttribute('callbackKey', 'CREATE_VARIABLE_NUMBER');\n  xmlList.push(button);\n  button = document.createElement('button');\n  button.setAttribute('text', Blockly.Msg['NEW_COLOUR_VARIABLE']);\n  button.setAttribute('callbackKey', 'CREATE_VARIABLE_COLOUR');\n  xmlList.push(button);\n\n  workspace.registerButtonCallback('CREATE_VARIABLE_STRING',\n      Blockly.VariablesDynamic.onCreateVariableButtonClick_String);\n  workspace.registerButtonCallback('CREATE_VARIABLE_NUMBER',\n      Blockly.VariablesDynamic.onCreateVariableButtonClick_Number);\n  workspace.registerButtonCallback('CREATE_VARIABLE_COLOUR',\n      Blockly.VariablesDynamic.onCreateVariableButtonClick_Colour);\n\n\n  var blockList = Blockly.VariablesDynamic.flyoutCategoryBlocks(workspace);\n  xmlList = xmlList.concat(blockList);\n  return xmlList;\n};\n\n/**\n * Construct the blocks required by the flyout for the variable category.\n * @param {!Blockly.Workspace} workspace The workspace containing variables.\n * @return {!Array.<!Element>} Array of XML block elements.\n */\nBlockly.VariablesDynamic.flyoutCategoryBlocks = function(workspace) {\n  var variableModelList = workspace.getAllVariables();\n\n  var xmlList = [];\n  if (variableModelList.length > 0) {\n    if (Blockly.Blocks['variables_set_dynamic']) {\n      var firstVariable = variableModelList[variableModelList.length - 1];\n      var block = Blockly.utils.xml.createElement('block');\n      block.setAttribute('type', 'variables_set_dynamic');\n      block.setAttribute('gap', 24);\n      block.appendChild(\n          Blockly.Variables.generateVariableFieldDom(firstVariable));\n      xmlList.push(block);\n    }\n    if (Blockly.Blocks['variables_get_dynamic']) {\n      variableModelList.sort(Blockly.VariableModel.compareByName);\n      for (var i = 0, variable; (variable = variableModelList[i]); i++) {\n        var block = Blockly.utils.xml.createElement('block');\n        block.setAttribute('type', 'variables_get_dynamic');\n        block.setAttribute('gap', 8);\n        block.appendChild(Blockly.Variables.generateVariableFieldDom(variable));\n        xmlList.push(block);\n      }\n    }\n  }\n  return xmlList;\n};\n","/**\n * @license\n * Copyright 2015 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a zoom icons.\n * @author carloslfu@gmail.com (Carlos Galarza)\n */\n'use strict';\n\ngoog.provide('Blockly.ZoomControls');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Css');\ngoog.require('Blockly.Scrollbar');\ngoog.require('Blockly.Touch');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for a zoom controls.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace to sit in.\n * @constructor\n */\nBlockly.ZoomControls = function(workspace) {\n  /**\n   * @type {!Blockly.WorkspaceSvg}\n   * @private\n   */\n  this.workspace_ = workspace;\n\n  /**\n   * A handle to use to unbind the mouse down event handler for zoom reset\n   *    button. Opaque data returned from Blockly.bindEventWithChecks_.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onZoomResetWrapper_ = null;\n\n  /**\n   * A handle to use to unbind the mouse down event handler for zoom in button.\n   * Opaque data returned from Blockly.bindEventWithChecks_.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onZoomInWrapper_ = null;\n\n  /**\n   * A handle to use to unbind the mouse down event handler for zoom out button.\n   * Opaque data returned from Blockly.bindEventWithChecks_.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onZoomOutWrapper_ = null;\n\n  /**\n   * The vertical distance between the workspace bottom edge and the control.\n   * The value is initialized during `init`.\n   * @type {?number}\n   * @private\n   */\n  this.verticalSpacing_ = null;\n\n  /**\n   * The zoom in svg <g> element.\n   * @type {SVGGElement}\n   * @private\n   */\n  this.zoomInGroup_ = null;\n\n  /**\n   * The zoom out svg <g> element.\n   * @type {SVGGElement}\n   * @private\n   */\n  this.zoomOutGroup_ = null;\n\n  /**\n   * The zoom reset svg <g> element.\n   * @type {SVGGElement}\n   * @private\n   */\n  this.zoomResetGroup_ = null;\n};\n\n/**\n * Width of the zoom controls.\n * @type {number}\n * @private\n */\nBlockly.ZoomControls.prototype.WIDTH_ = 32;\n\n/**\n * Height of the zoom controls.\n * @type {number}\n * @private\n */\nBlockly.ZoomControls.prototype.HEIGHT_ = 110;\n\n/**\n * Distance between zoom controls and bottom edge of workspace.\n * @type {number}\n * @private\n */\nBlockly.ZoomControls.prototype.MARGIN_BOTTOM_ = 20;\n\n/**\n * Distance between zoom controls and right edge of workspace.\n * @type {number}\n * @private\n */\nBlockly.ZoomControls.prototype.MARGIN_SIDE_ = 20;\n\n/**\n * The SVG group containing the zoom controls.\n * @type {SVGElement}\n * @private\n */\nBlockly.ZoomControls.prototype.svgGroup_ = null;\n\n/**\n * Left coordinate of the zoom controls.\n * @type {number}\n * @private\n */\nBlockly.ZoomControls.prototype.left_ = 0;\n\n/**\n * Top coordinate of the zoom controls.\n * @type {number}\n * @private\n */\nBlockly.ZoomControls.prototype.top_ = 0;\n\n\n/**\n * Create the zoom controls.\n * @return {!SVGElement} The zoom controls SVG group.\n */\nBlockly.ZoomControls.prototype.createDom = function() {\n  this.svgGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G, {}, null);\n\n  // Each filter/pattern needs a unique ID for the case of multiple Blockly\n  // instances on a page.  Browser behaviour becomes undefined otherwise.\n  // https://neil.fraser.name/news/2015/11/01/\n  var rnd = String(Math.random()).substring(2);\n  this.createZoomOutSvg_(rnd);\n  this.createZoomInSvg_(rnd);\n  if (this.workspace_.isMovable()) {\n    // If we zoom to the center and the workspace isn't movable we could\n    // loose blocks at the edges of the workspace.\n    this.createZoomResetSvg_(rnd);\n  }\n  return this.svgGroup_;\n};\n\n/**\n * Initialize the zoom controls.\n * @param {number} verticalSpacing Vertical distances from workspace edge to the\n *    same edge of the controls.\n * @return {number} Vertical distance from workspace edge to the opposite\n *    edge of the controls.\n */\nBlockly.ZoomControls.prototype.init = function(verticalSpacing) {\n  this.verticalSpacing_ = this.MARGIN_BOTTOM_ + verticalSpacing;\n  return this.verticalSpacing_ + this.HEIGHT_;\n};\n\n/**\n * Dispose of this zoom controls.\n * Unlink from all DOM elements to prevent memory leaks.\n */\nBlockly.ZoomControls.prototype.dispose = function() {\n  if (this.svgGroup_) {\n    Blockly.utils.dom.removeNode(this.svgGroup_);\n  }\n  if (this.onZoomResetWrapper_) {\n    Blockly.unbindEvent_(this.onZoomResetWrapper_);\n  }\n  if (this.onZoomInWrapper_) {\n    Blockly.unbindEvent_(this.onZoomInWrapper_);\n  }\n  if (this.onZoomOutWrapper_) {\n    Blockly.unbindEvent_(this.onZoomOutWrapper_);\n  }\n};\n\n/**\n * Position the zoom controls.\n * It is positioned in the opposite corner to the corner the\n * categories/toolbox starts at.\n */\nBlockly.ZoomControls.prototype.position = function() {\n  // Not yet initialized.\n  if (!this.verticalSpacing_) {\n    return;\n  }\n  var metrics = this.workspace_.getMetrics();\n  if (!metrics) {\n    // There are no metrics available (workspace is probably not visible).\n    return;\n  }\n  if (metrics.toolboxPosition == Blockly.TOOLBOX_AT_LEFT ||\n      (this.workspace_.horizontalLayout && !this.workspace_.RTL)) {\n    // Toolbox starts in the left corner.\n    this.left_ = metrics.viewWidth + metrics.absoluteLeft -\n        this.WIDTH_ - this.MARGIN_SIDE_ - Blockly.Scrollbar.scrollbarThickness;\n  } else {\n    // Toolbox starts in the right corner.\n    this.left_ = this.MARGIN_SIDE_ + Blockly.Scrollbar.scrollbarThickness;\n  }\n\n  if (metrics.toolboxPosition == Blockly.TOOLBOX_AT_BOTTOM) {\n    this.top_ = this.verticalSpacing_;\n    this.zoomInGroup_.setAttribute('transform', 'translate(0, 34)');\n    if (this.zoomResetGroup_) {\n      this.zoomResetGroup_.setAttribute('transform', 'translate(0, 77)');\n    }\n  } else {\n    this.top_ = metrics.viewHeight + metrics.absoluteTop -\n        this.HEIGHT_ - this.verticalSpacing_;\n    this.zoomInGroup_.setAttribute('transform', 'translate(0, 43)');\n    this.zoomOutGroup_.setAttribute('transform', 'translate(0, 77)');\n  }\n\n  this.svgGroup_.setAttribute('transform',\n      'translate(' + this.left_ + ',' + this.top_ + ')');\n};\n\n/**\n * Create the zoom in icon and its event handler.\n * @param {string} rnd The random string to use as a suffix in the clip path's\n *     ID.  These IDs must be unique in case there are multiple Blockly\n *     instances on the same page.\n * @private\n */\nBlockly.ZoomControls.prototype.createZoomOutSvg_ = function(rnd) {\n  /* This markup will be generated and added to the .svgGroup_:\n  <g class=\"blocklyZoom\">\n    <clipPath id=\"blocklyZoomoutClipPath837493\">\n      <rect width=\"32\" height=\"32></rect>\n    </clipPath>\n    <image width=\"96\" height=\"124\" x=\"-64\" y=\"-92\" xlink:href=\"media/sprites.png\"\n        clip-path=\"url(#blocklyZoomoutClipPath837493)\"></image>\n  </g>\n  */\n  this.zoomOutGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G,\n      {'class': 'blocklyZoom'}, this.svgGroup_);\n  var clip = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.CLIPPATH,\n      {\n        'id': 'blocklyZoomoutClipPath' + rnd\n      },\n      this.zoomOutGroup_);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {\n        'width': 32,\n        'height': 32,\n      },\n      clip);\n  var zoomoutSvg = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.IMAGE,\n      {\n        'width': Blockly.SPRITE.width,\n        'height': Blockly.SPRITE.height,\n        'x': -64,\n        'y': -92,\n        'clip-path': 'url(#blocklyZoomoutClipPath' + rnd + ')'\n      },\n      this.zoomOutGroup_);\n  zoomoutSvg.setAttributeNS(Blockly.utils.dom.XLINK_NS, 'xlink:href',\n      this.workspace_.options.pathToMedia + Blockly.SPRITE.url);\n\n  // Attach listener.\n  this.onZoomOutWrapper_ = Blockly.bindEventWithChecks_(\n      this.zoomOutGroup_, 'mousedown', null, this.zoom_.bind(this, -1));\n};\n\n/**\n * Create the zoom out icon and its event handler.\n * @param {string} rnd The random string to use as a suffix in the clip path's\n *     ID.  These IDs must be unique in case there are multiple Blockly\n *     instances on the same page.\n * @private\n */\nBlockly.ZoomControls.prototype.createZoomInSvg_ = function(rnd) {\n  /* This markup will be generated and added to the .svgGroup_:\n  <g class=\"blocklyZoom\">\n    <clipPath id=\"blocklyZoominClipPath837493\">\n      <rect width=\"32\" height=\"32\"></rect>\n    </clipPath>\n    <image width=\"96\" height=\"124\" x=\"-32\" y=\"-92\" xlink:href=\"media/sprites.png\"\n        clip-path=\"url(#blocklyZoominClipPath837493)\"></image>\n  </g>\n  */\n  this.zoomInGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G,\n      {'class': 'blocklyZoom'}, this.svgGroup_);\n  var clip = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.CLIPPATH,\n      {\n        'id': 'blocklyZoominClipPath' + rnd\n      },\n      this.zoomInGroup_);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {\n        'width': 32,\n        'height': 32,\n      },\n      clip);\n  var zoominSvg = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.IMAGE,\n      {\n        'width': Blockly.SPRITE.width,\n        'height': Blockly.SPRITE.height,\n        'x': -32,\n        'y': -92,\n        'clip-path': 'url(#blocklyZoominClipPath' + rnd + ')'\n      },\n      this.zoomInGroup_);\n  zoominSvg.setAttributeNS(Blockly.utils.dom.XLINK_NS, 'xlink:href',\n      this.workspace_.options.pathToMedia + Blockly.SPRITE.url);\n\n  // Attach listener.\n  this.onZoomInWrapper_ = Blockly.bindEventWithChecks_(\n      this.zoomInGroup_, 'mousedown', null, this.zoom_.bind(this, 1));\n};\n\n/**\n * Handles a mouse down event on the zoom in or zoom out buttons on the\n *    workspace.\n * @param {number} amount Amount of zooming. Negative amount values zoom out,\n *    and positive amount values zoom in.\n * @param {!Event} e A mouse down event.\n * @private\n */\nBlockly.ZoomControls.prototype.zoom_ = function(amount, e) {\n  this.workspace_.markFocused();\n  var oldZoom = this.workspace_.scale;\n  this.workspace_.zoomCenter(amount);\n  this.fireZoomEvent_(oldZoom);\n  Blockly.Touch.clearTouchIdentifier();  // Don't block future drags.\n  e.stopPropagation();  // Don't start a workspace scroll.\n  e.preventDefault();  // Stop double-clicking from selecting text.\n};\n\n/**\n * Create the zoom reset icon and its event handler.\n * @param {string} rnd The random string to use as a suffix in the clip path's\n *     ID.  These IDs must be unique in case there are multiple Blockly\n *     instances on the same page.\n * @private\n */\nBlockly.ZoomControls.prototype.createZoomResetSvg_ = function(rnd) {\n  /* This markup will be generated and added to the .svgGroup_:\n  <g class=\"blocklyZoom\">\n    <clipPath id=\"blocklyZoomresetClipPath837493\">\n      <rect width=\"32\" height=\"32\"></rect>\n    </clipPath>\n    <image width=\"96\" height=\"124\" x=\"-32\" y=\"-92\" xlink:href=\"media/sprites.png\"\n        clip-path=\"url(#blocklyZoomresetClipPath837493)\"></image>\n  </g>\n  */\n  this.zoomResetGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G,\n      {'class': 'blocklyZoom'}, this.svgGroup_);\n  var clip = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.CLIPPATH,\n      {\n        'id': 'blocklyZoomresetClipPath' + rnd\n      },\n      this.zoomResetGroup_);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {\n        'width': 32,\n        'height': 32\n      },\n      clip);\n  var zoomresetSvg = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.IMAGE,\n      {\n        'width': Blockly.SPRITE.width,\n        'height': Blockly.SPRITE.height,\n        'y': -92,\n        'clip-path': 'url(#blocklyZoomresetClipPath' + rnd + ')'\n      },\n      this.zoomResetGroup_);\n  zoomresetSvg.setAttributeNS(Blockly.utils.dom.XLINK_NS, 'xlink:href',\n      this.workspace_.options.pathToMedia + Blockly.SPRITE.url);\n\n  // Attach event listeners.\n  this.onZoomResetWrapper_ = Blockly.bindEventWithChecks_(\n      this.zoomResetGroup_, 'mousedown', null, this.resetZoom_.bind(this));\n};\n\n/**\n * Handles a mouse down event on the reset zoom button on the workspace.\n * @param {!Event} e A mouse down event.\n * @private\n */\nBlockly.ZoomControls.prototype.resetZoom_ = function(e) {\n  this.workspace_.markFocused();\n  var oldZoom = this.workspace_.scale;\n  this.workspace_.setScale(this.workspace_.options.zoomOptions.startScale);\n  this.workspace_.beginCanvasTransition();\n  this.workspace_.scrollCenter();\n  setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_), 500);\n  this.fireZoomEvent_(oldZoom);\n  Blockly.Touch.clearTouchIdentifier();  // Don't block future drags.\n  e.stopPropagation();  // Don't start a workspace scroll.\n  e.preventDefault();  // Stop double-clicking from selecting text.\n};\n\n/**\n * Fires a zoom control ui event.\n * @param {number} oldZoom The workspace scale before zoom happened.\n * @private\n */\nBlockly.ZoomControls.prototype.fireZoomEvent_ = function(oldZoom) {\n  var uiEvent = new Blockly.Events.Ui(null, 'zoom', oldZoom, this.workspace_.scale);\n  uiEvent.workspaceId = this.workspace_.id;\n  Blockly.Events.fire(uiEvent);\n};\n\n/**\n * CSS for zoom controls.  See css.js for use.\n */\nBlockly.Css.register([\n  /* eslint-disable indent */\n  '.blocklyZoom>image, .blocklyZoom>svg>image {',\n    'opacity: .4;',\n  '}',\n\n  '.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {',\n    'opacity: .6;',\n  '}',\n\n  '.blocklyZoom>image:active, .blocklyZoom>svg>image:active {',\n    'opacity: .8;',\n  '}'\n  /* eslint-enable indent */\n]);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Object representing a mutator dialog.  A mutator allows the\n * user to change the shape of a block using a nested blocks editor.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Mutator');\n\ngoog.require('Blockly.Bubble');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockChange');\ngoog.require('Blockly.Events.Ui');\ngoog.require('Blockly.Icon');\ngoog.require('Blockly.navigation');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.global');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.toolbox');\ngoog.require('Blockly.utils.xml');\ngoog.require('Blockly.WorkspaceSvg');\ngoog.require('Blockly.Xml');\n\ngoog.requireType('Blockly.utils.Metrics');\n\n\n/**\n * Class for a mutator dialog.\n * @param {!Array.<string>} quarkNames List of names of sub-blocks for flyout.\n * @extends {Blockly.Icon}\n * @constructor\n */\nBlockly.Mutator = function(quarkNames) {\n  Blockly.Mutator.superClass_.constructor.call(this, null);\n  this.quarkNames_ = quarkNames;\n};\nBlockly.utils.object.inherits(Blockly.Mutator, Blockly.Icon);\n\n/**\n * Width of workspace.\n * @private\n */\nBlockly.Mutator.prototype.workspaceWidth_ = 0;\n\n/**\n * Height of workspace.\n * @private\n */\nBlockly.Mutator.prototype.workspaceHeight_ = 0;\n\n/**\n * Set the block this mutator is associated with.\n * @param {Blockly.BlockSvg} block The block associated with this mutator.\n * @package\n */\nBlockly.Mutator.prototype.setBlock = function(block) {\n  this.block_ = block;\n};\n\n/**\n * Returns the workspace inside this mutator icon's bubble.\n * @return {Blockly.WorkspaceSvg} The workspace inside this mutator icon's\n *     bubble.\n * @package\n */\nBlockly.Mutator.prototype.getWorkspace = function() {\n  return this.workspace_;\n};\n\n/**\n * Draw the mutator icon.\n * @param {!Element} group The icon group.\n * @protected\n */\nBlockly.Mutator.prototype.drawIcon_ = function(group) {\n  // Square with rounded corners.\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {\n        'class': 'blocklyIconShape',\n        'rx': '4',\n        'ry': '4',\n        'height': '16',\n        'width': '16'\n      },\n      group);\n  // Gear teeth.\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH,\n      {\n        'class': 'blocklyIconSymbol',\n        'd': 'm4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,' +\n             '0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,' +\n             '-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,' +\n             '-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,' +\n             '-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 ' +\n             '-0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,' +\n             '0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z'\n      },\n      group);\n  // Axle hole.\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.CIRCLE,\n      {\n        'class': 'blocklyIconShape',\n        'r': '2.7',\n        'cx': '8',\n        'cy': '8'\n      },\n      group);\n};\n\n/**\n * Clicking on the icon toggles if the mutator bubble is visible.\n * Disable if block is uneditable.\n * @param {!Event} e Mouse click event.\n * @private\n * @override\n */\nBlockly.Mutator.prototype.iconClick_ = function(e) {\n  if (this.block_.isEditable()) {\n    Blockly.Icon.prototype.iconClick_.call(this, e);\n  }\n};\n\n/**\n * Create the editor for the mutator's bubble.\n * @return {!SVGElement} The top-level node of the editor.\n * @private\n */\nBlockly.Mutator.prototype.createEditor_ = function() {\n  /* Create the editor.  Here's the markup that will be generated:\n  <svg>\n    [Workspace]\n  </svg>\n  */\n  this.svgDialog_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.SVG,\n      {'x': Blockly.Bubble.BORDER_WIDTH, 'y': Blockly.Bubble.BORDER_WIDTH},\n      null);\n  // Convert the list of names into a list of XML objects for the flyout.\n  if (this.quarkNames_.length) {\n    var quarkXml = Blockly.utils.xml.createElement('xml');\n    for (var i = 0, quarkName; (quarkName = this.quarkNames_[i]); i++) {\n      var element = Blockly.utils.xml.createElement('block');\n      element.setAttribute('type', quarkName);\n      quarkXml.appendChild(element);\n    }\n  } else {\n    var quarkXml = null;\n  }\n  var workspaceOptions = new Blockly.Options(\n      /** @type {!Blockly.BlocklyOptions} */\n      ({\n        // If you want to enable disabling, also remove the\n        // event filter from workspaceChanged_ .\n        'disable': false,\n        'parentWorkspace': this.block_.workspace,\n        'media': this.block_.workspace.options.pathToMedia,\n        'rtl': this.block_.RTL,\n        'horizontalLayout': false,\n        'renderer': this.block_.workspace.options.renderer,\n        'rendererOverrides': this.block_.workspace.options.rendererOverrides\n      }));\n  workspaceOptions.toolboxPosition = this.block_.RTL ?\n      Blockly.utils.toolbox.Position.RIGHT :\n      Blockly.utils.toolbox.Position.LEFT;\n  var hasFlyout = !!quarkXml;\n  if (hasFlyout) {\n    workspaceOptions.languageTree =\n        Blockly.utils.toolbox.convertToolboxDefToJson(quarkXml);\n    workspaceOptions.getMetrics = this.getFlyoutMetrics_.bind(this);\n  }\n  this.workspace_ = new Blockly.WorkspaceSvg(workspaceOptions);\n  this.workspace_.isMutator = true;\n  this.workspace_.addChangeListener(Blockly.Events.disableOrphans);\n\n  // Mutator flyouts go inside the mutator workspace's <g> rather than in\n  // a top level svg. Instead of handling scale themselves, mutators\n  // inherit scale from the parent workspace.\n  // To fix this, scale needs to be applied at a different level in the dom.\n  var flyoutSvg = hasFlyout ?\n      this.workspace_.addFlyout(Blockly.utils.Svg.G) : null;\n  var background = this.workspace_.createDom('blocklyMutatorBackground');\n\n  if (flyoutSvg) {\n    // Insert the flyout after the <rect> but before the block canvas so that\n    // the flyout is underneath in z-order.  This makes blocks layering during\n    // dragging work properly.\n    background.insertBefore(flyoutSvg, this.workspace_.svgBlockCanvas_);\n  }\n  this.svgDialog_.appendChild(background);\n\n  return this.svgDialog_;\n};\n\n/**\n * Add or remove the UI indicating if this icon may be clicked or not.\n */\nBlockly.Mutator.prototype.updateEditable = function() {\n  Blockly.Mutator.superClass_.updateEditable.call(this);\n  if (!this.block_.isInFlyout) {\n    if (this.block_.isEditable()) {\n      if (this.iconGroup_) {\n        Blockly.utils.dom.removeClass(\n            /** @type {!Element} */ (this.iconGroup_),\n            'blocklyIconGroupReadonly');\n      }\n    } else {\n      // Close any mutator bubble.  Icon is not clickable.\n      this.setVisible(false);\n      if (this.iconGroup_) {\n        Blockly.utils.dom.addClass(\n            /** @type {!Element} */ (this.iconGroup_),\n            'blocklyIconGroupReadonly');\n      }\n    }\n  }\n};\n\n/**\n * Resize the bubble to match the size of the workspace.\n * @private\n */\nBlockly.Mutator.prototype.resizeBubble_ = function() {\n  var doubleBorderWidth = 2 * Blockly.Bubble.BORDER_WIDTH;\n  var workspaceSize = this.workspace_.getCanvas().getBBox();\n  var width = workspaceSize.width + workspaceSize.x;\n  var height = workspaceSize.height + doubleBorderWidth * 3;\n  var flyout = this.workspace_.getFlyout();\n  if (flyout) {\n    var flyoutMetrics = flyout.getMetrics_();\n    height = Math.max(height, flyoutMetrics.contentHeight + 20);\n    width += flyout.getWidth();\n  }\n  if (this.block_.RTL) {\n    width = -workspaceSize.x;\n  }\n  width += doubleBorderWidth * 3;\n  // Only resize if the size difference is significant.  Eliminates shuddering.\n  if (Math.abs(this.workspaceWidth_ - width) > doubleBorderWidth ||\n      Math.abs(this.workspaceHeight_ - height) > doubleBorderWidth) {\n    // Record some layout information for getFlyoutMetrics_.\n    this.workspaceWidth_ = width;\n    this.workspaceHeight_ = height;\n    // Resize the bubble.\n    this.bubble_.setBubbleSize(\n        width + doubleBorderWidth, height + doubleBorderWidth);\n    this.svgDialog_.setAttribute('width', this.workspaceWidth_);\n    this.svgDialog_.setAttribute('height', this.workspaceHeight_);\n  }\n\n  if (this.block_.RTL) {\n    // Scroll the workspace to always left-align.\n    var translation = 'translate(' + this.workspaceWidth_ + ',0)';\n    this.workspace_.getCanvas().setAttribute('transform', translation);\n  }\n  this.workspace_.resize();\n};\n\n/**\n * A method handler for when the bubble is moved.\n * @private\n */\nBlockly.Mutator.prototype.onBubbleMove_ = function() {\n  if (this.workspace_) {\n    this.workspace_.recordDeleteAreas();\n  }\n};\n\n/**\n * Show or hide the mutator bubble.\n * @param {boolean} visible True if the bubble should be visible.\n */\nBlockly.Mutator.prototype.setVisible = function(visible) {\n  if (visible == this.isVisible()) {\n    // No change.\n    return;\n  }\n  Blockly.Events.fire(\n      new Blockly.Events.Ui(this.block_, 'mutatorOpen', !visible, visible));\n  if (visible) {\n    // Create the bubble.\n    this.bubble_ = new Blockly.Bubble(\n        /** @type {!Blockly.WorkspaceSvg} */ (this.block_.workspace),\n        this.createEditor_(), this.block_.pathObject.svgPath,\n        /** @type {!Blockly.utils.Coordinate} */ (this.iconXY_), null, null);\n    // Expose this mutator's block's ID on its top-level SVG group.\n    this.bubble_.setSvgId(this.block_.id);\n    this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));\n    var tree = this.workspace_.options.languageTree;\n    var flyout = this.workspace_.getFlyout();\n    if (tree) {\n      flyout.init(this.workspace_);\n      flyout.show(tree);\n    }\n\n    this.rootBlock_ = this.block_.decompose(this.workspace_);\n    var blocks = this.rootBlock_.getDescendants(false);\n    for (var i = 0, child; (child = blocks[i]); i++) {\n      child.render();\n    }\n    // The root block should not be draggable or deletable.\n    this.rootBlock_.setMovable(false);\n    this.rootBlock_.setDeletable(false);\n    if (flyout) {\n      var margin = flyout.CORNER_RADIUS * 2;\n      var x = this.rootBlock_.RTL ? flyout.getWidth() + margin : margin;\n    } else {\n      var margin = 16;\n      var x = margin;\n    }\n    if (this.block_.RTL) {\n      x = -x;\n    }\n    this.rootBlock_.moveBy(x, margin);\n    // Save the initial connections, then listen for further changes.\n    if (this.block_.saveConnections) {\n      var thisMutator = this;\n      var mutatorBlock =\n        /** @type {{saveConnections: function(!Blockly.Block)}} */ (\n          this.block_);\n      mutatorBlock.saveConnections(this.rootBlock_);\n      this.sourceListener_ = function() {\n        mutatorBlock.saveConnections(thisMutator.rootBlock_);\n      };\n      this.block_.workspace.addChangeListener(this.sourceListener_);\n    }\n    this.resizeBubble_();\n    // When the mutator's workspace changes, update the source block.\n    this.workspace_.addChangeListener(this.workspaceChanged_.bind(this));\n    this.applyColour();\n  } else {\n    // Dispose of the bubble.\n    this.svgDialog_ = null;\n    this.workspace_.dispose();\n    this.workspace_ = null;\n    this.rootBlock_ = null;\n    this.bubble_.dispose();\n    this.bubble_ = null;\n    this.workspaceWidth_ = 0;\n    this.workspaceHeight_ = 0;\n    if (this.sourceListener_) {\n      this.block_.workspace.removeChangeListener(this.sourceListener_);\n      this.sourceListener_ = null;\n    }\n  }\n};\n\n/**\n * Update the source block when the mutator's blocks are changed.\n * Bump down any block that's too high.\n * Fired whenever a change is made to the mutator's workspace.\n * @param {!Blockly.Events.Abstract} e Custom data for event.\n * @private\n */\nBlockly.Mutator.prototype.workspaceChanged_ = function(e) {\n  if (e.type == Blockly.Events.UI ||\n      (e.type == Blockly.Events.CHANGE && e.element == 'disabled')) {\n    return;\n  }\n\n  if (!this.workspace_.isDragging()) {\n    var blocks = this.workspace_.getTopBlocks(false);\n    var MARGIN = 20;\n\n    for (var b = 0, block; (block = blocks[b]); b++) {\n      var blockXY = block.getRelativeToSurfaceXY();\n\n      // Bump any block that's above the top back inside.\n      if (blockXY.y < MARGIN) {\n        block.moveBy(0, MARGIN - blockXY.y);\n      }\n      // Bump any block overlapping the flyout back inside.\n      if (block.RTL) {\n        var right = -MARGIN;\n        var flyout = this.workspace_.getFlyout();\n        if (flyout) {\n          right -= flyout.getWidth();\n        }\n        if (blockXY.x > right) {\n          block.moveBy(right - blockXY.x, 0);\n        }\n      } else if (blockXY.x < MARGIN) {\n        block.moveBy(MARGIN - blockXY.x, 0);\n      }\n    }\n  }\n\n  // When the mutator's workspace changes, update the source block.\n  if (this.rootBlock_.workspace == this.workspace_) {\n    Blockly.Events.setGroup(true);\n    var block = this.block_;\n    var oldMutationDom = block.mutationToDom();\n    var oldMutation = oldMutationDom && Blockly.Xml.domToText(oldMutationDom);\n\n    // Switch off rendering while the source block is rebuilt.\n    var savedRendered = block.rendered;\n    // TODO(#4288): We should not be setting the rendered property to false.\n    block.rendered = false;\n\n    // Allow the source block to rebuild itself.\n    block.compose(this.rootBlock_);\n    // Restore rendering and show the changes.\n    block.rendered = savedRendered;\n    // Mutation may have added some elements that need initializing.\n    block.initSvg();\n\n    if ((/** @type {!Blockly.WorkspaceSvg} */ (Blockly.getMainWorkspace()))\n        .keyboardAccessibilityMode) {\n      Blockly.navigation.moveCursorOnBlockMutation(block);\n    }\n\n    if (block.rendered) {\n      block.render();\n    }\n\n    var newMutationDom = block.mutationToDom();\n    var newMutation = newMutationDom && Blockly.Xml.domToText(newMutationDom);\n    if (oldMutation != newMutation) {\n      Blockly.Events.fire(new Blockly.Events.BlockChange(\n          block, 'mutation', null, oldMutation, newMutation));\n    }\n\n    // Don't update the bubble until the drag has ended, to avoid moving blocks\n    // under the cursor.\n    if (!this.workspace_.isDragging()) {\n      this.resizeBubble_();\n    }\n    Blockly.Events.setGroup(false);\n  }\n};\n\n/**\n * Return an object with all the metrics required to size scrollbars for the\n * mutator flyout.  The following properties are computed:\n * .viewHeight: Height of the visible rectangle,\n * .viewWidth: Width of the visible rectangle,\n * .absoluteTop: Top-edge of view.\n * .absoluteLeft: Left-edge of view.\n * @return {!Blockly.utils.Metrics} Contains size and position metrics of\n *     mutator dialog's workspace.\n * @private\n */\nBlockly.Mutator.prototype.getFlyoutMetrics_ = function() {\n  // The mutator workspace only uses a subset of Blockly.utils.Metrics\n  // properties as features such as scroll and zoom are unsupported.\n  var unsupported = 0;\n  var flyout = this.workspace_.getFlyout();\n  var flyoutWidth = flyout ? flyout.getWidth() : 0;\n  return {\n    contentHeight: unsupported,\n    contentWidth: unsupported,\n    contentTop: unsupported,\n    contentLeft: unsupported,\n\n    viewHeight: this.workspaceHeight_,\n    viewWidth: this.workspaceWidth_ - flyoutWidth,\n    viewTop: unsupported,\n    viewLeft: unsupported,\n\n    absoluteTop: unsupported,\n    absoluteLeft: this.workspace_.RTL ? 0 : flyoutWidth\n  };\n};\n\n/**\n * Dispose of this mutator.\n */\nBlockly.Mutator.prototype.dispose = function() {\n  this.block_.mutator = null;\n  Blockly.Icon.prototype.dispose.call(this);\n};\n\n/**\n * Update the styles on all blocks in the mutator.\n * @public\n */\nBlockly.Mutator.prototype.updateBlockStyle = function() {\n  var ws = this.workspace_;\n\n  if (ws && ws.getAllBlocks(false)) {\n    var workspaceBlocks = ws.getAllBlocks(false);\n    for (var i = 0; i < workspaceBlocks.length; i++) {\n      var block = workspaceBlocks[i];\n      block.setStyle(block.getStyleName());\n    }\n\n    var flyout = ws.getFlyout();\n    if (flyout) {\n      var flyoutBlocks = flyout.workspace_.getAllBlocks(false);\n      for (var i = 0; i < flyoutBlocks.length; i++) {\n        var block = flyoutBlocks[i];\n        block.setStyle(block.getStyleName());\n      }\n    }\n  }\n};\n\n/**\n * Reconnect an block to a mutated input.\n * @param {Blockly.Connection} connectionChild Connection on child block.\n * @param {!Blockly.Block} block Parent block.\n * @param {string} inputName Name of input on parent block.\n * @return {boolean} True iff a reconnection was made, false otherwise.\n */\nBlockly.Mutator.reconnect = function(connectionChild, block, inputName) {\n  if (!connectionChild || !connectionChild.getSourceBlock().workspace) {\n    return false;  // No connection or block has been deleted.\n  }\n  var connectionParent = block.getInput(inputName).connection;\n  var currentParent = connectionChild.targetBlock();\n  if ((!currentParent || currentParent == block) &&\n      connectionParent.targetConnection != connectionChild) {\n    if (connectionParent.isConnected()) {\n      // There's already something connected here.  Get rid of it.\n      connectionParent.disconnect();\n    }\n    connectionParent.connect(connectionChild);\n    return true;\n  }\n  return false;\n};\n\n/**\n * Get the parent workspace of a workspace that is inside a mutator, taking into\n * account whether it is a flyout.\n * @param {Blockly.Workspace} workspace The workspace that is inside a mutator.\n * @return {Blockly.Workspace} The mutator's parent workspace or null.\n * @public\n */\nBlockly.Mutator.findParentWs = function(workspace) {\n  var outerWs = null;\n  if (workspace && workspace.options) {\n    var parent = workspace.options.parentWorkspace;\n    // If we were in a flyout in a mutator, need to go up two levels to find\n    // the actual parent.\n    if (workspace.isFlyout) {\n      if (parent && parent.options) {\n        outerWs = parent.options.parentWorkspace;\n      }\n    } else if (parent) {\n      outerWs = parent;\n    }\n  }\n  return outerWs;\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Text input field.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.FieldTextInput');\n\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockChange');\ngoog.require('Blockly.Field');\ngoog.require('Blockly.fieldRegistry');\ngoog.require('Blockly.Msg');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.aria');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.KeyCodes');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Size');\ngoog.require('Blockly.utils.userAgent');\n\n\n/**\n * Class for an editable text field.\n * @param {string=} opt_value The initial value of the field. Should cast to a\n *    string. Defaults to an empty string if null or undefined.\n * @param {?Function=} opt_validator A function that is called to validate\n *    changes to the field's value. Takes in a string & returns a validated\n *    string, or null to abort the change.\n * @param {Object=} opt_config A map of options used to configure the field.\n *    See the [field creation documentation]{@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/text-input#creation}\n *    for a list of properties this parameter supports.\n * @extends {Blockly.Field}\n * @constructor\n */\nBlockly.FieldTextInput = function(opt_value, opt_validator, opt_config) {\n  /**\n   * Allow browser to spellcheck this field.\n   * @type {boolean}\n   * @protected\n   */\n  this.spellcheck_ = true;\n\n  Blockly.FieldTextInput.superClass_.constructor.call(this,\n      opt_value, opt_validator, opt_config);\n\n  /**\n   * The HTML input element.\n   * @type {HTMLElement}\n   */\n  this.htmlInput_ = null;\n\n  /**\n   * Key down event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onKeyDownWrapper_ = null;\n\n  /**\n   * Key input event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onKeyInputWrapper_ = null;\n\n  /**\n   * Whether the field should consider the whole parent block to be its click\n   * target.\n   * @type {?boolean}\n   */\n  this.fullBlockClickTarget_ = false;\n\n  /**\n   * The workspace that this field belongs to.\n   * @type {?Blockly.WorkspaceSvg}\n   * @protected\n   */\n  this.workspace_ = null;\n};\nBlockly.utils.object.inherits(Blockly.FieldTextInput, Blockly.Field);\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nBlockly.FieldTextInput.prototype.DEFAULT_VALUE = '';\n\n/**\n * Construct a FieldTextInput from a JSON arg object,\n * dereferencing any string table references.\n * @param {!Object} options A JSON object with options (text, and spellcheck).\n * @return {!Blockly.FieldTextInput} The new field instance.\n * @package\n * @nocollapse\n */\nBlockly.FieldTextInput.fromJson = function(options) {\n  var text = Blockly.utils.replaceMessageReferences(options['text']);\n  return new Blockly.FieldTextInput(text, undefined, options);\n};\n\n/**\n * Serializable fields are saved by the XML renderer, non-serializable fields\n * are not. Editable fields should also be serializable.\n * @type {boolean}\n */\nBlockly.FieldTextInput.prototype.SERIALIZABLE = true;\n\n/**\n * Pixel size of input border radius.\n * Should match blocklyText's border-radius in CSS.\n */\nBlockly.FieldTextInput.BORDERRADIUS = 4;\n\n/**\n * Mouse cursor style when over the hotspot that initiates the editor.\n */\nBlockly.FieldTextInput.prototype.CURSOR = 'text';\n\n/**\n * @override\n */\nBlockly.FieldTextInput.prototype.configure_ = function(config) {\n  Blockly.FieldTextInput.superClass_.configure_.call(this, config);\n  if (typeof config['spellcheck'] == 'boolean') {\n    this.spellcheck_ = config['spellcheck'];\n  }\n};\n\n/**\n * @override\n */\nBlockly.FieldTextInput.prototype.initView = function() {\n  if (this.getConstants().FULL_BLOCK_FIELDS) {\n    // Step one: figure out if this is the only field on this block.\n    // Rendering is quite different in that case.\n    var nFields = 0;\n    var nConnections = 0;\n\n    // Count the number of fields, excluding text fields\n    for (var i = 0, input; (input = this.sourceBlock_.inputList[i]); i++) {\n      for (var j = 0; (input.fieldRow[j]); j++) {\n        nFields ++;\n      }\n      if (input.connection) {\n        nConnections++;\n      }\n    }\n    // The special case is when this is the only non-label field on the block\n    // and it has an output but no inputs.\n    this.fullBlockClickTarget_ =\n        nFields <= 1 && this.sourceBlock_.outputConnection && !nConnections;\n  } else {\n    this.fullBlockClickTarget_ = false;\n  }\n\n  if (this.fullBlockClickTarget_) {\n    this.clickTarget_ = this.sourceBlock_.getSvgRoot();\n  } else {\n    this.createBorderRect_();\n  }\n  this.createTextElement_();\n};\n\n/**\n * Ensure that the input value casts to a valid string.\n * @param {*=} opt_newValue The input value.\n * @return {*} A valid string, or null if invalid.\n * @protected\n */\nBlockly.FieldTextInput.prototype.doClassValidation_ = function(opt_newValue) {\n  if (opt_newValue === null || opt_newValue === undefined) {\n    return null;\n  }\n  return String(opt_newValue);\n};\n\n/**\n * Called by setValue if the text input is not valid. If the field is\n * currently being edited it reverts value of the field to the previous\n * value while allowing the display text to be handled by the htmlInput_.\n * @param {*} _invalidValue The input value that was determined to be invalid.\n *    This is not used by the text input because its display value is stored on\n *    the htmlInput_.\n * @protected\n */\nBlockly.FieldTextInput.prototype.doValueInvalid_ = function(_invalidValue) {\n  if (this.isBeingEdited_) {\n    this.isTextValid_ = false;\n    var oldValue = this.value_;\n    // Revert value when the text becomes invalid.\n    this.value_ = this.htmlInput_.untypedDefaultValue_;\n    if (this.sourceBlock_ && Blockly.Events.isEnabled()) {\n      Blockly.Events.fire(new Blockly.Events.BlockChange(\n          this.sourceBlock_, 'field', this.name || null, oldValue, this.value_));\n    }\n  }\n};\n\n/**\n * Called by setValue if the text input is valid. Updates the value of the\n * field, and updates the text of the field if it is not currently being\n * edited (i.e. handled by the htmlInput_).\n * @param {*} newValue The value to be saved. The default validator guarantees\n * that this is a string.\n * @protected\n */\nBlockly.FieldTextInput.prototype.doValueUpdate_ = function(newValue) {\n  this.isTextValid_ = true;\n  this.value_ = newValue;\n  if (!this.isBeingEdited_) {\n    // This should only occur if setValue is triggered programmatically.\n    this.isDirty_ = true;\n  }\n};\n\n/**\n * Updates text field to match the colour/style of the block.\n * @package\n */\nBlockly.FieldTextInput.prototype.applyColour = function() {\n  if (this.sourceBlock_ && this.getConstants().FULL_BLOCK_FIELDS) {\n    if (this.borderRect_) {\n      this.borderRect_.setAttribute('stroke',\n          this.sourceBlock_.style.colourTertiary);\n    } else {\n      this.sourceBlock_.pathObject.svgPath.setAttribute('fill',\n          this.getConstants().FIELD_BORDER_RECT_COLOUR);\n    }\n  }\n};\n\n/**\n * Updates the colour of the htmlInput given the current validity of the\n * field's value.\n * @protected\n */\nBlockly.FieldTextInput.prototype.render_ = function() {\n  Blockly.FieldTextInput.superClass_.render_.call(this);\n  // This logic is done in render_ rather than doValueInvalid_ or\n  // doValueUpdate_ so that the code is more centralized.\n  if (this.isBeingEdited_) {\n    this.resizeEditor_();\n    var htmlInput = /** @type {!HTMLElement} */(this.htmlInput_);\n    if (!this.isTextValid_) {\n      Blockly.utils.dom.addClass(htmlInput, 'blocklyInvalidInput');\n      Blockly.utils.aria.setState(htmlInput,\n          Blockly.utils.aria.State.INVALID, true);\n    } else {\n      Blockly.utils.dom.removeClass(htmlInput, 'blocklyInvalidInput');\n      Blockly.utils.aria.setState(htmlInput,\n          Blockly.utils.aria.State.INVALID, false);\n    }\n  }\n};\n\n/**\n * Set whether this field is spellchecked by the browser.\n * @param {boolean} check True if checked.\n */\nBlockly.FieldTextInput.prototype.setSpellcheck = function(check) {\n  if (check == this.spellcheck_) {\n    return;\n  }\n  this.spellcheck_ = check;\n  if (this.htmlInput_) {\n    this.htmlInput_.setAttribute('spellcheck', this.spellcheck_);\n  }\n};\n\n/**\n * Show the inline free-text editor on top of the text.\n * @param {Event=} _opt_e Optional mouse event that triggered the field to open,\n *     or undefined if triggered programmatically.\n * @param {boolean=} opt_quietInput True if editor should be created without\n *     focus.  Defaults to false.\n * @protected\n */\nBlockly.FieldTextInput.prototype.showEditor_ = function(_opt_e,\n    opt_quietInput) {\n  this.workspace_ =\n    (/** @type {!Blockly.BlockSvg} */ (this.sourceBlock_)).workspace;\n  var quietInput = opt_quietInput || false;\n  if (!quietInput && (Blockly.utils.userAgent.MOBILE ||\n                      Blockly.utils.userAgent.ANDROID ||\n                      Blockly.utils.userAgent.IPAD)) {\n    this.showPromptEditor_();\n  } else {\n    this.showInlineEditor_(quietInput);\n  }\n};\n\n/**\n * Create and show a text input editor that is a prompt (usually a popup).\n * Mobile browsers have issues with in-line textareas (focus and keyboards).\n * @private\n */\nBlockly.FieldTextInput.prototype.showPromptEditor_ = function() {\n  var fieldText = this;\n  Blockly.prompt(Blockly.Msg['CHANGE_VALUE_TITLE'], this.getText(),\n      function(newValue) {\n        fieldText.setValue(newValue);\n      });\n};\n\n/**\n * Create and show a text input editor that sits directly over the text input.\n * @param {boolean} quietInput True if editor should be created without\n *     focus.\n * @private\n */\nBlockly.FieldTextInput.prototype.showInlineEditor_ = function(quietInput) {\n  Blockly.WidgetDiv.show(\n      this, this.sourceBlock_.RTL, this.widgetDispose_.bind(this));\n  this.htmlInput_ = this.widgetCreate_();\n  this.isBeingEdited_ = true;\n\n  if (!quietInput) {\n    this.htmlInput_.focus({preventScroll:true});\n    this.htmlInput_.select();\n  }\n};\n\n/**\n * Create the text input editor widget.\n * @return {!HTMLElement} The newly created text input editor.\n * @protected\n */\nBlockly.FieldTextInput.prototype.widgetCreate_ = function() {\n  var div = Blockly.WidgetDiv.DIV;\n\n  Blockly.utils.dom.addClass(this.getClickTarget_(), 'editing');\n\n  var htmlInput = /** @type {HTMLInputElement} */ (document.createElement('input'));\n  htmlInput.className = 'blocklyHtmlInput';\n  htmlInput.setAttribute('spellcheck', this.spellcheck_);\n  var scale = this.workspace_.getScale();\n  var fontSize =\n      (this.getConstants().FIELD_TEXT_FONTSIZE * scale) + 'pt';\n  div.style.fontSize = fontSize;\n  htmlInput.style.fontSize = fontSize;\n  var borderRadius =\n      (Blockly.FieldTextInput.BORDERRADIUS * scale) + 'px';\n\n  if (this.fullBlockClickTarget_) {\n    var bBox = this.getScaledBBox();\n\n    // Override border radius.\n    borderRadius = (bBox.bottom - bBox.top) / 2 + 'px';\n    // Pull stroke colour from the existing shadow block\n    var strokeColour = this.sourceBlock_.getParent() ?\n      this.sourceBlock_.getParent().style.colourTertiary :\n      this.sourceBlock_.style.colourTertiary;\n    htmlInput.style.border = (1 * scale) + 'px solid ' + strokeColour;\n    div.style.borderRadius = borderRadius;\n    div.style.transition = 'box-shadow 0.25s ease 0s';\n    if (this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW) {\n      div.style.boxShadow = 'rgba(255, 255, 255, 0.3) 0px 0px 0px ' +\n          4 * scale + 'px';\n    }\n  }\n  htmlInput.style.borderRadius = borderRadius;\n\n  div.appendChild(htmlInput);\n\n  htmlInput.value = htmlInput.defaultValue = this.getEditorText_(this.value_);\n  htmlInput.untypedDefaultValue_ = this.value_;\n  htmlInput.oldValue_ = null;\n\n  this.resizeEditor_();\n\n  this.bindInputEvents_(htmlInput);\n\n  return htmlInput;\n};\n\n/**\n * Closes the editor, saves the results, and disposes of any events or\n * dom-references belonging to the editor.\n * @private\n */\nBlockly.FieldTextInput.prototype.widgetDispose_ = function() {\n  // Non-disposal related things that we do when the editor closes.\n  this.isBeingEdited_ = false;\n  this.isTextValid_ = true;\n  // Make sure the field's node matches the field's internal value.\n  this.forceRerender();\n  // TODO(#2496): Make this less of a hack.\n  if (this.onFinishEditing_) {\n    this.onFinishEditing_(this.value_);\n  }\n\n  // Actual disposal.\n  this.unbindInputEvents_();\n  var style = Blockly.WidgetDiv.DIV.style;\n  style.width = 'auto';\n  style.height = 'auto';\n  style.fontSize = '';\n  style.transition = '';\n  style.boxShadow = '';\n  this.htmlInput_ = null;\n\n  Blockly.utils.dom.removeClass(this.getClickTarget_(), 'editing');\n};\n\n/**\n * Bind handlers for user input on the text input field's editor.\n * @param {!HTMLElement} htmlInput The htmlInput to which event\n *    handlers will be bound.\n * @protected\n */\nBlockly.FieldTextInput.prototype.bindInputEvents_ = function(htmlInput) {\n  // Trap Enter without IME and Esc to hide.\n  this.onKeyDownWrapper_ =\n      Blockly.bindEventWithChecks_(\n          htmlInput, 'keydown', this, this.onHtmlInputKeyDown_);\n  // Resize after every input change.\n  this.onKeyInputWrapper_ =\n      Blockly.bindEventWithChecks_(\n          htmlInput, 'input', this, this.onHtmlInputChange_);\n};\n\n/**\n * Unbind handlers for user input and workspace size changes.\n * @private\n */\nBlockly.FieldTextInput.prototype.unbindInputEvents_ = function() {\n  if (this.onKeyDownWrapper_) {\n    Blockly.unbindEvent_(this.onKeyDownWrapper_);\n    this.onKeyDownWrapper_ = null;\n  }\n  if (this.onKeyInputWrapper_) {\n    Blockly.unbindEvent_(this.onKeyInputWrapper_);\n    this.onKeyInputWrapper_ = null;\n  }\n};\n\n/**\n * Handle key down to the editor.\n * @param {!Event} e Keyboard event.\n * @protected\n */\nBlockly.FieldTextInput.prototype.onHtmlInputKeyDown_ = function(e) {\n  if (e.keyCode == Blockly.utils.KeyCodes.ENTER) {\n    Blockly.WidgetDiv.hide();\n    Blockly.DropDownDiv.hideWithoutAnimation();\n  } else if (e.keyCode == Blockly.utils.KeyCodes.ESC) {\n    this.htmlInput_.value = this.htmlInput_.defaultValue;\n    Blockly.WidgetDiv.hide();\n    Blockly.DropDownDiv.hideWithoutAnimation();\n  } else if (e.keyCode == Blockly.utils.KeyCodes.TAB) {\n    Blockly.WidgetDiv.hide();\n    Blockly.DropDownDiv.hideWithoutAnimation();\n    this.sourceBlock_.tab(this, !e.shiftKey);\n    e.preventDefault();\n  }\n};\n\n/**\n * Handle a change to the editor.\n * @param {!Event} _e Keyboard event.\n * @private\n */\nBlockly.FieldTextInput.prototype.onHtmlInputChange_ = function(_e) {\n  var text = this.htmlInput_.value;\n  if (text !== this.htmlInput_.oldValue_) {\n    this.htmlInput_.oldValue_ = text;\n\n    // TODO(#2169): Once issue is fixed the setGroup functionality could be\n    //              moved up to the Field setValue method. This would create a\n    //              broader fix for all field types.\n    Blockly.Events.setGroup(true);\n    var value = this.getValueFromEditorText_(text);\n    this.setValue(value);\n    this.forceRerender();\n    this.resizeEditor_();\n    Blockly.Events.setGroup(false);\n  }\n};\n\n/**\n * Set the html input value and the field's internal value. The difference\n * between this and ``setValue`` is that this also updates the html input\n * value whilst editing.\n * @param {*} newValue New value.\n * @protected\n */\nBlockly.FieldTextInput.prototype.setEditorValue_ = function(newValue) {\n  this.isDirty_ = true;\n  if (this.isBeingEdited_) {\n    // In the case this method is passed an invalid value, we still\n    // pass it through the transformation method `getEditorText` to deal\n    // with. Otherwise, the internal field's state will be inconsistent\n    // with what's shown to the user.\n    this.htmlInput_.value = this.getEditorText_(newValue);\n  }\n  this.setValue(newValue);\n};\n\n/**\n * Resize the editor to fit the text.\n * @protected\n */\nBlockly.FieldTextInput.prototype.resizeEditor_ = function() {\n  var div = Blockly.WidgetDiv.DIV;\n  var bBox = this.getScaledBBox();\n  div.style.width = bBox.right - bBox.left + 'px';\n  div.style.height = bBox.bottom - bBox.top + 'px';\n\n  // In RTL mode block fields and LTR input fields the left edge moves,\n  // whereas the right edge is fixed.  Reposition the editor.\n  var x = this.sourceBlock_.RTL ? bBox.right - div.offsetWidth : bBox.left;\n  var xy = new Blockly.utils.Coordinate(x, bBox.top);\n\n  div.style.left = xy.x + 'px';\n  div.style.top = xy.y + 'px';\n};\n\n/**\n * Ensure that only a number may be entered.\n * @param {string} text The user's text.\n * @return {?string} A string representing a valid number, or null if invalid.\n * @deprecated\n */\nBlockly.FieldTextInput.numberValidator = function(text) {\n  console.warn('Blockly.FieldTextInput.numberValidator is deprecated. ' +\n               'Use Blockly.FieldNumber instead.');\n  if (text === null) {\n    return null;\n  }\n  text = String(text);\n  // TODO: Handle cases like 'ten', '1.203,14', etc.\n  // 'O' is sometimes mistaken for '0' by inexperienced users.\n  text = text.replace(/O/ig, '0');\n  // Strip out thousands separators.\n  text = text.replace(/,/g, '');\n  var n = Number(text || 0);\n  return isNaN(n) ? null : String(n);\n};\n\n/**\n * Ensure that only a non-negative integer may be entered.\n * @param {string} text The user's text.\n * @return {?string} A string representing a valid int, or null if invalid.\n * @deprecated\n */\nBlockly.FieldTextInput.nonnegativeIntegerValidator = function(text) {\n  var n = Blockly.FieldTextInput.numberValidator(text);\n  if (n) {\n    n = String(Math.max(0, Math.floor(n)));\n  }\n  return n;\n};\n\n/**\n * Returns whether or not the field is tab navigable.\n * @return {boolean} True if the field is tab navigable.\n * @override\n */\nBlockly.FieldTextInput.prototype.isTabNavigable = function() {\n  return true;\n};\n\n/**\n * Use the `getText_` developer hook to override the field's text representation.\n * When we're currently editing, return the current html value instead.\n * Otherwise, return null which tells the field to use the default behaviour\n * (which is a string cast of the field's value).\n * @return {?string} The html value if we're editing, otherwise null.\n * @protected\n * @override\n */\nBlockly.FieldTextInput.prototype.getText_ = function() {\n  if (this.isBeingEdited_ && this.htmlInput_) {\n    // We are currently editing, return the html input value instead.\n    return this.htmlInput_.value;\n  }\n  return null;\n};\n\n/**\n * Transform the provided value into a text to show in the html input.\n * Override this method if the field's html input representation is different\n * than the field's value. This should be coupled with an override of\n * `getValueFromEditorText_`.\n * @param {*} value The value stored in this field.\n * @return {string} The text to show on the html input.\n * @protected\n */\nBlockly.FieldTextInput.prototype.getEditorText_ = function(value) {\n  return String(value);\n};\n\n/**\n * Transform the text received from the html input into a value to store\n * in this field.\n * Override this method if the field's html input representation is different\n * than the field's value. This should be coupled with an override of\n * `getEditorText_`.\n * @param {string} text Text received from the html input.\n * @return {*} The value to store.\n * @protected\n */\nBlockly.FieldTextInput.prototype.getValueFromEditorText_ = function(text) {\n  return text;\n};\n\nBlockly.fieldRegistry.register('field_input', Blockly.FieldTextInput);\n","/**\n * @license\n * Copyright 2013 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Angle input field.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.FieldAngle');\n\ngoog.require('Blockly.Css');\ngoog.require('Blockly.DropDownDiv');\ngoog.require('Blockly.fieldRegistry');\ngoog.require('Blockly.FieldTextInput');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.math');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.userAgent');\n\n\n/**\n * Class for an editable angle field.\n * @param {string|number=} opt_value The initial value of the field. Should cast\n *    to a number. Defaults to 0.\n * @param {Function=} opt_validator A function that is called to validate\n *    changes to the field's value. Takes in a number & returns a\n *    validated number, or null to abort the change.\n * @param {Object=} opt_config A map of options used to configure the field.\n *    See the [field creation documentation]{@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/angle#creation}\n *    for a list of properties this parameter supports.\n * @extends {Blockly.FieldTextInput}\n * @constructor\n */\nBlockly.FieldAngle = function(opt_value, opt_validator, opt_config) {\n\n  /**\n   * Should the angle increase as the angle picker is moved clockwise (true)\n   * or counterclockwise (false)\n   * @see Blockly.FieldAngle.CLOCKWISE\n   * @type {boolean}\n   * @private\n   */\n  this.clockwise_ = Blockly.FieldAngle.CLOCKWISE;\n\n  /**\n   * The offset of zero degrees (and all other angles).\n   * @see Blockly.FieldAngle.OFFSET\n   * @type {number}\n   * @private\n   */\n  this.offset_ = Blockly.FieldAngle.OFFSET;\n\n  /**\n   * The maximum angle to allow before wrapping.\n   * @see Blockly.FieldAngle.WRAP\n   * @type {number}\n   * @private\n   */\n  this.wrap_ = Blockly.FieldAngle.WRAP;\n\n  /**\n   * The amount to round angles to when using a mouse or keyboard nav input.\n   * @see Blockly.FieldAngle.ROUND\n   * @type {number}\n   * @private\n   */\n  this.round_ = Blockly.FieldAngle.ROUND;\n\n  Blockly.FieldAngle.superClass_.constructor.call(\n      this, opt_value, opt_validator, opt_config);\n\n  /**\n   * The angle picker's gauge path depending on the value.\n   * @type {SVGElement}\n   */\n  this.gauge_ = null;\n\n  /**\n   * The angle picker's line drawn representing the value's angle.\n   * @type {SVGElement}\n   */\n  this.line_ = null;\n\n  /**\n   * Wrapper click event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.clickWrapper_ = null;\n\n  /**\n   * Surface click event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.clickSurfaceWrapper_ = null;\n\n  /**\n   * Surface mouse move event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.moveSurfaceWrapper_ = null;\n};\nBlockly.utils.object.inherits(Blockly.FieldAngle, Blockly.FieldTextInput);\n\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nBlockly.FieldAngle.prototype.DEFAULT_VALUE = 0;\n\n/**\n * Construct a FieldAngle from a JSON arg object.\n * @param {!Object} options A JSON object with options (angle).\n * @return {!Blockly.FieldAngle} The new field instance.\n * @package\n * @nocollapse\n */\nBlockly.FieldAngle.fromJson = function(options) {\n  return new Blockly.FieldAngle(options['angle'], undefined, options);\n};\n\n/**\n * Serializable fields are saved by the XML renderer, non-serializable fields\n * are not. Editable fields should also be serializable.\n * @type {boolean}\n */\nBlockly.FieldAngle.prototype.SERIALIZABLE = true;\n\n/**\n * The default amount to round angles to when using a mouse or keyboard nav\n * input. Must be a positive integer to support keyboard navigation.\n * @const {number}\n */\nBlockly.FieldAngle.ROUND = 15;\n\n/**\n * Half the width of protractor image.\n * @const {number}\n */\nBlockly.FieldAngle.HALF = 100 / 2;\n\n/**\n * Default property describing which direction makes an angle field's value\n * increase. Angle increases clockwise (true) or counterclockwise (false).\n * @const {boolean}\n */\nBlockly.FieldAngle.CLOCKWISE = false;\n\n/**\n * The default offset of 0 degrees (and all angles). Always offsets in the\n * counterclockwise direction, regardless of the field's clockwise property.\n * Usually either 0 (0 = right) or 90 (0 = up).\n * @const {number}\n */\nBlockly.FieldAngle.OFFSET = 0;\n\n/**\n * The default maximum angle to allow before wrapping.\n * Usually either 360 (for 0 to 359.9) or 180 (for -179.9 to 180).\n * @const {number}\n */\nBlockly.FieldAngle.WRAP = 360;\n\n/**\n * Radius of protractor circle.  Slightly smaller than protractor size since\n * otherwise SVG crops off half the border at the edges.\n * @const {number}\n */\nBlockly.FieldAngle.RADIUS = Blockly.FieldAngle.HALF - 1;\n\n/**\n * Configure the field based on the given map of options.\n * @param {!Object} config A map of options to configure the field based on.\n * @private\n */\nBlockly.FieldAngle.prototype.configure_ = function(config) {\n  Blockly.FieldAngle.superClass_.configure_.call(this, config);\n\n  switch (config['mode']) {\n    case 'compass':\n      this.clockwise_ = true;\n      this.offset_ = 90;\n      break;\n    case 'protractor':\n      // This is the default mode, so we could do nothing. But just to\n      // future-proof, we'll set it anyway.\n      this.clockwise_ = false;\n      this.offset_ = 0;\n      break;\n  }\n\n  // Allow individual settings to override the mode setting.\n  var clockwise = config['clockwise'];\n  if (typeof clockwise == 'boolean') {\n    this.clockwise_ = clockwise;\n  }\n\n  // If these are passed as null then we should leave them on the default.\n  var offset = config['offset'];\n  if (offset != null) {\n    offset = Number(offset);\n    if (!isNaN(offset)) {\n      this.offset_ = offset;\n    }\n  }\n  var wrap = config['wrap'];\n  if (wrap != null) {\n    wrap = Number(wrap);\n    if (!isNaN(wrap)) {\n      this.wrap_ = wrap;\n    }\n  }\n  var round = config['round'];\n  if (round != null) {\n    round = Number(round);\n    if (!isNaN(round)) {\n      this.round_ = round;\n    }\n  }\n};\n\n\n\n/**\n * Create the block UI for this field.\n * @package\n */\nBlockly.FieldAngle.prototype.initView = function() {\n  Blockly.FieldAngle.superClass_.initView.call(this);\n  // Add the degree symbol to the left of the number, even in RTL (issue #2380)\n  this.symbol_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.TSPAN, {}, null);\n  this.symbol_.appendChild(document.createTextNode('\\u00B0'));\n  this.textElement_.appendChild(this.symbol_);\n};\n\n/**\n * Updates the graph when the field rerenders.\n * @private\n * @override\n */\nBlockly.FieldAngle.prototype.render_ = function() {\n  Blockly.FieldAngle.superClass_.render_.call(this);\n  this.updateGraph_();\n};\n\n/**\n * Create and show the angle field's editor.\n * @param {Event=} opt_e Optional mouse event that triggered the field to open,\n *     or undefined if triggered programmatically.\n * @protected\n */\nBlockly.FieldAngle.prototype.showEditor_ = function(opt_e) {\n  // Mobile browsers have issues with in-line textareas (focus & keyboards).\n  var noFocus =\n      Blockly.utils.userAgent.MOBILE ||\n      Blockly.utils.userAgent.ANDROID ||\n      Blockly.utils.userAgent.IPAD;\n  Blockly.FieldAngle.superClass_.showEditor_.call(this, opt_e, noFocus);\n\n  var editor = this.dropdownCreate_();\n  Blockly.DropDownDiv.getContentDiv().appendChild(editor);\n\n  Blockly.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,\n      this.sourceBlock_.style.colourTertiary);\n\n  Blockly.DropDownDiv.showPositionedByField(\n      this, this.dropdownDispose_.bind(this));\n\n  this.updateGraph_();\n};\n\n/**\n * Create the angle dropdown editor.\n * @return {!SVGElement} The newly created angle picker.\n * @private\n */\nBlockly.FieldAngle.prototype.dropdownCreate_ = function() {\n  var svg = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.SVG, {\n        'xmlns': Blockly.utils.dom.SVG_NS,\n        'xmlns:html': Blockly.utils.dom.HTML_NS,\n        'xmlns:xlink': Blockly.utils.dom.XLINK_NS,\n        'version': '1.1',\n        'height': (Blockly.FieldAngle.HALF * 2) + 'px',\n        'width': (Blockly.FieldAngle.HALF * 2) + 'px',\n        'style': 'touch-action: none'\n      }, null);\n  var circle = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.CIRCLE, {\n        'cx': Blockly.FieldAngle.HALF,\n        'cy': Blockly.FieldAngle.HALF,\n        'r': Blockly.FieldAngle.RADIUS,\n        'class': 'blocklyAngleCircle'\n      }, svg);\n  this.gauge_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH, {\n        'class': 'blocklyAngleGauge'\n      }, svg);\n  this.line_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.LINE, {\n        'x1': Blockly.FieldAngle.HALF,\n        'y1': Blockly.FieldAngle.HALF,\n        'class': 'blocklyAngleLine'\n      }, svg);\n  // Draw markers around the edge.\n  for (var angle = 0; angle < 360; angle += 15) {\n    Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.LINE, {\n          'x1': Blockly.FieldAngle.HALF + Blockly.FieldAngle.RADIUS,\n          'y1': Blockly.FieldAngle.HALF,\n          'x2': Blockly.FieldAngle.HALF + Blockly.FieldAngle.RADIUS -\n              (angle % 45 == 0 ? 10 : 5),\n          'y2': Blockly.FieldAngle.HALF,\n          'class': 'blocklyAngleMarks',\n          'transform': 'rotate(' + angle + ',' +\n              Blockly.FieldAngle.HALF + ',' + Blockly.FieldAngle.HALF + ')'\n        }, svg);\n  }\n\n  // The angle picker is different from other fields in that it updates on\n  // mousemove even if it's not in the middle of a drag.  In future we may\n  // change this behaviour.\n  this.clickWrapper_ =\n      Blockly.bindEventWithChecks_(svg, 'click', this, this.hide_);\n  // On touch devices, the picker's value is only updated with a drag. Add\n  // a click handler on the drag surface to update the value if the surface\n  // is clicked.\n  this.clickSurfaceWrapper_ =\n      Blockly.bindEventWithChecks_(circle, 'click', this, this.onMouseMove_,\n          true, true);\n  this.moveSurfaceWrapper_ =\n      Blockly.bindEventWithChecks_(circle, 'mousemove', this, this.onMouseMove_,\n          true, true);\n  return svg;\n};\n\n/**\n * Disposes of events and dom-references belonging to the angle editor.\n * @private\n */\nBlockly.FieldAngle.prototype.dropdownDispose_ = function() {\n  if (this.clickWrapper_) {\n    Blockly.unbindEvent_(this.clickWrapper_);\n    this.clickWrapper_ = null;\n  }\n  if (this.clickSurfaceWrapper_) {\n    Blockly.unbindEvent_(this.clickSurfaceWrapper_);\n    this.clickSurfaceWrapper_ = null;\n  }\n  if (this.moveSurfaceWrapper_) {\n    Blockly.unbindEvent_(this.moveSurfaceWrapper_);\n    this.moveSurfaceWrapper_ = null;\n  }\n  this.gauge_ = null;\n  this.line_ = null;\n};\n\n/**\n * Hide the editor.\n * @private\n */\nBlockly.FieldAngle.prototype.hide_ = function() {\n  Blockly.DropDownDiv.hideIfOwner(this);\n  Blockly.WidgetDiv.hide();\n};\n\n/**\n * Set the angle to match the mouse's position.\n * @param {!Event} e Mouse move event.\n * @protected\n */\nBlockly.FieldAngle.prototype.onMouseMove_ = function(e) {\n  // Calculate angle.\n  var bBox = this.gauge_.ownerSVGElement.getBoundingClientRect();\n  var dx = e.clientX - bBox.left - Blockly.FieldAngle.HALF;\n  var dy = e.clientY - bBox.top - Blockly.FieldAngle.HALF;\n  var angle = Math.atan(-dy / dx);\n  if (isNaN(angle)) {\n    // This shouldn't happen, but let's not let this error propagate further.\n    return;\n  }\n  angle = Blockly.utils.math.toDegrees(angle);\n  // 0: East, 90: North, 180: West, 270: South.\n  if (dx < 0) {\n    angle += 180;\n  } else if (dy > 0) {\n    angle += 360;\n  }\n\n  // Do offsetting.\n  if (this.clockwise_) {\n    angle = this.offset_ + 360 - angle;\n  } else {\n    angle = 360 - (this.offset_ - angle);\n  }\n\n  this.displayMouseOrKeyboardValue_(angle);\n};\n\n/**\n * Handles and displays values that are input via mouse or arrow key input.\n * These values need to be rounded and wrapped before being displayed so\n * that the text input's value is appropriate.\n * @param {number} angle New angle.\n * @private\n */\nBlockly.FieldAngle.prototype.displayMouseOrKeyboardValue_ = function(angle) {\n  if (this.round_) {\n    angle = Math.round(angle / this.round_) * this.round_;\n  }\n  angle = this.wrapValue_(angle);\n  if (angle != this.value_) {\n    this.setEditorValue_(angle);\n  }\n};\n\n/**\n * Redraw the graph with the current angle.\n * @private\n */\nBlockly.FieldAngle.prototype.updateGraph_ = function() {\n  if (!this.gauge_) {\n    return;\n  }\n  // Always display the input (i.e. getText) even if it is invalid.\n  var angleDegrees = Number(this.getText()) + this.offset_;\n  angleDegrees %= 360;\n  var angleRadians = Blockly.utils.math.toRadians(angleDegrees);\n  var path = ['M ', Blockly.FieldAngle.HALF, ',', Blockly.FieldAngle.HALF];\n  var x2 = Blockly.FieldAngle.HALF;\n  var y2 = Blockly.FieldAngle.HALF;\n  if (!isNaN(angleRadians)) {\n    var clockwiseFlag = Number(this.clockwise_);\n    var angle1 = Blockly.utils.math.toRadians(this.offset_);\n    var x1 = Math.cos(angle1) * Blockly.FieldAngle.RADIUS;\n    var y1 = Math.sin(angle1) * -Blockly.FieldAngle.RADIUS;\n    if (clockwiseFlag) {\n      angleRadians = 2 * angle1 - angleRadians;\n    }\n    x2 += Math.cos(angleRadians) * Blockly.FieldAngle.RADIUS;\n    y2 -= Math.sin(angleRadians) * Blockly.FieldAngle.RADIUS;\n    // Don't ask how the flag calculations work.  They just do.\n    var largeFlag = Math.abs(Math.floor((angleRadians - angle1) / Math.PI) % 2);\n    if (clockwiseFlag) {\n      largeFlag = 1 - largeFlag;\n    }\n    path.push(' l ', x1, ',', y1,\n        ' A ', Blockly.FieldAngle.RADIUS, ',', Blockly.FieldAngle.RADIUS,\n        ' 0 ', largeFlag, ' ', clockwiseFlag, ' ', x2, ',', y2, ' z');\n  }\n  this.gauge_.setAttribute('d', path.join(''));\n  this.line_.setAttribute('x2', x2);\n  this.line_.setAttribute('y2', y2);\n};\n\n/**\n * Handle key down to the editor.\n * @param {!Event} e Keyboard event.\n * @protected\n * @override\n */\nBlockly.FieldAngle.prototype.onHtmlInputKeyDown_ = function(e) {\n  Blockly.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this, e);\n\n  var multiplier;\n  if (e.keyCode === Blockly.utils.KeyCodes.LEFT) {\n    // decrement (increment in RTL)\n    multiplier = this.sourceBlock_.RTL ? 1 : -1;\n  } else if (e.keyCode === Blockly.utils.KeyCodes.RIGHT) {\n    // increment (decrement in RTL)\n    multiplier = this.sourceBlock_.RTL ? -1 : 1;\n  } else if (e.keyCode === Blockly.utils.KeyCodes.DOWN) {\n    // decrement\n    multiplier = -1;\n  } else if (e.keyCode === Blockly.utils.KeyCodes.UP) {\n    // increment\n    multiplier = 1;\n  }\n  if (multiplier) {\n    var value = /** @type {number} */ (this.getValue());\n    this.displayMouseOrKeyboardValue_(\n        value + (multiplier * this.round_));\n    e.preventDefault();\n    e.stopPropagation();\n  }\n};\n\n/**\n * Ensure that the input value is a valid angle.\n * @param {*=} opt_newValue The input value.\n * @return {?number} A valid angle, or null if invalid.\n * @protected\n * @override\n */\nBlockly.FieldAngle.prototype.doClassValidation_ = function(opt_newValue) {\n  var value = Number(opt_newValue);\n  if (isNaN(value) || !isFinite(value)) {\n    return null;\n  }\n  return this.wrapValue_(value);\n};\n\n/**\n * Wraps the value so that it is in the range (-360 + wrap, wrap).\n * @param {number} value The value to wrap.\n * @return {number} The wrapped value.\n * @private\n */\nBlockly.FieldAngle.prototype.wrapValue_ = function(value) {\n  value %= 360;\n  if (value < 0) {\n    value += 360;\n  }\n  if (value > this.wrap_) {\n    value -= 360;\n  }\n  return value;\n};\n\n/**\n * CSS for angle field.  See css.js for use.\n */\nBlockly.Css.register([\n  /* eslint-disable indent */\n  '.blocklyAngleCircle {',\n    'stroke: #444;',\n    'stroke-width: 1;',\n    'fill: #ddd;',\n    'fill-opacity: .8;',\n  '}',\n\n  '.blocklyAngleMarks {',\n    'stroke: #444;',\n    'stroke-width: 1;',\n  '}',\n\n  '.blocklyAngleGauge {',\n    'fill: #f88;',\n    'fill-opacity: .8;',\n    'pointer-events: none;',\n  '}',\n\n  '.blocklyAngleLine {',\n    'stroke: #f00;',\n    'stroke-width: 2;',\n    'stroke-linecap: round;',\n    'pointer-events: none;',\n  '}'\n  /* eslint-enable indent */\n]);\n\nBlockly.fieldRegistry.register('field_angle', Blockly.FieldAngle);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Checkbox field.  Checked or not checked.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.FieldCheckbox');\n\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockChange');\ngoog.require('Blockly.Field');\ngoog.require('Blockly.fieldRegistry');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Size');\n\n\n/**\n * Class for a checkbox field.\n * @param {string|boolean=} opt_value The initial value of the field. Should\n *    either be 'TRUE', 'FALSE' or a boolean. Defaults to 'FALSE'.\n * @param {Function=} opt_validator  A function that is called to validate\n *    changes to the field's value. Takes in a value ('TRUE' or 'FALSE') &\n *    returns a validated value ('TRUE' or 'FALSE'), or null to abort the\n *    change.\n * @param {Object=} opt_config A map of options used to configure the field.\n *    See the [field creation documentation]{@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/checkbox#creation}\n *    for a list of properties this parameter supports.\n * @extends {Blockly.Field}\n * @constructor\n */\nBlockly.FieldCheckbox = function(opt_value, opt_validator, opt_config) {\n  /**\n   * Character for the check mark. Used to apply a different check mark\n   * character to individual fields.\n   * @type {?string}\n   * @private\n   */\n  this.checkChar_ = null;\n\n  Blockly.FieldCheckbox.superClass_.constructor.call(\n      this, opt_value, opt_validator, opt_config);\n};\nBlockly.utils.object.inherits(Blockly.FieldCheckbox, Blockly.Field);\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nBlockly.FieldCheckbox.prototype.DEFAULT_VALUE = false;\n\n/**\n * Construct a FieldCheckbox from a JSON arg object.\n * @param {!Object} options A JSON object with options (checked).\n * @return {!Blockly.FieldCheckbox} The new field instance.\n * @package\n * @nocollapse\n */\nBlockly.FieldCheckbox.fromJson = function(options) {\n  return new Blockly.FieldCheckbox(options['checked'], undefined, options);\n};\n\n/**\n * Default character for the checkmark.\n * @type {string}\n * @const\n */\nBlockly.FieldCheckbox.CHECK_CHAR = '\\u2713';\n\n/**\n * Serializable fields are saved by the XML renderer, non-serializable fields\n * are not. Editable fields should also be serializable.\n * @type {boolean}\n */\nBlockly.FieldCheckbox.prototype.SERIALIZABLE = true;\n\n/**\n * Mouse cursor style when over the hotspot that initiates editability.\n */\nBlockly.FieldCheckbox.prototype.CURSOR = 'default';\n\n/**\n * Configure the field based on the given map of options.\n * @param {!Object} config A map of options to configure the field based on.\n * @private\n */\nBlockly.FieldCheckbox.prototype.configure_ = function(config) {\n  Blockly.FieldCheckbox.superClass_.configure_.call(this, config);\n  if (config['checkCharacter']) {\n    this.checkChar_ = config['checkCharacter'];\n  }\n};\n\n/**\n * Create the block UI for this checkbox.\n * @package\n */\nBlockly.FieldCheckbox.prototype.initView = function() {\n  Blockly.FieldCheckbox.superClass_.initView.call(this);\n\n  Blockly.utils.dom.addClass(\n      /** @type {!SVGTextElement} **/ (this.textElement_), 'blocklyCheckbox');\n  this.textElement_.style.display = this.value_ ? 'block' : 'none';\n};\n\n/**\n * @override\n */\nBlockly.FieldCheckbox.prototype.render_ = function() {\n  if (this.textContent_) {\n    this.textContent_.nodeValue = this.getDisplayText_();\n  }\n  this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET);\n};\n\n/**\n * @override\n */\nBlockly.FieldCheckbox.prototype.getDisplayText_ = function() {\n  return this.checkChar_ || Blockly.FieldCheckbox.CHECK_CHAR;\n};\n\n/**\n * Set the character used for the check mark.\n * @param {?string} character The character to use for the check mark, or\n *    null to use the default.\n */\nBlockly.FieldCheckbox.prototype.setCheckCharacter = function(character) {\n  this.checkChar_ = character;\n  this.forceRerender();\n};\n\n/**\n * Toggle the state of the checkbox on click.\n * @protected\n */\nBlockly.FieldCheckbox.prototype.showEditor_ = function() {\n  this.setValue(!this.value_);\n};\n\n/**\n * Ensure that the input value is valid ('TRUE' or 'FALSE').\n * @param {*=} opt_newValue The input value.\n * @return {?string} A valid value ('TRUE' or 'FALSE), or null if invalid.\n * @protected\n */\nBlockly.FieldCheckbox.prototype.doClassValidation_ = function(opt_newValue) {\n  if (opt_newValue === true || opt_newValue === 'TRUE') {\n    return 'TRUE';\n  }\n  if (opt_newValue === false || opt_newValue === 'FALSE') {\n    return 'FALSE';\n  }\n  return null;\n};\n\n/**\n * Update the value of the field, and update the checkElement.\n * @param {*} newValue The value to be saved. The default validator guarantees\n * that this is a either 'TRUE' or 'FALSE'.\n * @protected\n */\nBlockly.FieldCheckbox.prototype.doValueUpdate_ = function(newValue) {\n  this.value_ = this.convertValueToBool_(newValue);\n  // Update visual.\n  if (this.textElement_) {\n    this.textElement_.style.display = this.value_ ? 'block' : 'none';\n  }\n};\n\n/**\n * Get the value of this field, either 'TRUE' or 'FALSE'.\n * @return {string} The value of this field.\n */\nBlockly.FieldCheckbox.prototype.getValue = function() {\n  return this.value_ ? 'TRUE' : 'FALSE';\n};\n\n/**\n * Get the boolean value of this field.\n * @return {boolean} The boolean value of this field.\n */\nBlockly.FieldCheckbox.prototype.getValueBoolean = function() {\n  return /** @type {boolean} */ (this.value_);\n};\n\n/**\n * Get the text of this field. Used when the block is collapsed.\n * @return {string} Text representing the value of this field\n *    ('true' or 'false').\n */\nBlockly.FieldCheckbox.prototype.getText = function() {\n  return String(this.convertValueToBool_(this.value_));\n};\n\n/**\n * Convert a value into a pure boolean.\n *\n * Converts 'TRUE' to true and 'FALSE' to false correctly, everything else\n * is cast to a boolean.\n * @param {*} value The value to convert.\n * @return {boolean} The converted value.\n * @private\n */\nBlockly.FieldCheckbox.prototype.convertValueToBool_ = function(value) {\n  if (typeof value == 'string') {\n    return value == 'TRUE';\n  } else {\n    return !!value;\n  }\n};\n\nBlockly.fieldRegistry.register('field_checkbox', Blockly.FieldCheckbox);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Colour input field.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.FieldColour');\n\ngoog.require('Blockly.Css');\ngoog.require('Blockly.DropDownDiv');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockChange');\ngoog.require('Blockly.Field');\ngoog.require('Blockly.fieldRegistry');\ngoog.require('Blockly.navigation');\ngoog.require('Blockly.utils.aria');\ngoog.require('Blockly.utils.colour');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.IdGenerator');\ngoog.require('Blockly.utils.KeyCodes');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Size');\n\n\n/**\n * Class for a colour input field.\n * @param {string=} opt_value The initial value of the field. Should be in\n *    '#rrggbb' format. Defaults to the first value in the default colour array.\n * @param {Function=} opt_validator A function that is called to validate\n *    changes to the field's value. Takes in a colour string & returns a\n *    validated colour string ('#rrggbb' format), or null to abort the change.\n * @param {Object=} opt_config A map of options used to configure the field.\n *    See the [field creation documentation]{@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/colour}\n *    for a list of properties this parameter supports.\n * @extends {Blockly.Field}\n * @constructor\n */\nBlockly.FieldColour = function(opt_value, opt_validator, opt_config) {\n  Blockly.FieldColour.superClass_.constructor.call(\n      this, opt_value, opt_validator, opt_config);\n\n  /**\n   * The field's colour picker element.\n   * @type {Element}\n   * @private\n   */\n  this.picker_ = null;\n\n  /**\n   * Index of the currently highlighted element.\n   * @type {?number}\n   * @private\n   */\n  this.highlightedIndex_ = null;\n\n  /**\n   * Mouse click event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onClickWrapper_ = null;\n\n  /**\n   * Mouse move event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onMouseMoveWrapper_ = null;\n\n  /**\n   * Mouse enter event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onMouseEnterWrapper_ = null;\n\n  /**\n   * Mouse leave event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onMouseLeaveWrapper_ = null;\n\n  /**\n   * Key down event data.\n   * @type {?Blockly.EventData}\n   * @private\n   */\n  this.onKeyDownWrapper_ = null;\n};\nBlockly.utils.object.inherits(Blockly.FieldColour, Blockly.Field);\n\n/**\n * Construct a FieldColour from a JSON arg object.\n * @param {!Object} options A JSON object with options (colour).\n * @return {!Blockly.FieldColour} The new field instance.\n * @package\n * @nocollapse\n */\nBlockly.FieldColour.fromJson = function(options) {\n  return new Blockly.FieldColour(options['colour'], undefined, options);\n};\n\n/**\n * Serializable fields are saved by the XML renderer, non-serializable fields\n * are not. Editable fields should also be serializable.\n * @type {boolean}\n */\nBlockly.FieldColour.prototype.SERIALIZABLE = true;\n\n/**\n * Mouse cursor style when over the hotspot that initiates the editor.\n */\nBlockly.FieldColour.prototype.CURSOR = 'default';\n\n/**\n * Used to tell if the field needs to be rendered the next time the block is\n * rendered. Colour fields are statically sized, and only need to be\n * rendered at initialization.\n * @type {boolean}\n * @protected\n */\nBlockly.FieldColour.prototype.isDirty_ = false;\n\n/**\n * Array of colours used by this field.  If null, use the global list.\n * @type {Array.<string>}\n * @private\n */\nBlockly.FieldColour.prototype.colours_ = null;\n\n/**\n * Array of colour tooltips used by this field.  If null, use the global list.\n * @type {Array.<string>}\n * @private\n */\nBlockly.FieldColour.prototype.titles_ = null;\n\n/**\n * Number of colour columns used by this field.  If 0, use the global setting.\n * By default use the global constants for columns.\n * @type {number}\n * @private\n */\nBlockly.FieldColour.prototype.columns_ = 0;\n\n/**\n * Configure the field based on the given map of options.\n * @param {!Object} config A map of options to configure the field based on.\n * @private\n */\nBlockly.FieldColour.prototype.configure_ = function(config) {\n  Blockly.FieldColour.superClass_.configure_.call(this, config);\n  if (config['colourOptions']) {\n    this.colours_ = config['colourOptions'];\n    this.titles_ = config['colourTitles'];\n  }\n  if (config['columns']) {\n    this.columns_ = config['columns'];\n  }\n};\n\n/**\n * Create the block UI for this colour field.\n * @package\n */\nBlockly.FieldColour.prototype.initView = function() {\n  this.size_ = new Blockly.utils.Size(\n      this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,\n      this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT);\n  if (!this.getConstants().FIELD_COLOUR_FULL_BLOCK) {\n    this.createBorderRect_();\n    this.borderRect_.style['fillOpacity'] = '1';\n  } else {\n    this.clickTarget_ = this.sourceBlock_.getSvgRoot();\n  }\n};\n\n/**\n * @override\n */\nBlockly.FieldColour.prototype.applyColour = function() {\n  if (!this.getConstants().FIELD_COLOUR_FULL_BLOCK) {\n    if (this.borderRect_) {\n      this.borderRect_.style.fill = this.getValue();\n    }\n  } else {\n    this.sourceBlock_.pathObject.svgPath.setAttribute('fill', this.getValue());\n    this.sourceBlock_.pathObject.svgPath.setAttribute('stroke', '#fff');\n  }\n};\n\n/**\n * Ensure that the input value is a valid colour.\n * @param {*=} opt_newValue The input value.\n * @return {?string} A valid colour, or null if invalid.\n * @protected\n */\nBlockly.FieldColour.prototype.doClassValidation_ = function(opt_newValue) {\n  if (typeof opt_newValue != 'string') {\n    return null;\n  }\n  return Blockly.utils.colour.parse(opt_newValue);\n};\n\n/**\n * Update the value of this colour field, and update the displayed colour.\n * @param {*} newValue The value to be saved. The default validator guarantees\n * that this is a colour in '#rrggbb' format.\n * @protected\n */\nBlockly.FieldColour.prototype.doValueUpdate_ = function(newValue) {\n  this.value_ = newValue;\n  if (this.borderRect_) {\n    this.borderRect_.style.fill = newValue;\n  } else if (this.sourceBlock_ && this.sourceBlock_.rendered) {\n    this.sourceBlock_.pathObject.svgPath.setAttribute('fill', newValue);\n    this.sourceBlock_.pathObject.svgPath.setAttribute('stroke', '#fff');\n  }\n};\n\n/**\n * Get the text for this field.  Used when the block is collapsed.\n * @return {string} Text representing the value of this field.\n */\nBlockly.FieldColour.prototype.getText = function() {\n  var colour = /** @type {string} */ (this.value_);\n  // Try to use #rgb format if possible, rather than #rrggbb.\n  if (/^#(.)\\1(.)\\2(.)\\3$/.test(colour)) {\n    colour = '#' + colour[1] + colour[3] + colour[5];\n  }\n  return colour;\n};\n\n/**\n * An array of colour strings for the palette.\n * Copied from goog.ui.ColorPicker.SIMPLE_GRID_COLORS\n * All colour pickers use this unless overridden with setColours.\n * @type {!Array.<string>}\n */\nBlockly.FieldColour.COLOURS = [\n  // grays\n  '#ffffff', '#cccccc', '#c0c0c0', '#999999', '#666666', '#333333', '#000000',\n  // reds\n  '#ffcccc', '#ff6666', '#ff0000', '#cc0000', '#990000', '#660000', '#330000',\n  // oranges\n  '#ffcc99', '#ff9966', '#ff9900', '#ff6600', '#cc6600', '#993300', '#663300',\n  // yellows\n  '#ffff99', '#ffff66', '#ffcc66', '#ffcc33', '#cc9933', '#996633', '#663333',\n  // olives\n  '#ffffcc', '#ffff33', '#ffff00', '#ffcc00', '#999900', '#666600', '#333300',\n  // greens\n  '#99ff99', '#66ff99', '#33ff33', '#33cc00', '#009900', '#006600', '#003300',\n  // turquoises\n  '#99ffff', '#33ffff', '#66cccc', '#00cccc', '#339999', '#336666', '#003333',\n  // blues\n  '#ccffff', '#66ffff', '#33ccff', '#3366ff', '#3333ff', '#000099', '#000066',\n  // purples\n  '#ccccff', '#9999ff', '#6666cc', '#6633ff', '#6600cc', '#333399', '#330099',\n  // violets\n  '#ffccff', '#ff99ff', '#cc66cc', '#cc33cc', '#993399', '#663366', '#330033'\n];\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nBlockly.FieldColour.prototype.DEFAULT_VALUE = Blockly.FieldColour.COLOURS[0];\n\n/**\n * An array of tooltip strings for the palette.  If not the same length as\n * COLOURS, the colour's hex code will be used for any missing titles.\n * All colour pickers use this unless overridden with setColours.\n * @type {!Array.<string>}\n */\nBlockly.FieldColour.TITLES = [];\n\n/**\n * Number of columns in the palette.\n * All colour pickers use this unless overridden with setColumns.\n */\nBlockly.FieldColour.COLUMNS = 7;\n\n/**\n * Set a custom colour grid for this field.\n * @param {Array.<string>} colours Array of colours for this block,\n *     or null to use default (Blockly.FieldColour.COLOURS).\n * @param {Array.<string>=} opt_titles Optional array of colour tooltips,\n *     or null to use default (Blockly.FieldColour.TITLES).\n * @return {!Blockly.FieldColour} Returns itself (for method chaining).\n */\nBlockly.FieldColour.prototype.setColours = function(colours, opt_titles) {\n  this.colours_ = colours;\n  if (opt_titles) {\n    this.titles_ = opt_titles;\n  }\n  return this;\n};\n\n/**\n * Set a custom grid size for this field.\n * @param {number} columns Number of columns for this block,\n *     or 0 to use default (Blockly.FieldColour.COLUMNS).\n * @return {!Blockly.FieldColour} Returns itself (for method chaining).\n */\nBlockly.FieldColour.prototype.setColumns = function(columns) {\n  this.columns_ = columns;\n  return this;\n};\n\n/**\n * Create and show the colour field's editor.\n * @protected\n */\nBlockly.FieldColour.prototype.showEditor_ = function() {\n  this.picker_ = this.dropdownCreate_();\n  Blockly.DropDownDiv.getContentDiv().appendChild(this.picker_);\n\n  Blockly.DropDownDiv.showPositionedByField(\n      this, this.dropdownDispose_.bind(this));\n\n  // Focus so we can start receiving keyboard events.\n  this.picker_.focus({preventScroll:true});\n};\n\n/**\n * Handle a click on a colour cell.\n * @param {!MouseEvent} e Mouse event.\n * @private\n */\nBlockly.FieldColour.prototype.onClick_ = function(e) {\n  var cell = /** @type {!Element} */ (e.target);\n  var colour = cell && cell.label;\n  if (colour !== null) {\n    this.setValue(colour);\n    Blockly.DropDownDiv.hideIfOwner(this);\n  }\n};\n\n/**\n * Handle a key down event. Navigate around the grid with the\n * arrow keys. Enter selects the highlighted colour.\n * @param {!KeyboardEvent} e Keyboard event.\n * @private\n */\nBlockly.FieldColour.prototype.onKeyDown_ = function(e) {\n  var handled = false;\n  if (e.keyCode === Blockly.utils.KeyCodes.UP) {\n    this.moveHighlightBy_(0, -1);\n    handled = true;\n  } else if (e.keyCode === Blockly.utils.KeyCodes.DOWN) {\n    this.moveHighlightBy_(0, 1);\n    handled = true;\n  } else if (e.keyCode === Blockly.utils.KeyCodes.LEFT) {\n    this.moveHighlightBy_(-1, 0);\n    handled = true;\n  } else if (e.keyCode === Blockly.utils.KeyCodes.RIGHT) {\n    this.moveHighlightBy_(1, 0);\n    handled = true;\n  } else if (e.keyCode === Blockly.utils.KeyCodes.ENTER) {\n    // Select the highlighted colour.\n    var highlighted = this.getHighlighted_();\n    if (highlighted) {\n      var colour = highlighted && highlighted.label;\n      if (colour !== null) {\n        this.setValue(colour);\n      }\n    }\n    Blockly.DropDownDiv.hideWithoutAnimation();\n    handled = true;\n  }\n  if (handled) {\n    e.stopPropagation();\n  }\n};\n\n/**\n * Handles the given action.\n * This is only triggered when keyboard accessibility mode is enabled.\n * @param {!Blockly.Action} action The action to be handled.\n * @return {boolean} True if the field handled the action, false otherwise.\n * @package\n */\nBlockly.FieldColour.prototype.onBlocklyAction = function(action) {\n  if (this.picker_) {\n    if (action === Blockly.navigation.ACTION_PREVIOUS) {\n      this.moveHighlightBy_(0, -1);\n      return true;\n    } else if (action === Blockly.navigation.ACTION_NEXT) {\n      this.moveHighlightBy_(0, 1);\n      return true;\n    } else if (action === Blockly.navigation.ACTION_OUT) {\n      this.moveHighlightBy_(-1, 0);\n      return true;\n    } else if (action === Blockly.navigation.ACTION_IN) {\n      this.moveHighlightBy_(1, 0);\n      return true;\n    }\n  }\n  return Blockly.FieldColour.superClass_.onBlocklyAction.call(this, action);\n};\n\n/**\n * Move the currently highlighted position by dx and dy.\n * @param {number} dx Change of x\n * @param {number} dy Change of y\n * @private\n */\nBlockly.FieldColour.prototype.moveHighlightBy_ = function(dx, dy) {\n  var colours = this.colours_ || Blockly.FieldColour.COLOURS;\n  var columns = this.columns_ || Blockly.FieldColour.COLUMNS;\n\n  // Get the current x and y coordinates\n  var x = this.highlightedIndex_ % columns;\n  var y = Math.floor(this.highlightedIndex_ / columns);\n\n  // Add the offset\n  x += dx;\n  y += dy;\n\n  if (dx < 0) {\n    // Move left one grid cell, even in RTL.\n    // Loop back to the end of the previous row if we have room.\n    if (x < 0 && y > 0) {\n      x = columns - 1;\n      y--;\n    } else if (x < 0) {\n      x = 0;\n    }\n  } else if (dx > 0) {\n    // Move right one grid cell, even in RTL.\n    // Loop to the start of the next row, if there's room.\n    if (x > columns - 1 &&\n      y < Math.floor(colours.length / columns) - 1) {\n      x = 0;\n      y++;\n    } else if (x > columns - 1) {\n      x--;\n    }\n  } else if (dy < 0) {\n    // Move up one grid cell, stop at the top.\n    if (y < 0) {\n      y = 0;\n    }\n  } else if (dy > 0) {\n    // Move down one grid cell, stop at the bottom.\n    if (y > Math.floor(colours.length / columns) - 1) {\n      y = Math.floor(colours.length / columns) - 1;\n    }\n  }\n\n  // Move the highlight to the new coordinates.\n  var cell = /** @type {!Element} */ (this.picker_.childNodes[y].childNodes[x]);\n  var index = (y * columns) + x;\n  this.setHighlightedCell_(cell, index);\n};\n\n/**\n * Handle a mouse move event. Highlight the hovered colour.\n * @param {!MouseEvent} e Mouse event.\n * @private\n */\nBlockly.FieldColour.prototype.onMouseMove_ = function(e) {\n  var cell = /** @type {!Element} */ (e.target);\n  var index = cell && Number(cell.getAttribute('data-index'));\n  if (index !== null && index !== this.highlightedIndex_) {\n    this.setHighlightedCell_(cell, index);\n  }\n};\n\n/**\n * Handle a mouse enter event. Focus the picker.\n * @private\n */\nBlockly.FieldColour.prototype.onMouseEnter_ = function() {\n  this.picker_.focus({preventScroll:true});\n};\n\n/**\n * Handle a mouse leave event. Blur the picker and unhighlight\n * the currently highlighted colour.\n * @private\n */\nBlockly.FieldColour.prototype.onMouseLeave_ = function() {\n  this.picker_.blur();\n  var highlighted = this.getHighlighted_();\n  if (highlighted) {\n    Blockly.utils.dom.removeClass(highlighted, 'blocklyColourHighlighted');\n  }\n};\n\n/**\n * Returns the currently highlighted item (if any).\n * @return {HTMLElement} Highlighted item (null if none).\n * @private\n */\nBlockly.FieldColour.prototype.getHighlighted_ = function() {\n  var columns = this.columns_ || Blockly.FieldColour.COLUMNS;\n  var x = this.highlightedIndex_ % columns;\n  var y = Math.floor(this.highlightedIndex_ / columns);\n  var row = this.picker_.childNodes[y];\n  if (!row) {\n    return null;\n  }\n  var col = /** @type {HTMLElement} */ (row.childNodes[x]);\n  return col;\n};\n\n/**\n * Update the currently highlighted cell.\n * @param {!Element} cell the new cell to highlight\n * @param {number} index the index of the new cell\n * @private\n */\nBlockly.FieldColour.prototype.setHighlightedCell_ = function(cell, index) {\n  // Unhighlight the current item.\n  var highlighted = this.getHighlighted_();\n  if (highlighted) {\n    Blockly.utils.dom.removeClass(highlighted, 'blocklyColourHighlighted');\n  }\n  // Highlight new item.\n  Blockly.utils.dom.addClass(cell, 'blocklyColourHighlighted');\n  // Set new highlighted index.\n  this.highlightedIndex_ = index;\n\n  // Update accessibility roles.\n  Blockly.utils.aria.setState(/** @type {!Element} */ (this.picker_),\n      Blockly.utils.aria.State.ACTIVEDESCENDANT, cell.getAttribute('id'));\n};\n\n/**\n * Create a colour picker dropdown editor.\n * @return {!Element} The newly created colour picker.\n * @private\n */\nBlockly.FieldColour.prototype.dropdownCreate_ = function() {\n  var columns = this.columns_ || Blockly.FieldColour.COLUMNS;\n  var colours = this.colours_ || Blockly.FieldColour.COLOURS;\n  var titles = this.titles_ || Blockly.FieldColour.TITLES;\n  var selectedColour = this.getValue();\n  // Create the palette.\n  var table = document.createElement('table');\n  table.className = 'blocklyColourTable';\n  table.tabIndex = 0;\n  table.dir = 'ltr';\n  Blockly.utils.aria.setRole(table, Blockly.utils.aria.Role.GRID);\n  Blockly.utils.aria.setState(table, Blockly.utils.aria.State.EXPANDED, true);\n  Blockly.utils.aria.setState(table, Blockly.utils.aria.State.ROWCOUNT,\n      Math.floor(colours.length / columns));\n  Blockly.utils.aria.setState(table, Blockly.utils.aria.State.COLCOUNT,\n      columns);\n  var row;\n  for (var i = 0; i < colours.length; i++) {\n    if (i % columns == 0) {\n      row = document.createElement('tr');\n      Blockly.utils.aria.setRole(row, Blockly.utils.aria.Role.ROW);\n      table.appendChild(row);\n    }\n    var cell = document.createElement('td');\n    row.appendChild(cell);\n    cell.label = colours[i];  // This becomes the value, if clicked.\n    cell.title = titles[i] || colours[i];\n    cell.id = Blockly.utils.IdGenerator.getNextUniqueId();\n    cell.setAttribute('data-index', i);\n    Blockly.utils.aria.setRole(cell, Blockly.utils.aria.Role.GRIDCELL);\n    Blockly.utils.aria.setState(cell,\n        Blockly.utils.aria.State.LABEL, colours[i]);\n    Blockly.utils.aria.setState(cell,\n        Blockly.utils.aria.State.SELECTED, colours[i] == selectedColour);\n    cell.style.backgroundColor = colours[i];\n    if (colours[i] == selectedColour) {\n      cell.className = 'blocklyColourSelected';\n      this.highlightedIndex_ = i;\n    }\n  }\n\n  // Configure event handler on the table to listen for any event in a cell.\n  this.onClickWrapper_ = Blockly.bindEventWithChecks_(table,\n      'click', this, this.onClick_, true);\n  this.onMouseMoveWrapper_ = Blockly.bindEventWithChecks_(table,\n      'mousemove', this, this.onMouseMove_, true);\n  this.onMouseEnterWrapper_ = Blockly.bindEventWithChecks_(table,\n      'mouseenter', this, this.onMouseEnter_, true);\n  this.onMouseLeaveWrapper_ = Blockly.bindEventWithChecks_(table,\n      'mouseleave', this, this.onMouseLeave_, true);\n  this.onKeyDownWrapper_ = Blockly.bindEventWithChecks_(table,\n      'keydown', this, this.onKeyDown_);\n\n  return table;\n};\n\n/**\n * Disposes of events and dom-references belonging to the colour editor.\n * @private\n */\nBlockly.FieldColour.prototype.dropdownDispose_ = function() {\n  if (this.onClickWrapper_) {\n    Blockly.unbindEvent_(this.onClickWrapper_);\n    this.onClickWrapper_ = null;\n  }\n  if (this.onMouseMoveWrapper_) {\n    Blockly.unbindEvent_(this.onMouseMoveWrapper_);\n    this.onMouseMoveWrapper_ = null;\n  }\n  if (this.onMouseEnterWrapper_) {\n    Blockly.unbindEvent_(this.onMouseEnterWrapper_);\n    this.onMouseEnterWrapper_ = null;\n  }\n  if (this.onMouseLeaveWrapper_) {\n    Blockly.unbindEvent_(this.onMouseLeaveWrapper_);\n    this.onMouseLeaveWrapper_ = null;\n  }\n  if (this.onKeyDownWrapper_) {\n    Blockly.unbindEvent_(this.onKeyDownWrapper_);\n    this.onKeyDownWrapper_ = null;\n  }\n  this.picker_ = null;\n  this.highlightedIndex_ = null;\n};\n\n/**\n * CSS for colour picker.  See css.js for use.\n */\nBlockly.Css.register([\n  /* eslint-disable indent */\n  '.blocklyColourTable {',\n    'border-collapse: collapse;',\n    'display: block;',\n    'outline: none;',\n    'padding: 1px;',\n  '}',\n\n  '.blocklyColourTable>tr>td {',\n    'border: .5px solid #888;',\n    'box-sizing: border-box;',\n    'cursor: pointer;',\n    'display: inline-block;',\n    'height: 20px;',\n    'padding: 0;',\n    'width: 20px;',\n  '}',\n\n  '.blocklyColourTable>tr>td.blocklyColourHighlighted {',\n    'border-color: #eee;',\n    'box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);',\n    'position: relative;',\n  '}',\n\n  '.blocklyColourSelected, .blocklyColourSelected:hover {',\n    'border-color: #eee !important;',\n    'outline: 1px solid #333;',\n    'position: relative;',\n  '}'\n  /* eslint-enable indent */\n]);\n\nBlockly.fieldRegistry.register('field_colour', Blockly.FieldColour);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Dropdown input field.  Used for editable titles and variables.\n * In the interests of a consistent UI, the toolbox shares some functions and\n * properties with the context menu.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.FieldDropdown');\n\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockChange');\ngoog.require('Blockly.Field');\ngoog.require('Blockly.fieldRegistry');\ngoog.require('Blockly.Menu');\ngoog.require('Blockly.MenuItem');\ngoog.require('Blockly.navigation');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.aria');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Size');\ngoog.require('Blockly.utils.string');\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.userAgent');\n\n\n/**\n * Class for an editable dropdown field.\n * @param {(!Array.<!Array>|!Function)} menuGenerator A non-empty array of\n *     options for a dropdown list, or a function which generates these options.\n * @param {Function=} opt_validator A function that is called to validate\n *    changes to the field's value. Takes in a language-neutral dropdown\n *    option & returns a validated language-neutral dropdown option, or null to\n *    abort the change.\n * @param {Object=} opt_config A map of options used to configure the field.\n *    See the [field creation documentation]{@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/dropdown#creation}\n *    for a list of properties this parameter supports.\n * @extends {Blockly.Field}\n * @constructor\n * @throws {TypeError} If `menuGenerator` options are incorrectly structured.\n */\nBlockly.FieldDropdown = function(menuGenerator, opt_validator, opt_config) {\n  if (typeof menuGenerator != 'function') {\n    Blockly.FieldDropdown.validateOptions_(menuGenerator);\n  }\n\n  /**\n   * An array of options for a dropdown list,\n   * or a function which generates these options.\n   * @type {(!Array.<!Array>|\n   *    !function(this:Blockly.FieldDropdown): !Array.<!Array>)}\n   * @protected\n   */\n  this.menuGenerator_ = menuGenerator;\n\n  /**\n   * A cache of the most recently generated options.\n   * @type {Array.<!Array.<string>>}\n   * @private\n   */\n  this.generatedOptions_ = null;\n\n  /**\n   * The prefix field label, of common words set after options are trimmed.\n   * @type {?string}\n   * @package\n   */\n  this.prefixField = null;\n\n  /**\n   * The suffix field label, of common words set after options are trimmed.\n   * @type {?string}\n   * @package\n   */\n  this.suffixField = null;\n\n  this.trimOptions_();\n\n  /**\n   * The currently selected option. The field is initialized with the\n   * first option selected.\n   * @type {!Object}\n   * @private\n   */\n  this.selectedOption_ = this.getOptions(false)[0];\n\n  // Call parent's constructor.\n  Blockly.FieldDropdown.superClass_.constructor.call(\n      this, this.selectedOption_[1], opt_validator, opt_config);\n\n  /**\n   * A reference to the currently selected menu item.\n   * @type {Blockly.MenuItem}\n   * @private\n   */\n  this.selectedMenuItem_ = null;\n\n  /**\n   * The dropdown menu.\n   * @type {Blockly.Menu}\n   * @private\n   */\n  this.menu_ = null;\n\n  /**\n   * SVG image element if currently selected option is an image, or null.\n   * @type {SVGImageElement}\n   * @private\n   */\n  this.imageElement_ = null;\n\n  /**\n   * Tspan based arrow element.\n   * @type {SVGTSpanElement}\n   * @private\n   */\n  this.arrow_ = null;\n\n  /**\n   * SVG based arrow element.\n   * @type {SVGElement}\n   * @private\n   */\n  this.svgArrow_ = null;\n};\nBlockly.utils.object.inherits(Blockly.FieldDropdown, Blockly.Field);\n\n/**\n * Dropdown image properties.\n * @typedef {{\n  *            src:string,\n  *            alt:string,\n  *            width:number,\n  *            height:number\n  *          }}\n  */\nBlockly.FieldDropdown.ImageProperties;\n\n/**\n * Construct a FieldDropdown from a JSON arg object.\n * @param {!Object} options A JSON object with options (options).\n * @return {!Blockly.FieldDropdown} The new field instance.\n * @package\n * @nocollapse\n */\nBlockly.FieldDropdown.fromJson = function(options) {\n  return new Blockly.FieldDropdown(options['options'], undefined, options);\n};\n\n/**\n * Serializable fields are saved by the XML renderer, non-serializable fields\n * are not. Editable fields should also be serializable.\n * @type {boolean}\n */\nBlockly.FieldDropdown.prototype.SERIALIZABLE = true;\n\n/**\n * Horizontal distance that a checkmark overhangs the dropdown.\n */\nBlockly.FieldDropdown.CHECKMARK_OVERHANG = 25;\n\n/**\n * Maximum height of the dropdown menu, as a percentage of the viewport height.\n */\nBlockly.FieldDropdown.MAX_MENU_HEIGHT_VH = 0.45;\n\n/**\n * The y offset from the top of the field to the top of the image, if an image\n * is selected.\n * @type {number}\n * @const\n * @private\n */\nBlockly.FieldDropdown.IMAGE_Y_OFFSET = 5;\n\n/**\n * The total vertical padding above and below an image.\n * @type {number}\n * @const\n * @private\n */\nBlockly.FieldDropdown.IMAGE_Y_PADDING =\n    Blockly.FieldDropdown.IMAGE_Y_OFFSET * 2;\n\n/**\n * Android can't (in 2014) display \"\", so use \"\" instead.\n */\nBlockly.FieldDropdown.ARROW_CHAR =\n    Blockly.utils.userAgent.ANDROID ? '\\u25BC' : '\\u25BE';\n\n/**\n * Mouse cursor style when over the hotspot that initiates the editor.\n */\nBlockly.FieldDropdown.prototype.CURSOR = 'default';\n\n/**\n * Create the block UI for this dropdown.\n * @package\n */\nBlockly.FieldDropdown.prototype.initView = function() {\n  if (this.shouldAddBorderRect_()) {\n    this.createBorderRect_();\n  } else {\n    this.clickTarget_ = this.sourceBlock_.getSvgRoot();\n  }\n  this.createTextElement_();\n\n  this.imageElement_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.IMAGE, {}, this.fieldGroup_);\n\n  if (this.getConstants().FIELD_DROPDOWN_SVG_ARROW) {\n    this.createSVGArrow_();\n  } else {\n    this.createTextArrow_();\n  }\n\n  if (this.borderRect_) {\n    Blockly.utils.dom.addClass(this.borderRect_, 'blocklyDropdownRect');\n  }\n};\n\n/**\n * Whether or not the dropdown should add a border rect.\n * @return {boolean} True if the dropdown field should add a border rect.\n * @protected\n */\nBlockly.FieldDropdown.prototype.shouldAddBorderRect_ = function() {\n  return !this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW ||\n      (this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW &&\n          !this.sourceBlock_.isShadow());\n};\n\n/**\n * Create a tspan based arrow.\n * @protected\n */\nBlockly.FieldDropdown.prototype.createTextArrow_ = function() {\n  this.arrow_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.TSPAN, {}, this.textElement_);\n  this.arrow_.appendChild(document.createTextNode(\n      this.sourceBlock_.RTL ?\n      Blockly.FieldDropdown.ARROW_CHAR + ' ' :\n      ' ' + Blockly.FieldDropdown.ARROW_CHAR));\n  if (this.sourceBlock_.RTL) {\n    this.textElement_.insertBefore(this.arrow_, this.textContent_);\n  } else {\n    this.textElement_.appendChild(this.arrow_);\n  }\n};\n\n/**\n * Create an SVG based arrow.\n * @protected\n */\nBlockly.FieldDropdown.prototype.createSVGArrow_ = function() {\n  this.svgArrow_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.IMAGE, {\n        'height': this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE + 'px',\n        'width': this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE + 'px'\n      }, this.fieldGroup_);\n  this.svgArrow_.setAttributeNS(Blockly.utils.dom.XLINK_NS, 'xlink:href',\n      this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI);\n};\n\n/**\n * Create a dropdown menu under the text.\n * @param {Event=} opt_e Optional mouse event that triggered the field to open,\n *     or undefined if triggered programmatically.\n * @protected\n */\nBlockly.FieldDropdown.prototype.showEditor_ = function(opt_e) {\n  this.menu_ = this.dropdownCreate_();\n  if (opt_e && typeof opt_e.clientX === 'number') {\n    this.menu_.openingCoords =\n        new Blockly.utils.Coordinate(opt_e.clientX, opt_e.clientY);\n  } else {\n    this.menu_.openingCoords = null;\n  }\n  // Element gets created in render.\n  this.menu_.render(Blockly.DropDownDiv.getContentDiv());\n  var menuElement = /** @type {!Element} */ (this.menu_.getElement());\n  Blockly.utils.dom.addClass(menuElement, 'blocklyDropdownMenu');\n\n  if (this.getConstants().FIELD_DROPDOWN_COLOURED_DIV) {\n    var primaryColour = (this.sourceBlock_.isShadow()) ?\n        this.sourceBlock_.getParent().getColour() :\n        this.sourceBlock_.getColour();\n    var borderColour = (this.sourceBlock_.isShadow()) ?\n        this.sourceBlock_.getParent().style.colourTertiary :\n        this.sourceBlock_.style.colourTertiary;\n    Blockly.DropDownDiv.setColour(primaryColour, borderColour);\n  }\n\n  Blockly.DropDownDiv.showPositionedByField(\n      this, this.dropdownDispose_.bind(this));\n\n  // Focusing needs to be handled after the menu is rendered and positioned.\n  // Otherwise it will cause a page scroll to get the misplaced menu in\n  // view. See issue #1329.\n  this.menu_.focus();\n\n  if (this.selectedMenuItem_) {\n    this.menu_.setHighlighted(this.selectedMenuItem_);\n  }\n\n  this.applyColour();\n};\n\n/**\n * Create the dropdown editor.\n * @return {!Blockly.Menu} The newly created dropdown menu.\n * @private\n */\nBlockly.FieldDropdown.prototype.dropdownCreate_ = function() {\n  var menu = new Blockly.Menu();\n  menu.setRole(Blockly.utils.aria.Role.LISTBOX);\n\n  var options = this.getOptions(false);\n  this.selectedMenuItem_ = null;\n  for (var i = 0; i < options.length; i++) {\n    var content = options[i][0]; // Human-readable text or image.\n    var value = options[i][1];   // Language-neutral value.\n    if (typeof content == 'object') {\n      // An image, not text.\n      var image = new Image(content['width'], content['height']);\n      image.src = content['src'];\n      image.alt = content['alt'] || '';\n      content = image;\n    }\n    var menuItem = new Blockly.MenuItem(content, value);\n    menuItem.setRole(Blockly.utils.aria.Role.OPTION);\n    menuItem.setRightToLeft(this.sourceBlock_.RTL);\n    menuItem.setCheckable(true);\n    menu.addChild(menuItem);\n    menuItem.setChecked(value == this.value_);\n    if (value == this.value_) {\n      this.selectedMenuItem_ = menuItem;\n    }\n    menuItem.onAction(this.handleMenuActionEvent_, this);\n  }\n\n  return menu;\n};\n\n/**\n * Disposes of events and dom-references belonging to the dropdown editor.\n * @private\n */\nBlockly.FieldDropdown.prototype.dropdownDispose_ = function() {\n  if (this.menu_) {\n    this.menu_.dispose();\n  }\n  this.menu_ = null;\n  this.selectedMenuItem_ = null;\n  this.applyColour();\n};\n\n/**\n * Handle an action in the dropdown menu.\n * @param {!Blockly.MenuItem} menuItem The MenuItem selected within menu.\n * @private\n */\nBlockly.FieldDropdown.prototype.handleMenuActionEvent_ = function(menuItem) {\n  Blockly.DropDownDiv.hideIfOwner(this, true);\n  this.onItemSelected_(/** @type {!Blockly.Menu} */ (this.menu_), menuItem);\n};\n\n/**\n * Handle the selection of an item in the dropdown menu.\n * @param {!Blockly.Menu} menu The Menu component clicked.\n * @param {!Blockly.MenuItem} menuItem The MenuItem selected within menu.\n * @protected\n */\nBlockly.FieldDropdown.prototype.onItemSelected_ = function(menu, menuItem) {\n  this.setValue(menuItem.getValue());\n};\n\n/**\n * Factor out common words in statically defined options.\n * Create prefix and/or suffix labels.\n * @private\n */\nBlockly.FieldDropdown.prototype.trimOptions_ = function() {\n  var options = this.menuGenerator_;\n  if (!Array.isArray(options)) {\n    return;\n  }\n  var hasImages = false;\n\n  // Localize label text and image alt text.\n  for (var i = 0; i < options.length; i++) {\n    var label = options[i][0];\n    if (typeof label == 'string') {\n      options[i][0] = Blockly.utils.replaceMessageReferences(label);\n    } else {\n      if (label.alt != null) {\n        options[i][0].alt = Blockly.utils.replaceMessageReferences(label.alt);\n      }\n      hasImages = true;\n    }\n  }\n  if (hasImages || options.length < 2) {\n    return;  // Do nothing if too few items or at least one label is an image.\n  }\n  var strings = [];\n  for (var i = 0; i < options.length; i++) {\n    strings.push(options[i][0]);\n  }\n  var shortest = Blockly.utils.string.shortestStringLength(strings);\n  var prefixLength = Blockly.utils.string.commonWordPrefix(strings, shortest);\n  var suffixLength = Blockly.utils.string.commonWordSuffix(strings, shortest);\n  if (!prefixLength && !suffixLength) {\n    return;\n  }\n  if (shortest <= prefixLength + suffixLength) {\n    // One or more strings will entirely vanish if we proceed.  Abort.\n    return;\n  }\n  if (prefixLength) {\n    this.prefixField = strings[0].substring(0, prefixLength - 1);\n  }\n  if (suffixLength) {\n    this.suffixField = strings[0].substr(1 - suffixLength);\n  }\n\n  this.menuGenerator_ = Blockly.FieldDropdown.applyTrim_(options, prefixLength,\n      suffixLength);\n};\n\n/**\n * Use the calculated prefix and suffix lengths to trim all of the options in\n * the given array.\n * @param {!Array.<!Array>} options Array of option tuples:\n *     (human-readable text or image, language-neutral name).\n * @param {number} prefixLength The length of the common prefix.\n * @param {number} suffixLength The length of the common suffix\n * @return {!Array.<!Array>} A new array with all of the option text trimmed.\n */\nBlockly.FieldDropdown.applyTrim_ = function(options,\n    prefixLength, suffixLength) {\n  var newOptions = [];\n  // Remove the prefix and suffix from the options.\n  for (var i = 0; i < options.length; i++) {\n    var text = options[i][0];\n    var value = options[i][1];\n    text = text.substring(prefixLength, text.length - suffixLength);\n    newOptions[i] = [text, value];\n  }\n  return newOptions;\n};\n\n/**\n * @return {boolean} True if the option list is generated by a function.\n *     Otherwise false.\n */\nBlockly.FieldDropdown.prototype.isOptionListDynamic = function() {\n  return typeof this.menuGenerator_ == 'function';\n};\n\n/**\n * Return a list of the options for this dropdown.\n * @param {boolean=} opt_useCache For dynamic options, whether or not to use the\n *     cached options or to re-generate them.\n * @return {!Array.<!Array>} A non-empty array of option tuples:\n *     (human-readable text or image, language-neutral name).\n * @throws {TypeError} If generated options are incorrectly structured.\n */\nBlockly.FieldDropdown.prototype.getOptions = function(opt_useCache) {\n  if (this.isOptionListDynamic()) {\n    if (!this.generatedOptions_ || !opt_useCache) {\n      this.generatedOptions_ = this.menuGenerator_.call(this);\n      Blockly.FieldDropdown.validateOptions_(this.generatedOptions_);\n    }\n    return this.generatedOptions_;\n  }\n  return /** @type {!Array.<!Array.<string>>} */ (this.menuGenerator_);\n};\n\n/**\n * Ensure that the input value is a valid language-neutral option.\n * @param {*=} opt_newValue The input value.\n * @return {?string} A valid language-neutral option, or null if invalid.\n * @protected\n */\nBlockly.FieldDropdown.prototype.doClassValidation_ = function(opt_newValue) {\n  var isValueValid = false;\n  var options = this.getOptions(true);\n  for (var i = 0, option; (option = options[i]); i++) {\n    // Options are tuples of human-readable text and language-neutral values.\n    if (option[1] == opt_newValue) {\n      isValueValid = true;\n      break;\n    }\n  }\n  if (!isValueValid) {\n    if (this.sourceBlock_) {\n      console.warn('Cannot set the dropdown\\'s value to an unavailable option.' +\n        ' Block type: ' + this.sourceBlock_.type + ', Field name: ' + this.name +\n        ', Value: ' + opt_newValue);\n    }\n    return null;\n  }\n  return /** @type {string} */ (opt_newValue);\n};\n\n/**\n * Update the value of this dropdown field.\n * @param {*} newValue The value to be saved. The default validator guarantees\n * that this is one of the valid dropdown options.\n * @protected\n */\nBlockly.FieldDropdown.prototype.doValueUpdate_ = function(newValue) {\n  Blockly.FieldDropdown.superClass_.doValueUpdate_.call(this, newValue);\n  var options = this.getOptions(true);\n  for (var i = 0, option; (option = options[i]); i++) {\n    if (option[1] == this.value_) {\n      this.selectedOption_ = option;\n    }\n  }\n};\n\n/**\n * Updates the dropdown arrow to match the colour/style of the block.\n * @package\n */\nBlockly.FieldDropdown.prototype.applyColour = function() {\n  if (this.borderRect_) {\n    this.borderRect_.setAttribute('stroke',\n        this.sourceBlock_.style.colourTertiary);\n    if (this.menu_) {\n      this.borderRect_.setAttribute('fill',\n          this.sourceBlock_.style.colourTertiary);\n    } else {\n      this.borderRect_.setAttribute('fill', 'transparent');\n    }\n  }\n  // Update arrow's colour.\n  if (this.sourceBlock_ && this.arrow_) {\n    if (this.sourceBlock_.isShadow()) {\n      this.arrow_.style.fill = this.sourceBlock_.style.colourSecondary;\n    } else {\n      this.arrow_.style.fill = this.sourceBlock_.style.colourPrimary;\n    }\n  }\n};\n\n/**\n * Draws the border with the correct width.\n * @protected\n */\nBlockly.FieldDropdown.prototype.render_ = function() {\n  // Hide both elements.\n  this.textContent_.nodeValue = '';\n  this.imageElement_.style.display = 'none';\n\n  // Show correct element.\n  var option = this.selectedOption_ && this.selectedOption_[0];\n  if (option && typeof option == 'object') {\n    this.renderSelectedImage_(\n        /** @type {!Blockly.FieldDropdown.ImageProperties} */ (option));\n  } else {\n    this.renderSelectedText_();\n  }\n\n  this.positionBorderRect_();\n};\n\n/**\n * Renders the selected option, which must be an image.\n * @param {!Blockly.FieldDropdown.ImageProperties} imageJson Selected\n *   option that must be an image.\n * @private\n */\nBlockly.FieldDropdown.prototype.renderSelectedImage_ = function(imageJson) {\n  this.imageElement_.style.display = '';\n  this.imageElement_.setAttributeNS(\n      Blockly.utils.dom.XLINK_NS, 'xlink:href', imageJson.src);\n  this.imageElement_.setAttribute('height', imageJson.height);\n  this.imageElement_.setAttribute('width', imageJson.width);\n\n  var imageHeight = Number(imageJson.height);\n  var imageWidth = Number(imageJson.width);\n\n  // Height and width include the border rect.\n  var hasBorder = !!this.borderRect_;\n  var height = Math.max(\n      hasBorder ? this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT : 0,\n      imageHeight + Blockly.FieldDropdown.IMAGE_Y_PADDING);\n  var xPadding = hasBorder ? this.getConstants().FIELD_BORDER_RECT_X_PADDING : 0;\n  var arrowWidth = 0;\n  if (this.svgArrow_) {\n    arrowWidth = this.positionSVGArrow_(imageWidth + xPadding, height / 2 -\n      this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE / 2);\n  } else {\n    arrowWidth = Blockly.utils.dom.getFastTextWidth(\n        /** @type {!SVGTSpanElement} */ (this.arrow_),\n        this.getConstants().FIELD_TEXT_FONTSIZE,\n        this.getConstants().FIELD_TEXT_FONTWEIGHT,\n        this.getConstants().FIELD_TEXT_FONTFAMILY);\n  }\n  this.size_.width = imageWidth + arrowWidth + xPadding * 2;\n  this.size_.height = height;\n\n  var arrowX = 0;\n  if (this.sourceBlock_.RTL) {\n    var imageX = xPadding + arrowWidth;\n    this.imageElement_.setAttribute('x', imageX);\n  } else {\n    arrowX = imageWidth + arrowWidth;\n    this.textElement_.setAttribute('text-anchor', 'end');\n    this.imageElement_.setAttribute('x', xPadding);\n  }\n  this.imageElement_.setAttribute('y', height / 2 - imageHeight / 2);\n\n  this.positionTextElement_(arrowX + xPadding, imageWidth + arrowWidth);\n};\n\n/**\n * Renders the selected option, which must be text.\n * @private\n */\nBlockly.FieldDropdown.prototype.renderSelectedText_ = function() {\n  // Retrieves the selected option to display through getText_.\n  this.textContent_.nodeValue = this.getDisplayText_();\n  Blockly.utils.dom.addClass(/** @type {!Element} */ (this.textElement_),\n      'blocklyDropdownText');\n  this.textElement_.setAttribute('text-anchor', 'start');\n\n  // Height and width include the border rect.\n  var hasBorder = !!this.borderRect_;\n  var height = Math.max(\n      hasBorder ? this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT : 0,\n      this.getConstants().FIELD_TEXT_HEIGHT);\n  var textWidth = Blockly.utils.dom.getFastTextWidth(this.textElement_,\n      this.getConstants().FIELD_TEXT_FONTSIZE,\n      this.getConstants().FIELD_TEXT_FONTWEIGHT,\n      this.getConstants().FIELD_TEXT_FONTFAMILY);\n  var xPadding = hasBorder ? this.getConstants().FIELD_BORDER_RECT_X_PADDING : 0;\n  var arrowWidth = 0;\n  if (this.svgArrow_) {\n    arrowWidth = this.positionSVGArrow_(textWidth + xPadding, height / 2 -\n        this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE / 2);\n  }\n  this.size_.width = textWidth + arrowWidth + xPadding * 2;\n  this.size_.height = height;\n\n  this.positionTextElement_(xPadding, textWidth);\n};\n\n/**\n * Position a drop-down arrow at the appropriate location at render-time.\n * @param {number} x X position the arrow is being rendered at, in px.\n * @param {number} y Y position the arrow is being rendered at, in px.\n * @return {number} Amount of space the arrow is taking up, in px.\n * @private\n */\nBlockly.FieldDropdown.prototype.positionSVGArrow_ = function(x, y) {\n  if (!this.svgArrow_) {\n    return 0;\n  }\n  var hasBorder = !!this.borderRect_;\n  var xPadding = hasBorder ? this.getConstants().FIELD_BORDER_RECT_X_PADDING : 0;\n  var textPadding = this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING;\n  var svgArrowSize = this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;\n  var arrowX = this.sourceBlock_.RTL ? xPadding : x + textPadding;\n  this.svgArrow_.setAttribute('transform',\n      'translate(' + arrowX + ',' + y + ')');\n  return svgArrowSize + textPadding;\n};\n\n/**\n * Use the `getText_` developer hook to override the field's text\n * representation.  Get the selected option text. If the selected option is an\n * image we return the image alt text.\n * @return {?string} Selected option text.\n * @protected\n * @override\n */\nBlockly.FieldDropdown.prototype.getText_ = function() {\n  if (!this.selectedOption_) {\n    return null;\n  }\n  var option = this.selectedOption_[0];\n  if (typeof option == 'object') {\n    return option['alt'];\n  }\n  return option;\n};\n\n/**\n * Validates the data structure to be processed as an options list.\n * @param {?} options The proposed dropdown options.\n * @throws {TypeError} If proposed options are incorrectly structured.\n * @private\n */\nBlockly.FieldDropdown.validateOptions_ = function(options) {\n  if (!Array.isArray(options)) {\n    throw TypeError('FieldDropdown options must be an array.');\n  }\n  if (!options.length) {\n    throw TypeError('FieldDropdown options must not be an empty array.');\n  }\n  var foundError = false;\n  for (var i = 0; i < options.length; ++i) {\n    var tuple = options[i];\n    if (!Array.isArray(tuple)) {\n      foundError = true;\n      console.error(\n          'Invalid option[' + i + ']: Each FieldDropdown option must be an ' +\n          'array. Found: ', tuple);\n    } else if (typeof tuple[1] != 'string') {\n      foundError = true;\n      console.error(\n          'Invalid option[' + i + ']: Each FieldDropdown option id must be ' +\n          'a string. Found ' + tuple[1] + ' in: ', tuple);\n    } else if (tuple[0] &&\n              (typeof tuple[0] != 'string') &&\n              (typeof tuple[0].src != 'string')) {\n      foundError = true;\n      console.error(\n          'Invalid option[' + i + ']: Each FieldDropdown option must have a ' +\n          'string label or image description. Found' + tuple[0] + ' in: ',\n          tuple);\n    }\n  }\n  if (foundError) {\n    throw TypeError('Found invalid FieldDropdown options.');\n  }\n};\n\n/**\n * Handles the given action.\n * This is only triggered when keyboard accessibility mode is enabled.\n * @param {!Blockly.Action} action The action to be handled.\n * @return {boolean} True if the field handled the action, false otherwise.\n * @package\n */\nBlockly.FieldDropdown.prototype.onBlocklyAction = function(action) {\n  if (this.menu_) {\n    if (action === Blockly.navigation.ACTION_PREVIOUS) {\n      this.menu_.highlightPrevious();\n      return true;\n    } else if (action === Blockly.navigation.ACTION_NEXT) {\n      this.menu_.highlightNext();\n      return true;\n    }\n  }\n  return Blockly.FieldDropdown.superClass_.onBlocklyAction.call(this, action);\n};\n\n\nBlockly.fieldRegistry.register('field_dropdown', Blockly.FieldDropdown);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Non-editable, serializable text field. Behaves like a\n *    normal label but is serialized to XML. It may only be\n *    edited programmatically.\n */\n'use strict';\n\ngoog.provide('Blockly.FieldLabelSerializable');\n\ngoog.require('Blockly.FieldLabel');\ngoog.require('Blockly.fieldRegistry');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * Class for a non-editable, serializable text field.\n * @param {*} opt_value The initial value of the field. Should cast to a\n *    string. Defaults to an empty string if null or undefined.\n * @param {string=} opt_class Optional CSS class for the field's text.\n * @param {Object=} opt_config A map of options used to configure the field.\n *    See the [field creation documentation]{@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/label-serializable#creation}\n *    for a list of properties this parameter supports.\n * @extends {Blockly.FieldLabel}\n * @constructor\n *\n */\nBlockly.FieldLabelSerializable = function(opt_value, opt_class, opt_config) {\n  Blockly.FieldLabelSerializable.superClass_.constructor.call(\n      this, opt_value, opt_class, opt_config);\n};\nBlockly.utils.object.inherits(Blockly.FieldLabelSerializable,\n    Blockly.FieldLabel);\n\n/**\n * Construct a FieldLabelSerializable from a JSON arg object,\n * dereferencing any string table references.\n * @param {!Object} options A JSON object with options (text, and class).\n * @return {!Blockly.FieldLabelSerializable} The new field instance.\n * @package\n * @nocollapse\n */\nBlockly.FieldLabelSerializable.fromJson = function(options) {\n  var text = Blockly.utils.replaceMessageReferences(options['text']);\n  return new Blockly.FieldLabelSerializable(text, undefined, options);\n};\n\n/**\n * Editable fields usually show some sort of UI indicating they are\n * editable. This field should not.\n * @type {boolean}\n */\nBlockly.FieldLabelSerializable.prototype.EDITABLE = false;\n\n/**\n * Serializable fields are saved by the XML renderer, non-serializable fields\n * are not.  This field should be serialized, but only edited programmatically.\n * @type {boolean}\n */\nBlockly.FieldLabelSerializable.prototype.SERIALIZABLE = true;\n\nBlockly.fieldRegistry.register(\n    'field_label_serializable', Blockly.FieldLabelSerializable);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Image field.  Used for pictures, icons, etc.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.FieldImage');\n\ngoog.require('Blockly.Field');\ngoog.require('Blockly.fieldRegistry');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Size');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for an image on a block.\n * @param {string} src The URL of the image.\n * @param {!(string|number)} width Width of the image.\n * @param {!(string|number)} height Height of the image.\n * @param {string=} opt_alt Optional alt text for when block is collapsed.\n * @param {function(!Blockly.FieldImage)=} opt_onClick Optional function to be\n *     called when the image is clicked. If opt_onClick is defined, opt_alt must\n *     also be defined.\n * @param {boolean=} opt_flipRtl Whether to flip the icon in RTL.\n * @param {Object=} opt_config A map of options used to configure the field.\n *    See the [field creation documentation]{@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/image#creation}\n *    for a list of properties this parameter supports.\n * @extends {Blockly.Field}\n * @constructor\n */\nBlockly.FieldImage = function(src, width, height,\n    opt_alt, opt_onClick, opt_flipRtl, opt_config) {\n  // Return early.\n  if (!src) {\n    throw Error('Src value of an image field is required');\n  }\n  src = Blockly.utils.replaceMessageReferences(src);\n  var imageHeight = Number(Blockly.utils.replaceMessageReferences(height));\n  var imageWidth = Number(Blockly.utils.replaceMessageReferences(width));\n  if (isNaN(imageHeight) || isNaN(imageWidth)) {\n    throw Error('Height and width values of an image field must cast to' +\n      ' numbers.');\n  }\n  if (imageHeight <= 0 || imageWidth <= 0) {\n    throw Error('Height and width values of an image field must be greater' +\n      ' than 0.');\n  }\n\n  // Initialize configurable properties.\n  /**\n   * Whether to flip this image in RTL.\n   * @type {boolean}\n   * @private\n   */\n  this.flipRtl_ = false;\n\n  /**\n   * Alt text of this image.\n   * @type {string}\n   * @private\n   */\n  this.altText_ = '';\n\n  Blockly.FieldImage.superClass_.constructor.call(\n      this, src, null, opt_config);\n\n  if (!opt_config) {  // If the config wasn't passed, do old configuration.\n    this.flipRtl_ = !!opt_flipRtl;\n    this.altText_ = Blockly.utils.replaceMessageReferences(opt_alt) || '';\n  }\n\n  // Initialize other properties.\n  /**\n   * The size of the area rendered by the field.\n   * @type {Blockly.utils.Size}\n   * @protected\n   * @override\n   */\n  this.size_ = new Blockly.utils.Size(imageWidth,\n      imageHeight + Blockly.FieldImage.Y_PADDING);\n\n  /**\n   * Store the image height, since it is different from the field height.\n   * @type {number}\n   * @private\n   */\n  this.imageHeight_ = imageHeight;\n\n  /**\n   * The function to be called when this field is clicked.\n   * @type {?function(!Blockly.FieldImage)}\n   * @private\n   */\n  this.clickHandler_ = null;\n\n  if (typeof opt_onClick == 'function') {\n    this.clickHandler_ = opt_onClick;\n  }\n\n  /**\n   * The rendered field's image element.\n   * @type {SVGImageElement}\n   * @private\n   */\n  this.imageElement_ = null;\n};\nBlockly.utils.object.inherits(Blockly.FieldImage, Blockly.Field);\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nBlockly.FieldImage.prototype.DEFAULT_VALUE = '';\n\n/**\n * Construct a FieldImage from a JSON arg object,\n * dereferencing any string table references.\n * @param {!Object} options A JSON object with options (src, width, height,\n *    alt, and flipRtl).\n * @return {!Blockly.FieldImage} The new field instance.\n * @package\n * @nocollapse\n */\nBlockly.FieldImage.fromJson = function(options) {\n  return new Blockly.FieldImage(\n      options['src'], options['width'], options['height'],\n      undefined, undefined, undefined, options);\n};\n\n/**\n * Vertical padding below the image, which is included in the reported height of\n * the field.\n * @type {number}\n * @private\n */\nBlockly.FieldImage.Y_PADDING = 1;\n\n/**\n * Editable fields usually show some sort of UI indicating they are\n * editable. This field should not.\n * @type {boolean}\n */\nBlockly.FieldImage.prototype.EDITABLE = false;\n\n/**\n * Used to tell if the field needs to be rendered the next time the block is\n * rendered. Image fields are statically sized, and only need to be\n * rendered at initialization.\n * @type {boolean}\n * @protected\n */\nBlockly.FieldImage.prototype.isDirty_ = false;\n\n/**\n * Configure the field based on the given map of options.\n * @param {!Object} config A map of options to configure the field based on.\n * @private\n */\nBlockly.FieldImage.prototype.configure_ = function(config) {\n  Blockly.FieldImage.superClass_.configure_.call(this, config);\n  this.flipRtl_ = !!config['flipRtl'];\n  this.altText_ = Blockly.utils.replaceMessageReferences(config['alt']) || '';\n};\n\n/**\n * Create the block UI for this image.\n * @package\n */\nBlockly.FieldImage.prototype.initView = function() {\n  this.imageElement_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.IMAGE,\n      {\n        'height': this.imageHeight_ + 'px',\n        'width': this.size_.width + 'px',\n        'alt': this.altText_\n      },\n      this.fieldGroup_);\n  this.imageElement_.setAttributeNS(Blockly.utils.dom.XLINK_NS,\n      'xlink:href', /** @type {string} */ (this.value_));\n\n  if (this.clickHandler_) {\n    this.imageElement_.style.cursor = 'pointer';\n  }\n};\n\n/**\n * @override\n */\nBlockly.FieldImage.prototype.updateSize_ = function() {\n  // NOP\n};\n\n/**\n * Ensure that the input value (the source URL) is a string.\n * @param {*=} opt_newValue The input value.\n * @return {?string} A string, or null if invalid.\n * @protected\n */\nBlockly.FieldImage.prototype.doClassValidation_ = function(opt_newValue) {\n  if (typeof opt_newValue != 'string') {\n    return null;\n  }\n  return opt_newValue;\n};\n\n/**\n * Update the value of this image field, and update the displayed image.\n * @param {*} newValue The value to be saved. The default validator guarantees\n * that this is a string.\n * @protected\n */\nBlockly.FieldImage.prototype.doValueUpdate_ = function(newValue) {\n  this.value_ = newValue;\n  if (this.imageElement_) {\n    this.imageElement_.setAttributeNS(Blockly.utils.dom.XLINK_NS,\n        'xlink:href', String(this.value_));\n  }\n};\n\n/**\n * Get whether to flip this image in RTL\n * @return {boolean} True if we should flip in RTL.\n * @override\n */\nBlockly.FieldImage.prototype.getFlipRtl = function() {\n  return this.flipRtl_;\n};\n\n/**\n * Set the alt text of this image.\n * @param {?string} alt New alt text.\n * @public\n */\nBlockly.FieldImage.prototype.setAlt = function(alt) {\n  if (alt == this.altText_) {\n    return;\n  }\n  this.altText_ = alt || '';\n  if (this.imageElement_) {\n    this.imageElement_.setAttribute('alt', this.altText_);\n  }\n};\n\n/**\n * If field click is called, and click handler defined,\n * call the handler.\n * @protected\n */\nBlockly.FieldImage.prototype.showEditor_ = function() {\n  if (this.clickHandler_) {\n    this.clickHandler_(this);\n  }\n};\n\n/**\n * Set the function that is called when this image  is clicked.\n * @param {?function(!Blockly.FieldImage)} func The function that is called\n *    when the image is clicked, or null to remove.\n */\nBlockly.FieldImage.prototype.setOnClickHandler = function(func) {\n  this.clickHandler_ = func;\n};\n\n/**\n * Use the `getText_` developer hook to override the field's text\n * representation.\n * Return the image alt text instead.\n * @return {?string} The image alt text.\n * @protected\n * @override\n */\nBlockly.FieldImage.prototype.getText_ = function() {\n  return this.altText_;\n};\n\nBlockly.fieldRegistry.register('field_image', Blockly.FieldImage);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Text Area field.\n * @author fraser@google.com (Neil Fraser)\n * @author Andrew Mee\n * @author acbart@udel.edu (Austin Cory Bart)\n */\n'use strict';\n\ngoog.provide('Blockly.FieldMultilineInput');\n\ngoog.require('Blockly.Css');\ngoog.require('Blockly.DropDownDiv');\ngoog.require('Blockly.FieldTextInput');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.aria');\ngoog.require('Blockly.utils.Coordinate');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.KeyCodes');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.userAgent');\n\n\n/**\n * Class for an editable text area field.\n * @param {string=} opt_value The initial content of the field. Should cast to a\n *    string. Defaults to an empty string if null or undefined.\n * @param {Function=} opt_validator An optional function that is called\n *     to validate any constraints on what the user entered.  Takes the new\n *     text as an argument and returns either the accepted text, a replacement\n *     text, or null to abort the change.\n * @param {Object=} opt_config A map of options used to configure the field.\n *    See the [field creation documentation]{@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/text-input#creation}\n *    for a list of properties this parameter supports.\n * @extends {Blockly.FieldTextInput}\n * @constructor\n */\nBlockly.FieldMultilineInput = function(opt_value, opt_validator, opt_config) {\n  // TODO: Once this field is documented the opt_config link should point to its\n  //  creation documentation, rather than the text input field's.\n  Blockly.FieldMultilineInput.superClass_.constructor.call(this,\n      opt_value, opt_validator, opt_config);\n\n  /**\n   * The SVG group element that will contain a text element for each text row\n   *     when initialized.\n   * @type {SVGGElement}\n   */\n  this.textGroup_ = null;\n};\nBlockly.utils.object.inherits(Blockly.FieldMultilineInput,\n    Blockly.FieldTextInput);\n\n/**\n * Construct a FieldMultilineInput from a JSON arg object,\n * dereferencing any string table references.\n * @param {!Object} options A JSON object with options (text, and spellcheck).\n * @return {!Blockly.FieldMultilineInput} The new field instance.\n * @package\n * @nocollapse\n */\nBlockly.FieldMultilineInput.fromJson = function(options) {\n  var text = Blockly.utils.replaceMessageReferences(options['text']);\n  return new Blockly.FieldMultilineInput(text, undefined, options);\n};\n\n/**\n * Serializes this field's value to XML. Should only be called by Blockly.Xml.\n * @param {!Element} fieldElement The element to populate with info about the\n *    field's state.\n * @return {!Element} The element containing info about the field's state.\n * @package\n */\nBlockly.FieldMultilineInput.prototype.toXml = function(fieldElement) {\n  // Replace '\\n' characters with html-escaped equivalent '&#10'. This is\n  // needed so the plain-text representation of the xml produced by\n  // `Blockly.Xml.domToText` will appear on a single line (this is a limitation\n  // of the plain-text format).\n  fieldElement.textContent = this.getValue().replace(/\\n/g, '&#10;');\n  return fieldElement;\n};\n\n/**\n * Sets the field's value based on the given XML element. Should only be\n * called by Blockly.Xml.\n * @param {!Element} fieldElement The element containing info about the\n *    field's state.\n * @package\n */\nBlockly.FieldMultilineInput.prototype.fromXml = function(fieldElement) {\n  this.setValue(fieldElement.textContent.replace(/&#10;/g, '\\n'));\n};\n\n/**\n * Create the block UI for this field.\n * @package\n */\nBlockly.FieldMultilineInput.prototype.initView = function() {\n  this.createBorderRect_();\n  this.textGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G, {\n        'class': 'blocklyEditableText',\n      }, this.fieldGroup_);\n};\n\n/**\n * Get the text from this field as displayed on screen.  May differ from getText\n * due to ellipsis, and other formatting.\n * @return {string} Currently displayed text.\n * @private\n */\nBlockly.FieldMultilineInput.prototype.getDisplayText_ = function() {\n  var value = this.value_;\n  if (!value) {\n    // Prevent the field from disappearing if empty.\n    return Blockly.Field.NBSP;\n  }\n  var lines = value.split('\\n');\n  value = '';\n  for (var i = 0; i < lines.length; i++) {\n    var text = lines[i];\n    if (text.length > this.maxDisplayLength) {\n      // Truncate displayed string and add an ellipsis ('...').\n      text = text.substring(0, this.maxDisplayLength - 4) + '...';\n    }\n    // Replace whitespace with non-breaking spaces so the text doesn't collapse.\n    text = text.replace(/\\s/g, Blockly.Field.NBSP);\n\n    value += text;\n    if (i !== lines.length - 1) {\n      value += '\\n';\n    }\n  }\n  if (this.sourceBlock_.RTL) {\n    // The SVG is LTR, force value to be RTL.\n    value += '\\u200F';\n  }\n  return value;\n};\n\n/**\n * Updates the text of the textElement.\n * @protected\n */\nBlockly.FieldMultilineInput.prototype.render_ = function() {\n  // Remove all text group children.\n  var currentChild;\n  while ((currentChild = this.textGroup_.firstChild)) {\n    this.textGroup_.removeChild(currentChild);\n  }\n\n  // Add in text elements into the group.\n  var lines = this.getDisplayText_().split('\\n');\n  var y = 0;\n  for (var i = 0; i < lines.length; i++) {\n    var lineHeight = this.getConstants().FIELD_TEXT_HEIGHT +\n        this.getConstants().FIELD_BORDER_RECT_Y_PADDING;\n    var span = Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.TEXT, {\n          'class': 'blocklyText blocklyMultilineText',\n          x: this.getConstants().FIELD_BORDER_RECT_X_PADDING,\n          y: y + this.getConstants().FIELD_BORDER_RECT_Y_PADDING,\n          dy: this.getConstants().FIELD_TEXT_BASELINE\n        }, this.textGroup_);\n    span.appendChild(document.createTextNode(lines[i]));\n    y += lineHeight;\n  }\n\n  this.updateSize_();\n\n  if (this.isBeingEdited_) {\n    if (this.sourceBlock_.RTL) {\n      // in RTL, we need to let the browser reflow before resizing\n      // in order to get the correct bounding box of the borderRect\n      // avoiding issue #2777.\n      setTimeout(this.resizeEditor_.bind(this), 0);\n    } else {\n      this.resizeEditor_();\n    }\n    var htmlInput = /** @type {!HTMLElement} */(this.htmlInput_);\n    if (!this.isTextValid_) {\n      Blockly.utils.dom.addClass(htmlInput, 'blocklyInvalidInput');\n      Blockly.utils.aria.setState(htmlInput,\n          Blockly.utils.aria.State.INVALID, true);\n    } else {\n      Blockly.utils.dom.removeClass(htmlInput, 'blocklyInvalidInput');\n      Blockly.utils.aria.setState(htmlInput,\n          Blockly.utils.aria.State.INVALID, false);\n    }\n  }\n};\n\n/**\n * Updates the size of the field based on the text.\n * @protected\n */\nBlockly.FieldMultilineInput.prototype.updateSize_ = function() {\n  var nodes = this.textGroup_.childNodes;\n  var totalWidth = 0;\n  var totalHeight = 0;\n  for (var i = 0; i < nodes.length; i++) {\n    var tspan = /** @type {!Element} */ (nodes[i]);\n    var textWidth = Blockly.utils.dom.getTextWidth(tspan);\n    if (textWidth > totalWidth) {\n      totalWidth = textWidth;\n    }\n    totalHeight += this.getConstants().FIELD_TEXT_HEIGHT +\n        (i > 0 ? this.getConstants().FIELD_BORDER_RECT_Y_PADDING : 0);\n  }\n  if (this.borderRect_) {\n    totalHeight += this.getConstants().FIELD_BORDER_RECT_Y_PADDING * 2;\n    totalWidth += this.getConstants().FIELD_BORDER_RECT_X_PADDING * 2;\n    this.borderRect_.setAttribute('width', totalWidth);\n    this.borderRect_.setAttribute('height', totalHeight);\n  }\n  this.size_.width = totalWidth;\n  this.size_.height = totalHeight;\n\n  this.positionBorderRect_();\n};\n\n/**\n * Create the text input editor widget.\n * @return {!HTMLTextAreaElement} The newly created text input editor.\n * @protected\n */\nBlockly.FieldMultilineInput.prototype.widgetCreate_ = function() {\n  var div = Blockly.WidgetDiv.DIV;\n  var scale = this.workspace_.getScale();\n\n  var htmlInput =\n    /** @type {HTMLTextAreaElement} */ (document.createElement('textarea'));\n  htmlInput.className = 'blocklyHtmlInput blocklyHtmlTextAreaInput';\n  htmlInput.setAttribute('spellcheck', this.spellcheck_);\n  var fontSize = (this.getConstants().FIELD_TEXT_FONTSIZE * scale) + 'pt';\n  div.style.fontSize = fontSize;\n  htmlInput.style.fontSize = fontSize;\n  var borderRadius = (Blockly.FieldTextInput.BORDERRADIUS * scale) + 'px';\n  htmlInput.style.borderRadius = borderRadius;\n  var paddingX = this.getConstants().FIELD_BORDER_RECT_X_PADDING * scale;\n  var paddingY = this.getConstants().FIELD_BORDER_RECT_Y_PADDING * scale / 2;\n  htmlInput.style.padding = paddingY + 'px ' + paddingX + 'px ' + paddingY +\n      'px ' + paddingX + 'px';\n  var lineHeight = this.getConstants().FIELD_TEXT_HEIGHT +\n      this.getConstants().FIELD_BORDER_RECT_Y_PADDING;\n  htmlInput.style.lineHeight = (lineHeight * scale) + 'px';\n\n  div.appendChild(htmlInput);\n\n  htmlInput.value = htmlInput.defaultValue = this.getEditorText_(this.value_);\n  htmlInput.untypedDefaultValue_ = this.value_;\n  htmlInput.oldValue_ = null;\n  if (Blockly.utils.userAgent.GECKO) {\n    // In FF, ensure the browser reflows before resizing to avoid issue #2777.\n    setTimeout(this.resizeEditor_.bind(this), 0);\n  } else {\n    this.resizeEditor_();\n  }\n\n  this.bindInputEvents_(htmlInput);\n\n  return htmlInput;\n};\n\n/**\n * Handle key down to the editor. Override the text input definition of this\n * so as to not close the editor when enter is typed in.\n * @param {!Event} e Keyboard event.\n * @protected\n */\nBlockly.FieldMultilineInput.prototype.onHtmlInputKeyDown_ = function(e) {\n  if (e.keyCode !== Blockly.utils.KeyCodes.ENTER) {\n    Blockly.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this, e);\n  }\n};\n\n/**\n * CSS for multiline field.  See css.js for use.\n */\nBlockly.Css.register([\n  /* eslint-disable indent */\n  '.blocklyHtmlTextAreaInput {',\n    'font-family: monospace;',\n    'resize: none;',\n    'overflow: hidden;',\n    'height: 100%;',\n    'text-align: left;',\n  '}'\n  /* eslint-enable indent */\n]);\n\n\nBlockly.fieldRegistry.register('field_multilinetext', Blockly.FieldMultilineInput);\n","/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Number input field\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.FieldNumber');\n\ngoog.require('Blockly.fieldRegistry');\ngoog.require('Blockly.FieldTextInput');\ngoog.require('Blockly.utils.aria');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * Class for an editable number field.\n * @param {string|number=} opt_value The initial value of the field. Should cast\n *    to a number. Defaults to 0.\n * @param {?(string|number)=} opt_min Minimum value.\n * @param {?(string|number)=} opt_max Maximum value.\n * @param {?(string|number)=} opt_precision Precision for value.\n * @param {?Function=} opt_validator A function that is called to validate\n *    changes to the field's value. Takes in a number & returns a validated\n *    number, or null to abort the change.\n * @param {Object=} opt_config A map of options used to configure the field.\n *    See the [field creation documentation]{@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/number#creation}\n *    for a list of properties this parameter supports.\n * @extends {Blockly.FieldTextInput}\n * @constructor\n */\nBlockly.FieldNumber = function(opt_value, opt_min, opt_max, opt_precision,\n    opt_validator, opt_config) {\n\n  /**\n   * The minimum value this number field can contain.\n   * @type {number}\n   * @protected\n   */\n  this.min_ = -Infinity;\n\n  /**\n   * The maximum value this number field can contain.\n   * @type {number}\n   * @protected\n   */\n  this.max_ = Infinity;\n\n  /**\n   * The multiple to which this fields value is rounded.\n   * @type {number}\n   * @protected\n   */\n  this.precision_ = 0;\n\n  /**\n   * The number of decimal places to allow, or null to allow any number of\n   * decimal digits.\n   * @type {?number}\n   * @private\n   */\n  this.decimalPlaces_ = null;\n\n  Blockly.FieldNumber.superClass_.constructor.call(\n      this, opt_value, opt_validator, opt_config);\n\n  if (!opt_config) {  // Only do one kind of configuration or the other.\n    this.setConstraints(opt_min, opt_max, opt_precision);\n  }\n};\nBlockly.utils.object.inherits(Blockly.FieldNumber, Blockly.FieldTextInput);\n\n/**\n * The default value for this field.\n * @type {*}\n * @protected\n */\nBlockly.FieldNumber.prototype.DEFAULT_VALUE = 0;\n\n/**\n * Construct a FieldNumber from a JSON arg object.\n * @param {!Object} options A JSON object with options (value, min, max, and\n *                          precision).\n * @return {!Blockly.FieldNumber} The new field instance.\n * @package\n * @nocollapse\n */\nBlockly.FieldNumber.fromJson = function(options) {\n  return new Blockly.FieldNumber(options['value'],\n      undefined, undefined, undefined, undefined, options);\n};\n\n/**\n * Serializable fields are saved by the XML renderer, non-serializable fields\n * are not. Editable fields should also be serializable.\n * @type {boolean}\n */\nBlockly.FieldNumber.prototype.SERIALIZABLE = true;\n\n/**\n * Configure the field based on the given map of options.\n * @param {!Object} config A map of options to configure the field based on.\n * @private\n */\nBlockly.FieldNumber.prototype.configure_ = function(config) {\n  Blockly.FieldNumber.superClass_.configure_.call(this, config);\n  this.setMinInternal_(config['min']);\n  this.setMaxInternal_(config['max']);\n  this.setPrecisionInternal_(config['precision']);\n};\n\n/**\n * Set the maximum, minimum and precision constraints on this field.\n * Any of these properties may be undefined or NaN to be disabled.\n * Setting precision (usually a power of 10) enforces a minimum step between\n * values. That is, the user's value will rounded to the closest multiple of\n * precision. The least significant digit place is inferred from the precision.\n * Integers values can be enforces by choosing an integer precision.\n * @param {?(number|string|undefined)} min Minimum value.\n * @param {?(number|string|undefined)} max Maximum value.\n * @param {?(number|string|undefined)} precision Precision for value.\n */\nBlockly.FieldNumber.prototype.setConstraints = function(min, max, precision) {\n  this.setMinInternal_(min);\n  this.setMaxInternal_(max);\n  this.setPrecisionInternal_(precision);\n  this.setValue(this.getValue());\n};\n\n/**\n * Sets the minimum value this field can contain. Updates the value to reflect.\n * @param {?(number|string|undefined)} min Minimum value.\n */\nBlockly.FieldNumber.prototype.setMin = function(min) {\n  this.setMinInternal_(min);\n  this.setValue(this.getValue());\n};\n\n/**\n * Sets the minimum value this field can contain. Called internally to avoid\n * value updates.\n * @param {?(number|string|undefined)} min Minimum value.\n * @private\n */\nBlockly.FieldNumber.prototype.setMinInternal_ = function(min) {\n  if (min == null) {\n    this.min_ = -Infinity;\n  } else {\n    min = Number(min);\n    if (!isNaN(min)) {\n      this.min_ = min;\n    }\n  }\n};\n\n/**\n * Returns the current minimum value this field can contain. Default is\n * -Infinity.\n * @return {number} The current minimum value this field can contain.\n */\nBlockly.FieldNumber.prototype.getMin = function() {\n  return this.min_;\n};\n\n/**\n * Sets the maximum value this field can contain. Updates the value to reflect.\n * @param {?(number|string|undefined)} max Maximum value.\n */\nBlockly.FieldNumber.prototype.setMax = function(max) {\n  this.setMaxInternal_(max);\n  this.setValue(this.getValue());\n};\n\n/**\n * Sets the maximum value this field can contain. Called internally to avoid\n * value updates.\n * @param {?(number|string|undefined)} max Maximum value.\n * @private\n */\nBlockly.FieldNumber.prototype.setMaxInternal_ = function(max) {\n  if (max == null) {\n    this.max_ = Infinity;\n  } else {\n    max = Number(max);\n    if (!isNaN(max)) {\n      this.max_ = max;\n    }\n  }\n};\n\n/**\n * Returns the current maximum value this field can contain. Default is\n * Infinity.\n * @return {number} The current maximum value this field can contain.\n */\nBlockly.FieldNumber.prototype.getMax = function() {\n  return this.max_;\n};\n\n/**\n * Sets the precision of this field's value, i.e. the number to which the\n * value is rounded. Updates the field to reflect.\n * @param {?(number|string|undefined)} precision The number to which the\n *    field's value is rounded.\n */\nBlockly.FieldNumber.prototype.setPrecision = function(precision) {\n  this.setPrecisionInternal_(precision);\n  this.setValue(this.getValue());\n};\n\n/**\n * Sets the precision of this field's value. Called internally to avoid\n * value updates.\n * @param {?(number|string|undefined)} precision The number to which the\n *    field's value is rounded.\n * @private\n */\nBlockly.FieldNumber.prototype.setPrecisionInternal_ = function(precision) {\n  if (precision == null) {\n    // Number(precision) would also be 0, but set explicitly to be clear.\n    this.precision_ = 0;\n  } else {\n    precision = Number(precision);\n    if (!isNaN(precision)) {\n      this.precision_ = precision;\n    }\n  }\n\n  var precisionString = this.precision_.toLocaleString(\"en-US\", {maximumFractionDigits: 20});\n  var decimalIndex = precisionString.indexOf('.');\n  if (decimalIndex == -1) {\n    // If the precision is 0 (float) allow any number of decimals,\n    // otherwise allow none.\n    this.decimalPlaces_ = precision ? 0 : null;\n  } else {\n    this.decimalPlaces_ = precisionString.length - decimalIndex - 1;\n  }\n};\n\n/**\n * Returns the current precision of this field. The precision being the\n * number to which the field's value is rounded. A precision of 0 means that\n * the value is not rounded.\n * @return {number} The number to which this field's value is rounded.\n */\nBlockly.FieldNumber.prototype.getPrecision = function() {\n  return this.precision_;\n};\n\n/**\n * Ensure that the input value is a valid number (must fulfill the\n * constraints placed on the field).\n * @param {*=} opt_newValue The input value.\n * @return {?number} A valid number, or null if invalid.\n * @protected\n * @override\n */\nBlockly.FieldNumber.prototype.doClassValidation_ = function(opt_newValue) {\n  if (opt_newValue === null) {\n    return null;\n  }\n  // Clean up text.\n  var newValue = String(opt_newValue);\n  // TODO: Handle cases like 'ten', '1.203,14', etc.\n  // 'O' is sometimes mistaken for '0' by inexperienced users.\n  newValue = newValue.replace(/O/ig, '0');\n  // Strip out thousands separators.\n  newValue = newValue.replace(/,/g, '');\n  // Ignore case of 'Infinity'.\n  newValue = newValue.replace(/infinity/i, 'Infinity');\n\n  // Clean up number.\n  var n = Number(newValue || 0);\n  if (isNaN(n)) {\n    // Invalid number.\n    return null;\n  }\n  // Get the value in range.\n  n = Math.min(Math.max(n, this.min_), this.max_);\n  // Round to nearest multiple of precision.\n  if (this.precision_ && isFinite(n)) {\n    n = Math.round(n / this.precision_) * this.precision_;\n  }\n  // Clean up floating point errors.\n  if (this.decimalPlaces_ != null) {\n    n = Number(n.toFixed(this.decimalPlaces_));\n  }\n  return n;\n};\n\n/**\n * Create the number input editor widget.\n * @return {!HTMLElement} The newly created number input editor.\n * @protected\n * @override\n */\nBlockly.FieldNumber.prototype.widgetCreate_ = function() {\n  var htmlInput = Blockly.FieldNumber.superClass_.widgetCreate_.call(this);\n\n  // Set the accessibility state\n  if (this.min_ > -Infinity) {\n    Blockly.utils.aria.setState(htmlInput,\n        Blockly.utils.aria.State.VALUEMIN, this.min_);\n  }\n  if (this.max_ < Infinity) {\n    Blockly.utils.aria.setState(htmlInput,\n        Blockly.utils.aria.State.VALUEMAX, this.max_);\n  }\n  return htmlInput;\n};\n\nBlockly.fieldRegistry.register('field_number', Blockly.FieldNumber);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Variable input field.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.FieldVariable');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.Events');\ngoog.require('Blockly.Events.BlockChange');\ngoog.require('Blockly.FieldDropdown');\ngoog.require('Blockly.fieldRegistry');\ngoog.require('Blockly.Msg');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Size');\ngoog.require('Blockly.VariableModel');\ngoog.require('Blockly.Variables');\ngoog.require('Blockly.Xml');\n\n\n\n/**\n * Class for a variable's dropdown field.\n * @param {?string} varName The default name for the variable.  If null,\n *     a unique variable name will be generated.\n * @param {Function=} opt_validator A function that is called to validate\n *    changes to the field's value. Takes in a variable ID  & returns a\n *    validated variable ID, or null to abort the change.\n * @param {Array.<string>=} opt_variableTypes A list of the types of variables\n *     to include in the dropdown.\n * @param {string=} opt_defaultType The type of variable to create if this\n *     field's value is not explicitly set.  Defaults to ''.\n * @param {Object=} opt_config A map of options used to configure the field.\n *    See the [field creation documentation]{@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/variable#creation}\n *    for a list of properties this parameter supports.\n * @extends {Blockly.FieldDropdown}\n * @constructor\n */\nBlockly.FieldVariable = function(varName, opt_validator, opt_variableTypes,\n    opt_defaultType, opt_config) {\n  // The FieldDropdown constructor expects the field's initial value to be\n  // the first entry in the menu generator, which it may or may not be.\n  // Just do the relevant parts of the constructor.\n\n  /**\n   * An array of options for a dropdown list,\n   * or a function which generates these options.\n   * @type {(!Array.<!Array>|\n   *    !function(this:Blockly.FieldDropdown): !Array.<!Array>)}\n   * @protected\n   */\n  this.menuGenerator_ = Blockly.FieldVariable.dropdownCreate;\n\n  /**\n   * The initial variable name passed to this field's constructor, or an\n   * empty string if a name wasn't provided. Used to create the initial\n   * variable.\n   * @type {string}\n   */\n  this.defaultVariableName = varName || '';\n\n  /**\n   * The size of the area rendered by the field.\n   * @type {Blockly.utils.Size}\n   * @protected\n   * @override\n   */\n  this.size_ = new Blockly.utils.Size(0, 0);\n\n  opt_config && this.configure_(opt_config);\n  opt_validator && this.setValidator(opt_validator);\n\n  if (!opt_config) {  // Only do one kind of configuration or the other.\n    this.setTypes_(opt_variableTypes, opt_defaultType);\n  }\n};\nBlockly.utils.object.inherits(Blockly.FieldVariable, Blockly.FieldDropdown);\n\n/**\n * Construct a FieldVariable from a JSON arg object,\n * dereferencing any string table references.\n * @param {!Object} options A JSON object with options (variable,\n *                          variableTypes, and defaultType).\n * @return {!Blockly.FieldVariable} The new field instance.\n * @package\n * @nocollapse\n */\nBlockly.FieldVariable.fromJson = function(options) {\n  var varName = Blockly.utils.replaceMessageReferences(options['variable']);\n  return new Blockly.FieldVariable(\n      varName, undefined, undefined, undefined, options);\n};\n\n/**\n * Serializable fields are saved by the XML renderer, non-serializable fields\n * are not. Editable fields should also be serializable.\n * @type {boolean}\n */\nBlockly.FieldVariable.prototype.SERIALIZABLE = true;\n\n/**\n * Configure the field based on the given map of options.\n * @param {!Object} config A map of options to configure the field based on.\n * @protected\n */\nBlockly.FieldVariable.prototype.configure_ = function(config) {\n  Blockly.FieldVariable.superClass_.configure_.call(this, config);\n  this.setTypes_(config['variableTypes'], config['defaultType']);\n};\n\n/**\n * Initialize the model for this field if it has not already been initialized.\n * If the value has not been set to a variable by the first render, we make up a\n * variable rather than let the value be invalid.\n * @package\n */\nBlockly.FieldVariable.prototype.initModel = function() {\n  if (this.variable_) {\n    return; // Initialization already happened.\n  }\n  var variable = Blockly.Variables.getOrCreateVariablePackage(\n      this.sourceBlock_.workspace, null,\n      this.defaultVariableName, this.defaultType_);\n\n  // Don't call setValue because we don't want to cause a rerender.\n  this.doValueUpdate_(variable.getId());\n};\n\n/**\n * @override\n */\nBlockly.FieldVariable.prototype.shouldAddBorderRect_ = function() {\n  return Blockly.FieldVariable.superClass_.shouldAddBorderRect_.call(this) &&\n    (!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW ||\n        this.sourceBlock_.type != 'variables_get');\n};\n\n/**\n * Initialize this field based on the given XML.\n * @param {!Element} fieldElement The element containing information about the\n *    variable field's state.\n */\nBlockly.FieldVariable.prototype.fromXml = function(fieldElement) {\n  var id = fieldElement.getAttribute('id');\n  var variableName = fieldElement.textContent;\n  // 'variabletype' should be lowercase, but until July 2019 it was sometimes\n  // recorded as 'variableType'.  Thus we need to check for both.\n  var variableType = fieldElement.getAttribute('variabletype') ||\n      fieldElement.getAttribute('variableType') || '';\n\n  var variable = Blockly.Variables.getOrCreateVariablePackage(\n      this.sourceBlock_.workspace, id, variableName, variableType);\n\n  // This should never happen :)\n  if (variableType != null && variableType !== variable.type) {\n    throw Error('Serialized variable type with id \\'' +\n      variable.getId() + '\\' had type ' + variable.type + ', and ' +\n      'does not match variable field that references it: ' +\n      Blockly.Xml.domToText(fieldElement) + '.');\n  }\n\n  this.setValue(variable.getId());\n};\n\n/**\n * Serialize this field to XML.\n * @param {!Element} fieldElement The element to populate with info about the\n *    field's state.\n * @return {!Element} The element containing info about the field's state.\n */\nBlockly.FieldVariable.prototype.toXml = function(fieldElement) {\n  // Make sure the variable is initialized.\n  this.initModel();\n\n  fieldElement.id = this.variable_.getId();\n  fieldElement.textContent = this.variable_.name;\n  if (this.variable_.type) {\n    fieldElement.setAttribute('variabletype', this.variable_.type);\n  }\n  return fieldElement;\n};\n\n/**\n * Attach this field to a block.\n * @param {!Blockly.Block} block The block containing this field.\n */\nBlockly.FieldVariable.prototype.setSourceBlock = function(block) {\n  if (block.isShadow()) {\n    throw Error('Variable fields are not allowed to exist on shadow blocks.');\n  }\n  Blockly.FieldVariable.superClass_.setSourceBlock.call(this, block);\n};\n\n/**\n * Get the variable's ID.\n * @return {string} Current variable's ID.\n */\nBlockly.FieldVariable.prototype.getValue = function() {\n  return this.variable_ ? this.variable_.getId() : null;\n};\n\n/**\n * Get the text from this field, which is the selected variable's name.\n * @return {string} The selected variable's name, or the empty string if no\n *     variable is selected.\n */\nBlockly.FieldVariable.prototype.getText = function() {\n  return this.variable_ ? this.variable_.name : '';\n};\n\n/**\n * Get the variable model for the selected variable.\n * Not guaranteed to be in the variable map on the workspace (e.g. if accessed\n * after the variable has been deleted).\n * @return {Blockly.VariableModel} The selected variable, or null if none was\n *     selected.\n * @package\n */\nBlockly.FieldVariable.prototype.getVariable = function() {\n  return this.variable_;\n};\n\n/**\n * Gets the validation function for this field, or null if not set.\n * Returns null if the variable is not set, because validators should not\n * run on the initial setValue call, because the field won't be attached to\n * a block and workspace at that point.\n * @return {Function} Validation function, or null.\n */\nBlockly.FieldVariable.prototype.getValidator = function() {\n  // Validators shouldn't operate on the initial setValue call.\n  // Normally this is achieved by calling setValidator after setValue, but\n  // this is not a possibility with variable fields.\n  if (this.variable_) {\n    return this.validator_;\n  }\n  return null;\n};\n\n/**\n * Ensure that the id belongs to a valid variable of an allowed type.\n * @param {*=} opt_newValue The id of the new variable to set.\n * @return {?string} The validated id, or null if invalid.\n * @protected\n */\nBlockly.FieldVariable.prototype.doClassValidation_ = function(opt_newValue) {\n  if (opt_newValue === null) {\n    return null;\n  }\n  var newId = /** @type {string} */ (opt_newValue);\n  var variable = Blockly.Variables.getVariable(\n      this.sourceBlock_.workspace, newId);\n  if (!variable) {\n    console.warn('Variable id doesn\\'t point to a real variable! ' +\n        'ID was ' + newId);\n    return null;\n  }\n  // Type Checks.\n  var type = variable.type;\n  if (!this.typeIsAllowed_(type)) {\n    console.warn('Variable type doesn\\'t match this field!  Type was ' + type);\n    return null;\n  }\n  return newId;\n};\n\n/**\n * Update the value of this variable field, as well as its variable and text.\n *\n * The variable ID should be valid at this point, but if a variable field\n * validator returns a bad ID, this could break.\n * @param {*} newId The value to be saved.\n * @protected\n */\nBlockly.FieldVariable.prototype.doValueUpdate_ = function(newId) {\n  this.variable_ = Blockly.Variables.getVariable(\n      this.sourceBlock_.workspace, /** @type {string} */ (newId));\n  Blockly.FieldVariable.superClass_.doValueUpdate_.call(this, newId);\n};\n\n/**\n * Check whether the given variable type is allowed on this field.\n * @param {string} type The type to check.\n * @return {boolean} True if the type is in the list of allowed types.\n * @private\n */\nBlockly.FieldVariable.prototype.typeIsAllowed_ = function(type) {\n  var typeList = this.getVariableTypes_();\n  if (!typeList) {\n    return true; // If it's null, all types are valid.\n  }\n  for (var i = 0; i < typeList.length; i++) {\n    if (type == typeList[i]) {\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * Return a list of variable types to include in the dropdown.\n * @return {!Array.<string>} Array of variable types.\n * @throws {Error} if variableTypes is an empty array.\n * @private\n */\nBlockly.FieldVariable.prototype.getVariableTypes_ = function() {\n  // TODO (#1513): Try to avoid calling this every time the field is edited.\n  var variableTypes = this.variableTypes;\n  if (variableTypes === null) {\n    // If variableTypes is null, return all variable types.\n    if (this.sourceBlock_ && this.sourceBlock_.workspace) {\n      return this.sourceBlock_.workspace.getVariableTypes();\n    }\n  }\n  variableTypes = variableTypes || [''];\n  if (variableTypes.length == 0) {\n    // Throw an error if variableTypes is an empty list.\n    var name = this.getText();\n    throw Error('\\'variableTypes\\' of field variable ' +\n      name + ' was an empty list');\n  }\n  return variableTypes;\n};\n\n/**\n * Parse the optional arguments representing the allowed variable types and the\n * default variable type.\n * @param {Array.<string>=} opt_variableTypes A list of the types of variables\n *     to include in the dropdown.  If null or undefined, variables of all types\n *     will be displayed in the dropdown.\n * @param {string=} opt_defaultType The type of the variable to create if this\n *     field's value is not explicitly set.  Defaults to ''.\n * @private\n */\nBlockly.FieldVariable.prototype.setTypes_ = function(opt_variableTypes,\n    opt_defaultType) {\n  // If you expected that the default type would be the same as the only entry\n  // in the variable types array, tell the Blockly team by commenting on #1499.\n  var defaultType = opt_defaultType || '';\n  // Set the allowable variable types.  Null means all types on the workspace.\n  if (opt_variableTypes == null || opt_variableTypes == undefined) {\n    var variableTypes = null;\n  } else if (Array.isArray(opt_variableTypes)) {\n    var variableTypes = opt_variableTypes;\n    // Make sure the default type is valid.\n    var isInArray = false;\n    for (var i = 0; i < variableTypes.length; i++) {\n      if (variableTypes[i] == defaultType) {\n        isInArray = true;\n      }\n    }\n    if (!isInArray) {\n      throw Error('Invalid default type \\'' + defaultType + '\\' in ' +\n          'the definition of a FieldVariable');\n    }\n  } else {\n    throw Error('\\'variableTypes\\' was not an array in the definition of ' +\n        'a FieldVariable');\n  }\n  // Only update the field once all checks pass.\n  this.defaultType_ = defaultType;\n  this.variableTypes = variableTypes;\n};\n\n/**\n * Refreshes the name of the variable by grabbing the name of the model.\n * Used when a variable gets renamed, but the ID stays the same. Should only\n * be called by the block.\n * @package\n */\nBlockly.FieldVariable.prototype.refreshVariableName = function() {\n  this.forceRerender();\n};\n\n/**\n * Return a sorted list of variable names for variable dropdown menus.\n * Include a special option at the end for creating a new variable name.\n * @return {!Array.<!Array>} Array of variable names/id tuples.\n * @this {Blockly.FieldVariable}\n */\nBlockly.FieldVariable.dropdownCreate = function() {\n  if (!this.variable_) {\n    throw Error('Tried to call dropdownCreate on a variable field with no' +\n        ' variable selected.');\n  }\n  var name = this.getText();\n  var variableModelList = [];\n  if (this.sourceBlock_ && this.sourceBlock_.workspace) {\n    var variableTypes = this.getVariableTypes_();\n    // Get a copy of the list, so that adding rename and new variable options\n    // doesn't modify the workspace's list.\n    for (var i = 0; i < variableTypes.length; i++) {\n      var variableType = variableTypes[i];\n      var variables =\n        this.sourceBlock_.workspace.getVariablesOfType(variableType);\n      variableModelList = variableModelList.concat(variables);\n    }\n  }\n  variableModelList.sort(Blockly.VariableModel.compareByName);\n\n  var options = [];\n  for (var i = 0; i < variableModelList.length; i++) {\n    // Set the UUID as the internal representation of the variable.\n    options[i] = [variableModelList[i].name, variableModelList[i].getId()];\n  }\n  options.push([Blockly.Msg['RENAME_VARIABLE'], Blockly.RENAME_VARIABLE_ID]);\n  if (Blockly.Msg['DELETE_VARIABLE']) {\n    options.push(\n        [\n          Blockly.Msg['DELETE_VARIABLE'].replace('%1', name),\n          Blockly.DELETE_VARIABLE_ID\n        ]\n    );\n  }\n\n  return options;\n};\n\n/**\n * Handle the selection of an item in the variable dropdown menu.\n * Special case the 'Rename variable...' and 'Delete variable...' options.\n * In the rename case, prompt the user for a new name.\n * @param {!Blockly.Menu} menu The Menu component clicked.\n * @param {!Blockly.MenuItem} menuItem The MenuItem selected within menu.\n * @protected\n */\nBlockly.FieldVariable.prototype.onItemSelected_ = function(menu, menuItem) {\n  var id = menuItem.getValue();\n  // Handle special cases.\n  if (this.sourceBlock_ && this.sourceBlock_.workspace) {\n    if (id == Blockly.RENAME_VARIABLE_ID) {\n      // Rename variable.\n      Blockly.Variables.renameVariable(\n          this.sourceBlock_.workspace, this.variable_);\n      return;\n    } else if (id == Blockly.DELETE_VARIABLE_ID) {\n      // Delete variable.\n      this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());\n      return;\n    }\n  }\n  // Handle unspecial case.\n  this.setValue(id);\n};\n\n/**\n * Overrides referencesVariables(), indicating this field refers to a variable.\n * @return {boolean} True.\n * @package\n * @override\n */\nBlockly.FieldVariable.prototype.referencesVariables = function() {\n  return true;\n};\n\nBlockly.fieldRegistry.register('field_variable', Blockly.FieldVariable);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for creating parts of SVG path strings.  See\n * developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\n/**\n * @name Blockly.utils.svgPaths\n * @namespace\n */\ngoog.provide('Blockly.utils.svgPaths');\n\n\n/**\n * Create a string representing the given x, y pair.  It does not matter whether\n * the coordinate is relative or absolute.  The result has leading\n * and trailing spaces, and separates the x and y coordinates with a comma but\n * no space.\n * @param {number} x The x coordinate.\n * @param {number} y The y coordinate.\n * @return {string} A string of the format ' x,y '\n * @public\n */\nBlockly.utils.svgPaths.point = function(x, y) {\n  return ' ' + x + ',' + y + ' ';\n};\n\n/**\n * Draw a cubic or quadratic curve.  See\n * developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d#Cubic_B%C3%A9zier_Curve\n * These coordinates are unitless and hence in the user coordinate system.\n * @param {string} command The command to use.\n *     Should be one of: c, C, s, S, q, Q.\n * @param {!Array.<string>} points  An array containing all of the points to pass to the\n *     curve command, in order.  The points are represented as strings of the\n *     format ' x, y '.\n * @return {string} A string defining one or more Bezier curves.  See the MDN\n *     documentation for exact format.\n * @public\n */\nBlockly.utils.svgPaths.curve = function(command, points) {\n  return ' ' + command + points.join('');\n};\n\n/**\n * Move the cursor to the given position without drawing a line.\n * The coordinates are absolute.\n * These coordinates are unitless and hence in the user coordinate system.\n * See developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths#Line_commands\n * @param {number} x The absolute x coordinate.\n * @param {number} y The absolute y coordinate.\n * @return {string} A string of the format ' M x,y '\n * @public\n */\nBlockly.utils.svgPaths.moveTo = function(x, y) {\n  return ' M ' + x + ',' + y + ' ';\n};\n\n/**\n * Move the cursor to the given position without drawing a line.\n * Coordinates are relative.\n * These coordinates are unitless and hence in the user coordinate system.\n * See developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths#Line_commands\n * @param {number} dx The relative x coordinate.\n * @param {number} dy The relative y coordinate.\n * @return {string} A string of the format ' m dx,dy '\n * @public\n */\nBlockly.utils.svgPaths.moveBy = function(dx, dy) {\n  return ' m ' + dx + ',' + dy + ' ';\n};\n\n/**\n * Draw a line from the current point to the end point, which is the current\n * point shifted by dx along the x-axis and dy along the y-axis.\n * These coordinates are unitless and hence in the user coordinate system.\n * See developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths#Line_commands\n * @param {number} dx The relative x coordinate.\n * @param {number} dy The relative y coordinate.\n * @return {string} A string of the format ' l dx,dy '\n * @public\n */\nBlockly.utils.svgPaths.lineTo = function(dx, dy) {\n  return ' l ' + dx + ',' + dy + ' ';\n};\n\n/**\n * Draw multiple lines connecting all of the given points in order.  This is\n * equivalent to a series of 'l' commands.\n * These coordinates are unitless and hence in the user coordinate system.\n * See developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths#Line_commands\n * @param {!Array.<string>} points An array containing all of the points to\n *     draw lines to, in order.  The points are represented as strings of the\n *     format ' dx,dy '.\n * @return {string} A string of the format ' l (dx,dy)+ '\n * @public\n */\nBlockly.utils.svgPaths.line = function(points) {\n  return ' l' + points.join('');\n};\n\n/**\n * Draw a horizontal or vertical line.\n * The first argument specifies the direction and whether the given position is\n * relative or absolute.\n * These coordinates are unitless and hence in the user coordinate system.\n * See developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d#LineTo_path_commands\n * @param {string} command The command to prepend to the coordinate.  This\n *     should be one of: V, v, H, h.\n * @param {number} val The coordinate to pass to the command.  It may be\n *     absolute or relative.\n * @return {string} A string of the format ' command val '\n * @public\n */\nBlockly.utils.svgPaths.lineOnAxis = function(command, val) {\n  return ' ' + command + ' ' + val + ' ';\n};\n\n/**\n * Draw an elliptical arc curve.\n * These coordinates are unitless and hence in the user coordinate system.\n * See developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d#Elliptical_Arc_Curve\n * @param {string} command The command string.  Either 'a' or 'A'.\n * @param {string} flags The flag string.  See the MDN documentation for a\n *     description and examples.\n * @param {number} radius The radius of the arc to draw.\n * @param {string} point The point to move the cursor to after drawing the arc,\n *     specified either in absolute or relative coordinates depending on the\n *     command.\n * @return {string} A string of the format 'command radius radius flags point'\n * @public\n */\nBlockly.utils.svgPaths.arc = function(command, flags, radius, point) {\n  return command + ' ' + radius + ' ' + radius + ' ' + flags + point;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that provides constants for rendering blocks.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.blockRendering.ConstantProvider');\n\ngoog.require('Blockly.constants');\ngoog.require('Blockly.utils');\ngoog.require('Blockly.utils.colour');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.svgPaths');\ngoog.require('Blockly.utils.userAgent');\n\ngoog.requireType('Blockly.blockRendering.Debug');\n\n\n/**\n * An object that provides constants for rendering blocks.\n * @constructor\n * @package\n */\nBlockly.blockRendering.ConstantProvider = function() {\n\n  /**\n   * The size of an empty spacer.\n   * @type {number}\n   */\n  this.NO_PADDING = 0;\n\n  /**\n   * The size of small padding.\n   * @type {number}\n   */\n  this.SMALL_PADDING = 3;\n\n  /**\n   * The size of medium padding.\n   * @type {number}\n   */\n  this.MEDIUM_PADDING = 5;\n\n  /**\n   * The size of medium-large padding.\n   * @type {number}\n   */\n  this.MEDIUM_LARGE_PADDING = 8;\n\n  /**\n   * The size of large padding.\n   * @type {number}\n   */\n  this.LARGE_PADDING = 10;\n\n  /**\n   * Offset from the top of the row for placing fields on inline input rows\n   * and statement input rows.\n   * Matches existing rendering (in 2019).\n   * @type {number}\n   */\n  this.TALL_INPUT_FIELD_OFFSET_Y = this.MEDIUM_PADDING;\n\n  /**\n   * The height of the puzzle tab used for input and output connections.\n   * @type {number}\n   */\n  this.TAB_HEIGHT = 15;\n\n  /**\n   * The offset from the top of the block at which a puzzle tab is positioned.\n   * @type {number}\n   */\n  this.TAB_OFFSET_FROM_TOP = 5;\n\n  /**\n   * Vertical overlap of the puzzle tab, used to make it look more like a puzzle\n   * piece.\n   * @type {number}\n   */\n  this.TAB_VERTICAL_OVERLAP = 2.5;\n\n  /**\n   * The width of the puzzle tab used for input and output connections.\n   * @type {number}\n   */\n  this.TAB_WIDTH = 8;\n\n  /**\n   * The width of the notch used for previous and next connections.\n   * @type {number}\n   */\n  this.NOTCH_WIDTH = 15;\n\n  /**\n   * The height of the notch used for previous and next connections.\n   * @type {number}\n   */\n  this.NOTCH_HEIGHT = 4;\n\n  /**\n   * The minimum width of the block.\n   * @type {number}\n   */\n  this.MIN_BLOCK_WIDTH = 12;\n\n  this.EMPTY_BLOCK_SPACER_HEIGHT = 16;\n\n  /**\n   * The minimum height of a dummy input row.\n   * @type {number}\n   */\n  this.DUMMY_INPUT_MIN_HEIGHT = this.TAB_HEIGHT;\n\n  /**\n   * The minimum height of a dummy input row in a shadow block.\n   * @type {number}\n   */\n  this.DUMMY_INPUT_SHADOW_MIN_HEIGHT = this.TAB_HEIGHT;\n\n  /**\n   * Rounded corner radius.\n   * @type {number}\n   */\n  this.CORNER_RADIUS = 8;\n\n  /**\n   * Offset from the left side of a block or the inside of a statement input to\n   * the left side of the notch.\n   * @type {number}\n   */\n  this.NOTCH_OFFSET_LEFT = 15;\n\n  /**\n   * Additional offset added to the statement input's width to account for the\n   * notch.\n   * @type {number}\n   */\n  this.STATEMENT_INPUT_NOTCH_OFFSET = this.NOTCH_OFFSET_LEFT;\n\n  this.STATEMENT_BOTTOM_SPACER = 0;\n  this.STATEMENT_INPUT_PADDING_LEFT = 20;\n\n  /**\n   * Vertical padding between consecutive statement inputs.\n   * @type {number}\n   */\n  this.BETWEEN_STATEMENT_PADDING_Y = 4;\n\n  /**\n   * The top row's minimum height.\n   * @type {number}\n   */\n  this.TOP_ROW_MIN_HEIGHT = this.MEDIUM_PADDING;\n\n  /**\n   * The top row's minimum height if it precedes a statement.\n   * @type {number}\n   */\n  this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT = this.LARGE_PADDING;\n\n  /**\n   * The bottom row's minimum height.\n   * @type {number}\n   */\n  this.BOTTOM_ROW_MIN_HEIGHT = this.MEDIUM_PADDING;\n\n  /**\n   * The bottom row's minimum height if it follows a statement input.\n   * @type {number}\n   */\n  this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT = this.LARGE_PADDING;\n\n  /**\n   * Whether to add a 'hat' on top of all blocks with no previous or output\n   * connections. Can be overridden by 'hat' property on Theme.BlockStyle.\n   * @type {boolean}\n   */\n  this.ADD_START_HATS = false;\n\n  /**\n   * Height of the top hat.\n   * @type {number}\n   */\n  this.START_HAT_HEIGHT = 15;\n\n  /**\n   * Width of the top hat.\n   * @type {number}\n   */\n  this.START_HAT_WIDTH = 100;\n\n  this.SPACER_DEFAULT_HEIGHT = 15;\n\n  this.MIN_BLOCK_HEIGHT = 24;\n\n  this.EMPTY_INLINE_INPUT_PADDING = 14.5;\n\n  /**\n   * The height of an empty inline input.\n   * @type {number}\n   */\n  this.EMPTY_INLINE_INPUT_HEIGHT = this.TAB_HEIGHT + 11;\n\n  this.EXTERNAL_VALUE_INPUT_PADDING = 2;\n\n  /**\n   * The height of an empty statement input.  Note that in the old rendering this\n   * varies slightly depending on whether the block has external or inline inputs.\n   * In the new rendering this is consistent.  It seems unlikely that the old\n   * behaviour was intentional.\n   * @type {number}\n   */\n  this.EMPTY_STATEMENT_INPUT_HEIGHT = this.MIN_BLOCK_HEIGHT;\n\n  this.START_POINT = Blockly.utils.svgPaths.moveBy(0, 0);\n\n  /**\n   * Height of SVG path for jagged teeth at the end of collapsed blocks.\n   * @type {number}\n   */\n  this.JAGGED_TEETH_HEIGHT = 12;\n\n  /**\n   * Width of SVG path for jagged teeth at the end of collapsed blocks.\n   * @type {number}\n   */\n  this.JAGGED_TEETH_WIDTH = 6;\n\n  /**\n   * Point size of text.\n   * @type {number}\n   */\n  this.FIELD_TEXT_FONTSIZE = 11;\n\n  /**\n   * Text font weight.\n   * @type {string}\n   */\n  this.FIELD_TEXT_FONTWEIGHT = 'normal';\n\n  /**\n   * Text font family.\n   * @type {string}\n   */\n  this.FIELD_TEXT_FONTFAMILY = 'sans-serif';\n\n  /**\n   * Height of text.  This constant is dynamically set in ``setFontConstants_``\n   * to be the height of the text based on the font used.\n   * @type {number}\n   */\n  this.FIELD_TEXT_HEIGHT = -1; // Dynamically set\n\n  /**\n   * Text baseline.  This constant is dynamically set in ``setFontConstants_``\n   * to be the baseline of the text based on the font used.\n   * @type {number}\n   */\n  this.FIELD_TEXT_BASELINE = -1; // Dynamically set\n\n  /**\n   * A field's border rect corner radius.\n   * @type {number}\n   */\n  this.FIELD_BORDER_RECT_RADIUS = 4;\n\n  /**\n   * A field's border rect default height.\n   * @type {number}\n   */\n  this.FIELD_BORDER_RECT_HEIGHT = 16;\n\n  /**\n   * A field's border rect X padding.\n   * @type {number}\n   */\n  this.FIELD_BORDER_RECT_X_PADDING = 5;\n\n  /**\n   * A field's border rect Y padding.\n   * @type {number}\n   */\n  this.FIELD_BORDER_RECT_Y_PADDING = 3;\n\n  /**\n   * The backing colour of a field's border rect.\n   * @type {string}\n   * @package\n   */\n  this.FIELD_BORDER_RECT_COLOUR = '#fff';\n\n  /**\n   * A field's text element's dominant baseline.\n   * @type {boolean}\n   */\n  this.FIELD_TEXT_BASELINE_CENTER =\n      !Blockly.utils.userAgent.IE && !Blockly.utils.userAgent.EDGE;\n\n  /**\n   * A dropdown field's border rect height.\n   * @type {number}\n   */\n  this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT = this.FIELD_BORDER_RECT_HEIGHT;\n\n  /**\n   * Whether or not a dropdown field should add a border rect when in a shadow\n   * block.\n   * @type {boolean}\n   */\n  this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW = false;\n\n  /**\n   * Whether or not a dropdown field's div should be coloured to match the\n   * block colours.\n   * @type {boolean}\n   */\n  this.FIELD_DROPDOWN_COLOURED_DIV = false;\n\n  /**\n   * Whether or not a dropdown field uses a text or SVG arrow.\n   * @type {boolean}\n   */\n  this.FIELD_DROPDOWN_SVG_ARROW = false;\n\n  /**\n   * A dropdown field's SVG arrow padding.\n   * @type {number}\n   */\n  this.FIELD_DROPDOWN_SVG_ARROW_PADDING = this.FIELD_BORDER_RECT_X_PADDING;\n\n  /**\n   * A dropdown field's SVG arrow size.\n   * @type {number}\n   */\n  this.FIELD_DROPDOWN_SVG_ARROW_SIZE = 12;\n\n  /**\n   * A dropdown field's SVG arrow datauri.\n   * @type {string}\n   */\n  this.FIELD_DROPDOWN_SVG_ARROW_DATAURI =\n    'data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllci' +\n    'AxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaG' +\n    'VpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLW' +\n    'Fycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuND' +\n    'EsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTD' +\n    'AuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNz' +\n    'FDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMC' +\n    'wxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNz' +\n    'lhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYz' +\n    'AuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMz' +\n    'dBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=';\n\n  /**\n   * Whether or not to show a box shadow around the widget div. This is only a\n   * feature of full block fields.\n   * @type {boolean}\n   */\n  this.FIELD_TEXTINPUT_BOX_SHADOW = false;\n\n  /**\n   * Whether or not the colour field should display its colour value on the\n   * entire block.\n   * @type {boolean}\n   */\n  this.FIELD_COLOUR_FULL_BLOCK = false;\n\n  /**\n   * A colour field's default width.\n   * @type {number}\n   */\n  this.FIELD_COLOUR_DEFAULT_WIDTH = 26;\n\n  /**\n   * A colour field's default height.\n   * @type {number}\n   */\n  this.FIELD_COLOUR_DEFAULT_HEIGHT = this.FIELD_BORDER_RECT_HEIGHT;\n\n  /**\n   * A checkbox field's X offset.\n   * @type {number}\n   */\n  this.FIELD_CHECKBOX_X_OFFSET = this.FIELD_BORDER_RECT_X_PADDING - 3;\n\n  /**\n   * A random identifier used to ensure a unique ID is used for each\n   * filter/pattern for the case of multiple Blockly instances on a page.\n   * @type {string}\n   * @package\n   */\n  this.randomIdentifier = String(Math.random()).substring(2);\n\n  /**\n   * The ID of the emboss filter, or the empty string if no filter is set.\n   * @type {string}\n   * @package\n   */\n  this.embossFilterId = '';\n\n  /**\n   * The <filter> element to use for highlighting, or null if not set.\n   * @type {SVGElement}\n   * @private\n   */\n  this.embossFilter_ = null;\n\n  /**\n   * The ID of the disabled pattern, or the empty string if no pattern is set.\n   * @type {string}\n   * @package\n   */\n  this.disabledPatternId = '';\n\n  /**\n   * The <pattern> element to use for disabled blocks, or null if not set.\n   * @type {SVGElement}\n   * @private\n   */\n  this.disabledPattern_ = null;\n\n  /**\n   * The ID of the debug filter, or the empty string if no pattern is set.\n   * @type {string}\n   * @package\n   */\n  this.debugFilterId = '';\n\n  /**\n   * The <filter> element to use for a debug highlight, or null if not set.\n   * @type {SVGElement}\n   * @private\n   */\n  this.debugFilter_ = null;\n\n  /**\n   * The <style> element to use for injecting renderer specific CSS.\n   * @type {HTMLStyleElement}\n   * @private\n   */\n  this.cssNode_ = null;\n\n  /**\n   * Cursor colour.\n   * @type {string}\n   * @package\n   */\n  this.CURSOR_COLOUR = '#cc0a0a';\n\n  /**\n   * Immovable marker colour.\n   * @type {string}\n   * @package\n   */\n  this.MARKER_COLOUR = '#4286f4';\n\n  /**\n   * Width of the horizontal cursor.\n   * @type {number}\n   * @package\n   */\n  this.CURSOR_WS_WIDTH = 100;\n\n  /**\n   * Height of the horizontal cursor.\n   * @type {number}\n   * @package\n   */\n  this.WS_CURSOR_HEIGHT = 5;\n\n  /**\n   * Padding around a stack.\n   * @type {number}\n   * @package\n   */\n  this.CURSOR_STACK_PADDING = 10;\n\n  /**\n   * Padding around a block.\n   * @type {number}\n   * @package\n   */\n  this.CURSOR_BLOCK_PADDING = 2;\n\n  /**\n   * Stroke of the cursor.\n   * @type {number}\n   * @package\n   */\n  this.CURSOR_STROKE_WIDTH = 4;\n\n  /**\n   * Whether text input and colour fields fill up the entire source block.\n   * @type {boolean}\n   * @package\n   */\n  this.FULL_BLOCK_FIELDS = false;\n\n  /**\n   * The main colour of insertion markers, in hex.  The block is rendered a\n   * transparent grey by changing the fill opacity in CSS.\n   * @type {string}\n   * @package\n   */\n  this.INSERTION_MARKER_COLOUR = '#000000';\n\n  /**\n   * The insertion marker opacity.\n   * @type {number}\n   * @package\n   */\n  this.INSERTION_MARKER_OPACITY = 0.2;\n\n  /**\n   * Enum for connection shapes.\n   * @enum {number}\n   */\n  this.SHAPES = {\n    PUZZLE: 1,\n    NOTCH: 2\n  };\n};\n\n/**\n * Initialize shape objects based on the constants set in the constructor.\n * @package\n */\nBlockly.blockRendering.ConstantProvider.prototype.init = function() {\n\n  /**\n   * An object containing sizing and path information about collapsed block\n   * indicators.\n   * @type {!Object}\n   */\n  this.JAGGED_TEETH = this.makeJaggedTeeth();\n\n  /**\n   * An object containing sizing and path information about notches.\n   * @type {!Object}\n   */\n  this.NOTCH = this.makeNotch();\n\n  /**\n   * An object containing sizing and path information about start hats\n   * @type {!Object}\n   */\n  this.START_HAT = this.makeStartHat();\n\n  /**\n   * An object containing sizing and path information about puzzle tabs.\n   * @type {!Object}\n   */\n  this.PUZZLE_TAB = this.makePuzzleTab();\n\n  /**\n   * An object containing sizing and path information about inside corners\n   * @type {!Object}\n   */\n  this.INSIDE_CORNERS = this.makeInsideCorners();\n\n  /**\n   * An object containing sizing and path information about outside corners.\n   * @type {!Object}\n   */\n  this.OUTSIDE_CORNERS = this.makeOutsideCorners();\n};\n\n/**\n * Refresh constants properties that depend on the theme.\n * @param {!Blockly.Theme} theme The current workspace theme.\n * @package\n */\nBlockly.blockRendering.ConstantProvider.prototype.setTheme = function(\n    theme) {\n\n  /**\n   * The block styles map.\n   * @type {Object.<string, Blockly.Theme.BlockStyle>}\n   * @package\n   */\n  this.blockStyles = {};\n\n  var blockStyles = theme.blockStyles;\n  for (var key in blockStyles) {\n    this.blockStyles[key] = this.validatedBlockStyle_(blockStyles[key]);\n  }\n\n  this.setDynamicProperties_(theme);\n};\n\n/**\n * Sets dynamic properties that depend on other values or theme properties.\n * @param {!Blockly.Theme} theme The current workspace theme.\n * @protected\n */\nBlockly.blockRendering.ConstantProvider.prototype.setDynamicProperties_ =\n    function(theme) {\n    /* eslint-disable indent */\n  this.setFontConstants_(theme);\n  this.setComponentConstants_(theme);\n\n  this.ADD_START_HATS = theme.startHats != null ? theme.startHats :\n      this.ADD_START_HATS;\n}; /* eslint-enable indent */\n\n/**\n * Set constants related to fonts.\n * @param {!Blockly.Theme} theme The current workspace theme.\n * @protected\n */\nBlockly.blockRendering.ConstantProvider.prototype.setFontConstants_ = function(\n    theme) {\n  this.FIELD_TEXT_FONTFAMILY =\n      theme.fontStyle && theme.fontStyle['family'] != undefined ?\n      theme.fontStyle['family'] : this.FIELD_TEXT_FONTFAMILY;\n  this.FIELD_TEXT_FONTWEIGHT =\n      theme.fontStyle && theme.fontStyle['weight'] != undefined ?\n      theme.fontStyle['weight'] : this.FIELD_TEXT_FONTWEIGHT;\n  this.FIELD_TEXT_FONTSIZE =\n      theme.fontStyle && theme.fontStyle['size'] != undefined ?\n      theme.fontStyle['size'] : this.FIELD_TEXT_FONTSIZE;\n\n  var fontMetrics = Blockly.utils.dom.measureFontMetrics('Hg',\n      this.FIELD_TEXT_FONTSIZE + 'pt',\n      this.FIELD_TEXT_FONTWEIGHT,\n      this.FIELD_TEXT_FONTFAMILY);\n\n  this.FIELD_TEXT_HEIGHT = fontMetrics.height;\n  this.FIELD_TEXT_BASELINE = fontMetrics.baseline;\n};\n\n/**\n * Set constants from a theme's component styles.\n * @param {!Blockly.Theme} theme The current workspace theme.\n * @protected\n */\nBlockly.blockRendering.ConstantProvider.prototype.setComponentConstants_ =\n    function(theme) {\n    /* eslint-disable indent */\n  this.CURSOR_COLOUR = theme.getComponentStyle('cursorColour') ||\n    this.CURSOR_COLOUR;\n  this.MARKER_COLOUR = theme.getComponentStyle('markerColour') ||\n    this.MARKER_COLOUR;\n  this.INSERTION_MARKER_COLOUR =\n    theme.getComponentStyle('insertionMarkerColour') ||\n    this.INSERTION_MARKER_COLOUR;\n  this.INSERTION_MARKER_OPACITY =\n    Number(theme.getComponentStyle('insertionMarkerOpacity')) ||\n    this.INSERTION_MARKER_OPACITY;\n}; /* eslint-enable indent */\n\n/**\n * Get or create a block style based on a single colour value.  Generate a name\n * for the style based on the colour.\n * @param {string} colour #RRGGBB colour string.\n * @return {{style: !Blockly.Theme.BlockStyle, name: string}} An object\n *     containing the style and an autogenerated name for that style.\n * @package\n */\nBlockly.blockRendering.ConstantProvider.prototype.getBlockStyleForColour =\n    function(colour) {\n    /* eslint-disable indent */\n  var name = 'auto_' + colour;\n  if (!this.blockStyles[name]) {\n    this.blockStyles[name] = this.createBlockStyle_(colour);\n  }\n  return {style: this.blockStyles[name], name: name};\n}; /* eslint-enable indent */\n\n/**\n * Gets the BlockStyle for the given block style name.\n * @param {?string} blockStyleName The name of the block style.\n * @return {!Blockly.Theme.BlockStyle} The named block style, or a default style\n *     if no style with the given name was found.\n */\nBlockly.blockRendering.ConstantProvider.prototype.getBlockStyle = function(\n    blockStyleName) {\n  return this.blockStyles[blockStyleName || ''] ||\n      (blockStyleName && blockStyleName.indexOf('auto_') == 0 ?\n        this.getBlockStyleForColour(blockStyleName.substring(5)).style :\n        this.createBlockStyle_('#000000'));\n};\n\n/**\n * Create a block style object based on the given colour.\n * @param {string} colour #RRGGBB colour string.\n * @return {!Blockly.Theme.BlockStyle} A populated block style based on the\n *     given colour.\n * @protected\n */\nBlockly.blockRendering.ConstantProvider.prototype.createBlockStyle_ = function(\n    colour) {\n  return this.validatedBlockStyle_({\n    'colourPrimary': colour\n  });\n};\n\n/**\n * Get a full block style object based on the input style object.  Populate\n * any missing values.\n * @param {{\n *     colourPrimary:string,\n *     colourSecondary:(string|undefined),\n *     colourTertiary:(string|undefined),\n *     hat:(string|undefined)\n * }} blockStyle A full or partial block style object.\n\n * @return {!Blockly.Theme.BlockStyle} A full block style object, with all\n *     required properties populated.\n * @protected\n */\nBlockly.blockRendering.ConstantProvider.prototype.validatedBlockStyle_ =\n    function(blockStyle) {\n    /* eslint-disable indent */\n  // Make a new object with all of the same properties.\n  var valid = /** @type {!Blockly.Theme.BlockStyle} */ ({});\n  if (blockStyle) {\n    Blockly.utils.object.mixin(valid, blockStyle);\n  }\n  // Validate required properties.\n  var parsedColour = Blockly.utils.parseBlockColour(\n      valid['colourPrimary'] || '#000');\n  valid.colourPrimary = parsedColour.hex;\n  valid.colourSecondary = valid['colourSecondary'] ?\n      Blockly.utils.parseBlockColour(valid['colourSecondary']).hex :\n      this.generateSecondaryColour_(valid.colourPrimary);\n  valid.colourTertiary = valid['colourTertiary'] ?\n      Blockly.utils.parseBlockColour(valid['colourTertiary']).hex :\n      this.generateTertiaryColour_(valid.colourPrimary);\n\n  valid.hat = valid['hat'] || '';\n  return valid;\n}; /* eslint-enable indent */\n\n/**\n * Generate a secondary colour from the passed in primary colour.\n * @param {string} colour Primary colour.\n * @return {string} The generated secondary colour.\n * @protected\n */\nBlockly.blockRendering.ConstantProvider.prototype.generateSecondaryColour_ =\n    function(colour) {\n    /* eslint-disable indent */\n  return Blockly.utils.colour.blend('#fff', colour, 0.6) || colour;\n}; /* eslint-enable indent */\n\n/**\n * Generate a tertiary colour from the passed in primary colour.\n * @param {string} colour Primary colour.\n * @return {string} The generated tertiary colour.\n * @protected\n */\nBlockly.blockRendering.ConstantProvider.prototype.generateTertiaryColour_ =\n    function(colour) {\n    /* eslint-disable indent */\n  return Blockly.utils.colour.blend('#fff', colour, 0.3) || colour;\n}; /* eslint-enable indent */\n\n\n/**\n * Dispose of this constants provider.\n * Delete all DOM elements that this provider created.\n * @package\n */\nBlockly.blockRendering.ConstantProvider.prototype.dispose = function() {\n  if (this.embossFilter_) {\n    Blockly.utils.dom.removeNode(this.embossFilter_);\n  }\n  if (this.disabledPattern_) {\n    Blockly.utils.dom.removeNode(this.disabledPattern_);\n  }\n  if (this.debugFilter_) {\n    Blockly.utils.dom.removeNode(this.debugFilter_);\n  }\n  this.cssNode_ = null;\n};\n\n/**\n * @return {!Object} An object containing sizing and path information about\n *     collapsed block indicators.\n * @package\n */\nBlockly.blockRendering.ConstantProvider.prototype.makeJaggedTeeth = function() {\n  var height = this.JAGGED_TEETH_HEIGHT;\n  var width = this.JAGGED_TEETH_WIDTH;\n\n  var mainPath =\n      Blockly.utils.svgPaths.line(\n          [\n            Blockly.utils.svgPaths.point(width, height / 4),\n            Blockly.utils.svgPaths.point(-width * 2, height / 2),\n            Blockly.utils.svgPaths.point(width, height / 4)\n          ]);\n  return {\n    height: height,\n    width: width,\n    path: mainPath\n  };\n};\n\n/**\n * @return {!Object} An object containing sizing and path information about\n *     start hats.\n * @package\n */\nBlockly.blockRendering.ConstantProvider.prototype.makeStartHat = function() {\n  var height = this.START_HAT_HEIGHT;\n  var width = this.START_HAT_WIDTH;\n\n  var mainPath =\n      Blockly.utils.svgPaths.curve('c',\n          [\n            Blockly.utils.svgPaths.point(30, -height),\n            Blockly.utils.svgPaths.point(70, -height),\n            Blockly.utils.svgPaths.point(width, 0)\n          ]);\n  return {\n    height: height,\n    width: width,\n    path: mainPath\n  };\n};\n\n/**\n * @return {!Object} An object containing sizing and path information about\n *     puzzle tabs.\n * @package\n */\nBlockly.blockRendering.ConstantProvider.prototype.makePuzzleTab = function() {\n  var width = this.TAB_WIDTH;\n  var height = this.TAB_HEIGHT;\n\n  // The main path for the puzzle tab is made out of a few curves (c and s).\n  // Those curves are defined with relative positions.  The 'up' and 'down'\n  // versions of the paths are the same, but the Y sign flips.  Forward and back\n  // are the signs to use to move the cursor in the direction that the path is\n  // being drawn.\n  function makeMainPath(up) {\n    var forward = up ? -1 : 1;\n    var back = -forward;\n\n    var overlap = 2.5;\n    var halfHeight = height / 2;\n    var control1Y = halfHeight + overlap;\n    var control2Y = halfHeight + 0.5;\n    var control3Y = overlap; // 2.5\n\n    var endPoint1 = Blockly.utils.svgPaths.point(-width, forward * halfHeight);\n    var endPoint2 = Blockly.utils.svgPaths.point(width, forward * halfHeight);\n\n    return Blockly.utils.svgPaths.curve('c',\n        [\n          Blockly.utils.svgPaths.point(0, forward * control1Y),\n          Blockly.utils.svgPaths.point(-width, back * control2Y),\n          endPoint1\n        ]) +\n        Blockly.utils.svgPaths.curve('s',\n            [\n              Blockly.utils.svgPaths.point(width, back * control3Y),\n              endPoint2\n            ]);\n  }\n\n  // c 0,-10  -8,8  -8,-7.5  s 8,2.5  8,-7.5\n  var pathUp = makeMainPath(true);\n  // c 0,10  -8,-8  -8,7.5  s 8,-2.5  8,7.5\n  var pathDown = makeMainPath(false);\n\n  return {\n    type: this.SHAPES.PUZZLE,\n    width: width,\n    height: height,\n    pathDown: pathDown,\n    pathUp: pathUp\n  };\n};\n\n/**\n * @return {!Object} An object containing sizing and path information about\n *     notches.\n * @package\n */\nBlockly.blockRendering.ConstantProvider.prototype.makeNotch = function() {\n  var width = this.NOTCH_WIDTH;\n  var height = this.NOTCH_HEIGHT;\n  var innerWidth = 3;\n  var outerWidth = (width - innerWidth) / 2;\n  function makeMainPath(dir) {\n    return Blockly.utils.svgPaths.line(\n        [\n          Blockly.utils.svgPaths.point(dir * outerWidth, height),\n          Blockly.utils.svgPaths.point(dir * innerWidth, 0),\n          Blockly.utils.svgPaths.point(dir * outerWidth, -height)\n        ]);\n  }\n  var pathLeft = makeMainPath(1);\n  var pathRight = makeMainPath(-1);\n\n  return {\n    type: this.SHAPES.NOTCH,\n    width: width,\n    height: height,\n    pathLeft: pathLeft,\n    pathRight: pathRight\n  };\n};\n\n/**\n * @return {!Object} An object containing sizing and path information about\n *     inside corners.\n * @package\n */\nBlockly.blockRendering.ConstantProvider.prototype.makeInsideCorners = function() {\n  var radius = this.CORNER_RADIUS;\n\n  var innerTopLeftCorner = Blockly.utils.svgPaths.arc('a', '0 0,0', radius,\n      Blockly.utils.svgPaths.point(-radius, radius));\n\n  var innerBottomLeftCorner = Blockly.utils.svgPaths.arc('a', '0 0,0', radius,\n      Blockly.utils.svgPaths.point(radius, radius));\n\n  return {\n    width: radius,\n    height: radius,\n    pathTop: innerTopLeftCorner,\n    pathBottom: innerBottomLeftCorner\n  };\n};\n\n/**\n * @return {!Object} An object containing sizing and path information about\n *     outside corners.\n * @package\n */\nBlockly.blockRendering.ConstantProvider.prototype.makeOutsideCorners = function() {\n  var radius = this.CORNER_RADIUS;\n  /**\n   * SVG path for drawing the rounded top-left corner.\n   * @const\n   */\n  var topLeft =\n      Blockly.utils.svgPaths.moveBy(0, radius) +\n      Blockly.utils.svgPaths.arc('a', '0 0,1', radius,\n          Blockly.utils.svgPaths.point(radius, -radius));\n\n  /**\n   * SVG path for drawing the rounded top-right corner.\n   * @const\n   */\n  var topRight =\n      Blockly.utils.svgPaths.arc('a', '0 0,1', radius,\n          Blockly.utils.svgPaths.point(radius, radius));\n\n  /**\n   * SVG path for drawing the rounded bottom-left corner.\n   * @const\n   */\n  var bottomLeft = Blockly.utils.svgPaths.arc('a', '0 0,1', radius,\n      Blockly.utils.svgPaths.point(-radius, -radius));\n\n  /**\n   * SVG path for drawing the rounded bottom-right corner.\n   * @const\n   */\n  var bottomRight = Blockly.utils.svgPaths.arc('a', '0 0,1', radius,\n      Blockly.utils.svgPaths.point(-radius, radius));\n\n  return {\n    topLeft: topLeft,\n    topRight: topRight,\n    bottomRight: bottomRight,\n    bottomLeft: bottomLeft,\n    rightHeight: radius\n  };\n};\n\n/**\n * Get an object with connection shape and sizing information based on the type\n * of the connection.\n * @param {!Blockly.RenderedConnection} connection The connection to find a\n *     shape object for\n * @return {!Object} The shape object for the connection.\n * @package\n */\nBlockly.blockRendering.ConstantProvider.prototype.shapeFor = function(\n    connection) {\n  switch (connection.type) {\n    case Blockly.INPUT_VALUE:\n    case Blockly.OUTPUT_VALUE:\n      return this.PUZZLE_TAB;\n    case Blockly.PREVIOUS_STATEMENT:\n    case Blockly.NEXT_STATEMENT:\n      return this.NOTCH;\n    default:\n      throw Error('Unknown connection type');\n  }\n};\n\n/**\n * Create any DOM elements that this renderer needs (filters, patterns, etc).\n * @param {!SVGElement} svg The root of the workspace's SVG.\n * @param {string} tagName The name to use for the CSS style tag.\n * @param {string} selector The CSS selector to use.\n * @suppress {strictModuleDepCheck} Debug renderer only included in playground.\n * @package\n */\nBlockly.blockRendering.ConstantProvider.prototype.createDom = function(svg,\n    tagName, selector) {\n  this.injectCSS_(tagName, selector);\n\n  /*\n  <defs>\n    ... filters go here ...\n  </defs>\n  */\n  var defs = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.DEFS, {}, svg);\n  /*\n    <filter id=\"blocklyEmbossFilter837493\">\n      <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"1\" result=\"blur\" />\n      <feSpecularLighting in=\"blur\" surfaceScale=\"1\" specularConstant=\"0.5\"\n                          specularExponent=\"10\" lighting-color=\"white\"\n                          result=\"specOut\">\n        <fePointLight x=\"-5000\" y=\"-10000\" z=\"20000\" />\n      </feSpecularLighting>\n      <feComposite in=\"specOut\" in2=\"SourceAlpha\" operator=\"in\"\n                   result=\"specOut\" />\n      <feComposite in=\"SourceGraphic\" in2=\"specOut\" operator=\"arithmetic\"\n                   k1=\"0\" k2=\"1\" k3=\"1\" k4=\"0\" />\n    </filter>\n  */\n  var embossFilter = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FILTER,\n      {'id': 'blocklyEmbossFilter' + this.randomIdentifier}, defs);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FEGAUSSIANBLUR,\n      {'in': 'SourceAlpha', 'stdDeviation': 1, 'result': 'blur'}, embossFilter);\n  var feSpecularLighting = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FESPECULARLIGHTING,\n      {\n        'in': 'blur',\n        'surfaceScale': 1,\n        'specularConstant': 0.5,\n        'specularExponent': 10,\n        'lighting-color': 'white',\n        'result': 'specOut'\n      },\n      embossFilter);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FEPOINTLIGHT,\n      {'x': -5000, 'y': -10000, 'z': 20000}, feSpecularLighting);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FECOMPOSITE,\n      {\n        'in': 'specOut',\n        'in2': 'SourceAlpha',\n        'operator': 'in',\n        'result': 'specOut'\n      }, embossFilter);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FECOMPOSITE,\n      {\n        'in': 'SourceGraphic',\n        'in2': 'specOut',\n        'operator': 'arithmetic',\n        'k1': 0,\n        'k2': 1,\n        'k3': 1,\n        'k4': 0\n      }, embossFilter);\n  this.embossFilterId = embossFilter.id;\n  this.embossFilter_ = embossFilter;\n\n  /*\n    <pattern id=\"blocklyDisabledPattern837493\" patternUnits=\"userSpaceOnUse\"\n             width=\"10\" height=\"10\">\n      <rect width=\"10\" height=\"10\" fill=\"#aaa\" />\n      <path d=\"M 0 0 L 10 10 M 10 0 L 0 10\" stroke=\"#cc0\" />\n    </pattern>\n  */\n  var disabledPattern = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATTERN,\n      {\n        'id': 'blocklyDisabledPattern' + this.randomIdentifier,\n        'patternUnits': 'userSpaceOnUse',\n        'width': 10,\n        'height': 10\n      }, defs);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {'width': 10, 'height': 10, 'fill': '#aaa'}, disabledPattern);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH,\n      {'d': 'M 0 0 L 10 10 M 10 0 L 0 10', 'stroke': '#cc0'}, disabledPattern);\n  this.disabledPatternId = disabledPattern.id;\n  this.disabledPattern_ = disabledPattern;\n\n  if (Blockly.blockRendering.Debug) {\n    var debugFilter = Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.FILTER,\n        {\n          'id': 'blocklyDebugFilter' + this.randomIdentifier,\n          'height': '160%',\n          'width': '180%',\n          y: '-30%',\n          x: '-40%'\n        },\n        defs);\n    // Set all gaussian blur pixels to 1 opacity before applying flood\n    var debugComponentTransfer = Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.FECOMPONENTTRANSFER, {\n          'result': 'outBlur'\n        }, debugFilter);\n    Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.FEFUNCA,\n        {\n          'type': 'table', 'tableValues': '0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1'\n        },\n        debugComponentTransfer);\n    // Color the highlight\n    Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.FEFLOOD,\n        {\n          'flood-color': '#ff0000',\n          'flood-opacity': 0.5,\n          'result': 'outColor'\n        },\n        debugFilter);\n    Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.FECOMPOSITE,\n        {\n          'in': 'outColor', 'in2': 'outBlur',\n          'operator': 'in', 'result': 'outGlow'\n        },\n        debugFilter);\n    this.debugFilterId = debugFilter.id;\n    this.debugFilter_ = debugFilter;\n  }\n};\n\n/**\n * Inject renderer specific CSS into the page.\n * @param {string} tagName The name of the style tag to use.\n * @param {string} selector The CSS selector to use.\n * @protected\n */\nBlockly.blockRendering.ConstantProvider.prototype.injectCSS_ = function(\n    tagName, selector) {\n  var cssArray = this.getCSS_(selector);\n  var cssNodeId = 'blockly-renderer-style-' + tagName;\n  this.cssNode_ =\n    /** @type {!HTMLStyleElement} */ (document.getElementById(cssNodeId));\n  var text = cssArray.join('\\n');\n  if (this.cssNode_) {\n    // Already injected, update if the theme changed.\n    this.cssNode_.firstChild.textContent = text;\n    return;\n  }\n  // Inject CSS tag at start of head.\n  var cssNode =\n    /** @type {!HTMLStyleElement} */ (document.createElement('style'));\n  cssNode.id = cssNodeId;\n  var cssTextNode = document.createTextNode(text);\n  cssNode.appendChild(cssTextNode);\n  document.head.insertBefore(cssNode, document.head.firstChild);\n  this.cssNode_ = cssNode;\n};\n\n/**\n * Get any renderer specific CSS to inject when the renderer is initialized.\n * @param {string} selector CSS selector to use.\n * @return {!Array.<string>} Array of CSS strings.\n * @protected\n */\nBlockly.blockRendering.ConstantProvider.prototype.getCSS_ = function(selector) {\n  return [\n    /* eslint-disable indent */\n    // Text.\n    selector + ' .blocklyText, ',\n    selector + ' .blocklyFlyoutLabelText {',\n      'font: ' + this.FIELD_TEXT_FONTWEIGHT + ' ' +\n          this.FIELD_TEXT_FONTSIZE + 'pt ' + this.FIELD_TEXT_FONTFAMILY + ';',\n    '}',\n\n    // Fields.\n    selector + ' .blocklyText {',\n      'fill: #fff;',\n    '}',\n    selector + ' .blocklyNonEditableText>rect,',\n    selector + ' .blocklyEditableText>rect {',\n      'fill: ' + this.FIELD_BORDER_RECT_COLOUR + ';',\n      'fill-opacity: .6;',\n      'stroke: none;',\n    '}',\n    selector + ' .blocklyNonEditableText>text,',\n    selector + ' .blocklyEditableText>text {',\n      'fill: #000;',\n    '}',\n\n    // Flyout labels.\n    selector + ' .blocklyFlyoutLabelText {',\n      'fill: #000;',\n    '}',\n\n    // Bubbles.\n    selector + ' .blocklyText.blocklyBubbleText {',\n      'fill: #000;',\n    '}',\n\n    // Editable field hover.\n    selector + ' .blocklyEditableText:not(.editing):hover>rect {',\n      'stroke: #fff;',\n      'stroke-width: 2;',\n    '}',\n\n    // Text field input.\n    selector + ' .blocklyHtmlInput {',\n      'font-family: ' + this.FIELD_TEXT_FONTFAMILY + ';',\n      'font-weight: ' + this.FIELD_TEXT_FONTWEIGHT + ';',\n    '}',\n\n    // Selection highlight.\n    selector + ' .blocklySelected>.blocklyPath {',\n      'stroke: #fc3;',\n      'stroke-width: 3px;',\n    '}',\n\n    // Connection highlight.\n    selector + ' .blocklyHighlightedConnectionPath {',\n      'stroke: #fc3;',\n    '}',\n\n    // Replaceable highlight.\n    selector + ' .blocklyReplaceable .blocklyPath {',\n      'fill-opacity: .5;',\n    '}',\n    selector + ' .blocklyReplaceable .blocklyPathLight,',\n    selector + ' .blocklyReplaceable .blocklyPathDark {',\n      'display: none;',\n    '}',\n\n    // Insertion marker.\n    selector + ' .blocklyInsertionMarker>.blocklyPath {',\n      'fill-opacity: ' + this.INSERTION_MARKER_OPACITY + ';',\n      'stroke: none;',\n    '}',\n    /* eslint-enable indent */\n  ];\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for graphically rendering a marker as SVG.\n * @author samelh@microsoft.com (Sam El-Husseini)\n */\n'use strict';\n\n\ngoog.provide('Blockly.blockRendering.MarkerSvg');\n\ngoog.require('Blockly.ASTNode');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * Class for a marker.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace the marker belongs to.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The constants for\n *     the renderer.\n * @param {!Blockly.Marker} marker The marker to draw.\n * @constructor\n */\nBlockly.blockRendering.MarkerSvg = function(workspace, constants, marker) {\n  /**\n   * The workspace the marker belongs to.\n   * @type {!Blockly.WorkspaceSvg}\n   * @private\n   */\n  this.workspace_ = workspace;\n\n  /**\n   * The marker to draw.\n   * @type {!Blockly.Marker}\n   * @private\n   */\n  this.marker_ = marker;\n\n  /**\n   * The workspace, field, or block that the marker SVG element should be\n   * attached to.\n   * @type {Blockly.IASTNodeLocationSvg}\n   * @private\n   */\n  this.parent_ = null;\n\n  /**\n   * The constants necessary to draw the marker.\n   * @type {Blockly.blockRendering.ConstantProvider}\n   * @protected\n   */\n  this.constants_ = constants;\n\n  /**\n   * The current SVG element for the marker.\n   * @type {Element}\n   */\n  this.currentMarkerSvg = null;\n\n  var defaultColour = this.isCursor() ? this.constants_.CURSOR_COLOUR :\n      this.constants_.MARKER_COLOUR;\n\n  /**\n   * The colour of the marker.\n   * @type {string}\n   */\n  this.colour_ = marker.colour || defaultColour;\n};\n\n/**\n * The name of the CSS class for a cursor.\n * @const {string}\n */\nBlockly.blockRendering.MarkerSvg.CURSOR_CLASS = 'blocklyCursor';\n\n/**\n * The name of the CSS class for a marker.\n * @const {string}\n */\nBlockly.blockRendering.MarkerSvg.MARKER_CLASS = 'blocklyMarker';\n\n/**\n * What we multiply the height by to get the height of the marker.\n * Only used for the block and block connections.\n * @const {number}\n */\nBlockly.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER = 3 / 4;\n\n/**\n * Return the root node of the SVG or null if none exists.\n * @return {SVGElement} The root SVG node.\n */\nBlockly.blockRendering.MarkerSvg.prototype.getSvgRoot = function() {\n  return this.svgGroup_;\n};\n\n/**\n * Get the marker.\n * @return {!Blockly.Marker} The marker to draw for.\n */\nBlockly.blockRendering.MarkerSvg.prototype.getMarker = function() {\n  return this.marker_;\n};\n\n/**\n * True if the marker should be drawn as a cursor, false otherwise.\n * A cursor is drawn as a flashing line. A marker is drawn as a solid line.\n * @return {boolean} True if the marker is a cursor, false otherwise.\n */\nBlockly.blockRendering.MarkerSvg.prototype.isCursor = function() {\n  return this.marker_.type == 'cursor';\n};\n\n/**\n * Create the DOM element for the marker.\n * @return {!SVGElement} The marker controls SVG group.\n * @package\n */\nBlockly.blockRendering.MarkerSvg.prototype.createDom = function() {\n  var className = this.isCursor() ?\n      Blockly.blockRendering.MarkerSvg.CURSOR_CLASS :\n      Blockly.blockRendering.MarkerSvg.MARKER_CLASS;\n\n  this.svgGroup_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G, {\n        'class': className\n      }, null);\n\n  this.createDomInternal_();\n  return this.svgGroup_;\n};\n\n/**\n * Attaches the SVG root of the marker to the SVG group of the parent.\n * @param {!Blockly.IASTNodeLocationSvg} newParent The workspace, field, or\n *     block that the marker SVG element should be attached to.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.setParent_ = function(newParent) {\n  if (!this.isCursor()) {\n    if (this.parent_) {\n      this.parent_.setMarkerSvg(null);\n    }\n    newParent.setMarkerSvg(this.getSvgRoot());\n  } else {\n    if (this.parent_) {\n      this.parent_.setCursorSvg(null);\n    }\n    newParent.setCursorSvg(this.getSvgRoot());\n  }\n  this.parent_ = newParent;\n};\n\n/**\n * Update the marker.\n * @param {Blockly.ASTNode} oldNode The previous node the marker was on or null.\n * @param {Blockly.ASTNode} curNode The node that we want to draw the marker for.\n */\nBlockly.blockRendering.MarkerSvg.prototype.draw = function(oldNode, curNode) {\n  if (!curNode) {\n    this.hide();\n    return;\n  }\n\n  this.constants_ = this.workspace_.getRenderer().getConstants();\n\n  var defaultColour = this.isCursor() ? this.constants_.CURSOR_COLOUR :\n    this.constants_.MARKER_COLOUR;\n  this.colour_ = this.marker_.colour || defaultColour;\n  this.applyColour_(curNode);\n\n  this.showAtLocation_(curNode);\n\n  this.fireMarkerEvent_(oldNode, curNode);\n\n  // Ensures the marker will be visible immediately after the move.\n  var animate = this.currentMarkerSvg.childNodes[0];\n  if (animate !== undefined) {\n    animate.beginElement && animate.beginElement();\n  }\n};\n\n\n/**\n * Update the marker's visible state based on the type of curNode..\n * @param {!Blockly.ASTNode} curNode The node that we want to draw the marker for.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.showAtLocation_ = function(curNode) {\n  var curNodeAsConnection =\n    /** @type {!Blockly.Connection} */ (curNode.getLocation());\n  if (curNode.getType() == Blockly.ASTNode.types.BLOCK) {\n    this.showWithBlock_(curNode);\n  } else if (curNode.getType() == Blockly.ASTNode.types.OUTPUT) {\n    this.showWithOutput_(curNode);\n  } else if (curNodeAsConnection.type == Blockly.INPUT_VALUE) {\n    this.showWithInput_(curNode);\n  } else if (curNodeAsConnection.type == Blockly.NEXT_STATEMENT) {\n    this.showWithNext_(curNode);\n  } else if (curNode.getType() == Blockly.ASTNode.types.PREVIOUS) {\n    this.showWithPrevious_(curNode);\n  } else if (curNode.getType() == Blockly.ASTNode.types.FIELD) {\n    this.showWithField_(curNode);\n  } else if (curNode.getType() == Blockly.ASTNode.types.WORKSPACE) {\n    this.showWithCoordinates_(curNode);\n  } else if (curNode.getType() == Blockly.ASTNode.types.STACK) {\n    this.showWithStack_(curNode);\n  }\n};\n\n/**************************\n * Display\n **************************/\n\n/**\n * Show the marker as a combination of the previous connection and block,\n * the output connection and block, or just the block.\n * @param {!Blockly.ASTNode} curNode The node to draw the marker for.\n * @private\n */\nBlockly.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_ = function(\n    curNode) {\n  var block = /** @type {!Blockly.BlockSvg} */ (curNode.getSourceBlock());\n  var width = block.width;\n  var height = block.height;\n  var markerHeight = height * Blockly.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER;\n  var markerOffset = this.constants_.CURSOR_BLOCK_PADDING;\n\n  if (block.previousConnection) {\n    var connectionShape = this.constants_.shapeFor(block.previousConnection);\n    this.positionPrevious_(width, markerOffset, markerHeight, connectionShape);\n  } else if (block.outputConnection) {\n    var connectionShape = this.constants_.shapeFor(block.outputConnection);\n    this.positionOutput_(width, height, connectionShape);\n  } else {\n    this.positionBlock_(width, markerOffset, markerHeight);\n  }\n  this.setParent_(block);\n  this.showCurrent_();\n};\n\n/**\n * Position and display the marker for a block.\n * @param {!Blockly.ASTNode} curNode The node to draw the marker for.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.showWithBlock_ = function(curNode) {\n  this.showWithBlockPrevOutput_(curNode);\n};\n\n/**\n * Position and display the marker for a previous connection.\n * @param {!Blockly.ASTNode} curNode The node to draw the marker for.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.showWithPrevious_ = function(\n    curNode) {\n  this.showWithBlockPrevOutput_(curNode);\n};\n\n/**\n * Position and display the marker for an output connection.\n * @param {!Blockly.ASTNode} curNode The node to draw the marker for.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.showWithOutput_ = function(curNode) {\n  this.showWithBlockPrevOutput_(curNode);\n};\n\n/**\n * Position and display the marker for a workspace coordinate.\n * This is a horizontal line.\n * @param {!Blockly.ASTNode} curNode The node to draw the marker for.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.showWithCoordinates_ = function(\n    curNode) {\n  var wsCoordinate = curNode.getWsCoordinate();\n  var x = wsCoordinate.x;\n  var y = wsCoordinate.y;\n\n  if (this.workspace_.RTL) {\n    x -= this.constants_.CURSOR_WS_WIDTH;\n  }\n\n  this.positionLine_(x, y, this.constants_.CURSOR_WS_WIDTH);\n  this.setParent_(this.workspace_);\n  this.showCurrent_();\n};\n\n/**\n * Position and display the marker for a field.\n * This is a box around the field.\n * @param {!Blockly.ASTNode} curNode The node to draw the marker for.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.showWithField_ = function(curNode) {\n  var field = /** @type {Blockly.Field} */ (curNode.getLocation());\n  var width = field.getSize().width;\n  var height = field.getSize().height;\n\n  this.positionRect_(0, 0, width, height);\n  this.setParent_(field);\n  this.showCurrent_();\n};\n\n/**\n * Position and display the marker for an input.\n * This is a puzzle piece.\n * @param {!Blockly.ASTNode} curNode The node to draw the marker for.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.showWithInput_ = function(curNode) {\n  var connection = /** @type {Blockly.RenderedConnection} */\n      (curNode.getLocation());\n  var sourceBlock = /** @type {!Blockly.BlockSvg} */ (connection.getSourceBlock());\n\n  this.positionInput_(connection);\n  this.setParent_(sourceBlock);\n  this.showCurrent_();\n};\n\n\n/**\n * Position and display the marker for a next connection.\n * This is a horizontal line.\n * @param {!Blockly.ASTNode} curNode The node to draw the marker for.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.showWithNext_ = function(curNode) {\n  var connection =\n    /** @type {!Blockly.RenderedConnection} */ (curNode.getLocation());\n  var targetBlock =\n    /** @type {Blockly.BlockSvg} */ (connection.getSourceBlock());\n  var x = 0;\n  var y = connection.getOffsetInBlock().y;\n  var width = targetBlock.getHeightWidth().width;\n  if (this.workspace_.RTL) {\n    x = -width;\n  }\n  this.positionLine_(x, y, width);\n  this.setParent_(targetBlock);\n  this.showCurrent_();\n};\n\n/**\n * Position and display the marker for a stack.\n * This is a box with extra padding around the entire stack of blocks.\n * @param {!Blockly.ASTNode} curNode The node to draw the marker for.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.showWithStack_ = function(curNode) {\n  var block = /** @type {Blockly.BlockSvg} */ (curNode.getLocation());\n\n  // Gets the height and width of entire stack.\n  var heightWidth = block.getHeightWidth();\n\n  // Add padding so that being on a stack looks different than being on a block.\n  var width = heightWidth.width + this.constants_.CURSOR_STACK_PADDING;\n  var height = heightWidth.height + this.constants_.CURSOR_STACK_PADDING;\n\n  // Shift the rectangle slightly to upper left so padding is equal on all sides.\n  var xPadding = -this.constants_.CURSOR_STACK_PADDING / 2;\n  var yPadding = -this.constants_.CURSOR_STACK_PADDING / 2;\n\n  var x = xPadding;\n  var y = yPadding;\n\n  if (this.workspace_.RTL) {\n    x = -(width + xPadding);\n  }\n  this.positionRect_(x, y, width, height);\n  this.setParent_(block);\n  this.showCurrent_();\n};\n\n/**\n * Show the current marker.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.showCurrent_ = function() {\n  this.hide();\n  this.currentMarkerSvg.style.display = '';\n};\n\n/**************************\n * Position\n **************************/\n\n/**\n * Position the marker for a block.\n * Displays an outline of the top half of a rectangle around a block.\n * @param {number} width The width of the block.\n * @param {number} markerOffset The extra padding for around the block.\n * @param {number} markerHeight The height of the marker.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.positionBlock_ = function(\n    width, markerOffset, markerHeight) {\n  var markerPath = Blockly.utils.svgPaths.moveBy(-markerOffset, markerHeight) +\n      Blockly.utils.svgPaths.lineOnAxis('V', -markerOffset) +\n      Blockly.utils.svgPaths.lineOnAxis('H', width + markerOffset * 2) +\n      Blockly.utils.svgPaths.lineOnAxis('V', markerHeight);\n  this.markerBlock_.setAttribute('d', markerPath);\n  if (this.workspace_.RTL) {\n    this.flipRtl_(this.markerBlock_);\n  }\n  this.currentMarkerSvg = this.markerBlock_;\n};\n\n/**\n * Position the marker for an input connection.\n * Displays a filled in puzzle piece.\n * @param {!Blockly.RenderedConnection} connection The connection to position\n *     marker around.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.positionInput_ = function(\n    connection) {\n  var x = connection.getOffsetInBlock().x;\n  var y = connection.getOffsetInBlock().y;\n\n  var path = Blockly.utils.svgPaths.moveTo(0, 0) +\n      this.constants_.shapeFor(connection).pathDown;\n\n  this.markerInput_.setAttribute('d', path);\n  this.markerInput_.setAttribute('transform',\n      'translate(' + x + ',' + y + ')' +\n      (this.workspace_.RTL ? ' scale(-1 1)' : ''));\n  this.currentMarkerSvg = this.markerInput_;\n};\n\n/**\n * Move and show the marker at the specified coordinate in workspace units.\n * Displays a horizontal line.\n * @param {number} x The new x, in workspace units.\n * @param {number} y The new y, in workspace units.\n * @param {number} width The new width, in workspace units.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.positionLine_ = function(\n    x, y, width) {\n  this.markerSvgLine_.setAttribute('x', x);\n  this.markerSvgLine_.setAttribute('y', y);\n  this.markerSvgLine_.setAttribute('width', width);\n  this.currentMarkerSvg = this.markerSvgLine_;\n};\n\n/**\n * Position the marker for an output connection.\n * Displays a puzzle outline and the top and bottom path.\n * @param {number} width The width of the block.\n * @param {number} height The height of the block.\n * @param {!Object} connectionShape The shape object for the connection.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.positionOutput_ = function(\n    width, height, connectionShape) {\n  var markerPath = Blockly.utils.svgPaths.moveBy(width, 0) +\n      Blockly.utils.svgPaths.lineOnAxis(\n          'h', -(width - connectionShape.width)) +\n      Blockly.utils.svgPaths.lineOnAxis(\n          'v', this.constants_.TAB_OFFSET_FROM_TOP) +\n      connectionShape.pathDown +\n      Blockly.utils.svgPaths.lineOnAxis('V', height) +\n      Blockly.utils.svgPaths.lineOnAxis('H', width);\n  this.markerBlock_.setAttribute('d', markerPath);\n  if (this.workspace_.RTL) {\n    this.flipRtl_(this.markerBlock_);\n  }\n  this.currentMarkerSvg = this.markerBlock_;\n};\n\n/**\n * Position the marker for a previous connection.\n * Displays a half rectangle with a notch in the top to represent the previous\n * connection.\n * @param {number} width The width of the block.\n * @param {number} markerOffset The offset of the marker from around the block.\n * @param {number} markerHeight The height of the marker.\n * @param {!Object} connectionShape The shape object for the connection.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.positionPrevious_ = function(\n    width, markerOffset, markerHeight, connectionShape) {\n  var markerPath = Blockly.utils.svgPaths.moveBy(-markerOffset, markerHeight) +\n      Blockly.utils.svgPaths.lineOnAxis('V', -markerOffset) +\n      Blockly.utils.svgPaths.lineOnAxis(\n          'H', this.constants_.NOTCH_OFFSET_LEFT) +\n      connectionShape.pathLeft +\n      Blockly.utils.svgPaths.lineOnAxis(\n          'H', width + markerOffset * 2) +\n      Blockly.utils.svgPaths.lineOnAxis('V', markerHeight);\n  this.markerBlock_.setAttribute('d', markerPath);\n  if (this.workspace_.RTL) {\n    this.flipRtl_(this.markerBlock_);\n  }\n  this.currentMarkerSvg = this.markerBlock_;\n};\n\n/**\n * Move and show the marker at the specified coordinate in workspace units.\n * Displays a filled in rectangle.\n * @param {number} x The new x, in workspace units.\n * @param {number} y The new y, in workspace units.\n * @param {number} width The new width, in workspace units.\n * @param {number} height The new height, in workspace units.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.positionRect_ = function(\n    x, y, width, height) {\n  this.markerSvgRect_.setAttribute('x', x);\n  this.markerSvgRect_.setAttribute('y', y);\n  this.markerSvgRect_.setAttribute('width', width);\n  this.markerSvgRect_.setAttribute('height', height);\n  this.currentMarkerSvg = this.markerSvgRect_;\n};\n\n/**\n * Flip the SVG paths in RTL.\n * @param {!SVGElement} markerSvg The marker that we want to flip.\n * @private\n */\nBlockly.blockRendering.MarkerSvg.prototype.flipRtl_ = function(markerSvg) {\n  markerSvg.setAttribute('transform', 'scale(-1 1)');\n};\n\n/**\n * Hide the marker.\n */\nBlockly.blockRendering.MarkerSvg.prototype.hide = function() {\n  this.markerSvgLine_.style.display = 'none';\n  this.markerSvgRect_.style.display = 'none';\n  this.markerInput_.style.display = 'none';\n  this.markerBlock_.style.display = 'none';\n};\n\n\n/**\n * Fire event for the marker or marker.\n * @param {Blockly.ASTNode} oldNode The old node the marker used to be on.\n * @param {!Blockly.ASTNode} curNode The new node the marker is currently on.\n * @private\n */\nBlockly.blockRendering.MarkerSvg.prototype.fireMarkerEvent_ = function(\n    oldNode, curNode) {\n  var curBlock = curNode.getSourceBlock();\n  var eventType = this.isCursor() ? 'cursorMove' : 'markerMove';\n  var event = new Blockly.Events.Ui(curBlock, eventType, oldNode, curNode);\n  if (curNode.getType() == Blockly.ASTNode.types.WORKSPACE) {\n    event.workspaceId =\n      (/** @type {!Blockly.Workspace} */ (curNode.getLocation())).id;\n  }\n  Blockly.Events.fire(event);\n};\n\n/**\n * Get the properties to make a marker blink.\n * @return {!Object} The object holding attributes to make the marker blink.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.getBlinkProperties_ = function() {\n  return {\n    'attributeType': 'XML',\n    'attributeName': 'fill',\n    'dur': '1s',\n    'values': this.colour_ + ';transparent;transparent;',\n    'repeatCount': 'indefinite'\n  };\n};\n\n\n/**\n * Create the marker SVG.\n * @return {Element} The SVG node created.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.createDomInternal_ = function() {\n  /* This markup will be generated and added to the .svgGroup_:\n  <g>\n    <rect width=\"100\" height=\"5\">\n      <animate attributeType=\"XML\" attributeName=\"fill\" dur=\"1s\"\n        values=\"transparent;transparent;#fff;transparent\" repeatCount=\"indefinite\" />\n    </rect>\n  </g>\n  */\n\n  this.markerSvg_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.G,\n      {\n        'width': this.constants_.CURSOR_WS_WIDTH,\n        'height': this.constants_.WS_CURSOR_HEIGHT\n      }, this.svgGroup_);\n\n  // A horizontal line used to represent a workspace coordinate or next\n  // connection.\n  this.markerSvgLine_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {\n        'width': this.constants_.CURSOR_WS_WIDTH,\n        'height': this.constants_.WS_CURSOR_HEIGHT,\n        'style': 'display: none'\n      },\n      this.markerSvg_);\n\n  // A filled in rectangle used to represent a stack.\n  this.markerSvgRect_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.RECT,\n      {\n        'class': 'blocklyVerticalMarker',\n        'rx': 10, 'ry': 10,\n        'style': 'display: none'\n      },\n      this.markerSvg_);\n\n  // A filled in puzzle piece used to represent an input value.\n  this.markerInput_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH,\n      {\n        'transform': '',\n        'style': 'display: none'\n      },\n      this.markerSvg_);\n\n  // A path used to represent a previous connection and a block, an output\n  // connection and a block, or a block.\n  this.markerBlock_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH,\n      {\n        'transform': '',\n        'style': 'display: none',\n        'fill': 'none',\n        'stroke-width': this.constants_.CURSOR_STROKE_WIDTH\n      },\n      this.markerSvg_);\n\n  // Markers and stack markers don't blink.\n  if (this.isCursor()) {\n    var blinkProperties = this.getBlinkProperties_();\n    Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.ANIMATE, blinkProperties,\n        this.markerSvgLine_);\n    Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.ANIMATE, blinkProperties,\n        this.markerInput_);\n    blinkProperties['attributeName'] = 'stroke';\n    Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.ANIMATE, blinkProperties,\n        this.markerBlock_);\n  }\n\n  return this.markerSvg_;\n};\n\n/**\n * Apply the marker's colour.\n * @param {!Blockly.ASTNode} _curNode The node that we want to draw the marker\n *    for.\n * @protected\n */\nBlockly.blockRendering.MarkerSvg.prototype.applyColour_ = function(_curNode) {\n  this.markerSvgLine_.setAttribute('fill', this.colour_);\n  this.markerSvgRect_.setAttribute('stroke', this.colour_);\n  this.markerInput_.setAttribute('fill', this.colour_);\n  this.markerBlock_.setAttribute('stroke', this.colour_);\n\n  if (this.isCursor()) {\n    var values = this.colour_ + ';transparent;transparent;';\n    this.markerSvgLine_.firstChild.setAttribute('values', values);\n    this.markerInput_.firstChild.setAttribute('values', values);\n    this.markerBlock_.firstChild.setAttribute('values', values);\n  }\n};\n\n/**\n * Dispose of this marker.\n */\nBlockly.blockRendering.MarkerSvg.prototype.dispose = function() {\n  if (this.svgGroup_) {\n    Blockly.utils.dom.removeNode(this.svgGroup_);\n  }\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Measurable types.\n * @author samelh@google.com (Sam El-Husseini)\n */\n\n'use strict';\n\ngoog.provide('Blockly.blockRendering.Types');\n\n\n/**\n * Types of rendering elements.\n * @enum {number}\n */\nBlockly.blockRendering.Types = {\n  NONE: 0,                      // None\n  FIELD: 1 << 0,                // Field.\n  HAT: 1 << 1,                  // Hat.\n  ICON: 1 << 2,                 // Icon.\n  SPACER: 1 << 3,               // Spacer.\n  BETWEEN_ROW_SPACER: 1 << 4,   // Between Row Spacer.\n  IN_ROW_SPACER: 1 << 5,        // In Row Spacer.\n  EXTERNAL_VALUE_INPUT: 1 << 6, // External Value Input.\n  INPUT: 1 << 7,                // Input.\n  INLINE_INPUT: 1 << 8,         // Inline Input.\n  STATEMENT_INPUT: 1 << 9,      // Statement Input.\n  CONNECTION: 1 << 10,          // Connection.\n  PREVIOUS_CONNECTION: 1 << 11, // Previous Connection.\n  NEXT_CONNECTION: 1 << 12,     // Next Connection.\n  OUTPUT_CONNECTION: 1 << 13,   // Output Connection.\n  CORNER: 1 << 14,              // Corner.\n  LEFT_SQUARE_CORNER: 1 << 15,  // Square Corner.\n  LEFT_ROUND_CORNER: 1 << 16,   // Round Corner.\n  RIGHT_SQUARE_CORNER: 1 << 17, // Right Square Corner.\n  RIGHT_ROUND_CORNER: 1 << 18,  // Right Round Corner.\n  JAGGED_EDGE: 1 << 19,         // Jagged Edge.\n  ROW: 1 << 20,                 // Row.\n  TOP_ROW: 1 << 21,             // Top Row.\n  BOTTOM_ROW: 1 << 22,          // Bottom Row.\n  INPUT_ROW: 1 << 23            // Input Row.\n};\n\n/**\n * A Left Corner Union Type.\n * @type {number}\n * @const\n * @package\n */\nBlockly.blockRendering.Types.LEFT_CORNER =\n    Blockly.blockRendering.Types.LEFT_SQUARE_CORNER |\n    Blockly.blockRendering.Types.LEFT_ROUND_CORNER;\n\n/**\n * A Right Corner Union Type.\n * @type {number}\n * @const\n * @package\n */\nBlockly.blockRendering.Types.RIGHT_CORNER =\n    Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER |\n    Blockly.blockRendering.Types.RIGHT_ROUND_CORNER;\n\n/**\n * Next flag value to use for custom rendering element types.\n * This must be updated to reflect the next enum flag value\n * to use if additional elements are added to\n * `Blockly.blockRendering.Types`.\n * @type {number}\n * @private\n */\nBlockly.blockRendering.Types.nextTypeValue_ = 1 << 24;\n\n/**\n * Get the enum flag value of an existing type or register a new type.\n * @param {!string} type The name of the type.\n * @return {!number} The enum flag value associated with that type.\n * @package\n */\nBlockly.blockRendering.Types.getType = function(type) {\n  if (!Object.prototype.hasOwnProperty.call(Blockly.blockRendering.Types, type)) {\n    Blockly.blockRendering.Types[type] =\n      Blockly.blockRendering.Types.nextTypeValue_;\n    Blockly.blockRendering.Types.nextTypeValue_ <<= 1;\n  }\n  return Blockly.blockRendering.Types[type];\n};\n\n/**\n * Whether a measurable stores information about a field.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a field.\n * @package\n */\nBlockly.blockRendering.Types.isField = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.FIELD;\n};\n\n/**\n * Whether a measurable stores information about a hat.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a hat.\n * @package\n */\nBlockly.blockRendering.Types.isHat = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.HAT;\n};\n\n/**\n * Whether a measurable stores information about an icon.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about an icon.\n * @package\n */\nBlockly.blockRendering.Types.isIcon = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.ICON;\n};\n\n/**\n * Whether a measurable stores information about a spacer.\n * @param {!Blockly.blockRendering.Measurable|!Blockly.blockRendering.Row} elem\n *     The element to check.\n * @return {number} 1 if the object stores information about a spacer.\n * @package\n */\nBlockly.blockRendering.Types.isSpacer = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.SPACER;\n};\n\n/**\n * Whether a measurable stores information about an in-row spacer.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about an\n *   in-row spacer.\n * @package\n */\nBlockly.blockRendering.Types.isInRowSpacer = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.IN_ROW_SPACER;\n};\n\n/**\n * Whether a measurable stores information about an input.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about an input.\n * @package\n */\nBlockly.blockRendering.Types.isInput = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.INPUT;\n};\n\n/**\n * Whether a measurable stores information about an external input.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about an\n *   external input.\n * @package\n */\nBlockly.blockRendering.Types.isExternalInput = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.EXTERNAL_VALUE_INPUT;\n};\n\n/**\n * Whether a measurable stores information about an inline input.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about an\n *   inline input.\n * @package\n */\nBlockly.blockRendering.Types.isInlineInput = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.INLINE_INPUT;\n};\n\n/**\n * Whether a measurable stores information about a statement input.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   statement input.\n * @package\n */\nBlockly.blockRendering.Types.isStatementInput = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.STATEMENT_INPUT;\n};\n\n/**\n * Whether a measurable stores information about a previous connection.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   previous connection.\n * @package\n */\nBlockly.blockRendering.Types.isPreviousConnection = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.PREVIOUS_CONNECTION;\n};\n\n/**\n * Whether a measurable stores information about a next connection.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   next connection.\n * @package\n */\nBlockly.blockRendering.Types.isNextConnection = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.NEXT_CONNECTION;\n};\n\n/**\n * Whether a measurable stores information about a previous or next connection.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a previous or\n *   next connection.\n * @package\n */\nBlockly.blockRendering.Types.isPreviousOrNextConnection = function(elem) {\n  return elem.type & (Blockly.blockRendering.Types.PREVIOUS_CONNECTION |\n      Blockly.blockRendering.Types.NEXT_CONNECTION);\n};\n\n/**\n * Whether a measurable stores information about a left round corner.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   left round corner.\n * @package\n */\nBlockly.blockRendering.Types.isLeftRoundedCorner = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.LEFT_ROUND_CORNER;\n};\n\n/**\n * Whether a measurable stores information about a right round corner.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   right round corner.\n * @package\n */\nBlockly.blockRendering.Types.isRightRoundedCorner = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.RIGHT_ROUND_CORNER;\n};\n\n/**\n * Whether a measurable stores information about a left square corner.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   left square corner.\n * @package\n */\nBlockly.blockRendering.Types.isLeftSquareCorner = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.LEFT_SQUARE_CORNER;\n};\n\n/**\n * Whether a measurable stores information about a right square corner.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   right square corner.\n * @package\n */\nBlockly.blockRendering.Types.isRightSquareCorner = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER;\n};\n\n/**\n * Whether a measurable stores information about a corner.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a\n *   corner.\n * @package\n */\nBlockly.blockRendering.Types.isCorner = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.CORNER;\n};\n\n/**\n * Whether a measurable stores information about a jagged edge.\n * @param {!Blockly.blockRendering.Measurable} elem The element to check.\n * @return {number} 1 if the object stores information about a jagged edge.\n * @package\n */\nBlockly.blockRendering.Types.isJaggedEdge = function(elem) {\n  return elem.type & Blockly.blockRendering.Types.JAGGED_EDGE;\n};\n\n/**\n * Whether a measurable stores information about a row.\n * @param {!Blockly.blockRendering.Row} row The row to check.\n * @return {number} 1 if the object stores information about a row.\n * @package\n */\nBlockly.blockRendering.Types.isRow = function(row) {\n  return row.type & Blockly.blockRendering.Types.ROW;\n};\n\n/**\n * Whether a measurable stores information about a between-row spacer.\n * @param {!Blockly.blockRendering.Row} row The row to check.\n * @return {number} 1 if the object stores information about a\n *   between-row spacer.\n * @package\n */\nBlockly.blockRendering.Types.isBetweenRowSpacer = function(row) {\n  return row.type & Blockly.blockRendering.Types.BETWEEN_ROW_SPACER;\n};\n\n/**\n * Whether a measurable stores information about a top row.\n * @param {!Blockly.blockRendering.Row} row The row to check.\n * @return {number} 1 if the object stores information about a top row.\n * @package\n */\nBlockly.blockRendering.Types.isTopRow = function(row) {\n  return row.type & Blockly.blockRendering.Types.TOP_ROW;\n};\n\n/**\n * Whether a measurable stores information about a bottom row.\n * @param {!Blockly.blockRendering.Row} row The row to check.\n * @return {number} 1 if the object stores information about a bottom row.\n * @package\n */\nBlockly.blockRendering.Types.isBottomRow = function(row) {\n  return row.type & Blockly.blockRendering.Types.BOTTOM_ROW;\n};\n\n/**\n * Whether a measurable stores information about a top or bottom row.\n * @param {!Blockly.blockRendering.Row} row The row to check.\n * @return {number} 1 if the object stores information about a top or\n *   bottom row.\n * @package\n */\nBlockly.blockRendering.Types.isTopOrBottomRow = function(row) {\n  return row.type & (Blockly.blockRendering.Types.TOP_ROW |\n      Blockly.blockRendering.Types.BOTTOM_ROW);\n};\n\n/**\n * Whether a measurable stores information about an input row.\n * @param {!Blockly.blockRendering.Row} row The row to check.\n * @return {number} 1 if the object stores information about an input row.\n * @package\n */\nBlockly.blockRendering.Types.isInputRow = function(row) {\n  return row.type & Blockly.blockRendering.Types.INPUT_ROW;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for graphically rendering a block as SVG.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n\n'use strict';\n\ngoog.provide('Blockly.blockRendering.Measurable');\n\ngoog.require('Blockly.blockRendering.Types');\n\n\n/**\n * The base class to represent a part of a block that takes up space during\n * rendering.  The constructor for each non-spacer Measurable records the size\n * of the block element (e.g. field, statement input).\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @package\n * @constructor\n */\nBlockly.blockRendering.Measurable = function(constants) {\n  this.width = 0;\n  this.height = 0;\n  this.type = Blockly.blockRendering.Types.NONE;\n\n  this.xPos = 0;\n  this.centerline = 0;\n\n  /**\n   * The renderer's constant provider.\n   * @type {!Blockly.blockRendering.ConstantProvider}\n   * @protected\n   */\n  this.constants_ = constants;\n\n  this.notchOffset = this.constants_.NOTCH_OFFSET_LEFT;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects representing connections on rendered blocks.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n\ngoog.provide('Blockly.blockRendering.Connection');\ngoog.provide('Blockly.blockRendering.NextConnection');\ngoog.provide('Blockly.blockRendering.OutputConnection');\ngoog.provide('Blockly.blockRendering.PreviousConnection');\n\ngoog.require('Blockly.blockRendering.Measurable');\ngoog.require('Blockly.blockRendering.Types');\ngoog.require('Blockly.utils.object');\n\n\n\n/**\n * The base class to represent a connection and the space that it takes up on\n * the block.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {!Blockly.RenderedConnection} connectionModel The connection object on\n *     the block that this represents.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Measurable}\n */\nBlockly.blockRendering.Connection = function(constants, connectionModel) {\n  Blockly.blockRendering.Connection.superClass_.constructor.call(this,\n      constants);\n  this.connectionModel = connectionModel;\n  this.shape = this.constants_.shapeFor(connectionModel);\n  this.isDynamicShape = !!this.shape['isDynamic'];\n  this.type |= Blockly.blockRendering.Types.CONNECTION;\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.Connection,\n    Blockly.blockRendering.Measurable);\n\n/**\n * An object containing information about the space an output connection takes\n * up during rendering.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {Blockly.RenderedConnection} connectionModel The connection object on\n *     the block that this represents.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Connection}\n */\nBlockly.blockRendering.OutputConnection = function(constants, connectionModel) {\n  Blockly.blockRendering.OutputConnection.superClass_.constructor.call(this,\n      constants, connectionModel);\n  this.type |= Blockly.blockRendering.Types.OUTPUT_CONNECTION;\n\n  this.height = !this.isDynamicShape ? this.shape.height : 0;\n  this.width = !this.isDynamicShape ? this.shape.width : 0;\n  this.startX = this.width;\n\n  this.connectionOffsetY = this.constants_.TAB_OFFSET_FROM_TOP;\n  this.connectionOffsetX = 0;\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.OutputConnection,\n    Blockly.blockRendering.Connection);\n\n\n/**\n * An object containing information about the space a previous connection takes\n * up during rendering.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {Blockly.RenderedConnection} connectionModel The connection object on\n *     the block that this represents.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Connection}\n */\nBlockly.blockRendering.PreviousConnection = function(\n    constants, connectionModel) {\n  Blockly.blockRendering.PreviousConnection.superClass_.constructor.call(this,\n      constants, connectionModel);\n  this.type |= Blockly.blockRendering.Types.PREVIOUS_CONNECTION;\n  this.height = this.shape.height;\n  this.width = this.shape.width;\n\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.PreviousConnection,\n    Blockly.blockRendering.Connection);\n\n/**\n * An object containing information about the space a next connection takes\n * up during rendering.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {Blockly.RenderedConnection} connectionModel The connection object on\n *     the block that this represents.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Connection}\n */\nBlockly.blockRendering.NextConnection = function(constants, connectionModel) {\n  Blockly.blockRendering.NextConnection.superClass_.constructor.call(this,\n      constants, connectionModel);\n  this.type |= Blockly.blockRendering.Types.NEXT_CONNECTION;\n  this.height = this.shape.height;\n  this.width = this.shape.width;\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.NextConnection,\n    Blockly.blockRendering.Connection);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects representing inputs with connections on a rendered\n * block.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n\ngoog.provide('Blockly.blockRendering.ExternalValueInput');\ngoog.provide('Blockly.blockRendering.InlineInput');\ngoog.provide('Blockly.blockRendering.InputConnection');\ngoog.provide('Blockly.blockRendering.StatementInput');\n\ngoog.require('Blockly.blockRendering.Connection');\ngoog.require('Blockly.blockRendering.Measurable');\ngoog.require('Blockly.blockRendering.Types');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * The base class to represent an input that takes up space on a block\n * during rendering\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {!Blockly.Input} input The input to measure and store information for.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Connection}\n */\nBlockly.blockRendering.InputConnection = function(constants, input) {\n  Blockly.blockRendering.InputConnection.superClass_.constructor.call(this,\n      constants, input.connection);\n\n  this.type |= Blockly.blockRendering.Types.INPUT;\n  this.input = input;\n  this.align = input.align;\n  this.connectedBlock = input.connection && input.connection.targetBlock() ?\n      input.connection.targetBlock() : null;\n\n  if (this.connectedBlock) {\n    var bBox = this.connectedBlock.getHeightWidth();\n    this.connectedBlockWidth = bBox.width;\n    this.connectedBlockHeight = bBox.height;\n  } else {\n    this.connectedBlockWidth = 0;\n    this.connectedBlockHeight = 0;\n  }\n\n  this.connectionOffsetX = 0;\n  this.connectionOffsetY = 0;\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.InputConnection,\n    Blockly.blockRendering.Connection);\n\n/**\n * An object containing information about the space an inline input takes up\n * during rendering\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {!Blockly.Input} input The inline input to measure and store\n *     information for.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.InputConnection}\n */\nBlockly.blockRendering.InlineInput = function(constants, input) {\n  Blockly.blockRendering.InlineInput.superClass_.constructor.call(this,\n      constants, input);\n  this.type |= Blockly.blockRendering.Types.INLINE_INPUT;\n\n  if (!this.connectedBlock) {\n    this.height = this.constants_.EMPTY_INLINE_INPUT_HEIGHT;\n    this.width = this.constants_.EMPTY_INLINE_INPUT_PADDING;\n  } else {\n    // We allow the dark path to show on the parent block so that the child\n    // block looks embossed.  This takes up an extra pixel in both x and y.\n    this.width = this.connectedBlockWidth;\n    this.height = this.connectedBlockHeight;\n  }\n\n  this.connectionHeight = !this.isDynamicShape ? this.shape.height :\n      this.shape.height(this.height);\n  this.connectionWidth = !this.isDynamicShape ? this.shape.width :\n      this.shape.width(this.height);\n  if (!this.connectedBlock) {\n    this.width += this.connectionWidth * (this.isDynamicShape ? 2 : 1);\n  }\n  this.connectionOffsetY = this.isDynamicShape ?\n      this.shape.connectionOffsetY(this.connectionHeight) :\n      this.constants_.TAB_OFFSET_FROM_TOP;\n  this.connectionOffsetX = this.isDynamicShape ?\n      this.shape.connectionOffsetX(this.connectionWidth) : 0;\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.InlineInput,\n    Blockly.blockRendering.InputConnection);\n\n/**\n * An object containing information about the space a statement input takes up\n * during rendering\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {!Blockly.Input} input The statement input to measure and store\n *     information for.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.InputConnection}\n */\nBlockly.blockRendering.StatementInput = function(constants, input) {\n  Blockly.blockRendering.StatementInput.superClass_.constructor.call(this,\n      constants, input);\n  this.type |= Blockly.blockRendering.Types.STATEMENT_INPUT;\n\n  if (!this.connectedBlock) {\n    this.height = this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT;\n  } else {\n    // We allow the dark path to show on the parent block so that the child\n    // block looks embossed.  This takes up an extra pixel in both x and y.\n    this.height =\n        this.connectedBlockHeight + this.constants_.STATEMENT_BOTTOM_SPACER;\n  }\n  this.width = this.constants_.STATEMENT_INPUT_NOTCH_OFFSET + this.shape.width;\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.StatementInput,\n    Blockly.blockRendering.InputConnection);\n\n/**\n * An object containing information about the space an external value input\n * takes up during rendering\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {!Blockly.Input} input The external value input to measure and store\n *     information for.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.InputConnection}\n */\nBlockly.blockRendering.ExternalValueInput = function(constants, input) {\n  Blockly.blockRendering.ExternalValueInput.superClass_.constructor.call(this,\n      constants, input);\n  this.type |= Blockly.blockRendering.Types.EXTERNAL_VALUE_INPUT;\n  if (!this.connectedBlock) {\n    this.height = this.shape.height;\n  } else {\n    this.height =\n        this.connectedBlockHeight - this.constants_.TAB_OFFSET_FROM_TOP -\n        this.constants_.MEDIUM_PADDING;\n  }\n  this.width = this.shape.width +\n      this.constants_.EXTERNAL_VALUE_INPUT_PADDING;\n\n  this.connectionOffsetY = this.constants_.TAB_OFFSET_FROM_TOP;\n  this.connectionHeight = this.shape.height;\n  this.connectionWidth = this.shape.width;\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.ExternalValueInput,\n    Blockly.blockRendering.InputConnection);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects representing elements in a row of a rendered\n * block.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n\ngoog.provide('Blockly.blockRendering.Field');\ngoog.provide('Blockly.blockRendering.Hat');\ngoog.provide('Blockly.blockRendering.Icon');\ngoog.provide('Blockly.blockRendering.InRowSpacer');\ngoog.provide('Blockly.blockRendering.JaggedEdge');\ngoog.provide('Blockly.blockRendering.RoundCorner');\ngoog.provide('Blockly.blockRendering.SquareCorner');\n\ngoog.require('Blockly.blockRendering.Measurable');\ngoog.require('Blockly.blockRendering.Types');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * An object containing information about the space an icon takes up during\n * rendering\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {!Blockly.Icon} icon The icon to measure and store information for.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Measurable}\n */\nBlockly.blockRendering.Icon = function(constants, icon) {\n  Blockly.blockRendering.Icon.superClass_.constructor.call(this, constants);\n  this.icon = icon;\n  this.isVisible = icon.isVisible();\n  this.type |= Blockly.blockRendering.Types.ICON;\n\n  var size = icon.getCorrectedSize();\n  this.height = size.height;\n  this.width = size.width;\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.Icon,\n    Blockly.blockRendering.Measurable);\n\n/**\n * An object containing information about the jagged edge of a collapsed block\n * takes up during rendering\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Measurable}\n */\nBlockly.blockRendering.JaggedEdge = function(constants) {\n  Blockly.blockRendering.JaggedEdge.superClass_.constructor.call(\n      this, constants);\n  this.type |= Blockly.blockRendering.Types.JAGGED_EDGE;\n  this.height = this.constants_.JAGGED_TEETH.height;\n  this.width = this.constants_.JAGGED_TEETH.width;\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.JaggedEdge,\n    Blockly.blockRendering.Measurable);\n\n\n/**\n * An object containing information about the space a field takes up during\n * rendering\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {!Blockly.Field} field The field to measure and store information for.\n * @param {!Blockly.Input} parentInput The parent input for the field.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Measurable}\n */\nBlockly.blockRendering.Field = function(constants, field, parentInput) {\n  Blockly.blockRendering.Field.superClass_.constructor.call(this, constants);\n  this.field = field;\n  this.isEditable = field.EDITABLE;\n  this.flipRtl = field.getFlipRtl();\n  this.type |= Blockly.blockRendering.Types.FIELD;\n\n  var size = this.field.getSize();\n  this.height = size.height;\n  this.width = size.width;\n  this.parentInput = parentInput;\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.Field,\n    Blockly.blockRendering.Measurable);\n\n/**\n * An object containing information about the space a hat takes up during\n * rendering.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Measurable}\n */\nBlockly.blockRendering.Hat = function(constants) {\n  Blockly.blockRendering.Hat.superClass_.constructor.call(this, constants);\n  this.type |= Blockly.blockRendering.Types.HAT;\n  this.height = this.constants_.START_HAT.height;\n  this.width = this.constants_.START_HAT.width;\n  this.ascenderHeight = this.height;\n\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.Hat,\n    Blockly.blockRendering.Measurable);\n\n/**\n * An object containing information about the space a square corner takes up\n * during rendering.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {string=} opt_position The position of this corner.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Measurable}\n */\nBlockly.blockRendering.SquareCorner = function(constants, opt_position) {\n  Blockly.blockRendering.SquareCorner.superClass_.constructor.call(this,\n      constants);\n  this.type = ((!opt_position || opt_position == 'left') ?\n      Blockly.blockRendering.Types.LEFT_SQUARE_CORNER :\n      Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER) |\n          Blockly.blockRendering.Types.CORNER;\n  this.height = this.constants_.NO_PADDING;\n  this.width = this.constants_.NO_PADDING;\n\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.SquareCorner,\n    Blockly.blockRendering.Measurable);\n\n/**\n * An object containing information about the space a rounded corner takes up\n * during rendering.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {string=} opt_position The position of this corner.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Measurable}\n */\nBlockly.blockRendering.RoundCorner = function(constants, opt_position) {\n  Blockly.blockRendering.RoundCorner.superClass_.constructor.call(this,\n      constants);\n  this.type = ((!opt_position || opt_position == 'left') ?\n      Blockly.blockRendering.Types.LEFT_ROUND_CORNER :\n      Blockly.blockRendering.Types.RIGHT_ROUND_CORNER) |\n          Blockly.blockRendering.Types.CORNER;\n  this.width = this.constants_.CORNER_RADIUS;\n  // The rounded corner extends into the next row by 4 so we only take the\n  // height that is aligned with this row.\n  this.height = this.constants_.CORNER_RADIUS / 2;\n\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.RoundCorner,\n    Blockly.blockRendering.Measurable);\n\n/**\n * An object containing information about a spacer between two elements on a\n * row.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {number} width The width of the spacer.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Measurable}\n */\nBlockly.blockRendering.InRowSpacer = function(constants, width) {\n  Blockly.blockRendering.InRowSpacer.superClass_.constructor.call(this,\n      constants);\n  this.type |= Blockly.blockRendering.Types.SPACER |\n      Blockly.blockRendering.Types.IN_ROW_SPACER;\n  this.width = width;\n  this.height = this.constants_.SPACER_DEFAULT_HEIGHT;\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.InRowSpacer,\n    Blockly.blockRendering.Measurable);\n\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects representing a single row on a rendered block and all\n * of its subcomponents.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n\ngoog.provide('Blockly.blockRendering.BottomRow');\ngoog.provide('Blockly.blockRendering.InputRow');\ngoog.provide('Blockly.blockRendering.Row');\ngoog.provide('Blockly.blockRendering.SpacerRow');\ngoog.provide('Blockly.blockRendering.TopRow');\n\ngoog.require('Blockly.blockRendering.InputConnection');\ngoog.require('Blockly.blockRendering.InRowSpacer');\ngoog.require('Blockly.blockRendering.Measurable');\ngoog.require('Blockly.blockRendering.NextConnection');\ngoog.require('Blockly.blockRendering.PreviousConnection');\ngoog.require('Blockly.blockRendering.Types');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * An object representing a single row on a rendered block and all of its\n * subcomponents.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @package\n * @constructor\n */\nBlockly.blockRendering.Row = function(constants) {\n  /**\n   * The type of this rendering object.\n   * @package\n   * @type {number}\n   */\n  this.type = Blockly.blockRendering.Types.ROW;\n\n  /**\n   * An array of elements contained in this row.\n   * @package\n   * @type {!Array.<!Blockly.blockRendering.Measurable>}\n   */\n  this.elements = [];\n\n  /**\n   * The height of the row.\n   * @package\n   * @type {number}\n   */\n  this.height = 0;\n\n  /**\n   * The width of the row, from the left edge of the block to the right.\n   * Does not include child blocks unless they are inline.\n   * @package\n   * @type {number}\n   */\n  this.width = 0;\n\n  /**\n   * The minimum height of the row.\n   * @package\n   * @type {number}\n   */\n  this.minHeight = 0;\n\n  /**\n   * The minimum width of the row, from the left edge of the block to the right.\n   * Does not include child blocks unless they are inline.\n   * @package\n   * @type {number}\n   */\n  this.minWidth = 0;\n\n  /**\n   * The width of the row, from the left edge of the block to the edge of the\n   * block or any connected child blocks.\n   * @package\n   * @type {number}\n   */\n  this.widthWithConnectedBlocks = 0;\n\n  /**\n   * The Y position of the row relative to the origin of the block's svg group.\n   * @package\n   * @type {number}\n   */\n  this.yPos = 0;\n\n  /**\n   * The X position of the row relative to the origin of the block's svg group.\n   * @package\n   * @type {number}\n   */\n  this.xPos = 0;\n\n  /**\n   * Whether the row has any external inputs.\n   * @package\n   * @type {boolean}\n   */\n  this.hasExternalInput = false;\n\n  /**\n   * Whether the row has any statement inputs.\n   * @package\n   * @type {boolean}\n   */\n  this.hasStatement = false;\n\n  /**\n   * Whether the row has any inline inputs.\n   * @package\n   * @type {boolean}\n   */\n  this.hasInlineInput = false;\n\n  /**\n   * Whether the row has any dummy inputs.\n   * @package\n   * @type {boolean}\n   */\n  this.hasDummyInput = false;\n\n  /**\n   * Whether the row has a jagged edge.\n   * @package\n   * @type {boolean}\n   */\n  this.hasJaggedEdge = false;\n\n  /**\n   * The renderer's constant provider.\n   * @type {!Blockly.blockRendering.ConstantProvider}\n   * @protected\n   */\n  this.constants_ = constants;\n\n  this.notchOffset = this.constants_.NOTCH_OFFSET_LEFT;\n\n  /**\n   * Alignment of the row.\n   * @package\n   * @type {?number}\n   */\n  this.align = null;\n};\n\n/**\n * Inspect all subcomponents and populate all size properties on the row.\n * @package\n */\nBlockly.blockRendering.Row.prototype.measure = function() {\n  throw Error('Unexpected attempt to measure a base Row.');\n};\n\n/**\n * Get the last input on this row, if it has one.\n * @return {Blockly.blockRendering.InputConnection} The last input on the row,\n *     or null.\n * @package\n */\n// TODO: Consider moving this to InputRow, if possible.\nBlockly.blockRendering.Row.prototype.getLastInput = function() {\n  for (var i = this.elements.length - 1, elem; (elem = this.elements[i]); i--) {\n    if (Blockly.blockRendering.Types.isInput(elem)) {\n      return /** @type {Blockly.blockRendering.InputConnection} */ (elem);\n    }\n  }\n  return null;\n};\n\n/**\n * Determines whether this row should start with an element spacer.\n * @return {boolean} Whether the row should start with a spacer.\n * @package\n */\nBlockly.blockRendering.Row.prototype.startsWithElemSpacer = function() {\n  return true;\n};\n\n/**\n * Determines whether this row should end with an element spacer.\n * @return {boolean} Whether the row should end with a spacer.\n * @package\n */\nBlockly.blockRendering.Row.prototype.endsWithElemSpacer = function() {\n  return true;\n};\n\n/**\n * Convenience method to get the first spacer element on this row.\n * @return {Blockly.blockRendering.InRowSpacer} The first spacer element on\n *   this row.\n * @package\n */\nBlockly.blockRendering.Row.prototype.getFirstSpacer = function() {\n  for (var i = 0, elem; (elem = this.elements[i]); i++) {\n    if (Blockly.blockRendering.Types.isSpacer(elem)) {\n      return /** @type {Blockly.blockRendering.InRowSpacer} */ (elem);\n    }\n  }\n  return null;\n};\n\n/**\n * Convenience method to get the last spacer element on this row.\n * @return {Blockly.blockRendering.InRowSpacer} The last spacer element on\n *   this row.\n * @package\n */\nBlockly.blockRendering.Row.prototype.getLastSpacer = function() {\n  for (var i = this.elements.length - 1, elem; (elem = this.elements[i]); i--) {\n    if (Blockly.blockRendering.Types.isSpacer(elem)) {\n      return /** @type {Blockly.blockRendering.InRowSpacer} */ (elem);\n    }\n  }\n  return null;\n};\n\n/**\n * An object containing information about what elements are in the top row of a\n * block as well as sizing information for the top row.\n * Elements in a top row can consist of corners, hats, spacers, and previous\n * connections.\n * After this constructor is called, the row will contain all non-spacer\n * elements it needs.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Row}\n */\nBlockly.blockRendering.TopRow = function(constants) {\n  Blockly.blockRendering.TopRow.superClass_.constructor.call(this, constants);\n\n  this.type |= Blockly.blockRendering.Types.TOP_ROW;\n\n  /**\n   * The starting point for drawing the row, in the y direction.\n   * This allows us to draw hats and similar shapes that don't start at the\n   * origin. Must be non-negative (see #2820).\n   * @package\n   * @type {number}\n   */\n  this.capline = 0;\n\n  /**\n   * How much the row extends up above its capline.\n   * @type {number}\n   */\n  this.ascenderHeight = 0;\n\n  /**\n   * Whether the block has a previous connection.\n   * @package\n   * @type {boolean}\n   */\n  this.hasPreviousConnection = false;\n\n  /**\n   * The previous connection on the block, if any.\n   * @type {Blockly.blockRendering.PreviousConnection}\n   */\n  this.connection = null;\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.TopRow,\n    Blockly.blockRendering.Row);\n\n/**\n * Returns whether or not the top row has a left square corner.\n * @param {!Blockly.BlockSvg} block The block whose top row this represents.\n * @return {boolean} Whether or not the top row has a left square corner.\n */\nBlockly.blockRendering.TopRow.prototype.hasLeftSquareCorner = function(block) {\n  var hasHat = (block.hat ?\n      block.hat === 'cap' : this.constants_.ADD_START_HATS) &&\n      !block.outputConnection && !block.previousConnection;\n  var prevBlock = block.getPreviousBlock();\n\n  return !!block.outputConnection ||\n      hasHat || (prevBlock ? prevBlock.getNextBlock() == block : false);\n};\n\n/**\n * Returns whether or not the top row has a right square corner.\n * @param {!Blockly.BlockSvg} _block The block whose top row this represents.\n * @return {boolean} Whether or not the top row has a right square corner.\n */\nBlockly.blockRendering.TopRow.prototype.hasRightSquareCorner = function(\n    _block) {\n  return true;\n};\n\n/**\n * @override\n */\nBlockly.blockRendering.TopRow.prototype.measure = function() {\n  var height = 0;\n  var width = 0;\n  var ascenderHeight = 0;\n  for (var e = 0, elem; (elem = this.elements[e]); e++) {\n    width += elem.width;\n    if (!(Blockly.blockRendering.Types.isSpacer(elem))) {\n      if (Blockly.blockRendering.Types.isHat(elem)) {\n        ascenderHeight = Math.max(ascenderHeight, elem.ascenderHeight);\n      } else {\n        height = Math.max(height, elem.height);\n      }\n    }\n  }\n  this.width = Math.max(this.minWidth, width);\n  this.height = Math.max(this.minHeight, height) + ascenderHeight;\n  this.ascenderHeight = ascenderHeight;\n  this.capline = this.ascenderHeight;\n  this.widthWithConnectedBlocks = this.width;\n};\n\n/**\n * @override\n */\nBlockly.blockRendering.TopRow.prototype.startsWithElemSpacer = function() {\n  return false;\n};\n\n/**\n * @override\n */\nBlockly.blockRendering.TopRow.prototype.endsWithElemSpacer = function() {\n  return false;\n};\n\n/**\n * An object containing information about what elements are in the bottom row of\n * a block as well as spacing information for the top row.\n * Elements in a bottom row can consist of corners, spacers and next\n * connections.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Row}\n */\nBlockly.blockRendering.BottomRow = function(constants) {\n  Blockly.blockRendering.BottomRow.superClass_.constructor.call(this,\n      constants);\n  this.type |= Blockly.blockRendering.Types.BOTTOM_ROW;\n\n  /**\n   * Whether this row has a next connection.\n   * @package\n   * @type {boolean}\n   */\n  this.hasNextConnection = false;\n\n  /**\n   * The next connection on the row, if any.\n   * @package\n   * @type {Blockly.blockRendering.NextConnection}\n   */\n  this.connection = null;\n\n  /**\n   * The amount that the bottom of the block extends below the horizontal edge,\n   * e.g. because of a next connection.  Must be non-negative (see #2820).\n   * @package\n   * @type {number}\n   */\n  this.descenderHeight = 0;\n\n  /**\n   * The Y position of the bottom edge of the block, relative to the origin\n   * of the block rendering.\n   * @type {number}\n   */\n  this.baseline = 0;\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.BottomRow,\n    Blockly.blockRendering.Row);\n\n/**\n * Returns whether or not the bottom row has a left square corner.\n * @param {!Blockly.BlockSvg} block The block whose bottom row this represents.\n * @return {boolean} Whether or not the bottom row has a left square corner.\n */\nBlockly.blockRendering.BottomRow.prototype.hasLeftSquareCorner = function(\n    block) {\n  return !!block.outputConnection || !!block.getNextBlock();\n};\n\n/**\n * Returns whether or not the bottom row has a right square corner.\n * @param {!Blockly.BlockSvg} _block The block whose bottom row this represents.\n * @return {boolean} Whether or not the bottom row has a right square corner.\n */\nBlockly.blockRendering.BottomRow.prototype.hasRightSquareCorner = function(\n    _block) {\n  return true;\n};\n\n/**\n * @override\n */\nBlockly.blockRendering.BottomRow.prototype.measure = function() {\n  var height = 0;\n  var width = 0;\n  var descenderHeight = 0;\n  for (var e = 0, elem; (elem = this.elements[e]); e++) {\n    width += elem.width;\n    if (!(Blockly.blockRendering.Types.isSpacer(elem))) {\n      // Note: this assumes that next connections have *only* descenderHeight,\n      // with no height above the baseline.\n      if (Blockly.blockRendering.Types.isNextConnection(elem)) {\n        descenderHeight = Math.max(descenderHeight, elem.height);\n      } else {\n        height = Math.max(height, elem.height);\n      }\n    }\n  }\n  this.width = Math.max(this.minWidth, width);\n  this.height = Math.max(this.minHeight, height) + descenderHeight;\n  this.descenderHeight = descenderHeight;\n  this.widthWithConnectedBlocks = this.width;\n};\n\n/**\n * @override\n */\nBlockly.blockRendering.BottomRow.prototype.startsWithElemSpacer = function() {\n  return false;\n};\n\n/**\n * @override\n */\nBlockly.blockRendering.BottomRow.prototype.endsWithElemSpacer = function() {\n  return false;\n};\n\n/**\n * An object containing information about a spacer between two rows.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {number} height The height of the spacer.\n * @param {number} width The width of the spacer.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Row}\n */\nBlockly.blockRendering.SpacerRow = function(constants, height, width) {\n  Blockly.blockRendering.SpacerRow.superClass_.constructor.call(this,\n      constants);\n  this.type |= Blockly.blockRendering.Types.SPACER |\n      Blockly.blockRendering.Types.BETWEEN_ROW_SPACER;\n  this.width = width;\n  this.height = height;\n  this.followsStatement = false;\n  this.widthWithConnectedBlocks = 0;\n  this.elements = [\n    new Blockly.blockRendering.InRowSpacer(this.constants_, width)];\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.SpacerRow,\n    Blockly.blockRendering.Row);\n\n/**\n * @override\n */\nBlockly.blockRendering.SpacerRow.prototype.measure = function() {\n  // NOP.  Width and height were set at creation.\n};\n\n/**\n * An object containing information about a row that holds one or more inputs.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Row}\n */\nBlockly.blockRendering.InputRow = function(constants) {\n  Blockly.blockRendering.InputRow.superClass_.constructor.call(this, constants);\n  this.type |= Blockly.blockRendering.Types.INPUT_ROW;\n\n  /**\n   * The total width of all blocks connected to this row.\n   * @type {number}\n   * @package\n   */\n  this.connectedBlockWidths = 0;\n};\nBlockly.utils.object.inherits(Blockly.blockRendering.InputRow,\n    Blockly.blockRendering.Row);\n\n/**\n * Inspect all subcomponents and populate all size properties on the row.\n * @package\n */\nBlockly.blockRendering.InputRow.prototype.measure = function() {\n  this.width = this.minWidth;\n  this.height = this.minHeight;\n  var connectedBlockWidths = 0;\n  for (var e = 0, elem; (elem = this.elements[e]); e++) {\n    this.width += elem.width;\n    if (Blockly.blockRendering.Types.isInput(elem)) {\n      if (Blockly.blockRendering.Types.isStatementInput(elem)) {\n        connectedBlockWidths += elem.connectedBlockWidth;\n      } else if (Blockly.blockRendering.Types.isExternalInput(elem) &&\n          elem.connectedBlockWidth != 0) {\n        connectedBlockWidths += (elem.connectedBlockWidth -\n          elem.connectionWidth);\n      }\n    }\n    if (!(Blockly.blockRendering.Types.isSpacer(elem))) {\n      this.height = Math.max(this.height, elem.height);\n    }\n  }\n  this.connectedBlockWidths = connectedBlockWidths;\n  this.widthWithConnectedBlocks = this.width + connectedBlockWidths;\n};\n\n/**\n * @override\n */\nBlockly.blockRendering.InputRow.prototype.endsWithElemSpacer = function() {\n  return !this.hasExternalInput && !this.hasStatement;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for graphically rendering a block as SVG.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.blockRendering.RenderInfo');\n\ngoog.require('Blockly.blockRendering.BottomRow');\ngoog.require('Blockly.blockRendering.ExternalValueInput');\ngoog.require('Blockly.blockRendering.Hat');\ngoog.require('Blockly.blockRendering.InlineInput');\ngoog.require('Blockly.blockRendering.InRowSpacer');\ngoog.require('Blockly.blockRendering.InputRow');\ngoog.require('Blockly.blockRendering.Measurable');\ngoog.require('Blockly.blockRendering.NextConnection');\ngoog.require('Blockly.blockRendering.OutputConnection');\ngoog.require('Blockly.blockRendering.PreviousConnection');\ngoog.require('Blockly.blockRendering.RoundCorner');\ngoog.require('Blockly.blockRendering.Row');\ngoog.require('Blockly.blockRendering.SpacerRow');\ngoog.require('Blockly.blockRendering.StatementInput');\ngoog.require('Blockly.blockRendering.SquareCorner');\ngoog.require('Blockly.blockRendering.TopRow');\ngoog.require('Blockly.blockRendering.Types');\ngoog.require('Blockly.constants');\n\n\n/**\n * An object containing all sizing information needed to draw this block.\n *\n * This measure pass does not propagate changes to the block (although fields\n * may choose to rerender when getSize() is called).  However, calling it\n * repeatedly may be expensive.\n *\n * @param {!Blockly.blockRendering.Renderer} renderer The renderer in use.\n * @param {!Blockly.BlockSvg} block The block to measure.\n * @constructor\n * @package\n */\nBlockly.blockRendering.RenderInfo = function(renderer, block) {\n  this.block_ = block;\n\n  /**\n   * The block renderer in use.\n   * @type {!Blockly.blockRendering.Renderer}\n   * @protected\n   */\n  this.renderer_ = renderer;\n\n  /**\n   * The renderer's constant provider.\n   * @type {!Blockly.blockRendering.ConstantProvider}\n   * @protected\n   */\n  this.constants_ = this.renderer_.getConstants();\n\n  /**\n   * A measurable representing the output connection if the block has one.\n   * Otherwise null.\n   * @type {Blockly.blockRendering.OutputConnection}\n   */\n  this.outputConnection = !block.outputConnection ? null :\n      new Blockly.blockRendering.OutputConnection(\n          this.constants_,\n          /** @type {Blockly.RenderedConnection} */(block.outputConnection));\n\n  /**\n   * Whether the block should be rendered as a single line, either because it's\n   * inline or because it has been collapsed.\n   * @type {boolean}\n   */\n  this.isInline = block.getInputsInline() && !block.isCollapsed();\n\n  /**\n   * Whether the block is collapsed.\n   * @type {boolean}\n   */\n  this.isCollapsed = block.isCollapsed();\n\n  /**\n   * Whether the block is an insertion marker.  Insertion markers are the same\n   * shape as normal blocks, but don't show fields.\n   * @type {boolean}\n   */\n  this.isInsertionMarker = block.isInsertionMarker();\n\n  /**\n   * True if the block should be rendered right-to-left.\n   * @type {boolean}\n   */\n  this.RTL = block.RTL;\n\n  /**\n   * The height of the rendered block, including child blocks.\n   * @type {number}\n   */\n  this.height = 0;\n\n  /**\n   * The width of the rendered block, including child blocks.\n   * @type {number}\n   */\n  this.widthWithChildren = 0;\n\n  /**\n   * The width of the rendered block, excluding child blocks.  This is the right\n   * edge of the block when rendered LTR.\n   * @type {number}\n   */\n  this.width = 0;\n\n  /**\n   *\n   * @type {number}\n   */\n  this.statementEdge = 0;\n\n  /**\n   * An array of Row objects containing sizing information.\n   * @type {!Array.<!Blockly.blockRendering.Row>}\n   */\n  this.rows = [];\n\n  /**\n   * An array of input rows on the block.\n   * @type {!Array.<!Blockly.blockRendering.InputRow>}\n   */\n  this.inputRows = [];\n\n  /**\n   * An array of measurable objects containing hidden icons.\n   * @type {!Array.<!Blockly.blockRendering.Icon>}\n   */\n  this.hiddenIcons = [];\n\n  /**\n   * An object with rendering information about the top row of the block.\n   * @type {!Blockly.blockRendering.TopRow}\n   */\n  this.topRow = new Blockly.blockRendering.TopRow(this.constants_);\n\n  /**\n   * An object with rendering information about the bottom row of the block.\n   * @type {!Blockly.blockRendering.BottomRow}\n   */\n  this.bottomRow = new Blockly.blockRendering.BottomRow(this.constants_);\n\n  // The position of the start point for drawing, relative to the block's\n  // location.\n  this.startX = 0;\n  this.startY = 0;\n};\n\n/**\n * Get the block renderer in use.\n * @return {!Blockly.blockRendering.Renderer} The block renderer in use.\n * @package\n */\nBlockly.blockRendering.RenderInfo.prototype.getRenderer = function() {\n  return this.renderer_;\n};\n\n/**\n * Populate and return an object containing all sizing information needed to\n * draw this block.\n *\n * This measure pass does not propagate changes to the block (although fields\n * may choose to rerender when getSize() is called).  However, calling it\n * repeatedly may be expensive.\n *\n * @package\n */\nBlockly.blockRendering.RenderInfo.prototype.measure = function() {\n  this.createRows_();\n  this.addElemSpacing_();\n  this.addRowSpacing_();\n  this.computeBounds_();\n  this.alignRowElements_();\n  this.finalize_();\n};\n\n/**\n * Create rows of Measurable objects representing all renderable parts of the\n * block.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.createRows_ = function() {\n  this.populateTopRow_();\n  this.rows.push(this.topRow);\n  var activeRow = new Blockly.blockRendering.InputRow(this.constants_);\n  this.inputRows.push(activeRow);\n\n  // Icons always go on the first row, before anything else.\n  var icons = this.block_.getIcons();\n  if (icons.length) {\n    for (var i = 0, icon; (icon = icons[i]); i++) {\n      var iconInfo = new Blockly.blockRendering.Icon(this.constants_, icon);\n      if (this.isCollapsed && icon.collapseHidden) {\n        this.hiddenIcons.push(iconInfo);\n      } else {\n        activeRow.elements.push(iconInfo);\n      }\n    }\n  }\n\n  var lastInput = null;\n  // Loop across all of the inputs on the block, creating objects for anything\n  // that needs to be rendered and breaking the block up into visual rows.\n  for (var i = 0, input; (input = this.block_.inputList[i]); i++) {\n    if (!input.isVisible()) {\n      continue;\n    }\n    if (this.shouldStartNewRow_(input, lastInput)) {\n      // Finish this row and create a new one.\n      this.rows.push(activeRow);\n      activeRow = new Blockly.blockRendering.InputRow(this.constants_);\n      this.inputRows.push(activeRow);\n    }\n\n    // All of the fields in an input go on the same row.\n    for (var j = 0, field; (field = input.fieldRow[j]); j++) {\n      activeRow.elements.push(\n          new Blockly.blockRendering.Field(this.constants_, field, input));\n    }\n    this.addInput_(input, activeRow);\n    lastInput = input;\n  }\n\n  if (this.isCollapsed) {\n    activeRow.hasJaggedEdge = true;\n    activeRow.elements.push(\n        new Blockly.blockRendering.JaggedEdge(this.constants_));\n  }\n\n  if (activeRow.elements.length || activeRow.hasDummyInput) {\n    this.rows.push(activeRow);\n  }\n  this.populateBottomRow_();\n  this.rows.push(this.bottomRow);\n};\n\n/**\n * Create all non-spacer elements that belong on the top row.\n * @package\n */\nBlockly.blockRendering.RenderInfo.prototype.populateTopRow_ = function() {\n  var hasPrevious = !!this.block_.previousConnection;\n  var hasHat = (this.block_.hat ?\n    this.block_.hat === 'cap' : this.constants_.ADD_START_HATS) &&\n    !this.outputConnection && !hasPrevious;\n  var leftSquareCorner = this.topRow.hasLeftSquareCorner(this.block_);\n\n  if (leftSquareCorner) {\n    this.topRow.elements.push(\n        new Blockly.blockRendering.SquareCorner(this.constants_));\n  } else {\n    this.topRow.elements.push(\n        new Blockly.blockRendering.RoundCorner(this.constants_));\n  }\n\n  if (hasHat) {\n    var hat = new Blockly.blockRendering.Hat(this.constants_);\n    this.topRow.elements.push(hat);\n    this.topRow.capline = hat.ascenderHeight;\n  } else if (hasPrevious) {\n    this.topRow.hasPreviousConnection = true;\n    this.topRow.connection = new Blockly.blockRendering.PreviousConnection(\n        this.constants_,\n        /** @type {Blockly.RenderedConnection} */\n        (this.block_.previousConnection));\n    this.topRow.elements.push(this.topRow.connection);\n  }\n\n  var precedesStatement = this.block_.inputList.length &&\n      this.block_.inputList[0].type == Blockly.NEXT_STATEMENT;\n\n  // This is the minimum height for the row. If one of its elements has a\n  // greater height it will be overwritten in the compute pass.\n  if (precedesStatement && !this.block_.isCollapsed()) {\n    this.topRow.minHeight =\n        this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT;\n  } else {\n    this.topRow.minHeight = this.constants_.TOP_ROW_MIN_HEIGHT;\n  }\n\n  var rightSquareCorner = this.topRow.hasRightSquareCorner(this.block_);\n\n  if (rightSquareCorner) {\n    this.topRow.elements.push(\n        new Blockly.blockRendering.SquareCorner(this.constants_, 'right'));\n  } else {\n    this.topRow.elements.push(\n        new Blockly.blockRendering.RoundCorner(this.constants_, 'right'));\n  }\n};\n\n/**\n * Create all non-spacer elements that belong on the bottom row.\n * @package\n */\nBlockly.blockRendering.RenderInfo.prototype.populateBottomRow_ = function() {\n  this.bottomRow.hasNextConnection = !!this.block_.nextConnection;\n\n  var followsStatement =\n      this.block_.inputList.length &&\n      this.block_.inputList[this.block_.inputList.length - 1]\n          .type == Blockly.NEXT_STATEMENT;\n\n  // This is the minimum height for the row. If one of its elements has a\n  // greater height it will be overwritten in the compute pass.\n  if (followsStatement) {\n    this.bottomRow.minHeight =\n      this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT;\n  } else {\n    this.bottomRow.minHeight = this.constants_.BOTTOM_ROW_MIN_HEIGHT;\n  }\n\n  var leftSquareCorner = this.bottomRow.hasLeftSquareCorner(this.block_);\n\n  if (leftSquareCorner) {\n    this.bottomRow.elements.push(\n        new Blockly.blockRendering.SquareCorner(this.constants_));\n  } else {\n    this.bottomRow.elements.push(\n        new Blockly.blockRendering.RoundCorner(this.constants_));\n  }\n\n  if (this.bottomRow.hasNextConnection) {\n    this.bottomRow.connection = new Blockly.blockRendering.NextConnection(\n        this.constants_,\n        /** @type {Blockly.RenderedConnection} */ (this.block_.nextConnection));\n    this.bottomRow.elements.push(this.bottomRow.connection);\n  }\n\n  var rightSquareCorner = this.bottomRow.hasRightSquareCorner(this.block_);\n\n  if (rightSquareCorner) {\n    this.bottomRow.elements.push(\n        new Blockly.blockRendering.SquareCorner(this.constants_, 'right'));\n  } else {\n    this.bottomRow.elements.push(\n        new Blockly.blockRendering.RoundCorner(this.constants_, 'right'));\n  }\n};\n\n/**\n * Add an input element to the active row, if needed, and record the type of the\n * input on the row.\n * @param {!Blockly.Input} input The input to record information about.\n * @param {!Blockly.blockRendering.Row} activeRow The row that is currently being\n *     populated.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.addInput_ = function(input, activeRow) {\n  // Non-dummy inputs have visual representations onscreen.\n  if (this.isInline && input.type == Blockly.INPUT_VALUE) {\n    activeRow.elements.push(\n        new Blockly.blockRendering.InlineInput(this.constants_, input));\n    activeRow.hasInlineInput = true;\n  } else if (input.type == Blockly.NEXT_STATEMENT) {\n    activeRow.elements.push(\n        new Blockly.blockRendering.StatementInput(this.constants_, input));\n    activeRow.hasStatement = true;\n  } else if (input.type == Blockly.INPUT_VALUE) {\n    activeRow.elements.push(\n        new Blockly.blockRendering.ExternalValueInput(this.constants_, input));\n    activeRow.hasExternalInput = true;\n  } else if (input.type == Blockly.DUMMY_INPUT) {\n    // Dummy inputs have no visual representation, but the information is still\n    // important.\n    activeRow.minHeight = Math.max(activeRow.minHeight,\n        input.getSourceBlock() && input.getSourceBlock().isShadow() ?\n        this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT :\n        this.constants_.DUMMY_INPUT_MIN_HEIGHT);\n    activeRow.hasDummyInput = true;\n  }\n  if (activeRow.align == null) {\n    activeRow.align = input.align;\n  }\n};\n\n/**\n * Decide whether to start a new row between the two Blockly.Inputs.\n * @param {!Blockly.Input} input The first input to consider\n * @param {Blockly.Input} lastInput The input that follows.\n * @return {boolean} True if the next input should be rendered on a new row.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.shouldStartNewRow_ = function(input, lastInput) {\n  // If this is the first input, just add to the existing row.\n  // That row is either empty or has some icons in it.\n  if (!lastInput) {\n    return false;\n  }\n  // A statement input or an input following one always gets a new row.\n  if (input.type == Blockly.NEXT_STATEMENT ||\n      lastInput.type == Blockly.NEXT_STATEMENT) {\n    return true;\n  }\n  // Value and dummy inputs get new row if inputs are not inlined.\n  if (input.type == Blockly.INPUT_VALUE || input.type == Blockly.DUMMY_INPUT) {\n    return !this.isInline;\n  }\n  return false;\n};\n\n/**\n * Add horizontal spacing between and around elements within each row.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.addElemSpacing_ = function() {\n  for (var i = 0, row; (row = this.rows[i]); i++) {\n    var oldElems = row.elements;\n    row.elements = [];\n    // No spacing needed before the corner on the top row or the bottom row.\n    if (row.startsWithElemSpacer()) {\n      // There's a spacer before the first element in the row.\n      row.elements.push(new Blockly.blockRendering.InRowSpacer(\n          this.constants_, this.getInRowSpacing_(null, oldElems[0])));\n    }\n    if (!oldElems.length) {\n      continue;\n    }\n    for (var e = 0; e < oldElems.length - 1; e++) {\n      row.elements.push(oldElems[e]);\n      var spacing = this.getInRowSpacing_(oldElems[e], oldElems[e + 1]);\n      row.elements.push(\n          new Blockly.blockRendering.InRowSpacer(this.constants_, spacing));\n    }\n    row.elements.push(oldElems[oldElems.length - 1]);\n    if (row.endsWithElemSpacer()) {\n      // There's a spacer after the last element in the row.\n      row.elements.push(new Blockly.blockRendering.InRowSpacer(\n          this.constants_,\n          this.getInRowSpacing_(oldElems[oldElems.length - 1], null)));\n    }\n  }\n};\n\n/**\n * Calculate the width of a spacer element in a row based on the previous and\n * next elements in that row.  For instance, extra padding is added between two\n * editable fields.\n * @param {Blockly.blockRendering.Measurable} prev The element before the\n *     spacer.\n * @param {Blockly.blockRendering.Measurable} next The element after the spacer.\n * @return {number} The size of the spacing between the two elements.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.getInRowSpacing_ = function(prev, next) {\n  if (!prev) {\n    // Statement input padding.\n    if (next && Blockly.blockRendering.Types.isStatementInput(next)) {\n      return this.constants_.STATEMENT_INPUT_PADDING_LEFT;\n    }\n  }\n  // Between inputs and the end of the row.\n  if (prev && Blockly.blockRendering.Types.isInput(prev) && !next) {\n    if (Blockly.blockRendering.Types.isExternalInput(prev)) {\n      return this.constants_.NO_PADDING;\n    } else if (Blockly.blockRendering.Types.isInlineInput(prev)) {\n      return this.constants_.LARGE_PADDING;\n    } else if (Blockly.blockRendering.Types.isStatementInput(prev)) {\n      return this.constants_.NO_PADDING;\n    }\n  }\n\n  // Spacing between a square corner and a previous or next connection\n  if (prev && Blockly.blockRendering.Types.isLeftSquareCorner(prev) && next) {\n    if (Blockly.blockRendering.Types.isPreviousConnection(next) ||\n        Blockly.blockRendering.Types.isNextConnection(next)) {\n      return next.notchOffset;\n    }\n  }\n\n  // Spacing between a rounded corner and a previous or next connection.\n  if (prev && Blockly.blockRendering.Types.isLeftRoundedCorner(prev) && next) {\n    if (Blockly.blockRendering.Types.isPreviousConnection(next) ||\n      Blockly.blockRendering.Types.isNextConnection(next)) {\n      return next.notchOffset - this.constants_.CORNER_RADIUS;\n    }\n  }\n\n  return this.constants_.MEDIUM_PADDING;\n};\n\n/**\n * Figure out where the right edge of the block and right edge of statement inputs\n * should be placed.\n * @protected\n */\n// TODO: More cleanup.\nBlockly.blockRendering.RenderInfo.prototype.computeBounds_ = function() {\n  var widestStatementRowFields = 0;\n  var blockWidth = 0;\n  var widestRowWithConnectedBlocks = 0;\n  for (var i = 0, row; (row = this.rows[i]); i++) {\n    row.measure();\n    blockWidth = Math.max(blockWidth, row.width);\n    if (row.hasStatement) {\n      var statementInput = row.getLastInput();\n      var innerWidth = row.width - statementInput.width;\n      widestStatementRowFields = Math.max(widestStatementRowFields, innerWidth);\n    }\n    widestRowWithConnectedBlocks =\n        Math.max(widestRowWithConnectedBlocks, row.widthWithConnectedBlocks);\n  }\n\n  this.statementEdge = widestStatementRowFields;\n  this.width = blockWidth;\n\n  for (var i = 0, row; (row = this.rows[i]); i++) {\n    if (row.hasStatement) {\n      row.statementEdge = this.statementEdge;\n    }\n  }\n\n  this.widthWithChildren = Math.max(blockWidth, widestRowWithConnectedBlocks);\n\n  if (this.outputConnection) {\n    this.startX = this.outputConnection.width;\n    this.width += this.outputConnection.width;\n    this.widthWithChildren += this.outputConnection.width;\n  }\n};\n\n/**\n * Extra spacing may be necessary to make sure that the right sides of all\n * rows line up.  This can only be calculated after a first pass to calculate\n * the sizes of all rows.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.alignRowElements_ = function() {\n  for (var i = 0, row; (row = this.rows[i]); i++) {\n    if (row.hasStatement) {\n      this.alignStatementRow_(\n          /** @type {!Blockly.blockRendering.InputRow} */ (row));\n    } else {\n      var currentWidth = row.width;\n      var desiredWidth = this.getDesiredRowWidth_(row);\n      var missingSpace = desiredWidth - currentWidth;\n      if (missingSpace > 0) {\n        this.addAlignmentPadding_(row, missingSpace);\n      }\n      if (Blockly.blockRendering.Types.isTopOrBottomRow(row)) {\n        row.widthWithConnectedBlocks = row.width;\n      }\n    }\n  }\n};\n\n/**\n * Calculate the desired width of an input row.\n * @param {!Blockly.blockRendering.Row} _row The input row.\n * @return {number} The desired width of the input row.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.getDesiredRowWidth_ = function(\n    _row) {\n  return this.width - this.startX;\n};\n\n/**\n * Modify the given row to add the given amount of padding around its fields.\n * The exact location of the padding is based on the alignment property of the\n * last input in the field.\n * @param {Blockly.blockRendering.Row} row The row to add padding to.\n * @param {number} missingSpace How much padding to add.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.addAlignmentPadding_ = function(row,\n    missingSpace) {\n  var firstSpacer = row.getFirstSpacer();\n  var lastSpacer = row.getLastSpacer();\n  if (row.hasExternalInput || row.hasStatement) {\n    row.widthWithConnectedBlocks += missingSpace;\n  }\n\n  // Decide where the extra padding goes.\n  if (row.align == Blockly.ALIGN_LEFT) {\n    // Add padding to the end of the row.\n    lastSpacer.width += missingSpace;\n  } else if (row.align == Blockly.ALIGN_CENTRE) {\n    // Split the padding between the beginning and end of the row.\n    firstSpacer.width += missingSpace / 2;\n    lastSpacer.width += missingSpace / 2;\n  } else if (row.align == Blockly.ALIGN_RIGHT) {\n    // Add padding at the beginning of the row.\n    firstSpacer.width += missingSpace;\n  } else {\n    // Default to left-aligning.\n    lastSpacer.width += missingSpace;\n  }\n  row.width += missingSpace;\n};\n\n/**\n * Align the elements of a statement row based on computed bounds.\n * Unlike other types of rows, statement rows add space in multiple places.\n * @param {!Blockly.blockRendering.InputRow} row The statement row to resize.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.alignStatementRow_ = function(row) {\n  var statementInput = row.getLastInput();\n  var currentWidth = row.width - statementInput.width;\n  var desiredWidth = this.statementEdge;\n  // Add padding before the statement input.\n  var missingSpace = desiredWidth - currentWidth;\n  if (missingSpace > 0) {\n    this.addAlignmentPadding_(row, missingSpace);\n  }\n  // Also widen the statement input to reach to the right side of the\n  // block. Note that this does not add padding.\n  currentWidth = row.width;\n  desiredWidth = this.getDesiredRowWidth_(row);\n  statementInput.width += (desiredWidth - currentWidth);\n  statementInput.height = Math.max(statementInput.height, row.height);\n  row.width += (desiredWidth - currentWidth);\n  row.widthWithConnectedBlocks = Math.max(row.width,\n      this.statementEdge + row.connectedBlockWidths);\n};\n\n/**\n * Add spacers between rows and set their sizes.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.addRowSpacing_ = function() {\n  var oldRows = this.rows;\n  this.rows = [];\n\n  for (var r = 0; r < oldRows.length; r++) {\n    this.rows.push(oldRows[r]);\n    if (r != oldRows.length - 1) {\n      this.rows.push(this.makeSpacerRow_(oldRows[r], oldRows[r + 1]));\n    }\n  }\n};\n\n/**\n * Create a spacer row to go between prev and next, and set its size.\n * @param {!Blockly.blockRendering.Row} prev The previous row.\n * @param {!Blockly.blockRendering.Row} next The next row.\n * @return {!Blockly.blockRendering.SpacerRow} The newly created spacer row.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.makeSpacerRow_ = function(prev, next) {\n  var height = this.getSpacerRowHeight_(prev, next);\n  var width = this.getSpacerRowWidth_(prev, next);\n  var spacer = new Blockly.blockRendering.SpacerRow(\n      this.constants_, height, width);\n  if (prev.hasStatement) {\n    spacer.followsStatement = true;\n  }\n  if (next.hasStatement) {\n    spacer.precedesStatement = true;\n  }\n  return spacer;\n};\n\n/**\n * Calculate the width of a spacer row.\n * @param {!Blockly.blockRendering.Row} _prev The row before the spacer.\n * @param {!Blockly.blockRendering.Row} _next The row after the spacer.\n * @return {number} The desired width of the spacer row between these two rows.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.getSpacerRowWidth_ = function(\n    _prev, _next) {\n  return this.width - this.startX;\n};\n\n/**\n * Calculate the height of a spacer row.\n * @param {!Blockly.blockRendering.Row} _prev The row before the spacer.\n * @param {!Blockly.blockRendering.Row} _next The row after the spacer.\n * @return {number} The desired height of the spacer row between these two rows.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.getSpacerRowHeight_ = function(\n    _prev, _next) {\n  return this.constants_.MEDIUM_PADDING;\n};\n\n/**\n * Calculate the centerline of an element in a rendered row.\n * This base implementation puts the centerline at the middle of the row\n * vertically, with no special cases.  You will likely need extra logic to\n * handle (at minimum) top and bottom rows.\n * @param {!Blockly.blockRendering.Row} row The row containing the element.\n * @param {!Blockly.blockRendering.Measurable} elem The element to place.\n * @return {number} The desired centerline of the given element, as an offset\n *     from the top left of the block.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.getElemCenterline_ = function(row,\n    elem) {\n  if (Blockly.blockRendering.Types.isSpacer(elem)) {\n    return row.yPos + elem.height / 2;\n  }\n  if (Blockly.blockRendering.Types.isBottomRow(row)) {\n    var baseline = row.yPos + row.height - row.descenderHeight;\n    if (Blockly.blockRendering.Types.isNextConnection(elem)) {\n      return baseline + elem.height / 2;\n    }\n    return baseline - elem.height / 2;\n  }\n  if (Blockly.blockRendering.Types.isTopRow(row)) {\n    if (Blockly.blockRendering.Types.isHat(elem)) {\n      return row.capline - elem.height / 2;\n    }\n    return row.capline + elem.height / 2;\n  }\n  return row.yPos + row.height / 2;\n};\n\n/**\n * Record final position information on elements on the given row, for use in\n * drawing.  At minimum this records xPos and centerline on each element.\n * @param {!Blockly.blockRendering.Row} row The row containing the elements.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.recordElemPositions_ = function(\n    row) {\n  var xCursor = row.xPos;\n  for (var j = 0, elem; (elem = row.elements[j]); j++) {\n    // Now that row heights are finalized, make spacers use the row height.\n    if (Blockly.blockRendering.Types.isSpacer(elem)) {\n      elem.height = row.height;\n    }\n    elem.xPos = xCursor;\n    elem.centerline = this.getElemCenterline_(row, elem);\n    xCursor += elem.width;\n  }\n};\n\n/**\n * Make any final changes to the rendering information object.  In particular,\n * store the y position of each row, and record the height of the full block.\n * @protected\n */\nBlockly.blockRendering.RenderInfo.prototype.finalize_ = function() {\n  // Performance note: this could be combined with the draw pass, if the time\n  // that this takes is excessive.  But it shouldn't be, because it only\n  // accesses and sets properties that already exist on the objects.\n  var widestRowWithConnectedBlocks = 0;\n  var yCursor = 0;\n  for (var i = 0, row; (row = this.rows[i]); i++) {\n    row.yPos = yCursor;\n    row.xPos = this.startX;\n    yCursor += row.height;\n\n    widestRowWithConnectedBlocks =\n        Math.max(widestRowWithConnectedBlocks, row.widthWithConnectedBlocks);\n    this.recordElemPositions_(row);\n  }\n  if (this.outputConnection && this.block_.nextConnection &&\n      this.block_.nextConnection.isConnected()) {\n    // Include width of connected block in value to stack width measurement.\n    widestRowWithConnectedBlocks =\n        Math.max(widestRowWithConnectedBlocks,\n            this.block_.nextConnection.targetBlock().getHeightWidth().width);\n  }\n\n  this.widthWithChildren = widestRowWithConnectedBlocks + this.startX;\n\n  this.height = yCursor;\n  this.startY = this.topRow.capline;\n  this.bottomRow.baseline = yCursor - this.bottomRow.descenderHeight;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for graphically rendering a block as SVG.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.blockRendering.Drawer');\n\ngoog.require('Blockly.blockRendering.BottomRow');\ngoog.require('Blockly.blockRendering.InputRow');\ngoog.require('Blockly.blockRendering.Measurable');\ngoog.require('Blockly.blockRendering.RenderInfo');\ngoog.require('Blockly.blockRendering.Row');\ngoog.require('Blockly.blockRendering.SpacerRow');\ngoog.require('Blockly.blockRendering.TopRow');\ngoog.require('Blockly.blockRendering.Types');\ngoog.require('Blockly.utils.svgPaths');\n\n\n/**\n * An object that draws a block based on the given rendering information.\n * @param {!Blockly.BlockSvg} block The block to render.\n * @param {!Blockly.blockRendering.RenderInfo} info An object containing all\n *   information needed to render this block.\n * @package\n * @constructor\n */\nBlockly.blockRendering.Drawer = function(block, info) {\n  this.block_ = block;\n  this.info_ = info;\n  this.topLeft_ = block.getRelativeToSurfaceXY();\n  this.outlinePath_ = '';\n  this.inlinePath_ = '';\n\n  /**\n   * The renderer's constant provider.\n   * @type {!Blockly.blockRendering.ConstantProvider}\n   * @protected\n   */\n  this.constants_ = info.getRenderer().getConstants();\n};\n\n/**\n * Draw the block to the workspace. Here \"drawing\" means setting SVG path\n * elements and moving fields, icons, and connections on the screen.\n *\n * The pieces of the paths are pushed into arrays of \"steps\", which are then\n * joined with spaces and set directly on the block.  This guarantees that\n * the steps are separated by spaces for improved readability, but isn't\n * required.\n * @package\n */\nBlockly.blockRendering.Drawer.prototype.draw = function() {\n  this.hideHiddenIcons_();\n  this.drawOutline_();\n  this.drawInternals_();\n\n  this.block_.pathObject.setPath(this.outlinePath_ + '\\n' + this.inlinePath_);\n  if (this.info_.RTL) {\n    this.block_.pathObject.flipRTL();\n  }\n  if (Blockly.blockRendering.useDebugger) {\n    this.block_.renderingDebugger.drawDebug(this.block_, this.info_);\n  }\n  this.recordSizeOnBlock_();\n};\n\n/**\n * Save sizing information back to the block\n * Most of the rendering information can be thrown away at the end of the\n * render. Anything that needs to be kept around should be set in this function.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.recordSizeOnBlock_ = function() {\n  // This is used when the block is reporting its size to anyone else.\n  // The dark path adds to the size of the block in both X and Y.\n  this.block_.height = this.info_.height;\n  this.block_.width = this.info_.widthWithChildren;\n};\n\n/**\n * Hide icons that were marked as hidden.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.hideHiddenIcons_ = function() {\n  for (var i = 0, iconInfo; (iconInfo = this.info_.hiddenIcons[i]); i++) {\n    iconInfo.icon.iconGroup_.setAttribute('display', 'none');\n  }\n};\n\n/**\n * Create the outline of the block.  This is a single continuous path.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.drawOutline_ = function() {\n  this.drawTop_();\n  for (var r = 1; r < this.info_.rows.length - 1; r++) {\n    var row = this.info_.rows[r];\n    if (row.hasJaggedEdge) {\n      this.drawJaggedEdge_(row);\n    } else if (row.hasStatement) {\n      this.drawStatementInput_(row);\n    } else if (row.hasExternalInput) {\n      this.drawValueInput_(row);\n    } else {\n      this.drawRightSideRow_(row);\n    }\n  }\n  this.drawBottom_();\n  this.drawLeft_();\n};\n\n\n/**\n * Add steps for the top corner of the block, taking into account\n * details such as hats and rounded corners.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.drawTop_ = function() {\n  var topRow = this.info_.topRow;\n  var elements = topRow.elements;\n\n  this.positionPreviousConnection_();\n  this.outlinePath_ +=\n      Blockly.utils.svgPaths.moveBy(topRow.xPos, this.info_.startY);\n  for (var i = 0, elem; (elem = elements[i]); i++) {\n    if (Blockly.blockRendering.Types.isLeftRoundedCorner(elem)) {\n      this.outlinePath_ +=\n          this.constants_.OUTSIDE_CORNERS.topLeft;\n    } else if (Blockly.blockRendering.Types.isRightRoundedCorner(elem)) {\n      this.outlinePath_ +=\n          this.constants_.OUTSIDE_CORNERS.topRight;\n    } else if (Blockly.blockRendering.Types.isPreviousConnection(elem)) {\n      this.outlinePath_ += elem.shape.pathLeft;\n    } else if (Blockly.blockRendering.Types.isHat(elem)) {\n      this.outlinePath_ += this.constants_.START_HAT.path;\n    } else if (Blockly.blockRendering.Types.isSpacer(elem)) {\n      this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis('h', elem.width);\n    }\n    // No branch for a square corner, because it's a no-op.\n  }\n  this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis('v', topRow.height);\n};\n\n/**\n * Add steps for the jagged edge of a row on a collapsed block.\n * @param {!Blockly.blockRendering.Row} row The row to draw the side of.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.drawJaggedEdge_ = function(row) {\n  var remainder =\n      row.height - this.constants_.JAGGED_TEETH.height;\n  this.outlinePath_ += this.constants_.JAGGED_TEETH.path +\n      Blockly.utils.svgPaths.lineOnAxis('v', remainder);\n};\n\n/**\n * Add steps for an external value input, rendered as a notch in the side\n * of the block.\n * @param {!Blockly.blockRendering.Row} row The row that this input\n *     belongs to.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.drawValueInput_ = function(row) {\n  var input = row.getLastInput();\n  this.positionExternalValueConnection_(row);\n\n  var pathDown = (typeof input.shape.pathDown == \"function\") ?\n      input.shape.pathDown(input.height) :\n      input.shape.pathDown;\n\n  this.outlinePath_ +=\n      Blockly.utils.svgPaths.lineOnAxis('H', input.xPos + input.width) +\n      pathDown +\n      Blockly.utils.svgPaths.lineOnAxis('v', row.height - input.connectionHeight);\n};\n\n\n/**\n * Add steps for a statement input.\n * @param {!Blockly.blockRendering.Row} row The row that this input\n *     belongs to.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.drawStatementInput_ = function(row) {\n  var input = row.getLastInput();\n  // Where to start drawing the notch, which is on the right side in LTR.\n  var x = input.xPos + input.notchOffset + input.shape.width;\n\n  var innerTopLeftCorner =\n      input.shape.pathRight +\n      Blockly.utils.svgPaths.lineOnAxis('h',\n          -(input.notchOffset - this.constants_.INSIDE_CORNERS.width)) +\n      this.constants_.INSIDE_CORNERS.pathTop;\n\n  var innerHeight =\n      row.height - (2 * this.constants_.INSIDE_CORNERS.height);\n\n  this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis('H', x) +\n      innerTopLeftCorner +\n      Blockly.utils.svgPaths.lineOnAxis('v', innerHeight) +\n      this.constants_.INSIDE_CORNERS.pathBottom +\n      Blockly.utils.svgPaths.lineOnAxis('H', row.xPos + row.width);\n\n  this.positionStatementInputConnection_(row);\n};\n\n/**\n * Add steps for the right side of a row that does not have value or\n * statement input connections.\n * @param {!Blockly.blockRendering.Row} row The row to draw the\n *     side of.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.drawRightSideRow_ = function(row) {\n  this.outlinePath_ +=\n      Blockly.utils.svgPaths.lineOnAxis('V', row.yPos + row.height);\n};\n\n\n/**\n * Add steps for the bottom edge of a block, possibly including a notch\n * for the next connection\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.drawBottom_ = function() {\n  var bottomRow = this.info_.bottomRow;\n  var elems = bottomRow.elements;\n  this.positionNextConnection_();\n\n  var rightCornerYOffset = 0;\n  var outlinePath = '';\n  for (var i = elems.length - 1, elem; (elem = elems[i]); i--) {\n    if (Blockly.blockRendering.Types.isNextConnection(elem)) {\n      outlinePath += elem.shape.pathRight;\n    } else if (Blockly.blockRendering.Types.isLeftSquareCorner(elem)) {\n      outlinePath += Blockly.utils.svgPaths.lineOnAxis('H', bottomRow.xPos);\n    } else if (Blockly.blockRendering.Types.isLeftRoundedCorner(elem)) {\n      outlinePath += this.constants_.OUTSIDE_CORNERS.bottomLeft;\n    } else if (Blockly.blockRendering.Types.isRightRoundedCorner(elem)) {\n      outlinePath += this.constants_.OUTSIDE_CORNERS.bottomRight;\n      rightCornerYOffset = this.constants_.OUTSIDE_CORNERS.rightHeight;\n    } else if (Blockly.blockRendering.Types.isSpacer(elem)) {\n      outlinePath += Blockly.utils.svgPaths.lineOnAxis('h', elem.width * -1);\n    }\n  }\n\n  this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis('V',\n      bottomRow.baseline - rightCornerYOffset);\n  this.outlinePath_ += outlinePath;\n};\n\n/**\n * Add steps for the left side of the block, which may include an output\n * connection\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.drawLeft_ = function() {\n  var outputConnection = this.info_.outputConnection;\n  this.positionOutputConnection_();\n\n  if (outputConnection) {\n    var tabBottom = outputConnection.connectionOffsetY +\n        outputConnection.height;\n    var pathUp = (typeof outputConnection.shape.pathUp == \"function\") ?\n        outputConnection.shape.pathUp(outputConnection.height) :\n        outputConnection.shape.pathUp;\n\n    // Draw a line up to the bottom of the tab.\n    this.outlinePath_ +=\n        Blockly.utils.svgPaths.lineOnAxis('V', tabBottom) +\n        pathUp;\n  }\n  // Close off the path.  This draws a vertical line up to the start of the\n  // block's path, which may be either a rounded or a sharp corner.\n  this.outlinePath_ += 'z';\n};\n\n/**\n * Draw the internals of the block: inline inputs, fields, and icons.  These do\n * not depend on the outer path for placement.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.drawInternals_ = function() {\n  for (var i = 0, row; (row = this.info_.rows[i]); i++) {\n    for (var j = 0, elem; (elem = row.elements[j]); j++) {\n      if (Blockly.blockRendering.Types.isInlineInput(elem)) {\n        this.drawInlineInput_(\n            /** @type {!Blockly.blockRendering.InlineInput} */ (elem));\n      } else if (Blockly.blockRendering.Types.isIcon(elem) ||\n          Blockly.blockRendering.Types.isField(elem)) {\n        this.layoutField_(\n            /** @type {!Blockly.blockRendering.Field|!Blockly.blockRendering.Icon} */\n            (elem));\n      }\n    }\n  }\n};\n\n/**\n * Push a field or icon's new position to its SVG root.\n * @param {!Blockly.blockRendering.Icon|!Blockly.blockRendering.Field} fieldInfo\n *     The rendering information for the field or icon.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.layoutField_ = function(fieldInfo) {\n  if (Blockly.blockRendering.Types.isField(fieldInfo)) {\n    var svgGroup = fieldInfo.field.getSvgRoot();\n  } else if (Blockly.blockRendering.Types.isIcon(fieldInfo)) {\n    var svgGroup = fieldInfo.icon.iconGroup_;\n  }\n\n  var yPos = fieldInfo.centerline - fieldInfo.height / 2;\n  var xPos = fieldInfo.xPos;\n  var scale = '';\n  if (this.info_.RTL) {\n    xPos = -(xPos + fieldInfo.width);\n    if (fieldInfo.flipRtl) {\n      xPos += fieldInfo.width;\n      scale = 'scale(-1 1)';\n    }\n  }\n  if (Blockly.blockRendering.Types.isIcon(fieldInfo)) {\n    svgGroup.setAttribute('display', 'block');\n    svgGroup.setAttribute('transform', 'translate(' + xPos + ',' + yPos + ')');\n    fieldInfo.icon.computeIconLocation();\n  } else {\n    svgGroup.setAttribute(\n        'transform', 'translate(' + xPos + ',' + yPos + ')' + scale);\n  }\n\n  if (this.info_.isInsertionMarker) {\n    // Fields and icons are invisible on insertion marker.  They still have to\n    // be rendered so that the block can be sized correctly.\n    svgGroup.setAttribute('display', 'none');\n  }\n};\n\n/**\n * Add steps for an inline input.\n * @param {!Blockly.blockRendering.InlineInput} input The information about the\n * input to render.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.drawInlineInput_ = function(input) {\n  var width = input.width;\n  var height = input.height;\n  var yPos = input.centerline - height / 2;\n\n  var connectionTop = input.connectionOffsetY;\n  var connectionBottom = input.connectionHeight + connectionTop;\n  var connectionRight = input.xPos + input.connectionWidth;\n\n  this.inlinePath_ += Blockly.utils.svgPaths.moveTo(connectionRight, yPos) +\n      Blockly.utils.svgPaths.lineOnAxis('v', connectionTop) +\n      input.shape.pathDown +\n      Blockly.utils.svgPaths.lineOnAxis('v', height - connectionBottom) +\n      Blockly.utils.svgPaths.lineOnAxis('h', width - input.connectionWidth) +\n      Blockly.utils.svgPaths.lineOnAxis('v', -height) +\n      'z';\n\n  this.positionInlineInputConnection_(input);\n};\n\n/**\n * Position the connection on an inline value input, taking into account\n * RTL and the small gap between the parent block and child block which lets the\n * parent block's dark path show through.\n * @param {Blockly.blockRendering.InlineInput} input The information about\n * the input that the connection is on.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.positionInlineInputConnection_ = function(input) {\n  var yPos = input.centerline - input.height / 2;\n  // Move the connection.\n  if (input.connectionModel) {\n    // xPos already contains info about startX\n    var connX = input.xPos + input.connectionWidth + input.connectionOffsetX;\n    if (this.info_.RTL) {\n      connX *= -1;\n    }\n    input.connectionModel.setOffsetInBlock(connX,\n        yPos + input.connectionOffsetY);\n  }\n};\n\n/**\n * Position the connection on a statement input, taking into account\n * RTL and the small gap between the parent block and child block which lets the\n * parent block's dark path show through.\n * @param {!Blockly.blockRendering.Row} row The row that the connection is on.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.positionStatementInputConnection_ = function(row) {\n  var input = row.getLastInput();\n  if (input.connectionModel) {\n    var connX = row.xPos + row.statementEdge + input.notchOffset;\n    if (this.info_.RTL) {\n      connX *= -1;\n    }\n    input.connectionModel.setOffsetInBlock(connX, row.yPos);\n  }\n};\n\n/**\n * Position the connection on an external value input, taking into account\n * RTL and the small gap between the parent block and child block which lets the\n * parent block's dark path show through.\n * @param {!Blockly.blockRendering.Row} row The row that the connection is on.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.positionExternalValueConnection_ = function(row) {\n  var input = row.getLastInput();\n  if (input.connectionModel) {\n    var connX = row.xPos + row.width;\n    if (this.info_.RTL) {\n      connX *= -1;\n    }\n    input.connectionModel.setOffsetInBlock(connX, row.yPos);\n  }\n};\n\n/**\n * Position the previous connection on a block.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.positionPreviousConnection_ = function() {\n  var topRow = this.info_.topRow;\n  if (topRow.connection) {\n    var x = topRow.xPos + topRow.notchOffset;\n    var connX = (this.info_.RTL ? -x : x);\n    topRow.connection.connectionModel.setOffsetInBlock(connX, 0);\n  }\n};\n\n/**\n * Position the next connection on a block.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.positionNextConnection_ = function() {\n  var bottomRow = this.info_.bottomRow;\n\n  if (bottomRow.connection) {\n    var connInfo = bottomRow.connection;\n    var x = connInfo.xPos; // Already contains info about startX\n    var connX = (this.info_.RTL ? -x : x);\n    connInfo.connectionModel.setOffsetInBlock(connX, bottomRow.baseline);\n  }\n};\n\n/**\n * Position the output connection on a block.\n * @protected\n */\nBlockly.blockRendering.Drawer.prototype.positionOutputConnection_ = function() {\n  if (this.info_.outputConnection) {\n    var x = this.info_.startX + this.info_.outputConnection.connectionOffsetX;\n    var connX = this.info_.RTL ? -x : x;\n    this.block_.outputConnection.setOffsetInBlock(connX,\n        this.info_.outputConnection.connectionOffsetY);\n  }\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that owns a block's rendering SVG elements.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n\n'use strict';\n\ngoog.provide('Blockly.blockRendering.PathObject');\n\ngoog.require('Blockly.blockRendering.ConstantProvider');\ngoog.require('Blockly.blockRendering.IPathObject');\ngoog.require('Blockly.Theme');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * An object that handles creating and setting each of the SVG elements\n * used by the renderer.\n * @param {!SVGElement} root The root SVG element.\n * @param {!Blockly.Theme.BlockStyle} style The style object to use for\n *     colouring.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The renderer's\n *     constants.\n * @constructor\n * @implements {Blockly.blockRendering.IPathObject}\n * @package\n */\nBlockly.blockRendering.PathObject = function(root, style, constants) {\n  /**\n   * The renderer's constant provider.\n   * @type {!Blockly.blockRendering.ConstantProvider}\n   * @package\n   */\n  this.constants = constants;\n\n  this.svgRoot = root;\n\n  /**\n   * The primary path of the block.\n   * @type {!SVGElement}\n   * @package\n   */\n  this.svgPath = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH,\n      {'class': 'blocklyPath'}, this.svgRoot);\n\n  /**\n   * The style object to use when colouring block paths.\n   * @type {!Blockly.Theme.BlockStyle}\n   * @package\n   */\n  this.style = style;\n\n  /**\n   * Holds the cursors svg element when the cursor is attached to the block.\n   * This is null if there is no cursor on the block.\n   * @type {SVGElement}\n   * @package\n   */\n  this.cursorSvg = null;\n\n  /**\n   * Holds the markers svg element when the marker is attached to the block.\n   * This is null if there is no marker on the block.\n   * @type {SVGElement}\n   * @package\n   */\n  this.markerSvg = null;\n};\n\n/**\n * Set the path generated by the renderer onto the respective SVG element.\n * @param {string} pathString The path.\n * @package\n */\nBlockly.blockRendering.PathObject.prototype.setPath = function(pathString) {\n  this.svgPath.setAttribute('d', pathString);\n};\n\n/**\n * Flip the SVG paths in RTL.\n * @package\n */\nBlockly.blockRendering.PathObject.prototype.flipRTL = function() {\n  // Mirror the block's path.\n  this.svgPath.setAttribute('transform', 'scale(-1 1)');\n};\n\n/**\n * Add the cursor svg to this block's svg group.\n * @param {SVGElement} cursorSvg The svg root of the cursor to be added to the\n *     block svg group.\n * @package\n */\nBlockly.blockRendering.PathObject.prototype.setCursorSvg = function(cursorSvg) {\n  if (!cursorSvg) {\n    this.cursorSvg = null;\n    return;\n  }\n\n  this.svgRoot.appendChild(cursorSvg);\n  this.cursorSvg = cursorSvg;\n};\n\n/**\n * Add the marker svg to this block's svg group.\n * @param {SVGElement} markerSvg The svg root of the marker to be added to the\n *     block svg group.\n * @package\n */\nBlockly.blockRendering.PathObject.prototype.setMarkerSvg = function(markerSvg) {\n  if (!markerSvg) {\n    this.markerSvg = null;\n    return;\n  }\n\n  if (this.cursorSvg) {\n    this.svgRoot.insertBefore(markerSvg, this.cursorSvg);\n  } else {\n    this.svgRoot.appendChild(markerSvg);\n  }\n  this.markerSvg = markerSvg;\n};\n\n/**\n * Apply the stored colours to the block's path, taking into account whether\n * the paths belong to a shadow block.\n * @param {!Blockly.Block} block The source block.\n * @package\n */\nBlockly.blockRendering.PathObject.prototype.applyColour = function(block) {\n  this.svgPath.setAttribute('stroke', this.style.colourTertiary);\n  this.svgPath.setAttribute('fill', this.style.colourPrimary);\n\n  this.updateShadow_(block.isShadow());\n  this.updateDisabled_(!block.isEnabled() || block.getInheritedDisabled());\n};\n\n/**\n * Set the style.\n * @param {!Blockly.Theme.BlockStyle} blockStyle The block style to use.\n * @package\n */\nBlockly.blockRendering.PathObject.prototype.setStyle = function(blockStyle) {\n  this.style = blockStyle;\n};\n\n/**\n * Add or remove the given CSS class on the path object's root SVG element.\n * @param {string} className The name of the class to add or remove\n * @param {boolean} add True if the class should be added.  False if it should\n *     be removed.\n * @protected\n */\nBlockly.blockRendering.PathObject.prototype.setClass_ = function(\n    className, add) {\n  if (add) {\n    Blockly.utils.dom.addClass(/** @type {!Element} */ (this.svgRoot),\n        className);\n  } else {\n    Blockly.utils.dom.removeClass(/** @type {!Element} */ (this.svgRoot),\n        className);\n  }\n};\n\n/**\n * Set whether the block shows a highlight or not.  Block highlighting is\n * often used to visually mark blocks currently being executed.\n * @param {boolean} enable True if highlighted.\n * @package\n */\nBlockly.blockRendering.PathObject.prototype.updateHighlighted = function(\n    enable) {\n  if (enable) {\n    this.svgPath.setAttribute('filter',\n        'url(#' + this.constants.embossFilterId + ')');\n  } else {\n    this.svgPath.setAttribute('filter', 'none');\n  }\n};\n\n/**\n * Updates the look of the block to reflect a shadow state.\n * @param {boolean} shadow True if the block is a shadow block.\n * @protected\n */\nBlockly.blockRendering.PathObject.prototype.updateShadow_ = function(shadow) {\n  if (shadow) {\n    this.svgPath.setAttribute('stroke', 'none');\n    this.svgPath.setAttribute('fill', this.style.colourSecondary);\n  }\n};\n\n/**\n * Updates the look of the block to reflect a disabled state.\n * @param {boolean} disabled True if disabled.\n * @protected\n */\nBlockly.blockRendering.PathObject.prototype.updateDisabled_ = function(\n    disabled) {\n  this.setClass_('blocklyDisabled', disabled);\n  if (disabled) {\n    this.svgPath.setAttribute('fill',\n        'url(#' + this.constants.disabledPatternId + ')');\n  }\n};\n\n/**\n * Add or remove styling showing that a block is selected.\n * @param {boolean} enable True if selection is enabled, false otherwise.\n * @package\n */\nBlockly.blockRendering.PathObject.prototype.updateSelected = function(enable) {\n  this.setClass_('blocklySelected', enable);\n};\n\n/**\n * Add or remove styling showing that a block is dragged over a delete area.\n * @param {boolean} enable True if the block is being dragged over a delete\n *     area, false otherwise.\n * @package\n */\nBlockly.blockRendering.PathObject.prototype.updateDraggingDelete = function(\n    enable) {\n  this.setClass_('blocklyDraggingDelete', enable);\n};\n\n/**\n * Add or remove styling showing that a block is an insertion marker.\n * @param {boolean} enable True if the block is an insertion marker, false\n *     otherwise.\n * @package\n */\nBlockly.blockRendering.PathObject.prototype.updateInsertionMarker = function(\n    enable) {\n  this.setClass_('blocklyInsertionMarker', enable);\n};\n\n/**\n * Add or remove styling showing that a block is movable.\n * @param {boolean} enable True if the block is movable, false otherwise.\n * @package\n */\nBlockly.blockRendering.PathObject.prototype.updateMovable = function(enable) {\n  this.setClass_('blocklyDraggable', enable);\n};\n\n/**\n * Add or remove styling that shows that if the dragging block is dropped, this\n * block will be replaced.  If a shadow block, it will disappear.  Otherwise it\n * will bump.\n * @param {boolean} enable True if styling should be added.\n * @package\n */\nBlockly.blockRendering.PathObject.prototype.updateReplacementFade =\n    function(enable) {\n    /* eslint-disable indent */\n  this.setClass_('blocklyReplaceable', enable);\n}; /* eslint-enable indent */\n\n/**\n * Add or remove styling that shows that if the dragging block is dropped, this\n * block will be connected to the input.\n * @param {Blockly.Connection} _conn The connection on the input to highlight.\n * @param {boolean} _enable True if styling should be added.\n * @package\n */\nBlockly.blockRendering.PathObject.prototype.updateShapeForInputHighlight =\n    function(_conn, _enable) {\n    /* eslint-disable indent */\n  // NOP\n}; /* eslint-enable indent */\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Base renderer.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.blockRendering.Renderer');\n\ngoog.require('Blockly.blockRendering.ConstantProvider');\ngoog.require('Blockly.blockRendering.MarkerSvg');\ngoog.require('Blockly.blockRendering.Drawer');\ngoog.require('Blockly.blockRendering.IPathObject');\ngoog.require('Blockly.blockRendering.PathObject');\ngoog.require('Blockly.blockRendering.RenderInfo');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.InsertionMarkerManager');\n\ngoog.requireType('Blockly.blockRendering.Debug');\ngoog.requireType('Blockly.IRegistrable');\n\n\n/**\n * The base class for a block renderer.\n * @param {string} name The renderer name.\n * @package\n * @constructor\n * @implements {Blockly.IRegistrable}\n */\nBlockly.blockRendering.Renderer = function(name) {\n\n  /**\n   * The renderer name.\n   * @type {string}\n   * @package\n   */\n  this.name = name;\n\n  /**\n   * The renderer's constant provider.\n   * @type {Blockly.blockRendering.ConstantProvider}\n   * @private\n   */\n  this.constants_ = null;\n\n  /**\n   * Rendering constant overrides, passed in through options.\n   * @type {?Object}\n   * @package\n   */\n  this.overrides = null;\n};\n\n/**\n * Gets the class name that identifies this renderer.\n * @return {string} The CSS class name.\n * @package\n */\nBlockly.blockRendering.Renderer.prototype.getClassName = function() {\n  return this.name + '-renderer';\n};\n\n/**\n * Initialize the renderer.\n * @param {!Blockly.Theme} theme The workspace theme object.\n * @param {Object=} opt_rendererOverrides Rendering constant overrides.\n * @package\n */\nBlockly.blockRendering.Renderer.prototype.init = function(theme,\n    opt_rendererOverrides) {\n  this.constants_ = this.makeConstants_();\n  if (opt_rendererOverrides) {\n    this.overrides = opt_rendererOverrides;\n    Blockly.utils.object.mixin(this.constants_, opt_rendererOverrides);\n  }\n  this.constants_.setTheme(theme);\n  this.constants_.init();\n};\n\n/**\n * Create any DOM elements that this renderer needs.\n * @param {!SVGElement} svg The root of the workspace's SVG.\n * @param {!Blockly.Theme} theme The workspace theme object.\n * @package\n */\nBlockly.blockRendering.Renderer.prototype.createDom = function(svg, theme) {\n  this.constants_.createDom(svg, this.name + '-' + theme.name,\n      '.' + this.getClassName() + '.' + theme.getClassName());\n};\n\n/**\n * Refresh the renderer after a theme change.\n * @param {!SVGElement} svg The root of the workspace's SVG.\n * @param {!Blockly.Theme} theme The workspace theme object.\n * @package\n */\nBlockly.blockRendering.Renderer.prototype.refreshDom = function(svg, theme) {\n  var previousConstants = this.getConstants();\n  previousConstants.dispose();\n  this.constants_ = this.makeConstants_();\n  if (this.overrides) {\n    Blockly.utils.object.mixin(this.constants_, this.overrides);\n  }\n  // Ensure the constant provider's random identifier does not change.\n  this.constants_.randomIdentifier = previousConstants.randomIdentifier;\n  this.constants_.setTheme(theme);\n  this.constants_.init();\n  this.createDom(svg, theme);\n};\n\n/**\n * Dispose of this renderer.\n * Delete all DOM elements that this renderer and its constants created.\n * @package\n */\nBlockly.blockRendering.Renderer.prototype.dispose = function() {\n  if (this.constants_) {\n    this.constants_.dispose();\n  }\n};\n\n/**\n * Create a new instance of the renderer's constant provider.\n * @return {!Blockly.blockRendering.ConstantProvider} The constant provider.\n * @protected\n */\nBlockly.blockRendering.Renderer.prototype.makeConstants_ = function() {\n  return new Blockly.blockRendering.ConstantProvider();\n};\n\n/**\n * Create a new instance of the renderer's render info object.\n * @param {!Blockly.BlockSvg} block The block to measure.\n * @return {!Blockly.blockRendering.RenderInfo} The render info object.\n * @protected\n */\nBlockly.blockRendering.Renderer.prototype.makeRenderInfo_ = function(block) {\n  return new Blockly.blockRendering.RenderInfo(this, block);\n};\n\n/**\n * Create a new instance of the renderer's drawer.\n * @param {!Blockly.BlockSvg} block The block to render.\n * @param {!Blockly.blockRendering.RenderInfo} info An object containing all\n *   information needed to render this block.\n * @return {!Blockly.blockRendering.Drawer} The drawer.\n * @protected\n */\nBlockly.blockRendering.Renderer.prototype.makeDrawer_ = function(block, info) {\n  return new Blockly.blockRendering.Drawer(block, info);\n};\n\n/**\n * Create a new instance of the renderer's debugger.\n * @return {!Blockly.blockRendering.Debug} The renderer debugger.\n * @suppress {strictModuleDepCheck} Debug renderer only included in playground.\n * @protected\n */\nBlockly.blockRendering.Renderer.prototype.makeDebugger_ = function() {\n  if (!Blockly.blockRendering.Debug) {\n    throw Error('Missing require for Blockly.blockRendering.Debug');\n  }\n  return new Blockly.blockRendering.Debug(this.getConstants());\n};\n\n/**\n * Create a new instance of the renderer's marker drawer.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace the marker belongs to.\n * @param {!Blockly.Marker} marker The marker.\n * @return {!Blockly.blockRendering.MarkerSvg} The object in charge of drawing\n *     the marker.\n * @package\n */\nBlockly.blockRendering.Renderer.prototype.makeMarkerDrawer = function(\n    workspace, marker) {\n  return new Blockly.blockRendering.MarkerSvg(workspace, this.getConstants(), marker);\n};\n\n/**\n * Create a new instance of a renderer path object.\n * @param {!SVGElement} root The root SVG element.\n * @param {!Blockly.Theme.BlockStyle} style The style object to use for\n *     colouring.\n * @return {!Blockly.blockRendering.IPathObject} The renderer path object.\n * @package\n */\nBlockly.blockRendering.Renderer.prototype.makePathObject = function(root,\n    style) {\n  return new Blockly.blockRendering.PathObject(root, style,\n      /** @type {!Blockly.blockRendering.ConstantProvider} */ (this.constants_));\n\n};\n\n/**\n * Get the current renderer's constant provider.  We assume that when this is\n * called, the renderer has already been initialized.\n * @return {!Blockly.blockRendering.ConstantProvider} The constant provider.\n * @package\n */\nBlockly.blockRendering.Renderer.prototype.getConstants = function() {\n  return (\n    /** @type {!Blockly.blockRendering.ConstantProvider} */\n    (this.constants_));\n};\n\n/**\n * Determine whether or not to highlight a connection.\n * @param {Blockly.Connection} _conn The connection to determine whether or not\n *     to highlight.\n * @return {boolean} True if we should highlight the connection.\n * @package\n */\nBlockly.blockRendering.Renderer.prototype.shouldHighlightConnection =\n    function(_conn) {\n    /* eslint-disable indent */\n  return true;\n}; /* eslint-enable indent */\n\n/**\n * Checks if an orphaned block can connect to the \"end\" of the topBlock's\n * block-clump. If the clump is a row the end is the last input. If the clump\n * is a stack, the end is the last next connection. If the clump is neither,\n * then this returns false.\n * @param {!Blockly.BlockSvg} topBlock The top block of the block clump we want to try and\n *     connect to.\n * @param {!Blockly.BlockSvg} orphanBlock The orphan block that wants to find\n *     a home.\n * @param {number} localType The type of the connection being dragged.\n * @return {boolean} Whether there is a home for the orphan or not.\n * @package\n */\nBlockly.blockRendering.Renderer.prototype.orphanCanConnectAtEnd =\n    function(topBlock, orphanBlock, localType) {\n      var orphanConnection = null;\n      var lastConnection = null;\n      if (localType == Blockly.OUTPUT_VALUE) {  // We are replacing an output.\n        orphanConnection = orphanBlock.outputConnection;\n        // TODO:  I don't think this function necessarily has the correct logic,\n        //  but for now it is being kept for behavioral backwards-compat.\n        lastConnection = Blockly.Connection\n            .lastConnectionInRow(\n                /** @type {!Blockly.Block} **/ (topBlock), orphanBlock);\n      } else {  // We are replacing a previous.\n        orphanConnection = orphanBlock.previousConnection;\n        // TODO: This lives on the block while lastConnectionInRow lives on\n        //  on the connection. Something is fishy.\n        lastConnection = topBlock.lastConnectionInStack();\n      }\n\n      if (!lastConnection) {\n        return false;\n      }\n      return orphanConnection.getConnectionChecker().canConnect(\n          lastConnection, orphanConnection, false);\n    };\n\n/**\n * Chooses a connection preview method based on the available connection, the\n * current dragged connection, and the block being dragged.\n * @param {!Blockly.RenderedConnection} closest The available connection.\n * @param {!Blockly.RenderedConnection} local The connection currently being\n *     dragged.\n * @param {!Blockly.BlockSvg} topBlock The block currently being dragged.\n * @return {!Blockly.InsertionMarkerManager.PREVIEW_TYPE} The preview type\n *     to display.\n * @package\n */\nBlockly.blockRendering.Renderer.prototype.getConnectionPreviewMethod =\n    function(closest, local, topBlock) {\n      if (local.type == Blockly.OUTPUT_VALUE ||\n          local.type == Blockly.PREVIOUS_STATEMENT) {\n        if (!closest.isConnected() ||\n            this.orphanCanConnectAtEnd(\n                topBlock,\n                /** @type {!Blockly.BlockSvg} */ (closest.targetBlock()),\n                local.type)) {\n          return Blockly.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER;\n        }\n        return Blockly.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE;\n      }\n\n      return Blockly.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER;\n    };\n\n/**\n * Render the block.\n * @param {!Blockly.BlockSvg} block The block to render.\n * @package\n */\nBlockly.blockRendering.Renderer.prototype.render = function(block) {\n  if (Blockly.blockRendering.useDebugger && !block.renderingDebugger) {\n    block.renderingDebugger = this.makeDebugger_();\n  }\n  var info = this.makeRenderInfo_(block);\n  info.measure();\n  this.makeDrawer_(block, info).draw();\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that provides constants for rendering blocks in Geras\n * mode.\n * @author kozbial@google.com (Monica Kozbial)\n */\n'use strict';\n\ngoog.provide('Blockly.geras.ConstantProvider');\n\ngoog.require('Blockly.blockRendering.ConstantProvider');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * An object that provides constants for rendering blocks in Geras mode.\n * @constructor\n * @package\n * @extends {Blockly.blockRendering.ConstantProvider}\n */\nBlockly.geras.ConstantProvider = function() {\n  Blockly.geras.ConstantProvider.superClass_.constructor.call(this);\n\n  /**\n   * @override\n   */\n  this.FIELD_TEXT_BASELINE_CENTER = false;\n\n  // The dark/shadow path in classic rendering is the same as the normal block\n  // path, but translated down one and right one.\n  this.DARK_PATH_OFFSET = 1;\n\n  /**\n   * The maximum width of a bottom row that follows a statement input and has\n   * inputs inline.\n   * @type {number}\n   */\n  this.MAX_BOTTOM_WIDTH = 30;\n};\nBlockly.utils.object.inherits(Blockly.geras.ConstantProvider,\n    Blockly.blockRendering.ConstantProvider);\n\n\n/**\n * @override\n */\nBlockly.geras.ConstantProvider.prototype.getCSS_ = function(selector) {\n  return Blockly.geras.ConstantProvider.superClass_.getCSS_.call(this, selector)\n      .concat([\n        /* eslint-disable indent */\n        // Insertion marker.\n        selector + ' .blocklyInsertionMarker>.blocklyPathLight,',\n        selector + ' .blocklyInsertionMarker>.blocklyPathDark {',\n          'fill-opacity: ' + this.INSERTION_MARKER_OPACITY + ';',\n          'stroke: none;',\n        '}',\n        /* eslint-enable indent */\n      ]);\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for adding highlights on block, for rendering in\n * compatibility mode.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.geras.Highlighter');\n\ngoog.require('Blockly.blockRendering.BottomRow');\ngoog.require('Blockly.blockRendering.InputRow');\ngoog.require('Blockly.blockRendering.Measurable');\ngoog.require('Blockly.blockRendering.RenderInfo');\ngoog.require('Blockly.blockRendering.Row');\ngoog.require('Blockly.blockRendering.SpacerRow');\ngoog.require('Blockly.blockRendering.TopRow');\ngoog.require('Blockly.blockRendering.Types');\ngoog.require('Blockly.utils.svgPaths');\n\n\n/**\n * An object that adds highlights to a block based on the given rendering\n * information.\n *\n * Highlighting is interesting because the highlights do not fully enclose the\n * block.  Instead, they are positioned based on a light source in the top left.\n * This means that rendering highlights requires exact information about the\n * position of each part of the block.  The resulting paths are not continuous\n * or closed paths.  The highlights for tabs and notches are loosely based on\n * tab and notch shapes, but are not exactly the same.\n *\n * @param {!Blockly.geras.RenderInfo} info An object containing all\n *     information needed to render this block.\n * @package\n * @constructor\n */\nBlockly.geras.Highlighter = function(info) {\n  this.info_ = info;\n  this.steps_ = '';\n  this.inlineSteps_ = '';\n\n  this.RTL_ = this.info_.RTL;\n\n  var renderer = /** @type {!Blockly.geras.Renderer} */ (info.getRenderer());\n\n  /**\n   * The renderer's constant provider.\n   * @type {!Blockly.blockRendering.ConstantProvider}\n   */\n  this.constants_ = renderer.getConstants();\n\n  /**\n   * @type {!Blockly.geras.HighlightConstantProvider}\n   */\n  this.highlightConstants_ = renderer.getHighlightConstants();\n  /**\n   * The offset between the block's main path and highlight path.\n   * @type {number}\n   * @private\n   */\n  this.highlightOffset_ = this.highlightConstants_.OFFSET;\n\n  this.outsideCornerPaths_ = this.highlightConstants_.OUTSIDE_CORNER;\n  this.insideCornerPaths_ = this.highlightConstants_.INSIDE_CORNER;\n  this.puzzleTabPaths_ = this.highlightConstants_.PUZZLE_TAB;\n  this.notchPaths_ = this.highlightConstants_.NOTCH;\n  this.startPaths_ = this.highlightConstants_.START_HAT;\n  this.jaggedTeethPaths_ =\n      this.highlightConstants_.JAGGED_TEETH;\n};\n\n/**\n * Get the steps for the highlight path.\n * @return {string} The steps for the highlight path.\n * @package\n */\nBlockly.geras.Highlighter.prototype.getPath = function() {\n  return this.steps_ + '\\n' + this.inlineSteps_;\n};\n\nBlockly.geras.Highlighter.prototype.drawTopCorner = function(row) {\n  this.steps_ += Blockly.utils.svgPaths.moveBy(row.xPos, this.info_.startY);\n  for (var i = 0, elem; (elem = row.elements[i]); i++) {\n    if (Blockly.blockRendering.Types.isLeftSquareCorner(elem)) {\n      this.steps_ += this.highlightConstants_.START_POINT;\n    } else if (Blockly.blockRendering.Types.isLeftRoundedCorner(elem)) {\n      this.steps_ += this.outsideCornerPaths_.topLeft(this.RTL_);\n    } else if (Blockly.blockRendering.Types.isPreviousConnection(elem)) {\n      this.steps_ += this.notchPaths_.pathLeft;\n    } else if (Blockly.blockRendering.Types.isHat(elem)) {\n      this.steps_ += this.startPaths_.path(this.RTL_);\n    } else if (Blockly.blockRendering.Types.isSpacer(elem) && elem.width != 0) {\n      // The end point of the spacer needs to be offset by the highlight amount.\n      // So instead of using the spacer's width for a relative horizontal, use\n      // its width and position for an absolute horizontal move.\n      this.steps_ += Blockly.utils.svgPaths.lineOnAxis('H',\n          elem.xPos + elem.width - this.highlightOffset_);\n    }\n  }\n\n  var right = row.xPos + row.width - this.highlightOffset_;\n  this.steps_ += Blockly.utils.svgPaths.lineOnAxis('H', right);\n};\n\nBlockly.geras.Highlighter.prototype.drawJaggedEdge_ = function(row) {\n  if (this.info_.RTL) {\n    var remainder =\n        row.height - this.jaggedTeethPaths_.height - this.highlightOffset_;\n    this.steps_ += this.jaggedTeethPaths_.pathLeft +\n        Blockly.utils.svgPaths.lineOnAxis('v', remainder);\n  }\n};\n\nBlockly.geras.Highlighter.prototype.drawValueInput = function(row) {\n  var input = row.getLastInput();\n  if (this.RTL_) {\n    var belowTabHeight = row.height - input.connectionHeight;\n\n    this.steps_ +=\n        Blockly.utils.svgPaths.moveTo(\n            input.xPos + input.width - this.highlightOffset_, row.yPos) +\n        this.puzzleTabPaths_.pathDown(this.RTL_) +\n        Blockly.utils.svgPaths.lineOnAxis('v', belowTabHeight);\n  } else {\n    this.steps_ +=\n        Blockly.utils.svgPaths.moveTo(input.xPos + input.width, row.yPos) +\n        this.puzzleTabPaths_.pathDown(this.RTL_);\n  }\n};\n\nBlockly.geras.Highlighter.prototype.drawStatementInput = function(row) {\n  var input = row.getLastInput();\n  if (this.RTL_) {\n    var innerHeight = row.height - (2 * this.insideCornerPaths_.height);\n    this.steps_ +=\n        Blockly.utils.svgPaths.moveTo(input.xPos, row.yPos) +\n        this.insideCornerPaths_.pathTop(this.RTL_) +\n        Blockly.utils.svgPaths.lineOnAxis('v', innerHeight) +\n        this.insideCornerPaths_.pathBottom(this.RTL_) +\n        Blockly.utils.svgPaths.lineTo(\n            row.width - input.xPos - this.insideCornerPaths_.width, 0);\n  } else {\n    this.steps_ +=\n        Blockly.utils.svgPaths.moveTo(input.xPos, row.yPos + row.height) +\n        this.insideCornerPaths_.pathBottom(this.RTL_) +\n        Blockly.utils.svgPaths.lineTo(\n            row.width - input.xPos - this.insideCornerPaths_.width, 0);\n  }\n};\n\nBlockly.geras.Highlighter.prototype.drawRightSideRow = function(row) {\n  var rightEdge = row.xPos + row.width - this.highlightOffset_;\n  if (row.followsStatement) {\n    this.steps_ += Blockly.utils.svgPaths.lineOnAxis('H', rightEdge);\n  }\n  if (this.RTL_) {\n    this.steps_ += Blockly.utils.svgPaths.lineOnAxis('H', rightEdge);\n    if (row.height > this.highlightOffset_) {\n      this.steps_ += Blockly.utils.svgPaths.lineOnAxis('V',\n          row.yPos + row.height - this.highlightOffset_);\n    }\n  }\n};\n\nBlockly.geras.Highlighter.prototype.drawBottomRow = function(row) {\n  // Highlight the vertical edge of the bottom row on the input side.\n  // Highlighting is always from the top left, both in LTR and RTL.\n  if (this.RTL_) {\n    this.steps_ +=\n        Blockly.utils.svgPaths.lineOnAxis('V', row.baseline - this.highlightOffset_);\n  } else {\n    var cornerElem = this.info_.bottomRow.elements[0];\n    if (Blockly.blockRendering.Types.isLeftSquareCorner(cornerElem)) {\n      this.steps_ += Blockly.utils.svgPaths.moveTo(\n          row.xPos + this.highlightOffset_,\n          row.baseline - this.highlightOffset_);\n    } else if (Blockly.blockRendering.Types.isLeftRoundedCorner(cornerElem)) {\n      this.steps_ += Blockly.utils.svgPaths.moveTo(row.xPos, row.baseline);\n      this.steps_ += this.outsideCornerPaths_.bottomLeft();\n    }\n  }\n};\n\nBlockly.geras.Highlighter.prototype.drawLeft = function() {\n  var outputConnection = this.info_.outputConnection;\n  if (outputConnection) {\n    var tabBottom =\n        outputConnection.connectionOffsetY + outputConnection.height;\n    // Draw a line up to the bottom of the tab.\n    if (this.RTL_) {\n      this.steps_ += Blockly.utils.svgPaths.moveTo(this.info_.startX, tabBottom);\n    } else {\n      var left = this.info_.startX + this.highlightOffset_;\n      var bottom = this.info_.bottomRow.baseline - this.highlightOffset_;\n      this.steps_ += Blockly.utils.svgPaths.moveTo(left, bottom);\n      this.steps_ += Blockly.utils.svgPaths.lineOnAxis('V', tabBottom);\n    }\n    this.steps_ += this.puzzleTabPaths_.pathUp(this.RTL_);\n  }\n\n  if (!this.RTL_) {\n    var topRow = this.info_.topRow;\n    if (Blockly.blockRendering.Types.isLeftRoundedCorner(topRow.elements[0])) {\n      this.steps_ += Blockly.utils.svgPaths.lineOnAxis('V', this.outsideCornerPaths_.height);\n    } else {\n      this.steps_ +=\n          Blockly.utils.svgPaths.lineOnAxis('V', topRow.capline + this.highlightOffset_);\n    }\n  }\n};\n\nBlockly.geras.Highlighter.prototype.drawInlineInput = function(input) {\n  var offset = this.highlightOffset_;\n\n  // Relative to the block's left.\n  var connectionRight = input.xPos + input.connectionWidth;\n  var yPos = input.centerline - input.height / 2;\n  var bottomHighlightWidth = input.width - input.connectionWidth;\n  var startY = yPos + offset;\n\n  if (this.RTL_) {\n    var aboveTabHeight = input.connectionOffsetY - offset;\n    var belowTabHeight = input.height -\n        (input.connectionOffsetY + input.connectionHeight) + offset;\n\n    var startX = connectionRight - offset;\n\n    this.inlineSteps_ += Blockly.utils.svgPaths.moveTo(startX, startY) +\n        // Right edge above tab.\n        Blockly.utils.svgPaths.lineOnAxis('v', aboveTabHeight) +\n        // Back of tab.\n        this.puzzleTabPaths_.pathDown(this.RTL_) +\n        // Right edge below tab.\n        Blockly.utils.svgPaths.lineOnAxis('v', belowTabHeight) +\n        // Bottom.\n        Blockly.utils.svgPaths.lineOnAxis('h', bottomHighlightWidth);\n  } else {\n\n    this.inlineSteps_ +=\n        // Go to top right corner.\n        Blockly.utils.svgPaths.moveTo(input.xPos + input.width + offset, startY) +\n        // Highlight right edge, bottom.\n        Blockly.utils.svgPaths.lineOnAxis('v', input.height) +\n        Blockly.utils.svgPaths.lineOnAxis('h', -bottomHighlightWidth) +\n        // Go to top of tab.\n        Blockly.utils.svgPaths.moveTo(connectionRight, yPos + input.connectionOffsetY) +\n        // Short highlight glint at bottom of tab.\n        this.puzzleTabPaths_.pathDown(this.RTL_);\n  }\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects representing inputs with connections on a rendered\n * block.\n * @author kozbial@google.com (Monica Kozbial)\n */\n'use strict';\n\ngoog.provide('Blockly.geras.InlineInput');\ngoog.provide('Blockly.geras.StatementInput');\n\ngoog.require('Blockly.utils.object');\n\n\n/**\n * An object containing information about the space an inline input takes up\n * during rendering\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {!Blockly.Input} input The inline input to measure and store\n *     information for.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.InlineInput}\n */\nBlockly.geras.InlineInput = function(constants, input) {\n  Blockly.geras.InlineInput.superClass_.constructor.call(\n      this, constants, input);\n\n  if (this.connectedBlock) {\n    // We allow the dark path to show on the parent block so that the child\n    // block looks embossed.  This takes up an extra pixel in both x and y.\n    this.width += this.constants_.DARK_PATH_OFFSET;\n    this.height += this.constants_.DARK_PATH_OFFSET;\n  }\n};\nBlockly.utils.object.inherits(Blockly.geras.InlineInput,\n    Blockly.blockRendering.InlineInput);\n\n/**\n * An object containing information about the space a statement input takes up\n * during rendering\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {!Blockly.Input} input The statement input to measure and store\n *     information for.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.StatementInput}\n */\nBlockly.geras.StatementInput = function(constants, input) {\n  Blockly.geras.StatementInput.superClass_.constructor.call(\n      this, constants, input);\n\n  if (this.connectedBlock) {\n    // We allow the dark path to show on the parent block so that the child\n    // block looks embossed.  This takes up an extra pixel in both x and y.\n    this.height += this.constants_.DARK_PATH_OFFSET;\n  }\n};\nBlockly.utils.object.inherits(Blockly.geras.StatementInput,\n    Blockly.blockRendering.StatementInput);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Old (compatibility) renderer.\n * Geras: spirit of old age.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.geras');\ngoog.provide('Blockly.geras.RenderInfo');\n\ngoog.require('Blockly.blockRendering.BottomRow');\ngoog.require('Blockly.blockRendering.InputRow');\ngoog.require('Blockly.blockRendering.Measurable');\ngoog.require('Blockly.blockRendering.NextConnection');\ngoog.require('Blockly.blockRendering.OutputConnection');\ngoog.require('Blockly.blockRendering.PreviousConnection');\ngoog.require('Blockly.blockRendering.RenderInfo');\ngoog.require('Blockly.blockRendering.BottomRow');\ngoog.require('Blockly.blockRendering.InputRow');\ngoog.require('Blockly.blockRendering.Measurable');\ngoog.require('Blockly.blockRendering.NextConnection');\ngoog.require('Blockly.blockRendering.OutputConnection');\ngoog.require('Blockly.blockRendering.PreviousConnection');\ngoog.require('Blockly.blockRendering.Types');\ngoog.require('Blockly.blockRendering.ExternalValueInput');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.geras.InlineInput');\ngoog.require('Blockly.geras.StatementInput');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * An object containing all sizing information needed to draw this block.\n *\n * This measure pass does not propagate changes to the block (although fields\n * may choose to rerender when getSize() is called).  However, calling it\n * repeatedly may be expensive.\n *\n * @param {!Blockly.geras.Renderer} renderer The renderer in use.\n * @param {!Blockly.BlockSvg} block The block to measure.\n * @constructor\n * @package\n * @extends {Blockly.blockRendering.RenderInfo}\n */\nBlockly.geras.RenderInfo = function(renderer, block) {\n  Blockly.geras.RenderInfo.superClass_.constructor.call(this, renderer, block);\n};\nBlockly.utils.object.inherits(Blockly.geras.RenderInfo,\n    Blockly.blockRendering.RenderInfo);\n\n/**\n * Get the block renderer in use.\n * @return {!Blockly.geras.Renderer} The block renderer in use.\n * @package\n */\nBlockly.geras.RenderInfo.prototype.getRenderer = function() {\n  return /** @type {!Blockly.geras.Renderer} */ (this.renderer_);\n};\n\n/**\n * @override\n */\nBlockly.geras.RenderInfo.prototype.populateBottomRow_ = function() {\n  Blockly.geras.RenderInfo.superClass_.populateBottomRow_.call(this);\n\n  var followsStatement =\n      this.block_.inputList.length &&\n      this.block_.inputList[this.block_.inputList.length - 1]\n          .type == Blockly.NEXT_STATEMENT;\n\n  // The minimum height of the bottom row is smaller in Geras than in other\n  // renderers, because the dark path adds a pixel.\n  // If one of the row's elements has a greater height this will be overwritten\n  // in the compute pass.\n  if (!followsStatement) {\n    this.bottomRow.minHeight =\n        this.constants_.MEDIUM_PADDING - this.constants_.DARK_PATH_OFFSET;\n  }\n\n};\n\n/**\n * @override\n */\nBlockly.geras.RenderInfo.prototype.addInput_ = function(input, activeRow) {\n  // Non-dummy inputs have visual representations onscreen.\n  if (this.isInline && input.type == Blockly.INPUT_VALUE) {\n    activeRow.elements.push(\n        new Blockly.geras.InlineInput(this.constants_, input));\n    activeRow.hasInlineInput = true;\n  } else if (input.type == Blockly.NEXT_STATEMENT) {\n    activeRow.elements.push(\n        new Blockly.geras.StatementInput(this.constants_, input));\n    activeRow.hasStatement = true;\n  } else if (input.type == Blockly.INPUT_VALUE) {\n    activeRow.elements.push(\n        new Blockly.blockRendering.ExternalValueInput(this.constants_, input));\n    activeRow.hasExternalInput = true;\n  } else if (input.type == Blockly.DUMMY_INPUT) {\n    // Dummy inputs have no visual representation, but the information is still\n    // important.\n    activeRow.minHeight = Math.max(activeRow.minHeight,\n        this.constants_.DUMMY_INPUT_MIN_HEIGHT);\n    activeRow.hasDummyInput = true;\n  }\n  // Ignore row alignment if inline.\n  if (!this.isInline && activeRow.align == null) {\n    activeRow.align = input.align;\n  }\n};\n\n/**\n * @override\n */\nBlockly.geras.RenderInfo.prototype.addElemSpacing_ = function() {\n  var hasExternalInputs = false;\n  for (var i = 0, row; (row = this.rows[i]); i++) {\n    if (row.hasExternalInput) {\n      hasExternalInputs = true;\n    }\n  }\n  for (var i = 0, row; (row = this.rows[i]); i++) {\n    var oldElems = row.elements;\n    row.elements = [];\n    // No spacing needed before the corner on the top row or the bottom row.\n    if (row.startsWithElemSpacer()) {\n      // There's a spacer before the first element in the row.\n      row.elements.push(new Blockly.blockRendering.InRowSpacer(\n          this.constants_, this.getInRowSpacing_(null, oldElems[0])));\n    }\n    if (!oldElems.length) {\n      continue;\n    }\n    for (var e = 0; e < oldElems.length - 1; e++) {\n      row.elements.push(oldElems[e]);\n      var spacing = this.getInRowSpacing_(oldElems[e], oldElems[e + 1]);\n      row.elements.push(\n          new Blockly.blockRendering.InRowSpacer(this.constants_, spacing));\n    }\n    row.elements.push(oldElems[oldElems.length - 1]);\n    if (row.endsWithElemSpacer()) {\n      var spacing = this.getInRowSpacing_(oldElems[oldElems.length - 1], null);\n      if (hasExternalInputs && row.hasDummyInput) {\n        spacing += this.constants_.TAB_WIDTH;\n      }\n      // There's a spacer after the last element in the row.\n      row.elements.push(new Blockly.blockRendering.InRowSpacer(\n          this.constants_, spacing));\n    }\n  }\n};\n\n/**\n * @override\n */\nBlockly.geras.RenderInfo.prototype.getInRowSpacing_ = function(prev, next) {\n  if (!prev) {\n    // Between an editable field and the beginning of the row.\n    if (next && Blockly.blockRendering.Types.isField(next) &&\n        (/** @type Blockly.blockRendering.Field */ (next)).isEditable) {\n      return this.constants_.MEDIUM_PADDING;\n    }\n    // Inline input at the beginning of the row.\n    if (next && Blockly.blockRendering.Types.isInlineInput(next)) {\n      return this.constants_.MEDIUM_LARGE_PADDING;\n    }\n    if (next && Blockly.blockRendering.Types.isStatementInput(next)) {\n      return this.constants_.STATEMENT_INPUT_PADDING_LEFT;\n    }\n    // Anything else at the beginning of the row.\n    return this.constants_.LARGE_PADDING;\n  }\n\n  // Spacing between a non-input and the end of the row or a statement input.\n  if (!Blockly.blockRendering.Types.isInput(prev) && (!next ||\n      Blockly.blockRendering.Types.isStatementInput(next))) {\n    // Between an editable field and the end of the row.\n    if (Blockly.blockRendering.Types.isField(prev) &&\n        (/** @type Blockly.blockRendering.Field */ (prev)).isEditable) {\n      return this.constants_.MEDIUM_PADDING;\n    }\n    // Padding at the end of an icon-only row to make the block shape clearer.\n    if (Blockly.blockRendering.Types.isIcon(prev)) {\n      return (this.constants_.LARGE_PADDING * 2) + 1;\n    }\n    if (Blockly.blockRendering.Types.isHat(prev)) {\n      return this.constants_.NO_PADDING;\n    }\n    // Establish a minimum width for a block with a previous or next connection.\n    if (Blockly.blockRendering.Types.isPreviousOrNextConnection(prev)) {\n      return this.constants_.LARGE_PADDING;\n    }\n    // Between rounded corner and the end of the row.\n    if (Blockly.blockRendering.Types.isLeftRoundedCorner(prev)) {\n      return this.constants_.MIN_BLOCK_WIDTH;\n    }\n    // Between a jagged edge and the end of the row.\n    if (Blockly.blockRendering.Types.isJaggedEdge(prev)) {\n      return this.constants_.NO_PADDING;\n    }\n    // Between noneditable fields and icons and the end of the row.\n    return this.constants_.LARGE_PADDING;\n  }\n\n  // Between inputs and the end of the row.\n  if (Blockly.blockRendering.Types.isInput(prev) && !next) {\n    if (Blockly.blockRendering.Types.isExternalInput(prev)) {\n      return this.constants_.NO_PADDING;\n    } else if (Blockly.blockRendering.Types.isInlineInput(prev)) {\n      return this.constants_.LARGE_PADDING;\n    } else if (Blockly.blockRendering.Types.isStatementInput(prev)) {\n      return this.constants_.NO_PADDING;\n    }\n  }\n\n  // Spacing between a non-input and an input.\n  if (!Blockly.blockRendering.Types.isInput(prev) &&\n      next && Blockly.blockRendering.Types.isInput(next)) {\n    // Between an editable field and an input.\n    if (Blockly.blockRendering.Types.isField(prev) &&\n        (/** @type Blockly.blockRendering.Field */ (prev)).isEditable) {\n      if (Blockly.blockRendering.Types.isInlineInput(next)) {\n        return this.constants_.SMALL_PADDING;\n      } else if (Blockly.blockRendering.Types.isExternalInput(next)) {\n        return this.constants_.SMALL_PADDING;\n      }\n    } else {\n      if (Blockly.blockRendering.Types.isInlineInput(next)) {\n        return this.constants_.MEDIUM_LARGE_PADDING;\n      } else if (Blockly.blockRendering.Types.isExternalInput(next)) {\n        return this.constants_.MEDIUM_LARGE_PADDING;\n      } else if (Blockly.blockRendering.Types.isStatementInput(next)) {\n        return this.constants_.LARGE_PADDING;\n      }\n    }\n    return this.constants_.LARGE_PADDING - 1;\n  }\n\n  // Spacing between an icon and an icon or field.\n  if (Blockly.blockRendering.Types.isIcon(prev) &&\n      next && !Blockly.blockRendering.Types.isInput(next)) {\n    return this.constants_.LARGE_PADDING;\n  }\n\n  // Spacing between an inline input and a field.\n  if (Blockly.blockRendering.Types.isInlineInput(prev) &&\n      next && Blockly.blockRendering.Types.isField(next)) {\n    // Editable field after inline input.\n    if ((/** @type Blockly.blockRendering.Field */ (next)).isEditable) {\n      return this.constants_.MEDIUM_PADDING;\n    } else {\n      // Noneditable field after inline input.\n      return this.constants_.LARGE_PADDING;\n    }\n  }\n\n  if (Blockly.blockRendering.Types.isLeftSquareCorner(prev) && next) {\n    // Spacing between a hat and a corner\n    if (Blockly.blockRendering.Types.isHat(next)) {\n      return this.constants_.NO_PADDING;\n    }\n    // Spacing between a square corner and a previous or next connection\n    if (Blockly.blockRendering.Types.isPreviousConnection(next)) {\n      return next.notchOffset;\n    } else if (Blockly.blockRendering.Types.isNextConnection(next)) {\n      // Next connections are shifted slightly to the left (in both LTR and RTL)\n      // to make the dark path under the previous connection show through.\n      var offset = (this.RTL ? 1 : -1) *\n          this.constants_.DARK_PATH_OFFSET / 2;\n      return next.notchOffset + offset;\n    }\n  }\n\n  // Spacing between a rounded corner and a previous or next connection.\n  if (Blockly.blockRendering.Types.isLeftRoundedCorner(prev) && next) {\n    if (Blockly.blockRendering.Types.isPreviousConnection(next)) {\n      return next.notchOffset - this.constants_.CORNER_RADIUS;\n    } else if (Blockly.blockRendering.Types.isNextConnection(next)) {\n      // Next connections are shifted slightly to the left (in both LTR and RTL)\n      // to make the dark path under the previous connection show through.\n      var offset = (this.RTL ? 1 : -1) *\n          this.constants_.DARK_PATH_OFFSET / 2;\n      return next.notchOffset - this.constants_.CORNER_RADIUS + offset;\n    }\n  }\n\n  // Spacing between two fields of the same editability.\n  if (Blockly.blockRendering.Types.isField(prev) &&\n      next && Blockly.blockRendering.Types.isField(next) &&\n      ((/** @type Blockly.blockRendering.Field */ (prev)).isEditable ==\n          (/** @type Blockly.blockRendering.Field */ (next)).isEditable)) {\n    return this.constants_.LARGE_PADDING;\n  }\n\n  // Spacing between anything and a jagged edge.\n  if (next && Blockly.blockRendering.Types.isJaggedEdge(next)) {\n    return this.constants_.LARGE_PADDING;\n  }\n\n  return this.constants_.MEDIUM_PADDING;\n};\n\n/**\n * @override\n */\nBlockly.geras.RenderInfo.prototype.getSpacerRowHeight_ = function(prev, next) {\n  // If we have an empty block add a spacer to increase the height.\n  if (Blockly.blockRendering.Types.isTopRow(prev) &&\n      Blockly.blockRendering.Types.isBottomRow(next)) {\n    return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;\n  }\n  // Top and bottom rows act as a spacer so we don't need any extra padding.\n  if (Blockly.blockRendering.Types.isTopRow(prev) ||\n      Blockly.blockRendering.Types.isBottomRow(next)) {\n    return this.constants_.NO_PADDING;\n  }\n  if (prev.hasExternalInput && next.hasExternalInput) {\n    return this.constants_.LARGE_PADDING;\n  }\n  if (!prev.hasStatement && next.hasStatement) {\n    return this.constants_.BETWEEN_STATEMENT_PADDING_Y;\n  }\n  if (prev.hasStatement && next.hasStatement) {\n    return this.constants_.LARGE_PADDING;\n  }\n  if (!prev.hasStatement && next.hasDummyInput) {\n    return this.constants_.LARGE_PADDING;\n  }\n  if (prev.hasDummyInput) {\n    return this.constants_.LARGE_PADDING;\n  }\n  return this.constants_.MEDIUM_PADDING;\n};\n\n/**\n * @override\n */\nBlockly.geras.RenderInfo.prototype.getElemCenterline_ = function(row, elem) {\n  if (Blockly.blockRendering.Types.isSpacer(elem)) {\n    return row.yPos + elem.height / 2;\n  }\n  if (Blockly.blockRendering.Types.isBottomRow(row)) {\n    var baseline = row.yPos + row.height - row.descenderHeight;\n    if (Blockly.blockRendering.Types.isNextConnection(elem)) {\n      return baseline + elem.height / 2;\n    }\n    return baseline - elem.height / 2;\n  }\n  if (Blockly.blockRendering.Types.isTopRow(row)) {\n    if (Blockly.blockRendering.Types.isHat(elem)) {\n      return row.capline - elem.height / 2;\n    }\n    return row.capline + elem.height / 2;\n  }\n\n  var result = row.yPos;\n  if (Blockly.blockRendering.Types.isField(elem) ||\n      Blockly.blockRendering.Types.isIcon(elem)) {\n    result += (elem.height / 2);\n    if ((row.hasInlineInput || row.hasStatement) &&\n        elem.height + this.constants_.TALL_INPUT_FIELD_OFFSET_Y <= row.height) {\n      result += this.constants_.TALL_INPUT_FIELD_OFFSET_Y;\n    }\n  } else if (Blockly.blockRendering.Types.isInlineInput(elem)) {\n    result += elem.height / 2;\n  } else {\n    result += (row.height / 2);\n  }\n  return result;\n};\n\n/**\n * @override\n */\nBlockly.geras.RenderInfo.prototype.alignRowElements_ = function() {\n  if (!this.isInline) {\n    Blockly.geras.RenderInfo.superClass_.alignRowElements_.call(this);\n    return;\n  }\n\n  // Walk backgrounds through rows on the block, keeping track of the right\n  // input edge.\n  var nextRightEdge = 0;\n  var prevInput = null;\n  for (var i = this.rows.length - 1, row; (row = this.rows[i]); i--) {\n    row.nextRightEdge = nextRightEdge;\n    if (Blockly.blockRendering.Types.isInputRow(row)) {\n      if (row.hasStatement) {\n        this.alignStatementRow_(\n            /** @type {!Blockly.blockRendering.InputRow} */ (row));\n      }\n      if (prevInput && prevInput.hasStatement && row.width < prevInput.width) {\n        row.nextRightEdge = prevInput.width;\n      } else {\n        nextRightEdge = row.width;\n      }\n      prevInput = row;\n    }\n  }\n  // Walk down each row from the top, comparing the prev and next right input\n  // edges and setting the desired width to the max of the two.\n  var prevRightEdge = 0;\n  for (var i = 0, row; (row = this.rows[i]); i++) {\n    if (row.hasStatement) {\n      prevRightEdge = this.getDesiredRowWidth_(row);\n    } else if (Blockly.blockRendering.Types.isSpacer(row)) {\n      // Set the spacer row to the max of the prev or next input width.\n      row.width = Math.max(prevRightEdge, row.nextRightEdge);\n    } else {\n      var currentWidth = row.width;\n      var desiredWidth = Math.max(prevRightEdge, row.nextRightEdge);\n      var missingSpace = desiredWidth - currentWidth;\n      if (missingSpace > 0) {\n        this.addAlignmentPadding_(row, missingSpace);\n      }\n      prevRightEdge = row.width;\n    }\n  }\n};\n\n/**\n * @override\n */\nBlockly.geras.RenderInfo.prototype.getDesiredRowWidth_ = function(\n    row) {\n  // Limit the width of a statement row when a block is inline.\n  if (this.isInline && row.hasStatement) {\n    return this.statementEdge + this.constants_.MAX_BOTTOM_WIDTH + this.startX;\n  }\n  return Blockly.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,\n      row);\n};\n\n/**\n * @override\n */\nBlockly.geras.RenderInfo.prototype.finalize_ = function() {\n  // Performance note: this could be combined with the draw pass, if the time\n  // that this takes is excessive.  But it shouldn't be, because it only\n  // accesses and sets properties that already exist on the objects.\n  var widestRowWithConnectedBlocks = 0;\n  var yCursor = 0;\n  for (var i = 0, row; (row = this.rows[i]); i++) {\n    row.yPos = yCursor;\n    row.xPos = this.startX;\n    yCursor += row.height;\n\n    widestRowWithConnectedBlocks =\n        Math.max(widestRowWithConnectedBlocks, row.widthWithConnectedBlocks);\n    // Add padding to the bottom row if block height is less than minimum\n    var heightWithoutHat = yCursor - this.topRow.ascenderHeight;\n    if (row == this.bottomRow &&\n        heightWithoutHat < this.constants_.MIN_BLOCK_HEIGHT) {\n      // But the hat height shouldn't be part of this.\n      var diff = this.constants_.MIN_BLOCK_HEIGHT - heightWithoutHat;\n      this.bottomRow.height += diff;\n      yCursor += diff;\n    }\n    this.recordElemPositions_(row);\n  }\n  if (this.outputConnection && this.block_.nextConnection &&\n      this.block_.nextConnection.isConnected()) {\n    // Include width of connected block in value to stack width measurement.\n    widestRowWithConnectedBlocks =\n        Math.max(widestRowWithConnectedBlocks,\n            this.block_.nextConnection.targetBlock().getHeightWidth().width -\n            this.constants_.DARK_PATH_OFFSET);\n  }\n\n  this.bottomRow.baseline = yCursor - this.bottomRow.descenderHeight;\n\n  // The dark (lowlight) adds to the size of the block in both x and y.\n  this.widthWithChildren = widestRowWithConnectedBlocks +\n      this.startX + this.constants_.DARK_PATH_OFFSET;\n  this.width += this.constants_.DARK_PATH_OFFSET;\n  this.height = yCursor + this.constants_.DARK_PATH_OFFSET;\n  this.startY = this.topRow.capline;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Renderer that preserves the look and feel of Blockly pre-2019.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.geras.Drawer');\n\ngoog.require('Blockly.blockRendering.ConstantProvider');\ngoog.require('Blockly.blockRendering.Drawer');\ngoog.require('Blockly.geras.Highlighter');\ngoog.require('Blockly.geras.RenderInfo');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.svgPaths');\n\ngoog.requireType('Blockly.geras.PathObject');\n\n\n/**\n * An object that draws a block based on the given rendering information.\n * @param {!Blockly.BlockSvg} block The block to render.\n * @param {!Blockly.geras.RenderInfo} info An object containing all\n *   information needed to render this block.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Drawer}\n */\nBlockly.geras.Drawer = function(block, info) {\n  Blockly.geras.Drawer.superClass_.constructor.call(this, block, info);\n  // Unlike Thrasos, Geras has highlights and drop shadows.\n  this.highlighter_ = new Blockly.geras.Highlighter(info);\n};\nBlockly.utils.object.inherits(Blockly.geras.Drawer,\n    Blockly.blockRendering.Drawer);\n\n/**\n * @override\n */\nBlockly.geras.Drawer.prototype.draw = function() {\n  this.hideHiddenIcons_();\n  this.drawOutline_();\n  this.drawInternals_();\n\n  var pathObject =\n    /** @type {!Blockly.geras.PathObject} */ (this.block_.pathObject);\n  pathObject.setPath(this.outlinePath_ + '\\n' + this.inlinePath_);\n  pathObject.setHighlightPath(this.highlighter_.getPath());\n  if (this.info_.RTL) {\n    pathObject.flipRTL();\n  }\n  if (Blockly.blockRendering.useDebugger) {\n    this.block_.renderingDebugger.drawDebug(this.block_, this.info_);\n  }\n  this.recordSizeOnBlock_();\n};\n\n/**\n * @override\n */\nBlockly.geras.Drawer.prototype.drawTop_ = function() {\n  this.highlighter_.drawTopCorner(this.info_.topRow);\n  this.highlighter_.drawRightSideRow(this.info_.topRow);\n\n  Blockly.geras.Drawer.superClass_.drawTop_.call(this);\n};\n\n/**\n * @override\n */\nBlockly.geras.Drawer.prototype.drawJaggedEdge_ = function(row) {\n  this.highlighter_.drawJaggedEdge_(row);\n\n  Blockly.geras.Drawer.superClass_.drawJaggedEdge_.call(this, row);\n};\n\n/**\n * @override\n */\nBlockly.geras.Drawer.prototype.drawValueInput_ = function(row) {\n  this.highlighter_.drawValueInput(row);\n\n  Blockly.geras.Drawer.superClass_.drawValueInput_.call(this, row);\n};\n\n/**\n * @override\n */\nBlockly.geras.Drawer.prototype.drawStatementInput_ = function(row) {\n  this.highlighter_.drawStatementInput(row);\n\n  Blockly.geras.Drawer.superClass_.drawStatementInput_.call(this, row);\n};\n\n/**\n * @override\n */\nBlockly.geras.Drawer.prototype.drawRightSideRow_ = function(row) {\n  this.highlighter_.drawRightSideRow(row);\n\n  this.outlinePath_ +=\n      Blockly.utils.svgPaths.lineOnAxis('H', row.xPos + row.width) +\n      Blockly.utils.svgPaths.lineOnAxis('V', row.yPos + row.height);\n};\n\n/**\n * @override\n */\nBlockly.geras.Drawer.prototype.drawBottom_ = function() {\n  this.highlighter_.drawBottomRow(this.info_.bottomRow);\n\n  Blockly.geras.Drawer.superClass_.drawBottom_.call(this);\n};\n\n/**\n * Add steps for the left side of the block, which may include an output\n * connection\n * @private\n */\nBlockly.geras.Drawer.prototype.drawLeft_ = function() {\n  this.highlighter_.drawLeft();\n\n  Blockly.geras.Drawer.superClass_.drawLeft_.call(this);\n};\n\n/**\n * @override\n */\nBlockly.geras.Drawer.prototype.drawInlineInput_ = function(input) {\n  this.highlighter_.drawInlineInput(input);\n\n  Blockly.geras.Drawer.superClass_.drawInlineInput_.call(this, input);\n};\n\n/**\n * @override\n */\nBlockly.geras.Drawer.prototype.positionInlineInputConnection_ = function(input) {\n  var yPos = input.centerline - input.height / 2;\n  // Move the connection.\n  if (input.connectionModel) {\n    // xPos already contains info about startX\n    var connX = input.xPos + input.connectionWidth +\n        this.constants_.DARK_PATH_OFFSET;\n    if (this.info_.RTL) {\n      connX *= -1;\n    }\n    input.connectionModel.setOffsetInBlock(\n        connX, yPos + input.connectionOffsetY +\n        this.constants_.DARK_PATH_OFFSET);\n  }\n};\n\n/**\n * @override\n */\nBlockly.geras.Drawer.prototype.positionStatementInputConnection_ = function(row) {\n  var input = row.getLastInput();\n  if (input.connectionModel) {\n    var connX = row.xPos + row.statementEdge + input.notchOffset;\n    if (this.info_.RTL) {\n      connX *= -1;\n    } else {\n      connX += this.constants_.DARK_PATH_OFFSET;\n    }\n    input.connectionModel.setOffsetInBlock(connX,\n        row.yPos + this.constants_.DARK_PATH_OFFSET);\n  }\n};\n\n/**\n * @override\n */\nBlockly.geras.Drawer.prototype.positionExternalValueConnection_ = function(row) {\n  var input = row.getLastInput();\n  if (input.connectionModel) {\n    var connX = row.xPos + row.width +\n        this.constants_.DARK_PATH_OFFSET;\n    if (this.info_.RTL) {\n      connX *= -1;\n    }\n    input.connectionModel.setOffsetInBlock(connX, row.yPos);\n  }\n};\n\n/**\n * @override\n */\nBlockly.geras.Drawer.prototype.positionNextConnection_ = function() {\n  var bottomRow = this.info_.bottomRow;\n\n  if (bottomRow.connection) {\n    var connInfo = bottomRow.connection;\n    var x = connInfo.xPos; // Already contains info about startX\n    var connX = (this.info_.RTL ? -x : x) +\n        (this.constants_.DARK_PATH_OFFSET / 2);\n    connInfo.connectionModel.setOffsetInBlock(\n        connX, bottomRow.baseline + this.constants_.DARK_PATH_OFFSET);\n  }\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Objects for rendering highlights on blocks.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.geras.HighlightConstantProvider');\n\ngoog.require('Blockly.blockRendering.ConstantProvider');\ngoog.require('Blockly.utils.svgPaths');\n\n\n/**\n * An object that provides constants for rendering highlights on blocks.\n * Some highlights are simple offsets of the parent paths and can be generated\n * programmatically.  Others, especially on curves, are just made out of piles\n * of constants and are hard to tweak.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @constructor\n * @package\n */\nBlockly.geras.HighlightConstantProvider = function(constants) {\n  /**\n   * The renderer's constant provider.\n   * @type {!Blockly.blockRendering.ConstantProvider}\n   */\n  this.constantProvider = constants;\n\n  /**\n   * The offset between the block's main path and highlight path.\n   * @type {number}\n   * @package\n   */\n  this.OFFSET = 0.5;\n\n  /**\n   * The start point, which is offset in both X and Y, as an SVG path chunk.\n   * @type {string}\n   */\n  this.START_POINT = Blockly.utils.svgPaths.moveBy(this.OFFSET, this.OFFSET);\n\n};\n\n/**\n * Initialize shape objects based on the constants set in the constructor.\n * @package\n */\nBlockly.geras.HighlightConstantProvider.prototype.init = function() {\n\n  /**\n   * An object containing sizing and path information about inside corner\n   * highlights.\n   * @type {!Object}\n   */\n  this.INSIDE_CORNER = this.makeInsideCorner();\n\n  /**\n   * An object containing sizing and path information about outside corner\n   * highlights.\n   * @type {!Object}\n   */\n  this.OUTSIDE_CORNER = this.makeOutsideCorner();\n\n  /**\n   * An object containing sizing and path information about puzzle tab\n   * highlights.\n   * @type {!Object}\n   */\n  this.PUZZLE_TAB = this.makePuzzleTab();\n\n  /**\n   * An object containing sizing and path information about notch highlights.\n   * @type {!Object}\n   */\n  this.NOTCH = this.makeNotch();\n\n  /**\n   * An object containing sizing and path information about highlights for\n   * collapsed block indicators.\n   * @type {!Object}\n   */\n  this.JAGGED_TEETH = this.makeJaggedTeeth();\n\n  /**\n   * An object containing sizing and path information about start hat\n   * highlights.\n   * @type {!Object}\n   */\n  this.START_HAT = this.makeStartHat();\n};\n\n/**\n * @return {!Object} An object containing sizing and path information about\n *     inside corner highlights.\n * @package\n */\nBlockly.geras.HighlightConstantProvider.prototype.makeInsideCorner = function() {\n  var radius = this.constantProvider.CORNER_RADIUS;\n  var offset = this.OFFSET;\n\n  /**\n   * Distance from shape edge to intersect with a curved corner at 45 degrees.\n   * Applies to highlighting on around the outside of a curve.\n   * @const\n   */\n  var distance45outside = (1 - Math.SQRT1_2) * (radius + offset) - offset;\n\n  var pathTopRtl =\n      Blockly.utils.svgPaths.moveBy(distance45outside, distance45outside) +\n      Blockly.utils.svgPaths.arc('a', '0 0,0', radius,\n          Blockly.utils.svgPaths.point(\n              -distance45outside - offset,\n              radius - distance45outside));\n\n  var pathBottomRtl =\n      Blockly.utils.svgPaths.arc('a', '0 0,0', radius + offset,\n          Blockly.utils.svgPaths.point(radius + offset, radius + offset));\n\n  var pathBottomLtr =\n      Blockly.utils.svgPaths.moveBy(distance45outside, - distance45outside) +\n      Blockly.utils.svgPaths.arc('a', '0 0,0', radius + offset,\n          Blockly.utils.svgPaths.point(\n              radius - distance45outside,\n              distance45outside + offset));\n\n  return {\n    width: radius + offset,\n    height: radius,\n    pathTop: function(rtl) {\n      return rtl ? pathTopRtl : '';\n    },\n    pathBottom: function(rtl) {\n      return rtl ? pathBottomRtl : pathBottomLtr;\n    },\n  };\n};\n\n/**\n * @return {!Object} An object containing sizing and path information about\n *     outside corner highlights.\n * @package\n */\nBlockly.geras.HighlightConstantProvider.prototype.makeOutsideCorner = function() {\n  var radius = this.constantProvider.CORNER_RADIUS;\n  var offset = this.OFFSET;\n\n  /**\n   * Distance from shape edge to intersect with a curved corner at 45 degrees.\n   * Applies to highlighting on around the inside of a curve.\n   * @const\n   */\n  var distance45inside = (1 - Math.SQRT1_2) * (radius - offset) + offset;\n\n  var topLeftStartX = distance45inside;\n  var topLeftStartY = distance45inside;\n  var topLeftCornerHighlightRtl =\n      Blockly.utils.svgPaths.moveBy(topLeftStartX, topLeftStartY) +\n      Blockly.utils.svgPaths.arc('a', '0 0,1', radius - offset,\n          Blockly.utils.svgPaths.point(radius - topLeftStartX, -topLeftStartY + offset));\n  /**\n   * SVG path for drawing the highlight on the rounded top-left corner.\n   * @const\n   */\n  var topLeftCornerHighlightLtr =\n      Blockly.utils.svgPaths.moveBy(offset, radius) +\n      Blockly.utils.svgPaths.arc('a', '0 0,1', radius - offset,\n          Blockly.utils.svgPaths.point(radius, -radius + offset));\n\n  var bottomLeftStartX = distance45inside;\n  var bottomLeftStartY = -distance45inside;\n  var bottomLeftPath = Blockly.utils.svgPaths.moveBy(\n      bottomLeftStartX, bottomLeftStartY) +\n          Blockly.utils.svgPaths.arc('a', '0 0,1', radius - offset,\n              Blockly.utils.svgPaths.point(-bottomLeftStartX + offset,\n                  -bottomLeftStartY - radius));\n\n  return {\n    height: radius,\n    topLeft: function(rtl) {\n      return rtl ? topLeftCornerHighlightRtl : topLeftCornerHighlightLtr;\n    },\n    bottomLeft: function() {\n      return bottomLeftPath;\n    }\n  };\n};\n\n/**\n * @return {!Object} An object containing sizing and path information about\n *     puzzle tab highlights.\n * @package\n */\nBlockly.geras.HighlightConstantProvider.prototype.makePuzzleTab = function() {\n  var width = this.constantProvider.TAB_WIDTH;\n  var height = this.constantProvider.TAB_HEIGHT;\n\n  // This is how much of the vertical block edge is actually drawn by the puzzle\n  // tab.\n  var verticalOverlap = 2.5;\n\n  var highlightRtlUp =\n      Blockly.utils.svgPaths.moveBy(-2, -height + verticalOverlap + 0.9) +\n      Blockly.utils.svgPaths.lineTo(width * -0.45, -2.1);\n\n  var highlightRtlDown =\n      Blockly.utils.svgPaths.lineOnAxis('v', verticalOverlap) +\n      Blockly.utils.svgPaths.moveBy(-width * 0.97, 2.5) +\n      Blockly.utils.svgPaths.curve('q',\n          [\n            Blockly.utils.svgPaths.point(-width * 0.05, 10),\n            Blockly.utils.svgPaths.point(width * 0.3, 9.5)\n          ]) +\n      Blockly.utils.svgPaths.moveBy(width * 0.67, -1.9) +\n      Blockly.utils.svgPaths.lineOnAxis('v', verticalOverlap);\n\n  var highlightLtrUp =\n      Blockly.utils.svgPaths.lineOnAxis('v', -1.5) +\n      Blockly.utils.svgPaths.moveBy(width * -0.92, -0.5) +\n      Blockly.utils.svgPaths.curve('q',\n          [\n            Blockly.utils.svgPaths.point(width * -0.19, -5.5),\n            Blockly.utils.svgPaths.point(0,-11)\n          ]) +\n      Blockly.utils.svgPaths.moveBy(width * 0.92, 1);\n\n  var highlightLtrDown =\n      Blockly.utils.svgPaths.moveBy(-5, height - 0.7) +\n      Blockly.utils.svgPaths.lineTo(width * 0.46, -2.1);\n\n  return {\n    width: width,\n    height: height,\n    pathUp: function(rtl) {\n      return rtl ? highlightRtlUp : highlightLtrUp;\n    },\n    pathDown: function(rtl) {\n      return rtl ? highlightRtlDown : highlightLtrDown;\n    }\n  };\n};\n\n/**\n * @return {!Object} An object containing sizing and path information about\n *     notch highlights.\n * @package\n */\nBlockly.geras.HighlightConstantProvider.prototype.makeNotch = function() {\n  // This is only for the previous connection.\n  var pathLeft =\n      Blockly.utils.svgPaths.lineOnAxis(\n          'h', this.OFFSET) +\n      this.constantProvider.NOTCH.pathLeft;\n  return {\n    pathLeft: pathLeft\n  };\n};\n\n/**\n * @return {!Object} An object containing sizing and path information about\n *     collapsed block edge highlights.\n * @package\n */\nBlockly.geras.HighlightConstantProvider.prototype.makeJaggedTeeth = function() {\n  var pathLeft =\n      Blockly.utils.svgPaths.lineTo(5.1, 2.6) +\n      Blockly.utils.svgPaths.moveBy(-10.2, 6.8) +\n      Blockly.utils.svgPaths.lineTo(5.1, 2.6);\n  return {\n    pathLeft: pathLeft,\n    height: 12,\n    width: 10.2\n  };\n};\n\n/**\n * @return {!Object} An object containing sizing and path information about\n *     start highlights.\n * @package\n */\nBlockly.geras.HighlightConstantProvider.prototype.makeStartHat = function() {\n  var hatHeight = this.constantProvider.START_HAT.height;\n  var pathRtl =\n      Blockly.utils.svgPaths.moveBy(25, -8.7) +\n      Blockly.utils.svgPaths.curve('c',\n          [\n            Blockly.utils.svgPaths.point(29.7, -6.2),\n            Blockly.utils.svgPaths.point(57.2, -0.5),\n            Blockly.utils.svgPaths.point(75, 8.7)\n          ]);\n\n  var pathLtr =\n      Blockly.utils.svgPaths.curve('c',\n          [\n            Blockly.utils.svgPaths.point(17.8, -9.2),\n            Blockly.utils.svgPaths.point(45.3, -14.9),\n            Blockly.utils.svgPaths.point(75, -8.7)\n          ]) +\n      Blockly.utils.svgPaths.moveTo(100.5, hatHeight + 0.5);\n  return {\n    path: function(rtl) {\n      return rtl ? pathRtl : pathLtr;\n    }\n  };\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that owns a block's rendering SVG elements.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n\n'use strict';\n\ngoog.provide('Blockly.geras.PathObject');\n\ngoog.require('Blockly.blockRendering.PathObject');\ngoog.require('Blockly.geras.ConstantProvider');\ngoog.require('Blockly.Theme');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * An object that handles creating and setting each of the SVG elements\n * used by the renderer.\n * @param {!SVGElement} root The root SVG element.\n * @param {!Blockly.Theme.BlockStyle} style The style object to use for\n *     colouring.\n * @param {!Blockly.geras.ConstantProvider} constants The renderer's constants.\n * @constructor\n * @extends {Blockly.blockRendering.PathObject}\n * @package\n */\nBlockly.geras.PathObject = function(root, style, constants) {\n  /**\n   * The renderer's constant provider.\n   * @type {!Blockly.geras.ConstantProvider}\n   */\n  this.constants = constants;\n\n  this.svgRoot = root;\n\n  // The order of creation for these next three matters, because that\n  // effectively sets their z-indices.\n\n  /**\n   * The dark path of the block.\n   * @type {SVGElement}\n   * @package\n   */\n  this.svgPathDark = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH,\n      {'class': 'blocklyPathDark', 'transform': 'translate(1,1)'},\n      this.svgRoot);\n\n  /**\n   * The primary path of the block.\n   * @type {!SVGElement}\n   * @package\n   */\n  this.svgPath = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH,\n      {'class': 'blocklyPath'}, this.svgRoot);\n\n  /**\n   * The light path of the block.\n   * @type {SVGElement}\n   * @package\n   */\n  this.svgPathLight = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.PATH,\n      {'class': 'blocklyPathLight'}, this.svgRoot);\n\n  /**\n   * The colour of the dark path on the block in '#RRGGBB' format.\n   * @type {string}\n   * @package\n   */\n  this.colourDark = '#000000';\n\n  /**\n   * The style object to use when colouring block paths.\n   * @type {!Blockly.Theme.BlockStyle}\n   * @package\n   */\n  this.style = style;\n};\nBlockly.utils.object.inherits(Blockly.geras.PathObject,\n    Blockly.blockRendering.PathObject);\n\n/**\n * @override\n */\nBlockly.geras.PathObject.prototype.setPath = function(mainPath) {\n  this.svgPath.setAttribute('d', mainPath);\n  this.svgPathDark.setAttribute('d', mainPath);\n};\n\n/**\n * Set the highlight path generated by the renderer onto the SVG element.\n * @param {string} highlightPath The highlight path.\n * @package\n */\nBlockly.geras.PathObject.prototype.setHighlightPath = function(highlightPath) {\n  this.svgPathLight.setAttribute('d', highlightPath);\n};\n\n/**\n * @override\n */\nBlockly.geras.PathObject.prototype.flipRTL = function() {\n  // Mirror the block's path.\n  this.svgPath.setAttribute('transform', 'scale(-1 1)');\n  this.svgPathLight.setAttribute('transform', 'scale(-1 1)');\n  this.svgPathDark.setAttribute('transform', 'translate(1,1) scale(-1 1)');\n};\n\n/**\n * @override\n */\nBlockly.geras.PathObject.prototype.applyColour = function(block) {\n  this.svgPathLight.style.display = '';\n  this.svgPathDark.style.display = '';\n  this.svgPathLight.setAttribute('stroke', this.style.colourTertiary);\n  this.svgPathDark.setAttribute('fill', this.colourDark);\n\n  Blockly.geras.PathObject.superClass_.applyColour.call(this, block);\n\n  this.svgPath.setAttribute('stroke', 'none');\n};\n\n/**\n * @override\n */\nBlockly.geras.PathObject.prototype.setStyle = function(blockStyle) {\n  this.style = blockStyle;\n  this.colourDark =\n      Blockly.utils.colour.blend('#000', this.style.colourPrimary, 0.2) ||\n      this.colourDark;\n};\n\n/**\n * @override\n */\nBlockly.geras.PathObject.prototype.updateHighlighted = function(highlighted) {\n  if (highlighted) {\n    this.svgPath.setAttribute('filter',\n        'url(#' + this.constants.embossFilterId + ')');\n    this.svgPathLight.style.display = 'none';\n  } else {\n    this.svgPath.setAttribute('filter', 'none');\n    this.svgPathLight.style.display = 'inline';\n  }\n};\n\n/**\n * @override\n */\nBlockly.geras.PathObject.prototype.updateShadow_ = function(shadow) {\n  if (shadow) {\n    this.svgPathLight.style.display = 'none';\n    this.svgPathDark.setAttribute('fill', this.style.colourSecondary);\n    this.svgPath.setAttribute('stroke', 'none');\n    this.svgPath.setAttribute('fill', this.style.colourSecondary);\n  }\n};\n\n/**\n * @override\n */\nBlockly.geras.PathObject.prototype.updateDisabled_ = function(disabled) {\n  Blockly.geras.PathObject.superClass_.updateDisabled_.call(this, disabled);\n  if (disabled) {\n    this.svgPath.setAttribute('stroke', 'none');\n  }\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Geras renderer.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.geras.Renderer');\n\ngoog.require('Blockly.blockRendering');\ngoog.require('Blockly.blockRendering.Renderer');\ngoog.require('Blockly.geras.ConstantProvider');\ngoog.require('Blockly.geras.Drawer');\ngoog.require('Blockly.geras.HighlightConstantProvider');\ngoog.require('Blockly.geras.PathObject');\ngoog.require('Blockly.geras.RenderInfo');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * The geras renderer.\n * @param {string} name The renderer name.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Renderer}\n */\nBlockly.geras.Renderer = function(name) {\n  Blockly.geras.Renderer.superClass_.constructor.call(this, name);\n\n  /**\n   * The renderer's highlight constant provider.\n   * @type {Blockly.geras.HighlightConstantProvider}\n   * @private\n   */\n  this.highlightConstants_ = null;\n};\nBlockly.utils.object.inherits(Blockly.geras.Renderer,\n    Blockly.blockRendering.Renderer);\n\n/**\n * Initialize the renderer.  Geras has a highlight provider in addition to\n * the normal constant provider.\n * @package\n * @override\n */\nBlockly.geras.Renderer.prototype.init = function(theme,\n    opt_rendererOverrides) {\n  Blockly.geras.Renderer.superClass_.init.call(this, theme,\n      opt_rendererOverrides);\n  this.highlightConstants_ = this.makeHighlightConstants_();\n  this.highlightConstants_.init();\n};\n\n/**\n * @override\n */\nBlockly.geras.Renderer.prototype.refreshDom = function(svg, theme) {\n  Blockly.geras.Renderer.superClass_.refreshDom.call(this, svg, theme);\n  this.getHighlightConstants().init();\n};\n\n/**\n * @override\n */\nBlockly.geras.Renderer.prototype.makeConstants_ = function() {\n  return new Blockly.geras.ConstantProvider();\n};\n\n/**\n * Create a new instance of the renderer's render info object.\n * @param {!Blockly.BlockSvg} block The block to measure.\n * @return {!Blockly.geras.RenderInfo} The render info object.\n * @protected\n * @override\n */\nBlockly.geras.Renderer.prototype.makeRenderInfo_ = function(block) {\n  return new Blockly.geras.RenderInfo(this, block);\n};\n\n/**\n * Create a new instance of the renderer's drawer.\n * @param {!Blockly.BlockSvg} block The block to render.\n * @param {!Blockly.blockRendering.RenderInfo} info An object containing all\n *   information needed to render this block.\n * @return {!Blockly.geras.Drawer} The drawer.\n * @protected\n * @override\n */\nBlockly.geras.Renderer.prototype.makeDrawer_ = function(block, info) {\n  return new Blockly.geras.Drawer(block,\n      /** @type {!Blockly.geras.RenderInfo} */ (info));\n};\n\n/**\n * Create a new instance of a renderer path object.\n * @param {!SVGElement} root The root SVG element.\n * @param {!Blockly.Theme.BlockStyle} style The style object to use for\n *     colouring.\n * @return {!Blockly.geras.PathObject} The renderer path object.\n * @package\n * @override\n */\nBlockly.geras.Renderer.prototype.makePathObject = function(root, style) {\n  return new Blockly.geras.PathObject(root, style,\n      /** @type {!Blockly.geras.ConstantProvider} */ (this.getConstants()));\n};\n\n/**\n * Create a new instance of the renderer's highlight constant provider.\n * @return {!Blockly.geras.HighlightConstantProvider} The highlight constant\n *     provider.\n * @protected\n */\nBlockly.geras.Renderer.prototype.makeHighlightConstants_ = function() {\n  return new Blockly.geras.HighlightConstantProvider(\n      /** @type {!Blockly.blockRendering.ConstantProvider} */\n      (this.getConstants()));\n};\n\n/**\n * Get the renderer's highlight constant provider.  We assume that when this is\n * called, the renderer has already been initialized.\n * @return {!Blockly.geras.HighlightConstantProvider} The highlight constant\n *     provider.\n * @package\n */\nBlockly.geras.Renderer.prototype.getHighlightConstants = function() {\n  return (\n    /** @type {!Blockly.geras.HighlightConstantProvider} */\n    (this.highlightConstants_));\n};\n\nBlockly.blockRendering.register('geras', Blockly.geras.Renderer);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview New (evolving) renderer.\n * Thrasos: spirit of boldness.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.thrasos');\ngoog.provide('Blockly.thrasos.RenderInfo');\n\ngoog.require('Blockly.blockRendering.BottomRow');\ngoog.require('Blockly.blockRendering.ExternalValueInput');\ngoog.require('Blockly.blockRendering.InlineInput');\ngoog.require('Blockly.blockRendering.InputRow');\ngoog.require('Blockly.blockRendering.Measurable');\ngoog.require('Blockly.blockRendering.NextConnection');\ngoog.require('Blockly.blockRendering.OutputConnection');\ngoog.require('Blockly.blockRendering.PreviousConnection');\ngoog.require('Blockly.blockRendering.RenderInfo');\ngoog.require('Blockly.blockRendering.Row');\ngoog.require('Blockly.blockRendering.SpacerRow');\ngoog.require('Blockly.blockRendering.StatementInput');\ngoog.require('Blockly.blockRendering.TopRow');\ngoog.require('Blockly.blockRendering.Types');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * An object containing all sizing information needed to draw this block.\n *\n * This measure pass does not propagate changes to the block (although fields\n * may choose to rerender when getSize() is called).  However, calling it\n * repeatedly may be expensive.\n *\n * @param {!Blockly.thrasos.Renderer} renderer The renderer in use.\n * @param {!Blockly.BlockSvg} block The block to measure.\n * @constructor\n * @package\n * @extends {Blockly.blockRendering.RenderInfo}\n */\nBlockly.thrasos.RenderInfo = function(renderer, block) {\n  Blockly.thrasos.RenderInfo.superClass_.constructor.call(this, renderer, block);\n};\nBlockly.utils.object.inherits(Blockly.thrasos.RenderInfo,\n    Blockly.blockRendering.RenderInfo);\n\n/**\n * Get the block renderer in use.\n * @return {!Blockly.thrasos.Renderer} The block renderer in use.\n * @package\n */\nBlockly.thrasos.RenderInfo.prototype.getRenderer = function() {\n  return /** @type {!Blockly.thrasos.Renderer} */ (this.renderer_);\n};\n\n/**\n * @override\n */\nBlockly.thrasos.RenderInfo.prototype.addElemSpacing_ = function() {\n  var hasExternalInputs = false;\n  for (var i = 0, row; (row = this.rows[i]); i++) {\n    if (row.hasExternalInput) {\n      hasExternalInputs = true;\n    }\n  }\n  for (var i = 0, row; (row = this.rows[i]); i++) {\n    var oldElems = row.elements;\n    row.elements = [];\n    // No spacing needed before the corner on the top row or the bottom row.\n    if (row.startsWithElemSpacer()) {\n      // There's a spacer before the first element in the row.\n      row.elements.push(new Blockly.blockRendering.InRowSpacer(\n          this.constants_, this.getInRowSpacing_(null, oldElems[0])));\n    }\n    for (var e = 0; e < oldElems.length - 1; e++) {\n      row.elements.push(oldElems[e]);\n      var spacing = this.getInRowSpacing_(oldElems[e], oldElems[e + 1]);\n      row.elements.push(\n          new Blockly.blockRendering.InRowSpacer(this.constants_, spacing));\n    }\n    row.elements.push(oldElems[oldElems.length - 1]);\n    if (row.endsWithElemSpacer()) {\n      var spacing = this.getInRowSpacing_(oldElems[oldElems.length - 1], null);\n      if (hasExternalInputs && row.hasDummyInput) {\n        spacing += this.constants_.TAB_WIDTH;\n      }\n      // There's a spacer after the last element in the row.\n      row.elements.push(new Blockly.blockRendering.InRowSpacer(\n          this.constants_, spacing));\n    }\n  }\n};\n\n/**\n * @override\n */\nBlockly.thrasos.RenderInfo.prototype.getInRowSpacing_ = function(prev, next) {\n  if (!prev) {\n    // Between an editable field and the beginning of the row.\n    if (next && Blockly.blockRendering.Types.isField(next) &&\n        (/** @type Blockly.blockRendering.Field */ (next)).isEditable) {\n      return this.constants_.MEDIUM_PADDING;\n    }\n    // Inline input at the beginning of the row.\n    if (next && Blockly.blockRendering.Types.isInlineInput(next)) {\n      return this.constants_.MEDIUM_LARGE_PADDING;\n    }\n    if (next && Blockly.blockRendering.Types.isStatementInput(next)) {\n      return this.constants_.STATEMENT_INPUT_PADDING_LEFT;\n    }\n    // Anything else at the beginning of the row.\n    return this.constants_.LARGE_PADDING;\n  }\n\n  // Spacing between a non-input and the end of the row.\n  if (!Blockly.blockRendering.Types.isInput(prev) && !next) {\n    // Between an editable field and the end of the row.\n    if (Blockly.blockRendering.Types.isField(prev) &&\n        (/** @type Blockly.blockRendering.Field */ (prev)).isEditable) {\n      return this.constants_.MEDIUM_PADDING;\n    }\n    // Padding at the end of an icon-only row to make the block shape clearer.\n    if (Blockly.blockRendering.Types.isIcon(prev)) {\n      return (this.constants_.LARGE_PADDING * 2) + 1;\n    }\n    if (Blockly.blockRendering.Types.isHat(prev)) {\n      return this.constants_.NO_PADDING;\n    }\n    // Establish a minimum width for a block with a previous or next connection.\n    if (Blockly.blockRendering.Types.isPreviousOrNextConnection(prev)) {\n      return this.constants_.LARGE_PADDING;\n    }\n    // Between rounded corner and the end of the row.\n    if (Blockly.blockRendering.Types.isLeftRoundedCorner(prev)) {\n      return this.constants_.MIN_BLOCK_WIDTH;\n    }\n    // Between a jagged edge and the end of the row.\n    if (Blockly.blockRendering.Types.isJaggedEdge(prev)) {\n      return this.constants_.NO_PADDING;\n    }\n    // Between noneditable fields and icons and the end of the row.\n    return this.constants_.LARGE_PADDING;\n  }\n\n  // Between inputs and the end of the row.\n  if (Blockly.blockRendering.Types.isInput(prev) && !next) {\n    if (Blockly.blockRendering.Types.isExternalInput(prev)) {\n      return this.constants_.NO_PADDING;\n    } else if (Blockly.blockRendering.Types.isInlineInput(prev)) {\n      return this.constants_.LARGE_PADDING;\n    } else if (Blockly.blockRendering.Types.isStatementInput(prev)) {\n      return this.constants_.NO_PADDING;\n    }\n  }\n\n  // Spacing between a non-input and an input.\n  if (!Blockly.blockRendering.Types.isInput(prev) &&\n      next && Blockly.blockRendering.Types.isInput(next)) {\n    // Between an editable field and an input.\n    if (Blockly.blockRendering.Types.isField(prev) &&\n        (/** @type Blockly.blockRendering.Field */ (prev)).isEditable) {\n      if (Blockly.blockRendering.Types.isInlineInput(next)) {\n        return this.constants_.SMALL_PADDING;\n      } else if (Blockly.blockRendering.Types.isExternalInput(next)) {\n        return this.constants_.SMALL_PADDING;\n      }\n    } else {\n      if (Blockly.blockRendering.Types.isInlineInput(next)) {\n        return this.constants_.MEDIUM_LARGE_PADDING;\n      } else if (Blockly.blockRendering.Types.isExternalInput(next)) {\n        return this.constants_.MEDIUM_LARGE_PADDING;\n      } else if (Blockly.blockRendering.Types.isStatementInput(next)) {\n        return this.constants_.LARGE_PADDING;\n      }\n    }\n    return this.constants_.LARGE_PADDING - 1;\n  }\n\n  // Spacing between an icon and an icon or field.\n  if (Blockly.blockRendering.Types.isIcon(prev) &&\n      next && !Blockly.blockRendering.Types.isInput(next)) {\n    return this.constants_.LARGE_PADDING;\n  }\n\n  // Spacing between an inline input and a field.\n  if (Blockly.blockRendering.Types.isInlineInput(prev) &&\n      next && Blockly.blockRendering.Types.isField(next)) {\n    // Editable field after inline input.\n    if ((/** @type Blockly.blockRendering.Field */ (next)).isEditable) {\n      return this.constants_.MEDIUM_PADDING;\n    } else {\n      // Noneditable field after inline input.\n      return this.constants_.LARGE_PADDING;\n    }\n  }\n\n  if (Blockly.blockRendering.Types.isLeftSquareCorner(prev) && next) {\n    // Spacing between a hat and a corner\n    if (Blockly.blockRendering.Types.isHat(next)) {\n      return this.constants_.NO_PADDING;\n    }\n    // Spacing between a square corner and a previous or next connection\n    if (Blockly.blockRendering.Types.isPreviousConnection(next) ||\n        Blockly.blockRendering.Types.isNextConnection(next)) {\n      return next.notchOffset;\n    }\n  }\n\n  // Spacing between a rounded corner and a previous or next connection.\n  if (Blockly.blockRendering.Types.isLeftRoundedCorner(prev) && next) {\n    return next.notchOffset - this.constants_.CORNER_RADIUS;\n  }\n\n  // Spacing between two fields of the same editability.\n  if (Blockly.blockRendering.Types.isField(prev) &&\n      next && Blockly.blockRendering.Types.isField(next) &&\n      ((/** @type Blockly.blockRendering.Field */ (prev)).isEditable ==\n          (/** @type Blockly.blockRendering.Field */ (next)).isEditable)) {\n    return this.constants_.LARGE_PADDING;\n  }\n\n  // Spacing between anything and a jagged edge.\n  if (next && Blockly.blockRendering.Types.isJaggedEdge(next)) {\n    return this.constants_.LARGE_PADDING;\n  }\n\n  return this.constants_.MEDIUM_PADDING;\n};\n\n/**\n * @override\n */\nBlockly.thrasos.RenderInfo.prototype.getSpacerRowHeight_ = function(\n    prev, next) {\n  // If we have an empty block add a spacer to increase the height.\n  if (Blockly.blockRendering.Types.isTopRow(prev) &&\n      Blockly.blockRendering.Types.isBottomRow(next)) {\n    return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;\n  }\n  // Top and bottom rows act as a spacer so we don't need any extra padding.\n  if (Blockly.blockRendering.Types.isTopRow(prev) ||\n      Blockly.blockRendering.Types.isBottomRow(next)) {\n    return this.constants_.NO_PADDING;\n  }\n  if (prev.hasExternalInput && next.hasExternalInput) {\n    return this.constants_.LARGE_PADDING;\n  }\n  if (!prev.hasStatement && next.hasStatement) {\n    return this.constants_.BETWEEN_STATEMENT_PADDING_Y;\n  }\n  if (prev.hasStatement && next.hasStatement) {\n    return this.constants_.LARGE_PADDING;\n  }\n  if (prev.hasDummyInput || next.hasDummyInput) {\n    return this.constants_.LARGE_PADDING;\n  }\n  return this.constants_.MEDIUM_PADDING;\n};\n\n/**\n * @override\n */\nBlockly.thrasos.RenderInfo.prototype.getElemCenterline_ = function(row, elem) {\n  if (Blockly.blockRendering.Types.isSpacer(elem)) {\n    return row.yPos + elem.height / 2;\n  }\n  if (Blockly.blockRendering.Types.isBottomRow(row)) {\n    var baseline = row.yPos + row.height - row.descenderHeight;\n    if (Blockly.blockRendering.Types.isNextConnection(elem)) {\n      return baseline + elem.height / 2;\n    }\n    return baseline - elem.height / 2;\n  }\n  if (Blockly.blockRendering.Types.isTopRow(row)) {\n    if (Blockly.blockRendering.Types.isHat(elem)) {\n      return row.capline - elem.height / 2;\n    }\n    return row.capline + elem.height / 2;\n  }\n\n  var result = row.yPos;\n  if (Blockly.blockRendering.Types.isField(elem) && row.hasStatement) {\n    var offset = this.constants_.TALL_INPUT_FIELD_OFFSET_Y +\n        elem.height / 2;\n    result += offset;\n  } else {\n    result += (row.height / 2);\n  }\n  return result;\n};\n\n/**\n * @override\n */\nBlockly.thrasos.RenderInfo.prototype.finalize_ = function() {\n  // Performance note: this could be combined with the draw pass, if the time\n  // that this takes is excessive.  But it shouldn't be, because it only\n  // accesses and sets properties that already exist on the objects.\n  var widestRowWithConnectedBlocks = 0;\n  var yCursor = 0;\n  for (var i = 0, row; (row = this.rows[i]); i++) {\n    row.yPos = yCursor;\n    row.xPos = this.startX;\n    yCursor += row.height;\n\n    widestRowWithConnectedBlocks =\n        Math.max(widestRowWithConnectedBlocks, row.widthWithConnectedBlocks);\n    // Add padding to the bottom row if block height is less than minimum\n    var heightWithoutHat = yCursor - this.topRow.ascenderHeight;\n    if (row == this.bottomRow &&\n        heightWithoutHat < this.constants_.MIN_BLOCK_HEIGHT) {\n      // But the hat height shouldn't be part of this.\n      var diff = this.constants_.MIN_BLOCK_HEIGHT - heightWithoutHat;\n      this.bottomRow.height += diff;\n      yCursor += diff;\n    }\n    this.recordElemPositions_(row);\n  }\n  if (this.outputConnection && this.block_.nextConnection &&\n      this.block_.nextConnection.isConnected()) {\n    // Include width of connected block in value to stack width measurement.\n    widestRowWithConnectedBlocks =\n        Math.max(widestRowWithConnectedBlocks,\n            this.block_.nextConnection.targetBlock().getHeightWidth().width);\n  }\n\n  this.bottomRow.baseline = yCursor - this.bottomRow.descenderHeight;\n  this.widthWithChildren = widestRowWithConnectedBlocks + this.startX;\n\n  this.height = yCursor;\n  this.startY = this.topRow.capline;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Thrasos renderer.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.thrasos.Renderer');\n\ngoog.require('Blockly.blockRendering');\ngoog.require('Blockly.blockRendering.Renderer');\ngoog.require('Blockly.thrasos.RenderInfo');\ngoog.require('Blockly.utils.object');\n\n/**\n * The thrasos renderer.\n * @param {string} name The renderer name.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Renderer}\n */\nBlockly.thrasos.Renderer = function(name) {\n  Blockly.thrasos.Renderer.superClass_.constructor.call(this, name);\n};\nBlockly.utils.object.inherits(Blockly.thrasos.Renderer,\n    Blockly.blockRendering.Renderer);\n\n/**\n * Create a new instance of the renderer's render info object.\n * @param {!Blockly.BlockSvg} block The block to measure.\n * @return {!Blockly.thrasos.RenderInfo} The render info object.\n * @protected\n * @override\n */\nBlockly.thrasos.Renderer.prototype.makeRenderInfo_ = function(block) {\n  return new Blockly.thrasos.RenderInfo(this, block);\n};\n\n\nBlockly.blockRendering.register('thrasos', Blockly.thrasos.Renderer);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that provides constants for rendering blocks in Zelos\n * mode.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.zelos.ConstantProvider');\n\ngoog.require('Blockly.blockRendering.ConstantProvider');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Svg');\ngoog.require('Blockly.utils.svgPaths');\n\n\n/**\n * An object that provides constants for rendering blocks in Zelos mode.\n * @constructor\n * @package\n * @extends {Blockly.blockRendering.ConstantProvider}\n */\nBlockly.zelos.ConstantProvider = function() {\n  Blockly.zelos.ConstantProvider.superClass_.constructor.call(this);\n\n  this.GRID_UNIT = 4;\n\n  /**\n   * @override\n   */\n  this.SMALL_PADDING = this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.MEDIUM_PADDING = 2 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.MEDIUM_LARGE_PADDING = 3 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.LARGE_PADDING = 4 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.CORNER_RADIUS = 1 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.NOTCH_WIDTH = 9 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.NOTCH_HEIGHT = 2 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.NOTCH_OFFSET_LEFT = 3 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.STATEMENT_INPUT_NOTCH_OFFSET = this.NOTCH_OFFSET_LEFT;\n\n  /**\n   * @override\n   */\n  this.MIN_BLOCK_WIDTH = 2 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.MIN_BLOCK_HEIGHT = 12 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.EMPTY_STATEMENT_INPUT_HEIGHT = 6 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.TAB_OFFSET_FROM_TOP = 0;\n\n  /**\n   * @override\n   */\n  this.TOP_ROW_MIN_HEIGHT = this.CORNER_RADIUS;\n\n  /**\n   * @override\n   */\n  this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT = this.LARGE_PADDING;\n\n  /**\n   * @override\n   */\n  this.BOTTOM_ROW_MIN_HEIGHT = this.CORNER_RADIUS;\n\n  /**\n   * @override\n   */\n  this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT = 6 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.STATEMENT_BOTTOM_SPACER = -this.NOTCH_HEIGHT;\n\n  /**\n   * Minimum statement input spacer width.\n   * @type {number}\n   */\n  this.STATEMENT_INPUT_SPACER_MIN_WIDTH = 40 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.STATEMENT_INPUT_PADDING_LEFT = 4 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.EMPTY_INLINE_INPUT_PADDING = 4 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.EMPTY_INLINE_INPUT_HEIGHT = 8 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.DUMMY_INPUT_MIN_HEIGHT = 8 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.DUMMY_INPUT_SHADOW_MIN_HEIGHT = 6 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.CURSOR_WS_WIDTH = 20 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.CURSOR_COLOUR = '#ffa200';\n\n  /**\n   * Radius of the cursor for input and output connections.\n   * @type {number}\n   * @package\n   */\n  this.CURSOR_RADIUS = 5;\n\n  /**\n   * @override\n   */\n  this.JAGGED_TEETH_HEIGHT = 0;\n\n  /**\n   * @override\n   */\n  this.JAGGED_TEETH_WIDTH = 0;\n\n  /**\n   * @override\n   */\n  this.START_HAT_HEIGHT = 22;\n\n  /**\n   * @override\n   */\n  this.START_HAT_WIDTH = 96;\n\n  /**\n   * @enum {number}\n   * @override\n   */\n  this.SHAPES = {\n    HEXAGONAL: 1,\n    ROUND: 2,\n    SQUARE: 3,\n    PUZZLE: 4,\n    NOTCH: 5\n  };\n\n  /**\n   * Map of output/input shapes and the amount they should cause a block to be\n   * padded. Outer key is the outer shape, inner key is the inner shape.\n   * When a block with the outer shape contains an input block with the inner\n   * shape on its left or right edge, the block elements are aligned such that\n   * the padding specified is reached.\n   * @package\n   */\n  this.SHAPE_IN_SHAPE_PADDING = {\n    1: { // Outer shape: hexagon.\n      0: 5 * this.GRID_UNIT, // Field in hexagon.\n      1: 2 * this.GRID_UNIT, // Hexagon in hexagon.\n      2: 5 * this.GRID_UNIT, // Round in hexagon.\n      3: 5 * this.GRID_UNIT  // Square in hexagon.\n    },\n    2: { // Outer shape: round.\n      0: 3 * this.GRID_UNIT, // Field in round.\n      1: 3 * this.GRID_UNIT, // Hexagon in round.\n      2: 1 * this.GRID_UNIT, // Round in round.\n      3: 2 * this.GRID_UNIT  // Square in round.\n    },\n    3: { // Outer shape: square.\n      0: 2 * this.GRID_UNIT, // Field in square.\n      1: 2 * this.GRID_UNIT, // Hexagon in square.\n      2: 2 * this.GRID_UNIT, // Round in square.\n      3: 2 * this.GRID_UNIT  // Square in square.\n    }\n  };\n\n  /**\n   * @override\n   */\n  this.FULL_BLOCK_FIELDS = true;\n\n  /**\n   * @override\n   */\n  this.FIELD_TEXT_FONTSIZE = 3 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.FIELD_TEXT_FONTWEIGHT = 'bold';\n\n  /**\n   * @override\n   */\n  this.FIELD_TEXT_FONTFAMILY =\n    '\"Helvetica Neue\", \"Segoe UI\", Helvetica, sans-serif';\n\n  /**\n   * @override\n   */\n  this.FIELD_BORDER_RECT_RADIUS = this.CORNER_RADIUS;\n\n  /**\n   * @override\n   */\n  this.FIELD_BORDER_RECT_X_PADDING = 2 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.FIELD_BORDER_RECT_Y_PADDING = 1.625 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.FIELD_BORDER_RECT_HEIGHT = 8 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT = 8 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW = true;\n\n  /**\n   * @override\n   */\n  this.FIELD_DROPDOWN_COLOURED_DIV = true;\n\n  /**\n   * @override\n   */\n  this.FIELD_DROPDOWN_SVG_ARROW = true;\n\n  /**\n   * @override\n   */\n  this.FIELD_DROPDOWN_SVG_ARROW_PADDING = this.FIELD_BORDER_RECT_X_PADDING;\n\n  /**\n   * @override\n   */\n  this.FIELD_TEXTINPUT_BOX_SHADOW = true;\n\n  /**\n   * @override\n   */\n  this.FIELD_COLOUR_FULL_BLOCK = true;\n\n  /**\n   * @override\n   */\n  this.FIELD_COLOUR_DEFAULT_WIDTH = 2 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.FIELD_COLOUR_DEFAULT_HEIGHT = 4 * this.GRID_UNIT;\n\n  /**\n   * @override\n   */\n  this.FIELD_CHECKBOX_X_OFFSET = 1 * this.GRID_UNIT;\n\n  /**\n   * The maximum width of a dynamic connection shape.\n   * @type {number}\n   */\n  this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH = 12 * this.GRID_UNIT;\n\n  /**\n   * The selected glow colour.\n   * @type {string}\n   */\n  this.SELECTED_GLOW_COLOUR = '#fff200';\n\n  /**\n   * The size of the selected glow.\n   * @type {number}\n   */\n  this.SELECTED_GLOW_SIZE = 0.5;\n\n  /**\n   * The replacement glow colour.\n   * @type {string}\n   */\n  this.REPLACEMENT_GLOW_COLOUR = '#fff200';\n\n  /**\n   * The size of the selected glow.\n   * @type {number}\n   */\n  this.REPLACEMENT_GLOW_SIZE = 2;\n\n  /**\n   * The ID of the selected glow filter, or the empty string if no filter is\n   * set.\n   * @type {string}\n   * @package\n   */\n  this.selectedGlowFilterId = '';\n\n  /**\n   * The <filter> element to use for a selected glow, or null if not set.\n   * @type {SVGElement}\n   * @private\n   */\n  this.selectedGlowFilter_ = null;\n\n  /**\n   * The ID of the replacement glow filter, or the empty string if no filter is\n   * set.\n   * @type {string}\n   * @package\n   */\n  this.replacementGlowFilterId = '';\n\n  /**\n   * The <filter> element to use for a replacement glow, or null if not set.\n   * @type {SVGElement}\n   * @private\n   */\n  this.replacementGlowFilter_ = null;\n};\nBlockly.utils.object.inherits(Blockly.zelos.ConstantProvider,\n    Blockly.blockRendering.ConstantProvider);\n\n/**\n * @override\n */\nBlockly.zelos.ConstantProvider.prototype.setFontConstants_ = function(theme) {\n  Blockly.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,\n      theme);\n\n  this.FIELD_BORDER_RECT_HEIGHT = this.FIELD_TEXT_HEIGHT +\n      this.FIELD_BORDER_RECT_Y_PADDING * 2;\n  this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT = this.FIELD_BORDER_RECT_HEIGHT;\n};\n\n/**\n * @override\n */\nBlockly.zelos.ConstantProvider.prototype.init = function() {\n  Blockly.zelos.ConstantProvider.superClass_.init.call(this);\n  this.HEXAGONAL = this.makeHexagonal();\n  this.ROUNDED = this.makeRounded();\n  this.SQUARED = this.makeSquared();\n\n  this.STATEMENT_INPUT_NOTCH_OFFSET = this.NOTCH_OFFSET_LEFT +\n      this.INSIDE_CORNERS.rightWidth;\n};\n\n/**\n * @override\n */\nBlockly.zelos.ConstantProvider.prototype.setDynamicProperties_ = function(\n    theme) {\n  Blockly.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,\n      theme);\n\n  this.SELECTED_GLOW_COLOUR =\n      theme.getComponentStyle('selectedGlowColour') ||\n      this.SELECTED_GLOW_COLOUR;\n  var selectedGlowSize =\n      Number(theme.getComponentStyle('selectedGlowSize'));\n  this.SELECTED_GLOW_SIZE =\n      selectedGlowSize && !isNaN(selectedGlowSize) ?\n      selectedGlowSize : this.SELECTED_GLOW_SIZE;\n  this.REPLACEMENT_GLOW_COLOUR =\n      theme.getComponentStyle('replacementGlowColour') ||\n      this.REPLACEMENT_GLOW_COLOUR;\n  var replacementGlowSize =\n      Number(theme.getComponentStyle('replacementGlowSize'));\n  this.REPLACEMENT_GLOW_SIZE =\n      replacementGlowSize && !isNaN(replacementGlowSize) ?\n      replacementGlowSize : this.REPLACEMENT_GLOW_SIZE;\n};\n\n/**\n * @override\n */\nBlockly.zelos.ConstantProvider.prototype.dispose = function() {\n  Blockly.zelos.ConstantProvider.superClass_.dispose.call(this);\n  if (this.selectedGlowFilter_) {\n    Blockly.utils.dom.removeNode(this.selectedGlowFilter_);\n  }\n  if (this.replacementGlowFilter_) {\n    Blockly.utils.dom.removeNode(this.replacementGlowFilter_);\n  }\n};\n\n/**\n * @override\n */\nBlockly.zelos.ConstantProvider.prototype.makeStartHat = function() {\n  var height = this.START_HAT_HEIGHT;\n  var width = this.START_HAT_WIDTH;\n\n  var mainPath =\n      Blockly.utils.svgPaths.curve('c',\n          [\n            Blockly.utils.svgPaths.point(25, -height),\n            Blockly.utils.svgPaths.point(71, -height),\n            Blockly.utils.svgPaths.point(width, 0)\n          ]);\n  return {\n    height: height,\n    width: width,\n    path: mainPath\n  };\n};\n\n/**\n * Create sizing and path information about a hexagonal shape.\n * @return {!Object} An object containing sizing and path information about\n *     a hexagonal shape for connections.\n * @package\n */\nBlockly.zelos.ConstantProvider.prototype.makeHexagonal = function() {\n  var maxWidth = this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;\n\n  // The main path for the hexagonal connection shape is made out of two lines.\n  // The lines are defined with relative positions and require the block height.\n  // The 'up' and 'down' versions of the paths are the same, but the Y sign\n  // flips.  The 'left' and 'right' versions of the path are also the same, but\n  // the X sign flips.\n  function makeMainPath(height, up, right) {\n    var halfHeight = height / 2;\n    var width = halfHeight > maxWidth ? maxWidth : halfHeight;\n    var forward = up ? -1 : 1;\n    var direction = right ? -1 : 1;\n    var dy = forward * height / 2;\n    return Blockly.utils.svgPaths.lineTo(-direction * width, dy) +\n        Blockly.utils.svgPaths.lineTo(direction * width, dy);\n  }\n\n  return {\n    type: this.SHAPES.HEXAGONAL,\n    isDynamic: true,\n    width: function(height) {\n      var halfHeight = height / 2;\n      return halfHeight > maxWidth ? maxWidth : halfHeight;\n    },\n    height: function(height) {\n      return height;\n    },\n    connectionOffsetY: function(connectionHeight) {\n      return connectionHeight / 2;\n    },\n    connectionOffsetX: function(connectionWidth) {\n      return - connectionWidth;\n    },\n    pathDown: function(height) {\n      return makeMainPath(height, false, false);\n    },\n    pathUp: function(height) {\n      return makeMainPath(height, true, false);\n    },\n    pathRightDown: function(height) {\n      return makeMainPath(height, false, true);\n    },\n    pathRightUp: function(height) {\n      return makeMainPath(height, false, true);\n    },\n  };\n};\n\n/**\n * Create sizing and path information about a rounded shape.\n * @return {!Object} An object containing sizing and path information about\n *     a rounded shape for connections.\n * @package\n */\nBlockly.zelos.ConstantProvider.prototype.makeRounded = function() {\n  var maxWidth = this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;\n  var maxHeight = maxWidth * 2;\n\n  // The main path for the rounded connection shape is made out of two arcs and\n  // a line that joins them.  The arcs are defined with relative positions.\n  // Usually, the height of the block is split between the two arcs. In the case\n  // where the height of the block exceeds the maximum height, a line is drawn\n  // in between the two arcs.\n  // The 'up' and 'down' versions of the paths are the same, but the Y sign\n  // flips.  The 'up' and 'right' versions of the path flip the sweep-flag\n  // which moves the arc at negative angles.\n  function makeMainPath(blockHeight, up, right) {\n    var remainingHeight = blockHeight > maxHeight ? blockHeight - maxHeight : 0;\n    var height = blockHeight > maxHeight ? maxHeight : blockHeight;\n    var radius = height / 2;\n    return Blockly.utils.svgPaths.arc('a', '0 0,1', radius,\n        Blockly.utils.svgPaths.point((up ? -1 : 1) * radius, (up ? -1 : 1) * radius)) +\n      Blockly.utils.svgPaths.lineOnAxis('v', (right ? 1 : -1) * remainingHeight) +\n      Blockly.utils.svgPaths.arc('a', '0 0,1', radius,\n          Blockly.utils.svgPaths.point((up ? 1 : -1) * radius, (up ? -1 : 1) * radius));\n  }\n\n  return {\n    type: this.SHAPES.ROUND,\n    isDynamic: true,\n    width: function(height) {\n      var halfHeight = height / 2;\n      return halfHeight > maxWidth ? maxWidth : halfHeight;\n    },\n    height: function(height) {\n      return height;\n    },\n    connectionOffsetY: function(connectionHeight) {\n      return connectionHeight / 2;\n    },\n    connectionOffsetX: function(connectionWidth) {\n      return - connectionWidth;\n    },\n    pathDown: function(height) {\n      return makeMainPath(height, false, false);\n    },\n    pathUp: function(height) {\n      return makeMainPath(height, true, false);\n    },\n    pathRightDown: function(height) {\n      return makeMainPath(height, false, true);\n    },\n    pathRightUp: function(height) {\n      return makeMainPath(height, false, true);\n    },\n  };\n};\n\n/**\n * Create sizing and path information about a squared shape.\n * @return {!Object} An object containing sizing and path information about\n *     a squared shape for connections.\n * @package\n */\nBlockly.zelos.ConstantProvider.prototype.makeSquared = function() {\n  var radius = this.CORNER_RADIUS;\n\n  // The main path for the squared connection shape is made out of two corners\n  // and a single line in-between (a and v). These are defined in relative\n  // positions and require the height of the block.\n  // The 'left' and 'right' versions of the paths are the same, but the Y sign\n  // flips.  The 'up' and 'down' versions of the path determine where the corner\n  // point is placed and in-turn the direction of the corners.\n  function makeMainPath(height, up, right) {\n    var innerHeight = height - radius * 2;\n    return Blockly.utils.svgPaths.arc('a', '0 0,1', radius,\n        Blockly.utils.svgPaths.point((up ? -1 : 1) * radius, (up ? -1 : 1) * radius)) +\n      Blockly.utils.svgPaths.lineOnAxis('v', (right ? 1 : -1) * innerHeight) +\n      Blockly.utils.svgPaths.arc('a', '0 0,1', radius,\n          Blockly.utils.svgPaths.point((up ? 1 : -1) * radius, (up ? -1 : 1) * radius));\n  }\n\n  return {\n    type: this.SHAPES.SQUARE,\n    isDynamic: true,\n    width: function(_height) {\n      return radius;\n    },\n    height: function(height) {\n      return height;\n    },\n    connectionOffsetY: function(connectionHeight) {\n      return connectionHeight / 2;\n    },\n    connectionOffsetX: function(connectionWidth) {\n      return - connectionWidth;\n    },\n    pathDown: function(height) {\n      return makeMainPath(height, false, false);\n    },\n    pathUp: function(height) {\n      return makeMainPath(height, true, false);\n    },\n    pathRightDown: function(height) {\n      return makeMainPath(height, false, true);\n    },\n    pathRightUp: function(height) {\n      return makeMainPath(height, false, true);\n    },\n  };\n};\n\n/**\n * @override\n */\nBlockly.zelos.ConstantProvider.prototype.shapeFor = function(\n    connection) {\n  var checks = connection.getCheck();\n  if (!checks && connection.targetConnection) {\n    checks = connection.targetConnection.getCheck();\n  }\n  switch (connection.type) {\n    case Blockly.INPUT_VALUE:\n    case Blockly.OUTPUT_VALUE:\n      var outputShape = connection.getSourceBlock().getOutputShape();\n      // If the block has an output shape set, use that instead.\n      if (outputShape != null) {\n        switch (outputShape) {\n          case this.SHAPES.HEXAGONAL: return this.HEXAGONAL;\n          case this.SHAPES.ROUND: return this.ROUNDED;\n          case this.SHAPES.SQUARE: return this.SQUARED;\n        }\n      }\n      // Includes doesn't work in IE.\n      if (checks && checks.indexOf('Boolean') != -1) {\n        return this.HEXAGONAL;\n      }\n      if (checks && checks.indexOf('Number') != -1) {\n        return this.ROUNDED;\n      }\n      if (checks && checks.indexOf('String') != -1) {\n        return this.ROUNDED;\n      }\n      return this.ROUNDED;\n    case Blockly.PREVIOUS_STATEMENT:\n    case Blockly.NEXT_STATEMENT:\n      return this.NOTCH;\n    default:\n      throw Error('Unknown type');\n  }\n};\n\n/**\n * @override\n */\nBlockly.zelos.ConstantProvider.prototype.makeNotch = function() {\n  var width = this.NOTCH_WIDTH;\n  var height = this.NOTCH_HEIGHT;\n\n  var innerWidth = width / 3;\n  var curveWidth = innerWidth / 3;\n\n  var halfHeight = height / 2;\n  var quarterHeight = halfHeight / 2;\n\n  function makeMainPath(dir) {\n    return (\n      Blockly.utils.svgPaths.curve('c', [\n        Blockly.utils.svgPaths.point(dir * curveWidth / 2,\n            0),\n        Blockly.utils.svgPaths.point(dir * curveWidth * 3 / 4,\n            quarterHeight / 2),\n        Blockly.utils.svgPaths.point(dir * curveWidth,\n            quarterHeight)\n      ]) +\n      Blockly.utils.svgPaths.line([\n        Blockly.utils.svgPaths.point(dir * curveWidth,\n            halfHeight)\n      ]) +\n      Blockly.utils.svgPaths.curve('c', [\n        Blockly.utils.svgPaths.point(dir * curveWidth / 4,\n            quarterHeight / 2),\n        Blockly.utils.svgPaths.point(dir * curveWidth / 2,\n            quarterHeight),\n        Blockly.utils.svgPaths.point(dir * curveWidth,\n            quarterHeight)\n      ]) +\n      Blockly.utils.svgPaths.lineOnAxis('h', dir * innerWidth) +\n      Blockly.utils.svgPaths.curve('c', [\n        Blockly.utils.svgPaths.point(dir * curveWidth / 2,\n            0),\n        Blockly.utils.svgPaths.point(dir * curveWidth * 3 / 4,\n            -(quarterHeight / 2)),\n        Blockly.utils.svgPaths.point(dir * curveWidth,\n            -quarterHeight)\n      ]) +\n      Blockly.utils.svgPaths.line([\n        Blockly.utils.svgPaths.point(dir * curveWidth,\n            -halfHeight)\n      ]) +\n      Blockly.utils.svgPaths.curve('c', [\n        Blockly.utils.svgPaths.point(dir * curveWidth / 4,\n            -(quarterHeight / 2)),\n        Blockly.utils.svgPaths.point(dir * curveWidth / 2,\n            -quarterHeight),\n        Blockly.utils.svgPaths.point(dir * curveWidth,\n            -quarterHeight)\n      ])\n    );\n  }\n\n  var pathLeft = makeMainPath(1);\n  var pathRight = makeMainPath(-1);\n\n  return {\n    type: this.SHAPES.NOTCH,\n    width: width,\n    height: height,\n    pathLeft: pathLeft,\n    pathRight: pathRight\n  };\n};\n\n/**\n * @override\n */\nBlockly.zelos.ConstantProvider.prototype.makeInsideCorners = function() {\n  var radius = this.CORNER_RADIUS;\n\n  var innerTopLeftCorner = Blockly.utils.svgPaths.arc('a', '0 0,0', radius,\n      Blockly.utils.svgPaths.point(-radius, radius));\n\n  var innerTopRightCorner = Blockly.utils.svgPaths.arc('a', '0 0,1', radius,\n      Blockly.utils.svgPaths.point(-radius, radius));\n\n  var innerBottomLeftCorner = Blockly.utils.svgPaths.arc('a', '0 0,0', radius,\n      Blockly.utils.svgPaths.point(radius, radius));\n\n  var innerBottomRightCorner = Blockly.utils.svgPaths.arc('a', '0 0,1', radius,\n      Blockly.utils.svgPaths.point(radius, radius));\n\n  return {\n    width: radius,\n    height: radius,\n    pathTop: innerTopLeftCorner,\n    pathBottom: innerBottomLeftCorner,\n    rightWidth: radius,\n    rightHeight: radius,\n    pathTopRight: innerTopRightCorner,\n    pathBottomRight: innerBottomRightCorner\n  };\n};\n\n/**\n * @override\n */\nBlockly.zelos.ConstantProvider.prototype.generateSecondaryColour_ = function(\n    colour) {\n  return Blockly.utils.colour.blend('#000', colour, 0.15) || colour;\n};\n\n/**\n * @override\n */\nBlockly.zelos.ConstantProvider.prototype.generateTertiaryColour_ = function(\n    colour) {\n  return Blockly.utils.colour.blend('#000', colour, 0.25) || colour;\n};\n\n/**\n * @override\n */\nBlockly.zelos.ConstantProvider.prototype.createDom = function(svg,\n    tagName, selector) {\n  Blockly.zelos.ConstantProvider.superClass_.createDom.call(this, svg,\n      tagName, selector);\n  /*\n  <defs>\n    ... filters go here ...\n  </defs>\n  */\n  var defs = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.DEFS, {}, svg);\n  // Using a dilate distorts the block shape.\n  // Instead use a gaussian blur, and then set all alpha to 1 with a transfer.\n  var selectedGlowFilter = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FILTER,\n      {\n        'id': 'blocklySelectedGlowFilter' + this.randomIdentifier,\n        'height': '160%',\n        'width': '180%',\n        y: '-30%',\n        x: '-40%'\n      },\n      defs);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FEGAUSSIANBLUR,\n      {\n        'in': 'SourceGraphic',\n        'stdDeviation': this.SELECTED_GLOW_SIZE\n      },\n      selectedGlowFilter);\n  // Set all gaussian blur pixels to 1 opacity before applying flood\n  var selectedComponentTransfer = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FECOMPONENTTRANSFER, {\n        'result': 'outBlur'\n      }, selectedGlowFilter);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FEFUNCA,\n      {\n        'type': 'table', 'tableValues': '0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1'\n      },\n      selectedComponentTransfer);\n  // Color the highlight\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FEFLOOD,\n      {\n        'flood-color': this.SELECTED_GLOW_COLOUR,\n        'flood-opacity': 1,\n        'result': 'outColor'\n      },\n      selectedGlowFilter);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FECOMPOSITE,\n      {\n        'in': 'outColor', 'in2': 'outBlur',\n        'operator': 'in', 'result': 'outGlow'\n      },\n      selectedGlowFilter);\n  this.selectedGlowFilterId = selectedGlowFilter.id;\n  this.selectedGlowFilter_ = selectedGlowFilter;\n\n  // Using a dilate distorts the block shape.\n  // Instead use a gaussian blur, and then set all alpha to 1 with a transfer.\n  var replacementGlowFilter = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FILTER,\n      {\n        'id': 'blocklyReplacementGlowFilter' + this.randomIdentifier,\n        'height': '160%',\n        'width': '180%',\n        y: '-30%',\n        x: '-40%'\n      },\n      defs);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FEGAUSSIANBLUR,\n      {\n        'in': 'SourceGraphic',\n        'stdDeviation': this.REPLACEMENT_GLOW_SIZE\n      },\n      replacementGlowFilter);\n  // Set all gaussian blur pixels to 1 opacity before applying flood\n  var replacementComponentTransfer = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FECOMPONENTTRANSFER, {\n        'result': 'outBlur'\n      }, replacementGlowFilter);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FEFUNCA,\n      {\n        'type': 'table', 'tableValues': '0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1'\n      },\n      replacementComponentTransfer);\n  // Color the highlight\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FEFLOOD,\n      {\n        'flood-color': this.REPLACEMENT_GLOW_COLOUR,\n        'flood-opacity': 1,\n        'result': 'outColor'\n      },\n      replacementGlowFilter);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FECOMPOSITE,\n      {\n        'in': 'outColor', 'in2': 'outBlur',\n        'operator': 'in', 'result': 'outGlow'\n      },\n      replacementGlowFilter);\n  Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.FECOMPOSITE,\n      {\n        'in': 'SourceGraphic', 'in2': 'outGlow',\n        'operator': 'over',\n      },\n      replacementGlowFilter);\n  this.replacementGlowFilterId = replacementGlowFilter.id;\n  this.replacementGlowFilter_ = replacementGlowFilter;\n};\n\n/**\n * @override\n */\nBlockly.zelos.ConstantProvider.prototype.getCSS_ = function(selector) {\n  return [\n    /* eslint-disable indent */\n    // Text.\n    selector + ' .blocklyText,',\n    selector + ' .blocklyFlyoutLabelText {',\n      'font: ' + this.FIELD_TEXT_FONTWEIGHT + ' ' +\n          this.FIELD_TEXT_FONTSIZE + 'pt ' + this.FIELD_TEXT_FONTFAMILY + ';',\n    '}',\n\n    // Fields.\n    selector + ' .blocklyText {',\n      'fill: #fff;',\n    '}',\n    selector + ' .blocklyNonEditableText>rect:not(.blocklyDropdownRect),',\n    selector + ' .blocklyEditableText>rect:not(.blocklyDropdownRect) {',\n      'fill: ' + this.FIELD_BORDER_RECT_COLOUR + ';',\n    '}',\n    selector + ' .blocklyNonEditableText>text,',\n    selector + ' .blocklyEditableText>text,',\n    selector + ' .blocklyNonEditableText>g>text,',\n    selector + ' .blocklyEditableText>g>text {',\n      'fill: #575E75;',\n    '}',\n\n    // Flyout labels.\n    selector + ' .blocklyFlyoutLabelText {',\n      'fill: #575E75;',\n    '}',\n\n    // Bubbles.\n    selector + ' .blocklyText.blocklyBubbleText {',\n      'fill: #575E75;',\n    '}',\n\n    // Editable field hover.\n    selector + ' .blocklyDraggable:not(.blocklyDisabled)',\n    ' .blocklyEditableText:not(.editing):hover>rect,',\n    selector + ' .blocklyDraggable:not(.blocklyDisabled)',\n    ' .blocklyEditableText:not(.editing):hover>.blocklyPath {',\n      'stroke: #fff;',\n      'stroke-width: 2;',\n    '}',\n\n    // Text field input.\n    selector + ' .blocklyHtmlInput {',\n      'font-family: ' + this.FIELD_TEXT_FONTFAMILY + ';',\n      'font-weight: ' + this.FIELD_TEXT_FONTWEIGHT + ';',\n      'color: #575E75;',\n    '}',\n\n    // Dropdown field.\n    selector + ' .blocklyDropdownText {',\n      'fill: #fff !important;',\n    '}',\n    // Widget and Dropdown Div\n    selector + '.blocklyWidgetDiv .goog-menuitem,',\n    selector + '.blocklyDropDownDiv .goog-menuitem {',\n      'font-family: ' + this.FIELD_TEXT_FONTFAMILY + ';',\n    '}',\n    selector + '.blocklyDropDownDiv .goog-menuitem-content {',\n      'color: #fff;',\n    '}',\n\n    // Connection highlight.\n    selector + ' .blocklyHighlightedConnectionPath {',\n      'stroke: ' + this.SELECTED_GLOW_COLOUR + ';',\n    '}',\n\n    // Disabled outline paths.\n    selector + ' .blocklyDisabled > .blocklyOutlinePath {',\n      'fill: url(#blocklyDisabledPattern' + this.randomIdentifier + ')',\n    '}',\n\n    // Insertion marker.\n    selector + ' .blocklyInsertionMarker>.blocklyPath {',\n      'fill-opacity: ' + this.INSERTION_MARKER_OPACITY + ';',\n      'stroke: none;',\n    '}',\n    /* eslint-enable indent */\n  ];\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object representing a single row on a rendered block and all\n * of its subcomponents.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.zelos.BottomRow');\ngoog.provide('Blockly.zelos.TopRow');\n\ngoog.require('Blockly.blockRendering.BottomRow');\ngoog.require('Blockly.blockRendering.TopRow');\ngoog.require('Blockly.blockRendering.SpacerRow');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * An object containing information about what elements are in the top row of a\n * block as well as sizing information for the top row.\n * Elements in a top row can consist of corners, hats, spacers, and previous\n * connections.\n * After this constructor is called, the row will contain all non-spacer\n * elements it needs.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.TopRow}\n */\nBlockly.zelos.TopRow = function(constants) {\n  Blockly.zelos.TopRow.superClass_.constructor.call(this, constants);\n};\nBlockly.utils.object.inherits(Blockly.zelos.TopRow,\n    Blockly.blockRendering.TopRow);\n\n/**\n * @override\n */\nBlockly.zelos.TopRow.prototype.endsWithElemSpacer = function() {\n  return false;\n};\n\n/**\n * Render a round corner unless the block has an output connection.\n * @override\n */\nBlockly.zelos.TopRow.prototype.hasLeftSquareCorner = function(block) {\n  var hasHat = (block.hat ?\n      block.hat === 'cap' : this.constants_.ADD_START_HATS) &&\n      !block.outputConnection && !block.previousConnection;\n  return !!block.outputConnection || hasHat;\n};\n\n/**\n * Render a round corner unless the block has an output connection.\n * @override\n */\nBlockly.zelos.TopRow.prototype.hasRightSquareCorner = function(block) {\n  return !!block.outputConnection && !block.statementInputCount &&\n    !block.nextConnection;\n};\n\n/**\n * An object containing information about what elements are in the bottom row of\n * a block as well as spacing information for the top row.\n * Elements in a bottom row can consist of corners, spacers and next\n * connections.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.BottomRow}\n */\nBlockly.zelos.BottomRow = function(constants) {\n  Blockly.zelos.BottomRow.superClass_.constructor.call(this, constants);\n};\nBlockly.utils.object.inherits(Blockly.zelos.BottomRow,\n    Blockly.blockRendering.BottomRow);\n\n/**\n * @override\n */\nBlockly.zelos.BottomRow.prototype.endsWithElemSpacer = function() {\n  return false;\n};\n\n/**\n * Render a round corner unless the block has an output connection.\n * @override\n */\nBlockly.zelos.BottomRow.prototype.hasLeftSquareCorner = function(block) {\n  return !!block.outputConnection;\n};\n\n/**\n * Render a round corner unless the block has an output connection.\n * @override\n */\nBlockly.zelos.BottomRow.prototype.hasRightSquareCorner = function(block) {\n  return !!block.outputConnection && !block.statementInputCount &&\n    !block.nextConnection;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Zelos specific objects representing elements in a row of a\n * rendered block.\n * @author samelh@google.com (Sam El-Husseini)\n */\n\ngoog.provide('Blockly.zelos.RightConnectionShape');\n\ngoog.require('Blockly.blockRendering.Measurable');\ngoog.require('Blockly.blockRendering.Types');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * An object containing information about the space a right connection shape\n * takes up during rendering.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Measurable}\n */\nBlockly.zelos.RightConnectionShape = function(constants) {\n  Blockly.zelos.RightConnectionShape.superClass_.constructor.call(this, constants);\n  this.type |= Blockly.blockRendering.Types.getType('RIGHT_CONNECTION');\n  // Size is dynamic\n  this.height = 0;\n  this.width = 0;\n};\nBlockly.utils.object.inherits(Blockly.zelos.RightConnectionShape,\n    Blockly.blockRendering.Measurable);\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Zelos specific objects representing inputs with connections on\n * a rendered block.\n * @author samelh@google.com (Sam El-Husseini)\n */\n\ngoog.provide('Blockly.zelos.StatementInput');\n\ngoog.require('Blockly.blockRendering.StatementInput');\ngoog.require('Blockly.utils.object');\n\n\n/**\n * An object containing information about the space a statement input takes up\n * during rendering\n * @param {!Blockly.blockRendering.ConstantProvider} constants The rendering\n *   constants provider.\n * @param {!Blockly.Input} input The statement input to measure and store\n *     information for.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.StatementInput}\n */\nBlockly.zelos.StatementInput = function(constants, input) {\n  Blockly.zelos.StatementInput.superClass_.constructor.call(this,\n      constants, input);\n\n  if (this.connectedBlock) {\n    // Find the bottom-most connected block in the stack.\n    var block = this.connectedBlock;\n    while (block.getNextBlock()) {\n      block = block.getNextBlock();\n    }\n    if (!block.nextConnection) {\n      this.height = this.connectedBlockHeight;\n      this.connectedBottomNextConnection = true;\n    }\n  }\n};\nBlockly.utils.object.inherits(Blockly.zelos.StatementInput,\n    Blockly.blockRendering.StatementInput);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Makecode/scratch-style renderer.\n * Zelos: spirit of eager rivalry, emulation, envy, jealousy, and zeal.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.zelos');\ngoog.provide('Blockly.zelos.RenderInfo');\n\ngoog.require('Blockly.blockRendering.BottomRow');\ngoog.require('Blockly.blockRendering.ExternalValueInput');\ngoog.require('Blockly.blockRendering.InlineInput');\ngoog.require('Blockly.blockRendering.InputRow');\ngoog.require('Blockly.blockRendering.Measurable');\ngoog.require('Blockly.blockRendering.NextConnection');\ngoog.require('Blockly.blockRendering.OutputConnection');\ngoog.require('Blockly.blockRendering.PreviousConnection');\ngoog.require('Blockly.blockRendering.RenderInfo');\ngoog.require('Blockly.blockRendering.RoundCorner');\ngoog.require('Blockly.blockRendering.Row');\ngoog.require('Blockly.blockRendering.SquareCorner');\ngoog.require('Blockly.blockRendering.SpacerRow');\ngoog.require('Blockly.blockRendering.TopRow');\ngoog.require('Blockly.blockRendering.Types');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.zelos.BottomRow');\ngoog.require('Blockly.zelos.RightConnectionShape');\ngoog.require('Blockly.zelos.StatementInput');\ngoog.require('Blockly.zelos.TopRow');\n\n\n/**\n * An object containing all sizing information needed to draw this block.\n *\n * This measure pass does not propagate changes to the block (although fields\n * may choose to rerender when getSize() is called).  However, calling it\n * repeatedly may be expensive.\n *\n * @param {!Blockly.zelos.Renderer} renderer The renderer in use.\n * @param {!Blockly.BlockSvg} block The block to measure.\n * @constructor\n * @package\n * @extends {Blockly.blockRendering.RenderInfo}\n */\nBlockly.zelos.RenderInfo = function(renderer, block) {\n  Blockly.zelos.RenderInfo.superClass_.constructor.call(this, renderer, block);\n\n  /**\n   * An object with rendering information about the top row of the block.\n   * @type {!Blockly.zelos.TopRow}\n   * @override\n   */\n  this.topRow = new Blockly.zelos.TopRow(this.constants_);\n\n  /**\n   * An object with rendering information about the bottom row of the block.\n   * @type {!Blockly.zelos.BottomRow}\n   * @override\n   */\n  this.bottomRow = new Blockly.zelos.BottomRow(this.constants_);\n\n  /**\n   * @override\n   */\n  this.isInline = true;\n\n  /**\n   * Whether the block should be rendered as a multi-line block, either because\n   * it's not inline or because it has been collapsed.\n   * @type {boolean}\n   */\n  this.isMultiRow = !block.getInputsInline() || block.isCollapsed();\n\n  /**\n   * Whether or not the block has a statement input in one of its rows.\n   * @type {boolean}\n   */\n  this.hasStatementInput = block.statementInputCount > 0;\n\n  /**\n   * An object with rendering information about the right connection shape.\n   * @type {Blockly.zelos.RightConnectionShape}\n   */\n  this.rightSide = this.outputConnection ?\n      new Blockly.zelos.RightConnectionShape(this.constants_) : null;\n};\nBlockly.utils.object.inherits(Blockly.zelos.RenderInfo,\n    Blockly.blockRendering.RenderInfo);\n\n/**\n * Get the block renderer in use.\n * @return {!Blockly.zelos.Renderer} The block renderer in use.\n * @package\n */\nBlockly.zelos.RenderInfo.prototype.getRenderer = function() {\n  return /** @type {!Blockly.zelos.Renderer} */ (this.renderer_);\n};\n\n/**\n * @override\n */\nBlockly.zelos.RenderInfo.prototype.measure = function() {\n  // Modifying parent measure method to add `adjustXPosition_`.\n  this.createRows_();\n  this.addElemSpacing_();\n  this.addRowSpacing_();\n  this.adjustXPosition_();\n  this.computeBounds_();\n  this.alignRowElements_();\n  this.finalize_();\n};\n\n/**\n * @override\n */\nBlockly.zelos.RenderInfo.prototype.shouldStartNewRow_ = function(input,\n    lastInput) {\n  // If this is the first input, just add to the existing row.\n  // That row is either empty or has some icons in it.\n  if (!lastInput) {\n    return false;\n  }\n  // A statement input or an input following one always gets a new row.\n  if (input.type == Blockly.NEXT_STATEMENT ||\n      lastInput.type == Blockly.NEXT_STATEMENT) {\n    return true;\n  }\n  // Value and dummy inputs get new row if inputs are not inlined.\n  if (input.type == Blockly.INPUT_VALUE || input.type == Blockly.DUMMY_INPUT) {\n    return !this.isInline || this.isMultiRow;\n  }\n  return false;\n};\n\n\n/**\n * @override\n */\nBlockly.zelos.RenderInfo.prototype.getDesiredRowWidth_ = function(row) {\n  if (row.hasStatement) {\n    var rightCornerWidth = this.constants_.INSIDE_CORNERS.rightWidth || 0;\n    return this.width - this.startX - rightCornerWidth;\n  }\n  return Blockly.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,\n      row);\n};\n\n/**\n * @override\n */\nBlockly.zelos.RenderInfo.prototype.getInRowSpacing_ = function(prev, next) {\n  if (!prev || !next) {\n    // No need for padding at the beginning or end of the row if the\n    // output shape is dynamic.\n    if (this.outputConnection && this.outputConnection.isDynamicShape &&\n        !this.hasStatementInput && !this.bottomRow.hasNextConnection) {\n      return this.constants_.NO_PADDING;\n    }\n  }\n  if (!prev) {\n    // Statement input padding.\n    if (next && Blockly.blockRendering.Types.isStatementInput(next)) {\n      return this.constants_.STATEMENT_INPUT_PADDING_LEFT;\n    }\n  }\n  // Spacing between a rounded corner and a previous or next connection.\n  if (prev && Blockly.blockRendering.Types.isLeftRoundedCorner(prev) && next) {\n    if (Blockly.blockRendering.Types.isPreviousConnection(next) ||\n      Blockly.blockRendering.Types.isNextConnection(next)) {\n      return next.notchOffset - this.constants_.CORNER_RADIUS;\n    }\n  }\n  // Spacing between a square corner and a hat.\n  if (prev && Blockly.blockRendering.Types.isLeftSquareCorner(prev) && next &&\n      Blockly.blockRendering.Types.isHat(next)) {\n    return this.constants_.NO_PADDING;\n  }\n  return this.constants_.MEDIUM_PADDING;\n};\n\n/**\n * @override\n */\nBlockly.zelos.RenderInfo.prototype.getSpacerRowHeight_ = function(\n    prev, next) {\n  // If we have an empty block add a spacer to increase the height.\n  if (Blockly.blockRendering.Types.isTopRow(prev) &&\n      Blockly.blockRendering.Types.isBottomRow(next)) {\n    return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;\n  }\n  var followsStatement =\n      Blockly.blockRendering.Types.isInputRow(prev) && prev.hasStatement;\n  var precedesStatement =\n      Blockly.blockRendering.Types.isInputRow(next) && next.hasStatement;\n  if (precedesStatement || followsStatement) {\n    var cornerHeight = this.constants_.INSIDE_CORNERS.rightHeight || 0;\n    var height = Math.max(this.constants_.NOTCH_HEIGHT, cornerHeight);\n    return precedesStatement && followsStatement ?\n        Math.max(height, this.constants_.DUMMY_INPUT_MIN_HEIGHT) : height;\n  }\n  // Top and bottom rows act as a spacer so we don't need any extra padding.\n  if ((Blockly.blockRendering.Types.isTopRow(prev))) {\n    if (!prev.hasPreviousConnection &&\n        (!this.outputConnection || this.hasStatementInput)) {\n      return Math.abs(this.constants_.NOTCH_HEIGHT -\n          this.constants_.CORNER_RADIUS);\n    }\n    return this.constants_.NO_PADDING;\n  }\n  if ((Blockly.blockRendering.Types.isBottomRow(next))) {\n    if (!this.outputConnection) {\n      var topHeight = Math.max(this.topRow.minHeight,\n          Math.max(this.constants_.NOTCH_HEIGHT,\n              this.constants_.CORNER_RADIUS)) - this.constants_.CORNER_RADIUS;\n      return topHeight;\n    } else if (!next.hasNextConnection && this.hasStatementInput) {\n      return Math.abs(this.constants_.NOTCH_HEIGHT -\n          this.constants_.CORNER_RADIUS);\n    }\n    return this.constants_.NO_PADDING;\n  }\n  return this.constants_.MEDIUM_PADDING;\n};\n\n/**\n * @override\n */\nBlockly.zelos.RenderInfo.prototype.getSpacerRowWidth_ = function(prev, next) {\n  var width = this.width - this.startX;\n  if ((Blockly.blockRendering.Types.isInputRow(prev) && prev.hasStatement) ||\n      (Blockly.blockRendering.Types.isInputRow(next) && next.hasStatement)) {\n    return Math.max(width, this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH);\n  }\n  return width;\n};\n\n/**\n * @override\n */\nBlockly.zelos.RenderInfo.prototype.getElemCenterline_ = function(row, elem) {\n  if (row.hasStatement && !Blockly.blockRendering.Types.isSpacer(elem) &&\n      !Blockly.blockRendering.Types.isStatementInput(elem)) {\n    return row.yPos + this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT / 2;\n  }\n  if (Blockly.blockRendering.Types.isInlineInput(elem)) {\n    var connectedBlock = elem.connectedBlock;\n    if (connectedBlock && connectedBlock.outputConnection &&\n        connectedBlock.nextConnection) {\n      return row.yPos + connectedBlock.height / 2;\n    }\n  }\n  return Blockly.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,\n      row, elem);\n};\n\n/**\n * @override\n */\nBlockly.zelos.RenderInfo.prototype.addInput_ = function(input, activeRow) {\n  // If we have two dummy inputs on the same row, one aligned left and the other\n  // right, keep track of the right aligned dummy input so we can add padding\n  // later.\n  if (input.type == Blockly.DUMMY_INPUT && activeRow.hasDummyInput &&\n      activeRow.align == Blockly.ALIGN_LEFT &&\n      input.align == Blockly.ALIGN_RIGHT) {\n    activeRow.rightAlignedDummyInput = input;\n  }\n  Blockly.zelos.RenderInfo.superClass_.addInput_.call(this, input, activeRow);\n};\n\n/**\n * @override\n */\nBlockly.zelos.RenderInfo.prototype.addAlignmentPadding_ = function(row,\n    missingSpace) {\n  if (row.rightAlignedDummyInput) {\n    var alignmentDivider;\n    for (var i = 0, elem; (elem = row.elements[i]); i++) {\n      if (Blockly.blockRendering.Types.isSpacer(elem)) {\n        alignmentDivider = elem;\n      }\n      if (Blockly.blockRendering.Types.isField(elem) &&\n        elem.parentInput == row.rightAlignedDummyInput) {\n        break;\n      }\n    }\n    if (alignmentDivider) {\n      alignmentDivider.width += missingSpace;\n      row.width += missingSpace;\n      return;\n    }\n  }\n  Blockly.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this, row,\n      missingSpace);\n};\n\n/**\n * Adjust the x position of fields to bump all non-label fields in the first row\n * past the notch position.  This must be called before ``computeBounds`` is\n * called.\n * @protected\n */\nBlockly.zelos.RenderInfo.prototype.adjustXPosition_ = function() {\n  var notchTotalWidth = this.constants_.NOTCH_OFFSET_LEFT +\n      this.constants_.NOTCH_WIDTH;\n  var minXPos = notchTotalWidth;\n  // Run through every input row on the block and only apply bump logic to the\n  // first input row (if the block has prev connection) and every input row that\n  // has a prev and next notch.\n  for (var i = 2; i < this.rows.length - 1; i += 2) {\n    var prevSpacer = this.rows[i - 1];\n    var row = this.rows[i];\n    var nextSpacer = this.rows[i + 1];\n\n    var hasPrevNotch = i == 2 ?\n        !!this.topRow.hasPreviousConnection : !!prevSpacer.followsStatement;\n    var hasNextNotch = i + 2 >= this.rows.length - 1 ?\n        !!this.bottomRow.hasNextConnection : !!nextSpacer.precedesStatement;\n\n    if (Blockly.blockRendering.Types.isInputRow(row) && row.hasStatement) {\n      row.measure();\n      minXPos = row.width - row.getLastInput().width + notchTotalWidth;\n    } else if (hasPrevNotch && (i == 2 || hasNextNotch) &&\n        Blockly.blockRendering.Types.isInputRow(row) && !row.hasStatement) {\n      var xCursor = row.xPos;\n      var prevInRowSpacer = null;\n      for (var j = 0, elem; (elem = row.elements[j]); j++) {\n        if (Blockly.blockRendering.Types.isSpacer(elem)) {\n          prevInRowSpacer = elem;\n        }\n        if (prevInRowSpacer && (Blockly.blockRendering.Types.isField(elem) ||\n            Blockly.blockRendering.Types.isInput(elem))) {\n          if (xCursor < minXPos &&\n              !(Blockly.blockRendering.Types.isField(elem) &&\n              (elem.field instanceof Blockly.FieldLabel ||\n              elem.field instanceof Blockly.FieldImage))) {\n            var difference = minXPos - xCursor;\n            prevInRowSpacer.width += difference;\n          }\n        }\n        xCursor += elem.width;\n      }\n    }\n  }\n};\n\n/**\n * Finalize the output connection info.  In particular, set the height of the\n * output connection to match that of the block.  For the right side, add a\n * right connection shape element and have it match the dimensions of the\n * output connection.\n * @protected\n */\nBlockly.zelos.RenderInfo.prototype.finalizeOutputConnection_ = function() {\n  // Dynamic output connections depend on the height of the block.\n  if (!this.outputConnection || !this.outputConnection.isDynamicShape) {\n    return;\n  }\n  var yCursor = 0;\n  // Determine the block height.\n  for (var i = 0, row; (row = this.rows[i]); i++) {\n    row.yPos = yCursor;\n    yCursor += row.height;\n  }\n  this.height = yCursor;\n\n  // Adjust the height of the output connection.\n  var blockHeight = this.bottomRow.hasNextConnection ?\n      this.height - this.bottomRow.descenderHeight : this.height;\n  var connectionHeight = this.outputConnection.shape.height(blockHeight);\n  var connectionWidth = this.outputConnection.shape.width(blockHeight);\n\n  this.outputConnection.height = connectionHeight;\n  this.outputConnection.width = connectionWidth;\n  this.outputConnection.startX = connectionWidth;\n  this.outputConnection.connectionOffsetY =\n      this.outputConnection.shape.connectionOffsetY(connectionHeight);\n  this.outputConnection.connectionOffsetX =\n      this.outputConnection.shape.connectionOffsetX(connectionWidth);\n\n  // Add the right connection measurable.\n  // Don't add it if we have a value-to-statement or a value-to-stack block.\n  var rightConnectionWidth = 0;\n  if (!this.hasStatementInput && !this.bottomRow.hasNextConnection) {\n    rightConnectionWidth = connectionWidth;\n    this.rightSide.height = connectionHeight;\n    this.rightSide.width = rightConnectionWidth;\n    this.rightSide.centerline = connectionHeight / 2;\n    this.rightSide.xPos = this.width + rightConnectionWidth;\n  }\n  this.startX = connectionWidth;\n  this.width += connectionWidth + rightConnectionWidth;\n  this.widthWithChildren += connectionWidth + rightConnectionWidth;\n};\n\n/**\n * Finalize horizontal alignment of elements on the block.  In particular,\n * reduce the implicit spacing created by the left and right output connection\n * shapes by adding setting negative spacing onto the leftmost and rightmost\n * spacers.\n * @protected\n */\nBlockly.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_ = function() {\n  if (!this.outputConnection || this.hasStatementInput ||\n      this.bottomRow.hasNextConnection) {\n    return;\n  }\n  var totalNegativeSpacing = 0;\n  for (var i = 0, row; (row = this.rows[i]); i++) {\n    if (!Blockly.blockRendering.Types.isInputRow(row)) {\n      continue;\n    }\n    var firstElem = row.elements[1];\n    var lastElem = row.elements[row.elements.length - 2];\n    var leftNegPadding = this.getNegativeSpacing_(firstElem);\n    var rightNegPadding = this.getNegativeSpacing_(lastElem);\n    totalNegativeSpacing = leftNegPadding + rightNegPadding;\n    var minBlockWidth = this.constants_.MIN_BLOCK_WIDTH +\n        this.outputConnection.width * 2;\n    if (this.width - totalNegativeSpacing < minBlockWidth) {\n      // Maintain a minimum block width, split negative spacing between left\n      // and right edge.\n      totalNegativeSpacing = this.width - minBlockWidth;\n      leftNegPadding = totalNegativeSpacing / 2;\n      rightNegPadding = totalNegativeSpacing / 2;\n    }\n    // Add a negative spacer on the start and end of the block.\n    row.elements.unshift(new Blockly.blockRendering.InRowSpacer(this.constants_,\n        -leftNegPadding));\n    row.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,\n        -rightNegPadding));\n  }\n  if (totalNegativeSpacing) {\n    this.width -= totalNegativeSpacing;\n    this.widthWithChildren -= totalNegativeSpacing;\n    this.rightSide.xPos -= totalNegativeSpacing;\n    for (var i = 0, row; (row = this.rows[i]); i++) {\n      if (Blockly.blockRendering.Types.isTopOrBottomRow(row)) {\n        row.elements[1].width -= totalNegativeSpacing;\n        row.elements[1].widthWithConnectedBlocks -= totalNegativeSpacing;\n      }\n      row.width -= totalNegativeSpacing;\n      row.widthWithConnectedBlocks -= totalNegativeSpacing;\n    }\n  }\n};\n\n/**\n * Calculate the spacing to reduce the left and right edges by based on the\n * outer and inner connection shape.\n * @param {Blockly.blockRendering.Measurable} elem The first or last element on\n *     a block.\n * @return {number} The amount of spacing to reduce the first or last spacer.\n * @protected\n */\nBlockly.zelos.RenderInfo.prototype.getNegativeSpacing_ = function(elem) {\n  if (!elem) {\n    return 0;\n  }\n  var connectionWidth = this.outputConnection.width;\n  var outerShape = this.outputConnection.shape.type;\n  var constants =\n    /** @type {!Blockly.zelos.ConstantProvider} */ (this.constants_);\n  if (this.isMultiRow && this.inputRows.length > 1) {\n    switch (outerShape) {\n      case constants.SHAPES.ROUND:\n        // Special case for multi-row round reporter blocks.\n        var maxWidth = this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;\n        var width = this.height / 2 > maxWidth ? maxWidth : this.height / 2;\n        var topPadding = this.constants_.SMALL_PADDING;\n        var roundPadding = width *\n          (1 - Math.sin(Math.acos((width - topPadding) / width)));\n        return connectionWidth - roundPadding;\n      default:\n        return 0;\n    }\n  }\n  if (Blockly.blockRendering.Types.isInlineInput(elem)) {\n    var connectedBlock = elem.connectedBlock;\n    var innerShape = connectedBlock ?\n        connectedBlock.pathObject.outputShapeType :\n        elem.shape.type;\n    // Special case for value to stack / value to statement blocks.\n    if (connectedBlock && connectedBlock.outputConnection &&\n        (connectedBlock.statementInputCount || connectedBlock.nextConnection)) {\n      return 0;\n    }\n    // Special case for hexagonal output.\n    if (outerShape == constants.SHAPES.HEXAGONAL &&\n        outerShape != innerShape) {\n      return 0;\n    }\n    return connectionWidth -\n        this.constants_.SHAPE_IN_SHAPE_PADDING[outerShape][innerShape];\n  } else if (Blockly.blockRendering.Types.isField(elem)) {\n    // Special case for text inputs.\n    if (outerShape == constants.SHAPES.ROUND &&\n        elem.field instanceof Blockly.FieldTextInput) {\n      return connectionWidth - (2.75 * constants.GRID_UNIT);\n    }\n    return connectionWidth -\n        this.constants_.SHAPE_IN_SHAPE_PADDING[outerShape][0];\n  } else if (Blockly.blockRendering.Types.isIcon(elem)) {\n    return this.constants_.SMALL_PADDING;\n  }\n  return 0;\n};\n\n/**\n * Finalize vertical alignment of rows on a block.  In particular, reduce the\n * implicit spacing when a non-shadow block is connected to any of an input\n * row's inline inputs.\n * @protected\n */\nBlockly.zelos.RenderInfo.prototype.finalizeVerticalAlignment_ = function() {\n  if (this.outputConnection) {\n    return;\n  }\n  // Run through every input row on the block and only apply tight nesting logic\n  // to input rows that have a prev and next notch.\n  for (var i = 2; i < this.rows.length - 1; i += 2) {\n    var prevSpacer = this.rows[i - 1];\n    var row = this.rows[i];\n    var nextSpacer = this.rows[i + 1];\n\n    var firstRow = i == 2;\n    var hasPrevNotch = firstRow ?\n        !!this.topRow.hasPreviousConnection : !!prevSpacer.followsStatement;\n    var hasNextNotch = i + 2 >= this.rows.length - 1 ?\n        !!this.bottomRow.hasNextConnection : !!nextSpacer.precedesStatement;\n\n    if (hasPrevNotch) {\n      var hasSingleTextOrImageField = row.elements.length == 3 &&\n          (row.elements[1].field instanceof Blockly.FieldLabel ||\n              row.elements[1].field instanceof Blockly.FieldImage);\n      if (!firstRow && hasSingleTextOrImageField) {\n        // Remove some padding if we have a single image or text field.\n        prevSpacer.height -= this.constants_.SMALL_PADDING;\n        nextSpacer.height -= this.constants_.SMALL_PADDING;\n        row.height -= this.constants_.MEDIUM_PADDING;\n      } else if (!firstRow && !hasNextNotch) {\n        // Add a small padding so the notch doesn't clash with inputs/fields.\n        prevSpacer.height += this.constants_.SMALL_PADDING;\n      } else if (hasNextNotch) {\n        // Determine if the input row has non-shadow connected blocks.\n        var hasNonShadowConnectedBlocks = false;\n        var MIN_VERTICAL_TIGHTNESTING_HEIGHT = 40;\n        for (var j = 0, elem; (elem = row.elements[j]); j++) {\n          if (Blockly.blockRendering.Types.isInlineInput(elem) &&\n              elem.connectedBlock && !elem.connectedBlock.isShadow() &&\n              elem.connectedBlock.getHeightWidth().height >=\n                  MIN_VERTICAL_TIGHTNESTING_HEIGHT) {\n            hasNonShadowConnectedBlocks = true;\n            break;\n          }\n        }\n        // Apply tight-nesting if we have both a prev and next notch and the\n        // block has non-shadow connected blocks.\n        if (hasNonShadowConnectedBlocks) {\n          prevSpacer.height -= this.constants_.SMALL_PADDING;\n          nextSpacer.height -= this.constants_.SMALL_PADDING;\n        }\n      }\n    }\n  }\n};\n\n/**\n * @override\n */\nBlockly.zelos.RenderInfo.prototype.finalize_ = function() {\n  this.finalizeOutputConnection_();\n  this.finalizeHorizontalAlignment_();\n  this.finalizeVerticalAlignment_();\n  Blockly.zelos.RenderInfo.superClass_.finalize_.call(this);\n\n  if (this.rightSide) {\n    this.widthWithChildren += this.rightSide.width;\n  }\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Zelos renderer.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.zelos.Drawer');\n\ngoog.require('Blockly.blockRendering.ConstantProvider');\ngoog.require('Blockly.blockRendering.Drawer');\ngoog.require('Blockly.blockRendering.Types');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.zelos.RenderInfo');\n\ngoog.requireType('Blockly.zelos.PathObject');\n\n\n/**\n * An object that draws a block based on the given rendering information.\n * @param {!Blockly.BlockSvg} block The block to render.\n * @param {!Blockly.zelos.RenderInfo} info An object containing all\n *   information needed to render this block.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Drawer}\n */\nBlockly.zelos.Drawer = function(block, info) {\n  Blockly.zelos.Drawer.superClass_.constructor.call(this, block, info);\n};\nBlockly.utils.object.inherits(Blockly.zelos.Drawer,\n    Blockly.blockRendering.Drawer);\n\n\n/**\n * @override\n */\nBlockly.zelos.Drawer.prototype.draw = function() {\n  var pathObject =\n    /** @type {!Blockly.zelos.PathObject} */ (this.block_.pathObject);\n  pathObject.beginDrawing();\n  this.hideHiddenIcons_();\n  this.drawOutline_();\n  this.drawInternals_();\n\n  pathObject.setPath(this.outlinePath_ + '\\n' + this.inlinePath_);\n  if (this.info_.RTL) {\n    pathObject.flipRTL();\n  }\n  if (Blockly.blockRendering.useDebugger) {\n    this.block_.renderingDebugger.drawDebug(this.block_, this.info_);\n  }\n  this.recordSizeOnBlock_();\n  if (this.info_.outputConnection) {\n    // Store the output connection shape type for parent blocks to use during\n    // rendering.\n    pathObject.outputShapeType = this.info_.outputConnection.shape.type;\n  }\n  pathObject.endDrawing();\n};\n\n/**\n * @override\n */\nBlockly.zelos.Drawer.prototype.drawOutline_ = function() {\n  if (this.info_.outputConnection &&\n      this.info_.outputConnection.isDynamicShape &&\n      !this.info_.hasStatementInput &&\n      !this.info_.bottomRow.hasNextConnection) {\n    this.drawFlatTop_();\n    this.drawRightDynamicConnection_();\n    this.drawFlatBottom_();\n    this.drawLeftDynamicConnection_();\n  } else {\n    Blockly.zelos.Drawer.superClass_.drawOutline_.call(this);\n  }\n};\n\n/**\n * @override\n */\nBlockly.zelos.Drawer.prototype.drawLeft_ = function() {\n  if (this.info_.outputConnection &&\n      this.info_.outputConnection.isDynamicShape) {\n    this.drawLeftDynamicConnection_();\n  } else {\n    Blockly.zelos.Drawer.superClass_.drawLeft_.call(this);\n  }\n};\n\n/**\n * Add steps for the right side of a row that does not have value or\n * statement input connections.\n * @param {!Blockly.blockRendering.Row} row The row to draw the\n *     side of.\n * @protected\n */\nBlockly.zelos.Drawer.prototype.drawRightSideRow_ = function(row) {\n  if (row.height <= 0) {\n    return;\n  }\n  if (row.precedesStatement || row.followsStatement) {\n    var cornerHeight = this.constants_.INSIDE_CORNERS.rightHeight;\n    var remainingHeight = row.height -\n        (row.precedesStatement ? cornerHeight : 0);\n    this.outlinePath_ +=\n        (row.followsStatement ?\n            this.constants_.INSIDE_CORNERS.pathBottomRight : '') +\n        (remainingHeight > 0 ?\n            Blockly.utils.svgPaths\n                .lineOnAxis('V', row.yPos + remainingHeight) : '') +\n        (row.precedesStatement ?\n            this.constants_.INSIDE_CORNERS.pathTopRight : '');\n  } else {\n    this.outlinePath_ +=\n        Blockly.utils.svgPaths.lineOnAxis('V', row.yPos + row.height);\n  }\n};\n\n/**\n * Add steps to draw the right side of an output with a dynamic connection.\n * @protected\n */\nBlockly.zelos.Drawer.prototype.drawRightDynamicConnection_ = function() {\n  this.outlinePath_ += this.info_.outputConnection.shape.pathRightDown(\n      this.info_.outputConnection.height);\n};\n\n/**\n * Add steps to draw the left side of an output with a dynamic connection.\n * @protected\n */\nBlockly.zelos.Drawer.prototype.drawLeftDynamicConnection_ = function() {\n  this.positionOutputConnection_();\n\n  this.outlinePath_ += this.info_.outputConnection.shape.pathUp(\n      this.info_.outputConnection.height);\n\n  // Close off the path.  This draws a vertical line up to the start of the\n  // block's path, which may be either a rounded or a sharp corner.\n  this.outlinePath_ += 'z';\n};\n\n/**\n * Add steps to draw a flat top row.\n * @protected\n */\nBlockly.zelos.Drawer.prototype.drawFlatTop_ = function() {\n  var topRow = this.info_.topRow;\n  this.positionPreviousConnection_();\n\n  this.outlinePath_ +=\n      Blockly.utils.svgPaths.moveBy(topRow.xPos, this.info_.startY);\n\n  this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis('h', topRow.width);\n};\n\n/**\n * Add steps to draw a flat bottom row.\n * @protected\n */\nBlockly.zelos.Drawer.prototype.drawFlatBottom_ = function() {\n  var bottomRow = this.info_.bottomRow;\n  this.positionNextConnection_();\n\n  this.outlinePath_ +=\n    Blockly.utils.svgPaths.lineOnAxis('V', bottomRow.baseline);\n\n  this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis('h', -bottomRow.width);\n};\n\n/**\n * @override\n */\nBlockly.zelos.Drawer.prototype.drawInlineInput_ = function(input) {\n  this.positionInlineInputConnection_(input);\n\n  var inputName = input.input.name;\n  if (input.connectedBlock || this.info_.isInsertionMarker) {\n    return;\n  }\n\n  var width = input.width - (input.connectionWidth * 2);\n  var height = input.height;\n  var yPos = input.centerline - height / 2;\n\n  var connectionRight = input.xPos + input.connectionWidth;\n\n  var outlinePath = Blockly.utils.svgPaths.moveTo(connectionRight, yPos) +\n      Blockly.utils.svgPaths.lineOnAxis('h', width) +\n      input.shape.pathRightDown(input.height) +\n      Blockly.utils.svgPaths.lineOnAxis('h', -width) +\n      input.shape.pathUp(input.height) +\n      'z';\n  this.block_.pathObject.setOutlinePath(inputName, outlinePath);\n};\n\n/**\n * @override\n */\nBlockly.zelos.Drawer.prototype.drawStatementInput_ = function(row) {\n  var input = row.getLastInput();\n  // Where to start drawing the notch, which is on the right side in LTR.\n  var x = input.xPos + input.notchOffset + input.shape.width;\n\n  var innerTopLeftCorner =\n      input.shape.pathRight +\n      Blockly.utils.svgPaths.lineOnAxis('h',\n          -(input.notchOffset - this.constants_.INSIDE_CORNERS.width)) +\n      this.constants_.INSIDE_CORNERS.pathTop;\n\n  var innerHeight =\n      row.height - (2 * this.constants_.INSIDE_CORNERS.height);\n\n  var innerBottomLeftCorner =\n    this.constants_.INSIDE_CORNERS.pathBottom +\n    Blockly.utils.svgPaths.lineOnAxis('h',\n        (input.notchOffset - this.constants_.INSIDE_CORNERS.width)) +\n    (input.connectedBottomNextConnection ? '' : input.shape.pathLeft);\n\n  this.outlinePath_ += Blockly.utils.svgPaths.lineOnAxis('H', x) +\n      innerTopLeftCorner +\n      Blockly.utils.svgPaths.lineOnAxis('v', innerHeight) +\n      innerBottomLeftCorner +\n      Blockly.utils.svgPaths.lineOnAxis('H', row.xPos + row.width);\n\n  this.positionStatementInputConnection_(row);\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview An object that owns a block's rendering SVG elements.\n * @author samelh@google.com (Sam El-Husseini)\n */\n\n'use strict';\n\ngoog.provide('Blockly.zelos.PathObject');\n\ngoog.require('Blockly.blockRendering.PathObject');\ngoog.require('Blockly.zelos.ConstantProvider');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * An object that handles creating and setting each of the SVG elements\n * used by the renderer.\n * @param {!SVGElement} root The root SVG element.\n * @param {!Blockly.Theme.BlockStyle} style The style object to use for\n *     colouring.\n * @param {!Blockly.zelos.ConstantProvider} constants The renderer's constants.\n * @constructor\n * @extends {Blockly.blockRendering.PathObject}\n * @package\n */\nBlockly.zelos.PathObject = function(root, style, constants) {\n  Blockly.zelos.PathObject.superClass_.constructor.call(this, root, style,\n      constants);\n\n  /**\n   * The renderer's constant provider.\n   * @type {!Blockly.zelos.ConstantProvider}\n   */\n  this.constants = constants;\n\n  /**\n   * The selected path of the block.\n   * @type {SVGElement}\n   * @private\n   */\n  this.svgPathSelected_ = null;\n\n  /**\n   * The outline paths on the block.\n   * @type {!Object.<string,!SVGElement>}\n   * @private\n   */\n  this.outlines_ = {};\n\n  /**\n   * A set used to determine which outlines were used during a draw pass.  The\n   * set is initialized with a reference to all the outlines in\n   * `this.outlines_`. Every time we use an outline during the draw pass, the\n   * reference is removed from this set.\n   * @type {Object.<string, number>}\n   * @private\n   */\n  this.remainingOutlines_ = null;\n\n  /**\n   * The type of block's output connection shape.  This is set when a block with\n   * an output connection is drawn.\n   * @package\n   */\n  this.outputShapeType = null;\n};\nBlockly.utils.object.inherits(Blockly.zelos.PathObject,\n    Blockly.blockRendering.PathObject);\n\n/**\n * @override\n */\nBlockly.zelos.PathObject.prototype.setPath = function(pathString) {\n  Blockly.zelos.PathObject.superClass_.setPath.call(this, pathString);\n  if (this.svgPathSelected_) {\n    this.svgPathSelected_.setAttribute('d', pathString);\n  }\n};\n\n/**\n * @override\n */\nBlockly.zelos.PathObject.prototype.applyColour = function(block) {\n  Blockly.zelos.PathObject.superClass_.applyColour.call(this, block);\n  // Set shadow stroke colour.\n  if (block.isShadow() && block.getParent()) {\n    this.svgPath.setAttribute('stroke', block.getParent().style.colourTertiary);\n  }\n\n  // Apply colour to outlines.\n  for (var i = 0, keys = Object.keys(this.outlines_),\n    key; (key = keys[i]); i++) {\n    this.outlines_[key].setAttribute('fill', this.style.colourTertiary);\n  }\n};\n\n/**\n * @override\n */\nBlockly.zelos.PathObject.prototype.flipRTL = function() {\n  Blockly.zelos.PathObject.superClass_.flipRTL.call(this);\n  // Mirror each input outline path.\n  for (var i = 0, keys = Object.keys(this.outlines_),\n    key; (key = keys[i]); i++) {\n    this.outlines_[key].setAttribute('transform', 'scale(-1 1)');\n  }\n};\n\n/**\n * @override\n */\nBlockly.zelos.PathObject.prototype.updateSelected = function(enable) {\n  this.setClass_('blocklySelected', enable);\n  if (enable) {\n    if (!this.svgPathSelected_) {\n      this.svgPathSelected_ =\n        /** @type {!SVGElement} */ (this.svgPath.cloneNode(true));\n      this.svgPathSelected_.setAttribute('fill', 'none');\n      this.svgPathSelected_.setAttribute('filter',\n          'url(#' + this.constants.selectedGlowFilterId + ')');\n      this.svgRoot.appendChild(this.svgPathSelected_);\n    }\n  } else {\n    if (this.svgPathSelected_) {\n      this.svgRoot.removeChild(this.svgPathSelected_);\n      this.svgPathSelected_ = null;\n    }\n  }\n};\n\n/**\n * @override\n */\nBlockly.zelos.PathObject.prototype.updateReplacementFade = function(\n    enable) {\n  this.setClass_('blocklyReplaceable', enable);\n  if (enable) {\n    this.svgPath.setAttribute('filter',\n        'url(#' + this.constants.replacementGlowFilterId + ')');\n  } else {\n    this.svgPath.removeAttribute('filter');\n  }\n};\n\n/**\n * @override\n */\nBlockly.zelos.PathObject.prototype.updateShapeForInputHighlight = function(\n    conn, enable) {\n  var name = conn.getParentInput().name;\n  var outlinePath = this.getOutlinePath_(name);\n  if (!outlinePath) {\n    return;\n  }\n  if (enable) {\n    outlinePath.setAttribute('filter',\n        'url(#' + this.constants.replacementGlowFilterId + ')');\n  } else {\n    outlinePath.removeAttribute('filter');\n  }\n};\n\n/**\n * Method that's called when the drawer is about to draw the block.\n * @package\n */\nBlockly.zelos.PathObject.prototype.beginDrawing = function() {\n  this.remainingOutlines_ = {};\n  for (var i = 0, keys = Object.keys(this.outlines_),\n    key; (key = keys[i]); i++) {\n    // The value set here isn't used anywhere, we are just using the\n    // object as a Set data structure.\n    this.remainingOutlines_[key] = 1;\n  }\n};\n\n/**\n * Method that's called when the drawer is done drawing.\n * @package\n */\nBlockly.zelos.PathObject.prototype.endDrawing = function() {\n  // Go through all remaining outlines that were not used this draw pass, and\n  // remove them.\n  if (this.remainingOutlines_) {\n    for (var i = 0, keys = Object.keys(this.remainingOutlines_),\n      key; (key = keys[i]); i++) {\n      this.removeOutlinePath_(key);\n    }\n  }\n  this.remainingOutlines_ = null;\n};\n\n/**\n * Set the path generated by the renderer for an outline path on the respective\n * outline path SVG element.\n * @param {string} name The input name.\n * @param {string} pathString The path.\n * @package\n */\nBlockly.zelos.PathObject.prototype.setOutlinePath = function(name, pathString) {\n  var outline = this.getOutlinePath_(name);\n  outline.setAttribute('d', pathString);\n  outline.setAttribute('fill', this.style.colourTertiary);\n};\n\n/**\n * Create's an outline path for the specified input.\n * @param {string} name The input name.\n * @return {!SVGElement} The SVG outline path.\n * @private\n */\nBlockly.zelos.PathObject.prototype.getOutlinePath_ = function(name) {\n  if (!this.outlines_[name]) {\n    this.outlines_[name] = Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.PATH, {\n          'class': 'blocklyOutlinePath',\n          // IE doesn't like paths without the data definition, set empty default\n          'd': ''\n        },\n        this.svgRoot);\n  }\n  if (this.remainingOutlines_) {\n    delete this.remainingOutlines_[name];\n  }\n  return this.outlines_[name];\n};\n\n/**\n * Remove an outline path that is associated with the specified input.\n * @param {string} name The input name.\n * @private\n */\nBlockly.zelos.PathObject.prototype.removeOutlinePath_ = function(name) {\n  this.outlines_[name].parentNode.removeChild(this.outlines_[name]);\n  delete this.outlines_[name];\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Methods for graphically rendering a marker as SVG.\n * @author samelh@microsoft.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.zelos.MarkerSvg');\n\ngoog.require('Blockly.blockRendering.MarkerSvg');\ngoog.require('Blockly.utils.dom');\ngoog.require('Blockly.utils.Svg');\n\n\n/**\n * Class to draw a marker.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace the marker belongs to.\n * @param {!Blockly.blockRendering.ConstantProvider} constants The constants for\n *     the renderer.\n * @param {!Blockly.Marker} marker The marker to draw.\n * @constructor\n * @extends {Blockly.blockRendering.MarkerSvg}\n */\nBlockly.zelos.MarkerSvg = function(workspace, constants, marker) {\n  Blockly.zelos.MarkerSvg.superClass_.constructor.call(\n      this, workspace, constants, marker);\n};\nBlockly.utils.object.inherits(Blockly.zelos.MarkerSvg,\n    Blockly.blockRendering.MarkerSvg);\n\n/**\n * Position and display the marker for an input or an output connection.\n * @param {!Blockly.ASTNode} curNode The node to draw the marker for.\n * @private\n */\nBlockly.zelos.MarkerSvg.prototype.showWithInputOutput_ = function(curNode) {\n  var block = /** @type {!Blockly.BlockSvg} */ (curNode.getSourceBlock());\n  var connection = /** @type {!Blockly.Connection} */ (curNode.getLocation());\n  var offsetInBlock = connection.getOffsetInBlock();\n\n  this.positionCircle_(offsetInBlock.x, offsetInBlock.y);\n  this.setParent_(block);\n  this.showCurrent_();\n};\n\n/**\n * @override\n */\nBlockly.zelos.MarkerSvg.prototype.showWithOutput_ = function(curNode) {\n  this.showWithInputOutput_(curNode);\n};\n\n/**\n * @override\n */\nBlockly.zelos.MarkerSvg.prototype.showWithInput_ = function(curNode) {\n  this.showWithInputOutput_(curNode);\n};\n\n/**\n * Draw a rectangle around the block.\n * @param {!Blockly.ASTNode} curNode The current node of the marker.\n */\nBlockly.zelos.MarkerSvg.prototype.showWithBlock_ = function(curNode) {\n  var block = /** @type {!Blockly.BlockSvg} */ (curNode.getLocation());\n\n  // Gets the height and width of entire stack.\n  var heightWidth = block.getHeightWidth();\n\n  // Add padding so that being on a stack looks different than being on a block.\n  this.positionRect_(0, 0, heightWidth.width, heightWidth.height);\n  this.setParent_(block);\n  this.showCurrent_();\n};\n\n/**\n * Position the circle we use for input and output connections.\n * @param {number} x The x position of the circle.\n * @param {number} y The y position of the circle.\n * @private\n */\nBlockly.zelos.MarkerSvg.prototype.positionCircle_ = function(x, y) {\n  this.markerCircle_.setAttribute('cx', x);\n  this.markerCircle_.setAttribute('cy', y);\n  this.currentMarkerSvg = this.markerCircle_;\n};\n\n/**\n * @override\n */\nBlockly.zelos.MarkerSvg.prototype.hide = function() {\n  Blockly.zelos.MarkerSvg.superClass_.hide.call(this);\n  this.markerCircle_.style.display = 'none';\n};\n\n/**\n * @override\n */\nBlockly.zelos.MarkerSvg.prototype.createDomInternal_ = function() {\n  /* This markup will be generated and added to the .svgGroup_:\n  <g>\n    <rect width=\"100\" height=\"5\">\n      <animate attributeType=\"XML\" attributeName=\"fill\" dur=\"1s\"\n        values=\"transparent;transparent;#fff;transparent\" repeatCount=\"indefinite\" />\n    </rect>\n  </g>\n  */\n\n  Blockly.zelos.MarkerSvg.superClass_.createDomInternal_.call(this);\n\n  this.markerCircle_ = Blockly.utils.dom.createSvgElement(\n      Blockly.utils.Svg.CIRCLE, {\n        'r': this.constants_.CURSOR_RADIUS,\n        'style': 'display: none',\n        'stroke-width': this.constants_.CURSOR_STROKE_WIDTH\n      },\n      this.markerSvg_);\n\n  // Markers and stack cursors don't blink.\n  if (this.isCursor()) {\n    var blinkProperties = this.getBlinkProperties_();\n    Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.ANIMATE, blinkProperties,\n        this.markerCircle_);\n  }\n\n  return this.markerSvg_;\n};\n\n/**\n * @override\n */\nBlockly.zelos.MarkerSvg.prototype.applyColour_ = function(curNode) {\n  Blockly.zelos.MarkerSvg.superClass_.applyColour_.call(this, curNode);\n\n  this.markerCircle_.setAttribute('fill', this.colour_);\n  this.markerCircle_.setAttribute('stroke', this.colour_);\n\n  if (this.isCursor()) {\n    var values = this.colour_ + ';transparent;transparent;';\n    this.markerCircle_.firstChild.setAttribute('values', values);\n  }\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Zelos renderer.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.zelos.Renderer');\n\ngoog.require('Blockly.blockRendering');\ngoog.require('Blockly.blockRendering.Renderer');\ngoog.require('Blockly.constants');\ngoog.require('Blockly.InsertionMarkerManager');\ngoog.require('Blockly.utils.object');\ngoog.require('Blockly.zelos.ConstantProvider');\ngoog.require('Blockly.zelos.Drawer');\ngoog.require('Blockly.zelos.PathObject');\ngoog.require('Blockly.zelos.RenderInfo');\ngoog.require('Blockly.zelos.MarkerSvg');\n\n\n/**\n * The zelos renderer.\n * @param {string} name The renderer name.\n * @package\n * @constructor\n * @extends {Blockly.blockRendering.Renderer}\n */\nBlockly.zelos.Renderer = function(name) {\n  Blockly.zelos.Renderer.superClass_.constructor.call(this, name);\n};\nBlockly.utils.object.inherits(Blockly.zelos.Renderer,\n    Blockly.blockRendering.Renderer);\n\n/**\n * Create a new instance of the renderer's constant provider.\n * @return {!Blockly.zelos.ConstantProvider} The constant provider.\n * @protected\n * @override\n */\nBlockly.zelos.Renderer.prototype.makeConstants_ = function() {\n  return new Blockly.zelos.ConstantProvider();\n};\n\n/**\n * Create a new instance of the renderer's render info object.\n * @param {!Blockly.BlockSvg} block The block to measure.\n * @return {!Blockly.zelos.RenderInfo} The render info object.\n * @protected\n * @override\n */\nBlockly.zelos.Renderer.prototype.makeRenderInfo_ = function(block) {\n  return new Blockly.zelos.RenderInfo(this, block);\n};\n\n/**\n * Create a new instance of the renderer's drawer.\n * @param {!Blockly.BlockSvg} block The block to render.\n * @param {!Blockly.blockRendering.RenderInfo} info An object containing all\n *   information needed to render this block.\n * @return {!Blockly.zelos.Drawer} The drawer.\n * @protected\n * @override\n */\nBlockly.zelos.Renderer.prototype.makeDrawer_ = function(block, info) {\n  return new Blockly.zelos.Drawer(block,\n      /** @type {!Blockly.zelos.RenderInfo} */ (info));\n};\n\n/**\n * Create a new instance of the renderer's cursor drawer.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace the cursor belongs to.\n * @param {!Blockly.Marker} marker The marker.\n * @return {!Blockly.blockRendering.MarkerSvg} The object in charge of drawing\n *     the marker.\n * @package\n * @override\n */\nBlockly.zelos.Renderer.prototype.makeMarkerDrawer = function(\n    workspace, marker) {\n  return new Blockly.zelos.MarkerSvg(workspace, this.getConstants(), marker);\n};\n\n/**\n * Create a new instance of a renderer path object.\n * @param {!SVGElement} root The root SVG element.\n * @param {!Blockly.Theme.BlockStyle} style The style object to use for\n *     colouring.\n * @return {!Blockly.zelos.PathObject} The renderer path object.\n * @package\n * @override\n */\nBlockly.zelos.Renderer.prototype.makePathObject = function(root, style) {\n  return new Blockly.zelos.PathObject(root, style,\n      /** @type {!Blockly.zelos.ConstantProvider} */ (this.getConstants()));\n};\n\n/**\n * @override\n */\nBlockly.zelos.Renderer.prototype.shouldHighlightConnection = function(conn) {\n  return conn.type != Blockly.INPUT_VALUE && conn.type !== Blockly.OUTPUT_VALUE;\n};\n\n/**\n * @override\n */\nBlockly.zelos.Renderer.prototype.getConnectionPreviewMethod =\n    function(closest, local, topBlock) {\n      if (local.type == Blockly.OUTPUT_VALUE) {\n        if (!closest.isConnected()) {\n          return Blockly.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE;\n        }\n        // TODO: Returning this is a total hack, because we don't want to show\n        //   a replacement fade, we want to show an outline affect.\n        //   Sadly zelos does not support showing an outline around filled\n        //   inputs, so we have to pretend like the connected block is getting\n        //   replaced.\n        return Blockly.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE;\n      }\n\n      return Blockly.zelos.Renderer.superClass_\n          .getConnectionPreviewMethod(closest, local, topBlock);\n    };\n\nBlockly.blockRendering.register('zelos', Blockly.zelos.Renderer);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Dark theme.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.Themes.Dark');\n\ngoog.require('Blockly.Theme');\n\nBlockly.Themes.Dark = Blockly.Theme.defineTheme('dark', {\n  'base': Blockly.Themes.Classic,\n  'componentStyles': {\n    'workspaceBackgroundColour': '#1e1e1e',\n    'toolboxBackgroundColour': 'blackBackground',\n    'toolboxForegroundColour': '#fff',\n    'flyoutBackgroundColour': '#252526',\n    'flyoutForegroundColour': '#ccc',\n    'flyoutOpacity': 1,\n    'scrollbarColour': '#797979',\n    'insertionMarkerColour': '#fff',\n    'insertionMarkerOpacity': 0.3,\n    'scrollbarOpacity': 0.4,\n    'cursorColour': '#d0d0d0',\n    'blackBackground': '#333'\n  }\n});\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Deuteranopia theme.\n * A colour palette for people that have deuteranopia (the inability to perceive\n * green light). This can also be used for people that have protanopia (the\n * inability to perceive red light).\n */\n'use strict';\n\ngoog.provide('Blockly.Themes.Deuteranopia');\n\ngoog.require('Blockly.Theme');\n\n\n// Temporary holding object.\nBlockly.Themes.Deuteranopia = {};\n\nBlockly.Themes.Deuteranopia.defaultBlockStyles = {\n  \"colour_blocks\": {\n    \"colourPrimary\": \"#f2a72c\",\n    \"colourSecondary\": \"#f1c172\",\n    \"colourTertiary\": \"#da921c\"\n  },\n  \"list_blocks\": {\n    \"colourPrimary\": \"#7d65ab\",\n    \"colourSecondary\": \"#a88be0\",\n    \"colourTertiary\": \"#66518e\"\n  },\n  \"logic_blocks\": {\n    \"colourPrimary\": \"#9fd2f1\",\n    \"colourSecondary\": \"#c0e0f4\",\n    \"colourTertiary\": \"#74bae5\"\n  },\n  \"loop_blocks\": {\n    \"colourPrimary\": \"#795a07\",\n    \"colourSecondary\": \"#ac8726\",\n    \"colourTertiary\": \"#c4a03f\"\n  },\n  \"math_blocks\": {\n    \"colourPrimary\": \"#e6da39\",\n    \"colourSecondary\": \"#f3ec8e\",\n    \"colourTertiary\": \"#f2eeb7\"\n  },\n  \"procedure_blocks\": {\n    \"colourPrimary\": \"#590721\",\n    \"colourSecondary\": \"#8c475d\",\n    \"colourTertiary\": \"#885464\"\n  },\n  \"text_blocks\": {\n    \"colourPrimary\": \"#058863\",\n    \"colourSecondary\": \"#5ecfaf\",\n    \"colourTertiary\": \"#04684c\"\n  },\n  \"variable_blocks\": {\n    \"colourPrimary\": \"#47025a\",\n    \"colourSecondary\": \"#820fa1\",\n    \"colourTertiary\": \"#8e579d\"\n  },\n  \"variable_dynamic_blocks\": {\n    \"colourPrimary\": \"#47025a\",\n    \"colourSecondary\": \"#820fa1\",\n    \"colourTertiary\": \"#8e579d\"\n  }\n};\n\nBlockly.Themes.Deuteranopia.categoryStyles = {\n  \"colour_category\": {\n    \"colour\": \"#f2a72c\"\n  },\n  \"list_category\": {\n    \"colour\": \"#7d65ab\"\n  },\n  \"logic_category\": {\n    \"colour\": \"#9fd2f1\"\n  },\n  \"loop_category\": {\n    \"colour\": \"#795a07\"\n  },\n  \"math_category\": {\n    \"colour\": \"#e6da39\"\n  },\n  \"procedure_category\": {\n    \"colour\": \"#590721\"\n  },\n  \"text_category\": {\n    \"colour\": \"#058863\"\n  },\n  \"variable_category\": {\n    \"colour\": \"#47025a\"\n  },\n  \"variable_dynamic_category\": {\n    \"colour\": \"#47025a\"\n  }\n};\n\nBlockly.Themes.Deuteranopia =\n    new Blockly.Theme('deuteranopia',\n        Blockly.Themes.Deuteranopia.defaultBlockStyles,\n        Blockly.Themes.Deuteranopia.categoryStyles);\n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview High contrast theme.\n * Darker colours to contrast the white font.\n */\n'use strict';\n\ngoog.provide('Blockly.Themes.HighContrast');\n\ngoog.require('Blockly.Theme');\n\n\n// Temporary holding object.\nBlockly.Themes.HighContrast = {};\n\nBlockly.Themes.HighContrast.defaultBlockStyles = {\n  \"colour_blocks\": {\n    \"colourPrimary\": \"#a52714\",\n    \"colourSecondary\": \"#FB9B8C\",\n    \"colourTertiary\": \"#FBE1DD\"\n  },\n  \"list_blocks\": {\n    \"colourPrimary\": \"#4a148c\",\n    \"colourSecondary\": \"#AD7BE9\",\n    \"colourTertiary\": \"#CDB6E9\"\n  },\n  \"logic_blocks\": {\n    \"colourPrimary\": \"#01579b\",\n    \"colourSecondary\": \"#64C7FF\",\n    \"colourTertiary\": \"#C5EAFF\"\n  },\n  \"loop_blocks\": {\n    \"colourPrimary\": \"#33691e\",\n    \"colourSecondary\": \"#9AFF78\",\n    \"colourTertiary\": \"#E1FFD7\"\n  },\n  \"math_blocks\": {\n    \"colourPrimary\": \"#1a237e\",\n    \"colourSecondary\": \"#8A9EFF\",\n    \"colourTertiary\": \"#DCE2FF\"\n  },\n  \"procedure_blocks\": {\n    \"colourPrimary\": \"#006064\",\n    \"colourSecondary\": \"#77E6EE\",\n    \"colourTertiary\": \"#CFECEE\"\n  },\n  \"text_blocks\": {\n    \"colourPrimary\": \"#004d40\",\n    \"colourSecondary\": \"#5ae27c\",\n    \"colourTertiary\": \"#D2FFDD\"\n  },\n  \"variable_blocks\": {\n    \"colourPrimary\": \"#880e4f\",\n    \"colourSecondary\": \"#FF73BE\",\n    \"colourTertiary\": \"#FFD4EB\"\n  },\n  \"variable_dynamic_blocks\": {\n    \"colourPrimary\": \"#880e4f\",\n    \"colourSecondary\": \"#FF73BE\",\n    \"colourTertiary\": \"#FFD4EB\"\n  },\n  \"hat_blocks\": {\n    \"colourPrimary\": \"#880e4f\",\n    \"colourSecondary\": \"#FF73BE\",\n    \"colourTertiary\": \"#FFD4EB\",\n    \"hat\": \"cap\"\n  }\n};\n\nBlockly.Themes.HighContrast.categoryStyles = {\n  \"colour_category\": {\n    \"colour\": \"#a52714\"\n  },\n  \"list_category\": {\n    \"colour\": \"#4a148c\"\n  },\n  \"logic_category\": {\n    \"colour\": \"#01579b\"\n  },\n  \"loop_category\": {\n    \"colour\": \"#33691e\"\n  },\n  \"math_category\": {\n    \"colour\": \"#1a237e\"\n  },\n  \"procedure_category\": {\n    \"colour\": \"#006064\"\n  },\n  \"text_category\": {\n    \"colour\": \"#004d40\"\n  },\n  \"variable_category\": {\n    \"colour\": \"#880e4f\"\n  },\n  \"variable_dynamic_category\": {\n    \"colour\": \"#880e4f\"\n  }\n};\n\n// This style is still being fleshed out and may change.\nBlockly.Themes.HighContrast =\n    new Blockly.Theme('highcontrast',\n        Blockly.Themes.HighContrast.defaultBlockStyles,\n        Blockly.Themes.HighContrast.categoryStyles);\n\nBlockly.Themes.HighContrast.setComponentStyle('selectedGlowColour', '#000000');\nBlockly.Themes.HighContrast.setComponentStyle('selectedGlowSize', 1);\nBlockly.Themes.HighContrast.setComponentStyle('replacementGlowColour', '#000000');\n\nBlockly.Themes.HighContrast.setFontStyle({\n  'family': null, // Use default font-family\n  'weight': null, // Use default font-weight\n  'size': 16\n});\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Tritanopia theme.\n * A color palette for people that have tritanopia (the inability to perceive\n * blue light).\n */\n'use strict';\n\ngoog.provide('Blockly.Themes.Tritanopia');\n\ngoog.require('Blockly.Theme');\n\n\n// Temporary holding object.\nBlockly.Themes.Tritanopia = {};\n\nBlockly.Themes.Tritanopia.defaultBlockStyles = {\n  \"colour_blocks\": {\n    \"colourPrimary\": \"#05427f\",\n    \"colourSecondary\": \"#2974c0\",\n    \"colourTertiary\": \"#2d74bb\"\n  },\n  \"list_blocks\": {\n    \"colourPrimary\": \"#b69ce8\",\n    \"colourSecondary\": \"#ccbaef\",\n    \"colourTertiary\": \"#9176c5\"\n  },\n  \"logic_blocks\": {\n    \"colourPrimary\": \"#9fd2f1\",\n    \"colourSecondary\": \"#c0e0f4\",\n    \"colourTertiary\": \"#74bae5\"\n  },\n  \"loop_blocks\": {\n    \"colourPrimary\": \"#aa1846\",\n    \"colourSecondary\": \"#d36185\",\n    \"colourTertiary\": \"#7c1636\"\n  },\n  \"math_blocks\": {\n    \"colourPrimary\": \"#e6da39\",\n    \"colourSecondary\": \"#f3ec8e\",\n    \"colourTertiary\": \"#f2eeb7\"\n  },\n  \"procedure_blocks\": {\n    \"colourPrimary\": \"#590721\",\n    \"colourSecondary\": \"#8c475d\",\n    \"colourTertiary\": \"#885464\"\n  },\n  \"text_blocks\": {\n    \"colourPrimary\": \"#058863\",\n    \"colourSecondary\": \"#5ecfaf\",\n    \"colourTertiary\": \"#04684c\"\n  },\n  \"variable_blocks\": {\n    \"colourPrimary\": \"#4b2d84\",\n    \"colourSecondary\": \"#816ea7\",\n    \"colourTertiary\": \"#83759e\"\n  },\n  \"variable_dynamic_blocks\": {\n    \"colourPrimary\": \"#4b2d84\",\n    \"colourSecondary\": \"#816ea7\",\n    \"colourTertiary\": \"#83759e\"\n  }\n};\n\nBlockly.Themes.Tritanopia.categoryStyles = {\n  \"colour_category\": {\n    \"colour\": \"#05427f\"\n  },\n  \"list_category\": {\n    \"colour\": \"#b69ce8\"\n  },\n  \"logic_category\": {\n    \"colour\": \"#9fd2f1\"\n  },\n  \"loop_category\": {\n    \"colour\": \"#aa1846\"\n  },\n  \"math_category\": {\n    \"colour\": \"#e6da39\"\n  },\n  \"procedure_category\": {\n    \"colour\": \"#590721\"\n  },\n  \"text_category\": {\n    \"colour\": \"#058863\"\n  },\n  \"variable_category\": {\n    \"colour\": \"#4b2d84\"\n  },\n  \"variable_dynamic_category\": {\n    \"colour\": \"#4b2d84\"\n  }\n};\n\nBlockly.Themes.Tritanopia =\n    new Blockly.Theme('tritanopia',\n        Blockly.Themes.Tritanopia.defaultBlockStyles,\n        Blockly.Themes.Tritanopia.categoryStyles);\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Default Blockly entry point. Use this to pick and choose which\n * fields and renderers to include in your Blockly bundle.\n * @author samelh@google.com (Sam El-Husseini)\n */\n'use strict';\n\ngoog.provide('Blockly.requires');\n\n// Blockly Core (absolutely mandatory).\ngoog.require('Blockly');\n\n\n// If block comments aren't required, then Blockly.inject's \"comments\"\n// configuration must be false, and no blocks may be loaded from XML which\n// define comments.\ngoog.require('Blockly.Comment');\n// One of these two will almost certainly be needed (usually VerticalFlyout).\ngoog.require('Blockly.HorizontalFlyout');\ngoog.require('Blockly.VerticalFlyout');\n// Flyout buttons are needed by the variable category,\n// and by any custom toolbox that has a button or a label.\ngoog.require('Blockly.FlyoutButton');\n// If there is code generation into any language, then the generator is needed.\n// Should not be required when using advanced compilation since\n// individual generator files should already have this require.\ngoog.require('Blockly.Generator');\n// If the toolbox does not have categories and only has a simple flyout, then\n// 'Blockly.Toolbox' is not needed.\ngoog.require('Blockly.Toolbox');\n// If a trashcan on the workspace isn't required, then Blockly.inject's\n// \"trashcan\" configuration must be false.\ngoog.require('Blockly.Trashcan');\n// Only needed if one is using the 'VARIABLE_DYNAMIC' typed variables category.\ngoog.require('Blockly.VariablesDynamic');\n// Only need to require these two if you're using workspace comments.\n// goog.require('Blockly.WorkspaceCommentSvg');\n// goog.require('Blockly.WorkspaceCommentSvg.render');\n// If zoom controls aren't required, then Blockly.inject's\n// \"zoom\"/\"controls\" configuration must be false.\ngoog.require('Blockly.ZoomControls');\n\n\n// Block dependencies.\n// None of these should be required when using advanced compilation since\n// individual block files should include the requirements they depend on.\ngoog.require('Blockly.Mutator');\ngoog.require('Blockly.Warning');\ngoog.require('Blockly.FieldAngle');\ngoog.require('Blockly.FieldCheckbox');\ngoog.require('Blockly.FieldColour');\ngoog.require('Blockly.FieldDropdown');\ngoog.require('Blockly.FieldLabelSerializable');\ngoog.require('Blockly.FieldImage');\ngoog.require('Blockly.FieldTextInput');\ngoog.require('Blockly.FieldMultilineInput');\ngoog.require('Blockly.FieldNumber');\ngoog.require('Blockly.FieldVariable');\n\n\n// Blockly Renderers.\n// At least one renderer is mandatory.  Geras is the default one.\n// Others may be chosen using Blockly.inject's \"renderer\" configuration.\ngoog.require('Blockly.geras.Renderer');\ngoog.require('Blockly.thrasos.Renderer');\ngoog.require('Blockly.zelos.Renderer');\n// The debug renderer, which shows simplified versions of the blocks for\n// developer use.\n// goog.require('Blockly.blockRendering.Debug');\n\n// Blockly Themes.\n// Classic is the default theme.\ngoog.require('Blockly.Themes.Classic');\ngoog.require('Blockly.Themes.Dark');\ngoog.require('Blockly.Themes.Deuteranopia');\ngoog.require('Blockly.Themes.HighContrast');\ngoog.require('Blockly.Themes.Tritanopia');\n// goog.require('Blockly.Themes.Modern');\n","/* eslint-disable */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) { // AMD\n    define(['./blockly_compressed'], factory);\n  } else if (typeof exports === 'object') { // Node.js\n    module.exports = factory(require('./blockly_compressed'));\n  } else { // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n}(this, function(Blockly) {\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly module.\n */\n\n/* eslint-disable */\n'use strict';\n\nreturn Blockly;\n})); \n","/* eslint-disable */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) { // AMD\n    define(['./blockly'], factory);\n  } else if (typeof exports === 'object') { // Node.js\n    module.exports = factory(require('./blockly'));\n  } else { // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n}(this, function(Blockly) {\n/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly core module for the browser. It includes blockly.js\n *               and adds a helper method for setting the locale.\n */\n\n/* eslint-disable */\n'use strict';\n\n// Add a helper method to set the Blockly locale.\nBlockly.setLocale = function (locale) {\n  Blockly.Msg = Blockly.Msg || {};\n  Object.keys(locale).forEach(function (k) {\n    Blockly.Msg[k] = locale[k];\n  });\n};\n\nreturn Blockly;\n})); \n","/* eslint-disable */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) { // AMD\n    define(['../core'], factory);\n  } else if (typeof exports === 'object') { // Node.js\n    module.exports = factory(require('../core'));\n  } else { // Browser\n    root.Blockly.Msg = factory(root.Blockly);\n  }\n}(this, function(Blockly) {\n\n      var Blockly = {};Blockly.Msg={};// This file was automatically generated.  Do not modify.\n\n'use strict';\n\nBlockly.Msg[\"ADD_COMMENT\"] = \"Add Comment\";\nBlockly.Msg[\"CANNOT_DELETE_VARIABLE_PROCEDURE\"] = \"Can't delete the variable '%1' because it's part of the definition of the function '%2'\";\nBlockly.Msg[\"CHANGE_VALUE_TITLE\"] = \"Change value:\";\nBlockly.Msg[\"CLEAN_UP\"] = \"Clean up Blocks\";\nBlockly.Msg[\"COLLAPSED_WARNINGS_WARNING\"] = \"Collapsed blocks contain warnings.\";\nBlockly.Msg[\"COLLAPSE_ALL\"] = \"Collapse Blocks\";\nBlockly.Msg[\"COLLAPSE_BLOCK\"] = \"Collapse Block\";\nBlockly.Msg[\"COLOUR_BLEND_COLOUR1\"] = \"colour 1\";\nBlockly.Msg[\"COLOUR_BLEND_COLOUR2\"] = \"colour 2\";\nBlockly.Msg[\"COLOUR_BLEND_HELPURL\"] = \"https://meyerweb.com/eric/tools/color-blend/#:::rgbp\";\nBlockly.Msg[\"COLOUR_BLEND_RATIO\"] = \"ratio\";\nBlockly.Msg[\"COLOUR_BLEND_TITLE\"] = \"blend\";\nBlockly.Msg[\"COLOUR_BLEND_TOOLTIP\"] = \"Blends two colours together with a given ratio (0.0 - 1.0).\";\nBlockly.Msg[\"COLOUR_PICKER_HELPURL\"] = \"https://en.wikipedia.org/wiki/Color\";\nBlockly.Msg[\"COLOUR_PICKER_TOOLTIP\"] = \"Choose a colour from the palette.\";\nBlockly.Msg[\"COLOUR_RANDOM_HELPURL\"] = \"http://randomcolour.com\";\nBlockly.Msg[\"COLOUR_RANDOM_TITLE\"] = \"random colour\";\nBlockly.Msg[\"COLOUR_RANDOM_TOOLTIP\"] = \"Choose a colour at random.\";\nBlockly.Msg[\"COLOUR_RGB_BLUE\"] = \"blue\";\nBlockly.Msg[\"COLOUR_RGB_GREEN\"] = \"green\";\nBlockly.Msg[\"COLOUR_RGB_HELPURL\"] = \"https://www.december.com/html/spec/colorpercompact.html\";\nBlockly.Msg[\"COLOUR_RGB_RED\"] = \"red\";\nBlockly.Msg[\"COLOUR_RGB_TITLE\"] = \"colour with\";\nBlockly.Msg[\"COLOUR_RGB_TOOLTIP\"] = \"Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.\";\nBlockly.Msg[\"CONTROLS_FLOW_STATEMENTS_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#loop-termination-blocks\";\nBlockly.Msg[\"CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK\"] = \"break out of loop\";\nBlockly.Msg[\"CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE\"] = \"continue with next iteration of loop\";\nBlockly.Msg[\"CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK\"] = \"Break out of the containing loop.\";\nBlockly.Msg[\"CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE\"] = \"Skip the rest of this loop, and continue with the next iteration.\";\nBlockly.Msg[\"CONTROLS_FLOW_STATEMENTS_WARNING\"] = \"Warning: This block may only be used within a loop.\";\nBlockly.Msg[\"CONTROLS_FOREACH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#for-each\";\nBlockly.Msg[\"CONTROLS_FOREACH_TITLE\"] = \"for each item %1 in list %2\";\nBlockly.Msg[\"CONTROLS_FOREACH_TOOLTIP\"] = \"For each item in a list, set the variable '%1' to the item, and then do some statements.\";\nBlockly.Msg[\"CONTROLS_FOR_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#count-with\";\nBlockly.Msg[\"CONTROLS_FOR_TITLE\"] = \"count with %1 from %2 to %3 by %4\";\nBlockly.Msg[\"CONTROLS_FOR_TOOLTIP\"] = \"Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.\";\nBlockly.Msg[\"CONTROLS_IF_ELSEIF_TOOLTIP\"] = \"Add a condition to the if block.\";\nBlockly.Msg[\"CONTROLS_IF_ELSE_TOOLTIP\"] = \"Add a final, catch-all condition to the if block.\";\nBlockly.Msg[\"CONTROLS_IF_HELPURL\"] = \"https://github.com/google/blockly/wiki/IfElse\";\nBlockly.Msg[\"CONTROLS_IF_IF_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this if block.\";\nBlockly.Msg[\"CONTROLS_IF_MSG_ELSE\"] = \"else\";\nBlockly.Msg[\"CONTROLS_IF_MSG_ELSEIF\"] = \"else if\";\nBlockly.Msg[\"CONTROLS_IF_MSG_IF\"] = \"if\";\nBlockly.Msg[\"CONTROLS_IF_TOOLTIP_1\"] = \"If a value is true, then do some statements.\";\nBlockly.Msg[\"CONTROLS_IF_TOOLTIP_2\"] = \"If a value is true, then do the first block of statements. Otherwise, do the second block of statements.\";\nBlockly.Msg[\"CONTROLS_IF_TOOLTIP_3\"] = \"If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.\";\nBlockly.Msg[\"CONTROLS_IF_TOOLTIP_4\"] = \"If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.\";\nBlockly.Msg[\"CONTROLS_REPEAT_HELPURL\"] = \"https://en.wikipedia.org/wiki/For_loop\";\nBlockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"] = \"do\";\nBlockly.Msg[\"CONTROLS_REPEAT_TITLE\"] = \"repeat %1 times\";\nBlockly.Msg[\"CONTROLS_REPEAT_TOOLTIP\"] = \"Do some statements several times.\";\nBlockly.Msg[\"CONTROLS_WHILEUNTIL_HELPURL\"] = \"https://github.com/google/blockly/wiki/Loops#repeat\";\nBlockly.Msg[\"CONTROLS_WHILEUNTIL_OPERATOR_UNTIL\"] = \"repeat until\";\nBlockly.Msg[\"CONTROLS_WHILEUNTIL_OPERATOR_WHILE\"] = \"repeat while\";\nBlockly.Msg[\"CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL\"] = \"While a value is false, then do some statements.\";\nBlockly.Msg[\"CONTROLS_WHILEUNTIL_TOOLTIP_WHILE\"] = \"While a value is true, then do some statements.\";\nBlockly.Msg[\"DELETE_ALL_BLOCKS\"] = \"Delete all %1 blocks?\";\nBlockly.Msg[\"DELETE_BLOCK\"] = \"Delete Block\";\nBlockly.Msg[\"DELETE_VARIABLE\"] = \"Delete the '%1' variable\";\nBlockly.Msg[\"DELETE_VARIABLE_CONFIRMATION\"] = \"Delete %1 uses of the '%2' variable?\";\nBlockly.Msg[\"DELETE_X_BLOCKS\"] = \"Delete %1 Blocks\";\nBlockly.Msg[\"DISABLE_BLOCK\"] = \"Disable Block\";\nBlockly.Msg[\"DUPLICATE_BLOCK\"] = \"Duplicate\";\nBlockly.Msg[\"DUPLICATE_COMMENT\"] = \"Duplicate Comment\";\nBlockly.Msg[\"ENABLE_BLOCK\"] = \"Enable Block\";\nBlockly.Msg[\"EXPAND_ALL\"] = \"Expand Blocks\";\nBlockly.Msg[\"EXPAND_BLOCK\"] = \"Expand Block\";\nBlockly.Msg[\"EXTERNAL_INPUTS\"] = \"External Inputs\";\nBlockly.Msg[\"HELP\"] = \"Help\";\nBlockly.Msg[\"INLINE_INPUTS\"] = \"Inline Inputs\";\nBlockly.Msg[\"IOS_CANCEL\"] = \"Cancel\";\nBlockly.Msg[\"IOS_ERROR\"] = \"Error\";\nBlockly.Msg[\"IOS_OK\"] = \"OK\";\nBlockly.Msg[\"IOS_PROCEDURES_ADD_INPUT\"] = \"+ Add Input\";\nBlockly.Msg[\"IOS_PROCEDURES_ALLOW_STATEMENTS\"] = \"Allow statements\";\nBlockly.Msg[\"IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR\"] = \"This function has duplicate inputs.\";\nBlockly.Msg[\"IOS_PROCEDURES_INPUTS\"] = \"INPUTS\";\nBlockly.Msg[\"IOS_VARIABLES_ADD_BUTTON\"] = \"Add\";\nBlockly.Msg[\"IOS_VARIABLES_ADD_VARIABLE\"] = \"+ Add Variable\";\nBlockly.Msg[\"IOS_VARIABLES_DELETE_BUTTON\"] = \"Delete\";\nBlockly.Msg[\"IOS_VARIABLES_EMPTY_NAME_ERROR\"] = \"You can't use an empty variable name.\";\nBlockly.Msg[\"IOS_VARIABLES_RENAME_BUTTON\"] = \"Rename\";\nBlockly.Msg[\"IOS_VARIABLES_VARIABLE_NAME\"] = \"Variable name\";\nBlockly.Msg[\"LISTS_CREATE_EMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-empty-list\";\nBlockly.Msg[\"LISTS_CREATE_EMPTY_TITLE\"] = \"create empty list\";\nBlockly.Msg[\"LISTS_CREATE_EMPTY_TOOLTIP\"] = \"Returns a list, of length 0, containing no data records\";\nBlockly.Msg[\"LISTS_CREATE_WITH_CONTAINER_TITLE_ADD\"] = \"list\";\nBlockly.Msg[\"LISTS_CREATE_WITH_CONTAINER_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this list block.\";\nBlockly.Msg[\"LISTS_CREATE_WITH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-list-with\";\nBlockly.Msg[\"LISTS_CREATE_WITH_INPUT_WITH\"] = \"create list with\";\nBlockly.Msg[\"LISTS_CREATE_WITH_ITEM_TOOLTIP\"] = \"Add an item to the list.\";\nBlockly.Msg[\"LISTS_CREATE_WITH_TOOLTIP\"] = \"Create a list with any number of items.\";\nBlockly.Msg[\"LISTS_GET_INDEX_FIRST\"] = \"first\";\nBlockly.Msg[\"LISTS_GET_INDEX_FROM_END\"] = \"# from end\";\nBlockly.Msg[\"LISTS_GET_INDEX_FROM_START\"] = \"#\";\nBlockly.Msg[\"LISTS_GET_INDEX_GET\"] = \"get\";\nBlockly.Msg[\"LISTS_GET_INDEX_GET_REMOVE\"] = \"get and remove\";\nBlockly.Msg[\"LISTS_GET_INDEX_LAST\"] = \"last\";\nBlockly.Msg[\"LISTS_GET_INDEX_RANDOM\"] = \"random\";\nBlockly.Msg[\"LISTS_GET_INDEX_REMOVE\"] = \"remove\";\nBlockly.Msg[\"LISTS_GET_INDEX_TAIL\"] = \"\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_FIRST\"] = \"Returns the first item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_FROM\"] = \"Returns the item at the specified position in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_LAST\"] = \"Returns the last item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_RANDOM\"] = \"Returns a random item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST\"] = \"Removes and returns the first item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM\"] = \"Removes and returns the item at the specified position in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST\"] = \"Removes and returns the last item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM\"] = \"Removes and returns a random item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST\"] = \"Removes the first item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM\"] = \"Removes the item at the specified position in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST\"] = \"Removes the last item in a list.\";\nBlockly.Msg[\"LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM\"] = \"Removes a random item in a list.\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_END_FROM_END\"] = \"to # from end\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_END_FROM_START\"] = \"to #\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_END_LAST\"] = \"to last\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#getting-a-sublist\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_START_FIRST\"] = \"get sub-list from first\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_START_FROM_END\"] = \"get sub-list from # from end\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_START_FROM_START\"] = \"get sub-list from #\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_TAIL\"] = \"\";\nBlockly.Msg[\"LISTS_GET_SUBLIST_TOOLTIP\"] = \"Creates a copy of the specified portion of a list.\";\nBlockly.Msg[\"LISTS_INDEX_FROM_END_TOOLTIP\"] = \"%1 is the last item.\";\nBlockly.Msg[\"LISTS_INDEX_FROM_START_TOOLTIP\"] = \"%1 is the first item.\";\nBlockly.Msg[\"LISTS_INDEX_OF_FIRST\"] = \"find first occurrence of item\";\nBlockly.Msg[\"LISTS_INDEX_OF_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list\";\nBlockly.Msg[\"LISTS_INDEX_OF_LAST\"] = \"find last occurrence of item\";\nBlockly.Msg[\"LISTS_INDEX_OF_TOOLTIP\"] = \"Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.\";\nBlockly.Msg[\"LISTS_INLIST\"] = \"in list\";\nBlockly.Msg[\"LISTS_ISEMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#is-empty\";\nBlockly.Msg[\"LISTS_ISEMPTY_TITLE\"] = \"%1 is empty\";\nBlockly.Msg[\"LISTS_ISEMPTY_TOOLTIP\"] = \"Returns true if the list is empty.\";\nBlockly.Msg[\"LISTS_LENGTH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#length-of\";\nBlockly.Msg[\"LISTS_LENGTH_TITLE\"] = \"length of %1\";\nBlockly.Msg[\"LISTS_LENGTH_TOOLTIP\"] = \"Returns the length of a list.\";\nBlockly.Msg[\"LISTS_REPEAT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#create-list-with\";\nBlockly.Msg[\"LISTS_REPEAT_TITLE\"] = \"create list with item %1 repeated %2 times\";\nBlockly.Msg[\"LISTS_REPEAT_TOOLTIP\"] = \"Creates a list consisting of the given value repeated the specified number of times.\";\nBlockly.Msg[\"LISTS_REVERSE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#reversing-a-list\";\nBlockly.Msg[\"LISTS_REVERSE_MESSAGE0\"] = \"reverse %1\";\nBlockly.Msg[\"LISTS_REVERSE_TOOLTIP\"] = \"Reverse a copy of a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#in-list--set\";\nBlockly.Msg[\"LISTS_SET_INDEX_INPUT_TO\"] = \"as\";\nBlockly.Msg[\"LISTS_SET_INDEX_INSERT\"] = \"insert at\";\nBlockly.Msg[\"LISTS_SET_INDEX_SET\"] = \"set\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST\"] = \"Inserts the item at the start of a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_FROM\"] = \"Inserts the item at the specified position in a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_LAST\"] = \"Append the item to the end of a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM\"] = \"Inserts the item randomly in a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_FIRST\"] = \"Sets the first item in a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_FROM\"] = \"Sets the item at the specified position in a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_LAST\"] = \"Sets the last item in a list.\";\nBlockly.Msg[\"LISTS_SET_INDEX_TOOLTIP_SET_RANDOM\"] = \"Sets a random item in a list.\";\nBlockly.Msg[\"LISTS_SORT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#sorting-a-list\";\nBlockly.Msg[\"LISTS_SORT_ORDER_ASCENDING\"] = \"ascending\";\nBlockly.Msg[\"LISTS_SORT_ORDER_DESCENDING\"] = \"descending\";\nBlockly.Msg[\"LISTS_SORT_TITLE\"] = \"sort %1 %2 %3\";\nBlockly.Msg[\"LISTS_SORT_TOOLTIP\"] = \"Sort a copy of a list.\";\nBlockly.Msg[\"LISTS_SORT_TYPE_IGNORECASE\"] = \"alphabetic, ignore case\";\nBlockly.Msg[\"LISTS_SORT_TYPE_NUMERIC\"] = \"numeric\";\nBlockly.Msg[\"LISTS_SORT_TYPE_TEXT\"] = \"alphabetic\";\nBlockly.Msg[\"LISTS_SPLIT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists\";\nBlockly.Msg[\"LISTS_SPLIT_LIST_FROM_TEXT\"] = \"make list from text\";\nBlockly.Msg[\"LISTS_SPLIT_TEXT_FROM_LIST\"] = \"make text from list\";\nBlockly.Msg[\"LISTS_SPLIT_TOOLTIP_JOIN\"] = \"Join a list of texts into one text, separated by a delimiter.\";\nBlockly.Msg[\"LISTS_SPLIT_TOOLTIP_SPLIT\"] = \"Split text into a list of texts, breaking at each delimiter.\";\nBlockly.Msg[\"LISTS_SPLIT_WITH_DELIMITER\"] = \"with delimiter\";\nBlockly.Msg[\"LOGIC_BOOLEAN_FALSE\"] = \"false\";\nBlockly.Msg[\"LOGIC_BOOLEAN_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#values\";\nBlockly.Msg[\"LOGIC_BOOLEAN_TOOLTIP\"] = \"Returns either true or false.\";\nBlockly.Msg[\"LOGIC_BOOLEAN_TRUE\"] = \"true\";\nBlockly.Msg[\"LOGIC_COMPARE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Inequality_(mathematics)\";\nBlockly.Msg[\"LOGIC_COMPARE_TOOLTIP_EQ\"] = \"Return true if both inputs equal each other.\";\nBlockly.Msg[\"LOGIC_COMPARE_TOOLTIP_GT\"] = \"Return true if the first input is greater than the second input.\";\nBlockly.Msg[\"LOGIC_COMPARE_TOOLTIP_GTE\"] = \"Return true if the first input is greater than or equal to the second input.\";\nBlockly.Msg[\"LOGIC_COMPARE_TOOLTIP_LT\"] = \"Return true if the first input is smaller than the second input.\";\nBlockly.Msg[\"LOGIC_COMPARE_TOOLTIP_LTE\"] = \"Return true if the first input is smaller than or equal to the second input.\";\nBlockly.Msg[\"LOGIC_COMPARE_TOOLTIP_NEQ\"] = \"Return true if both inputs are not equal to each other.\";\nBlockly.Msg[\"LOGIC_NEGATE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#not\";\nBlockly.Msg[\"LOGIC_NEGATE_TITLE\"] = \"not %1\";\nBlockly.Msg[\"LOGIC_NEGATE_TOOLTIP\"] = \"Returns true if the input is false. Returns false if the input is true.\";\nBlockly.Msg[\"LOGIC_NULL\"] = \"null\";\nBlockly.Msg[\"LOGIC_NULL_HELPURL\"] = \"https://en.wikipedia.org/wiki/Nullable_type\";\nBlockly.Msg[\"LOGIC_NULL_TOOLTIP\"] = \"Returns null.\";\nBlockly.Msg[\"LOGIC_OPERATION_AND\"] = \"and\";\nBlockly.Msg[\"LOGIC_OPERATION_HELPURL\"] = \"https://github.com/google/blockly/wiki/Logic#logical-operations\";\nBlockly.Msg[\"LOGIC_OPERATION_OR\"] = \"or\";\nBlockly.Msg[\"LOGIC_OPERATION_TOOLTIP_AND\"] = \"Return true if both inputs are true.\";\nBlockly.Msg[\"LOGIC_OPERATION_TOOLTIP_OR\"] = \"Return true if at least one of the inputs is true.\";\nBlockly.Msg[\"LOGIC_TERNARY_CONDITION\"] = \"test\";\nBlockly.Msg[\"LOGIC_TERNARY_HELPURL\"] = \"https://en.wikipedia.org/wiki/%3F:\";\nBlockly.Msg[\"LOGIC_TERNARY_IF_FALSE\"] = \"if false\";\nBlockly.Msg[\"LOGIC_TERNARY_IF_TRUE\"] = \"if true\";\nBlockly.Msg[\"LOGIC_TERNARY_TOOLTIP\"] = \"Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.\";\nBlockly.Msg[\"MATH_ADDITION_SYMBOL\"] = \"+\";\nBlockly.Msg[\"MATH_ARITHMETIC_HELPURL\"] = \"https://en.wikipedia.org/wiki/Arithmetic\";\nBlockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_ADD\"] = \"Return the sum of the two numbers.\";\nBlockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_DIVIDE\"] = \"Return the quotient of the two numbers.\";\nBlockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_MINUS\"] = \"Return the difference of the two numbers.\";\nBlockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_MULTIPLY\"] = \"Return the product of the two numbers.\";\nBlockly.Msg[\"MATH_ARITHMETIC_TOOLTIP_POWER\"] = \"Return the first number raised to the power of the second number.\";\nBlockly.Msg[\"MATH_ATAN2_HELPURL\"] = \"https://en.wikipedia.org/wiki/Atan2\";\nBlockly.Msg[\"MATH_ATAN2_TITLE\"] = \"atan2 of X:%1 Y:%2\";\nBlockly.Msg[\"MATH_ATAN2_TOOLTIP\"] = \"Return the arctangent of point (X, Y) in degrees from -180 to 180.\";\nBlockly.Msg[\"MATH_CHANGE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter\";\nBlockly.Msg[\"MATH_CHANGE_TITLE\"] = \"change %1 by %2\";\nBlockly.Msg[\"MATH_CHANGE_TOOLTIP\"] = \"Add a number to variable '%1'.\";\nBlockly.Msg[\"MATH_CONSTANT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Mathematical_constant\";\nBlockly.Msg[\"MATH_CONSTANT_TOOLTIP\"] = \"Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).\";\nBlockly.Msg[\"MATH_CONSTRAIN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Clamping_(graphics)\";\nBlockly.Msg[\"MATH_CONSTRAIN_TITLE\"] = \"constrain %1 low %2 high %3\";\nBlockly.Msg[\"MATH_CONSTRAIN_TOOLTIP\"] = \"Constrain a number to be between the specified limits (inclusive).\";\nBlockly.Msg[\"MATH_DIVISION_SYMBOL\"] = \"\";\nBlockly.Msg[\"MATH_IS_DIVISIBLE_BY\"] = \"is divisible by\";\nBlockly.Msg[\"MATH_IS_EVEN\"] = \"is even\";\nBlockly.Msg[\"MATH_IS_NEGATIVE\"] = \"is negative\";\nBlockly.Msg[\"MATH_IS_ODD\"] = \"is odd\";\nBlockly.Msg[\"MATH_IS_POSITIVE\"] = \"is positive\";\nBlockly.Msg[\"MATH_IS_PRIME\"] = \"is prime\";\nBlockly.Msg[\"MATH_IS_TOOLTIP\"] = \"Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.\";\nBlockly.Msg[\"MATH_IS_WHOLE\"] = \"is whole\";\nBlockly.Msg[\"MATH_MODULO_HELPURL\"] = \"https://en.wikipedia.org/wiki/Modulo_operation\";\nBlockly.Msg[\"MATH_MODULO_TITLE\"] = \"remainder of %1  %2\";\nBlockly.Msg[\"MATH_MODULO_TOOLTIP\"] = \"Return the remainder from dividing the two numbers.\";\nBlockly.Msg[\"MATH_MULTIPLICATION_SYMBOL\"] = \"\";\nBlockly.Msg[\"MATH_NUMBER_HELPURL\"] = \"https://en.wikipedia.org/wiki/Number\";\nBlockly.Msg[\"MATH_NUMBER_TOOLTIP\"] = \"A number.\";\nBlockly.Msg[\"MATH_ONLIST_HELPURL\"] = \"\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_AVERAGE\"] = \"average of list\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_MAX\"] = \"max of list\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_MEDIAN\"] = \"median of list\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_MIN\"] = \"min of list\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_MODE\"] = \"modes of list\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_RANDOM\"] = \"random item of list\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_STD_DEV\"] = \"standard deviation of list\";\nBlockly.Msg[\"MATH_ONLIST_OPERATOR_SUM\"] = \"sum of list\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_AVERAGE\"] = \"Return the average (arithmetic mean) of the numeric values in the list.\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_MAX\"] = \"Return the largest number in the list.\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_MEDIAN\"] = \"Return the median number in the list.\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_MIN\"] = \"Return the smallest number in the list.\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_MODE\"] = \"Return a list of the most common item(s) in the list.\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_RANDOM\"] = \"Return a random element from the list.\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_STD_DEV\"] = \"Return the standard deviation of the list.\";\nBlockly.Msg[\"MATH_ONLIST_TOOLTIP_SUM\"] = \"Return the sum of all the numbers in the list.\";\nBlockly.Msg[\"MATH_POWER_SYMBOL\"] = \"^\";\nBlockly.Msg[\"MATH_RANDOM_FLOAT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Random_number_generation\";\nBlockly.Msg[\"MATH_RANDOM_FLOAT_TITLE_RANDOM\"] = \"random fraction\";\nBlockly.Msg[\"MATH_RANDOM_FLOAT_TOOLTIP\"] = \"Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).\";\nBlockly.Msg[\"MATH_RANDOM_INT_HELPURL\"] = \"https://en.wikipedia.org/wiki/Random_number_generation\";\nBlockly.Msg[\"MATH_RANDOM_INT_TITLE\"] = \"random integer from %1 to %2\";\nBlockly.Msg[\"MATH_RANDOM_INT_TOOLTIP\"] = \"Return a random integer between the two specified limits, inclusive.\";\nBlockly.Msg[\"MATH_ROUND_HELPURL\"] = \"https://en.wikipedia.org/wiki/Rounding\";\nBlockly.Msg[\"MATH_ROUND_OPERATOR_ROUND\"] = \"round\";\nBlockly.Msg[\"MATH_ROUND_OPERATOR_ROUNDDOWN\"] = \"round down\";\nBlockly.Msg[\"MATH_ROUND_OPERATOR_ROUNDUP\"] = \"round up\";\nBlockly.Msg[\"MATH_ROUND_TOOLTIP\"] = \"Round a number up or down.\";\nBlockly.Msg[\"MATH_SINGLE_HELPURL\"] = \"https://en.wikipedia.org/wiki/Square_root\";\nBlockly.Msg[\"MATH_SINGLE_OP_ABSOLUTE\"] = \"absolute\";\nBlockly.Msg[\"MATH_SINGLE_OP_ROOT\"] = \"square root\";\nBlockly.Msg[\"MATH_SINGLE_TOOLTIP_ABS\"] = \"Return the absolute value of a number.\";\nBlockly.Msg[\"MATH_SINGLE_TOOLTIP_EXP\"] = \"Return e to the power of a number.\";\nBlockly.Msg[\"MATH_SINGLE_TOOLTIP_LN\"] = \"Return the natural logarithm of a number.\";\nBlockly.Msg[\"MATH_SINGLE_TOOLTIP_LOG10\"] = \"Return the base 10 logarithm of a number.\";\nBlockly.Msg[\"MATH_SINGLE_TOOLTIP_NEG\"] = \"Return the negation of a number.\";\nBlockly.Msg[\"MATH_SINGLE_TOOLTIP_POW10\"] = \"Return 10 to the power of a number.\";\nBlockly.Msg[\"MATH_SINGLE_TOOLTIP_ROOT\"] = \"Return the square root of a number.\";\nBlockly.Msg[\"MATH_SUBTRACTION_SYMBOL\"] = \"-\";\nBlockly.Msg[\"MATH_TRIG_ACOS\"] = \"acos\";\nBlockly.Msg[\"MATH_TRIG_ASIN\"] = \"asin\";\nBlockly.Msg[\"MATH_TRIG_ATAN\"] = \"atan\";\nBlockly.Msg[\"MATH_TRIG_COS\"] = \"cos\";\nBlockly.Msg[\"MATH_TRIG_HELPURL\"] = \"https://en.wikipedia.org/wiki/Trigonometric_functions\";\nBlockly.Msg[\"MATH_TRIG_SIN\"] = \"sin\";\nBlockly.Msg[\"MATH_TRIG_TAN\"] = \"tan\";\nBlockly.Msg[\"MATH_TRIG_TOOLTIP_ACOS\"] = \"Return the arccosine of a number.\";\nBlockly.Msg[\"MATH_TRIG_TOOLTIP_ASIN\"] = \"Return the arcsine of a number.\";\nBlockly.Msg[\"MATH_TRIG_TOOLTIP_ATAN\"] = \"Return the arctangent of a number.\";\nBlockly.Msg[\"MATH_TRIG_TOOLTIP_COS\"] = \"Return the cosine of a degree (not radian).\";\nBlockly.Msg[\"MATH_TRIG_TOOLTIP_SIN\"] = \"Return the sine of a degree (not radian).\";\nBlockly.Msg[\"MATH_TRIG_TOOLTIP_TAN\"] = \"Return the tangent of a degree (not radian).\";\nBlockly.Msg[\"NEW_COLOUR_VARIABLE\"] = \"Create colour variable...\";\nBlockly.Msg[\"NEW_NUMBER_VARIABLE\"] = \"Create number variable...\";\nBlockly.Msg[\"NEW_STRING_VARIABLE\"] = \"Create string variable...\";\nBlockly.Msg[\"NEW_VARIABLE\"] = \"Create variable...\";\nBlockly.Msg[\"NEW_VARIABLE_TITLE\"] = \"New variable name:\";\nBlockly.Msg[\"NEW_VARIABLE_TYPE_TITLE\"] = \"New variable type:\";\nBlockly.Msg[\"ORDINAL_NUMBER_SUFFIX\"] = \"\";\nBlockly.Msg[\"PROCEDURES_ALLOW_STATEMENTS\"] = \"allow statements\";\nBlockly.Msg[\"PROCEDURES_BEFORE_PARAMS\"] = \"with:\";\nBlockly.Msg[\"PROCEDURES_CALLNORETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\nBlockly.Msg[\"PROCEDURES_CALLNORETURN_TOOLTIP\"] = \"Run the user-defined function '%1'.\";\nBlockly.Msg[\"PROCEDURES_CALLRETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\nBlockly.Msg[\"PROCEDURES_CALLRETURN_TOOLTIP\"] = \"Run the user-defined function '%1' and use its output.\";\nBlockly.Msg[\"PROCEDURES_CALL_BEFORE_PARAMS\"] = \"with:\";\nBlockly.Msg[\"PROCEDURES_CREATE_DO\"] = \"Create '%1'\";\nBlockly.Msg[\"PROCEDURES_DEFNORETURN_COMMENT\"] = \"Describe this function...\";\nBlockly.Msg[\"PROCEDURES_DEFNORETURN_DO\"] = \"\";\nBlockly.Msg[\"PROCEDURES_DEFNORETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\nBlockly.Msg[\"PROCEDURES_DEFNORETURN_PROCEDURE\"] = \"do something\";\nBlockly.Msg[\"PROCEDURES_DEFNORETURN_TITLE\"] = \"to\";\nBlockly.Msg[\"PROCEDURES_DEFNORETURN_TOOLTIP\"] = \"Creates a function with no output.\";\nBlockly.Msg[\"PROCEDURES_DEFRETURN_HELPURL\"] = \"https://en.wikipedia.org/wiki/Subroutine\";\nBlockly.Msg[\"PROCEDURES_DEFRETURN_RETURN\"] = \"return\";\nBlockly.Msg[\"PROCEDURES_DEFRETURN_TOOLTIP\"] = \"Creates a function with an output.\";\nBlockly.Msg[\"PROCEDURES_DEF_DUPLICATE_WARNING\"] = \"Warning: This function has duplicate parameters.\";\nBlockly.Msg[\"PROCEDURES_HIGHLIGHT_DEF\"] = \"Highlight function definition\";\nBlockly.Msg[\"PROCEDURES_IFRETURN_HELPURL\"] = \"http://c2.com/cgi/wiki?GuardClause\";\nBlockly.Msg[\"PROCEDURES_IFRETURN_TOOLTIP\"] = \"If a value is true, then return a second value.\";\nBlockly.Msg[\"PROCEDURES_IFRETURN_WARNING\"] = \"Warning: This block may be used only within a function definition.\";\nBlockly.Msg[\"PROCEDURES_MUTATORARG_TITLE\"] = \"input name:\";\nBlockly.Msg[\"PROCEDURES_MUTATORARG_TOOLTIP\"] = \"Add an input to the function.\";\nBlockly.Msg[\"PROCEDURES_MUTATORCONTAINER_TITLE\"] = \"inputs\";\nBlockly.Msg[\"PROCEDURES_MUTATORCONTAINER_TOOLTIP\"] = \"Add, remove, or reorder inputs to this function.\";\nBlockly.Msg[\"REDO\"] = \"Redo\";\nBlockly.Msg[\"REMOVE_COMMENT\"] = \"Remove Comment\";\nBlockly.Msg[\"RENAME_VARIABLE\"] = \"Rename variable...\";\nBlockly.Msg[\"RENAME_VARIABLE_TITLE\"] = \"Rename all '%1' variables to:\";\nBlockly.Msg[\"TEXT_APPEND_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-modification\";\nBlockly.Msg[\"TEXT_APPEND_TITLE\"] = \"to %1 append text %2\";\nBlockly.Msg[\"TEXT_APPEND_TOOLTIP\"] = \"Append some text to variable '%1'.\";\nBlockly.Msg[\"TEXT_CHANGECASE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#adjusting-text-case\";\nBlockly.Msg[\"TEXT_CHANGECASE_OPERATOR_LOWERCASE\"] = \"to lower case\";\nBlockly.Msg[\"TEXT_CHANGECASE_OPERATOR_TITLECASE\"] = \"to Title Case\";\nBlockly.Msg[\"TEXT_CHANGECASE_OPERATOR_UPPERCASE\"] = \"to UPPER CASE\";\nBlockly.Msg[\"TEXT_CHANGECASE_TOOLTIP\"] = \"Return a copy of the text in a different case.\";\nBlockly.Msg[\"TEXT_CHARAT_FIRST\"] = \"get first letter\";\nBlockly.Msg[\"TEXT_CHARAT_FROM_END\"] = \"get letter # from end\";\nBlockly.Msg[\"TEXT_CHARAT_FROM_START\"] = \"get letter #\";\nBlockly.Msg[\"TEXT_CHARAT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#extracting-text\";\nBlockly.Msg[\"TEXT_CHARAT_LAST\"] = \"get last letter\";\nBlockly.Msg[\"TEXT_CHARAT_RANDOM\"] = \"get random letter\";\nBlockly.Msg[\"TEXT_CHARAT_TAIL\"] = \"\";\nBlockly.Msg[\"TEXT_CHARAT_TITLE\"] = \"in text %1 %2\";\nBlockly.Msg[\"TEXT_CHARAT_TOOLTIP\"] = \"Returns the letter at the specified position.\";\nBlockly.Msg[\"TEXT_COUNT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#counting-substrings\";\nBlockly.Msg[\"TEXT_COUNT_MESSAGE0\"] = \"count %1 in %2\";\nBlockly.Msg[\"TEXT_COUNT_TOOLTIP\"] = \"Count how many times some text occurs within some other text.\";\nBlockly.Msg[\"TEXT_CREATE_JOIN_ITEM_TOOLTIP\"] = \"Add an item to the text.\";\nBlockly.Msg[\"TEXT_CREATE_JOIN_TITLE_JOIN\"] = \"join\";\nBlockly.Msg[\"TEXT_CREATE_JOIN_TOOLTIP\"] = \"Add, remove, or reorder sections to reconfigure this text block.\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_END_FROM_END\"] = \"to letter # from end\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_END_FROM_START\"] = \"to letter #\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_END_LAST\"] = \"to last letter\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_INPUT_IN_TEXT\"] = \"in text\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_START_FIRST\"] = \"get substring from first letter\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_START_FROM_END\"] = \"get substring from letter # from end\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_START_FROM_START\"] = \"get substring from letter #\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_TAIL\"] = \"\";\nBlockly.Msg[\"TEXT_GET_SUBSTRING_TOOLTIP\"] = \"Returns a specified portion of the text.\";\nBlockly.Msg[\"TEXT_INDEXOF_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#finding-text\";\nBlockly.Msg[\"TEXT_INDEXOF_OPERATOR_FIRST\"] = \"find first occurrence of text\";\nBlockly.Msg[\"TEXT_INDEXOF_OPERATOR_LAST\"] = \"find last occurrence of text\";\nBlockly.Msg[\"TEXT_INDEXOF_TITLE\"] = \"in text %1 %2 %3\";\nBlockly.Msg[\"TEXT_INDEXOF_TOOLTIP\"] = \"Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.\";\nBlockly.Msg[\"TEXT_ISEMPTY_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#checking-for-empty-text\";\nBlockly.Msg[\"TEXT_ISEMPTY_TITLE\"] = \"%1 is empty\";\nBlockly.Msg[\"TEXT_ISEMPTY_TOOLTIP\"] = \"Returns true if the provided text is empty.\";\nBlockly.Msg[\"TEXT_JOIN_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-creation\";\nBlockly.Msg[\"TEXT_JOIN_TITLE_CREATEWITH\"] = \"create text with\";\nBlockly.Msg[\"TEXT_JOIN_TOOLTIP\"] = \"Create a piece of text by joining together any number of items.\";\nBlockly.Msg[\"TEXT_LENGTH_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#text-modification\";\nBlockly.Msg[\"TEXT_LENGTH_TITLE\"] = \"length of %1\";\nBlockly.Msg[\"TEXT_LENGTH_TOOLTIP\"] = \"Returns the number of letters (including spaces) in the provided text.\";\nBlockly.Msg[\"TEXT_PRINT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#printing-text\";\nBlockly.Msg[\"TEXT_PRINT_TITLE\"] = \"print %1\";\nBlockly.Msg[\"TEXT_PRINT_TOOLTIP\"] = \"Print the specified text, number or other value.\";\nBlockly.Msg[\"TEXT_PROMPT_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#getting-input-from-the-user\";\nBlockly.Msg[\"TEXT_PROMPT_TOOLTIP_NUMBER\"] = \"Prompt for user for a number.\";\nBlockly.Msg[\"TEXT_PROMPT_TOOLTIP_TEXT\"] = \"Prompt for user for some text.\";\nBlockly.Msg[\"TEXT_PROMPT_TYPE_NUMBER\"] = \"prompt for number with message\";\nBlockly.Msg[\"TEXT_PROMPT_TYPE_TEXT\"] = \"prompt for text with message\";\nBlockly.Msg[\"TEXT_REPLACE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#replacing-substrings\";\nBlockly.Msg[\"TEXT_REPLACE_MESSAGE0\"] = \"replace %1 with %2 in %3\";\nBlockly.Msg[\"TEXT_REPLACE_TOOLTIP\"] = \"Replace all occurances of some text within some other text.\";\nBlockly.Msg[\"TEXT_REVERSE_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#reversing-text\";\nBlockly.Msg[\"TEXT_REVERSE_MESSAGE0\"] = \"reverse %1\";\nBlockly.Msg[\"TEXT_REVERSE_TOOLTIP\"] = \"Reverses the order of the characters in the text.\";\nBlockly.Msg[\"TEXT_TEXT_HELPURL\"] = \"https://en.wikipedia.org/wiki/String_(computer_science)\";\nBlockly.Msg[\"TEXT_TEXT_TOOLTIP\"] = \"A letter, word, or line of text.\";\nBlockly.Msg[\"TEXT_TRIM_HELPURL\"] = \"https://github.com/google/blockly/wiki/Text#trimming-removing-spaces\";\nBlockly.Msg[\"TEXT_TRIM_OPERATOR_BOTH\"] = \"trim spaces from both sides of\";\nBlockly.Msg[\"TEXT_TRIM_OPERATOR_LEFT\"] = \"trim spaces from left side of\";\nBlockly.Msg[\"TEXT_TRIM_OPERATOR_RIGHT\"] = \"trim spaces from right side of\";\nBlockly.Msg[\"TEXT_TRIM_TOOLTIP\"] = \"Return a copy of the text with spaces removed from one or both ends.\";\nBlockly.Msg[\"TODAY\"] = \"Today\";\nBlockly.Msg[\"UNDO\"] = \"Undo\";\nBlockly.Msg[\"UNNAMED_KEY\"] = \"unnamed\";\nBlockly.Msg[\"VARIABLES_DEFAULT_NAME\"] = \"item\";\nBlockly.Msg[\"VARIABLES_GET_CREATE_SET\"] = \"Create 'set %1'\";\nBlockly.Msg[\"VARIABLES_GET_HELPURL\"] = \"https://github.com/google/blockly/wiki/Variables#get\";\nBlockly.Msg[\"VARIABLES_GET_TOOLTIP\"] = \"Returns the value of this variable.\";\nBlockly.Msg[\"VARIABLES_SET\"] = \"set %1 to %2\";\nBlockly.Msg[\"VARIABLES_SET_CREATE_GET\"] = \"Create 'get %1'\";\nBlockly.Msg[\"VARIABLES_SET_HELPURL\"] = \"https://github.com/google/blockly/wiki/Variables#set\";\nBlockly.Msg[\"VARIABLES_SET_TOOLTIP\"] = \"Sets this variable to be equal to the input.\";\nBlockly.Msg[\"VARIABLE_ALREADY_EXISTS\"] = \"A variable named '%1' already exists.\";\nBlockly.Msg[\"VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE\"] = \"A variable named '%1' already exists for another type: '%2'.\";\nBlockly.Msg[\"WORKSPACE_ARIA_LABEL\"] = \"Blockly Workspace\";\nBlockly.Msg[\"WORKSPACE_COMMENT_DEFAULT_TEXT\"] = \"Say something...\";\nBlockly.Msg[\"CONTROLS_FOREACH_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\nBlockly.Msg[\"CONTROLS_FOR_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\nBlockly.Msg[\"CONTROLS_IF_ELSEIF_TITLE_ELSEIF\"] = Blockly.Msg[\"CONTROLS_IF_MSG_ELSEIF\"];\nBlockly.Msg[\"CONTROLS_IF_ELSE_TITLE_ELSE\"] = Blockly.Msg[\"CONTROLS_IF_MSG_ELSE\"];\nBlockly.Msg[\"CONTROLS_IF_IF_TITLE_IF\"] = Blockly.Msg[\"CONTROLS_IF_MSG_IF\"];\nBlockly.Msg[\"CONTROLS_IF_MSG_THEN\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\nBlockly.Msg[\"CONTROLS_WHILEUNTIL_INPUT_DO\"] = Blockly.Msg[\"CONTROLS_REPEAT_INPUT_DO\"];\nBlockly.Msg[\"LISTS_CREATE_WITH_ITEM_TITLE\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\nBlockly.Msg[\"LISTS_GET_INDEX_HELPURL\"] = Blockly.Msg[\"LISTS_INDEX_OF_HELPURL\"];\nBlockly.Msg[\"LISTS_GET_INDEX_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\nBlockly.Msg[\"LISTS_GET_SUBLIST_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\nBlockly.Msg[\"LISTS_INDEX_OF_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\nBlockly.Msg[\"LISTS_SET_INDEX_INPUT_IN_LIST\"] = Blockly.Msg[\"LISTS_INLIST\"];\nBlockly.Msg[\"MATH_CHANGE_TITLE_ITEM\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\nBlockly.Msg[\"PROCEDURES_DEFRETURN_COMMENT\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_COMMENT\"];\nBlockly.Msg[\"PROCEDURES_DEFRETURN_DO\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_DO\"];\nBlockly.Msg[\"PROCEDURES_DEFRETURN_PROCEDURE\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_PROCEDURE\"];\nBlockly.Msg[\"PROCEDURES_DEFRETURN_TITLE\"] = Blockly.Msg[\"PROCEDURES_DEFNORETURN_TITLE\"];\nBlockly.Msg[\"TEXT_APPEND_VARIABLE\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\nBlockly.Msg[\"TEXT_CREATE_JOIN_ITEM_TITLE_ITEM\"] = Blockly.Msg[\"VARIABLES_DEFAULT_NAME\"];\n\nBlockly.Msg[\"MATH_HUE\"] = \"230\";\nBlockly.Msg[\"LOOPS_HUE\"] = \"120\";\nBlockly.Msg[\"LISTS_HUE\"] = \"260\";\nBlockly.Msg[\"LOGIC_HUE\"] = \"210\";\nBlockly.Msg[\"VARIABLES_HUE\"] = \"330\";\nBlockly.Msg[\"TEXTS_HUE\"] = \"160\";\nBlockly.Msg[\"PROCEDURES_HUE\"] = \"290\";\nBlockly.Msg[\"COLOUR_HUE\"] = \"20\";\nBlockly.Msg[\"VARIABLES_DYNAMIC_HUE\"] = \"310\";\nreturn Blockly.Msg;\n})); \n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Variable blocks for Blockly.\n\n * This file is scraped to extract a .json file of block definitions. The array\n * passed to defineBlocksWithJsonArray(..) must be strict JSON: double quotes\n * only, no outside references, no functions, no trailing commas, etc. The one\n * exception is end-of-line comments, which the scraper will remove.\n * @author duzc2dtw@gmail.com (Du Tian Wei)\n */\n'use strict';\n\ngoog.provide('Blockly.Constants.VariablesDynamic');\n\ngoog.require('Blockly');\ngoog.require('Blockly.Blocks');\ngoog.require('Blockly.FieldLabel');\ngoog.require('Blockly.FieldVariable');\n\n\n/**\n * Unused constant for the common HSV hue for all blocks in this category.\n * @deprecated Use Blockly.Msg['VARIABLES_DYNAMIC_HUE']. (2018 April 5)\n */\nBlockly.Constants.VariablesDynamic.HUE = 310;\n\nBlockly.defineBlocksWithJsonArray([ // BEGIN JSON EXTRACT\n  // Block for variable getter.\n  {\n    \"type\": \"variables_get_dynamic\",\n    \"message0\": \"%1\",\n    \"args0\": [{\n      \"type\": \"field_variable\",\n      \"name\": \"VAR\",\n      \"variable\": \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n    }],\n    \"output\": null,\n    \"style\": \"variable_dynamic_blocks\",\n    \"helpUrl\": \"%{BKY_VARIABLES_GET_HELPURL}\",\n    \"tooltip\": \"%{BKY_VARIABLES_GET_TOOLTIP}\",\n    \"extensions\": [\"contextMenu_variableDynamicSetterGetter\"]\n  },\n  // Block for variable setter.\n  {\n    \"type\": \"variables_set_dynamic\",\n    \"message0\": \"%{BKY_VARIABLES_SET}\",\n    \"args0\": [{\n      \"type\": \"field_variable\",\n      \"name\": \"VAR\",\n      \"variable\": \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n    },\n    {\n      \"type\": \"input_value\",\n      \"name\": \"VALUE\"\n    }\n    ],\n    \"previousStatement\": null,\n    \"nextStatement\": null,\n    \"style\": \"variable_dynamic_blocks\",\n    \"tooltip\": \"%{BKY_VARIABLES_SET_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_VARIABLES_SET_HELPURL}\",\n    \"extensions\": [\"contextMenu_variableDynamicSetterGetter\"]\n  }\n]); // END JSON EXTRACT (Do not delete this comment.)\n\n/**\n * Mixin to add context menu items to create getter/setter blocks for this\n * setter/getter.\n * Used by blocks 'variables_set_dynamic' and 'variables_get_dynamic'.\n * @mixin\n * @augments Blockly.Block\n * @package\n * @readonly\n */\nBlockly.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN = {\n  /**\n   * Add menu option to create getter/setter block for this setter/getter.\n   * @param {!Array} options List of menu options to add to.\n   * @this {Blockly.Block}\n   */\n  customContextMenu: function(options) {\n    // Getter blocks have the option to create a setter block, and vice versa.\n    if (!this.isInFlyout) {\n      var opposite_type;\n      var contextMenuMsg;\n      var id = this.getFieldValue('VAR');\n      var variableModel = this.workspace.getVariableById(id);\n      var varType = variableModel.type;\n      if (this.type == 'variables_get_dynamic') {\n        opposite_type = 'variables_set_dynamic';\n        contextMenuMsg = Blockly.Msg['VARIABLES_GET_CREATE_SET'];\n      } else {\n        opposite_type = 'variables_get_dynamic';\n        contextMenuMsg = Blockly.Msg['VARIABLES_SET_CREATE_GET'];\n      }\n\n      var option = {enabled: this.workspace.remainingCapacity() > 0};\n      var name = this.getField('VAR').getText();\n      option.text = contextMenuMsg.replace('%1', name);\n      var xmlField = Blockly.utils.xml.createElement('field');\n      xmlField.setAttribute('name', 'VAR');\n      xmlField.setAttribute('variabletype', varType);\n      xmlField.appendChild(Blockly.utils.xml.createTextNode(name));\n      var xmlBlock = Blockly.utils.xml.createElement('block');\n      xmlBlock.setAttribute('type', opposite_type);\n      xmlBlock.appendChild(xmlField);\n      option.callback = Blockly.ContextMenu.callbackFactory(this, xmlBlock);\n      options.push(option);\n    } else {\n      if (this.type == 'variables_get_dynamic' ||\n       this.type == 'variables_get_reporter_dynamic') {\n        var renameOption = {\n          text: Blockly.Msg.RENAME_VARIABLE,\n          enabled: true,\n          callback: Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)\n        };\n        var name = this.getField('VAR').getText();\n        var deleteOption = {\n          text: Blockly.Msg.DELETE_VARIABLE.replace('%1', name),\n          enabled: true,\n          callback: Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)\n        };\n        options.unshift(renameOption);\n        options.unshift(deleteOption);\n      }\n    }\n  },\n  /**\n   * Called whenever anything on the workspace changes.\n   * Set the connection type for this block.\n   * @param {!Blockly.Events.Abstract} _e Change event.\n   * @this {Blockly.Block}\n   */\n  onchange: function(_e) {\n    var id = this.getFieldValue('VAR');\n    var variableModel = Blockly.Variables.getVariable(this.workspace, id);\n    if (this.type == 'variables_get_dynamic') {\n      this.outputConnection.setCheck(variableModel.type);\n    } else {\n      this.getInput('VALUE').connection.setCheck(variableModel.type);\n    }\n  }\n};\n\n/**\n  * Callback for rename variable dropdown menu option associated with a\n  * variable getter block.\n  * @param {!Blockly.Block} block The block with the variable to rename.\n  * @return {!function()} A function that renames the variable.\n  */\nBlockly.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY = function(block) {\n  return function() {\n    var workspace = block.workspace;\n    var variable = block.getField('VAR').getVariable();\n    Blockly.Variables.renameVariable(workspace, variable);\n  };\n};\n\n/**\n * Callback for delete variable dropdown menu option associated with a\n * variable getter block.\n * @param {!Blockly.Block} block The block with the variable to delete.\n * @return {!function()} A function that deletes the variable.\n */\nBlockly.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY = function(block) {\n  return function() {\n    var workspace = block.workspace;\n    var variable = block.getField('VAR').getVariable();\n    workspace.deleteVariableById(variable.getId());\n    workspace.refreshToolboxSelection();\n  };\n};\n\nBlockly.Extensions.registerMixin('contextMenu_variableDynamicSetterGetter',\n    Blockly.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Colour blocks for Blockly.\n *\n * This file is scraped to extract a .json file of block definitions. The array\n * passed to defineBlocksWithJsonArray(..) must be strict JSON: double quotes\n * only, no outside references, no functions, no trailing commas, etc. The one\n * exception is end-of-line comments, which the scraper will remove.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Blocks.colour');  // Deprecated\ngoog.provide('Blockly.Constants.Colour');\n\ngoog.require('Blockly');\ngoog.require('Blockly.Blocks');\ngoog.require('Blockly.FieldColour');\ngoog.require('Blockly.FieldLabel');\n\n\n/**\n * Unused constant for the common HSV hue for all blocks in this category.\n * @deprecated Use Blockly.Msg['COLOUR_HUE']. (2018 April 5)\n */\nBlockly.Constants.Colour.HUE = 20;\n\nBlockly.defineBlocksWithJsonArray([  // BEGIN JSON EXTRACT\n  // Block for colour picker.\n  {\n    \"type\": \"colour_picker\",\n    \"message0\": \"%1\",\n    \"args0\": [\n      {\n        \"type\": \"field_colour\",\n        \"name\": \"COLOUR\",\n        \"colour\": \"#ff0000\"\n      }\n    ],\n    \"output\": \"Colour\",\n    \"helpUrl\": \"%{BKY_COLOUR_PICKER_HELPURL}\",\n    \"style\": \"colour_blocks\",\n    \"tooltip\": \"%{BKY_COLOUR_PICKER_TOOLTIP}\",\n    \"extensions\": [\"parent_tooltip_when_inline\"]\n  },\n\n  // Block for random colour.\n  {\n    \"type\": \"colour_random\",\n    \"message0\": \"%{BKY_COLOUR_RANDOM_TITLE}\",\n    \"output\": \"Colour\",\n    \"helpUrl\": \"%{BKY_COLOUR_RANDOM_HELPURL}\",\n    \"style\": \"colour_blocks\",\n    \"tooltip\": \"%{BKY_COLOUR_RANDOM_TOOLTIP}\"\n  },\n\n  // Block for composing a colour from RGB components.\n  {\n    \"type\": \"colour_rgb\",\n    \"message0\": \"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"RED\",\n        \"check\": \"Number\",\n        \"align\": \"RIGHT\"\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"GREEN\",\n        \"check\": \"Number\",\n        \"align\": \"RIGHT\"\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"BLUE\",\n        \"check\": \"Number\",\n        \"align\": \"RIGHT\"\n      }\n    ],\n    \"output\": \"Colour\",\n    \"helpUrl\": \"%{BKY_COLOUR_RGB_HELPURL}\",\n    \"style\": \"colour_blocks\",\n    \"tooltip\": \"%{BKY_COLOUR_RGB_TOOLTIP}\"\n  },\n\n  // Block for blending two colours together.\n  {\n    \"type\": \"colour_blend\",\n    \"message0\": \"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} \" +\n        \"%1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"COLOUR1\",\n        \"check\": \"Colour\",\n        \"align\": \"RIGHT\"\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"COLOUR2\",\n        \"check\": \"Colour\",\n        \"align\": \"RIGHT\"\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"RATIO\",\n        \"check\": \"Number\",\n        \"align\": \"RIGHT\"\n      }\n    ],\n    \"output\": \"Colour\",\n    \"helpUrl\": \"%{BKY_COLOUR_BLEND_HELPURL}\",\n    \"style\": \"colour_blocks\",\n    \"tooltip\": \"%{BKY_COLOUR_BLEND_TOOLTIP}\"\n  }\n]);  // END JSON EXTRACT (Do not delete this comment.)\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview List blocks for Blockly.\n *\n * This file is scraped to extract a .json file of block definitions. The array\n * passed to defineBlocksWithJsonArray(..) must be strict JSON: double quotes\n * only, no outside references, no functions, no trailing commas, etc. The one\n * exception is end-of-line comments, which the scraper will remove.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Blocks.lists');  // Deprecated\ngoog.provide('Blockly.Constants.Lists');\n\ngoog.require('Blockly');\ngoog.require('Blockly.Blocks');\ngoog.require('Blockly.FieldDropdown');\ngoog.require('Blockly.FieldLabel');\ngoog.require('Blockly.Mutator');\n\n\n/**\n * Unused constant for the common HSV hue for all blocks in this category.\n * @deprecated Use Blockly.Msg['LISTS_HUE']. (2018 April 5)\n */\nBlockly.Constants.Lists.HUE = 260;\n\nBlockly.defineBlocksWithJsonArray([  // BEGIN JSON EXTRACT\n  // Block for creating an empty list\n  // The 'list_create_with' block is preferred as it is more flexible.\n  // <block type=\"lists_create_with\">\n  //   <mutation items=\"0\"></mutation>\n  // </block>\n  {\n    \"type\": \"lists_create_empty\",\n    \"message0\": \"%{BKY_LISTS_CREATE_EMPTY_TITLE}\",\n    \"output\": \"Array\",\n    \"style\": \"list_blocks\",\n    \"tooltip\": \"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_LISTS_CREATE_EMPTY_HELPURL}\"\n  },\n  // Block for creating a list with one element repeated.\n  {\n    \"type\": \"lists_repeat\",\n    \"message0\": \"%{BKY_LISTS_REPEAT_TITLE}\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"ITEM\"\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"NUM\",\n        \"check\": \"Number\"\n      }\n    ],\n    \"output\": \"Array\",\n    \"style\": \"list_blocks\",\n    \"tooltip\": \"%{BKY_LISTS_REPEAT_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_LISTS_REPEAT_HELPURL}\"\n  },\n  // Block for reversing a list.\n  {\n    \"type\": \"lists_reverse\",\n    \"message0\": \"%{BKY_LISTS_REVERSE_MESSAGE0}\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"LIST\",\n        \"check\": \"Array\"\n      }\n    ],\n    \"output\": \"Array\",\n    \"inputsInline\": true,\n    \"style\": \"list_blocks\",\n    \"tooltip\": \"%{BKY_LISTS_REVERSE_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_LISTS_REVERSE_HELPURL}\"\n  },\n  // Block for checking if a list is empty\n  {\n    \"type\": \"lists_isEmpty\",\n    \"message0\": \"%{BKY_LISTS_ISEMPTY_TITLE}\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"VALUE\",\n        \"check\": [\"String\", \"Array\"]\n      }\n    ],\n    \"output\": \"Boolean\",\n    \"style\": \"list_blocks\",\n    \"tooltip\": \"%{BKY_LISTS_ISEMPTY_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_LISTS_ISEMPTY_HELPURL}\"\n  },\n  // Block for getting the list length\n  {\n    \"type\": \"lists_length\",\n    \"message0\": \"%{BKY_LISTS_LENGTH_TITLE}\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"VALUE\",\n        \"check\": [\"String\", \"Array\"]\n      }\n    ],\n    \"output\": \"Number\",\n    \"style\": \"list_blocks\",\n    \"tooltip\": \"%{BKY_LISTS_LENGTH_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_LISTS_LENGTH_HELPURL}\"\n  }\n]);  // END JSON EXTRACT (Do not delete this comment.)\n\nBlockly.Blocks['lists_create_with'] = {\n  /**\n   * Block for creating a list with any number of elements of any type.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this.setHelpUrl(Blockly.Msg['LISTS_CREATE_WITH_HELPURL']);\n    this.setStyle('list_blocks');\n    this.itemCount_ = 3;\n    this.updateShape_();\n    this.setOutput(true, 'Array');\n    this.setMutator(new Blockly.Mutator(['lists_create_with_item']));\n    this.setTooltip(Blockly.Msg['LISTS_CREATE_WITH_TOOLTIP']);\n  },\n  /**\n   * Create XML to represent list inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    container.setAttribute('items', this.itemCount_);\n    return container;\n  },\n  /**\n   * Parse XML to restore the list inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    this.itemCount_ = parseInt(xmlElement.getAttribute('items'), 10);\n    this.updateShape_();\n  },\n  /**\n   * Populate the mutator's dialog with this block's components.\n   * @param {!Blockly.Workspace} workspace Mutator's workspace.\n   * @return {!Blockly.Block} Root block in mutator.\n   * @this {Blockly.Block}\n   */\n  decompose: function(workspace) {\n    var containerBlock = workspace.newBlock('lists_create_with_container');\n    containerBlock.initSvg();\n    var connection = containerBlock.getInput('STACK').connection;\n    for (var i = 0; i < this.itemCount_; i++) {\n      var itemBlock = workspace.newBlock('lists_create_with_item');\n      itemBlock.initSvg();\n      connection.connect(itemBlock.previousConnection);\n      connection = itemBlock.nextConnection;\n    }\n    return containerBlock;\n  },\n  /**\n   * Reconfigure this block based on the mutator dialog's components.\n   * @param {!Blockly.Block} containerBlock Root block in mutator.\n   * @this {Blockly.Block}\n   */\n  compose: function(containerBlock) {\n    var itemBlock = containerBlock.getInputTargetBlock('STACK');\n    // Count number of inputs.\n    var connections = [];\n    while (itemBlock) {\n      connections.push(itemBlock.valueConnection_);\n      itemBlock = itemBlock.nextConnection &&\n          itemBlock.nextConnection.targetBlock();\n    }\n    // Disconnect any children that don't belong.\n    for (var i = 0; i < this.itemCount_; i++) {\n      var connection = this.getInput('ADD' + i).connection.targetConnection;\n      if (connection && connections.indexOf(connection) == -1) {\n        connection.disconnect();\n      }\n    }\n    this.itemCount_ = connections.length;\n    this.updateShape_();\n    // Reconnect any child blocks.\n    for (var i = 0; i < this.itemCount_; i++) {\n      Blockly.Mutator.reconnect(connections[i], this, 'ADD' + i);\n    }\n  },\n  /**\n   * Store pointers to any connected child blocks.\n   * @param {!Blockly.Block} containerBlock Root block in mutator.\n   * @this {Blockly.Block}\n   */\n  saveConnections: function(containerBlock) {\n    var itemBlock = containerBlock.getInputTargetBlock('STACK');\n    var i = 0;\n    while (itemBlock) {\n      var input = this.getInput('ADD' + i);\n      itemBlock.valueConnection_ = input && input.connection.targetConnection;\n      i++;\n      itemBlock = itemBlock.nextConnection &&\n          itemBlock.nextConnection.targetBlock();\n    }\n  },\n  /**\n   * Modify this block to have the correct number of inputs.\n   * @private\n   * @this {Blockly.Block}\n   */\n  updateShape_: function() {\n    if (this.itemCount_ && this.getInput('EMPTY')) {\n      this.removeInput('EMPTY');\n    } else if (!this.itemCount_ && !this.getInput('EMPTY')) {\n      this.appendDummyInput('EMPTY')\n          .appendField(Blockly.Msg['LISTS_CREATE_EMPTY_TITLE']);\n    }\n    // Add new inputs.\n    for (var i = 0; i < this.itemCount_; i++) {\n      if (!this.getInput('ADD' + i)) {\n        var input = this.appendValueInput('ADD' + i)\n            .setAlign(Blockly.ALIGN_RIGHT);\n        if (i == 0) {\n          input.appendField(Blockly.Msg['LISTS_CREATE_WITH_INPUT_WITH']);\n        }\n      }\n    }\n    // Remove deleted inputs.\n    while (this.getInput('ADD' + i)) {\n      this.removeInput('ADD' + i);\n      i++;\n    }\n  }\n};\n\nBlockly.Blocks['lists_create_with_container'] = {\n  /**\n   * Mutator block for list container.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this.setStyle('list_blocks');\n    this.appendDummyInput()\n        .appendField(Blockly.Msg['LISTS_CREATE_WITH_CONTAINER_TITLE_ADD']);\n    this.appendStatementInput('STACK');\n    this.setTooltip(Blockly.Msg['LISTS_CREATE_WITH_CONTAINER_TOOLTIP']);\n    this.contextMenu = false;\n  }\n};\n\nBlockly.Blocks['lists_create_with_item'] = {\n  /**\n   * Mutator block for adding items.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this.setStyle('list_blocks');\n    this.appendDummyInput()\n        .appendField(Blockly.Msg['LISTS_CREATE_WITH_ITEM_TITLE']);\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setTooltip(Blockly.Msg['LISTS_CREATE_WITH_ITEM_TOOLTIP']);\n    this.contextMenu = false;\n  }\n};\n\nBlockly.Blocks['lists_indexOf'] = {\n  /**\n   * Block for finding an item in the list.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    var OPERATORS =\n        [\n          [Blockly.Msg['LISTS_INDEX_OF_FIRST'], 'FIRST'],\n          [Blockly.Msg['LISTS_INDEX_OF_LAST'], 'LAST']\n        ];\n    this.setHelpUrl(Blockly.Msg['LISTS_INDEX_OF_HELPURL']);\n    this.setStyle('list_blocks');\n    this.setOutput(true, 'Number');\n    this.appendValueInput('VALUE')\n        .setCheck('Array')\n        .appendField(Blockly.Msg['LISTS_INDEX_OF_INPUT_IN_LIST']);\n    this.appendValueInput('FIND')\n        .appendField(new Blockly.FieldDropdown(OPERATORS), 'END');\n    this.setInputsInline(true);\n    // Assign 'this' to a variable for use in the tooltip closure below.\n    var thisBlock = this;\n    this.setTooltip(function() {\n      return Blockly.Msg['LISTS_INDEX_OF_TOOLTIP'].replace('%1',\n          thisBlock.workspace.options.oneBasedIndex ? '0' : '-1');\n    });\n  }\n};\n\nBlockly.Blocks['lists_getIndex'] = {\n  /**\n   * Block for getting element at index.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    var MODE =\n        [\n          [Blockly.Msg['LISTS_GET_INDEX_GET'], 'GET'],\n          [Blockly.Msg['LISTS_GET_INDEX_GET_REMOVE'], 'GET_REMOVE'],\n          [Blockly.Msg['LISTS_GET_INDEX_REMOVE'], 'REMOVE']\n        ];\n    this.WHERE_OPTIONS =\n        [\n          [Blockly.Msg['LISTS_GET_INDEX_FROM_START'], 'FROM_START'],\n          [Blockly.Msg['LISTS_GET_INDEX_FROM_END'], 'FROM_END'],\n          [Blockly.Msg['LISTS_GET_INDEX_FIRST'], 'FIRST'],\n          [Blockly.Msg['LISTS_GET_INDEX_LAST'], 'LAST'],\n          [Blockly.Msg['LISTS_GET_INDEX_RANDOM'], 'RANDOM']\n        ];\n    this.setHelpUrl(Blockly.Msg['LISTS_GET_INDEX_HELPURL']);\n    this.setStyle('list_blocks');\n    var modeMenu = new Blockly.FieldDropdown(MODE, function(value) {\n      var isStatement = (value == 'REMOVE');\n      this.getSourceBlock().updateStatement_(isStatement);\n    });\n    this.appendValueInput('VALUE')\n        .setCheck('Array')\n        .appendField(Blockly.Msg['LISTS_GET_INDEX_INPUT_IN_LIST']);\n    this.appendDummyInput()\n        .appendField(modeMenu, 'MODE')\n        .appendField('', 'SPACE');\n    this.appendDummyInput('AT');\n    if (Blockly.Msg['LISTS_GET_INDEX_TAIL']) {\n      this.appendDummyInput('TAIL')\n          .appendField(Blockly.Msg['LISTS_GET_INDEX_TAIL']);\n    }\n    this.setInputsInline(true);\n    this.setOutput(true);\n    this.updateAt_(true);\n    // Assign 'this' to a variable for use in the tooltip closure below.\n    var thisBlock = this;\n    this.setTooltip(function() {\n      var mode = thisBlock.getFieldValue('MODE');\n      var where = thisBlock.getFieldValue('WHERE');\n      var tooltip = '';\n      switch (mode + ' ' + where) {\n        case 'GET FROM_START':\n        case 'GET FROM_END':\n          tooltip = Blockly.Msg['LISTS_GET_INDEX_TOOLTIP_GET_FROM'];\n          break;\n        case 'GET FIRST':\n          tooltip = Blockly.Msg['LISTS_GET_INDEX_TOOLTIP_GET_FIRST'];\n          break;\n        case 'GET LAST':\n          tooltip = Blockly.Msg['LISTS_GET_INDEX_TOOLTIP_GET_LAST'];\n          break;\n        case 'GET RANDOM':\n          tooltip = Blockly.Msg['LISTS_GET_INDEX_TOOLTIP_GET_RANDOM'];\n          break;\n        case 'GET_REMOVE FROM_START':\n        case 'GET_REMOVE FROM_END':\n          tooltip = Blockly.Msg['LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM'];\n          break;\n        case 'GET_REMOVE FIRST':\n          tooltip = Blockly.Msg['LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST'];\n          break;\n        case 'GET_REMOVE LAST':\n          tooltip = Blockly.Msg['LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST'];\n          break;\n        case 'GET_REMOVE RANDOM':\n          tooltip = Blockly.Msg['LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM'];\n          break;\n        case 'REMOVE FROM_START':\n        case 'REMOVE FROM_END':\n          tooltip = Blockly.Msg['LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM'];\n          break;\n        case 'REMOVE FIRST':\n          tooltip = Blockly.Msg['LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST'];\n          break;\n        case 'REMOVE LAST':\n          tooltip = Blockly.Msg['LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST'];\n          break;\n        case 'REMOVE RANDOM':\n          tooltip = Blockly.Msg['LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM'];\n          break;\n      }\n      if (where == 'FROM_START' || where == 'FROM_END') {\n        var msg = (where == 'FROM_START') ?\n            Blockly.Msg['LISTS_INDEX_FROM_START_TOOLTIP'] :\n            Blockly.Msg['LISTS_INDEX_FROM_END_TOOLTIP'];\n        tooltip += '  ' + msg.replace('%1',\n                thisBlock.workspace.options.oneBasedIndex ? '#1' : '#0');\n      }\n      return tooltip;\n    });\n  },\n  /**\n   * Create XML to represent whether the block is a statement or a value.\n   * Also represent whether there is an 'AT' input.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    var isStatement = !this.outputConnection;\n    container.setAttribute('statement', isStatement);\n    var isAt = this.getInput('AT').type == Blockly.INPUT_VALUE;\n    container.setAttribute('at', isAt);\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' input.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    // Note: Until January 2013 this block did not have mutations,\n    // so 'statement' defaults to false and 'at' defaults to true.\n    var isStatement = (xmlElement.getAttribute('statement') == 'true');\n    this.updateStatement_(isStatement);\n    var isAt = (xmlElement.getAttribute('at') != 'false');\n    this.updateAt_(isAt);\n  },\n  /**\n   * Switch between a value block and a statement block.\n   * @param {boolean} newStatement True if the block should be a statement.\n   *     False if the block should be a value.\n   * @private\n   * @this {Blockly.Block}\n   */\n  updateStatement_: function(newStatement) {\n    var oldStatement = !this.outputConnection;\n    if (newStatement != oldStatement) {\n      this.unplug(true, true);\n      if (newStatement) {\n        this.setOutput(false);\n        this.setPreviousStatement(true);\n        this.setNextStatement(true);\n      } else {\n        this.setPreviousStatement(false);\n        this.setNextStatement(false);\n        this.setOutput(true);\n      }\n    }\n  },\n  /**\n   * Create or delete an input for the numeric index.\n   * @param {boolean} isAt True if the input should exist.\n   * @private\n   * @this {Blockly.Block}\n   */\n  updateAt_: function(isAt) {\n    // Destroy old 'AT' and 'ORDINAL' inputs.\n    this.removeInput('AT');\n    this.removeInput('ORDINAL', true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT').setCheck('Number');\n      if (Blockly.Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL')\n            .appendField(Blockly.Msg['ORDINAL_NUMBER_SUFFIX']);\n      }\n    } else {\n      this.appendDummyInput('AT');\n    }\n    var menu = new Blockly.FieldDropdown(this.WHERE_OPTIONS, function(value) {\n      var newAt = (value == 'FROM_START') || (value == 'FROM_END');\n      // The 'isAt' variable is available due to this function being a closure.\n      if (newAt != isAt) {\n        var block = this.getSourceBlock();\n        block.updateAt_(newAt);\n        // This menu has been destroyed and replaced.  Update the replacement.\n        block.setFieldValue(value, 'WHERE');\n        return null;\n      }\n      return undefined;\n    });\n    this.getInput('AT').appendField(menu, 'WHERE');\n    if (Blockly.Msg['LISTS_GET_INDEX_TAIL']) {\n      this.moveInputBefore('TAIL', null);\n    }\n  }\n};\n\nBlockly.Blocks['lists_setIndex'] = {\n  /**\n   * Block for setting the element at index.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    var MODE =\n        [\n          [Blockly.Msg['LISTS_SET_INDEX_SET'], 'SET'],\n          [Blockly.Msg['LISTS_SET_INDEX_INSERT'], 'INSERT']\n        ];\n    this.WHERE_OPTIONS =\n        [\n          [Blockly.Msg['LISTS_GET_INDEX_FROM_START'], 'FROM_START'],\n          [Blockly.Msg['LISTS_GET_INDEX_FROM_END'], 'FROM_END'],\n          [Blockly.Msg['LISTS_GET_INDEX_FIRST'], 'FIRST'],\n          [Blockly.Msg['LISTS_GET_INDEX_LAST'], 'LAST'],\n          [Blockly.Msg['LISTS_GET_INDEX_RANDOM'], 'RANDOM']\n        ];\n    this.setHelpUrl(Blockly.Msg['LISTS_SET_INDEX_HELPURL']);\n    this.setStyle('list_blocks');\n    this.appendValueInput('LIST')\n        .setCheck('Array')\n        .appendField(Blockly.Msg['LISTS_SET_INDEX_INPUT_IN_LIST']);\n    this.appendDummyInput()\n        .appendField(new Blockly.FieldDropdown(MODE), 'MODE')\n        .appendField('', 'SPACE');\n    this.appendDummyInput('AT');\n    this.appendValueInput('TO')\n        .appendField(Blockly.Msg['LISTS_SET_INDEX_INPUT_TO']);\n    this.setInputsInline(true);\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setTooltip(Blockly.Msg['LISTS_SET_INDEX_TOOLTIP']);\n    this.updateAt_(true);\n    // Assign 'this' to a variable for use in the tooltip closure below.\n    var thisBlock = this;\n    this.setTooltip(function() {\n      var mode = thisBlock.getFieldValue('MODE');\n      var where = thisBlock.getFieldValue('WHERE');\n      var tooltip = '';\n      switch (mode + ' ' + where) {\n        case 'SET FROM_START':\n        case 'SET FROM_END':\n          tooltip = Blockly.Msg['LISTS_SET_INDEX_TOOLTIP_SET_FROM'];\n          break;\n        case 'SET FIRST':\n          tooltip = Blockly.Msg['LISTS_SET_INDEX_TOOLTIP_SET_FIRST'];\n          break;\n        case 'SET LAST':\n          tooltip = Blockly.Msg['LISTS_SET_INDEX_TOOLTIP_SET_LAST'];\n          break;\n        case 'SET RANDOM':\n          tooltip = Blockly.Msg['LISTS_SET_INDEX_TOOLTIP_SET_RANDOM'];\n          break;\n        case 'INSERT FROM_START':\n        case 'INSERT FROM_END':\n          tooltip = Blockly.Msg['LISTS_SET_INDEX_TOOLTIP_INSERT_FROM'];\n          break;\n        case 'INSERT FIRST':\n          tooltip = Blockly.Msg['LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST'];\n          break;\n        case 'INSERT LAST':\n          tooltip = Blockly.Msg['LISTS_SET_INDEX_TOOLTIP_INSERT_LAST'];\n          break;\n        case 'INSERT RANDOM':\n          tooltip = Blockly.Msg['LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM'];\n          break;\n      }\n      if (where == 'FROM_START' || where == 'FROM_END') {\n        tooltip += '  ' + Blockly.Msg['LISTS_INDEX_FROM_START_TOOLTIP']\n            .replace('%1',\n                thisBlock.workspace.options.oneBasedIndex ? '#1' : '#0');\n      }\n      return tooltip;\n    });\n  },\n  /**\n   * Create XML to represent whether there is an 'AT' input.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    var isAt = this.getInput('AT').type == Blockly.INPUT_VALUE;\n    container.setAttribute('at', isAt);\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' input.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    // Note: Until January 2013 this block did not have mutations,\n    // so 'at' defaults to true.\n    var isAt = (xmlElement.getAttribute('at') != 'false');\n    this.updateAt_(isAt);\n  },\n  /**\n   * Create or delete an input for the numeric index.\n   * @param {boolean} isAt True if the input should exist.\n   * @private\n   * @this {Blockly.Block}\n   */\n  updateAt_: function(isAt) {\n    // Destroy old 'AT' and 'ORDINAL' input.\n    this.removeInput('AT');\n    this.removeInput('ORDINAL', true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT').setCheck('Number');\n      if (Blockly.Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL')\n            .appendField(Blockly.Msg['ORDINAL_NUMBER_SUFFIX']);\n      }\n    } else {\n      this.appendDummyInput('AT');\n    }\n    var menu = new Blockly.FieldDropdown(this.WHERE_OPTIONS, function(value) {\n      var newAt = (value == 'FROM_START') || (value == 'FROM_END');\n      // The 'isAt' variable is available due to this function being a closure.\n      if (newAt != isAt) {\n        var block = this.getSourceBlock();\n        block.updateAt_(newAt);\n        // This menu has been destroyed and replaced.  Update the replacement.\n        block.setFieldValue(value, 'WHERE');\n        return null;\n      }\n      return undefined;\n    });\n    this.moveInputBefore('AT', 'TO');\n    if (this.getInput('ORDINAL')) {\n      this.moveInputBefore('ORDINAL', 'TO');\n    }\n\n    this.getInput('AT').appendField(menu, 'WHERE');\n  }\n};\n\nBlockly.Blocks['lists_getSublist'] = {\n  /**\n   * Block for getting sublist.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this['WHERE_OPTIONS_1'] =\n        [\n          [Blockly.Msg['LISTS_GET_SUBLIST_START_FROM_START'], 'FROM_START'],\n          [Blockly.Msg['LISTS_GET_SUBLIST_START_FROM_END'], 'FROM_END'],\n          [Blockly.Msg['LISTS_GET_SUBLIST_START_FIRST'], 'FIRST']\n        ];\n    this['WHERE_OPTIONS_2'] =\n        [\n          [Blockly.Msg['LISTS_GET_SUBLIST_END_FROM_START'], 'FROM_START'],\n          [Blockly.Msg['LISTS_GET_SUBLIST_END_FROM_END'], 'FROM_END'],\n          [Blockly.Msg['LISTS_GET_SUBLIST_END_LAST'], 'LAST']\n        ];\n    this.setHelpUrl(Blockly.Msg['LISTS_GET_SUBLIST_HELPURL']);\n    this.setStyle('list_blocks');\n    this.appendValueInput('LIST')\n        .setCheck('Array')\n        .appendField(Blockly.Msg['LISTS_GET_SUBLIST_INPUT_IN_LIST']);\n    this.appendDummyInput('AT1');\n    this.appendDummyInput('AT2');\n    if (Blockly.Msg['LISTS_GET_SUBLIST_TAIL']) {\n      this.appendDummyInput('TAIL')\n          .appendField(Blockly.Msg['LISTS_GET_SUBLIST_TAIL']);\n    }\n    this.setInputsInline(true);\n    this.setOutput(true, 'Array');\n    this.updateAt_(1, true);\n    this.updateAt_(2, true);\n    this.setTooltip(Blockly.Msg['LISTS_GET_SUBLIST_TOOLTIP']);\n  },\n  /**\n   * Create XML to represent whether there are 'AT' inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    var isAt1 = this.getInput('AT1').type == Blockly.INPUT_VALUE;\n    container.setAttribute('at1', isAt1);\n    var isAt2 = this.getInput('AT2').type == Blockly.INPUT_VALUE;\n    container.setAttribute('at2', isAt2);\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    var isAt1 = (xmlElement.getAttribute('at1') == 'true');\n    var isAt2 = (xmlElement.getAttribute('at2') == 'true');\n    this.updateAt_(1, isAt1);\n    this.updateAt_(2, isAt2);\n  },\n  /**\n   * Create or delete an input for a numeric index.\n   * This block has two such inputs, independent of each other.\n   * @param {number} n Specify first or second input (1 or 2).\n   * @param {boolean} isAt True if the input should exist.\n   * @private\n   * @this {Blockly.Block}\n   */\n  updateAt_: function(n, isAt) {\n    // Create or delete an input for the numeric index.\n    // Destroy old 'AT' and 'ORDINAL' inputs.\n    this.removeInput('AT' + n);\n    this.removeInput('ORDINAL' + n, true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT' + n).setCheck('Number');\n      if (Blockly.Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL' + n)\n            .appendField(Blockly.Msg['ORDINAL_NUMBER_SUFFIX']);\n      }\n    } else {\n      this.appendDummyInput('AT' + n);\n    }\n    var menu = new Blockly.FieldDropdown(this['WHERE_OPTIONS_' + n],\n        function(value) {\n          var newAt = (value == 'FROM_START') || (value == 'FROM_END');\n          // The 'isAt' variable is available due to this function being a\n          // closure.\n          if (newAt != isAt) {\n            var block = this.getSourceBlock();\n            block.updateAt_(n, newAt);\n            // This menu has been destroyed and replaced.\n            // Update the replacement.\n            block.setFieldValue(value, 'WHERE' + n);\n            return null;\n          }\n        });\n    this.getInput('AT' + n)\n        .appendField(menu, 'WHERE' + n);\n    if (n == 1) {\n      this.moveInputBefore('AT1', 'AT2');\n      if (this.getInput('ORDINAL1')) {\n        this.moveInputBefore('ORDINAL1', 'AT2');\n      }\n    }\n    if (Blockly.Msg['LISTS_GET_SUBLIST_TAIL']) {\n      this.moveInputBefore('TAIL', null);\n    }\n  }\n};\n\nBlockly.Blocks['lists_sort'] = {\n  /**\n   * Block for sorting a list.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this.jsonInit({\n      \"message0\": Blockly.Msg['LISTS_SORT_TITLE'],\n      \"args0\": [\n        {\n          \"type\": \"field_dropdown\",\n          \"name\": \"TYPE\",\n          \"options\": [\n            [Blockly.Msg['LISTS_SORT_TYPE_NUMERIC'], \"NUMERIC\"],\n            [Blockly.Msg['LISTS_SORT_TYPE_TEXT'], \"TEXT\"],\n            [Blockly.Msg['LISTS_SORT_TYPE_IGNORECASE'], \"IGNORE_CASE\"]\n          ]\n        },\n        {\n          \"type\": \"field_dropdown\",\n          \"name\": \"DIRECTION\",\n          \"options\": [\n            [Blockly.Msg['LISTS_SORT_ORDER_ASCENDING'], \"1\"],\n            [Blockly.Msg['LISTS_SORT_ORDER_DESCENDING'], \"-1\"]\n          ]\n        },\n        {\n          \"type\": \"input_value\",\n          \"name\": \"LIST\",\n          \"check\": \"Array\"\n        }\n      ],\n      \"output\": \"Array\",\n      \"style\": \"list_blocks\",\n      \"tooltip\": Blockly.Msg['LISTS_SORT_TOOLTIP'],\n      \"helpUrl\": Blockly.Msg['LISTS_SORT_HELPURL']\n    });\n  }\n};\n\nBlockly.Blocks['lists_split'] = {\n  /**\n   * Block for splitting text into a list, or joining a list into text.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    // Assign 'this' to a variable for use in the closures below.\n    var thisBlock = this;\n    var dropdown = new Blockly.FieldDropdown(\n        [\n          [Blockly.Msg['LISTS_SPLIT_LIST_FROM_TEXT'], 'SPLIT'],\n          [Blockly.Msg['LISTS_SPLIT_TEXT_FROM_LIST'], 'JOIN']\n        ],\n        function(newMode) {\n          thisBlock.updateType_(newMode);\n        });\n    this.setHelpUrl(Blockly.Msg['LISTS_SPLIT_HELPURL']);\n    this.setStyle('list_blocks');\n    this.appendValueInput('INPUT')\n        .setCheck('String')\n        .appendField(dropdown, 'MODE');\n    this.appendValueInput('DELIM')\n        .setCheck('String')\n        .appendField(Blockly.Msg['LISTS_SPLIT_WITH_DELIMITER']);\n    this.setInputsInline(true);\n    this.setOutput(true, 'Array');\n    this.setTooltip(function() {\n      var mode = thisBlock.getFieldValue('MODE');\n      if (mode == 'SPLIT') {\n        return Blockly.Msg['LISTS_SPLIT_TOOLTIP_SPLIT'];\n      } else if (mode == 'JOIN') {\n        return Blockly.Msg['LISTS_SPLIT_TOOLTIP_JOIN'];\n      }\n      throw Error('Unknown mode: ' + mode);\n    });\n  },\n  /**\n   * Modify this block to have the correct input and output types.\n   * @param {string} newMode Either 'SPLIT' or 'JOIN'.\n   * @private\n   * @this {Blockly.Block}\n   */\n  updateType_: function(newMode) {\n    var mode = this.getFieldValue('MODE');\n    if (mode != newMode) {\n      var inputConnection = this.getInput('INPUT').connection;\n      inputConnection.setShadowDom(null);\n      var inputBlock = inputConnection.targetBlock();\n      if (inputBlock) {\n        inputConnection.disconnect();\n        if (inputBlock.isShadow()) {\n          inputBlock.dispose();\n        } else {\n          this.bumpNeighbours();\n        }\n      }\n    }\n    if (newMode == 'SPLIT') {\n      this.outputConnection.setCheck('Array');\n      this.getInput('INPUT').setCheck('String');\n    } else {\n      this.outputConnection.setCheck('String');\n      this.getInput('INPUT').setCheck('Array');\n    }\n  },\n  /**\n   * Create XML to represent the input and output types.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    container.setAttribute('mode', this.getFieldValue('MODE'));\n    return container;\n  },\n  /**\n   * Parse XML to restore the input and output types.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    this.updateType_(xmlElement.getAttribute('mode'));\n  }\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Logic blocks for Blockly.\n *\n * This file is scraped to extract a .json file of block definitions. The array\n * passed to defineBlocksWithJsonArray(..) must be strict JSON: double quotes\n * only, no outside references, no functions, no trailing commas, etc. The one\n * exception is end-of-line comments, which the scraper will remove.\n * @author q.neutron@gmail.com (Quynh Neutron)\n */\n'use strict';\n\ngoog.provide('Blockly.Blocks.logic');  // Deprecated\ngoog.provide('Blockly.Constants.Logic');\n\ngoog.require('Blockly');\ngoog.require('Blockly.Blocks');\ngoog.require('Blockly.FieldDropdown');\ngoog.require('Blockly.FieldLabel');\ngoog.require('Blockly.Mutator');\n\n\n/**\n * Unused constant for the common HSV hue for all blocks in this category.\n * @deprecated Use Blockly.Msg['LOGIC_HUE']. (2018 April 5)\n */\nBlockly.Constants.Logic.HUE = 210;\n\nBlockly.defineBlocksWithJsonArray([  // BEGIN JSON EXTRACT\n  // Block for boolean data type: true and false.\n  {\n    \"type\": \"logic_boolean\",\n    \"message0\": \"%1\",\n    \"args0\": [\n      {\n        \"type\": \"field_dropdown\",\n        \"name\": \"BOOL\",\n        \"options\": [\n          [\"%{BKY_LOGIC_BOOLEAN_TRUE}\", \"TRUE\"],\n          [\"%{BKY_LOGIC_BOOLEAN_FALSE}\", \"FALSE\"]\n        ]\n      }\n    ],\n    \"output\": \"Boolean\",\n    \"style\": \"logic_blocks\",\n    \"tooltip\": \"%{BKY_LOGIC_BOOLEAN_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_LOGIC_BOOLEAN_HELPURL}\"\n  },\n  // Block for if/elseif/else condition.\n  {\n    \"type\": \"controls_if\",\n    \"message0\": \"%{BKY_CONTROLS_IF_MSG_IF} %1\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"IF0\",\n        \"check\": \"Boolean\"\n      }\n    ],\n    \"message1\": \"%{BKY_CONTROLS_IF_MSG_THEN} %1\",\n    \"args1\": [\n      {\n        \"type\": \"input_statement\",\n        \"name\": \"DO0\"\n      }\n    ],\n    \"previousStatement\": null,\n    \"nextStatement\": null,\n    \"style\": \"logic_blocks\",\n    \"helpUrl\": \"%{BKY_CONTROLS_IF_HELPURL}\",\n    \"mutator\": \"controls_if_mutator\",\n    \"extensions\": [\"controls_if_tooltip\"]\n  },\n  // If/else block that does not use a mutator.\n  {\n    \"type\": \"controls_ifelse\",\n    \"message0\": \"%{BKY_CONTROLS_IF_MSG_IF} %1\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"IF0\",\n        \"check\": \"Boolean\"\n      }\n    ],\n    \"message1\": \"%{BKY_CONTROLS_IF_MSG_THEN} %1\",\n    \"args1\": [\n      {\n        \"type\": \"input_statement\",\n        \"name\": \"DO0\"\n      }\n    ],\n    \"message2\": \"%{BKY_CONTROLS_IF_MSG_ELSE} %1\",\n    \"args2\": [\n      {\n        \"type\": \"input_statement\",\n        \"name\": \"ELSE\"\n      }\n    ],\n    \"previousStatement\": null,\n    \"nextStatement\": null,\n    \"style\": \"logic_blocks\",\n    \"tooltip\": \"%{BKYCONTROLS_IF_TOOLTIP_2}\",\n    \"helpUrl\": \"%{BKY_CONTROLS_IF_HELPURL}\",\n    \"extensions\": [\"controls_if_tooltip\"]\n  },\n  // Block for comparison operator.\n  {\n    \"type\": \"logic_compare\",\n    \"message0\": \"%1 %2 %3\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"A\"\n      },\n      {\n        \"type\": \"field_dropdown\",\n        \"name\": \"OP\",\n        \"options\": [\n          [\"=\", \"EQ\"],\n          [\"\\u2260\", \"NEQ\"],\n          [\"\\u200F<\", \"LT\"],\n          [\"\\u200F\\u2264\", \"LTE\"],\n          [\"\\u200F>\", \"GT\"],\n          [\"\\u200F\\u2265\", \"GTE\"]\n        ]\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"B\"\n      }\n    ],\n    \"inputsInline\": true,\n    \"output\": \"Boolean\",\n    \"style\": \"logic_blocks\",\n    \"helpUrl\": \"%{BKY_LOGIC_COMPARE_HELPURL}\",\n    \"extensions\": [\"logic_compare\", \"logic_op_tooltip\"]\n  },\n  // Block for logical operations: 'and', 'or'.\n  {\n    \"type\": \"logic_operation\",\n    \"message0\": \"%1 %2 %3\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"A\",\n        \"check\": \"Boolean\"\n      },\n      {\n        \"type\": \"field_dropdown\",\n        \"name\": \"OP\",\n        \"options\": [\n          [\"%{BKY_LOGIC_OPERATION_AND}\", \"AND\"],\n          [\"%{BKY_LOGIC_OPERATION_OR}\", \"OR\"]\n        ]\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"B\",\n        \"check\": \"Boolean\"\n      }\n    ],\n    \"inputsInline\": true,\n    \"output\": \"Boolean\",\n    \"style\": \"logic_blocks\",\n    \"helpUrl\": \"%{BKY_LOGIC_OPERATION_HELPURL}\",\n    \"extensions\": [\"logic_op_tooltip\"]\n  },\n  // Block for negation.\n  {\n    \"type\": \"logic_negate\",\n    \"message0\": \"%{BKY_LOGIC_NEGATE_TITLE}\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"BOOL\",\n        \"check\": \"Boolean\"\n      }\n    ],\n    \"output\": \"Boolean\",\n    \"style\": \"logic_blocks\",\n    \"tooltip\": \"%{BKY_LOGIC_NEGATE_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_LOGIC_NEGATE_HELPURL}\"\n  },\n  // Block for null data type.\n  {\n    \"type\": \"logic_null\",\n    \"message0\": \"%{BKY_LOGIC_NULL}\",\n    \"output\": null,\n    \"style\": \"logic_blocks\",\n    \"tooltip\": \"%{BKY_LOGIC_NULL_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_LOGIC_NULL_HELPURL}\"\n  },\n  // Block for ternary operator.\n  {\n    \"type\": \"logic_ternary\",\n    \"message0\": \"%{BKY_LOGIC_TERNARY_CONDITION} %1\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"IF\",\n        \"check\": \"Boolean\"\n      }\n    ],\n    \"message1\": \"%{BKY_LOGIC_TERNARY_IF_TRUE} %1\",\n    \"args1\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"THEN\"\n      }\n    ],\n    \"message2\": \"%{BKY_LOGIC_TERNARY_IF_FALSE} %1\",\n    \"args2\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"ELSE\"\n      }\n    ],\n    \"output\": null,\n    \"style\": \"logic_blocks\",\n    \"tooltip\": \"%{BKY_LOGIC_TERNARY_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_LOGIC_TERNARY_HELPURL}\",\n    \"extensions\": [\"logic_ternary\"]\n  }\n]);  // END JSON EXTRACT (Do not delete this comment.)\n\nBlockly.defineBlocksWithJsonArray([ // Mutator blocks. Do not extract.\n  // Block representing the if statement in the controls_if mutator.\n  {\n    \"type\": \"controls_if_if\",\n    \"message0\": \"%{BKY_CONTROLS_IF_IF_TITLE_IF}\",\n    \"nextStatement\": null,\n    \"enableContextMenu\": false,\n    \"style\": \"logic_blocks\",\n    \"tooltip\": \"%{BKY_CONTROLS_IF_IF_TOOLTIP}\"\n  },\n  // Block representing the else-if statement in the controls_if mutator.\n  {\n    \"type\": \"controls_if_elseif\",\n    \"message0\": \"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}\",\n    \"previousStatement\": null,\n    \"nextStatement\": null,\n    \"enableContextMenu\": false,\n    \"style\": \"logic_blocks\",\n    \"tooltip\": \"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}\"\n  },\n  // Block representing the else statement in the controls_if mutator.\n  {\n    \"type\": \"controls_if_else\",\n    \"message0\": \"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}\",\n    \"previousStatement\": null,\n    \"enableContextMenu\": false,\n    \"style\": \"logic_blocks\",\n    \"tooltip\": \"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}\"\n  }\n]);\n\n/**\n * Tooltip text, keyed by block OP value. Used by logic_compare and\n * logic_operation blocks.\n * @see {Blockly.Extensions#buildTooltipForDropdown}\n * @package\n * @readonly\n */\nBlockly.Constants.Logic.TOOLTIPS_BY_OP = {\n  // logic_compare\n  'EQ': '%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}',\n  'NEQ': '%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}',\n  'LT': '%{BKY_LOGIC_COMPARE_TOOLTIP_LT}',\n  'LTE': '%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}',\n  'GT': '%{BKY_LOGIC_COMPARE_TOOLTIP_GT}',\n  'GTE': '%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}',\n\n  // logic_operation\n  'AND': '%{BKY_LOGIC_OPERATION_TOOLTIP_AND}',\n  'OR': '%{BKY_LOGIC_OPERATION_TOOLTIP_OR}'\n};\n\nBlockly.Extensions.register('logic_op_tooltip',\n    Blockly.Extensions.buildTooltipForDropdown(\n        'OP', Blockly.Constants.Logic.TOOLTIPS_BY_OP));\n\n/**\n * Mutator methods added to controls_if blocks.\n * @mixin\n * @augments Blockly.Block\n * @package\n * @readonly\n */\nBlockly.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN = {\n  elseifCount_: 0,\n  elseCount_: 0,\n\n  /**\n   * Don't automatically add STATEMENT_PREFIX and STATEMENT_SUFFIX to generated\n   * code.  These will be handled manually in this block's generators.\n   */\n  suppressPrefixSuffix: true,\n\n  /**\n   * Create XML to represent the number of else-if and else inputs.\n   * @return {Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    if (!this.elseifCount_ && !this.elseCount_) {\n      return null;\n    }\n    var container = Blockly.utils.xml.createElement('mutation');\n    if (this.elseifCount_) {\n      container.setAttribute('elseif', this.elseifCount_);\n    }\n    if (this.elseCount_) {\n      container.setAttribute('else', 1);\n    }\n    return container;\n  },\n  /**\n   * Parse XML to restore the else-if and else inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    this.elseifCount_ = parseInt(xmlElement.getAttribute('elseif'), 10) || 0;\n    this.elseCount_ = parseInt(xmlElement.getAttribute('else'), 10) || 0;\n    this.rebuildShape_();\n  },\n  /**\n   * Populate the mutator's dialog with this block's components.\n   * @param {!Blockly.Workspace} workspace Mutator's workspace.\n   * @return {!Blockly.Block} Root block in mutator.\n   * @this {Blockly.Block}\n   */\n  decompose: function(workspace) {\n    var containerBlock = workspace.newBlock('controls_if_if');\n    containerBlock.initSvg();\n    var connection = containerBlock.nextConnection;\n    for (var i = 1; i <= this.elseifCount_; i++) {\n      var elseifBlock = workspace.newBlock('controls_if_elseif');\n      elseifBlock.initSvg();\n      connection.connect(elseifBlock.previousConnection);\n      connection = elseifBlock.nextConnection;\n    }\n    if (this.elseCount_) {\n      var elseBlock = workspace.newBlock('controls_if_else');\n      elseBlock.initSvg();\n      connection.connect(elseBlock.previousConnection);\n    }\n    return containerBlock;\n  },\n  /**\n   * Reconfigure this block based on the mutator dialog's components.\n   * @param {!Blockly.Block} containerBlock Root block in mutator.\n   * @this {Blockly.Block}\n   */\n  compose: function(containerBlock) {\n    var clauseBlock = containerBlock.nextConnection.targetBlock();\n    // Count number of inputs.\n    this.elseifCount_ = 0;\n    this.elseCount_ = 0;\n    var valueConnections = [null];\n    var statementConnections = [null];\n    var elseStatementConnection = null;\n    while (clauseBlock) {\n      switch (clauseBlock.type) {\n        case 'controls_if_elseif':\n          this.elseifCount_++;\n          valueConnections.push(clauseBlock.valueConnection_);\n          statementConnections.push(clauseBlock.statementConnection_);\n          break;\n        case 'controls_if_else':\n          this.elseCount_++;\n          elseStatementConnection = clauseBlock.statementConnection_;\n          break;\n        default:\n          throw TypeError('Unknown block type: ' + clauseBlock.type);\n      }\n      clauseBlock = clauseBlock.nextConnection &&\n          clauseBlock.nextConnection.targetBlock();\n    }\n    this.updateShape_();\n    // Reconnect any child blocks.\n    this.reconnectChildBlocks_(valueConnections, statementConnections,\n        elseStatementConnection);\n  },\n  /**\n   * Store pointers to any connected child blocks.\n   * @param {!Blockly.Block} containerBlock Root block in mutator.\n   * @this {Blockly.Block}\n   */\n  saveConnections: function(containerBlock) {\n    var clauseBlock = containerBlock.nextConnection.targetBlock();\n    var i = 1;\n    while (clauseBlock) {\n      switch (clauseBlock.type) {\n        case 'controls_if_elseif':\n          var inputIf = this.getInput('IF' + i);\n          var inputDo = this.getInput('DO' + i);\n          clauseBlock.valueConnection_ =\n              inputIf && inputIf.connection.targetConnection;\n          clauseBlock.statementConnection_ =\n              inputDo && inputDo.connection.targetConnection;\n          i++;\n          break;\n        case 'controls_if_else':\n          var inputDo = this.getInput('ELSE');\n          clauseBlock.statementConnection_ =\n              inputDo && inputDo.connection.targetConnection;\n          break;\n        default:\n          throw TypeError('Unknown block type: ' + clauseBlock.type);\n      }\n      clauseBlock = clauseBlock.nextConnection &&\n          clauseBlock.nextConnection.targetBlock();\n    }\n  },\n  /**\n   * Reconstructs the block with all child blocks attached.\n   * @this {Blockly.Block}\n   */\n  rebuildShape_: function() {\n    var valueConnections = [null];\n    var statementConnections = [null];\n    var elseStatementConnection = null;\n\n    if (this.getInput('ELSE')) {\n      elseStatementConnection = this.getInput('ELSE').connection.targetConnection;\n    }\n    var i = 1;\n    while (this.getInput('IF' + i)) {\n      var inputIf = this.getInput('IF' + i);\n      var inputDo = this.getInput('DO' + i);\n      valueConnections.push(inputIf.connection.targetConnection);\n      statementConnections.push(inputDo.connection.targetConnection);\n      i++;\n    }\n    this.updateShape_();\n    this.reconnectChildBlocks_(valueConnections, statementConnections,\n        elseStatementConnection);\n  },\n  /**\n   * Modify this block to have the correct number of inputs.\n   * @this {Blockly.Block}\n   * @private\n   */\n  updateShape_: function() {\n    // Delete everything.\n    if (this.getInput('ELSE')) {\n      this.removeInput('ELSE');\n    }\n    var i = 1;\n    while (this.getInput('IF' + i)) {\n      this.removeInput('IF' + i);\n      this.removeInput('DO' + i);\n      i++;\n    }\n    // Rebuild block.\n    for (i = 1; i <= this.elseifCount_; i++) {\n      this.appendValueInput('IF' + i)\n          .setCheck('Boolean')\n          .appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSEIF']);\n      this.appendStatementInput('DO' + i)\n          .appendField(Blockly.Msg['CONTROLS_IF_MSG_THEN']);\n    }\n    if (this.elseCount_) {\n      this.appendStatementInput('ELSE')\n          .appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSE']);\n    }\n  },\n  /**\n   * Reconnects child blocks.\n   * @param {!Array.<?Blockly.RenderedConnection>} valueConnections List of\n   * value connections for 'if' input.\n   * @param {!Array.<?Blockly.RenderedConnection>} statementConnections List of\n   * statement connections for 'do' input.\n   * @param {?Blockly.RenderedConnection} elseStatementConnection Statement\n   * connection for else input.\n   * @this {Blockly.Block}\n   */\n  reconnectChildBlocks_: function(valueConnections, statementConnections,\n      elseStatementConnection) {\n    for (var i = 1; i <= this.elseifCount_; i++) {\n      Blockly.Mutator.reconnect(valueConnections[i], this, 'IF' + i);\n      Blockly.Mutator.reconnect(statementConnections[i], this, 'DO' + i);\n    }\n    Blockly.Mutator.reconnect(elseStatementConnection, this, 'ELSE');\n  }\n};\n\nBlockly.Extensions.registerMutator('controls_if_mutator',\n    Blockly.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN, null,\n    ['controls_if_elseif', 'controls_if_else']);\n/**\n * \"controls_if\" extension function. Adds mutator, shape updating methods, and\n * dynamic tooltip to \"controls_if\" blocks.\n * @this {Blockly.Block}\n * @package\n */\nBlockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION = function() {\n\n  this.setTooltip(function() {\n    if (!this.elseifCount_ && !this.elseCount_) {\n      return Blockly.Msg['CONTROLS_IF_TOOLTIP_1'];\n    } else if (!this.elseifCount_ && this.elseCount_) {\n      return Blockly.Msg['CONTROLS_IF_TOOLTIP_2'];\n    } else if (this.elseifCount_ && !this.elseCount_) {\n      return Blockly.Msg['CONTROLS_IF_TOOLTIP_3'];\n    } else if (this.elseifCount_ && this.elseCount_) {\n      return Blockly.Msg['CONTROLS_IF_TOOLTIP_4'];\n    }\n    return '';\n  }.bind(this));\n};\n\nBlockly.Extensions.register('controls_if_tooltip',\n    Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION);\n\n/**\n * Adds dynamic type validation for the left and right sides of a logic_compare\n * block.\n * @mixin\n * @augments Blockly.Block\n * @package\n * @readonly\n */\nBlockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN = {\n  /**\n   * Called whenever anything on the workspace changes.\n   * Prevent mismatched types from being compared.\n   * @param {!Blockly.Events.Abstract} e Change event.\n   * @this {Blockly.Block}\n   */\n  onchange: function(e) {\n    if (!this.prevBlocks_) {\n      this.prevBlocks_ = [null, null];\n    }\n\n    var blockA = this.getInputTargetBlock('A');\n    var blockB = this.getInputTargetBlock('B');\n    // Disconnect blocks that existed prior to this change if they don't match.\n    if (blockA && blockB &&\n      !this.workspace.connectionChecker.doTypeChecks(\n          blockA.outputConnection, blockB.outputConnection)) {\n      // Mismatch between two inputs.  Revert the block connections,\n      // bumping away the newly connected block(s).\n      Blockly.Events.setGroup(e.group);\n      var prevA = this.prevBlocks_[0];\n      if (prevA !== blockA) {\n        blockA.unplug();\n        if (prevA && !prevA.isDisposed() && !prevA.isShadow()) {\n          // The shadow block is automatically replaced during unplug().\n          this.getInput('A').connection.connect(prevA.outputConnection);\n        }\n      }\n      var prevB = this.prevBlocks_[1];\n      if (prevB !== blockB) {\n        blockB.unplug();\n        if (prevB && !prevB.isDisposed() && !prevB.isShadow()) {\n          // The shadow block is automatically replaced during unplug().\n          this.getInput('B').connection.connect(prevB.outputConnection);\n        }\n      }\n      this.bumpNeighbours();\n      Blockly.Events.setGroup(false);\n    }\n    this.prevBlocks_[0] = this.getInputTargetBlock('A');\n    this.prevBlocks_[1] = this.getInputTargetBlock('B');\n  }\n};\n\n/**\n * \"logic_compare\" extension function. Adds type left and right side type\n * checking to \"logic_compare\" blocks.\n * @this {Blockly.Block}\n * @package\n * @readonly\n */\nBlockly.Constants.Logic.LOGIC_COMPARE_EXTENSION = function() {\n  // Add onchange handler to ensure types are compatible.\n  this.mixin(Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN);\n};\n\nBlockly.Extensions.register('logic_compare',\n    Blockly.Constants.Logic.LOGIC_COMPARE_EXTENSION);\n\n/**\n * Adds type coordination between inputs and output.\n * @mixin\n * @augments Blockly.Block\n * @package\n * @readonly\n */\nBlockly.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN = {\n  prevParentConnection_: null,\n\n  /**\n   * Called whenever anything on the workspace changes.\n   * Prevent mismatched types.\n   * @param {!Blockly.Events.Abstract} e Change event.\n   * @this {Blockly.Block}\n   */\n  onchange: function(e) {\n    var blockA = this.getInputTargetBlock('THEN');\n    var blockB = this.getInputTargetBlock('ELSE');\n    var parentConnection = this.outputConnection.targetConnection;\n    // Disconnect blocks that existed prior to this change if they don't match.\n    if ((blockA || blockB) && parentConnection) {\n      for (var i = 0; i < 2; i++) {\n        var block = (i == 1) ? blockA : blockB;\n        if (block &&\n            !block.workspace.connectionChecker.doTypeChecks(\n                block.outputConnection, parentConnection)) {\n          // Ensure that any disconnections are grouped with the causing event.\n          Blockly.Events.setGroup(e.group);\n          if (parentConnection === this.prevParentConnection_) {\n            this.unplug();\n            parentConnection.getSourceBlock().bumpNeighbours();\n          } else {\n            block.unplug();\n            block.bumpNeighbours();\n          }\n          Blockly.Events.setGroup(false);\n        }\n      }\n    }\n    this.prevParentConnection_ = parentConnection;\n  }\n};\n\nBlockly.Extensions.registerMixin('logic_ternary',\n    Blockly.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Loop blocks for Blockly.\n *\n * This file is scraped to extract a .json file of block definitions. The array\n * passed to defineBlocksWithJsonArray(..) must be strict JSON: double quotes\n * only, no outside references, no functions, no trailing commas, etc. The one\n * exception is end-of-line comments, which the scraper will remove.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Blocks.loops');  // Deprecated\ngoog.provide('Blockly.Constants.Loops');\n\ngoog.require('Blockly');\ngoog.require('Blockly.Blocks');\ngoog.require('Blockly.FieldDropdown');\ngoog.require('Blockly.FieldLabel');\ngoog.require('Blockly.FieldNumber');\ngoog.require('Blockly.FieldVariable');\ngoog.require('Blockly.Warning');\n\n\n/**\n * Unused constant for the common HSV hue for all blocks in this category.\n * @deprecated Use Blockly.Msg['LOOPS_HUE']. (2018 April 5)\n */\nBlockly.Constants.Loops.HUE = 120;\n\nBlockly.defineBlocksWithJsonArray([  // BEGIN JSON EXTRACT\n  // Block for repeat n times (external number).\n  {\n    \"type\": \"controls_repeat_ext\",\n    \"message0\": \"%{BKY_CONTROLS_REPEAT_TITLE}\",\n    \"args0\": [{\n      \"type\": \"input_value\",\n      \"name\": \"TIMES\",\n      \"check\": \"Number\"\n    }],\n    \"message1\": \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    \"args1\": [{\n      \"type\": \"input_statement\",\n      \"name\": \"DO\"\n    }],\n    \"previousStatement\": null,\n    \"nextStatement\": null,\n    \"style\": \"loop_blocks\",\n    \"tooltip\": \"%{BKY_CONTROLS_REPEAT_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_CONTROLS_REPEAT_HELPURL}\"\n  },\n  // Block for repeat n times (internal number).\n  // The 'controls_repeat_ext' block is preferred as it is more flexible.\n  {\n    \"type\": \"controls_repeat\",\n    \"message0\": \"%{BKY_CONTROLS_REPEAT_TITLE}\",\n    \"args0\": [{\n      \"type\": \"field_number\",\n      \"name\": \"TIMES\",\n      \"value\": 10,\n      \"min\": 0,\n      \"precision\": 1\n    }],\n    \"message1\": \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    \"args1\": [{\n      \"type\": \"input_statement\",\n      \"name\": \"DO\"\n    }],\n    \"previousStatement\": null,\n    \"nextStatement\": null,\n    \"style\": \"loop_blocks\",\n    \"tooltip\": \"%{BKY_CONTROLS_REPEAT_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_CONTROLS_REPEAT_HELPURL}\"\n  },\n  // Block for 'do while/until' loop.\n  {\n    \"type\": \"controls_whileUntil\",\n    \"message0\": \"%1 %2\",\n    \"args0\": [\n      {\n        \"type\": \"field_dropdown\",\n        \"name\": \"MODE\",\n        \"options\": [\n          [\"%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}\", \"WHILE\"],\n          [\"%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}\", \"UNTIL\"]\n        ]\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"BOOL\",\n        \"check\": \"Boolean\"\n      }\n    ],\n    \"message1\": \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    \"args1\": [{\n      \"type\": \"input_statement\",\n      \"name\": \"DO\"\n    }],\n    \"previousStatement\": null,\n    \"nextStatement\": null,\n    \"style\": \"loop_blocks\",\n    \"helpUrl\": \"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}\",\n    \"extensions\": [\"controls_whileUntil_tooltip\"]\n  },\n  // Block for 'for' loop.\n  {\n    \"type\": \"controls_for\",\n    \"message0\": \"%{BKY_CONTROLS_FOR_TITLE}\",\n    \"args0\": [\n      {\n        \"type\": \"field_variable\",\n        \"name\": \"VAR\",\n        \"variable\": null\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"FROM\",\n        \"check\": \"Number\",\n        \"align\": \"RIGHT\"\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"TO\",\n        \"check\": \"Number\",\n        \"align\": \"RIGHT\"\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"BY\",\n        \"check\": \"Number\",\n        \"align\": \"RIGHT\"\n      }\n    ],\n    \"message1\": \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    \"args1\": [{\n      \"type\": \"input_statement\",\n      \"name\": \"DO\"\n    }],\n    \"inputsInline\": true,\n    \"previousStatement\": null,\n    \"nextStatement\": null,\n    \"style\": \"loop_blocks\",\n    \"helpUrl\": \"%{BKY_CONTROLS_FOR_HELPURL}\",\n    \"extensions\": [\n      \"contextMenu_newGetVariableBlock\",\n      \"controls_for_tooltip\"\n    ]\n  },\n  // Block for 'for each' loop.\n  {\n    \"type\": \"controls_forEach\",\n    \"message0\": \"%{BKY_CONTROLS_FOREACH_TITLE}\",\n    \"args0\": [\n      {\n        \"type\": \"field_variable\",\n        \"name\": \"VAR\",\n        \"variable\": null\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"LIST\",\n        \"check\": \"Array\"\n      }\n    ],\n    \"message1\": \"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1\",\n    \"args1\": [{\n      \"type\": \"input_statement\",\n      \"name\": \"DO\"\n    }],\n    \"previousStatement\": null,\n    \"nextStatement\": null,\n    \"style\": \"loop_blocks\",\n    \"helpUrl\": \"%{BKY_CONTROLS_FOREACH_HELPURL}\",\n    \"extensions\": [\n      \"contextMenu_newGetVariableBlock\",\n      \"controls_forEach_tooltip\"\n    ]\n  },\n  // Block for flow statements: continue, break.\n  {\n    \"type\": \"controls_flow_statements\",\n    \"message0\": \"%1\",\n    \"args0\": [{\n      \"type\": \"field_dropdown\",\n      \"name\": \"FLOW\",\n      \"options\": [\n        [\"%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}\", \"BREAK\"],\n        [\"%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}\", \"CONTINUE\"]\n      ]\n    }],\n    \"previousStatement\": null,\n    \"style\": \"loop_blocks\",\n    \"helpUrl\": \"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}\",\n    \"extensions\": [\n      \"controls_flow_tooltip\",\n      \"controls_flow_in_loop_check\"\n    ]\n  }\n]);  // END JSON EXTRACT (Do not delete this comment.)\n\n/**\n * Tooltips for the 'controls_whileUntil' block, keyed by MODE value.\n * @see {Blockly.Extensions#buildTooltipForDropdown}\n * @package\n * @readonly\n */\nBlockly.Constants.Loops.WHILE_UNTIL_TOOLTIPS = {\n  'WHILE': '%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}',\n  'UNTIL': '%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}'\n};\n\nBlockly.Extensions.register('controls_whileUntil_tooltip',\n    Blockly.Extensions.buildTooltipForDropdown(\n        'MODE', Blockly.Constants.Loops.WHILE_UNTIL_TOOLTIPS));\n\n/**\n * Tooltips for the 'controls_flow_statements' block, keyed by FLOW value.\n * @see {Blockly.Extensions#buildTooltipForDropdown}\n * @package\n * @readonly\n */\nBlockly.Constants.Loops.BREAK_CONTINUE_TOOLTIPS = {\n  'BREAK': '%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}',\n  'CONTINUE': '%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}'\n};\n\nBlockly.Extensions.register('controls_flow_tooltip',\n    Blockly.Extensions.buildTooltipForDropdown(\n        'FLOW', Blockly.Constants.Loops.BREAK_CONTINUE_TOOLTIPS));\n\n/**\n * Mixin to add a context menu item to create a 'variables_get' block.\n * Used by blocks 'controls_for' and 'controls_forEach'.\n * @mixin\n * @augments Blockly.Block\n * @package\n * @readonly\n */\nBlockly.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN = {\n  /**\n   * Add context menu option to create getter block for the loop's variable.\n   * (customContextMenu support limited to web BlockSvg.)\n   * @param {!Array} options List of menu options to add to.\n   * @this {Blockly.Block}\n   */\n  customContextMenu: function(options) {\n    if (this.isInFlyout) {\n      return;\n    }\n    var variable = this.getField('VAR').getVariable();\n    var varName = variable.name;\n    if (!this.isCollapsed() && varName != null) {\n      var option = {enabled: true};\n      option.text =\n          Blockly.Msg['VARIABLES_SET_CREATE_GET'].replace('%1', varName);\n      var xmlField = Blockly.Variables.generateVariableFieldDom(variable);\n      var xmlBlock = Blockly.utils.xml.createElement('block');\n      xmlBlock.setAttribute('type', 'variables_get');\n      xmlBlock.appendChild(xmlField);\n      option.callback = Blockly.ContextMenu.callbackFactory(this, xmlBlock);\n      options.push(option);\n    }\n  }\n};\n\nBlockly.Extensions.registerMixin('contextMenu_newGetVariableBlock',\n    Blockly.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN);\n\nBlockly.Extensions.register('controls_for_tooltip',\n    Blockly.Extensions.buildTooltipWithFieldText(\n        '%{BKY_CONTROLS_FOR_TOOLTIP}', 'VAR'));\n\nBlockly.Extensions.register('controls_forEach_tooltip',\n    Blockly.Extensions.buildTooltipWithFieldText(\n        '%{BKY_CONTROLS_FOREACH_TOOLTIP}', 'VAR'));\n\n/**\n * This mixin adds a check to make sure the 'controls_flow_statements' block\n * is contained in a loop. Otherwise a warning is added to the block.\n * @mixin\n * @augments Blockly.Block\n * @package\n * @readonly\n */\nBlockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN = {\n  /**\n   * List of block types that are loops and thus do not need warnings.\n   * To add a new loop type add this to your code:\n   * Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.push('custom_loop');\n   */\n  LOOP_TYPES: [\n    'controls_repeat',\n    'controls_repeat_ext',\n    'controls_forEach',\n    'controls_for',\n    'controls_whileUntil'\n  ],\n\n  /**\n   * Don't automatically add STATEMENT_PREFIX and STATEMENT_SUFFIX to generated\n   * code.  These will be handled manually in this block's generators.\n   */\n  suppressPrefixSuffix: true,\n\n  /**\n   * Is the given block enclosed (at any level) by a loop?\n   * @param {!Blockly.Block} block Current block.\n   * @return {Blockly.Block} The nearest surrounding loop, or null if none.\n   */\n  getSurroundLoop: function(block) {\n    // Is the block nested in a loop?\n    do {\n      if (Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES\n          .indexOf(block.type) != -1) {\n        return block;\n      }\n      block = block.getSurroundParent();\n    } while (block);\n    return null;\n  },\n\n  /**\n   * Called whenever anything on the workspace changes.\n   * Add warning if this flow block is not nested inside a loop.\n   * @param {!Blockly.Events.Abstract} e Change event.\n   * @this {Blockly.Block}\n   */\n  onchange: function(e) {\n    // Don't change state if:\n    //   * It's at the start of a drag.\n    //   * It's not a move event.\n    //   * Or the moving block is not this block.\n    if (!this.workspace.isDragging || this.workspace.isDragging() ||\n        e.type != Blockly.Events.BLOCK_MOVE || e.blockId != this.id) {\n      return;\n    }\n    var enabled = Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN\n        .getSurroundLoop(this);\n    this.setWarningText(enabled ? null :\n        Blockly.Msg['CONTROLS_FLOW_STATEMENTS_WARNING']);\n    if (!this.isInFlyout) {\n      var group = Blockly.Events.getGroup();\n      // Makes it so the move and the disable event get undone together.\n      Blockly.Events.setGroup(e.group);\n      this.setEnabled(enabled);\n      Blockly.Events.setGroup(group);\n    }\n  }\n};\n\nBlockly.Extensions.registerMixin('controls_flow_in_loop_check',\n    Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Math blocks for Blockly.\n *\n * This file is scraped to extract a .json file of block definitions. The array\n * passed to defineBlocksWithJsonArray(..) must be strict JSON: double quotes\n * only, no outside references, no functions, no trailing commas, etc. The one\n * exception is end-of-line comments, which the scraper will remove.\n * @author q.neutron@gmail.com (Quynh Neutron)\n */\n'use strict';\n\ngoog.provide('Blockly.Blocks.math');  // Deprecated\ngoog.provide('Blockly.Constants.Math');\n\ngoog.require('Blockly');\ngoog.require('Blockly.Blocks');\ngoog.require('Blockly.FieldDropdown');\ngoog.require('Blockly.FieldLabel');\ngoog.require('Blockly.FieldNumber');\ngoog.require('Blockly.FieldVariable');\n\n\n/**\n * Unused constant for the common HSV hue for all blocks in this category.\n * @deprecated Use Blockly.Msg['MATH_HUE']. (2018 April 5)\n */\nBlockly.Constants.Math.HUE = 230;\n\nBlockly.defineBlocksWithJsonArray([  // BEGIN JSON EXTRACT\n  // Block for numeric value.\n  {\n    \"type\": \"math_number\",\n    \"message0\": \"%1\",\n    \"args0\": [{\n      \"type\": \"field_number\",\n      \"name\": \"NUM\",\n      \"value\": 0\n    }],\n    \"output\": \"Number\",\n    \"helpUrl\": \"%{BKY_MATH_NUMBER_HELPURL}\",\n    \"style\": \"math_blocks\",\n    \"tooltip\": \"%{BKY_MATH_NUMBER_TOOLTIP}\",\n    \"extensions\": [\"parent_tooltip_when_inline\"]\n  },\n\n  // Block for basic arithmetic operator.\n  {\n    \"type\": \"math_arithmetic\",\n    \"message0\": \"%1 %2 %3\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"A\",\n        \"check\": \"Number\"\n      },\n      {\n        \"type\": \"field_dropdown\",\n        \"name\": \"OP\",\n        \"options\": [\n          [\"%{BKY_MATH_ADDITION_SYMBOL}\", \"ADD\"],\n          [\"%{BKY_MATH_SUBTRACTION_SYMBOL}\", \"MINUS\"],\n          [\"%{BKY_MATH_MULTIPLICATION_SYMBOL}\", \"MULTIPLY\"],\n          [\"%{BKY_MATH_DIVISION_SYMBOL}\", \"DIVIDE\"],\n          [\"%{BKY_MATH_POWER_SYMBOL}\", \"POWER\"]\n        ]\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"B\",\n        \"check\": \"Number\"\n      }\n    ],\n    \"inputsInline\": true,\n    \"output\": \"Number\",\n    \"style\": \"math_blocks\",\n    \"helpUrl\": \"%{BKY_MATH_ARITHMETIC_HELPURL}\",\n    \"extensions\": [\"math_op_tooltip\"]\n  },\n\n  // Block for advanced math operators with single operand.\n  {\n    \"type\": \"math_single\",\n    \"message0\": \"%1 %2\",\n    \"args0\": [\n      {\n        \"type\": \"field_dropdown\",\n        \"name\": \"OP\",\n        \"options\": [\n          [\"%{BKY_MATH_SINGLE_OP_ROOT}\", 'ROOT'],\n          [\"%{BKY_MATH_SINGLE_OP_ABSOLUTE}\", 'ABS'],\n          ['-', 'NEG'],\n          ['ln', 'LN'],\n          ['log10', 'LOG10'],\n          ['e^', 'EXP'],\n          ['10^', 'POW10']\n        ]\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"NUM\",\n        \"check\": \"Number\"\n      }\n    ],\n    \"output\": \"Number\",\n    \"style\": \"math_blocks\",\n    \"helpUrl\": \"%{BKY_MATH_SINGLE_HELPURL}\",\n    \"extensions\": [\"math_op_tooltip\"]\n  },\n\n  // Block for trigonometry operators.\n  {\n    \"type\": \"math_trig\",\n    \"message0\": \"%1 %2\",\n    \"args0\": [\n      {\n        \"type\": \"field_dropdown\",\n        \"name\": \"OP\",\n        \"options\": [\n          [\"%{BKY_MATH_TRIG_SIN}\", \"SIN\"],\n          [\"%{BKY_MATH_TRIG_COS}\", \"COS\"],\n          [\"%{BKY_MATH_TRIG_TAN}\", \"TAN\"],\n          [\"%{BKY_MATH_TRIG_ASIN}\", \"ASIN\"],\n          [\"%{BKY_MATH_TRIG_ACOS}\", \"ACOS\"],\n          [\"%{BKY_MATH_TRIG_ATAN}\", \"ATAN\"]\n        ]\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"NUM\",\n        \"check\": \"Number\"\n      }\n    ],\n    \"output\": \"Number\",\n    \"style\": \"math_blocks\",\n    \"helpUrl\": \"%{BKY_MATH_TRIG_HELPURL}\",\n    \"extensions\": [\"math_op_tooltip\"]\n  },\n\n  // Block for constants: PI, E, the Golden Ratio, sqrt(2), 1/sqrt(2), INFINITY.\n  {\n    \"type\": \"math_constant\",\n    \"message0\": \"%1\",\n    \"args0\": [\n      {\n        \"type\": \"field_dropdown\",\n        \"name\": \"CONSTANT\",\n        \"options\": [\n          [\"\\u03c0\", \"PI\"],\n          [\"e\", \"E\"],\n          [\"\\u03c6\", \"GOLDEN_RATIO\"],\n          [\"sqrt(2)\", \"SQRT2\"],\n          [\"sqrt(\\u00bd)\", \"SQRT1_2\"],\n          [\"\\u221e\", \"INFINITY\"]\n        ]\n      }\n    ],\n    \"output\": \"Number\",\n    \"style\": \"math_blocks\",\n    \"tooltip\": \"%{BKY_MATH_CONSTANT_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_MATH_CONSTANT_HELPURL}\"\n  },\n\n  // Block for checking if a number is even, odd, prime, whole, positive,\n  // negative or if it is divisible by certain number.\n  {\n    \"type\": \"math_number_property\",\n    \"message0\": \"%1 %2\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"NUMBER_TO_CHECK\",\n        \"check\": \"Number\"\n      },\n      {\n        \"type\": \"field_dropdown\",\n        \"name\": \"PROPERTY\",\n        \"options\": [\n          [\"%{BKY_MATH_IS_EVEN}\", \"EVEN\"],\n          [\"%{BKY_MATH_IS_ODD}\", \"ODD\"],\n          [\"%{BKY_MATH_IS_PRIME}\", \"PRIME\"],\n          [\"%{BKY_MATH_IS_WHOLE}\", \"WHOLE\"],\n          [\"%{BKY_MATH_IS_POSITIVE}\", \"POSITIVE\"],\n          [\"%{BKY_MATH_IS_NEGATIVE}\", \"NEGATIVE\"],\n          [\"%{BKY_MATH_IS_DIVISIBLE_BY}\", \"DIVISIBLE_BY\"]\n        ]\n      }\n    ],\n    \"inputsInline\": true,\n    \"output\": \"Boolean\",\n    \"style\": \"math_blocks\",\n    \"tooltip\": \"%{BKY_MATH_IS_TOOLTIP}\",\n    \"mutator\": \"math_is_divisibleby_mutator\"\n  },\n\n  // Block for adding to a variable in place.\n  {\n    \"type\": \"math_change\",\n    \"message0\": \"%{BKY_MATH_CHANGE_TITLE}\",\n    \"args0\": [\n      {\n        \"type\": \"field_variable\",\n        \"name\": \"VAR\",\n        \"variable\": \"%{BKY_MATH_CHANGE_TITLE_ITEM}\"\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"DELTA\",\n        \"check\": \"Number\"\n      }\n    ],\n    \"previousStatement\": null,\n    \"nextStatement\": null,\n    \"style\": \"variable_blocks\",\n    \"helpUrl\": \"%{BKY_MATH_CHANGE_HELPURL}\",\n    \"extensions\": [\"math_change_tooltip\"]\n  },\n\n  // Block for rounding functions.\n  {\n    \"type\": \"math_round\",\n    \"message0\": \"%1 %2\",\n    \"args0\": [\n      {\n        \"type\": \"field_dropdown\",\n        \"name\": \"OP\",\n        \"options\": [\n          [\"%{BKY_MATH_ROUND_OPERATOR_ROUND}\", \"ROUND\"],\n          [\"%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}\", \"ROUNDUP\"],\n          [\"%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}\", \"ROUNDDOWN\"]\n        ]\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"NUM\",\n        \"check\": \"Number\"\n      }\n    ],\n    \"output\": \"Number\",\n    \"style\": \"math_blocks\",\n    \"helpUrl\": \"%{BKY_MATH_ROUND_HELPURL}\",\n    \"tooltip\": \"%{BKY_MATH_ROUND_TOOLTIP}\"\n  },\n\n  // Block for evaluating a list of numbers to return sum, average, min, max,\n  // etc.  Some functions also work on text (min, max, mode, median).\n  {\n    \"type\": \"math_on_list\",\n    \"message0\": \"%1 %2\",\n    \"args0\": [\n      {\n        \"type\": \"field_dropdown\",\n        \"name\": \"OP\",\n        \"options\": [\n          [\"%{BKY_MATH_ONLIST_OPERATOR_SUM}\", \"SUM\"],\n          [\"%{BKY_MATH_ONLIST_OPERATOR_MIN}\", \"MIN\"],\n          [\"%{BKY_MATH_ONLIST_OPERATOR_MAX}\", \"MAX\"],\n          [\"%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}\", \"AVERAGE\"],\n          [\"%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}\", \"MEDIAN\"],\n          [\"%{BKY_MATH_ONLIST_OPERATOR_MODE}\", \"MODE\"],\n          [\"%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}\", \"STD_DEV\"],\n          [\"%{BKY_MATH_ONLIST_OPERATOR_RANDOM}\", \"RANDOM\"]\n        ]\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"LIST\",\n        \"check\": \"Array\"\n      }\n    ],\n    \"output\": \"Number\",\n    \"style\": \"math_blocks\",\n    \"helpUrl\": \"%{BKY_MATH_ONLIST_HELPURL}\",\n    \"mutator\": \"math_modes_of_list_mutator\",\n    \"extensions\": [\"math_op_tooltip\"]\n  },\n\n  // Block for remainder of a division.\n  {\n    \"type\": \"math_modulo\",\n    \"message0\": \"%{BKY_MATH_MODULO_TITLE}\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"DIVIDEND\",\n        \"check\": \"Number\"\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"DIVISOR\",\n        \"check\": \"Number\"\n      }\n    ],\n    \"inputsInline\": true,\n    \"output\": \"Number\",\n    \"style\": \"math_blocks\",\n    \"tooltip\": \"%{BKY_MATH_MODULO_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_MATH_MODULO_HELPURL}\"\n  },\n\n  // Block for constraining a number between two limits.\n  {\n    \"type\": \"math_constrain\",\n    \"message0\": \"%{BKY_MATH_CONSTRAIN_TITLE}\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"VALUE\",\n        \"check\": \"Number\"\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"LOW\",\n        \"check\": \"Number\"\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"HIGH\",\n        \"check\": \"Number\"\n      }\n    ],\n    \"inputsInline\": true,\n    \"output\": \"Number\",\n    \"style\": \"math_blocks\",\n    \"tooltip\": \"%{BKY_MATH_CONSTRAIN_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_MATH_CONSTRAIN_HELPURL}\"\n  },\n\n  // Block for random integer between [X] and [Y].\n  {\n    \"type\": \"math_random_int\",\n    \"message0\": \"%{BKY_MATH_RANDOM_INT_TITLE}\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"FROM\",\n        \"check\": \"Number\"\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"TO\",\n        \"check\": \"Number\"\n      }\n    ],\n    \"inputsInline\": true,\n    \"output\": \"Number\",\n    \"style\": \"math_blocks\",\n    \"tooltip\": \"%{BKY_MATH_RANDOM_INT_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_MATH_RANDOM_INT_HELPURL}\"\n  },\n\n  // Block for random integer between [X] and [Y].\n  {\n    \"type\": \"math_random_float\",\n    \"message0\": \"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}\",\n    \"output\": \"Number\",\n    \"style\": \"math_blocks\",\n    \"tooltip\": \"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_MATH_RANDOM_FLOAT_HELPURL}\"\n  },\n\n  // Block for calculating atan2 of [X] and [Y].\n  {\n    \"type\": \"math_atan2\",\n    \"message0\": \"%{BKY_MATH_ATAN2_TITLE}\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"X\",\n        \"check\": \"Number\"\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"Y\",\n        \"check\": \"Number\"\n      }\n    ],\n    \"inputsInline\": true,\n    \"output\": \"Number\",\n    \"style\": \"math_blocks\",\n    \"tooltip\": \"%{BKY_MATH_ATAN2_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_MATH_ATAN2_HELPURL}\"\n  }\n]);  // END JSON EXTRACT (Do not delete this comment.)\n\n/**\n * Mapping of math block OP value to tooltip message for blocks\n * math_arithmetic, math_simple, math_trig, and math_on_lists.\n * @see {Blockly.Extensions#buildTooltipForDropdown}\n * @package\n * @readonly\n */\nBlockly.Constants.Math.TOOLTIPS_BY_OP = {\n  // math_arithmetic\n  'ADD': '%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}',\n  'MINUS': '%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}',\n  'MULTIPLY': '%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}',\n  'DIVIDE': '%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}',\n  'POWER': '%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}',\n\n  // math_simple\n  'ROOT': '%{BKY_MATH_SINGLE_TOOLTIP_ROOT}',\n  'ABS': '%{BKY_MATH_SINGLE_TOOLTIP_ABS}',\n  'NEG': '%{BKY_MATH_SINGLE_TOOLTIP_NEG}',\n  'LN': '%{BKY_MATH_SINGLE_TOOLTIP_LN}',\n  'LOG10': '%{BKY_MATH_SINGLE_TOOLTIP_LOG10}',\n  'EXP': '%{BKY_MATH_SINGLE_TOOLTIP_EXP}',\n  'POW10': '%{BKY_MATH_SINGLE_TOOLTIP_POW10}',\n\n  // math_trig\n  'SIN': '%{BKY_MATH_TRIG_TOOLTIP_SIN}',\n  'COS': '%{BKY_MATH_TRIG_TOOLTIP_COS}',\n  'TAN': '%{BKY_MATH_TRIG_TOOLTIP_TAN}',\n  'ASIN': '%{BKY_MATH_TRIG_TOOLTIP_ASIN}',\n  'ACOS': '%{BKY_MATH_TRIG_TOOLTIP_ACOS}',\n  'ATAN': '%{BKY_MATH_TRIG_TOOLTIP_ATAN}',\n\n  // math_on_lists\n  'SUM': '%{BKY_MATH_ONLIST_TOOLTIP_SUM}',\n  'MIN': '%{BKY_MATH_ONLIST_TOOLTIP_MIN}',\n  'MAX': '%{BKY_MATH_ONLIST_TOOLTIP_MAX}',\n  'AVERAGE': '%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}',\n  'MEDIAN': '%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}',\n  'MODE': '%{BKY_MATH_ONLIST_TOOLTIP_MODE}',\n  'STD_DEV': '%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}',\n  'RANDOM': '%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}'\n};\n\nBlockly.Extensions.register('math_op_tooltip',\n    Blockly.Extensions.buildTooltipForDropdown(\n        'OP', Blockly.Constants.Math.TOOLTIPS_BY_OP));\n\n\n/**\n * Mixin for mutator functions in the 'math_is_divisibleby_mutator'\n * extension.\n * @mixin\n * @augments Blockly.Block\n * @package\n */\nBlockly.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN = {\n  /**\n   * Create XML to represent whether the 'divisorInput' should be present.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    var divisorInput = (this.getFieldValue('PROPERTY') == 'DIVISIBLE_BY');\n    container.setAttribute('divisor_input', divisorInput);\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'divisorInput'.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    var divisorInput = (xmlElement.getAttribute('divisor_input') == 'true');\n    this.updateShape_(divisorInput);\n  },\n  /**\n   * Modify this block to have (or not have) an input for 'is divisible by'.\n   * @param {boolean} divisorInput True if this block has a divisor input.\n   * @private\n   * @this {Blockly.Block}\n   */\n  updateShape_: function(divisorInput) {\n    // Add or remove a Value Input.\n    var inputExists = this.getInput('DIVISOR');\n    if (divisorInput) {\n      if (!inputExists) {\n        this.appendValueInput('DIVISOR')\n            .setCheck('Number');\n      }\n    } else if (inputExists) {\n      this.removeInput('DIVISOR');\n    }\n  }\n};\n\n/**\n * 'math_is_divisibleby_mutator' extension to the 'math_property' block that\n * can update the block shape (add/remove divisor input) based on whether\n * property is \"divisible by\".\n * @this {Blockly.Block}\n * @package\n */\nBlockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION = function() {\n  this.getField('PROPERTY').setValidator(function(option) {\n    var divisorInput = (option == 'DIVISIBLE_BY');\n    this.getSourceBlock().updateShape_(divisorInput);\n  });\n};\n\nBlockly.Extensions.registerMutator('math_is_divisibleby_mutator',\n    Blockly.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,\n    Blockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION);\n\n// Update the tooltip of 'math_change' block to reference the variable.\nBlockly.Extensions.register('math_change_tooltip',\n    Blockly.Extensions.buildTooltipWithFieldText(\n        '%{BKY_MATH_CHANGE_TOOLTIP}', 'VAR'));\n\n/**\n * Mixin with mutator methods to support alternate output based if the\n * 'math_on_list' block uses the 'MODE' operation.\n * @mixin\n * @augments Blockly.Block\n * @package\n * @readonly\n */\nBlockly.Constants.Math.LIST_MODES_MUTATOR_MIXIN = {\n  /**\n   * Modify this block to have the correct output type.\n   * @param {string} newOp Either 'MODE' or some op than returns a number.\n   * @private\n   * @this {Blockly.Block}\n   */\n  updateType_: function(newOp) {\n    if (newOp == 'MODE') {\n      this.outputConnection.setCheck('Array');\n    } else {\n      this.outputConnection.setCheck('Number');\n    }\n  },\n  /**\n   * Create XML to represent the output type.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    container.setAttribute('op', this.getFieldValue('OP'));\n    return container;\n  },\n  /**\n   * Parse XML to restore the output type.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    this.updateType_(xmlElement.getAttribute('op'));\n  }\n};\n\n/**\n * Extension to 'math_on_list' blocks that allows support of\n * modes operation (outputs a list of numbers).\n * @this {Blockly.Block}\n * @package\n */\nBlockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION = function() {\n  this.getField('OP').setValidator(function(newOp) {\n    this.updateType_(newOp);\n  }.bind(this));\n};\n\nBlockly.Extensions.registerMutator('math_modes_of_list_mutator',\n    Blockly.Constants.Math.LIST_MODES_MUTATOR_MIXIN,\n    Blockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Procedure blocks for Blockly.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Blocks.procedures');\n\ngoog.require('Blockly');\ngoog.require('Blockly.Blocks');\ngoog.require('Blockly.Comment');\ngoog.require('Blockly.FieldCheckbox');\ngoog.require('Blockly.FieldLabel');\ngoog.require('Blockly.FieldTextInput');\ngoog.require('Blockly.Mutator');\ngoog.require('Blockly.Warning');\n\n\nBlockly.Blocks['procedures_defnoreturn'] = {\n  /**\n   * Block for defining a procedure with no return value.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    var nameField = new Blockly.FieldTextInput('',\n        Blockly.Procedures.rename);\n    nameField.setSpellcheck(false);\n    this.appendDummyInput()\n        .appendField(Blockly.Msg['PROCEDURES_DEFNORETURN_TITLE'])\n        .appendField(nameField, 'NAME')\n        .appendField('', 'PARAMS');\n    this.setMutator(new Blockly.Mutator(['procedures_mutatorarg']));\n    if ((this.workspace.options.comments ||\n         (this.workspace.options.parentWorkspace &&\n          this.workspace.options.parentWorkspace.options.comments)) &&\n        Blockly.Msg['PROCEDURES_DEFNORETURN_COMMENT']) {\n      this.setCommentText(Blockly.Msg['PROCEDURES_DEFNORETURN_COMMENT']);\n    }\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Blockly.Msg['PROCEDURES_DEFNORETURN_TOOLTIP']);\n    this.setHelpUrl(Blockly.Msg['PROCEDURES_DEFNORETURN_HELPURL']);\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    this.setStatements_(true);\n    this.statementConnection_ = null;\n  },\n  /**\n   * Add or remove the statement block from this function definition.\n   * @param {boolean} hasStatements True if a statement block is needed.\n   * @this {Blockly.Block}\n   */\n  setStatements_: function(hasStatements) {\n    if (this.hasStatements_ === hasStatements) {\n      return;\n    }\n    if (hasStatements) {\n      this.appendStatementInput('STACK')\n          .appendField(Blockly.Msg['PROCEDURES_DEFNORETURN_DO']);\n      if (this.getInput('RETURN')) {\n        this.moveInputBefore('STACK', 'RETURN');\n      }\n    } else {\n      this.removeInput('STACK', true);\n    }\n    this.hasStatements_ = hasStatements;\n  },\n  /**\n   * Update the display of parameters for this procedure definition block.\n   * @private\n   * @this {Blockly.Block}\n   */\n  updateParams_: function() {\n\n    // Merge the arguments into a human-readable list.\n    var paramString = '';\n    if (this.arguments_.length) {\n      paramString = Blockly.Msg['PROCEDURES_BEFORE_PARAMS'] +\n          ' ' + this.arguments_.join(', ');\n    }\n    // The params field is deterministic based on the mutation,\n    // no need to fire a change event.\n    Blockly.Events.disable();\n    try {\n      this.setFieldValue(paramString, 'PARAMS');\n    } finally {\n      Blockly.Events.enable();\n    }\n  },\n  /**\n   * Create XML to represent the argument inputs.\n   * @param {boolean=} opt_paramIds If true include the IDs of the parameter\n   *     quarks.  Used by Blockly.Procedures.mutateCallers for reconnection.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function(opt_paramIds) {\n    var container = Blockly.utils.xml.createElement('mutation');\n    if (opt_paramIds) {\n      container.setAttribute('name', this.getFieldValue('NAME'));\n    }\n    for (var i = 0; i < this.argumentVarModels_.length; i++) {\n      var parameter = Blockly.utils.xml.createElement('arg');\n      var argModel = this.argumentVarModels_[i];\n      parameter.setAttribute('name', argModel.name);\n      parameter.setAttribute('varid', argModel.getId());\n      if (opt_paramIds && this.paramIds_) {\n        parameter.setAttribute('paramId', this.paramIds_[i]);\n      }\n      container.appendChild(parameter);\n    }\n\n    // Save whether the statement input is visible.\n    if (!this.hasStatements_) {\n      container.setAttribute('statements', 'false');\n    }\n    return container;\n  },\n  /**\n   * Parse XML to restore the argument inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    for (var i = 0, childNode; (childNode = xmlElement.childNodes[i]); i++) {\n      if (childNode.nodeName.toLowerCase() == 'arg') {\n        var varName = childNode.getAttribute('name');\n        var varId = childNode.getAttribute('varid') || childNode.getAttribute('varId');\n        this.arguments_.push(varName);\n        var variable = Blockly.Variables.getOrCreateVariablePackage(\n            this.workspace, varId, varName, '');\n        if (variable != null) {\n          this.argumentVarModels_.push(variable);\n        } else {\n          console.log('Failed to create a variable with name ' + varName + ', ignoring.');\n        }\n      }\n    }\n    this.updateParams_();\n    Blockly.Procedures.mutateCallers(this);\n\n    // Show or hide the statement input.\n    this.setStatements_(xmlElement.getAttribute('statements') !== 'false');\n  },\n  /**\n   * Populate the mutator's dialog with this block's components.\n   * @param {!Blockly.Workspace} workspace Mutator's workspace.\n   * @return {!Blockly.Block} Root block in mutator.\n   * @this {Blockly.Block}\n   */\n  decompose: function(workspace) {\n    /*\n     * Creates the following XML:\n     * <block type=\"procedures_mutatorcontainer\">\n     *   <statement name=\"STACK\">\n     *     <block type=\"procedures_mutatorarg\">\n     *       <field name=\"NAME\">arg1_name</field>\n     *       <next>etc...</next>\n     *     </block>\n     *   </statement>\n     * </block>\n     */\n\n    var containerBlockNode = Blockly.utils.xml.createElement('block');\n    containerBlockNode.setAttribute('type', 'procedures_mutatorcontainer');\n    var statementNode = Blockly.utils.xml.createElement('statement');\n    statementNode.setAttribute('name', 'STACK');\n    containerBlockNode.appendChild(statementNode);\n\n    var node = statementNode;\n    for (var i = 0; i < this.arguments_.length; i++) {\n      var argBlockNode = Blockly.utils.xml.createElement('block');\n      argBlockNode.setAttribute('type', 'procedures_mutatorarg');\n      var fieldNode = Blockly.utils.xml.createElement('field');\n      fieldNode.setAttribute('name', 'NAME');\n      var argumentName = Blockly.utils.xml.createTextNode(this.arguments_[i]);\n      fieldNode.appendChild(argumentName);\n      argBlockNode.appendChild(fieldNode);\n      var nextNode = Blockly.utils.xml.createElement('next');\n      argBlockNode.appendChild(nextNode);\n\n      node.appendChild(argBlockNode);\n      node = nextNode;\n    }\n\n    var containerBlock = Blockly.Xml.domToBlock(containerBlockNode, workspace);\n\n    if (this.type == 'procedures_defreturn') {\n      containerBlock.setFieldValue(this.hasStatements_, 'STATEMENTS');\n    } else {\n      containerBlock.removeInput('STATEMENT_INPUT');\n    }\n\n    // Initialize procedure's callers with blank IDs.\n    Blockly.Procedures.mutateCallers(this);\n    return containerBlock;\n  },\n  /**\n   * Reconfigure this block based on the mutator dialog's components.\n   * @param {!Blockly.Block} containerBlock Root block in mutator.\n   * @this {Blockly.Block}\n   */\n  compose: function(containerBlock) {\n    // Parameter list.\n    this.arguments_ = [];\n    this.paramIds_ = [];\n    this.argumentVarModels_ = [];\n    var paramBlock = containerBlock.getInputTargetBlock('STACK');\n    while (paramBlock) {\n      var varName = paramBlock.getFieldValue('NAME');\n      this.arguments_.push(varName);\n      var variable = this.workspace.getVariable(varName, '');\n      this.argumentVarModels_.push(variable);\n\n      this.paramIds_.push(paramBlock.id);\n      paramBlock = paramBlock.nextConnection &&\n          paramBlock.nextConnection.targetBlock();\n    }\n    this.updateParams_();\n    Blockly.Procedures.mutateCallers(this);\n\n    // Show/hide the statement input.\n    var hasStatements = containerBlock.getFieldValue('STATEMENTS');\n    if (hasStatements !== null) {\n      hasStatements = hasStatements == 'TRUE';\n      if (this.hasStatements_ != hasStatements) {\n        if (hasStatements) {\n          this.setStatements_(true);\n          // Restore the stack, if one was saved.\n          Blockly.Mutator.reconnect(this.statementConnection_, this, 'STACK');\n          this.statementConnection_ = null;\n        } else {\n          // Save the stack, then disconnect it.\n          var stackConnection = this.getInput('STACK').connection;\n          this.statementConnection_ = stackConnection.targetConnection;\n          if (this.statementConnection_) {\n            var stackBlock = stackConnection.targetBlock();\n            stackBlock.unplug();\n            stackBlock.bumpNeighbours();\n          }\n          this.setStatements_(false);\n        }\n      }\n    }\n  },\n  /**\n   * Return the signature of this procedure definition.\n   * @return {!Array} Tuple containing three elements:\n   *     - the name of the defined procedure,\n   *     - a list of all its arguments,\n   *     - that it DOES NOT have a return value.\n   * @this {Blockly.Block}\n   */\n  getProcedureDef: function() {\n    return [this.getFieldValue('NAME'), this.arguments_, false];\n  },\n  /**\n   * Return all variables referenced by this block.\n   * @return {!Array.<string>} List of variable names.\n   * @this {Blockly.Block}\n   */\n  getVars: function() {\n    return this.arguments_;\n  },\n  /**\n   * Return all variables referenced by this block.\n   * @return {!Array.<!Blockly.VariableModel>} List of variable models.\n   * @this {Blockly.Block}\n   */\n  getVarModels: function() {\n    return this.argumentVarModels_;\n  },\n  /**\n   * Notification that a variable is renaming.\n   * If the ID matches one of this block's variables, rename it.\n   * @param {string} oldId ID of variable to rename.\n   * @param {string} newId ID of new variable.  May be the same as oldId, but\n   *     with an updated name.  Guaranteed to be the same type as the old\n   *     variable.\n   * @override\n   * @this {Blockly.Block}\n   */\n  renameVarById: function(oldId, newId) {\n    var oldVariable = this.workspace.getVariableById(oldId);\n    if (oldVariable.type != '') {\n      // Procedure arguments always have the empty type.\n      return;\n    }\n    var oldName = oldVariable.name;\n    var newVar = this.workspace.getVariableById(newId);\n\n    var change = false;\n    for (var i = 0; i < this.argumentVarModels_.length; i++) {\n      if (this.argumentVarModels_[i].getId() == oldId) {\n        this.arguments_[i] = newVar.name;\n        this.argumentVarModels_[i] = newVar;\n        change = true;\n      }\n    }\n    if (change) {\n      this.displayRenamedVar_(oldName, newVar.name);\n      Blockly.Procedures.mutateCallers(this);\n    }\n  },\n  /**\n   * Notification that a variable is renaming but keeping the same ID.  If the\n   * variable is in use on this block, rerender to show the new name.\n   * @param {!Blockly.VariableModel} variable The variable being renamed.\n   * @package\n   * @override\n   * @this {Blockly.Block}\n   */\n  updateVarName: function(variable) {\n    var newName = variable.name;\n    var change = false;\n    for (var i = 0; i < this.argumentVarModels_.length; i++) {\n      if (this.argumentVarModels_[i].getId() == variable.getId()) {\n        var oldName = this.arguments_[i];\n        this.arguments_[i] = newName;\n        change = true;\n      }\n    }\n    if (change) {\n      this.displayRenamedVar_(oldName, newName);\n      Blockly.Procedures.mutateCallers(this);\n    }\n  },\n  /**\n   * Update the display to reflect a newly renamed argument.\n   * @param {string} oldName The old display name of the argument.\n   * @param {string} newName The new display name of the argument.\n   * @private\n   * @this {Blockly.Block}\n   */\n  displayRenamedVar_: function(oldName, newName) {\n    this.updateParams_();\n    // Update the mutator's variables if the mutator is open.\n    if (this.mutator && this.mutator.isVisible()) {\n      var blocks = this.mutator.workspace_.getAllBlocks(false);\n      for (var i = 0, block; (block = blocks[i]); i++) {\n        if (block.type == 'procedures_mutatorarg' &&\n            Blockly.Names.equals(oldName, block.getFieldValue('NAME'))) {\n          block.setFieldValue(newName, 'NAME');\n        }\n      }\n    }\n  },\n  /**\n   * Add custom menu options to this block's context menu.\n   * @param {!Array} options List of menu options to add to.\n   * @this {Blockly.Block}\n   */\n  customContextMenu: function(options) {\n    if (this.isInFlyout) {\n      return;\n    }\n    // Add option to create caller.\n    var option = {enabled: true};\n    var name = this.getFieldValue('NAME');\n    option.text = Blockly.Msg['PROCEDURES_CREATE_DO'].replace('%1', name);\n    var xmlMutation = Blockly.utils.xml.createElement('mutation');\n    xmlMutation.setAttribute('name', name);\n    for (var i = 0; i < this.arguments_.length; i++) {\n      var xmlArg = Blockly.utils.xml.createElement('arg');\n      xmlArg.setAttribute('name', this.arguments_[i]);\n      xmlMutation.appendChild(xmlArg);\n    }\n    var xmlBlock = Blockly.utils.xml.createElement('block');\n    xmlBlock.setAttribute('type', this.callType_);\n    xmlBlock.appendChild(xmlMutation);\n    option.callback = Blockly.ContextMenu.callbackFactory(this, xmlBlock);\n    options.push(option);\n\n    // Add options to create getters for each parameter.\n    if (!this.isCollapsed()) {\n      for (var i = 0; i < this.argumentVarModels_.length; i++) {\n        var argOption = {enabled: true};\n        var argVar = this.argumentVarModels_[i];\n        argOption.text = Blockly.Msg['VARIABLES_SET_CREATE_GET']\n            .replace('%1', argVar.name);\n\n        var argXmlField = Blockly.Variables.generateVariableFieldDom(argVar);\n        var argXmlBlock = Blockly.utils.xml.createElement('block');\n        argXmlBlock.setAttribute('type', 'variables_get');\n        argXmlBlock.appendChild(argXmlField);\n        argOption.callback =\n            Blockly.ContextMenu.callbackFactory(this, argXmlBlock);\n        options.push(argOption);\n      }\n    }\n  },\n  callType_: 'procedures_callnoreturn'\n};\n\nBlockly.Blocks['procedures_defreturn'] = {\n  /**\n   * Block for defining a procedure with a return value.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    var nameField = new Blockly.FieldTextInput('',\n        Blockly.Procedures.rename);\n    nameField.setSpellcheck(false);\n    this.appendDummyInput()\n        .appendField(Blockly.Msg['PROCEDURES_DEFRETURN_TITLE'])\n        .appendField(nameField, 'NAME')\n        .appendField('', 'PARAMS');\n    this.appendValueInput('RETURN')\n        .setAlign(Blockly.ALIGN_RIGHT)\n        .appendField(Blockly.Msg['PROCEDURES_DEFRETURN_RETURN']);\n    this.setMutator(new Blockly.Mutator(['procedures_mutatorarg']));\n    if ((this.workspace.options.comments ||\n         (this.workspace.options.parentWorkspace &&\n          this.workspace.options.parentWorkspace.options.comments)) &&\n        Blockly.Msg['PROCEDURES_DEFRETURN_COMMENT']) {\n      this.setCommentText(Blockly.Msg['PROCEDURES_DEFRETURN_COMMENT']);\n    }\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Blockly.Msg['PROCEDURES_DEFRETURN_TOOLTIP']);\n    this.setHelpUrl(Blockly.Msg['PROCEDURES_DEFRETURN_HELPURL']);\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    this.setStatements_(true);\n    this.statementConnection_ = null;\n  },\n  setStatements_: Blockly.Blocks['procedures_defnoreturn'].setStatements_,\n  updateParams_: Blockly.Blocks['procedures_defnoreturn'].updateParams_,\n  mutationToDom: Blockly.Blocks['procedures_defnoreturn'].mutationToDom,\n  domToMutation: Blockly.Blocks['procedures_defnoreturn'].domToMutation,\n  decompose: Blockly.Blocks['procedures_defnoreturn'].decompose,\n  compose: Blockly.Blocks['procedures_defnoreturn'].compose,\n  /**\n   * Return the signature of this procedure definition.\n   * @return {!Array} Tuple containing three elements:\n   *     - the name of the defined procedure,\n   *     - a list of all its arguments,\n   *     - that it DOES have a return value.\n   * @this {Blockly.Block}\n   */\n  getProcedureDef: function() {\n    return [this.getFieldValue('NAME'), this.arguments_, true];\n  },\n  getVars: Blockly.Blocks['procedures_defnoreturn'].getVars,\n  getVarModels: Blockly.Blocks['procedures_defnoreturn'].getVarModels,\n  renameVarById: Blockly.Blocks['procedures_defnoreturn'].renameVarById,\n  updateVarName: Blockly.Blocks['procedures_defnoreturn'].updateVarName,\n  displayRenamedVar_: Blockly.Blocks['procedures_defnoreturn'].displayRenamedVar_,\n  customContextMenu: Blockly.Blocks['procedures_defnoreturn'].customContextMenu,\n  callType_: 'procedures_callreturn'\n};\n\nBlockly.Blocks['procedures_mutatorcontainer'] = {\n  /**\n   * Mutator block for procedure container.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this.appendDummyInput()\n        .appendField(Blockly.Msg['PROCEDURES_MUTATORCONTAINER_TITLE']);\n    this.appendStatementInput('STACK');\n    this.appendDummyInput('STATEMENT_INPUT')\n        .appendField(Blockly.Msg['PROCEDURES_ALLOW_STATEMENTS'])\n        .appendField(new Blockly.FieldCheckbox('TRUE'), 'STATEMENTS');\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Blockly.Msg['PROCEDURES_MUTATORCONTAINER_TOOLTIP']);\n    this.contextMenu = false;\n  },\n};\n\nBlockly.Blocks['procedures_mutatorarg'] = {\n  /**\n   * Mutator block for procedure argument.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    var field = new Blockly.FieldTextInput(\n        Blockly.Procedures.DEFAULT_ARG, this.validator_);\n    // Hack: override showEditor to do just a little bit more work.\n    // We don't have a good place to hook into the start of a text edit.\n    field.oldShowEditorFn_ = field.showEditor_;\n    var newShowEditorFn = function() {\n      this.createdVariables_ = [];\n      this.oldShowEditorFn_();\n    };\n    field.showEditor_ = newShowEditorFn;\n\n    this.appendDummyInput()\n        .appendField(Blockly.Msg['PROCEDURES_MUTATORARG_TITLE'])\n        .appendField(field, 'NAME');\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Blockly.Msg['PROCEDURES_MUTATORARG_TOOLTIP']);\n    this.contextMenu = false;\n\n    // Create the default variable when we drag the block in from the flyout.\n    // Have to do this after installing the field on the block.\n    field.onFinishEditing_ = this.deleteIntermediateVars_;\n    // Create an empty list so onFinishEditing_ has something to look at, even\n    // though the editor was never opened.\n    field.createdVariables_ = [];\n    field.onFinishEditing_('x');\n  },\n\n  /**\n   * Obtain a valid name for the procedure argument. Create a variable if\n   * necessary.\n   * Merge runs of whitespace.  Strip leading and trailing whitespace.\n   * Beyond this, all names are legal.\n   * @param {string} varName User-supplied name.\n   * @return {?string} Valid name, or null if a name was not specified.\n   * @private\n   * @this Blockly.FieldTextInput\n   */\n  validator_: function(varName) {\n    var sourceBlock = this.getSourceBlock();\n    var outerWs = Blockly.Mutator.findParentWs(sourceBlock.workspace);\n    varName = varName.replace(/[\\s\\xa0]+/g, ' ').replace(/^ | $/g, '');\n    if (!varName) {\n      return null;\n    }\n\n    // Prevents duplicate parameter names in functions\n    var workspace = sourceBlock.workspace.targetWorkspace ||\n        sourceBlock.workspace;\n    var blocks = workspace.getAllBlocks(false);\n    var caselessName = varName.toLowerCase();\n    for (var i = 0; i < blocks.length; i++) {\n      if (blocks[i].id == this.getSourceBlock().id) {\n        continue;\n      }\n      // Other blocks values may not be set yet when this is loaded.\n      var otherVar = blocks[i].getFieldValue('NAME');\n      if (otherVar && otherVar.toLowerCase() == caselessName) {\n        return null;\n      }\n    }\n\n    // Don't create variables for arg blocks that\n    // only exist in the mutator's flyout.\n    if (sourceBlock.isInFlyout) {\n      return varName;\n    }\n\n    var model = outerWs.getVariable(varName, '');\n    if (model && model.name != varName) {\n      // Rename the variable (case change)\n      outerWs.renameVariableById(model.getId(), varName);\n    }\n    if (!model) {\n      model = outerWs.createVariable(varName, '');\n      if (model && this.createdVariables_) {\n        this.createdVariables_.push(model);\n      }\n    }\n    return varName;\n  },\n\n  /**\n   * Called when focusing away from the text field.\n   * Deletes all variables that were created as the user typed their intended\n   * variable name.\n   * @param {string} newText The new variable name.\n   * @private\n   * @this Blockly.FieldTextInput\n   */\n  deleteIntermediateVars_: function(newText) {\n    var outerWs = Blockly.Mutator.findParentWs(this.getSourceBlock().workspace);\n    if (!outerWs) {\n      return;\n    }\n    for (var i = 0; i < this.createdVariables_.length; i++) {\n      var model = this.createdVariables_[i];\n      if (model.name != newText) {\n        outerWs.deleteVariableById(model.getId());\n      }\n    }\n  }\n};\n\nBlockly.Blocks['procedures_callnoreturn'] = {\n  /**\n   * Block for calling a procedure with no return value.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this.appendDummyInput('TOPROW')\n        .appendField(this.id, 'NAME');\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setStyle('procedure_blocks');\n    // Tooltip is set in renameProcedure.\n    this.setHelpUrl(Blockly.Msg['PROCEDURES_CALLNORETURN_HELPURL']);\n    this.arguments_ = [];\n    this.argumentVarModels_ = [];\n    this.quarkConnections_ = {};\n    this.quarkIds_ = null;\n    this.previousEnabledState_ = true;\n  },\n\n  /**\n   * Returns the name of the procedure this block calls.\n   * @return {string} Procedure name.\n   * @this {Blockly.Block}\n   */\n  getProcedureCall: function() {\n    // The NAME field is guaranteed to exist, null will never be returned.\n    return /** @type {string} */ (this.getFieldValue('NAME'));\n  },\n  /**\n   * Notification that a procedure is renaming.\n   * If the name matches this block's procedure, rename it.\n   * @param {string} oldName Previous name of procedure.\n   * @param {string} newName Renamed procedure.\n   * @this {Blockly.Block}\n   */\n  renameProcedure: function(oldName, newName) {\n    if (Blockly.Names.equals(oldName, this.getProcedureCall())) {\n      this.setFieldValue(newName, 'NAME');\n      var baseMsg = this.outputConnection ?\n          Blockly.Msg['PROCEDURES_CALLRETURN_TOOLTIP'] :\n          Blockly.Msg['PROCEDURES_CALLNORETURN_TOOLTIP'];\n      this.setTooltip(baseMsg.replace('%1', newName));\n    }\n  },\n  /**\n   * Notification that the procedure's parameters have changed.\n   * @param {!Array.<string>} paramNames New param names, e.g. ['x', 'y', 'z'].\n   * @param {!Array.<string>} paramIds IDs of params (consistent for each\n   *     parameter through the life of a mutator, regardless of param renaming),\n   *     e.g. ['piua', 'f8b_', 'oi.o'].\n   * @private\n   * @this {Blockly.Block}\n   */\n  setProcedureParameters_: function(paramNames, paramIds) {\n    // Data structures:\n    // this.arguments = ['x', 'y']\n    //     Existing param names.\n    // this.quarkConnections_ {piua: null, f8b_: Blockly.Connection}\n    //     Look-up of paramIds to connections plugged into the call block.\n    // this.quarkIds_ = ['piua', 'f8b_']\n    //     Existing param IDs.\n    // Note that quarkConnections_ may include IDs that no longer exist, but\n    // which might reappear if a param is reattached in the mutator.\n    var defBlock = Blockly.Procedures.getDefinition(this.getProcedureCall(),\n        this.workspace);\n    var mutatorOpen = defBlock && defBlock.mutator &&\n        defBlock.mutator.isVisible();\n    if (!mutatorOpen) {\n      this.quarkConnections_ = {};\n      this.quarkIds_ = null;\n    }\n    if (!paramIds) {\n      // Reset the quarks (a mutator is about to open).\n      return;\n    }\n    // Test arguments (arrays of strings) for changes. '\\n' is not a valid\n    // argument name character, so it is a valid delimiter here.\n    if (paramNames.join('\\n') == this.arguments_.join('\\n')) {\n      // No change.\n      this.quarkIds_ = paramIds;\n      return;\n    }\n    if (paramIds.length != paramNames.length) {\n      throw RangeError('paramNames and paramIds must be the same length.');\n    }\n    this.setCollapsed(false);\n    if (!this.quarkIds_) {\n      // Initialize tracking for this block.\n      this.quarkConnections_ = {};\n      this.quarkIds_ = [];\n    }\n    // Switch off rendering while the block is rebuilt.\n    var savedRendered = this.rendered;\n    this.rendered = false;\n    // Update the quarkConnections_ with existing connections.\n    for (var i = 0; i < this.arguments_.length; i++) {\n      var input = this.getInput('ARG' + i);\n      if (input) {\n        var connection = input.connection.targetConnection;\n        this.quarkConnections_[this.quarkIds_[i]] = connection;\n        if (mutatorOpen && connection &&\n            paramIds.indexOf(this.quarkIds_[i]) == -1) {\n          // This connection should no longer be attached to this block.\n          connection.disconnect();\n          connection.getSourceBlock().bumpNeighbours();\n        }\n      }\n    }\n    // Rebuild the block's arguments.\n    this.arguments_ = [].concat(paramNames);\n    // And rebuild the argument model list.\n    this.argumentVarModels_ = [];\n    for (var i = 0; i < this.arguments_.length; i++) {\n      var variable = Blockly.Variables.getOrCreateVariablePackage(\n          this.workspace, null, this.arguments_[i], '');\n      this.argumentVarModels_.push(variable);\n    }\n\n    this.updateShape_();\n    this.quarkIds_ = paramIds;\n    // Reconnect any child blocks.\n    if (this.quarkIds_) {\n      for (var i = 0; i < this.arguments_.length; i++) {\n        var quarkId = this.quarkIds_[i];\n        if (quarkId in this.quarkConnections_) {\n          var connection = this.quarkConnections_[quarkId];\n          if (!Blockly.Mutator.reconnect(connection, this, 'ARG' + i)) {\n            // Block no longer exists or has been attached elsewhere.\n            delete this.quarkConnections_[quarkId];\n          }\n        }\n      }\n    }\n    // Restore rendering and show the changes.\n    this.rendered = savedRendered;\n    if (this.rendered) {\n      this.render();\n    }\n  },\n  /**\n   * Modify this block to have the correct number of arguments.\n   * @private\n   * @this {Blockly.Block}\n   */\n  updateShape_: function() {\n    for (var i = 0; i < this.arguments_.length; i++) {\n      var field = this.getField('ARGNAME' + i);\n      if (field) {\n        // Ensure argument name is up to date.\n        // The argument name field is deterministic based on the mutation,\n        // no need to fire a change event.\n        Blockly.Events.disable();\n        try {\n          field.setValue(this.arguments_[i]);\n        } finally {\n          Blockly.Events.enable();\n        }\n      } else {\n        // Add new input.\n        field = new Blockly.FieldLabel(this.arguments_[i]);\n        var input = this.appendValueInput('ARG' + i)\n            .setAlign(Blockly.ALIGN_RIGHT)\n            .appendField(field, 'ARGNAME' + i);\n        input.init();\n      }\n    }\n    // Remove deleted inputs.\n    while (this.getInput('ARG' + i)) {\n      this.removeInput('ARG' + i);\n      i++;\n    }\n    // Add 'with:' if there are parameters, remove otherwise.\n    var topRow = this.getInput('TOPROW');\n    if (topRow) {\n      if (this.arguments_.length) {\n        if (!this.getField('WITH')) {\n          topRow.appendField(Blockly.Msg['PROCEDURES_CALL_BEFORE_PARAMS'], 'WITH');\n          topRow.init();\n        }\n      } else {\n        if (this.getField('WITH')) {\n          topRow.removeField('WITH');\n        }\n      }\n    }\n  },\n  /**\n   * Create XML to represent the (non-editable) name and arguments.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    container.setAttribute('name', this.getProcedureCall());\n    for (var i = 0; i < this.arguments_.length; i++) {\n      var parameter = Blockly.utils.xml.createElement('arg');\n      parameter.setAttribute('name', this.arguments_[i]);\n      container.appendChild(parameter);\n    }\n    return container;\n  },\n  /**\n   * Parse XML to restore the (non-editable) name and parameters.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    var name = xmlElement.getAttribute('name');\n    this.renameProcedure(this.getProcedureCall(), name);\n    var args = [];\n    var paramIds = [];\n    for (var i = 0, childNode; (childNode = xmlElement.childNodes[i]); i++) {\n      if (childNode.nodeName.toLowerCase() == 'arg') {\n        args.push(childNode.getAttribute('name'));\n        paramIds.push(childNode.getAttribute('paramId'));\n      }\n    }\n    this.setProcedureParameters_(args, paramIds);\n  },\n  /**\n   * Return all variables referenced by this block.\n   * @return {!Array.<string>} List of variable names.\n   * @this {Blockly.Block}\n   */\n  getVars: function() {\n    return this.arguments_;\n  },\n  /**\n   * Return all variables referenced by this block.\n   * @return {!Array.<!Blockly.VariableModel>} List of variable models.\n   * @this {Blockly.Block}\n   */\n  getVarModels: function() {\n    return this.argumentVarModels_;\n  },\n  /**\n   * Procedure calls cannot exist without the corresponding procedure\n   * definition.  Enforce this link whenever an event is fired.\n   * @param {!Blockly.Events.Abstract} event Change event.\n   * @this {Blockly.Block}\n   */\n  onchange: function(event) {\n    if (!this.workspace || this.workspace.isFlyout) {\n      // Block is deleted or is in a flyout.\n      return;\n    }\n    if (!event.recordUndo) {\n      // Events not generated by user. Skip handling.\n      return;\n    }\n    if (event.type == Blockly.Events.BLOCK_CREATE &&\n        event.ids.indexOf(this.id) != -1) {\n      // Look for the case where a procedure call was created (usually through\n      // paste) and there is no matching definition.  In this case, create\n      // an empty definition block with the correct signature.\n      var name = this.getProcedureCall();\n      var def = Blockly.Procedures.getDefinition(name, this.workspace);\n      if (def && (def.type != this.defType_ ||\n          JSON.stringify(def.getVars()) != JSON.stringify(this.arguments_))) {\n        // The signatures don't match.\n        def = null;\n      }\n      if (!def) {\n        Blockly.Events.setGroup(event.group);\n        /**\n         * Create matching definition block.\n         * <xml xmlns=\"https://developers.google.com/blockly/xml\">\n         *   <block type=\"procedures_defreturn\" x=\"10\" y=\"20\">\n         *     <mutation name=\"test\">\n         *       <arg name=\"x\"></arg>\n         *     </mutation>\n         *     <field name=\"NAME\">test</field>\n         *   </block>\n         * </xml>\n         */\n        var xml = Blockly.utils.xml.createElement('xml');\n        var block = Blockly.utils.xml.createElement('block');\n        block.setAttribute('type', this.defType_);\n        var xy = this.getRelativeToSurfaceXY();\n        var x = xy.x + Blockly.SNAP_RADIUS * (this.RTL ? -1 : 1);\n        var y = xy.y + Blockly.SNAP_RADIUS * 2;\n        block.setAttribute('x', x);\n        block.setAttribute('y', y);\n        var mutation = this.mutationToDom();\n        block.appendChild(mutation);\n        var field = Blockly.utils.xml.createElement('field');\n        field.setAttribute('name', 'NAME');\n        field.appendChild(Blockly.utils.xml.createTextNode(\n            this.getProcedureCall()));\n        block.appendChild(field);\n        xml.appendChild(block);\n        Blockly.Xml.domToWorkspace(xml, this.workspace);\n        Blockly.Events.setGroup(false);\n      }\n    } else if (event.type == Blockly.Events.BLOCK_DELETE) {\n      // Look for the case where a procedure definition has been deleted,\n      // leaving this block (a procedure call) orphaned.  In this case, delete\n      // the orphan.\n      var name = this.getProcedureCall();\n      var def = Blockly.Procedures.getDefinition(name, this.workspace);\n      if (!def) {\n        Blockly.Events.setGroup(event.group);\n        this.dispose(true);\n        Blockly.Events.setGroup(false);\n      }\n    } else if (event.type == Blockly.Events.CHANGE && event.element == 'disabled') {\n      var name = this.getProcedureCall();\n      var def = Blockly.Procedures.getDefinition(name, this.workspace);\n      if (def && def.id == event.blockId) {\n        // in most cases the old group should be ''\n        var oldGroup = Blockly.Events.getGroup();\n        if (oldGroup) {\n          // This should only be possible programmatically and may indicate a problem\n          // with event grouping. If you see this message please investigate. If the\n          // use ends up being valid we may need to reorder events in the undo stack.\n          console.log('Saw an existing group while responding to a definition change');\n        }\n        Blockly.Events.setGroup(event.group);\n        if (event.newValue) {\n          this.previousEnabledState_ = this.isEnabled();\n          this.setEnabled(false);\n        } else {\n          this.setEnabled(this.previousEnabledState_);\n        }\n        Blockly.Events.setGroup(oldGroup);\n      }\n    }\n  },\n  /**\n   * Add menu option to find the definition block for this call.\n   * @param {!Array} options List of menu options to add to.\n   * @this {Blockly.Block}\n   */\n  customContextMenu: function(options) {\n    if (!this.workspace.isMovable()) {\n      // If we center on the block and the workspace isn't movable we could\n      // loose blocks at the edges of the workspace.\n      return;\n    }\n\n    var option = {enabled: true};\n    option.text = Blockly.Msg['PROCEDURES_HIGHLIGHT_DEF'];\n    var name = this.getProcedureCall();\n    var workspace = this.workspace;\n    option.callback = function() {\n      var def = Blockly.Procedures.getDefinition(name, workspace);\n      if (def) {\n        workspace.centerOnBlock(def.id);\n        def.select();\n      }\n    };\n    options.push(option);\n  },\n  defType_: 'procedures_defnoreturn'\n};\n\nBlockly.Blocks['procedures_callreturn'] = {\n  /**\n   * Block for calling a procedure with a return value.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this.appendDummyInput('TOPROW')\n        .appendField('', 'NAME');\n    this.setOutput(true);\n    this.setStyle('procedure_blocks');\n    // Tooltip is set in domToMutation.\n    this.setHelpUrl(Blockly.Msg['PROCEDURES_CALLRETURN_HELPURL']);\n    this.arguments_ = [];\n    this.quarkConnections_ = {};\n    this.quarkIds_ = null;\n    this.previousEnabledState_ = true;\n  },\n\n  getProcedureCall: Blockly.Blocks['procedures_callnoreturn'].getProcedureCall,\n  renameProcedure: Blockly.Blocks['procedures_callnoreturn'].renameProcedure,\n  setProcedureParameters_:\n      Blockly.Blocks['procedures_callnoreturn'].setProcedureParameters_,\n  updateShape_: Blockly.Blocks['procedures_callnoreturn'].updateShape_,\n  mutationToDom: Blockly.Blocks['procedures_callnoreturn'].mutationToDom,\n  domToMutation: Blockly.Blocks['procedures_callnoreturn'].domToMutation,\n  getVars: Blockly.Blocks['procedures_callnoreturn'].getVars,\n  getVarModels: Blockly.Blocks['procedures_callnoreturn'].getVarModels,\n  onchange: Blockly.Blocks['procedures_callnoreturn'].onchange,\n  customContextMenu:\n      Blockly.Blocks['procedures_callnoreturn'].customContextMenu,\n  defType_: 'procedures_defreturn'\n};\n\nBlockly.Blocks['procedures_ifreturn'] = {\n  /**\n   * Block for conditionally returning a value from a procedure.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this.appendValueInput('CONDITION')\n        .setCheck('Boolean')\n        .appendField(Blockly.Msg['CONTROLS_IF_MSG_IF']);\n    this.appendValueInput('VALUE')\n        .appendField(Blockly.Msg['PROCEDURES_DEFRETURN_RETURN']);\n    this.setInputsInline(true);\n    this.setPreviousStatement(true);\n    this.setNextStatement(true);\n    this.setStyle('procedure_blocks');\n    this.setTooltip(Blockly.Msg['PROCEDURES_IFRETURN_TOOLTIP']);\n    this.setHelpUrl(Blockly.Msg['PROCEDURES_IFRETURN_HELPURL']);\n    this.hasReturnValue_ = true;\n  },\n  /**\n   * Create XML to represent whether this block has a return value.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    container.setAttribute('value', Number(this.hasReturnValue_));\n    return container;\n  },\n  /**\n   * Parse XML to restore whether this block has a return value.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    var value = xmlElement.getAttribute('value');\n    this.hasReturnValue_ = (value == 1);\n    if (!this.hasReturnValue_) {\n      this.removeInput('VALUE');\n      this.appendDummyInput('VALUE')\n          .appendField(Blockly.Msg['PROCEDURES_DEFRETURN_RETURN']);\n    }\n  },\n  /**\n   * Called whenever anything on the workspace changes.\n   * Add warning if this flow block is not nested inside a loop.\n   * @param {!Blockly.Events.Abstract} _e Change event.\n   * @this {Blockly.Block}\n   */\n  onchange: function(_e) {\n    if (!this.workspace.isDragging || this.workspace.isDragging()) {\n      return;  // Don't change state at the start of a drag.\n    }\n    var legal = false;\n    // Is the block nested in a procedure?\n    var block = this;\n    do {\n      if (this.FUNCTION_TYPES.indexOf(block.type) != -1) {\n        legal = true;\n        break;\n      }\n      block = block.getSurroundParent();\n    } while (block);\n    if (legal) {\n      // If needed, toggle whether this block has a return value.\n      if (block.type == 'procedures_defnoreturn' && this.hasReturnValue_) {\n        this.removeInput('VALUE');\n        this.appendDummyInput('VALUE')\n            .appendField(Blockly.Msg['PROCEDURES_DEFRETURN_RETURN']);\n        this.hasReturnValue_ = false;\n      } else if (block.type == 'procedures_defreturn' &&\n                 !this.hasReturnValue_) {\n        this.removeInput('VALUE');\n        this.appendValueInput('VALUE')\n            .appendField(Blockly.Msg['PROCEDURES_DEFRETURN_RETURN']);\n        this.hasReturnValue_ = true;\n      }\n      this.setWarningText(null);\n      if (!this.isInFlyout) {\n        this.setEnabled(true);\n      }\n    } else {\n      this.setWarningText(Blockly.Msg['PROCEDURES_IFRETURN_WARNING']);\n      if (!this.isInFlyout && !this.getInheritedDisabled()) {\n        this.setEnabled(false);\n      }\n    }\n  },\n  /**\n   * List of block types that are functions and thus do not need warnings.\n   * To add a new function type add this to your code:\n   * Blockly.Blocks['procedures_ifreturn'].FUNCTION_TYPES.push('custom_func');\n   */\n  FUNCTION_TYPES: ['procedures_defnoreturn', 'procedures_defreturn']\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Text blocks for Blockly.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Blocks.texts');  // Deprecated\ngoog.provide('Blockly.Constants.Text');\n\ngoog.require('Blockly');\ngoog.require('Blockly.Blocks');\ngoog.require('Blockly.FieldDropdown');\ngoog.require('Blockly.FieldImage');\ngoog.require('Blockly.FieldMultilineInput');\ngoog.require('Blockly.FieldTextInput');\ngoog.require('Blockly.FieldVariable');\ngoog.require('Blockly.Mutator');\n\n\n/**\n * Unused constant for the common HSV hue for all blocks in this category.\n * @deprecated Use Blockly.Msg['TEXTS_HUE']. (2018 April 5)\n */\nBlockly.Constants.Text.HUE = 160;\n\nBlockly.defineBlocksWithJsonArray([  // BEGIN JSON EXTRACT\n  // Block for text value\n  {\n    \"type\": \"text\",\n    \"message0\": \"%1\",\n    \"args0\": [{\n      \"type\": \"field_input\",\n      \"name\": \"TEXT\",\n      \"text\": \"\"\n    }],\n    \"output\": \"String\",\n    \"style\": \"text_blocks\",\n    \"helpUrl\": \"%{BKY_TEXT_TEXT_HELPURL}\",\n    \"tooltip\": \"%{BKY_TEXT_TEXT_TOOLTIP}\",\n    \"extensions\": [\n      \"text_quotes\",\n      \"parent_tooltip_when_inline\"\n    ]\n  },\n  {\n    \"type\": \"text_multiline\",\n    \"message0\": \"%1 %2\",\n    \"args0\": [{\n      \"type\": \"field_image\",\n      \"src\": 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpP' +\n             'U2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0' +\n             'U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjm' +\n             'RIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z88' +\n             '73zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5luj' +\n             'nYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiD' +\n             'MYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYX' +\n             'fwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4z' +\n             'wA5X2Z9AYnQrEAAAAASUVORK5CYII=',\n      \"width\": 12,\n      \"height\": 17,\n      \"alt\": '\\u00B6'\n    },{\n      \"type\": \"field_multilinetext\",\n      \"name\": \"TEXT\",\n      \"text\": \"\"\n    }],\n    \"output\": \"String\",\n    \"style\": \"text_blocks\",\n    \"helpUrl\": \"%{BKY_TEXT_TEXT_HELPURL}\",\n    \"tooltip\": \"%{BKY_TEXT_TEXT_TOOLTIP}\",\n    \"extensions\": [\n      \"parent_tooltip_when_inline\"\n    ]\n  },\n  {\n    \"type\": \"text_join\",\n    \"message0\": \"\",\n    \"output\": \"String\",\n    \"style\": \"text_blocks\",\n    \"helpUrl\": \"%{BKY_TEXT_JOIN_HELPURL}\",\n    \"tooltip\": \"%{BKY_TEXT_JOIN_TOOLTIP}\",\n    \"mutator\": \"text_join_mutator\"\n\n  },\n  {\n    \"type\": \"text_create_join_container\",\n    \"message0\": \"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2\",\n    \"args0\": [{\n      \"type\": \"input_dummy\"\n    },\n    {\n      \"type\": \"input_statement\",\n      \"name\": \"STACK\"\n    }],\n    \"style\": \"text_blocks\",\n    \"tooltip\": \"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}\",\n    \"enableContextMenu\": false\n  },\n  {\n    \"type\": \"text_create_join_item\",\n    \"message0\": \"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}\",\n    \"previousStatement\": null,\n    \"nextStatement\": null,\n    \"style\": \"text_blocks\",\n    \"tooltip\": \"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}\",\n    \"enableContextMenu\": false\n  },\n  {\n    \"type\": \"text_append\",\n    \"message0\": \"%{BKY_TEXT_APPEND_TITLE}\",\n    \"args0\": [{\n      \"type\": \"field_variable\",\n      \"name\": \"VAR\",\n      \"variable\": \"%{BKY_TEXT_APPEND_VARIABLE}\"\n    },\n    {\n      \"type\": \"input_value\",\n      \"name\": \"TEXT\"\n    }],\n    \"previousStatement\": null,\n    \"nextStatement\": null,\n    \"style\": \"text_blocks\",\n    \"extensions\": [\n      \"text_append_tooltip\"\n    ]\n  },\n  {\n    \"type\": \"text_length\",\n    \"message0\": \"%{BKY_TEXT_LENGTH_TITLE}\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"VALUE\",\n        \"check\": ['String', 'Array']\n      }\n    ],\n    \"output\": 'Number',\n    \"style\": \"text_blocks\",\n    \"tooltip\": \"%{BKY_TEXT_LENGTH_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_TEXT_LENGTH_HELPURL}\"\n  },\n  {\n    \"type\": \"text_isEmpty\",\n    \"message0\": \"%{BKY_TEXT_ISEMPTY_TITLE}\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"VALUE\",\n        \"check\": ['String', 'Array']\n      }\n    ],\n    \"output\": 'Boolean',\n    \"style\": \"text_blocks\",\n    \"tooltip\": \"%{BKY_TEXT_ISEMPTY_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_TEXT_ISEMPTY_HELPURL}\"\n  },\n  {\n    \"type\": \"text_indexOf\",\n    \"message0\": \"%{BKY_TEXT_INDEXOF_TITLE}\",\n    \"args0\": [\n      {\n        \"type\": \"input_value\",\n        \"name\": \"VALUE\",\n        \"check\": \"String\"\n      },\n      {\n        \"type\": \"field_dropdown\",\n        \"name\": \"END\",\n        \"options\": [\n          [\n            \"%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}\",\n            \"FIRST\"\n          ],\n          [\n            \"%{BKY_TEXT_INDEXOF_OPERATOR_LAST}\",\n            \"LAST\"\n          ]\n        ]\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"FIND\",\n        \"check\": \"String\"\n      }\n    ],\n    \"output\": \"Number\",\n    \"style\": \"text_blocks\",\n    \"helpUrl\": \"%{BKY_TEXT_INDEXOF_HELPURL}\",\n    \"inputsInline\": true,\n    \"extensions\": [\n      \"text_indexOf_tooltip\"\n    ]\n  },\n  {\n    \"type\": \"text_charAt\",\n    \"message0\": \"%{BKY_TEXT_CHARAT_TITLE}\", // \"in text %1 %2\"\n    \"args0\": [\n      {\n        \"type\":\"input_value\",\n        \"name\": \"VALUE\",\n        \"check\": \"String\"\n      },\n      {\n        \"type\": \"field_dropdown\",\n        \"name\": \"WHERE\",\n        \"options\": [\n          [\"%{BKY_TEXT_CHARAT_FROM_START}\", \"FROM_START\"],\n          [\"%{BKY_TEXT_CHARAT_FROM_END}\", \"FROM_END\"],\n          [\"%{BKY_TEXT_CHARAT_FIRST}\", \"FIRST\"],\n          [\"%{BKY_TEXT_CHARAT_LAST}\", \"LAST\"],\n          [\"%{BKY_TEXT_CHARAT_RANDOM}\", \"RANDOM\"]\n        ]\n      }\n    ],\n    \"output\": \"String\",\n    \"style\": \"text_blocks\",\n    \"helpUrl\": \"%{BKY_TEXT_CHARAT_HELPURL}\",\n    \"inputsInline\": true,\n    \"mutator\": \"text_charAt_mutator\"\n  }\n]);  // END JSON EXTRACT (Do not delete this comment.)\n\nBlockly.Blocks['text_getSubstring'] = {\n  /**\n   * Block for getting substring.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this['WHERE_OPTIONS_1'] = [\n      [Blockly.Msg['TEXT_GET_SUBSTRING_START_FROM_START'], 'FROM_START'],\n      [Blockly.Msg['TEXT_GET_SUBSTRING_START_FROM_END'], 'FROM_END'],\n      [Blockly.Msg['TEXT_GET_SUBSTRING_START_FIRST'], 'FIRST']\n    ];\n    this['WHERE_OPTIONS_2'] = [\n      [Blockly.Msg['TEXT_GET_SUBSTRING_END_FROM_START'], 'FROM_START'],\n      [Blockly.Msg['TEXT_GET_SUBSTRING_END_FROM_END'], 'FROM_END'],\n      [Blockly.Msg['TEXT_GET_SUBSTRING_END_LAST'], 'LAST']\n    ];\n    this.setHelpUrl(Blockly.Msg['TEXT_GET_SUBSTRING_HELPURL']);\n    this.setStyle('text_blocks');\n    this.appendValueInput('STRING')\n        .setCheck('String')\n        .appendField(Blockly.Msg['TEXT_GET_SUBSTRING_INPUT_IN_TEXT']);\n    this.appendDummyInput('AT1');\n    this.appendDummyInput('AT2');\n    if (Blockly.Msg['TEXT_GET_SUBSTRING_TAIL']) {\n      this.appendDummyInput('TAIL')\n          .appendField(Blockly.Msg['TEXT_GET_SUBSTRING_TAIL']);\n    }\n    this.setInputsInline(true);\n    this.setOutput(true, 'String');\n    this.updateAt_(1, true);\n    this.updateAt_(2, true);\n    this.setTooltip(Blockly.Msg['TEXT_GET_SUBSTRING_TOOLTIP']);\n  },\n  /**\n   * Create XML to represent whether there are 'AT' inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    var isAt1 = this.getInput('AT1').type == Blockly.INPUT_VALUE;\n    container.setAttribute('at1', isAt1);\n    var isAt2 = this.getInput('AT2').type == Blockly.INPUT_VALUE;\n    container.setAttribute('at2', isAt2);\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    var isAt1 = (xmlElement.getAttribute('at1') == 'true');\n    var isAt2 = (xmlElement.getAttribute('at2') == 'true');\n    this.updateAt_(1, isAt1);\n    this.updateAt_(2, isAt2);\n  },\n  /**\n   * Create or delete an input for a numeric index.\n   * This block has two such inputs, independent of each other.\n   * @param {number} n Specify first or second input (1 or 2).\n   * @param {boolean} isAt True if the input should exist.\n   * @private\n   * @this {Blockly.Block}\n   */\n  updateAt_: function(n, isAt) {\n    // Create or delete an input for the numeric index.\n    // Destroy old 'AT' and 'ORDINAL' inputs.\n    this.removeInput('AT' + n);\n    this.removeInput('ORDINAL' + n, true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT' + n).setCheck('Number');\n      if (Blockly.Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL' + n)\n            .appendField(Blockly.Msg['ORDINAL_NUMBER_SUFFIX']);\n      }\n    } else {\n      this.appendDummyInput('AT' + n);\n    }\n    // Move tail, if present, to end of block.\n    if (n == 2 && Blockly.Msg['TEXT_GET_SUBSTRING_TAIL']) {\n      this.removeInput('TAIL', true);\n      this.appendDummyInput('TAIL')\n          .appendField(Blockly.Msg['TEXT_GET_SUBSTRING_TAIL']);\n    }\n    var menu = new Blockly.FieldDropdown(this['WHERE_OPTIONS_' + n],\n        function(value) {\n          var newAt = (value == 'FROM_START') || (value == 'FROM_END');\n          // The 'isAt' variable is available due to this function being a\n          // closure.\n          if (newAt != isAt) {\n            var block = this.getSourceBlock();\n            block.updateAt_(n, newAt);\n            // This menu has been destroyed and replaced.\n            // Update the replacement.\n            block.setFieldValue(value, 'WHERE' + n);\n            return null;\n          }\n          return undefined;\n        });\n\n    this.getInput('AT' + n)\n        .appendField(menu, 'WHERE' + n);\n    if (n == 1) {\n      this.moveInputBefore('AT1', 'AT2');\n      if (this.getInput('ORDINAL1')) {\n        this.moveInputBefore('ORDINAL1', 'AT2');\n      }\n    }\n  }\n};\n\nBlockly.Blocks['text_changeCase'] = {\n  /**\n   * Block for changing capitalization.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    var OPERATORS = [\n      [Blockly.Msg['TEXT_CHANGECASE_OPERATOR_UPPERCASE'], 'UPPERCASE'],\n      [Blockly.Msg['TEXT_CHANGECASE_OPERATOR_LOWERCASE'], 'LOWERCASE'],\n      [Blockly.Msg['TEXT_CHANGECASE_OPERATOR_TITLECASE'], 'TITLECASE']\n    ];\n    this.setHelpUrl(Blockly.Msg['TEXT_CHANGECASE_HELPURL']);\n    this.setStyle('text_blocks');\n    this.appendValueInput('TEXT')\n        .setCheck('String')\n        .appendField(new Blockly.FieldDropdown(OPERATORS), 'CASE');\n    this.setOutput(true, 'String');\n    this.setTooltip(Blockly.Msg['TEXT_CHANGECASE_TOOLTIP']);\n  }\n};\n\nBlockly.Blocks['text_trim'] = {\n  /**\n   * Block for trimming spaces.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    var OPERATORS = [\n      [Blockly.Msg['TEXT_TRIM_OPERATOR_BOTH'], 'BOTH'],\n      [Blockly.Msg['TEXT_TRIM_OPERATOR_LEFT'], 'LEFT'],\n      [Blockly.Msg['TEXT_TRIM_OPERATOR_RIGHT'], 'RIGHT']\n    ];\n    this.setHelpUrl(Blockly.Msg['TEXT_TRIM_HELPURL']);\n    this.setStyle('text_blocks');\n    this.appendValueInput('TEXT')\n        .setCheck('String')\n        .appendField(new Blockly.FieldDropdown(OPERATORS), 'MODE');\n    this.setOutput(true, 'String');\n    this.setTooltip(Blockly.Msg['TEXT_TRIM_TOOLTIP']);\n  }\n};\n\nBlockly.Blocks['text_print'] = {\n  /**\n   * Block for print statement.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this.jsonInit({\n      \"message0\": Blockly.Msg['TEXT_PRINT_TITLE'],\n      \"args0\": [\n        {\n          \"type\": \"input_value\",\n          \"name\": \"TEXT\"\n        }\n      ],\n      \"previousStatement\": null,\n      \"nextStatement\": null,\n      \"style\": \"text_blocks\",\n      \"tooltip\": Blockly.Msg['TEXT_PRINT_TOOLTIP'],\n      \"helpUrl\": Blockly.Msg['TEXT_PRINT_HELPURL']\n    });\n  }\n};\n\nBlockly.Blocks['text_prompt_ext'] = {\n  /**\n   * Block for prompt function (external message).\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    var TYPES = [\n      [Blockly.Msg['TEXT_PROMPT_TYPE_TEXT'], 'TEXT'],\n      [Blockly.Msg['TEXT_PROMPT_TYPE_NUMBER'], 'NUMBER']\n    ];\n    this.setHelpUrl(Blockly.Msg['TEXT_PROMPT_HELPURL']);\n    this.setStyle('text_blocks');\n    // Assign 'this' to a variable for use in the closures below.\n    var thisBlock = this;\n    var dropdown = new Blockly.FieldDropdown(TYPES, function(newOp) {\n      thisBlock.updateType_(newOp);\n    });\n    this.appendValueInput('TEXT')\n        .appendField(dropdown, 'TYPE');\n    this.setOutput(true, 'String');\n    this.setTooltip(function() {\n      return (thisBlock.getFieldValue('TYPE') == 'TEXT') ?\n          Blockly.Msg['TEXT_PROMPT_TOOLTIP_TEXT'] :\n          Blockly.Msg['TEXT_PROMPT_TOOLTIP_NUMBER'];\n    });\n  },\n  /**\n   * Modify this block to have the correct output type.\n   * @param {string} newOp Either 'TEXT' or 'NUMBER'.\n   * @private\n   * @this {Blockly.Block}\n   */\n  updateType_: function(newOp) {\n    this.outputConnection.setCheck(newOp == 'NUMBER' ? 'Number' : 'String');\n  },\n  /**\n   * Create XML to represent the output type.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    container.setAttribute('type', this.getFieldValue('TYPE'));\n    return container;\n  },\n  /**\n   * Parse XML to restore the output type.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    this.updateType_(xmlElement.getAttribute('type'));\n  }\n};\n\nBlockly.Blocks['text_prompt'] = {\n  /**\n   * Block for prompt function (internal message).\n   * The 'text_prompt_ext' block is preferred as it is more flexible.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);\n    var TYPES = [\n      [Blockly.Msg['TEXT_PROMPT_TYPE_TEXT'], 'TEXT'],\n      [Blockly.Msg['TEXT_PROMPT_TYPE_NUMBER'], 'NUMBER']\n    ];\n\n    // Assign 'this' to a variable for use in the closures below.\n    var thisBlock = this;\n    this.setHelpUrl(Blockly.Msg['TEXT_PROMPT_HELPURL']);\n    this.setStyle('text_blocks');\n    var dropdown = new Blockly.FieldDropdown(TYPES, function(newOp) {\n      thisBlock.updateType_(newOp);\n    });\n    this.appendDummyInput()\n        .appendField(dropdown, 'TYPE')\n        .appendField(this.newQuote_(true))\n        .appendField(new Blockly.FieldTextInput(''), 'TEXT')\n        .appendField(this.newQuote_(false));\n    this.setOutput(true, 'String');\n    this.setTooltip(function() {\n      return (thisBlock.getFieldValue('TYPE') == 'TEXT') ?\n          Blockly.Msg['TEXT_PROMPT_TOOLTIP_TEXT'] :\n          Blockly.Msg['TEXT_PROMPT_TOOLTIP_NUMBER'];\n    });\n  },\n  updateType_: Blockly.Blocks['text_prompt_ext'].updateType_,\n  mutationToDom: Blockly.Blocks['text_prompt_ext'].mutationToDom,\n  domToMutation: Blockly.Blocks['text_prompt_ext'].domToMutation\n};\n\nBlockly.Blocks['text_count'] = {\n  /**\n   * Block for counting how many times one string appears within another string.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this.jsonInit({\n      \"message0\": Blockly.Msg['TEXT_COUNT_MESSAGE0'],\n      \"args0\": [\n        {\n          \"type\": \"input_value\",\n          \"name\": \"SUB\",\n          \"check\": \"String\"\n        },\n        {\n          \"type\": \"input_value\",\n          \"name\": \"TEXT\",\n          \"check\": \"String\"\n        }\n      ],\n      \"output\": \"Number\",\n      \"inputsInline\": true,\n      \"style\": \"text_blocks\",\n      \"tooltip\": Blockly.Msg['TEXT_COUNT_TOOLTIP'],\n      \"helpUrl\": Blockly.Msg['TEXT_COUNT_HELPURL']\n    });\n  }\n};\n\nBlockly.Blocks['text_replace'] = {\n  /**\n   * Block for replacing one string with another in the text.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this.jsonInit({\n      \"message0\": Blockly.Msg['TEXT_REPLACE_MESSAGE0'],\n      \"args0\": [\n        {\n          \"type\": \"input_value\",\n          \"name\": \"FROM\",\n          \"check\": \"String\"\n        },\n        {\n          \"type\": \"input_value\",\n          \"name\": \"TO\",\n          \"check\": \"String\"\n        },\n        {\n          \"type\": \"input_value\",\n          \"name\": \"TEXT\",\n          \"check\": \"String\"\n        }\n      ],\n      \"output\": \"String\",\n      \"inputsInline\": true,\n      \"style\": \"text_blocks\",\n      \"tooltip\": Blockly.Msg['TEXT_REPLACE_TOOLTIP'],\n      \"helpUrl\": Blockly.Msg['TEXT_REPLACE_HELPURL']\n    });\n  }\n};\n\nBlockly.Blocks['text_reverse'] = {\n  /**\n   * Block for reversing a string.\n   * @this {Blockly.Block}\n   */\n  init: function() {\n    this.jsonInit({\n      \"message0\": Blockly.Msg['TEXT_REVERSE_MESSAGE0'],\n      \"args0\": [\n        {\n          \"type\": \"input_value\",\n          \"name\": \"TEXT\",\n          \"check\": \"String\"\n        }\n      ],\n      \"output\": \"String\",\n      \"inputsInline\": true,\n      \"style\": \"text_blocks\",\n      \"tooltip\": Blockly.Msg['TEXT_REVERSE_TOOLTIP'],\n      \"helpUrl\": Blockly.Msg['TEXT_REVERSE_HELPURL']\n    });\n  }\n};\n\n/**\n *\n * @mixin\n * @package\n * @readonly\n */\nBlockly.Constants.Text.QUOTE_IMAGE_MIXIN = {\n  /**\n   * Image data URI of an LTR opening double quote (same as RTL closing double quote).\n   * @readonly\n   */\n  QUOTE_IMAGE_LEFT_DATAURI:\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAA' +\n    'n0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY' +\n    '1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1' +\n    'HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMf' +\n    'z9AylsaRRgGzvZAAAAAElFTkSuQmCC',\n  /**\n   * Image data URI of an LTR closing double quote (same as RTL opening double quote).\n   * @readonly\n   */\n  QUOTE_IMAGE_RIGHT_DATAURI:\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAA' +\n    'qUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhg' +\n    'gONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvB' +\n    'O3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5Aos' +\n    'lLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==',\n  /**\n   * Pixel width of QUOTE_IMAGE_LEFT_DATAURI and QUOTE_IMAGE_RIGHT_DATAURI.\n   * @readonly\n   */\n  QUOTE_IMAGE_WIDTH: 12,\n  /**\n   * Pixel height of QUOTE_IMAGE_LEFT_DATAURI and QUOTE_IMAGE_RIGHT_DATAURI.\n   * @readonly\n   */\n  QUOTE_IMAGE_HEIGHT: 12,\n\n  /**\n   * Inserts appropriate quote images before and after the named field.\n   * @param {string} fieldName The name of the field to wrap with quotes.\n   * @this {Blockly.Block}\n   */\n  quoteField_: function(fieldName) {\n    for (var i = 0, input; (input = this.inputList[i]); i++) {\n      for (var j = 0, field; (field = input.fieldRow[j]); j++) {\n        if (fieldName == field.name) {\n          input.insertFieldAt(j, this.newQuote_(true));\n          input.insertFieldAt(j + 2, this.newQuote_(false));\n          return;\n        }\n      }\n    }\n    console.warn('field named \"' + fieldName + '\" not found in ' + this.toDevString());\n  },\n\n  /**\n   * A helper function that generates a FieldImage of an opening or\n   * closing double quote. The selected quote will be adapted for RTL blocks.\n   * @param {boolean} open If the image should be open quote ( in LTR).\n   *                       Otherwise, a closing quote is used ( in LTR).\n   * @return {!Blockly.FieldImage} The new field.\n   * @this {Blockly.Block}\n   */\n  newQuote_: function(open) {\n    var isLeft = this.RTL ? !open : open;\n    var dataUri = isLeft ?\n      this.QUOTE_IMAGE_LEFT_DATAURI :\n      this.QUOTE_IMAGE_RIGHT_DATAURI;\n    return new Blockly.FieldImage(\n        dataUri,\n        this.QUOTE_IMAGE_WIDTH,\n        this.QUOTE_IMAGE_HEIGHT,\n        isLeft ? '\\u201C' : '\\u201D');\n  }\n};\n\n/**\n * Wraps TEXT field with images of double quote characters.\n * @this {Blockly.Block}\n */\nBlockly.Constants.Text.TEXT_QUOTES_EXTENSION = function() {\n  this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);\n  this.quoteField_('TEXT');\n};\n\n/**\n * Mixin for mutator functions in the 'text_join_mutator' extension.\n * @mixin\n * @augments Blockly.Block\n * @package\n */\nBlockly.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN = {\n  /**\n   * Create XML to represent number of text inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    container.setAttribute('items', this.itemCount_);\n    return container;\n  },\n  /**\n   * Parse XML to restore the text inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    this.itemCount_ = parseInt(xmlElement.getAttribute('items'), 10);\n    this.updateShape_();\n  },\n  /**\n   * Populate the mutator's dialog with this block's components.\n   * @param {!Blockly.Workspace} workspace Mutator's workspace.\n   * @return {!Blockly.Block} Root block in mutator.\n   * @this {Blockly.Block}\n   */\n  decompose: function(workspace) {\n    var containerBlock = workspace.newBlock('text_create_join_container');\n    containerBlock.initSvg();\n    var connection = containerBlock.getInput('STACK').connection;\n    for (var i = 0; i < this.itemCount_; i++) {\n      var itemBlock = workspace.newBlock('text_create_join_item');\n      itemBlock.initSvg();\n      connection.connect(itemBlock.previousConnection);\n      connection = itemBlock.nextConnection;\n    }\n    return containerBlock;\n  },\n  /**\n   * Reconfigure this block based on the mutator dialog's components.\n   * @param {!Blockly.Block} containerBlock Root block in mutator.\n   * @this {Blockly.Block}\n   */\n  compose: function(containerBlock) {\n    var itemBlock = containerBlock.getInputTargetBlock('STACK');\n    // Count number of inputs.\n    var connections = [];\n    while (itemBlock) {\n      connections.push(itemBlock.valueConnection_);\n      itemBlock = itemBlock.nextConnection &&\n          itemBlock.nextConnection.targetBlock();\n    }\n    // Disconnect any children that don't belong.\n    for (var i = 0; i < this.itemCount_; i++) {\n      var connection = this.getInput('ADD' + i).connection.targetConnection;\n      if (connection && connections.indexOf(connection) == -1) {\n        connection.disconnect();\n      }\n    }\n    this.itemCount_ = connections.length;\n    this.updateShape_();\n    // Reconnect any child blocks.\n    for (var i = 0; i < this.itemCount_; i++) {\n      Blockly.Mutator.reconnect(connections[i], this, 'ADD' + i);\n    }\n  },\n  /**\n   * Store pointers to any connected child blocks.\n   * @param {!Blockly.Block} containerBlock Root block in mutator.\n   * @this {Blockly.Block}\n   */\n  saveConnections: function(containerBlock) {\n    var itemBlock = containerBlock.getInputTargetBlock('STACK');\n    var i = 0;\n    while (itemBlock) {\n      var input = this.getInput('ADD' + i);\n      itemBlock.valueConnection_ = input && input.connection.targetConnection;\n      i++;\n      itemBlock = itemBlock.nextConnection &&\n          itemBlock.nextConnection.targetBlock();\n    }\n  },\n  /**\n   * Modify this block to have the correct number of inputs.\n   * @private\n   * @this {Blockly.Block}\n   */\n  updateShape_: function() {\n    if (this.itemCount_ && this.getInput('EMPTY')) {\n      this.removeInput('EMPTY');\n    } else if (!this.itemCount_ && !this.getInput('EMPTY')) {\n      this.appendDummyInput('EMPTY')\n          .appendField(this.newQuote_(true))\n          .appendField(this.newQuote_(false));\n    }\n    // Add new inputs.\n    for (var i = 0; i < this.itemCount_; i++) {\n      if (!this.getInput('ADD' + i)) {\n        var input = this.appendValueInput('ADD' + i)\n            .setAlign(Blockly.ALIGN_RIGHT);\n        if (i == 0) {\n          input.appendField(Blockly.Msg['TEXT_JOIN_TITLE_CREATEWITH']);\n        }\n      }\n    }\n    // Remove deleted inputs.\n    while (this.getInput('ADD' + i)) {\n      this.removeInput('ADD' + i);\n      i++;\n    }\n  }\n};\n\n/**\n * Performs final setup of a text_join block.\n * @this {Blockly.Block}\n */\nBlockly.Constants.Text.TEXT_JOIN_EXTENSION = function() {\n  // Add the quote mixin for the itemCount_ = 0 case.\n  this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);\n  // Initialize the mutator values.\n  this.itemCount_ = 2;\n  this.updateShape_();\n  // Configure the mutator UI.\n  this.setMutator(new Blockly.Mutator(['text_create_join_item']));\n};\n\n// Update the tooltip of 'text_append' block to reference the variable.\nBlockly.Extensions.register('text_append_tooltip',\n    Blockly.Extensions.buildTooltipWithFieldText(\n        '%{BKY_TEXT_APPEND_TOOLTIP}', 'VAR'));\n\n/**\n * Update the tooltip of 'text_append' block to reference the variable.\n * @this {Blockly.Block}\n */\nBlockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION = function() {\n  // Assign 'this' to a variable for use in the tooltip closure below.\n  var thisBlock = this;\n  this.setTooltip(function() {\n    return Blockly.Msg['TEXT_INDEXOF_TOOLTIP'].replace('%1',\n        thisBlock.workspace.options.oneBasedIndex ? '0' : '-1');\n  });\n};\n\n/**\n * Mixin for mutator functions in the 'text_charAt_mutator' extension.\n * @mixin\n * @augments Blockly.Block\n * @package\n */\nBlockly.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN = {\n  /**\n   * Create XML to represent whether there is an 'AT' input.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    var container = Blockly.utils.xml.createElement('mutation');\n    container.setAttribute('at', !!this.isAt_);\n    return container;\n  },\n  /**\n   * Parse XML to restore the 'AT' input.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    // Note: Until January 2013 this block did not have mutations,\n    // so 'at' defaults to true.\n    var isAt = (xmlElement.getAttribute('at') != 'false');\n    this.updateAt_(isAt);\n  },\n  /**\n   * Create or delete an input for the numeric index.\n   * @param {boolean} isAt True if the input should exist.\n   * @private\n   * @this {Blockly.Block}\n   */\n  updateAt_: function(isAt) {\n    // Destroy old 'AT' and 'ORDINAL' inputs.\n    this.removeInput('AT', true);\n    this.removeInput('ORDINAL', true);\n    // Create either a value 'AT' input or a dummy input.\n    if (isAt) {\n      this.appendValueInput('AT').setCheck('Number');\n      if (Blockly.Msg['ORDINAL_NUMBER_SUFFIX']) {\n        this.appendDummyInput('ORDINAL')\n            .appendField(Blockly.Msg['ORDINAL_NUMBER_SUFFIX']);\n      }\n    }\n    if (Blockly.Msg['TEXT_CHARAT_TAIL']) {\n      this.removeInput('TAIL', true);\n      this.appendDummyInput('TAIL')\n          .appendField(Blockly.Msg['TEXT_CHARAT_TAIL']);\n    }\n\n    this.isAt_ = isAt;\n  }\n};\n\n/**\n * Does the initial mutator update of text_charAt and adds the tooltip\n * @this {Blockly.Block}\n */\nBlockly.Constants.Text.TEXT_CHARAT_EXTENSION = function() {\n  var dropdown = this.getField('WHERE');\n  dropdown.setValidator(function(value) {\n    var newAt = (value == 'FROM_START') || (value == 'FROM_END');\n    if (newAt != this.isAt_) {\n      var block = this.getSourceBlock();\n      block.updateAt_(newAt);\n    }\n  });\n  this.updateAt_(true);\n  // Assign 'this' to a variable for use in the tooltip closure below.\n  var thisBlock = this;\n  this.setTooltip(function() {\n    var where = thisBlock.getFieldValue('WHERE');\n    var tooltip = Blockly.Msg['TEXT_CHARAT_TOOLTIP'];\n    if (where == 'FROM_START' || where == 'FROM_END') {\n      var msg = (where == 'FROM_START') ?\n          Blockly.Msg['LISTS_INDEX_FROM_START_TOOLTIP'] :\n          Blockly.Msg['LISTS_INDEX_FROM_END_TOOLTIP'];\n      if (msg) {\n        tooltip += '  ' + msg.replace('%1',\n            thisBlock.workspace.options.oneBasedIndex ? '#1' : '#0');\n      }\n    }\n    return tooltip;\n  });\n};\n\nBlockly.Extensions.register('text_indexOf_tooltip',\n    Blockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION);\n\nBlockly.Extensions.register('text_quotes',\n    Blockly.Constants.Text.TEXT_QUOTES_EXTENSION);\n\nBlockly.Extensions.registerMutator('text_join_mutator',\n    Blockly.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,\n    Blockly.Constants.Text.TEXT_JOIN_EXTENSION);\n\nBlockly.Extensions.registerMutator('text_charAt_mutator',\n    Blockly.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,\n    Blockly.Constants.Text.TEXT_CHARAT_EXTENSION);\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Variable blocks for Blockly.\n\n * This file is scraped to extract a .json file of block definitions. The array\n * passed to defineBlocksWithJsonArray(..) must be strict JSON: double quotes\n * only, no outside references, no functions, no trailing commas, etc. The one\n * exception is end-of-line comments, which the scraper will remove.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.Blocks.variables');  // Deprecated.\ngoog.provide('Blockly.Constants.Variables');\n\ngoog.require('Blockly');\ngoog.require('Blockly.Blocks');\ngoog.require('Blockly.FieldLabel');\ngoog.require('Blockly.FieldVariable');\n\n\n/**\n * Unused constant for the common HSV hue for all blocks in this category.\n * @deprecated Use Blockly.Msg['VARIABLES_HUE']. (2018 April 5)\n */\nBlockly.Constants.Variables.HUE = 330;\n\nBlockly.defineBlocksWithJsonArray([  // BEGIN JSON EXTRACT\n  // Block for variable getter.\n  {\n    \"type\": \"variables_get\",\n    \"message0\": \"%1\",\n    \"args0\": [\n      {\n        \"type\": \"field_variable\",\n        \"name\": \"VAR\",\n        \"variable\": \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n      }\n    ],\n    \"output\": null,\n    \"style\": \"variable_blocks\",\n    \"helpUrl\": \"%{BKY_VARIABLES_GET_HELPURL}\",\n    \"tooltip\": \"%{BKY_VARIABLES_GET_TOOLTIP}\",\n    \"extensions\": [\"contextMenu_variableSetterGetter\"]\n  },\n  // Block for variable setter.\n  {\n    \"type\": \"variables_set\",\n    \"message0\": \"%{BKY_VARIABLES_SET}\",\n    \"args0\": [\n      {\n        \"type\": \"field_variable\",\n        \"name\": \"VAR\",\n        \"variable\": \"%{BKY_VARIABLES_DEFAULT_NAME}\"\n      },\n      {\n        \"type\": \"input_value\",\n        \"name\": \"VALUE\"\n      }\n    ],\n    \"previousStatement\": null,\n    \"nextStatement\": null,\n    \"style\": \"variable_blocks\",\n    \"tooltip\": \"%{BKY_VARIABLES_SET_TOOLTIP}\",\n    \"helpUrl\": \"%{BKY_VARIABLES_SET_HELPURL}\",\n    \"extensions\": [\"contextMenu_variableSetterGetter\"]\n  }\n]);  // END JSON EXTRACT (Do not delete this comment.)\n\n/**\n * Mixin to add context menu items to create getter/setter blocks for this\n * setter/getter.\n * Used by blocks 'variables_set' and 'variables_get'.\n * @mixin\n * @augments Blockly.Block\n * @package\n * @readonly\n */\nBlockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN = {\n  /**\n   * Add menu option to create getter/setter block for this setter/getter.\n   * @param {!Array} options List of menu options to add to.\n   * @this {Blockly.Block}\n   */\n  customContextMenu: function(options) {\n    if (!this.isInFlyout) {\n      // Getter blocks have the option to create a setter block, and vice versa.\n      if (this.type == 'variables_get') {\n        var opposite_type = 'variables_set';\n        var contextMenuMsg = Blockly.Msg['VARIABLES_GET_CREATE_SET'];\n      } else {\n        var opposite_type = 'variables_get';\n        var contextMenuMsg = Blockly.Msg['VARIABLES_SET_CREATE_GET'];\n      }\n\n      var option = {enabled: this.workspace.remainingCapacity() > 0};\n      var name = this.getField('VAR').getText();\n      option.text = contextMenuMsg.replace('%1', name);\n      var xmlField = Blockly.utils.xml.createElement('field');\n      xmlField.setAttribute('name', 'VAR');\n      xmlField.appendChild(Blockly.utils.xml.createTextNode(name));\n      var xmlBlock = Blockly.utils.xml.createElement('block');\n      xmlBlock.setAttribute('type', opposite_type);\n      xmlBlock.appendChild(xmlField);\n      option.callback = Blockly.ContextMenu.callbackFactory(this, xmlBlock);\n      options.push(option);\n      // Getter blocks have the option to rename or delete that variable.\n    } else {\n      if (this.type == 'variables_get' || this.type == 'variables_get_reporter') {\n        var renameOption = {\n          text: Blockly.Msg.RENAME_VARIABLE,\n          enabled: true,\n          callback: Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)\n        };\n        var name = this.getField('VAR').getText();\n        var deleteOption = {\n          text: Blockly.Msg.DELETE_VARIABLE.replace('%1', name),\n          enabled: true,\n          callback: Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)\n        };\n        options.unshift(renameOption);\n        options.unshift(deleteOption);\n      }\n    }\n  }\n};\n\n/**\n  * Callback for rename variable dropdown menu option associated with a\n  * variable getter block.\n  * @param {!Blockly.Block} block The block with the variable to rename.\n  * @return {!function()} A function that renames the variable.\n  */\nBlockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY = function(block) {\n  return function() {\n    var workspace = block.workspace;\n    var variable = block.getField('VAR').getVariable();\n    Blockly.Variables.renameVariable(workspace, variable);\n  };\n};\n\n/**\n * Callback for delete variable dropdown menu option associated with a\n * variable getter block.\n * @param {!Blockly.Block} block The block with the variable to delete.\n * @return {!function()} A function that deletes the variable.\n */\nBlockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY = function(block) {\n  return function() {\n    var workspace = block.workspace;\n    var variable = block.getField('VAR').getVariable();\n    workspace.deleteVariableById(variable.getId());\n    workspace.refreshToolboxSelection();\n  };\n};\n\nBlockly.Extensions.registerMixin('contextMenu_variableSetterGetter',\n    Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN);\n","/* eslint-disable */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) { // AMD\n    define(['./blocks_compressed'], factory);\n  } else if (typeof exports === 'object') { // Node.js\n    module.exports = factory(require('./blocks_compressed'));\n  } else { // Browser\n    root.Blockly.Blocks = factory(root.Blockly);\n  }\n}(this, function(Blockly) {\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly Blocks module.\n */\n\n/* eslint-disable */\n'use strict';\n\nBlockly.Blocks = {};\n\nreturn Blockly.Blocks;\n})); \n","/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for dynamic variable blocks.\n * @author fenichel@google.com (Rachel Fenichel)\n */\n'use strict';\n\ngoog.provide('Blockly.JavaScript.variablesDynamic');\n\ngoog.require('Blockly.JavaScript');\ngoog.require('Blockly.JavaScript.variables');\n\n\n// JavaScript is dynamically typed.\nBlockly.JavaScript['variables_get_dynamic'] =\n    Blockly.JavaScript['variables_get'];\nBlockly.JavaScript['variables_set_dynamic'] =\n    Blockly.JavaScript['variables_set'];\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Helper functions for generating JavaScript for blocks.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.JavaScript');\n\ngoog.require('Blockly.Generator');\ngoog.require('Blockly.utils.global');\ngoog.require('Blockly.utils.string');\n\n\n/**\n * JavaScript code generator.\n * @type {!Blockly.Generator}\n */\nBlockly.JavaScript = new Blockly.Generator('JavaScript');\n\n/**\n * List of illegal variable names.\n * This is not intended to be a security feature.  Blockly is 100% client-side,\n * so bypassing this list is trivial.  This is intended to prevent users from\n * accidentally clobbering a built-in object or function.\n * @private\n */\nBlockly.JavaScript.addReservedWords(\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#Keywords\n    'break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,' +\n    'enum,' +\n    'implements,interface,let,package,private,protected,public,static,' +\n    'await,' +\n    'null,true,false,' +\n    // Magic variable.\n    'arguments,' +\n    // Everything in the current environment (835 items in Chrome, 104 in Node).\n    Object.getOwnPropertyNames(Blockly.utils.global).join(','));\n\n/**\n * Order of operation ENUMs.\n * https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence\n */\nBlockly.JavaScript.ORDER_ATOMIC = 0;           // 0 \"\" ...\nBlockly.JavaScript.ORDER_NEW = 1.1;            // new\nBlockly.JavaScript.ORDER_MEMBER = 1.2;         // . []\nBlockly.JavaScript.ORDER_FUNCTION_CALL = 2;    // ()\nBlockly.JavaScript.ORDER_INCREMENT = 3;        // ++\nBlockly.JavaScript.ORDER_DECREMENT = 3;        // --\nBlockly.JavaScript.ORDER_BITWISE_NOT = 4.1;    // ~\nBlockly.JavaScript.ORDER_UNARY_PLUS = 4.2;     // +\nBlockly.JavaScript.ORDER_UNARY_NEGATION = 4.3; // -\nBlockly.JavaScript.ORDER_LOGICAL_NOT = 4.4;    // !\nBlockly.JavaScript.ORDER_TYPEOF = 4.5;         // typeof\nBlockly.JavaScript.ORDER_VOID = 4.6;           // void\nBlockly.JavaScript.ORDER_DELETE = 4.7;         // delete\nBlockly.JavaScript.ORDER_AWAIT = 4.8;          // await\nBlockly.JavaScript.ORDER_EXPONENTIATION = 5.0; // **\nBlockly.JavaScript.ORDER_MULTIPLICATION = 5.1; // *\nBlockly.JavaScript.ORDER_DIVISION = 5.2;       // /\nBlockly.JavaScript.ORDER_MODULUS = 5.3;        // %\nBlockly.JavaScript.ORDER_SUBTRACTION = 6.1;    // -\nBlockly.JavaScript.ORDER_ADDITION = 6.2;       // +\nBlockly.JavaScript.ORDER_BITWISE_SHIFT = 7;    // << >> >>>\nBlockly.JavaScript.ORDER_RELATIONAL = 8;       // < <= > >=\nBlockly.JavaScript.ORDER_IN = 8;               // in\nBlockly.JavaScript.ORDER_INSTANCEOF = 8;       // instanceof\nBlockly.JavaScript.ORDER_EQUALITY = 9;         // == != === !==\nBlockly.JavaScript.ORDER_BITWISE_AND = 10;     // &\nBlockly.JavaScript.ORDER_BITWISE_XOR = 11;     // ^\nBlockly.JavaScript.ORDER_BITWISE_OR = 12;      // |\nBlockly.JavaScript.ORDER_LOGICAL_AND = 13;     // &&\nBlockly.JavaScript.ORDER_LOGICAL_OR = 14;      // ||\nBlockly.JavaScript.ORDER_CONDITIONAL = 15;     // ?:\nBlockly.JavaScript.ORDER_ASSIGNMENT = 16;      // = += -= **= *= /= %= <<= >>= ...\nBlockly.JavaScript.ORDER_YIELD = 17;           // yield\nBlockly.JavaScript.ORDER_COMMA = 18;           // ,\nBlockly.JavaScript.ORDER_NONE = 99;            // (...)\n\n/**\n * List of outer-inner pairings that do NOT require parentheses.\n * @type {!Array.<!Array.<number>>}\n */\nBlockly.JavaScript.ORDER_OVERRIDES = [\n  // (foo()).bar -> foo().bar\n  // (foo())[0] -> foo()[0]\n  [Blockly.JavaScript.ORDER_FUNCTION_CALL, Blockly.JavaScript.ORDER_MEMBER],\n  // (foo())() -> foo()()\n  [Blockly.JavaScript.ORDER_FUNCTION_CALL, Blockly.JavaScript.ORDER_FUNCTION_CALL],\n  // (foo.bar).baz -> foo.bar.baz\n  // (foo.bar)[0] -> foo.bar[0]\n  // (foo[0]).bar -> foo[0].bar\n  // (foo[0])[1] -> foo[0][1]\n  [Blockly.JavaScript.ORDER_MEMBER, Blockly.JavaScript.ORDER_MEMBER],\n  // (foo.bar)() -> foo.bar()\n  // (foo[0])() -> foo[0]()\n  [Blockly.JavaScript.ORDER_MEMBER, Blockly.JavaScript.ORDER_FUNCTION_CALL],\n\n  // !(!foo) -> !!foo\n  [Blockly.JavaScript.ORDER_LOGICAL_NOT, Blockly.JavaScript.ORDER_LOGICAL_NOT],\n  // a * (b * c) -> a * b * c\n  [Blockly.JavaScript.ORDER_MULTIPLICATION, Blockly.JavaScript.ORDER_MULTIPLICATION],\n  // a + (b + c) -> a + b + c\n  [Blockly.JavaScript.ORDER_ADDITION, Blockly.JavaScript.ORDER_ADDITION],\n  // a && (b && c) -> a && b && c\n  [Blockly.JavaScript.ORDER_LOGICAL_AND, Blockly.JavaScript.ORDER_LOGICAL_AND],\n  // a || (b || c) -> a || b || c\n  [Blockly.JavaScript.ORDER_LOGICAL_OR, Blockly.JavaScript.ORDER_LOGICAL_OR]\n];\n\n/**\n * Initialise the database of variable names.\n * @param {!Blockly.Workspace} workspace Workspace to generate code from.\n */\nBlockly.JavaScript.init = function(workspace) {\n  // Create a dictionary of definitions to be printed before the code.\n  Blockly.JavaScript.definitions_ = Object.create(null);\n  // Create a dictionary mapping desired function names in definitions_\n  // to actual function names (to avoid collisions with user functions).\n  Blockly.JavaScript.functionNames_ = Object.create(null);\n\n  if (!Blockly.JavaScript.variableDB_) {\n    Blockly.JavaScript.variableDB_ =\n        new Blockly.Names(Blockly.JavaScript.RESERVED_WORDS_);\n  } else {\n    Blockly.JavaScript.variableDB_.reset();\n  }\n\n  Blockly.JavaScript.variableDB_.setVariableMap(workspace.getVariableMap());\n\n  var defvars = [];\n  // Add developer variables (not created or named by the user).\n  var devVarList = Blockly.Variables.allDeveloperVariables(workspace);\n  for (var i = 0; i < devVarList.length; i++) {\n    defvars.push(Blockly.JavaScript.variableDB_.getName(devVarList[i],\n        Blockly.Names.DEVELOPER_VARIABLE_TYPE));\n  }\n\n  // Add user variables, but only ones that are being used.\n  var variables = Blockly.Variables.allUsedVarModels(workspace);\n  for (var i = 0; i < variables.length; i++) {\n    defvars.push(Blockly.JavaScript.variableDB_.getName(variables[i].getId(),\n        Blockly.VARIABLE_CATEGORY_NAME));\n  }\n\n  // Declare all of the variables.\n  if (defvars.length) {\n    Blockly.JavaScript.definitions_['variables'] =\n        'var ' + defvars.join(', ') + ';';\n  }\n};\n\n/**\n * Prepend the generated code with the variable definitions.\n * @param {string} code Generated code.\n * @return {string} Completed code.\n */\nBlockly.JavaScript.finish = function(code) {\n  // Convert the definitions dictionary into a list.\n  var definitions = [];\n  for (var name in Blockly.JavaScript.definitions_) {\n    definitions.push(Blockly.JavaScript.definitions_[name]);\n  }\n  // Clean up temporary data.\n  delete Blockly.JavaScript.definitions_;\n  delete Blockly.JavaScript.functionNames_;\n  Blockly.JavaScript.variableDB_.reset();\n  return definitions.join('\\n\\n') + '\\n\\n\\n' + code;\n};\n\n/**\n * Naked values are top-level blocks with outputs that aren't plugged into\n * anything.  A trailing semicolon is needed to make this legal.\n * @param {string} line Line of generated code.\n * @return {string} Legal line of code.\n */\nBlockly.JavaScript.scrubNakedValue = function(line) {\n  return line + ';\\n';\n};\n\n/**\n * Encode a string as a properly escaped JavaScript string, complete with\n * quotes.\n * @param {string} string Text to encode.\n * @return {string} JavaScript string.\n * @private\n */\nBlockly.JavaScript.quote_ = function(string) {\n  // Can't use goog.string.quote since Google's style guide recommends\n  // JS string literals use single quotes.\n  string = string.replace(/\\\\/g, '\\\\\\\\')\n                 .replace(/\\n/g, '\\\\\\n')\n                 .replace(/'/g, '\\\\\\'');\n  return '\\'' + string + '\\'';\n};\n\n/**\n * Encode a string as a properly escaped multiline JavaScript string, complete\n * with quotes.\n * @param {string} string Text to encode.\n * @return {string} JavaScript string.\n * @private\n */\nBlockly.JavaScript.multiline_quote_ = function(string) {\n  // Can't use goog.string.quote since Google's style guide recommends\n  // JS string literals use single quotes.\n  var lines = string.split(/\\n/g).map(Blockly.JavaScript.quote_);\n  return lines.join(' + \\'\\\\n\\' +\\n');\n};\n\n/**\n * Common tasks for generating JavaScript from blocks.\n * Handles comments for the specified block and any connected value blocks.\n * Calls any statements following this block.\n * @param {!Blockly.Block} block The current block.\n * @param {string} code The JavaScript code created for this block.\n * @param {boolean=} opt_thisOnly True to generate code for only this statement.\n * @return {string} JavaScript code with comments and subsequent blocks added.\n * @private\n */\nBlockly.JavaScript.scrub_ = function(block, code, opt_thisOnly) {\n  var commentCode = '';\n  // Only collect comments for blocks that aren't inline.\n  if (!block.outputConnection || !block.outputConnection.targetConnection) {\n    // Collect comment for this block.\n    var comment = block.getCommentText();\n    if (comment) {\n      comment = Blockly.utils.string.wrap(comment,\n          Blockly.JavaScript.COMMENT_WRAP - 3);\n      commentCode += Blockly.JavaScript.prefixLines(comment + '\\n', '// ');\n    }\n    // Collect comments for all value arguments.\n    // Don't collect comments for nested statements.\n    for (var i = 0; i < block.inputList.length; i++) {\n      if (block.inputList[i].type == Blockly.INPUT_VALUE) {\n        var childBlock = block.inputList[i].connection.targetBlock();\n        if (childBlock) {\n          comment = Blockly.JavaScript.allNestedComments(childBlock);\n          if (comment) {\n            commentCode += Blockly.JavaScript.prefixLines(comment, '// ');\n          }\n        }\n      }\n    }\n  }\n  var nextBlock = block.nextConnection && block.nextConnection.targetBlock();\n  var nextCode = opt_thisOnly ? '' : Blockly.JavaScript.blockToCode(nextBlock);\n  return commentCode + code + nextCode;\n};\n\n/**\n * Gets a property and adjusts the value while taking into account indexing.\n * @param {!Blockly.Block} block The block.\n * @param {string} atId The property ID of the element to get.\n * @param {number=} opt_delta Value to add.\n * @param {boolean=} opt_negate Whether to negate the value.\n * @param {number=} opt_order The highest order acting on this value.\n * @return {string|number}\n */\nBlockly.JavaScript.getAdjusted = function(block, atId, opt_delta, opt_negate,\n    opt_order) {\n  var delta = opt_delta || 0;\n  var order = opt_order || Blockly.JavaScript.ORDER_NONE;\n  if (block.workspace.options.oneBasedIndex) {\n    delta--;\n  }\n  var defaultAtIndex = block.workspace.options.oneBasedIndex ? '1' : '0';\n  if (delta > 0) {\n    var at = Blockly.JavaScript.valueToCode(block, atId,\n        Blockly.JavaScript.ORDER_ADDITION) || defaultAtIndex;\n  } else if (delta < 0) {\n    var at = Blockly.JavaScript.valueToCode(block, atId,\n        Blockly.JavaScript.ORDER_SUBTRACTION) || defaultAtIndex;\n  } else if (opt_negate) {\n    var at = Blockly.JavaScript.valueToCode(block, atId,\n        Blockly.JavaScript.ORDER_UNARY_NEGATION) || defaultAtIndex;\n  } else {\n    var at = Blockly.JavaScript.valueToCode(block, atId, order) ||\n        defaultAtIndex;\n  }\n\n  if (Blockly.isNumber(at)) {\n    // If the index is a naked number, adjust it right now.\n    at = Number(at) + delta;\n    if (opt_negate) {\n      at = -at;\n    }\n  } else {\n    // If the index is dynamic, adjust it in code.\n    if (delta > 0) {\n      at = at + ' + ' + delta;\n      var innerOrder = Blockly.JavaScript.ORDER_ADDITION;\n    } else if (delta < 0) {\n      at = at + ' - ' + -delta;\n      var innerOrder = Blockly.JavaScript.ORDER_SUBTRACTION;\n    }\n    if (opt_negate) {\n      if (delta) {\n        at = '-(' + at + ')';\n      } else {\n        at = '-' + at;\n      }\n      var innerOrder = Blockly.JavaScript.ORDER_UNARY_NEGATION;\n    }\n    innerOrder = Math.floor(innerOrder);\n    order = Math.floor(order);\n    if (innerOrder && order >= innerOrder) {\n      at = '(' + at + ')';\n    }\n  }\n  return at;\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for colour blocks.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.JavaScript.colour');\n\ngoog.require('Blockly.JavaScript');\n\n\nBlockly.JavaScript['colour_picker'] = function(block) {\n  // Colour picker.\n  var code = Blockly.JavaScript.quote_(block.getFieldValue('COLOUR'));\n  return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n\nBlockly.JavaScript['colour_random'] = function(block) {\n  // Generate a random colour.\n  var functionName = Blockly.JavaScript.provideFunction_(\n      'colourRandom',\n      ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + '() {',\n        '  var num = Math.floor(Math.random() * Math.pow(2, 24));',\n        '  return \\'#\\' + (\\'00000\\' + num.toString(16)).substr(-6);',\n        '}']);\n  var code = functionName + '()';\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['colour_rgb'] = function(block) {\n  // Compose a colour from RGB components expressed as percentages.\n  var red = Blockly.JavaScript.valueToCode(block, 'RED',\n      Blockly.JavaScript.ORDER_COMMA) || 0;\n  var green = Blockly.JavaScript.valueToCode(block, 'GREEN',\n      Blockly.JavaScript.ORDER_COMMA) || 0;\n  var blue = Blockly.JavaScript.valueToCode(block, 'BLUE',\n      Blockly.JavaScript.ORDER_COMMA) || 0;\n  var functionName = Blockly.JavaScript.provideFunction_(\n      'colourRgb',\n      ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n          '(r, g, b) {',\n       '  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;',\n       '  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;',\n       '  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;',\n       '  r = (\\'0\\' + (Math.round(r) || 0).toString(16)).slice(-2);',\n       '  g = (\\'0\\' + (Math.round(g) || 0).toString(16)).slice(-2);',\n       '  b = (\\'0\\' + (Math.round(b) || 0).toString(16)).slice(-2);',\n       '  return \\'#\\' + r + g + b;',\n       '}']);\n  var code = functionName + '(' + red + ', ' + green + ', ' + blue + ')';\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['colour_blend'] = function(block) {\n  // Blend two colours together.\n  var c1 = Blockly.JavaScript.valueToCode(block, 'COLOUR1',\n      Blockly.JavaScript.ORDER_COMMA) || '\\'#000000\\'';\n  var c2 = Blockly.JavaScript.valueToCode(block, 'COLOUR2',\n      Blockly.JavaScript.ORDER_COMMA) || '\\'#000000\\'';\n  var ratio = Blockly.JavaScript.valueToCode(block, 'RATIO',\n      Blockly.JavaScript.ORDER_COMMA) || 0.5;\n  var functionName = Blockly.JavaScript.provideFunction_(\n      'colourBlend',\n      ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n          '(c1, c2, ratio) {',\n       '  ratio = Math.max(Math.min(Number(ratio), 1), 0);',\n       '  var r1 = parseInt(c1.substring(1, 3), 16);',\n       '  var g1 = parseInt(c1.substring(3, 5), 16);',\n       '  var b1 = parseInt(c1.substring(5, 7), 16);',\n       '  var r2 = parseInt(c2.substring(1, 3), 16);',\n       '  var g2 = parseInt(c2.substring(3, 5), 16);',\n       '  var b2 = parseInt(c2.substring(5, 7), 16);',\n       '  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);',\n       '  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);',\n       '  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);',\n       '  r = (\\'0\\' + (r || 0).toString(16)).slice(-2);',\n       '  g = (\\'0\\' + (g || 0).toString(16)).slice(-2);',\n       '  b = (\\'0\\' + (b || 0).toString(16)).slice(-2);',\n       '  return \\'#\\' + r + g + b;',\n       '}']);\n  var code = functionName + '(' + c1 + ', ' + c2 + ', ' + ratio + ')';\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for list blocks.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.JavaScript.lists');\n\ngoog.require('Blockly.JavaScript');\n\n\nBlockly.JavaScript['lists_create_empty'] = function(block) {\n  // Create an empty list.\n  return ['[]', Blockly.JavaScript.ORDER_ATOMIC];\n};\n\nBlockly.JavaScript['lists_create_with'] = function(block) {\n  // Create a list with any number of elements of any type.\n  var elements = new Array(block.itemCount_);\n  for (var i = 0; i < block.itemCount_; i++) {\n    elements[i] = Blockly.JavaScript.valueToCode(block, 'ADD' + i,\n        Blockly.JavaScript.ORDER_COMMA) || 'null';\n  }\n  var code = '[' + elements.join(', ') + ']';\n  return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n\nBlockly.JavaScript['lists_repeat'] = function(block) {\n  // Create a list with one element repeated.\n  var functionName = Blockly.JavaScript.provideFunction_(\n      'listsRepeat',\n      ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n          '(value, n) {',\n       '  var array = [];',\n       '  for (var i = 0; i < n; i++) {',\n       '    array[i] = value;',\n       '  }',\n       '  return array;',\n       '}']);\n  var element = Blockly.JavaScript.valueToCode(block, 'ITEM',\n      Blockly.JavaScript.ORDER_COMMA) || 'null';\n  var repeatCount = Blockly.JavaScript.valueToCode(block, 'NUM',\n      Blockly.JavaScript.ORDER_COMMA) || '0';\n  var code = functionName + '(' + element + ', ' + repeatCount + ')';\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['lists_length'] = function(block) {\n  // String or array length.\n  var list = Blockly.JavaScript.valueToCode(block, 'VALUE',\n      Blockly.JavaScript.ORDER_MEMBER) || '[]';\n  return [list + '.length', Blockly.JavaScript.ORDER_MEMBER];\n};\n\nBlockly.JavaScript['lists_isEmpty'] = function(block) {\n  // Is the string null or array empty?\n  var list = Blockly.JavaScript.valueToCode(block, 'VALUE',\n      Blockly.JavaScript.ORDER_MEMBER) || '[]';\n  return ['!' + list + '.length', Blockly.JavaScript.ORDER_LOGICAL_NOT];\n};\n\nBlockly.JavaScript['lists_indexOf'] = function(block) {\n  // Find an item in the list.\n  var operator = block.getFieldValue('END') == 'FIRST' ?\n      'indexOf' : 'lastIndexOf';\n  var item = Blockly.JavaScript.valueToCode(block, 'FIND',\n      Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n  var list = Blockly.JavaScript.valueToCode(block, 'VALUE',\n      Blockly.JavaScript.ORDER_MEMBER) || '[]';\n  var code = list + '.' + operator + '(' + item + ')';\n  if (block.workspace.options.oneBasedIndex) {\n    return [code + ' + 1', Blockly.JavaScript.ORDER_ADDITION];\n  }\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['lists_getIndex'] = function(block) {\n  // Get element at index.\n  // Note: Until January 2013 this block did not have MODE or WHERE inputs.\n  var mode = block.getFieldValue('MODE') || 'GET';\n  var where = block.getFieldValue('WHERE') || 'FROM_START';\n  var listOrder = (where == 'RANDOM') ? Blockly.JavaScript.ORDER_COMMA :\n      Blockly.JavaScript.ORDER_MEMBER;\n  var list = Blockly.JavaScript.valueToCode(block, 'VALUE', listOrder) || '[]';\n\n  switch (where) {\n    case ('FIRST'):\n      if (mode == 'GET') {\n        var code = list + '[0]';\n        return [code, Blockly.JavaScript.ORDER_MEMBER];\n      } else if (mode == 'GET_REMOVE') {\n        var code = list + '.shift()';\n        return [code, Blockly.JavaScript.ORDER_MEMBER];\n      } else if (mode == 'REMOVE') {\n        return list + '.shift();\\n';\n      }\n      break;\n    case ('LAST'):\n      if (mode == 'GET') {\n        var code = list + '.slice(-1)[0]';\n        return [code, Blockly.JavaScript.ORDER_MEMBER];\n      } else if (mode == 'GET_REMOVE') {\n        var code = list + '.pop()';\n        return [code, Blockly.JavaScript.ORDER_MEMBER];\n      } else if (mode == 'REMOVE') {\n        return list + '.pop();\\n';\n      }\n      break;\n    case ('FROM_START'):\n      var at = Blockly.JavaScript.getAdjusted(block, 'AT');\n      if (mode == 'GET') {\n        var code = list + '[' + at + ']';\n        return [code, Blockly.JavaScript.ORDER_MEMBER];\n      } else if (mode == 'GET_REMOVE') {\n        var code = list + '.splice(' + at + ', 1)[0]';\n        return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n      } else if (mode == 'REMOVE') {\n        return list + '.splice(' + at + ', 1);\\n';\n      }\n      break;\n    case ('FROM_END'):\n      var at = Blockly.JavaScript.getAdjusted(block, 'AT', 1, true);\n      if (mode == 'GET') {\n        var code = list + '.slice(' + at + ')[0]';\n        return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n      } else if (mode == 'GET_REMOVE') {\n        var code = list + '.splice(' + at + ', 1)[0]';\n        return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n      } else if (mode == 'REMOVE') {\n        return list + '.splice(' + at + ', 1);';\n      }\n      break;\n    case ('RANDOM'):\n      var functionName = Blockly.JavaScript.provideFunction_(\n          'listsGetRandomItem',\n          ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n              '(list, remove) {',\n           '  var x = Math.floor(Math.random() * list.length);',\n           '  if (remove) {',\n           '    return list.splice(x, 1)[0];',\n           '  } else {',\n           '    return list[x];',\n           '  }',\n           '}']);\n      code = functionName + '(' + list + ', ' + (mode != 'GET') + ')';\n      if (mode == 'GET' || mode == 'GET_REMOVE') {\n        return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n      } else if (mode == 'REMOVE') {\n        return code + ';\\n';\n      }\n      break;\n  }\n  throw Error('Unhandled combination (lists_getIndex).');\n};\n\nBlockly.JavaScript['lists_setIndex'] = function(block) {\n  // Set element at index.\n  // Note: Until February 2013 this block did not have MODE or WHERE inputs.\n  var list = Blockly.JavaScript.valueToCode(block, 'LIST',\n      Blockly.JavaScript.ORDER_MEMBER) || '[]';\n  var mode = block.getFieldValue('MODE') || 'GET';\n  var where = block.getFieldValue('WHERE') || 'FROM_START';\n  var value = Blockly.JavaScript.valueToCode(block, 'TO',\n      Blockly.JavaScript.ORDER_ASSIGNMENT) || 'null';\n  // Cache non-trivial values to variables to prevent repeated look-ups.\n  // Closure, which accesses and modifies 'list'.\n  function cacheList() {\n    if (list.match(/^\\w+$/)) {\n      return '';\n    }\n    var listVar = Blockly.JavaScript.variableDB_.getDistinctName(\n        'tmpList', Blockly.VARIABLE_CATEGORY_NAME);\n    var code = 'var ' + listVar + ' = ' + list + ';\\n';\n    list = listVar;\n    return code;\n  }\n  switch (where) {\n    case ('FIRST'):\n      if (mode == 'SET') {\n        return list + '[0] = ' + value + ';\\n';\n      } else if (mode == 'INSERT') {\n        return list + '.unshift(' + value + ');\\n';\n      }\n      break;\n    case ('LAST'):\n      if (mode == 'SET') {\n        var code = cacheList();\n        code += list + '[' + list + '.length - 1] = ' + value + ';\\n';\n        return code;\n      } else if (mode == 'INSERT') {\n        return list + '.push(' + value + ');\\n';\n      }\n      break;\n    case ('FROM_START'):\n      var at = Blockly.JavaScript.getAdjusted(block, 'AT');\n      if (mode == 'SET') {\n        return list + '[' + at + '] = ' + value + ';\\n';\n      } else if (mode == 'INSERT') {\n        return list + '.splice(' + at + ', 0, ' + value + ');\\n';\n      }\n      break;\n    case ('FROM_END'):\n      var at = Blockly.JavaScript.getAdjusted(block, 'AT', 1, false,\n          Blockly.JavaScript.ORDER_SUBTRACTION);\n      var code = cacheList();\n      if (mode == 'SET') {\n        code += list + '[' + list + '.length - ' + at + '] = ' + value + ';\\n';\n        return code;\n      } else if (mode == 'INSERT') {\n        code += list + '.splice(' + list + '.length - ' + at + ', 0, ' + value +\n            ');\\n';\n        return code;\n      }\n      break;\n    case ('RANDOM'):\n      var code = cacheList();\n      var xVar = Blockly.JavaScript.variableDB_.getDistinctName(\n          'tmpX', Blockly.VARIABLE_CATEGORY_NAME);\n      code += 'var ' + xVar + ' = Math.floor(Math.random() * ' + list +\n          '.length);\\n';\n      if (mode == 'SET') {\n        code += list + '[' + xVar + '] = ' + value + ';\\n';\n        return code;\n      } else if (mode == 'INSERT') {\n        code += list + '.splice(' + xVar + ', 0, ' + value + ');\\n';\n        return code;\n      }\n      break;\n  }\n  throw Error('Unhandled combination (lists_setIndex).');\n};\n\n/**\n * Returns an expression calculating the index into a list.\n * @param {string} listName Name of the list, used to calculate length.\n * @param {string} where The method of indexing, selected by dropdown in Blockly\n * @param {string=} opt_at The optional offset when indexing from start/end.\n * @return {string|undefined} Index expression.\n * @private\n */\nBlockly.JavaScript.lists.getIndex_ = function(listName, where, opt_at) {\n  if (where == 'FIRST') {\n    return '0';\n  } else if (where == 'FROM_END') {\n    return listName + '.length - 1 - ' + opt_at;\n  } else if (where == 'LAST') {\n    return listName + '.length - 1';\n  } else {\n    return opt_at;\n  }\n};\n\nBlockly.JavaScript['lists_getSublist'] = function(block) {\n  // Get sublist.\n  var list = Blockly.JavaScript.valueToCode(block, 'LIST',\n      Blockly.JavaScript.ORDER_MEMBER) || '[]';\n  var where1 = block.getFieldValue('WHERE1');\n  var where2 = block.getFieldValue('WHERE2');\n  if (where1 == 'FIRST' && where2 == 'LAST') {\n    var code = list + '.slice(0)';\n  } else if (list.match(/^\\w+$/) ||\n      (where1 != 'FROM_END' && where2 == 'FROM_START')) {\n    // If the list is a variable or doesn't require a call for length, don't\n    // generate a helper function.\n    switch (where1) {\n      case 'FROM_START':\n        var at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n        break;\n      case 'FROM_END':\n        var at1 = Blockly.JavaScript.getAdjusted(block, 'AT1', 1, false,\n            Blockly.JavaScript.ORDER_SUBTRACTION);\n        at1 = list + '.length - ' + at1;\n        break;\n      case 'FIRST':\n        var at1 = '0';\n        break;\n      default:\n        throw Error('Unhandled option (lists_getSublist).');\n    }\n    switch (where2) {\n      case 'FROM_START':\n        var at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 1);\n        break;\n      case 'FROM_END':\n        var at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 0, false,\n            Blockly.JavaScript.ORDER_SUBTRACTION);\n        at2 = list + '.length - ' + at2;\n        break;\n      case 'LAST':\n        var at2 = list + '.length';\n        break;\n      default:\n        throw Error('Unhandled option (lists_getSublist).');\n    }\n    code = list + '.slice(' + at1 + ', ' + at2 + ')';\n  } else {\n    var at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n    var at2 = Blockly.JavaScript.getAdjusted(block, 'AT2');\n    var getIndex_ = Blockly.JavaScript.lists.getIndex_;\n    var wherePascalCase = {'FIRST': 'First', 'LAST': 'Last',\n        'FROM_START': 'FromStart', 'FROM_END': 'FromEnd'};\n    var functionName = Blockly.JavaScript.provideFunction_(\n        'subsequence' + wherePascalCase[where1] + wherePascalCase[where2],\n        ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n            '(sequence' +\n            // The value for 'FROM_END' and'FROM_START' depends on `at` so\n            // we add it as a parameter.\n            ((where1 == 'FROM_END' || where1 == 'FROM_START') ? ', at1' : '') +\n            ((where2 == 'FROM_END' || where2 == 'FROM_START') ? ', at2' : '') +\n            ') {',\n          '  var start = ' + getIndex_('sequence', where1, 'at1') + ';',\n          '  var end = ' + getIndex_('sequence', where2, 'at2') + ' + 1;',\n          '  return sequence.slice(start, end);',\n          '}']);\n    var code = functionName + '(' + list +\n        // The value for 'FROM_END' and 'FROM_START' depends on `at` so we\n        // pass it.\n        ((where1 == 'FROM_END' || where1 == 'FROM_START') ? ', ' + at1 : '') +\n        ((where2 == 'FROM_END' || where2 == 'FROM_START') ? ', ' + at2 : '') +\n        ')';\n  }\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['lists_sort'] = function(block) {\n  // Block for sorting a list.\n  var list = Blockly.JavaScript.valueToCode(block, 'LIST',\n      Blockly.JavaScript.ORDER_FUNCTION_CALL) || '[]';\n  var direction = block.getFieldValue('DIRECTION') === '1' ? 1 : -1;\n  var type = block.getFieldValue('TYPE');\n  var getCompareFunctionName = Blockly.JavaScript.provideFunction_(\n      'listsGetSortCompare',\n      ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n          '(type, direction) {',\n       '  var compareFuncs = {',\n       '    \"NUMERIC\": function(a, b) {',\n       '        return Number(a) - Number(b); },',\n       '    \"TEXT\": function(a, b) {',\n       '        return a.toString() > b.toString() ? 1 : -1; },',\n       '    \"IGNORE_CASE\": function(a, b) {',\n       '        return a.toString().toLowerCase() > ' +\n          'b.toString().toLowerCase() ? 1 : -1; },',\n       '  };',\n       '  var compare = compareFuncs[type];',\n       '  return function(a, b) { return compare(a, b) * direction; }',\n       '}']);\n  return [list + '.slice().sort(' +\n      getCompareFunctionName + '(\"' + type + '\", ' + direction + '))',\n      Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['lists_split'] = function(block) {\n  // Block for splitting text into a list, or joining a list into text.\n  var input = Blockly.JavaScript.valueToCode(block, 'INPUT',\n      Blockly.JavaScript.ORDER_MEMBER);\n  var delimiter = Blockly.JavaScript.valueToCode(block, 'DELIM',\n      Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n  var mode = block.getFieldValue('MODE');\n  if (mode == 'SPLIT') {\n    if (!input) {\n      input = '\\'\\'';\n    }\n    var functionName = 'split';\n  } else if (mode == 'JOIN') {\n    if (!input) {\n      input = '[]';\n    }\n    var functionName = 'join';\n  } else {\n    throw Error('Unknown mode: ' + mode);\n  }\n  var code = input + '.' + functionName + '(' + delimiter + ')';\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['lists_reverse'] = function(block) {\n  // Block for reversing a list.\n  var list = Blockly.JavaScript.valueToCode(block, 'LIST',\n      Blockly.JavaScript.ORDER_FUNCTION_CALL) || '[]';\n  var code = list + '.slice().reverse()';\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for logic blocks.\n * @author q.neutron@gmail.com (Quynh Neutron)\n */\n'use strict';\n\ngoog.provide('Blockly.JavaScript.logic');\n\ngoog.require('Blockly.JavaScript');\n\n\nBlockly.JavaScript['controls_if'] = function(block) {\n  // If/elseif/else condition.\n  var n = 0;\n  var code = '', branchCode, conditionCode;\n  if (Blockly.JavaScript.STATEMENT_PREFIX) {\n    // Automatic prefix insertion is switched off for this block.  Add manually.\n    code += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX,\n        block);\n  }\n  do {\n    conditionCode = Blockly.JavaScript.valueToCode(block, 'IF' + n,\n        Blockly.JavaScript.ORDER_NONE) || 'false';\n    branchCode = Blockly.JavaScript.statementToCode(block, 'DO' + n);\n    if (Blockly.JavaScript.STATEMENT_SUFFIX) {\n      branchCode = Blockly.JavaScript.prefixLines(\n          Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX,\n          block), Blockly.JavaScript.INDENT) + branchCode;\n    }\n    code += (n > 0 ? ' else ' : '') +\n        'if (' + conditionCode + ') {\\n' + branchCode + '}';\n    ++n;\n  } while (block.getInput('IF' + n));\n\n  if (block.getInput('ELSE') || Blockly.JavaScript.STATEMENT_SUFFIX) {\n    branchCode = Blockly.JavaScript.statementToCode(block, 'ELSE');\n    if (Blockly.JavaScript.STATEMENT_SUFFIX) {\n      branchCode = Blockly.JavaScript.prefixLines(\n          Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX,\n          block), Blockly.JavaScript.INDENT) + branchCode;\n    }\n    code += ' else {\\n' + branchCode + '}';\n  }\n  return code + '\\n';\n};\n\nBlockly.JavaScript['controls_ifelse'] = Blockly.JavaScript['controls_if'];\n\nBlockly.JavaScript['logic_compare'] = function(block) {\n  // Comparison operator.\n  var OPERATORS = {\n    'EQ': '==',\n    'NEQ': '!=',\n    'LT': '<',\n    'LTE': '<=',\n    'GT': '>',\n    'GTE': '>='\n  };\n  var operator = OPERATORS[block.getFieldValue('OP')];\n  var order = (operator == '==' || operator == '!=') ?\n      Blockly.JavaScript.ORDER_EQUALITY : Blockly.JavaScript.ORDER_RELATIONAL;\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'A', order) || '0';\n  var argument1 = Blockly.JavaScript.valueToCode(block, 'B', order) || '0';\n  var code = argument0 + ' ' + operator + ' ' + argument1;\n  return [code, order];\n};\n\nBlockly.JavaScript['logic_operation'] = function(block) {\n  // Operations 'and', 'or'.\n  var operator = (block.getFieldValue('OP') == 'AND') ? '&&' : '||';\n  var order = (operator == '&&') ? Blockly.JavaScript.ORDER_LOGICAL_AND :\n      Blockly.JavaScript.ORDER_LOGICAL_OR;\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'A', order);\n  var argument1 = Blockly.JavaScript.valueToCode(block, 'B', order);\n  if (!argument0 && !argument1) {\n    // If there are no arguments, then the return value is false.\n    argument0 = 'false';\n    argument1 = 'false';\n  } else {\n    // Single missing arguments have no effect on the return value.\n    var defaultArgument = (operator == '&&') ? 'true' : 'false';\n    if (!argument0) {\n      argument0 = defaultArgument;\n    }\n    if (!argument1) {\n      argument1 = defaultArgument;\n    }\n  }\n  var code = argument0 + ' ' + operator + ' ' + argument1;\n  return [code, order];\n};\n\nBlockly.JavaScript['logic_negate'] = function(block) {\n  // Negation.\n  var order = Blockly.JavaScript.ORDER_LOGICAL_NOT;\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'BOOL', order) ||\n      'true';\n  var code = '!' + argument0;\n  return [code, order];\n};\n\nBlockly.JavaScript['logic_boolean'] = function(block) {\n  // Boolean values true and false.\n  var code = (block.getFieldValue('BOOL') == 'TRUE') ? 'true' : 'false';\n  return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n\nBlockly.JavaScript['logic_null'] = function(block) {\n  // Null data type.\n  return ['null', Blockly.JavaScript.ORDER_ATOMIC];\n};\n\nBlockly.JavaScript['logic_ternary'] = function(block) {\n  // Ternary operator.\n  var value_if = Blockly.JavaScript.valueToCode(block, 'IF',\n      Blockly.JavaScript.ORDER_CONDITIONAL) || 'false';\n  var value_then = Blockly.JavaScript.valueToCode(block, 'THEN',\n      Blockly.JavaScript.ORDER_CONDITIONAL) || 'null';\n  var value_else = Blockly.JavaScript.valueToCode(block, 'ELSE',\n      Blockly.JavaScript.ORDER_CONDITIONAL) || 'null';\n  var code = value_if + ' ? ' + value_then + ' : ' + value_else;\n  return [code, Blockly.JavaScript.ORDER_CONDITIONAL];\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for loop blocks.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.JavaScript.loops');\n\ngoog.require('Blockly.JavaScript');\n\n\nBlockly.JavaScript['controls_repeat_ext'] = function(block) {\n  // Repeat n times.\n  if (block.getField('TIMES')) {\n    // Internal number.\n    var repeats = String(Number(block.getFieldValue('TIMES')));\n  } else {\n    // External number.\n    var repeats = Blockly.JavaScript.valueToCode(block, 'TIMES',\n        Blockly.JavaScript.ORDER_ASSIGNMENT) || '0';\n  }\n  var branch = Blockly.JavaScript.statementToCode(block, 'DO');\n  branch = Blockly.JavaScript.addLoopTrap(branch, block);\n  var code = '';\n  var loopVar = Blockly.JavaScript.variableDB_.getDistinctName(\n      'count', Blockly.VARIABLE_CATEGORY_NAME);\n  var endVar = repeats;\n  if (!repeats.match(/^\\w+$/) && !Blockly.isNumber(repeats)) {\n    endVar = Blockly.JavaScript.variableDB_.getDistinctName(\n        'repeat_end', Blockly.VARIABLE_CATEGORY_NAME);\n    code += 'var ' + endVar + ' = ' + repeats + ';\\n';\n  }\n  code += 'for (var ' + loopVar + ' = 0; ' +\n      loopVar + ' < ' + endVar + '; ' +\n      loopVar + '++) {\\n' +\n      branch + '}\\n';\n  return code;\n};\n\nBlockly.JavaScript['controls_repeat'] =\n    Blockly.JavaScript['controls_repeat_ext'];\n\nBlockly.JavaScript['controls_whileUntil'] = function(block) {\n  // Do while/until loop.\n  var until = block.getFieldValue('MODE') == 'UNTIL';\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'BOOL',\n      until ? Blockly.JavaScript.ORDER_LOGICAL_NOT :\n      Blockly.JavaScript.ORDER_NONE) || 'false';\n  var branch = Blockly.JavaScript.statementToCode(block, 'DO');\n  branch = Blockly.JavaScript.addLoopTrap(branch, block);\n  if (until) {\n    argument0 = '!' + argument0;\n  }\n  return 'while (' + argument0 + ') {\\n' + branch + '}\\n';\n};\n\nBlockly.JavaScript['controls_for'] = function(block) {\n  // For loop.\n  var variable0 = Blockly.JavaScript.variableDB_.getName(\n      block.getFieldValue('VAR'), Blockly.VARIABLE_CATEGORY_NAME);\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'FROM',\n      Blockly.JavaScript.ORDER_ASSIGNMENT) || '0';\n  var argument1 = Blockly.JavaScript.valueToCode(block, 'TO',\n      Blockly.JavaScript.ORDER_ASSIGNMENT) || '0';\n  var increment = Blockly.JavaScript.valueToCode(block, 'BY',\n      Blockly.JavaScript.ORDER_ASSIGNMENT) || '1';\n  var branch = Blockly.JavaScript.statementToCode(block, 'DO');\n  branch = Blockly.JavaScript.addLoopTrap(branch, block);\n  var code;\n  if (Blockly.isNumber(argument0) && Blockly.isNumber(argument1) &&\n      Blockly.isNumber(increment)) {\n    // All arguments are simple numbers.\n    var up = Number(argument0) <= Number(argument1);\n    code = 'for (' + variable0 + ' = ' + argument0 + '; ' +\n        variable0 + (up ? ' <= ' : ' >= ') + argument1 + '; ' +\n        variable0;\n    var step = Math.abs(Number(increment));\n    if (step == 1) {\n      code += up ? '++' : '--';\n    } else {\n      code += (up ? ' += ' : ' -= ') + step;\n    }\n    code += ') {\\n' + branch + '}\\n';\n  } else {\n    code = '';\n    // Cache non-trivial values to variables to prevent repeated look-ups.\n    var startVar = argument0;\n    if (!argument0.match(/^\\w+$/) && !Blockly.isNumber(argument0)) {\n      startVar = Blockly.JavaScript.variableDB_.getDistinctName(\n          variable0 + '_start', Blockly.VARIABLE_CATEGORY_NAME);\n      code += 'var ' + startVar + ' = ' + argument0 + ';\\n';\n    }\n    var endVar = argument1;\n    if (!argument1.match(/^\\w+$/) && !Blockly.isNumber(argument1)) {\n      endVar = Blockly.JavaScript.variableDB_.getDistinctName(\n          variable0 + '_end', Blockly.VARIABLE_CATEGORY_NAME);\n      code += 'var ' + endVar + ' = ' + argument1 + ';\\n';\n    }\n    // Determine loop direction at start, in case one of the bounds\n    // changes during loop execution.\n    var incVar = Blockly.JavaScript.variableDB_.getDistinctName(\n        variable0 + '_inc', Blockly.VARIABLE_CATEGORY_NAME);\n    code += 'var ' + incVar + ' = ';\n    if (Blockly.isNumber(increment)) {\n      code += Math.abs(increment) + ';\\n';\n    } else {\n      code += 'Math.abs(' + increment + ');\\n';\n    }\n    code += 'if (' + startVar + ' > ' + endVar + ') {\\n';\n    code += Blockly.JavaScript.INDENT + incVar + ' = -' + incVar + ';\\n';\n    code += '}\\n';\n    code += 'for (' + variable0 + ' = ' + startVar + '; ' +\n        incVar + ' >= 0 ? ' +\n        variable0 + ' <= ' + endVar + ' : ' +\n        variable0 + ' >= ' + endVar + '; ' +\n        variable0 + ' += ' + incVar + ') {\\n' +\n        branch + '}\\n';\n  }\n  return code;\n};\n\nBlockly.JavaScript['controls_forEach'] = function(block) {\n  // For each loop.\n  var variable0 = Blockly.JavaScript.variableDB_.getName(\n      block.getFieldValue('VAR'), Blockly.VARIABLE_CATEGORY_NAME);\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'LIST',\n      Blockly.JavaScript.ORDER_ASSIGNMENT) || '[]';\n  var branch = Blockly.JavaScript.statementToCode(block, 'DO');\n  branch = Blockly.JavaScript.addLoopTrap(branch, block);\n  var code = '';\n  // Cache non-trivial values to variables to prevent repeated look-ups.\n  var listVar = argument0;\n  if (!argument0.match(/^\\w+$/)) {\n    listVar = Blockly.JavaScript.variableDB_.getDistinctName(\n        variable0 + '_list', Blockly.VARIABLE_CATEGORY_NAME);\n    code += 'var ' + listVar + ' = ' + argument0 + ';\\n';\n  }\n  var indexVar = Blockly.JavaScript.variableDB_.getDistinctName(\n      variable0 + '_index', Blockly.VARIABLE_CATEGORY_NAME);\n  branch = Blockly.JavaScript.INDENT + variable0 + ' = ' +\n      listVar + '[' + indexVar + '];\\n' + branch;\n  code += 'for (var ' + indexVar + ' in ' + listVar + ') {\\n' + branch + '}\\n';\n  return code;\n};\n\nBlockly.JavaScript['controls_flow_statements'] = function(block) {\n  // Flow statements: continue, break.\n  var xfix = '';\n  if (Blockly.JavaScript.STATEMENT_PREFIX) {\n    // Automatic prefix insertion is switched off for this block.  Add manually.\n    xfix += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX,\n        block);\n  }\n  if (Blockly.JavaScript.STATEMENT_SUFFIX) {\n    // Inject any statement suffix here since the regular one at the end\n    // will not get executed if the break/continue is triggered.\n    xfix += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX,\n        block);\n  }\n  if (Blockly.JavaScript.STATEMENT_PREFIX) {\n    var loop = Blockly.Constants.Loops\n        .CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(block);\n    if (loop && !loop.suppressPrefixSuffix) {\n      // Inject loop's statement prefix here since the regular one at the end\n      // of the loop will not get executed if 'continue' is triggered.\n      // In the case of 'break', a prefix is needed due to the loop's suffix.\n      xfix += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX,\n          loop);\n    }\n  }\n  switch (block.getFieldValue('FLOW')) {\n    case 'BREAK':\n      return xfix + 'break;\\n';\n    case 'CONTINUE':\n      return xfix + 'continue;\\n';\n  }\n  throw Error('Unknown flow statement.');\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for math blocks.\n * @author q.neutron@gmail.com (Quynh Neutron)\n */\n'use strict';\n\ngoog.provide('Blockly.JavaScript.math');\n\ngoog.require('Blockly.JavaScript');\n\n\nBlockly.JavaScript['math_number'] = function(block) {\n  // Numeric value.\n  var code = Number(block.getFieldValue('NUM'));\n  var order = code >= 0 ? Blockly.JavaScript.ORDER_ATOMIC :\n              Blockly.JavaScript.ORDER_UNARY_NEGATION;\n  return [code, order];\n};\n\nBlockly.JavaScript['math_arithmetic'] = function(block) {\n  // Basic arithmetic operators, and power.\n  var OPERATORS = {\n    'ADD': [' + ', Blockly.JavaScript.ORDER_ADDITION],\n    'MINUS': [' - ', Blockly.JavaScript.ORDER_SUBTRACTION],\n    'MULTIPLY': [' * ', Blockly.JavaScript.ORDER_MULTIPLICATION],\n    'DIVIDE': [' / ', Blockly.JavaScript.ORDER_DIVISION],\n    'POWER': [null, Blockly.JavaScript.ORDER_COMMA]  // Handle power separately.\n  };\n  var tuple = OPERATORS[block.getFieldValue('OP')];\n  var operator = tuple[0];\n  var order = tuple[1];\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'A', order) || '0';\n  var argument1 = Blockly.JavaScript.valueToCode(block, 'B', order) || '0';\n  var code;\n  // Power in JavaScript requires a special case since it has no operator.\n  if (!operator) {\n    code = 'Math.pow(' + argument0 + ', ' + argument1 + ')';\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  }\n  code = argument0 + operator + argument1;\n  return [code, order];\n};\n\nBlockly.JavaScript['math_single'] = function(block) {\n  // Math operators with single operand.\n  var operator = block.getFieldValue('OP');\n  var code;\n  var arg;\n  if (operator == 'NEG') {\n    // Negation is a special case given its different operator precedence.\n    arg = Blockly.JavaScript.valueToCode(block, 'NUM',\n        Blockly.JavaScript.ORDER_UNARY_NEGATION) || '0';\n    if (arg[0] == '-') {\n      // --3 is not legal in JS.\n      arg = ' ' + arg;\n    }\n    code = '-' + arg;\n    return [code, Blockly.JavaScript.ORDER_UNARY_NEGATION];\n  }\n  if (operator == 'SIN' || operator == 'COS' || operator == 'TAN') {\n    arg = Blockly.JavaScript.valueToCode(block, 'NUM',\n        Blockly.JavaScript.ORDER_DIVISION) || '0';\n  } else {\n    arg = Blockly.JavaScript.valueToCode(block, 'NUM',\n        Blockly.JavaScript.ORDER_NONE) || '0';\n  }\n  // First, handle cases which generate values that don't need parentheses\n  // wrapping the code.\n  switch (operator) {\n    case 'ABS':\n      code = 'Math.abs(' + arg + ')';\n      break;\n    case 'ROOT':\n      code = 'Math.sqrt(' + arg + ')';\n      break;\n    case 'LN':\n      code = 'Math.log(' + arg + ')';\n      break;\n    case 'EXP':\n      code = 'Math.exp(' + arg + ')';\n      break;\n    case 'POW10':\n      code = 'Math.pow(10,' + arg + ')';\n      break;\n    case 'ROUND':\n      code = 'Math.round(' + arg + ')';\n      break;\n    case 'ROUNDUP':\n      code = 'Math.ceil(' + arg + ')';\n      break;\n    case 'ROUNDDOWN':\n      code = 'Math.floor(' + arg + ')';\n      break;\n    case 'SIN':\n      code = 'Math.sin(' + arg + ' / 180 * Math.PI)';\n      break;\n    case 'COS':\n      code = 'Math.cos(' + arg + ' / 180 * Math.PI)';\n      break;\n    case 'TAN':\n      code = 'Math.tan(' + arg + ' / 180 * Math.PI)';\n      break;\n  }\n  if (code) {\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  }\n  // Second, handle cases which generate values that may need parentheses\n  // wrapping the code.\n  switch (operator) {\n    case 'LOG10':\n      code = 'Math.log(' + arg + ') / Math.log(10)';\n      break;\n    case 'ASIN':\n      code = 'Math.asin(' + arg + ') / Math.PI * 180';\n      break;\n    case 'ACOS':\n      code = 'Math.acos(' + arg + ') / Math.PI * 180';\n      break;\n    case 'ATAN':\n      code = 'Math.atan(' + arg + ') / Math.PI * 180';\n      break;\n    default:\n      throw Error('Unknown math operator: ' + operator);\n  }\n  return [code, Blockly.JavaScript.ORDER_DIVISION];\n};\n\nBlockly.JavaScript['math_constant'] = function(block) {\n  // Constants: PI, E, the Golden Ratio, sqrt(2), 1/sqrt(2), INFINITY.\n  var CONSTANTS = {\n    'PI': ['Math.PI', Blockly.JavaScript.ORDER_MEMBER],\n    'E': ['Math.E', Blockly.JavaScript.ORDER_MEMBER],\n    'GOLDEN_RATIO':\n        ['(1 + Math.sqrt(5)) / 2', Blockly.JavaScript.ORDER_DIVISION],\n    'SQRT2': ['Math.SQRT2', Blockly.JavaScript.ORDER_MEMBER],\n    'SQRT1_2': ['Math.SQRT1_2', Blockly.JavaScript.ORDER_MEMBER],\n    'INFINITY': ['Infinity', Blockly.JavaScript.ORDER_ATOMIC]\n  };\n  return CONSTANTS[block.getFieldValue('CONSTANT')];\n};\n\nBlockly.JavaScript['math_number_property'] = function(block) {\n  // Check if a number is even, odd, prime, whole, positive, or negative\n  // or if it is divisible by certain number. Returns true or false.\n  var number_to_check = Blockly.JavaScript.valueToCode(block, 'NUMBER_TO_CHECK',\n      Blockly.JavaScript.ORDER_MODULUS) || '0';\n  var dropdown_property = block.getFieldValue('PROPERTY');\n  var code;\n  if (dropdown_property == 'PRIME') {\n    // Prime is a special case as it is not a one-liner test.\n    var functionName = Blockly.JavaScript.provideFunction_(\n        'mathIsPrime',\n        ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ + '(n) {',\n         '  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods',\n         '  if (n == 2 || n == 3) {',\n         '    return true;',\n         '  }',\n         '  // False if n is NaN, negative, is 1, or not whole.',\n         '  // And false if n is divisible by 2 or 3.',\n         '  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 ||' +\n            ' n % 3 == 0) {',\n         '    return false;',\n         '  }',\n         '  // Check all the numbers of form 6k +/- 1, up to sqrt(n).',\n         '  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {',\n         '    if (n % (x - 1) == 0 || n % (x + 1) == 0) {',\n         '      return false;',\n         '    }',\n         '  }',\n         '  return true;',\n         '}']);\n    code = functionName + '(' + number_to_check + ')';\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  }\n  switch (dropdown_property) {\n    case 'EVEN':\n      code = number_to_check + ' % 2 == 0';\n      break;\n    case 'ODD':\n      code = number_to_check + ' % 2 == 1';\n      break;\n    case 'WHOLE':\n      code = number_to_check + ' % 1 == 0';\n      break;\n    case 'POSITIVE':\n      code = number_to_check + ' > 0';\n      break;\n    case 'NEGATIVE':\n      code = number_to_check + ' < 0';\n      break;\n    case 'DIVISIBLE_BY':\n      var divisor = Blockly.JavaScript.valueToCode(block, 'DIVISOR',\n          Blockly.JavaScript.ORDER_MODULUS) || '0';\n      code = number_to_check + ' % ' + divisor + ' == 0';\n      break;\n  }\n  return [code, Blockly.JavaScript.ORDER_EQUALITY];\n};\n\nBlockly.JavaScript['math_change'] = function(block) {\n  // Add to a variable in place.\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'DELTA',\n      Blockly.JavaScript.ORDER_ADDITION) || '0';\n  var varName = Blockly.JavaScript.variableDB_.getName(\n      block.getFieldValue('VAR'), Blockly.VARIABLE_CATEGORY_NAME);\n  return varName + ' = (typeof ' + varName + ' == \\'number\\' ? ' + varName +\n      ' : 0) + ' + argument0 + ';\\n';\n};\n\n// Rounding functions have a single operand.\nBlockly.JavaScript['math_round'] = Blockly.JavaScript['math_single'];\n// Trigonometry functions have a single operand.\nBlockly.JavaScript['math_trig'] = Blockly.JavaScript['math_single'];\n\nBlockly.JavaScript['math_on_list'] = function(block) {\n  // Math functions for lists.\n  var func = block.getFieldValue('OP');\n  var list, code;\n  switch (func) {\n    case 'SUM':\n      list = Blockly.JavaScript.valueToCode(block, 'LIST',\n          Blockly.JavaScript.ORDER_MEMBER) || '[]';\n      code = list + '.reduce(function(x, y) {return x + y;})';\n      break;\n    case 'MIN':\n      list = Blockly.JavaScript.valueToCode(block, 'LIST',\n          Blockly.JavaScript.ORDER_COMMA) || '[]';\n      code = 'Math.min.apply(null, ' + list + ')';\n      break;\n    case 'MAX':\n      list = Blockly.JavaScript.valueToCode(block, 'LIST',\n          Blockly.JavaScript.ORDER_COMMA) || '[]';\n      code = 'Math.max.apply(null, ' + list + ')';\n      break;\n    case 'AVERAGE':\n      // mathMean([null,null,1,3]) == 2.0.\n      var functionName = Blockly.JavaScript.provideFunction_(\n          'mathMean',\n          ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n              '(myList) {',\n            '  return myList.reduce(function(x, y) {return x + y;}) / ' +\n                  'myList.length;',\n            '}']);\n      list = Blockly.JavaScript.valueToCode(block, 'LIST',\n          Blockly.JavaScript.ORDER_NONE) || '[]';\n      code = functionName + '(' + list + ')';\n      break;\n    case 'MEDIAN':\n      // mathMedian([null,null,1,3]) == 2.0.\n      var functionName = Blockly.JavaScript.provideFunction_(\n          'mathMedian',\n          ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n              '(myList) {',\n            '  var localList = myList.filter(function (x) ' +\n              '{return typeof x == \\'number\\';});',\n            '  if (!localList.length) return null;',\n            '  localList.sort(function(a, b) {return b - a;});',\n            '  if (localList.length % 2 == 0) {',\n            '    return (localList[localList.length / 2 - 1] + ' +\n              'localList[localList.length / 2]) / 2;',\n            '  } else {',\n            '    return localList[(localList.length - 1) / 2];',\n            '  }',\n            '}']);\n      list = Blockly.JavaScript.valueToCode(block, 'LIST',\n          Blockly.JavaScript.ORDER_NONE) || '[]';\n      code = functionName + '(' + list + ')';\n      break;\n    case 'MODE':\n      // As a list of numbers can contain more than one mode,\n      // the returned result is provided as an array.\n      // Mode of [3, 'x', 'x', 1, 1, 2, '3'] -> ['x', 1].\n      var functionName = Blockly.JavaScript.provideFunction_(\n          'mathModes',\n          ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n              '(values) {',\n            '  var modes = [];',\n            '  var counts = [];',\n            '  var maxCount = 0;',\n            '  for (var i = 0; i < values.length; i++) {',\n            '    var value = values[i];',\n            '    var found = false;',\n            '    var thisCount;',\n            '    for (var j = 0; j < counts.length; j++) {',\n            '      if (counts[j][0] === value) {',\n            '        thisCount = ++counts[j][1];',\n            '        found = true;',\n            '        break;',\n            '      }',\n            '    }',\n            '    if (!found) {',\n            '      counts.push([value, 1]);',\n            '      thisCount = 1;',\n            '    }',\n            '    maxCount = Math.max(thisCount, maxCount);',\n            '  }',\n            '  for (var j = 0; j < counts.length; j++) {',\n            '    if (counts[j][1] == maxCount) {',\n            '        modes.push(counts[j][0]);',\n            '    }',\n            '  }',\n            '  return modes;',\n            '}']);\n      list = Blockly.JavaScript.valueToCode(block, 'LIST',\n          Blockly.JavaScript.ORDER_NONE) || '[]';\n      code = functionName + '(' + list + ')';\n      break;\n    case 'STD_DEV':\n      var functionName = Blockly.JavaScript.provideFunction_(\n          'mathStandardDeviation',\n          ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n              '(numbers) {',\n            '  var n = numbers.length;',\n            '  if (!n) return null;',\n            '  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;',\n            '  var variance = 0;',\n            '  for (var j = 0; j < n; j++) {',\n            '    variance += Math.pow(numbers[j] - mean, 2);',\n            '  }',\n            '  variance = variance / n;',\n            '  return Math.sqrt(variance);',\n            '}']);\n      list = Blockly.JavaScript.valueToCode(block, 'LIST',\n          Blockly.JavaScript.ORDER_NONE) || '[]';\n      code = functionName + '(' + list + ')';\n      break;\n    case 'RANDOM':\n      var functionName = Blockly.JavaScript.provideFunction_(\n          'mathRandomList',\n          ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n              '(list) {',\n            '  var x = Math.floor(Math.random() * list.length);',\n            '  return list[x];',\n            '}']);\n      list = Blockly.JavaScript.valueToCode(block, 'LIST',\n          Blockly.JavaScript.ORDER_NONE) || '[]';\n      code = functionName + '(' + list + ')';\n      break;\n    default:\n      throw Error('Unknown operator: ' + func);\n  }\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['math_modulo'] = function(block) {\n  // Remainder computation.\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'DIVIDEND',\n      Blockly.JavaScript.ORDER_MODULUS) || '0';\n  var argument1 = Blockly.JavaScript.valueToCode(block, 'DIVISOR',\n      Blockly.JavaScript.ORDER_MODULUS) || '0';\n  var code = argument0 + ' % ' + argument1;\n  return [code, Blockly.JavaScript.ORDER_MODULUS];\n};\n\nBlockly.JavaScript['math_constrain'] = function(block) {\n  // Constrain a number between two limits.\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'VALUE',\n      Blockly.JavaScript.ORDER_COMMA) || '0';\n  var argument1 = Blockly.JavaScript.valueToCode(block, 'LOW',\n      Blockly.JavaScript.ORDER_COMMA) || '0';\n  var argument2 = Blockly.JavaScript.valueToCode(block, 'HIGH',\n      Blockly.JavaScript.ORDER_COMMA) || 'Infinity';\n  var code = 'Math.min(Math.max(' + argument0 + ', ' + argument1 + '), ' +\n      argument2 + ')';\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['math_random_int'] = function(block) {\n  // Random integer between [X] and [Y].\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'FROM',\n      Blockly.JavaScript.ORDER_COMMA) || '0';\n  var argument1 = Blockly.JavaScript.valueToCode(block, 'TO',\n      Blockly.JavaScript.ORDER_COMMA) || '0';\n  var functionName = Blockly.JavaScript.provideFunction_(\n      'mathRandomInt',\n      ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n          '(a, b) {',\n       '  if (a > b) {',\n       '    // Swap a and b to ensure a is smaller.',\n       '    var c = a;',\n       '    a = b;',\n       '    b = c;',\n       '  }',\n       '  return Math.floor(Math.random() * (b - a + 1) + a);',\n       '}']);\n  var code = functionName + '(' + argument0 + ', ' + argument1 + ')';\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['math_random_float'] = function(block) {\n  // Random fraction between 0 and 1.\n  return ['Math.random()', Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['math_atan2'] = function(block) {\n  // Arctangent of point (X, Y) in degrees from -180 to 180.\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'X',\n      Blockly.JavaScript.ORDER_COMMA) || '0';\n  var argument1 = Blockly.JavaScript.valueToCode(block, 'Y',\n      Blockly.JavaScript.ORDER_COMMA) || '0';\n  return ['Math.atan2(' + argument1 + ', ' + argument0 + ') / Math.PI * 180',\n      Blockly.JavaScript.ORDER_DIVISION];\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for procedure blocks.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.JavaScript.procedures');\n\ngoog.require('Blockly.JavaScript');\n\n\nBlockly.JavaScript['procedures_defreturn'] = function(block) {\n  // Define a procedure with a return value.\n  var funcName = Blockly.JavaScript.variableDB_.getName(\n      block.getFieldValue('NAME'), Blockly.PROCEDURE_CATEGORY_NAME);\n  var xfix1 = '';\n  if (Blockly.JavaScript.STATEMENT_PREFIX) {\n    xfix1 += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX,\n        block);\n  }\n  if (Blockly.JavaScript.STATEMENT_SUFFIX) {\n    xfix1 += Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX,\n        block);\n  }\n  if (xfix1) {\n    xfix1 = Blockly.JavaScript.prefixLines(xfix1, Blockly.JavaScript.INDENT);\n  }\n  var loopTrap = '';\n  if (Blockly.JavaScript.INFINITE_LOOP_TRAP) {\n    loopTrap = Blockly.JavaScript.prefixLines(\n        Blockly.JavaScript.injectId(Blockly.JavaScript.INFINITE_LOOP_TRAP,\n        block), Blockly.JavaScript.INDENT);\n  }\n  var branch = Blockly.JavaScript.statementToCode(block, 'STACK');\n  var returnValue = Blockly.JavaScript.valueToCode(block, 'RETURN',\n      Blockly.JavaScript.ORDER_NONE) || '';\n  var xfix2 = '';\n  if (branch && returnValue) {\n    // After executing the function body, revisit this block for the return.\n    xfix2 = xfix1;\n  }\n  if (returnValue) {\n    returnValue = Blockly.JavaScript.INDENT + 'return ' + returnValue + ';\\n';\n  }\n  var args = [];\n  var variables = block.getVars();\n  for (var i = 0; i < variables.length; i++) {\n    args[i] = Blockly.JavaScript.variableDB_.getName(variables[i],\n        Blockly.VARIABLE_CATEGORY_NAME);\n  }\n  var code = 'function ' + funcName + '(' + args.join(', ') + ') {\\n' +\n      xfix1 + loopTrap + branch + xfix2 + returnValue + '}';\n  code = Blockly.JavaScript.scrub_(block, code);\n  // Add % so as not to collide with helper functions in definitions list.\n  Blockly.JavaScript.definitions_['%' + funcName] = code;\n  return null;\n};\n\n// Defining a procedure without a return value uses the same generator as\n// a procedure with a return value.\nBlockly.JavaScript['procedures_defnoreturn'] =\n    Blockly.JavaScript['procedures_defreturn'];\n\nBlockly.JavaScript['procedures_callreturn'] = function(block) {\n  // Call a procedure with a return value.\n  var funcName = Blockly.JavaScript.variableDB_.getName(\n      block.getFieldValue('NAME'), Blockly.PROCEDURE_CATEGORY_NAME);\n  var args = [];\n  var variables = block.getVars();\n  for (var i = 0; i < variables.length; i++) {\n    args[i] = Blockly.JavaScript.valueToCode(block, 'ARG' + i,\n        Blockly.JavaScript.ORDER_COMMA) || 'null';\n  }\n  var code = funcName + '(' + args.join(', ') + ')';\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['procedures_callnoreturn'] = function(block) {\n  // Call a procedure with no return value.\n  // Generated code is for a function call as a statement is the same as a\n  // function call as a value, with the addition of line ending.\n  var tuple = Blockly.JavaScript['procedures_callreturn'](block);\n  return tuple[0] + ';\\n';\n};\n\nBlockly.JavaScript['procedures_ifreturn'] = function(block) {\n  // Conditionally return value from a procedure.\n  var condition = Blockly.JavaScript.valueToCode(block, 'CONDITION',\n      Blockly.JavaScript.ORDER_NONE) || 'false';\n  var code = 'if (' + condition + ') {\\n';\n  if (Blockly.JavaScript.STATEMENT_SUFFIX) {\n    // Inject any statement suffix here since the regular one at the end\n    // will not get executed if the return is triggered.\n    code += Blockly.JavaScript.prefixLines(\n        Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX, block),\n        Blockly.JavaScript.INDENT);\n  }\n  if (block.hasReturnValue_) {\n    var value = Blockly.JavaScript.valueToCode(block, 'VALUE',\n        Blockly.JavaScript.ORDER_NONE) || 'null';\n    code += Blockly.JavaScript.INDENT + 'return ' + value + ';\\n';\n  } else {\n    code += Blockly.JavaScript.INDENT + 'return;\\n';\n  }\n  code += '}\\n';\n  return code;\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for text blocks.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.JavaScript.texts');\n\ngoog.require('Blockly.JavaScript');\n\n\nBlockly.JavaScript['text'] = function(block) {\n  // Text value.\n  var code = Blockly.JavaScript.quote_(block.getFieldValue('TEXT'));\n  return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n\nBlockly.JavaScript['text_multiline'] = function(block) {\n  // Text value.\n  var code = Blockly.JavaScript.multiline_quote_(block.getFieldValue('TEXT'));\n  if (code.indexOf('\\n') != -1) {\n      code = '(' + code + ')'\n  }\n  return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n\n/**\n * Enclose the provided value in 'String(...)' function.\n * Leave string literals alone.\n * @param {string} value Code evaluating to a value.\n * @return {string} Code evaluating to a string.\n * @private\n */\nBlockly.JavaScript.text.forceString_ = function(value) {\n  if (Blockly.JavaScript.text.forceString_.strRegExp.test(value)) {\n    return value;\n  }\n  return 'String(' + value + ')';\n};\n\n/**\n * Regular expression to detect a single-quoted string literal.\n */\nBlockly.JavaScript.text.forceString_.strRegExp = /^\\s*'([^']|\\\\')*'\\s*$/;\n\nBlockly.JavaScript['text_join'] = function(block) {\n  // Create a string made up of any number of elements of any type.\n  switch (block.itemCount_) {\n    case 0:\n      return ['\\'\\'', Blockly.JavaScript.ORDER_ATOMIC];\n    case 1:\n      var element = Blockly.JavaScript.valueToCode(block, 'ADD0',\n          Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n      var code = Blockly.JavaScript.text.forceString_(element);\n      return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    case 2:\n      var element0 = Blockly.JavaScript.valueToCode(block, 'ADD0',\n          Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n      var element1 = Blockly.JavaScript.valueToCode(block, 'ADD1',\n          Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n      var code = Blockly.JavaScript.text.forceString_(element0) + ' + ' +\n          Blockly.JavaScript.text.forceString_(element1);\n      return [code, Blockly.JavaScript.ORDER_ADDITION];\n    default:\n      var elements = new Array(block.itemCount_);\n      for (var i = 0; i < block.itemCount_; i++) {\n        elements[i] = Blockly.JavaScript.valueToCode(block, 'ADD' + i,\n            Blockly.JavaScript.ORDER_COMMA) || '\\'\\'';\n      }\n      var code = '[' + elements.join(',') + '].join(\\'\\')';\n      return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  }\n};\n\nBlockly.JavaScript['text_append'] = function(block) {\n  // Append to a variable in place.\n  var varName = Blockly.JavaScript.variableDB_.getName(\n      block.getFieldValue('VAR'), Blockly.VARIABLE_CATEGORY_NAME);\n  var value = Blockly.JavaScript.valueToCode(block, 'TEXT',\n      Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n  return varName + ' += ' + Blockly.JavaScript.text.forceString_(value) + ';\\n';\n};\n\nBlockly.JavaScript['text_length'] = function(block) {\n  // String or array length.\n  var text = Blockly.JavaScript.valueToCode(block, 'VALUE',\n      Blockly.JavaScript.ORDER_FUNCTION_CALL) || '\\'\\'';\n  return [text + '.length', Blockly.JavaScript.ORDER_MEMBER];\n};\n\nBlockly.JavaScript['text_isEmpty'] = function(block) {\n  // Is the string null or array empty?\n  var text = Blockly.JavaScript.valueToCode(block, 'VALUE',\n      Blockly.JavaScript.ORDER_MEMBER) || '\\'\\'';\n  return ['!' + text + '.length', Blockly.JavaScript.ORDER_LOGICAL_NOT];\n};\n\nBlockly.JavaScript['text_indexOf'] = function(block) {\n  // Search the text for a substring.\n  var operator = block.getFieldValue('END') == 'FIRST' ?\n      'indexOf' : 'lastIndexOf';\n  var substring = Blockly.JavaScript.valueToCode(block, 'FIND',\n      Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n  var text = Blockly.JavaScript.valueToCode(block, 'VALUE',\n      Blockly.JavaScript.ORDER_MEMBER) || '\\'\\'';\n  var code = text + '.' + operator + '(' + substring + ')';\n  // Adjust index if using one-based indices.\n  if (block.workspace.options.oneBasedIndex) {\n    return [code + ' + 1', Blockly.JavaScript.ORDER_ADDITION];\n  }\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['text_charAt'] = function(block) {\n  // Get letter at index.\n  // Note: Until January 2013 this block did not have the WHERE input.\n  var where = block.getFieldValue('WHERE') || 'FROM_START';\n  var textOrder = (where == 'RANDOM') ? Blockly.JavaScript.ORDER_NONE :\n      Blockly.JavaScript.ORDER_MEMBER;\n  var text = Blockly.JavaScript.valueToCode(block, 'VALUE',\n      textOrder) || '\\'\\'';\n  switch (where) {\n    case 'FIRST':\n      var code = text + '.charAt(0)';\n      return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    case 'LAST':\n      var code = text + '.slice(-1)';\n      return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    case 'FROM_START':\n      var at = Blockly.JavaScript.getAdjusted(block, 'AT');\n      // Adjust index if using one-based indices.\n      var code = text + '.charAt(' + at + ')';\n      return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    case 'FROM_END':\n      var at = Blockly.JavaScript.getAdjusted(block, 'AT', 1, true);\n      var code = text + '.slice(' + at + ').charAt(0)';\n      return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    case 'RANDOM':\n      var functionName = Blockly.JavaScript.provideFunction_(\n          'textRandomLetter',\n          ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n              '(text) {',\n           '  var x = Math.floor(Math.random() * text.length);',\n           '  return text[x];',\n           '}']);\n      var code = functionName + '(' + text + ')';\n      return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n  }\n  throw Error('Unhandled option (text_charAt).');\n};\n\n/**\n * Returns an expression calculating the index into a string.\n * @param {string} stringName Name of the string, used to calculate length.\n * @param {string} where The method of indexing, selected by dropdown in Blockly\n * @param {string=} opt_at The optional offset when indexing from start/end.\n * @return {string|undefined} Index expression.\n * @private\n */\nBlockly.JavaScript.text.getIndex_ = function(stringName, where, opt_at) {\n  if (where == 'FIRST') {\n    return '0';\n  } else if (where == 'FROM_END') {\n    return stringName + '.length - 1 - ' + opt_at;\n  } else if (where == 'LAST') {\n    return stringName + '.length - 1';\n  } else {\n    return opt_at;\n  }\n};\n\nBlockly.JavaScript['text_getSubstring'] = function(block) {\n  // Get substring.\n  var text = Blockly.JavaScript.valueToCode(block, 'STRING',\n      Blockly.JavaScript.ORDER_FUNCTION_CALL) || '\\'\\'';\n  var where1 = block.getFieldValue('WHERE1');\n  var where2 = block.getFieldValue('WHERE2');\n  if (where1 == 'FIRST' && where2 == 'LAST') {\n    var code = text;\n  } else if (text.match(/^'?\\w+'?$/) ||\n      (where1 != 'FROM_END' && where1 != 'LAST' &&\n      where2 != 'FROM_END' && where2 != 'LAST')) {\n    // If the text is a variable or literal or doesn't require a call for\n    // length, don't generate a helper function.\n    switch (where1) {\n      case 'FROM_START':\n        var at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n        break;\n      case 'FROM_END':\n        var at1 = Blockly.JavaScript.getAdjusted(block, 'AT1', 1, false,\n            Blockly.JavaScript.ORDER_SUBTRACTION);\n        at1 = text + '.length - ' + at1;\n        break;\n      case 'FIRST':\n        var at1 = '0';\n        break;\n      default:\n        throw Error('Unhandled option (text_getSubstring).');\n    }\n    switch (where2) {\n      case 'FROM_START':\n        var at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 1);\n        break;\n      case 'FROM_END':\n        var at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 0, false,\n            Blockly.JavaScript.ORDER_SUBTRACTION);\n        at2 = text + '.length - ' + at2;\n        break;\n      case 'LAST':\n        var at2 = text + '.length';\n        break;\n      default:\n        throw Error('Unhandled option (text_getSubstring).');\n    }\n    code = text + '.slice(' + at1 + ', ' + at2 + ')';\n  } else {\n    var at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n    var at2 = Blockly.JavaScript.getAdjusted(block, 'AT2');\n    var getIndex_ = Blockly.JavaScript.text.getIndex_;\n    var wherePascalCase = {'FIRST': 'First', 'LAST': 'Last',\n      'FROM_START': 'FromStart', 'FROM_END': 'FromEnd'};\n    var functionName = Blockly.JavaScript.provideFunction_(\n        'subsequence' + wherePascalCase[where1] + wherePascalCase[where2],\n        ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n        '(sequence' +\n        // The value for 'FROM_END' and'FROM_START' depends on `at` so\n        // we add it as a parameter.\n        ((where1 == 'FROM_END' || where1 == 'FROM_START') ? ', at1' : '') +\n        ((where2 == 'FROM_END' || where2 == 'FROM_START') ? ', at2' : '') +\n        ') {',\n          '  var start = ' + getIndex_('sequence', where1, 'at1') + ';',\n          '  var end = ' + getIndex_('sequence', where2, 'at2') + ' + 1;',\n          '  return sequence.slice(start, end);',\n          '}']);\n    var code = functionName + '(' + text +\n        // The value for 'FROM_END' and 'FROM_START' depends on `at` so we\n        // pass it.\n        ((where1 == 'FROM_END' || where1 == 'FROM_START') ? ', ' + at1 : '') +\n        ((where2 == 'FROM_END' || where2 == 'FROM_START') ? ', ' + at2 : '') +\n        ')';\n  }\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['text_changeCase'] = function(block) {\n  // Change capitalization.\n  var OPERATORS = {\n    'UPPERCASE': '.toUpperCase()',\n    'LOWERCASE': '.toLowerCase()',\n    'TITLECASE': null\n  };\n  var operator = OPERATORS[block.getFieldValue('CASE')];\n  var textOrder = operator ? Blockly.JavaScript.ORDER_MEMBER :\n      Blockly.JavaScript.ORDER_NONE;\n  var text = Blockly.JavaScript.valueToCode(block, 'TEXT',\n      textOrder) || '\\'\\'';\n  if (operator) {\n    // Upper and lower case are functions built into JavaScript.\n    var code = text + operator;\n  } else {\n    // Title case is not a native JavaScript function.  Define one.\n    var functionName = Blockly.JavaScript.provideFunction_(\n        'textToTitleCase',\n        ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n            '(str) {',\n         '  return str.replace(/\\\\S+/g,',\n         '      function(txt) {return txt[0].toUpperCase() + ' +\n            'txt.substring(1).toLowerCase();});',\n         '}']);\n    var code = functionName + '(' + text + ')';\n  }\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['text_trim'] = function(block) {\n  // Trim spaces.\n  var OPERATORS = {\n    'LEFT': \".replace(/^[\\\\s\\\\xa0]+/, '')\",\n    'RIGHT': \".replace(/[\\\\s\\\\xa0]+$/, '')\",\n    'BOTH': '.trim()'\n  };\n  var operator = OPERATORS[block.getFieldValue('MODE')];\n  var text = Blockly.JavaScript.valueToCode(block, 'TEXT',\n      Blockly.JavaScript.ORDER_MEMBER) || '\\'\\'';\n  return [text + operator, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['text_print'] = function(block) {\n  // Print statement.\n  var msg = Blockly.JavaScript.valueToCode(block, 'TEXT',\n      Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n  return 'window.alert(' + msg + ');\\n';\n};\n\nBlockly.JavaScript['text_prompt_ext'] = function(block) {\n  // Prompt function.\n  if (block.getField('TEXT')) {\n    // Internal message.\n    var msg = Blockly.JavaScript.quote_(block.getFieldValue('TEXT'));\n  } else {\n    // External message.\n    var msg = Blockly.JavaScript.valueToCode(block, 'TEXT',\n        Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n  }\n  var code = 'window.prompt(' + msg + ')';\n  var toNumber = block.getFieldValue('TYPE') == 'NUMBER';\n  if (toNumber) {\n    code = 'Number(' + code + ')';\n  }\n  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n\nBlockly.JavaScript['text_prompt'] = Blockly.JavaScript['text_prompt_ext'];\n\nBlockly.JavaScript['text_count'] = function(block) {\n  var text = Blockly.JavaScript.valueToCode(block, 'TEXT',\n      Blockly.JavaScript.ORDER_MEMBER) || '\\'\\'';\n  var sub = Blockly.JavaScript.valueToCode(block, 'SUB',\n      Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n  var functionName = Blockly.JavaScript.provideFunction_(\n      'textCount',\n      ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n          '(haystack, needle) {',\n       '  if (needle.length === 0) {',\n       '    return haystack.length + 1;',\n       '  } else {',\n       '    return haystack.split(needle).length - 1;',\n       '  }',\n       '}']);\n  var code = functionName + '(' + text + ', ' + sub + ')';\n  return [code, Blockly.JavaScript.ORDER_SUBTRACTION];\n};\n\nBlockly.JavaScript['text_replace'] = function(block) {\n  var text = Blockly.JavaScript.valueToCode(block, 'TEXT',\n      Blockly.JavaScript.ORDER_MEMBER) || '\\'\\'';\n  var from = Blockly.JavaScript.valueToCode(block, 'FROM',\n      Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n  var to = Blockly.JavaScript.valueToCode(block, 'TO',\n      Blockly.JavaScript.ORDER_NONE) || '\\'\\'';\n  // The regex escaping code below is taken from the implementation of\n  // goog.string.regExpEscape.\n  var functionName = Blockly.JavaScript.provideFunction_(\n      'textReplace',\n      ['function ' + Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_ +\n          '(haystack, needle, replacement) {',\n       '  needle = ' +\n           'needle.replace(/([-()\\\\[\\\\]{}+?*.$\\\\^|,:#<!\\\\\\\\])/g,\"\\\\\\\\$1\")',\n       '                 .replace(/\\\\x08/g,\"\\\\\\\\x08\");',\n       '  return haystack.replace(new RegExp(needle, \\'g\\'), replacement);',\n       '}']);\n  var code = functionName + '(' + text + ', ' + from + ', ' + to + ')';\n  return [code, Blockly.JavaScript.ORDER_MEMBER];\n};\n\nBlockly.JavaScript['text_reverse'] = function(block) {\n  var text = Blockly.JavaScript.valueToCode(block, 'TEXT',\n      Blockly.JavaScript.ORDER_MEMBER) || '\\'\\'';\n  var code = text + '.split(\\'\\').reverse().join(\\'\\')';\n  return [code, Blockly.JavaScript.ORDER_MEMBER];\n};\n","/**\n * @license\n * Copyright 2012 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Generating JavaScript for variable blocks.\n * @author fraser@google.com (Neil Fraser)\n */\n'use strict';\n\ngoog.provide('Blockly.JavaScript.variables');\n\ngoog.require('Blockly.JavaScript');\n\n\nBlockly.JavaScript['variables_get'] = function(block) {\n  // Variable getter.\n  var code = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'),\n      Blockly.VARIABLE_CATEGORY_NAME);\n  return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n\nBlockly.JavaScript['variables_set'] = function(block) {\n  // Variable setter.\n  var argument0 = Blockly.JavaScript.valueToCode(block, 'VALUE',\n      Blockly.JavaScript.ORDER_ASSIGNMENT) || '0';\n  var varName = Blockly.JavaScript.variableDB_.getName(\n      block.getFieldValue('VAR'), Blockly.VARIABLE_CATEGORY_NAME);\n  return varName + ' = ' + argument0 + ';\\n';\n};\n","/* eslint-disable */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) { // AMD\n    define(['./core', './javascript_compressed.js'], factory);\n  } else if (typeof exports === 'object') { // Node.js\n    module.exports = factory(require('./core'), require('./javascript_compressed.js'));\n  } else { // Browser\n    root.BlocklyJavaScript = factory(root.Blockly, root.BlocklyJavaScript);\n  }\n}(this, function(Blockly, BlocklyJavaScript) {\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview JavaScript Generator module.\n */\n\n/* eslint-disable */\n'use strict';\n\nBlockly.JavaScript = BlocklyJavaScript;\n\nreturn BlocklyJavaScript;\n})); \n","/* eslint-disable */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) { // AMD\n    define(['./core-browser', './msg/en', './blocks', './javascript'], factory);\n  } else if (typeof exports === 'object') { // Node.js\n    module.exports = factory(require('./core-browser'), require('./msg/en'), require('./blocks'), require('./javascript'));\n  } else { // Browser\n    root.Blockly = factory(root.Blockly, root.En, root.BlocklyBlocks, root.BlocklyJS);\n  }\n}(this, function(Blockly, En, BlocklyBlocks, BlocklyJS) {\n/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly module for the browser. This includes Blockly core\n * and built in blocks, the JavaScript code generator and the English block\n * localization files.\n */\n\n/* eslint-disable */\n'use strict';\n\n// Include the EN Locale by default.\nBlockly.setLocale(En);\n\nBlockly.Blocks = Blockly.Blocks || {};\nObject.keys(BlocklyBlocks).forEach(function (k) {\n  Blockly.Blocks[k] = BlocklyBlocks[k];\n});\n\nBlockly.JavaScript = BlocklyJS;\nreturn Blockly;\n})); \n","/* eslint-disable */\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) { // AMD\n    define(['./browser'], factory);\n  } else if (typeof exports === 'object') { // Node.js\n    module.exports = factory(require('./node'));\n  } else { // Browser\n    root.Blockly = factory(root.Blockly);\n  }\n}(this, function(Blockly) {\n/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blockly module.\n */\n\n/* eslint-disable */\n'use strict';\nreturn Blockly;\n})); \n","import { Masis, MasisPosition, MasisSort } from 'masis';\nimport { MasisDelete } from '../js/lib/masis.delete.js';\nimport { MasisMove } from '../js/lib/masis.move.js';\nimport { MasisResize } from '../js/lib/masis.resize.js';\nimport { themes } from './YadomsThemes';\nimport { YadomsHelper } from './YadomsHelper';\nimport { ResizeObserver } from 'resize-observer';\nimport * as Blockly from 'blockly';\n\ndeclare global {\n  interface Window {\n    YadomsApp: Yadoms;\n  }\n}\n\nexport class Yadoms {\n  public $style = null;\n  public components = {};\n  public pages = [];\n\n  // CMS : card management system\n  private _masis = null;\n  private _masisMove = null;\n  private _masisResize = null;\n  private _masisDelete = null;\n  private _breakpoints = {\n    width: [],\n    height: []\n  };\n  private _maxCardWidthSize: number = 5;\n  private _maxCardHeightSize: number = 5;\n  private _positionOptions = {\n    pad: 154\n  };\n\n  public constructor() {\n    if (\n      window.matchMedia &&\n      window.matchMedia('(prefers-color-scheme: dark)').matches\n    )\n      Yadoms.changeTheme('dark');\n    else Yadoms.changeTheme('light');\n    // creation of a style balise to insert all components styles\n    this.$style = document.createElement('style');\n    document.querySelector('head').appendChild(this.$style);\n\n    let configState = false;\n    document.querySelector('#button-config').addEventListener(\n      'click',\n      ev => {\n        ev.preventDefault();\n        configState = !configState;\n        let $e = ev.currentTarget as HTMLElement;\n        $e.classList.remove('active');\n        if (configState) {\n          $e.classList.add('active');\n        }\n      },\n      false\n    );\n  }\n\n  public static changeTheme(theme: string) {\n    if ('' == theme) theme = 'light';\n    themes.forEach((t: string) => {\n      document.querySelector('html').classList.remove(`${t}_theme`);\n    });\n    document.querySelector('html').classList.add(`${theme}_theme`);\n    return `The theme is set to ${theme} now`;\n  }\n\n  public static ready(fn) {\n    if (document.readyState != 'loading') {\n      fn();\n    } else {\n      document.addEventListener('DOMContentLoaded', fn);\n    }\n  }\n\n  public createMenu() {\n    const $sidebar = document.querySelector('nav#menu ul');\n    this.pages.forEach(page => {\n      let $item = document.createElement('li');\n      $item.innerHTML = `\n        <a href=\"#/${page.slug}\" title=\"${page.name}\">\n          <span class=\"icon\">\n            <i class=\"fas fa-${page.icon}\"></i>\n          </span>\n          <span class=\"word\">${page.name}</span>\n          <span class=\"sr-only\">${page.name}</span>\n        </a>\n      `;\n      $sidebar.appendChild($item);\n    });\n  }\n\n  public createNavigationSystem() {\n    let $items = document.querySelectorAll('nav#menu ul li a');\n    $items.forEach($el => {\n      $el.addEventListener(\n        'click',\n        ev => {\n          ev.stopImmediatePropagation();\n          let $e = ev.currentTarget as HTMLElement;\n          this.viewPage($e.getAttribute('href').slice(2));\n        },\n        false\n      );\n    });\n  }\n\n  private _createCard(\n    width,\n    height,\n    title = '',\n    content = '',\n    battery = -1,\n    signal = -1\n  ) {\n    let $div = document.createElement('div');\n    let cls = ['card'];\n    $div.classList.add(...cls);\n    let batteryContent = '';\n    let signalContent = '';\n    if (battery != -1) {\n      let icon = '';\n      if (0 == battery) icon = 'empty red';\n      else if (0.25 == battery) icon = 'quarter';\n      else if (0.5 == battery) icon = 'half';\n      else if (0.75 == battery) icon = 'three-quarters';\n      else if (1 == battery) icon = 'full text-green-600';\n      batteryContent = `<span class=\"icon\"><i class=\"fas fa-battery-${icon}\"></i></span>`;\n    }\n    if (signal != -1) {\n      let cl = '';\n      if (signal < 0.5) cl = 'red';\n      signalContent = `<span class=\"icon\"><i class=\"fas fa-wifi ${cl}\"></i></span>`;\n    }\n    $div.innerHTML = `\n      <div class=\"card-title clearfix card-width-${width}\">\n        ${batteryContent}\n        ${signalContent}\n        <span class=\"title\">${title}</span>\n      </div>\n      <div class=\"card-wrapper\">\n        <div class=\"card-width-${width} card-height-${height}\">\n          ${content}\n        </div>\n      </div>\n    `;\n    return $div;\n  }\n\n  public createCardManagementSystem() {\n    this._masis = new Masis('#cards');\n    let self = this;\n\n    for (\n      let i = 1;\n      i <= Math.max(this._maxCardWidthSize, this._maxCardHeightSize);\n      i++\n    ) {\n      const $div = this._createCard(\n        Math.min(i, this._maxCardWidthSize),\n        Math.min(i, this._maxCardHeightSize)\n      );\n      document.querySelector('#cards').appendChild($div);\n      const style = getComputedStyle($div);\n      const rect = $div.getBoundingClientRect();\n      let $iw, $ih;\n      $iw =\n        rect.width + parseInt(style.marginLeft) + parseInt(style.marginRight);\n      $ih =\n        rect.height + parseInt(style.marginTop) + parseInt(style.marginBottom);\n      this._breakpoints.width.push($iw);\n      this._breakpoints.height.push($ih);\n      document.querySelector('#cards').removeChild($div);\n    }\n\n    this._masisMove = new MasisMove(this._masis, {\n      class: '',\n      ghost: '',\n      exclude: ''\n    });\n\n    const resizeCard = ($el, width, height, setHeight = false) => {\n      for (let i = 1; i < 6; i++) {\n        $el.classList.remove(`card-width-${i}`);\n        if (setHeight) $el.classList.remove(`card-height-${i}`);\n      }\n      $el.classList.add(`card-width-${width}`);\n      if (setHeight) $el.classList.add(`card-height-${height}`);\n    };\n\n    this._masisResize = new MasisResize(this._masis, {\n      class: '',\n      active: '',\n      selector: '.card-wrapper > div',\n      breakpoints: this._breakpoints,\n      callbackMove: ($card, w, h) => {\n        let newW = parseInt(w) + parseInt($card.dataset.cardWidth);\n        let newH = parseInt(h) + parseInt($card.dataset.cardHeight);\n        if (newW < parseInt($card.dataset.cardMinWidth))\n          newW = parseInt($card.dataset.cardMinWidth);\n        if (newH < parseInt($card.dataset.cardMinHeight))\n          newH = parseInt($card.dataset.cardMinHeight);\n        if (newW > self._maxCardWidthSize) newW = self._maxCardWidthSize;\n        if (newH > self._maxCardHeightSize) newW = self._maxCardHeightSize;\n        resizeCard($card.querySelector('.card-title'), newW, newH);\n        resizeCard(\n          $card.querySelector('.card-wrapper > div'),\n          newW,\n          newH,\n          true\n        );\n        $card.dataset.cardTmpWidth = newW;\n        $card.dataset.cardTmpHeight = newH;\n        MasisPosition(self._masis);\n      },\n      callbackEnd: $card => {\n        $card.dataset.cardWidth = $card.dataset.cardTmpWidth;\n        $card.dataset.cardHeight = $card.dataset.cardTmpHeight;\n      }\n    });\n\n    this._masisDelete = new MasisDelete(this._masis, {\n      class: '',\n      message: 'Etes-vous sr de vouloir supprimer cette tuile ?'\n    });\n\n    MasisPosition(this._masis, this._positionOptions);\n\n    const resizeObserver = new ResizeObserver(entries => {\n      MasisPosition(this._masis, this._positionOptions);\n    });\n\n    resizeObserver.observe(document.querySelector('#cards'));\n\n    let wrenchState = false;\n\n    document.querySelector('#button-design').addEventListener(\n      'click',\n      ev => {\n        ev.preventDefault();\n        wrenchState = !wrenchState;\n        let $e = ev.currentTarget as HTMLElement;\n        $e.classList.remove('active');\n        if (wrenchState) {\n          $e.classList.add('active');\n          self._masis.$children.forEach($el => {\n            $el.classList.add('');\n          });\n        } else {\n          self._masis.$children.forEach($el => {\n            $el.classList.remove('');\n          });\n        }\n      },\n      false\n    );\n  }\n\n  public viewPage(slug: string) {\n    if (slug.startsWith('!/')) slug = '';\n    let found: Boolean = false;\n    for (let page of this.pages) {\n      if (page.slug == slug) {\n        found = true;\n        if (page.background != '') {\n          let $cover = document.querySelector(\n            '#illustration .cover'\n          ) as HTMLDivElement;\n          $cover.style.backgroundImage = `url(${page.background})`;\n        }\n        let $sidebar_items = document.querySelectorAll('#menu a');\n        $sidebar_items.forEach(el => {\n          let $e = el.parentNode as HTMLElement;\n          $e.classList.remove('active');\n          if (el.getAttribute('href') == `#/${page.slug}`)\n            $e.classList.add('active');\n        });\n        this._populate(page.cards);\n        break;\n      }\n    }\n    if (!found) this.viewPage('');\n  }\n\n  private _postProcessConfigPageCode() {\n    var toolbox = document.getElementById('toolbox');\n    var workspace = Blockly.inject('blocklyDiv', {\n      comments: true,\n      collapse: true,\n      disable: true,\n      grid: {\n        spacing: 25,\n        length: 3,\n        colour: '#ccc',\n        snap: true\n      },\n      toolbox: toolbox,\n      zoom: {\n        controls: true,\n        wheel: true,\n        startScale: 1.0,\n        maxScale: 4,\n        minScale: 0.25,\n        scaleSpeed: 1.1\n      }\n    });\n  }\n\n  private _viewConfigPage(slug: string, title: string) {\n    slug = slug.substr(2);\n    let content: string = '';\n    fetch(`/config_pages/${slug}.html`)\n      .then(response => {\n        return response.text();\n      })\n      .then(html => {\n        this._generateConfigPage(title, html);\n        if ('code' == slug) this._postProcessConfigPageCode();\n      });\n  }\n\n  private _generateConfigPage(title: string, content: string) {\n    let subpagetemplate: string = `\n      <div class=\"subpage-wrapper\">\n        <div class=\"subpage-title\">\n          <span>${title}</span>\n          <a id=\"subpage-close\" href=\"#\">&times;</a>\n        </div>\n        <div class=\"subpage-content\">${content}</div>\n      </div>\n    `;\n    let $subpage = document.createElement('div');\n    $subpage.classList.add('subpage');\n    $subpage.innerHTML = subpagetemplate;\n    document.querySelector('body').appendChild($subpage);\n    document.querySelector('#subpage-close').addEventListener(\n      'click',\n      () => {\n        let sub = document.querySelector('.subpage');\n        sub.parentNode.removeChild(sub);\n      },\n      true\n    );\n  }\n\n  private _wrapperRendering(render: string): string {\n    let result: string = render;\n    result = result.replace(/-=\\[ID\\]=-/g, `_${Date.now()}`);\n    return result;\n  }\n\n  private _generateCard(card) {\n    card.properties.cardTitle = card.title;\n    let $card = this._createCard(\n      card.width,\n      card.height,\n      card.title,\n      this._wrapperRendering(\n        this.components[card.type].render(card.properties)\n      ),\n      typeof card.battery != undefined ? card.battery : -1,\n      typeof card.signal != undefined ? card.signal : -1\n    );\n    const cls = ['ease-in-expo'];\n    $card.classList.add(...cls);\n    // some datas to resize / move / ...\n    $card.dataset.cardWidth = card.width;\n    $card.dataset.cardMinWidth = card.minWidth;\n    $card.dataset.cardHeight = card.height;\n    $card.dataset.cardMinHeight = card.minHeight;\n    $card.dataset.sort = MasisMove.joliNumber(card.index);\n    document.querySelector('#cards').appendChild($card);\n    this.components[card.type].init($card);\n  }\n\n  private _populate(cards) {\n    document.querySelector('#cards').innerHTML = '';\n    let self = this;\n    let cranberries = [];\n    cards.forEach(card => {\n      cranberries.push(\n        new Promise(resolve => {\n          YadomsHelper.loadComponent(card.type).then(() => {\n            self._generateCard(card);\n            resolve();\n          });\n        })\n      );\n    });\n    Promise.all(cranberries).then(() => {\n      this._masis.populate();\n      MasisSort(this._masis, '[data-sort]');\n      this._masisMove.init();\n      this._masisResize.init();\n      this._masisDelete.init();\n      MasisPosition(this._masis);\n    });\n  }\n\n  public manageAppLinks() {\n    document.querySelectorAll('#menu-config a').forEach($a => {\n      $a.addEventListener(\n        'click',\n        ev => {\n          ev.stopImmediatePropagation();\n          this._viewConfigPage(\n            $a.getAttribute('href').slice(2),\n            $a.getAttribute('title')\n          );\n        },\n        true\n      );\n    });\n  }\n}\n\nwindow.YadomsApp = new Yadoms();\n","import { Yadoms } from './Yadoms';\nimport { themes } from './YadomsThemes';\n\nexport class YadomsConsole {\n  public constructor() {\n    console.log(`\n __ __       _               \n|  |  |___ _| |___ _____ ___ \n|_   _| .'| . | . |     |_ -|\n  |_| |__,|___|___|_|_|_|___|\nWelcome to the dev world!\nTo have any help, type Yadoms.help()\n`);\n  }\n\n  public help(func = '') {\n    if (func != '') {\n      if ('changeTheme' == func) {\n        console.log('List of available themes');\n        console.table(themes);\n      }\n    } else if ('' == func) {\n      console.log('List of available functions');\n      console.table({\n        'Yadoms.lightOn()': 'Change the current theme to the light mode',\n        'Yadoms.lightOff()': 'Change the current theme to the dark mode',\n        'Yadoms.changeTheme(theme)':\n          'Change the current theme to a specific theme',\n      });\n      console.log(\n        'To have more information about a function, gives the name of the function in parameter.'\n      );\n      console.info(\"Example : yadoms.help('changeTheme').\");\n    } else {\n      console.log('no documentation for this function');\n    }\n  }\n\n  public lightOn() {\n    return Yadoms.changeTheme('');\n  }\n\n  public lightOff() {\n    return Yadoms.changeTheme('dark');\n  }\n}\n","import { Yadoms } from './Yadoms';\nimport { YadomsConsole } from './YadomsConsole';\nimport { YadomsHelper } from './YadomsHelper';\n\ndeclare global {\n  interface Window {\n    Yadoms: YadomsConsole;\n    YadomsHelper: YadomsHelper;\n  }\n}\n\nYadoms.ready(() => {\n  window.Yadoms = new YadomsConsole();\n  window.YadomsHelper = new YadomsHelper();\n\n  fetch('/yadoms.instance.json')\n    .then(response => response.json())\n    .then(json => {\n      window.YadomsApp.pages = json.instance.pages;\n      window.YadomsApp.createMenu();\n      window.YadomsApp.createNavigationSystem();\n      window.YadomsApp.createCardManagementSystem();\n      window.YadomsApp.manageAppLinks();\n      window.YadomsApp.viewPage(window.location.hash.slice(2));\n    });\n});\n"]}